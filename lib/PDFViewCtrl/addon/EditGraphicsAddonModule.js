!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PDFViewCtrl")):"function"==typeof define&&define.amd?define(["PDFViewCtrl"],e):"object"==typeof exports?exports.PDFViewCtrl_EditGraphicsAddonModule=e(require("PDFViewCtrl")):t.PDFViewCtrl_EditGraphicsAddonModule=e(t.PDFViewCtrl)}(self,(function(t){return function(){"use strict";var e={5778:function(e){e.exports=t},509:function(t,e,n){var r=n(9985),o=n(3691),i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not a function")}},2655:function(t,e,n){var r=n(9429),o=n(3691),i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not a constructor")}},3550:function(t,e,n){var r=n(9985),o=String,i=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw new i("Can't set "+o(t)+" as a prototype")}},7370:function(t,e,n){var r=n(4201),o=n(5391),i=n(2560).f,a=r("unscopables"),s=Array.prototype;void 0===s[a]&&i(s,a,{configurable:!0,value:o(null)}),t.exports=function(t){s[a][t]=!0}},1514:function(t,e,n){var r=n(730).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},767:function(t,e,n){var r=n(3622),o=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw new o("Incorrect invocation")}},5027:function(t,e,n){var r=n(8999),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw new i(o(t)+" is not an object")}},7075:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},4872:function(t,e,n){var r,o,i,a=n(7075),s=n(7697),c=n(9037),u=n(9985),h=n(8999),f=n(6812),l=n(926),p=n(3691),d=n(5773),v=n(1880),g=n(2148),m=n(3622),E=n(1868),y=n(9385),T=n(4201),_=n(4630),A=n(618),R=A.enforce,x=A.get,C=c.Int8Array,w=C&&C.prototype,S=c.Uint8ClampedArray,b=S&&S.prototype,P=C&&E(C),L=w&&E(w),O=Object.prototype,H=c.TypeError,D=T("toStringTag"),I=_("TYPED_ARRAY_TAG"),j="TypedArrayConstructor",N=a&&!!y&&"Opera"!==l(c.opera),U=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},k=function(t){var e=E(t);if(h(e)){var n=x(e);return n&&f(n,j)?n[j]:k(e)}},F=function(t){if(!h(t))return!1;var e=l(t);return f(B,e)||f(M,e)};for(r in B)(i=(o=c[r])&&o.prototype)?R(i)[j]=o:N=!1;for(r in M)(i=(o=c[r])&&o.prototype)&&(R(i)[j]=o);if((!N||!u(P)||P===Function.prototype)&&(P=function(){throw new H("Incorrect invocation")},N))for(r in B)c[r]&&y(c[r],P);if((!N||!L||L===O)&&(L=P.prototype,N))for(r in B)c[r]&&y(c[r].prototype,L);if(N&&E(b)!==L&&y(b,L),s&&!f(L,D))for(r in U=!0,g(L,D,{configurable:!0,get:function(){return h(this)?this[I]:void 0}}),B)c[r]&&d(c[r],I,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:U&&I,aTypedArray:function(t){if(F(t))return t;throw new H("Target is not a typed array")},aTypedArrayConstructor:function(t){if(u(t)&&(!y||m(P,t)))return t;throw new H(p(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,r){if(s){if(n)for(var o in B){var i=c[o];if(i&&f(i.prototype,t))try{delete i.prototype[t]}catch(n){try{i.prototype[t]=e}catch(t){}}}L[t]&&!n||v(L,t,n?e:N&&w[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,n){var r,o;if(s){if(y){if(n)for(r in B)if((o=c[r])&&f(o,t))try{delete o[t]}catch(t){}if(P[t]&&!n)return;try{return v(P,t,n?e:N&&P[t]||e)}catch(t){}}for(r in B)!(o=c[r])||o[t]&&!n||v(o,t,e)}},getTypedArrayConstructor:k,isView:function(t){if(!h(t))return!1;var e=l(t);return"DataView"===e||f(B,e)||f(M,e)},isTypedArray:F,TypedArray:P,TypedArrayPrototype:L}},1055:function(t,e,n){var r=n(4071),o=n(2615),i=n(690),a=n(1228),s=n(3292),c=n(9429),u=n(6310),h=n(6522),f=n(5185),l=n(1664),p=Array;t.exports=function(t){var e=i(t),n=c(this),d=arguments.length,v=d>1?arguments[1]:void 0,g=void 0!==v;g&&(v=r(v,d>2?arguments[2]:void 0));var m,E,y,T,_,A,R=l(e),x=0;if(!R||this===p&&s(R))for(m=u(e),E=n?new this(m):p(m);m>x;x++)A=g?v(e[x],x):e[x],h(E,x,A);else for(_=(T=f(e,R)).next,E=n?new this:[];!(y=o(_,T)).done;x++)A=g?a(T,v,[y.value,x],!0):y.value,h(E,x,A);return E.length=x,E}},4328:function(t,e,n){var r=n(5290),o=n(7578),i=n(6310),a=function(t){return function(e,n,a){var s,c=r(e),u=i(c),h=o(a,u);if(t&&n!=n){for(;u>h;)if((s=c[h++])!=s)return!0}else for(;u>h;h++)if((t||h in c)&&c[h]===n)return t||h||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},6834:function(t,e,n){var r=n(3689);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){return 1},1)}))}},8820:function(t,e,n){var r=n(509),o=n(690),i=n(4413),a=n(6310),s=TypeError,c=function(t){return function(e,n,c,u){r(n);var h=o(e),f=i(h),l=a(h),p=t?l-1:0,d=t?-1:1;if(c<2)for(;;){if(p in f){u=f[p],p+=d;break}if(p+=d,t?p<0:l<=p)throw new s("Reduce of empty array with no initial value")}for(;t?p>=0:l>p;p+=d)p in f&&(u=n(u,f[p],p,h));return u}};t.exports={left:c(!1),right:c(!0)}},9015:function(t,e,n){var r=n(7578),o=n(6310),i=n(6522),a=Array,s=Math.max;t.exports=function(t,e,n){for(var c=o(t),u=r(e,c),h=r(void 0===n?c:n,c),f=a(s(h-u,0)),l=0;u<h;u++,l++)i(f,l,t[u]);return f.length=l,f}},6004:function(t,e,n){var r=n(8844);t.exports=r([].slice)},382:function(t,e,n){var r=n(9015),o=Math.floor,i=function(t,e){var n=t.length,c=o(n/2);return n<8?a(t,e):s(t,i(r(t,0,c),e),i(r(t,c),e),e)},a=function(t,e){for(var n,r,o=t.length,i=1;i<o;){for(r=i,n=t[i];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},s=function(t,e,n,r){for(var o=e.length,i=n.length,a=0,s=0;a<o||s<i;)t[a+s]=a<o&&s<i?r(e[a],n[s])<=0?e[a++]:n[s++]:a<o?e[a++]:n[s++];return t};t.exports=i},1228:function(t,e,n){var r=n(5027),o=n(2125);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){o(t,"throw",e)}}},6431:function(t,e,n){var r=n(4201)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){try{if(!e&&!o)return!1}catch(t){return!1}var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},6648:function(t,e,n){var r=n(8844),o=r({}.toString),i=r("".slice);t.exports=function(t){return i(o(t),8,-1)}},926:function(t,e,n){var r=n(3043),o=n(9985),i=n(6648),a=n(4201)("toStringTag"),s=Object,c="Arguments"===i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=s(t),a))?n:c?i(e):"Object"===(r=i(e))&&o(e.callee)?"Arguments":r}},8758:function(t,e,n){var r=n(6812),o=n(9152),i=n(2474),a=n(2560);t.exports=function(t,e,n){for(var s=o(e),c=a.f,u=i.f,h=0;h<s.length;h++){var f=s[h];r(t,f)||n&&r(n,f)||c(t,f,u(e,f))}}},1748:function(t,e,n){var r=n(3689);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},7807:function(t){t.exports=function(t,e){return{value:t,done:e}}},5773:function(t,e,n){var r=n(7697),o=n(2560),i=n(5684);t.exports=r?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},5684:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6522:function(t,e,n){var r=n(8360),o=n(2560),i=n(5684);t.exports=function(t,e,n){var a=r(e);a in t?o.f(t,a,i(0,n)):t[a]=n}},2148:function(t,e,n){var r=n(8702),o=n(2560);t.exports=function(t,e,n){return n.get&&r(n.get,e,{getter:!0}),n.set&&r(n.set,e,{setter:!0}),o.f(t,e,n)}},1880:function(t,e,n){var r=n(9985),o=n(2560),i=n(8702),a=n(5014);t.exports=function(t,e,n,s){s||(s={});var c=s.enumerable,u=void 0!==s.name?s.name:e;if(r(n)&&i(n,u,s),s.global)c?t[e]=n:a(e,n);else{try{s.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=n:o.f(t,e,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},6045:function(t,e,n){var r=n(1880);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},5014:function(t,e,n){var r=n(9037),o=Object.defineProperty;t.exports=function(t,e){try{o(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},7697:function(t,e,n){var r=n(3689);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2659:function(t){var e="object"==typeof document&&document.all,n=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},6420:function(t,e,n){var r=n(9037),o=n(8999),i=r.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},6338:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3265:function(t,e,n){var r=n(6420)("span").classList,o=r&&r.constructor&&r.constructor.prototype;t.exports=o===Object.prototype?void 0:o},7365:function(t,e,n){var r=n(71).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},2532:function(t,e,n){var r=n(8563),o=n(806);t.exports=!r&&!o&&"object"==typeof window&&"object"==typeof document},8563:function(t){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},7298:function(t,e,n){var r=n(71);t.exports=/MSIE|Trident/.test(r)},3221:function(t,e,n){var r=n(71);t.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},4764:function(t,e,n){var r=n(71);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},806:function(t,e,n){var r=n(9037),o=n(6648);t.exports="process"===o(r.process)},7486:function(t,e,n){var r=n(71);t.exports=/web0s(?!.*chrome)/i.test(r)},71:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},3615:function(t,e,n){var r,o,i=n(9037),a=n(71),s=i.process,c=i.Deno,u=s&&s.versions||c&&c.version,h=u&&u.v8;h&&(o=(r=h.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=+r[1]),t.exports=o},7922:function(t,e,n){var r=n(71).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},2739:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},9989:function(t,e,n){var r=n(9037),o=n(2474).f,i=n(5773),a=n(1880),s=n(5014),c=n(8758),u=n(5266);t.exports=function(t,e){var n,h,f,l,p,d=t.target,v=t.global,g=t.stat;if(n=v?r:g?r[d]||s(d,{}):(r[d]||{}).prototype)for(h in e){if(l=e[h],f=t.dontCallGetSet?(p=o(n,h))&&p.value:n[h],!u(v?h:d+(g?".":"#")+h,t.forced)&&void 0!==f){if(typeof l==typeof f)continue;c(l,f)}(t.sham||f&&f.sham)&&i(l,"sham",!0),a(n,h,l,t)}}},3689:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},8678:function(t,e,n){n(4043);var r=n(6576),o=n(1880),i=n(6308),a=n(3689),s=n(4201),c=n(5773),u=s("species"),h=RegExp.prototype;t.exports=function(t,e,n,f){var l=s(t),p=!a((function(){var e={};return e[l]=function(){return 7},7!==""[t](e)})),d=p&&!a((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[l]=/./[l]),n.exec=function(){return e=!0,null},n[l](""),!e}));if(!p||!d||n){var v=r(/./[l]),g=e(l,""[t],(function(t,e,n,o,a){var s=r(t),c=e.exec;return c===i||c===h.exec?p&&!a?{done:!0,value:v(e,n,o)}:{done:!0,value:s(n,e,o)}:{done:!1}}));o(String.prototype,t,g[0]),o(h,l,g[1])}f&&c(h[l],"sham",!0)}},1735:function(t,e,n){var r=n(7215),o=Function.prototype,i=o.apply,a=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(i):function(){return a.apply(i,arguments)})},4071:function(t,e,n){var r=n(6576),o=n(509),i=n(7215),a=r(r.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?a(t,e):function(){return t.apply(e,arguments)}}},7215:function(t,e,n){var r=n(3689);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},2615:function(t,e,n){var r=n(7215),o=Function.prototype.call;t.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},1236:function(t,e,n){var r=n(7697),o=n(6812),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=o(i,"name"),c=s&&"something"===function(){}.name,u=s&&(!r||r&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:c,CONFIGURABLE:u}},2743:function(t,e,n){var r=n(8844),o=n(509);t.exports=function(t,e,n){try{return r(o(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},6576:function(t,e,n){var r=n(6648),o=n(8844);t.exports=function(t){if("Function"===r(t))return o(t)}},8844:function(t,e,n){var r=n(7215),o=Function.prototype,i=o.call,a=r&&o.bind.bind(i,i);t.exports=r?a:function(t){return function(){return i.apply(t,arguments)}}},6058:function(t,e,n){var r=n(9037),o=n(9985);t.exports=function(t,e){return arguments.length<2?(n=r[t],o(n)?n:void 0):r[t]&&r[t][e];var n}},1664:function(t,e,n){var r=n(926),o=n(4849),i=n(981),a=n(9478),s=n(4201)("iterator");t.exports=function(t){if(!i(t))return o(t,s)||o(t,"@@iterator")||a[r(t)]}},5185:function(t,e,n){var r=n(2615),o=n(509),i=n(5027),a=n(3691),s=n(1664),c=TypeError;t.exports=function(t,e){var n=arguments.length<2?s(t):e;if(o(n))return i(r(n,t));throw new c(a(t)+" is not iterable")}},4849:function(t,e,n){var r=n(509),o=n(981);t.exports=function(t,e){var n=t[e];return o(n)?void 0:r(n)}},7017:function(t,e,n){var r=n(8844),o=n(690),i=Math.floor,a=r("".charAt),s=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,h=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,r,f,l){var p=n+t.length,d=r.length,v=h;return void 0!==f&&(f=o(f),v=u),s(l,v,(function(o,s){var u;switch(a(s,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,n);case"'":return c(e,p);case"<":u=f[c(s,1,-1)];break;default:var h=+s;if(0===h)return o;if(h>d){var l=i(h/10);return 0===l?o:l<=d?void 0===r[l-1]?a(s,1):r[l-1]+a(s,1):o}u=r[h-1]}return void 0===u?"":u}))}},9037:function(t,e,n){var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},6812:function(t,e,n){var r=n(8844),o=n(690),i=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},7248:function(t){t.exports={}},920:function(t){t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},2688:function(t,e,n){var r=n(6058);t.exports=r("document","documentElement")},8506:function(t,e,n){var r=n(7697),o=n(3689),i=n(6420);t.exports=!r&&!o((function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},4413:function(t,e,n){var r=n(8844),o=n(3689),i=n(6648),a=Object,s=r("".split);t.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"===i(t)?s(t,""):a(t)}:a},6738:function(t,e,n){var r=n(8844),o=n(9985),i=n(4091),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},618:function(t,e,n){var r,o,i,a=n(9834),s=n(9037),c=n(8999),u=n(5773),h=n(6812),f=n(4091),l=n(2713),p=n(7248),d="Object already initialized",v=s.TypeError,g=s.WeakMap;if(a||f.state){var m=f.state||(f.state=new g);m.get=m.get,m.has=m.has,m.set=m.set,r=function(t,e){if(m.has(t))throw new v(d);return e.facade=t,m.set(t,e),e},o=function(t){return m.get(t)||{}},i=function(t){return m.has(t)}}else{var E=l("state");p[E]=!0,r=function(t,e){if(h(t,E))throw new v(d);return e.facade=t,u(t,E,e),e},o=function(t){return h(t,E)?t[E]:{}},i=function(t){return h(t,E)}}t.exports={set:r,get:o,has:i,enforce:function(t){return i(t)?o(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=o(e)).type!==t)throw new v("Incompatible receiver, "+t+" required");return n}}}},3292:function(t,e,n){var r=n(4201),o=n(9478),i=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[i]===t)}},9985:function(t,e,n){var r=n(2659),o=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},9429:function(t,e,n){var r=n(8844),o=n(3689),i=n(9985),a=n(926),s=n(6058),c=n(6738),u=function(){},h=[],f=s("Reflect","construct"),l=/^\s*(?:class|function)\b/,p=r(l.exec),d=!l.test(u),v=function(t){if(!i(t))return!1;try{return f(u,h,t),!0}catch(t){return!1}},g=function(t){if(!i(t))return!1;switch(a(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!p(l,c(t))}catch(t){return!0}};g.sham=!0,t.exports=!f||o((function(){var t;return v(v.call)||!v(Object)||!v((function(){t=!0}))||t}))?g:v},5266:function(t,e,n){var r=n(3689),o=n(9985),i=/#|\.prototype\./,a=function(t,e){var n=c[s(t)];return n===h||n!==u&&(o(e)?r(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",h=a.POLYFILL="P";t.exports=a},981:function(t){t.exports=function(t){return null==t}},8999:function(t,e,n){var r=n(9985),o=n(2659),i=o.all;t.exports=o.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===i}:function(t){return"object"==typeof t?null!==t:r(t)}},3931:function(t){t.exports=!1},734:function(t,e,n){var r=n(6058),o=n(9985),i=n(3622),a=n(9525),s=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return o(e)&&i(e.prototype,s(t))}},8734:function(t,e,n){var r=n(4071),o=n(2615),i=n(5027),a=n(3691),s=n(3292),c=n(6310),u=n(3622),h=n(5185),f=n(1664),l=n(2125),p=TypeError,d=function(t,e){this.stopped=t,this.result=e},v=d.prototype;t.exports=function(t,e,n){var g,m,E,y,T,_,A,R=n&&n.that,x=!(!n||!n.AS_ENTRIES),C=!(!n||!n.IS_RECORD),w=!(!n||!n.IS_ITERATOR),S=!(!n||!n.INTERRUPTED),b=r(e,R),P=function(t){return g&&l(g,"normal",t),new d(!0,t)},L=function(t){return x?(i(t),S?b(t[0],t[1],P):b(t[0],t[1])):S?b(t,P):b(t)};if(C)g=t.iterator;else if(w)g=t;else{if(!(m=f(t)))throw new p(a(t)+" is not iterable");if(s(m)){for(E=0,y=c(t);y>E;E++)if((T=L(t[E]))&&u(v,T))return T;return new d(!1)}g=h(t,m)}for(_=C?t.next:g.next;!(A=o(_,g)).done;){try{T=L(A.value)}catch(t){l(g,"throw",t)}if("object"==typeof T&&T&&u(v,T))return T}return new d(!1)}},2125:function(t,e,n){var r=n(2615),o=n(5027),i=n(4849);t.exports=function(t,e,n){var a,s;o(t);try{if(!(a=i(t,"return"))){if("throw"===e)throw n;return n}a=r(a,t)}catch(t){s=!0,a=t}if("throw"===e)throw n;if(s)throw a;return o(a),n}},974:function(t,e,n){var r=n(2013).IteratorPrototype,o=n(5391),i=n(5684),a=n(5997),s=n(9478),c=function(){return this};t.exports=function(t,e,n,u){var h=e+" Iterator";return t.prototype=o(r,{next:i(+!u,n)}),a(t,h,!1,!0),s[h]=c,t}},1934:function(t,e,n){var r=n(9989),o=n(2615),i=n(3931),a=n(1236),s=n(9985),c=n(974),u=n(1868),h=n(9385),f=n(5997),l=n(5773),p=n(1880),d=n(4201),v=n(9478),g=n(2013),m=a.PROPER,E=a.CONFIGURABLE,y=g.IteratorPrototype,T=g.BUGGY_SAFARI_ITERATORS,_=d("iterator"),A="keys",R="values",x="entries",C=function(){return this};t.exports=function(t,e,n,a,d,g,w){c(n,e,a);var S,b,P,L=function(t){if(t===d&&j)return j;if(!T&&t&&t in D)return D[t];switch(t){case A:case R:case x:return function(){return new n(this,t)}}return function(){return new n(this)}},O=e+" Iterator",H=!1,D=t.prototype,I=D[_]||D["@@iterator"]||d&&D[d],j=!T&&I||L(d),N="Array"===e&&D.entries||I;if(N&&(S=u(N.call(new t)))!==Object.prototype&&S.next&&(i||u(S)===y||(h?h(S,y):s(S[_])||p(S,_,C)),f(S,O,!0,!0),i&&(v[O]=C)),m&&d===R&&I&&I.name!==R&&(!i&&E?l(D,"name",R):(H=!0,j=function(){return o(I,this)})),d)if(b={values:L(R),keys:g?j:L(A),entries:L(x)},w)for(P in b)(T||H||!(P in D))&&p(D,P,b[P]);else r({target:e,proto:!0,forced:T||H},b);return i&&!w||D[_]===j||p(D,_,j,{name:d}),v[e]=j,b}},2013:function(t,e,n){var r,o,i,a=n(3689),s=n(9985),c=n(8999),u=n(5391),h=n(1868),f=n(1880),l=n(4201),p=n(3931),d=l("iterator"),v=!1;[].keys&&("next"in(i=[].keys())?(o=h(h(i)))!==Object.prototype&&(r=o):v=!0),!c(r)||a((function(){var t={};return r[d].call(t)!==t}))?r={}:p&&(r=u(r)),s(r[d])||f(r,d,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:v}},9478:function(t){t.exports={}},6310:function(t,e,n){var r=n(3126);t.exports=function(t){return r(t.length)}},8702:function(t,e,n){var r=n(8844),o=n(3689),i=n(9985),a=n(6812),s=n(7697),c=n(1236).CONFIGURABLE,u=n(6738),h=n(618),f=h.enforce,l=h.get,p=String,d=Object.defineProperty,v=r("".slice),g=r("".replace),m=r([].join),E=s&&!o((function(){return 8!==d((function(){}),"length",{value:8}).length})),y=String(String).split("String"),T=t.exports=function(t,e,n){"Symbol("===v(p(e),0,7)&&(e="["+g(p(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!a(t,"name")||c&&t.name!==e)&&(s?d(t,"name",{value:e,configurable:!0}):t.name=e),E&&n&&a(n,"arity")&&t.length!==n.arity&&d(t,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?s&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=f(t);return a(r,"source")||(r.source=m(y,"string"==typeof e?e:"")),t};Function.prototype.toString=T((function(){return i(this)&&l(this).source||u(this)}),"toString")},8828:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},231:function(t,e,n){var r,o,i,a,s,c=n(9037),u=n(4071),h=n(2474).f,f=n(9886).set,l=n(4410),p=n(4764),d=n(3221),v=n(7486),g=n(806),m=c.MutationObserver||c.WebKitMutationObserver,E=c.document,y=c.process,T=c.Promise,_=h(c,"queueMicrotask"),A=_&&_.value;if(!A){var R=new l,x=function(){var t,e;for(g&&(t=y.domain)&&t.exit();e=R.get();)try{e()}catch(t){throw R.head&&r(),t}t&&t.enter()};p||g||v||!m||!E?!d&&T&&T.resolve?((a=T.resolve(void 0)).constructor=T,s=u(a.then,a),r=function(){s(x)}):g?r=function(){y.nextTick(x)}:(f=u(f,c),r=function(){f(x)}):(o=!0,i=E.createTextNode(""),new m(x).observe(i,{characterData:!0}),r=function(){i.data=o=!o}),A=function(t){R.head||r(),R.add(t)}}t.exports=A},8742:function(t,e,n){var r=n(509),o=TypeError,i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw new o("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},5394:function(t,e,n){var r=n(7697),o=n(8844),i=n(2615),a=n(3689),s=n(300),c=n(7518),u=n(9556),h=n(690),f=n(4413),l=Object.assign,p=Object.defineProperty,d=o([].concat);t.exports=!l||a((function(){if(r&&1!==l({b:1},l(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach((function(t){e[t]=t})),7!==l({},t)[n]||s(l({},e)).join("")!==o}))?function(t,e){for(var n=h(t),o=arguments.length,a=1,l=c.f,p=u.f;o>a;)for(var v,g=f(arguments[a++]),m=l?d(s(g),l(g)):s(g),E=m.length,y=0;E>y;)v=m[y++],r&&!i(p,g,v)||(n[v]=g[v]);return n}:l},5391:function(t,e,n){var r,o=n(5027),i=n(8920),a=n(2739),s=n(7248),c=n(2688),u=n(6420),h=n(2713),f="prototype",l="script",p=h("IE_PROTO"),d=function(){},v=function(t){return"<"+l+">"+t+"</"+l+">"},g=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;m="undefined"!=typeof document?document.domain&&r?g(r):(e=u("iframe"),n="java"+l+":",e.style.display="none",c.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(v("document.F=Object")),t.close(),t.F):g(r);for(var o=a.length;o--;)delete m[f][a[o]];return m()};s[p]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(d[f]=o(t),n=new d,d[f]=null,n[p]=t):n=m(),void 0===e?n:i.f(n,e)}},8920:function(t,e,n){var r=n(7697),o=n(5648),i=n(2560),a=n(5027),s=n(5290),c=n(300);e.f=r&&!o?Object.defineProperties:function(t,e){a(t);for(var n,r=s(e),o=c(e),u=o.length,h=0;u>h;)i.f(t,n=o[h++],r[n]);return t}},2560:function(t,e,n){var r=n(7697),o=n(8506),i=n(5648),a=n(5027),s=n(8360),c=TypeError,u=Object.defineProperty,h=Object.getOwnPropertyDescriptor,f="enumerable",l="configurable",p="writable";e.f=r?i?function(t,e,n){if(a(t),e=s(e),a(n),"function"==typeof t&&"prototype"===e&&"value"in n&&p in n&&!n[p]){var r=h(t,e);r&&r[p]&&(t[e]=n.value,n={configurable:l in n?n[l]:r[l],enumerable:f in n?n[f]:r[f],writable:!1})}return u(t,e,n)}:u:function(t,e,n){if(a(t),e=s(e),a(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},2474:function(t,e,n){var r=n(7697),o=n(2615),i=n(9556),a=n(5684),s=n(5290),c=n(8360),u=n(6812),h=n(8506),f=Object.getOwnPropertyDescriptor;e.f=r?f:function(t,e){if(t=s(t),e=c(e),h)try{return f(t,e)}catch(t){}if(u(t,e))return a(!o(i.f,t,e),t[e])}},2741:function(t,e,n){var r=n(4948),o=n(2739).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},7518:function(t,e){e.f=Object.getOwnPropertySymbols},1868:function(t,e,n){var r=n(6812),o=n(9985),i=n(690),a=n(2713),s=n(1748),c=a("IE_PROTO"),u=Object,h=u.prototype;t.exports=s?u.getPrototypeOf:function(t){var e=i(t);if(r(e,c))return e[c];var n=e.constructor;return o(n)&&e instanceof n?n.prototype:e instanceof u?h:null}},3622:function(t,e,n){var r=n(8844);t.exports=r({}.isPrototypeOf)},4948:function(t,e,n){var r=n(8844),o=n(6812),i=n(5290),a=n(4328).indexOf,s=n(7248),c=r([].push);t.exports=function(t,e){var n,r=i(t),u=0,h=[];for(n in r)!o(s,n)&&o(r,n)&&c(h,n);for(;e.length>u;)o(r,n=e[u++])&&(~a(h,n)||c(h,n));return h}},300:function(t,e,n){var r=n(4948),o=n(2739);t.exports=Object.keys||function(t){return r(t,o)}},9556:function(t,e){var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},9385:function(t,e,n){var r=n(2743),o=n(5027),i=n(3550);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=r(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return o(n),i(r),e?t(n,r):n.__proto__=r,n}}():void 0)},5899:function(t,e,n){var r=n(2615),o=n(9985),i=n(8999),a=TypeError;t.exports=function(t,e){var n,s;if("string"===e&&o(n=t.toString)&&!i(s=r(n,t)))return s;if(o(n=t.valueOf)&&!i(s=r(n,t)))return s;if("string"!==e&&o(n=t.toString)&&!i(s=r(n,t)))return s;throw new a("Can't convert object to primitive value")}},9152:function(t,e,n){var r=n(6058),o=n(8844),i=n(2741),a=n(7518),s=n(5027),c=o([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(s(t)),n=a.f;return n?c(e,n(t)):e}},9302:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},7073:function(t,e,n){var r=n(9037),o=n(7919),i=n(9985),a=n(5266),s=n(6738),c=n(4201),u=n(2532),h=n(8563),f=n(3931),l=n(3615),p=o&&o.prototype,d=c("species"),v=!1,g=i(r.PromiseRejectionEvent),m=a("Promise",(function(){var t=s(o),e=t!==String(o);if(!e&&66===l)return!0;if(f&&(!p.catch||!p.finally))return!0;if(!l||l<51||!/native code/.test(t)){var n=new o((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((n.constructor={})[d]=r,!(v=n.then((function(){}))instanceof r))return!0}return!e&&(u||h)&&!g}));t.exports={CONSTRUCTOR:m,REJECTION_EVENT:g,SUBCLASSING:v}},7919:function(t,e,n){var r=n(9037);t.exports=r.Promise},2945:function(t,e,n){var r=n(5027),o=n(8999),i=n(8742);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},562:function(t,e,n){var r=n(7919),o=n(6431),i=n(7073).CONSTRUCTOR;t.exports=i||!o((function(t){r.all(t).then(void 0,(function(){}))}))},4410:function(t){var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},6100:function(t,e,n){var r=n(2615),o=n(5027),i=n(9985),a=n(6648),s=n(6308),c=TypeError;t.exports=function(t,e){var n=t.exec;if(i(n)){var u=r(n,t,e);return null!==u&&o(u),u}if("RegExp"===a(t))return r(s,t,e);throw new c("RegExp#exec called on incompatible receiver")}},6308:function(t,e,n){var r,o,i=n(2615),a=n(8844),s=n(4327),c=n(9633),u=n(7901),h=n(3430),f=n(5391),l=n(618).get,p=n(2100),d=n(6422),v=h("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,m=g,E=a("".charAt),y=a("".indexOf),T=a("".replace),_=a("".slice),A=(o=/b*/g,i(g,r=/a/,"a"),i(g,o,"a"),0!==r.lastIndex||0!==o.lastIndex),R=u.BROKEN_CARET,x=void 0!==/()??/.exec("")[1];(A||x||R||p||d)&&(m=function(t){var e,n,r,o,a,u,h,p=this,d=l(p),C=s(t),w=d.raw;if(w)return w.lastIndex=p.lastIndex,e=i(m,w,C),p.lastIndex=w.lastIndex,e;var S=d.groups,b=R&&p.sticky,P=i(c,p),L=p.source,O=0,H=C;if(b&&(P=T(P,"y",""),-1===y(P,"g")&&(P+="g"),H=_(C,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==E(C,p.lastIndex-1))&&(L="(?: "+L+")",H=" "+H,O++),n=new RegExp("^(?:"+L+")",P)),x&&(n=new RegExp("^"+L+"$(?!\\s)",P)),A&&(r=p.lastIndex),o=i(g,b?n:p,H),b?o?(o.input=_(o.input,O),o[0]=_(o[0],O),o.index=p.lastIndex,p.lastIndex+=o[0].length):p.lastIndex=0:A&&o&&(p.lastIndex=p.global?o.index+o[0].length:r),x&&o&&o.length>1&&i(v,o[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&S)for(o.groups=u=f(null),a=0;a<S.length;a++)u[(h=S[a])[0]]=o[h[1]];return o}),t.exports=m},9633:function(t,e,n){var r=n(5027);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},7901:function(t,e,n){var r=n(3689),o=n(9037).RegExp,i=r((function(){var t=o("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),a=i||r((function(){return!o("a","y").sticky})),s=i||r((function(){var t=o("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:i}},2100:function(t,e,n){var r=n(3689),o=n(9037).RegExp;t.exports=r((function(){var t=o(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},6422:function(t,e,n){var r=n(3689),o=n(9037).RegExp;t.exports=r((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4684:function(t,e,n){var r=n(981),o=TypeError;t.exports=function(t){if(r(t))throw new o("Can't call method on "+t);return t}},4241:function(t,e,n){var r=n(6058),o=n(2148),i=n(4201),a=n(7697),s=i("species");t.exports=function(t){var e=r(t);a&&e&&!e[s]&&o(e,s,{configurable:!0,get:function(){return this}})}},5997:function(t,e,n){var r=n(2560).f,o=n(6812),i=n(4201)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!o(t,i)&&r(t,i,{configurable:!0,value:e})}},2713:function(t,e,n){var r=n(3430),o=n(4630),i=r("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},4091:function(t,e,n){var r=n(9037),o=n(5014),i="__core-js_shared__",a=r[i]||o(i,{});t.exports=a},3430:function(t,e,n){var r=n(3931),o=n(4091);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.3",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.3/LICENSE",source:"https://github.com/zloirock/core-js"})},6373:function(t,e,n){var r=n(5027),o=n(2655),i=n(981),a=n(4201)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||i(n=r(s)[a])?e:o(n)}},730:function(t,e,n){var r=n(8844),o=n(8700),i=n(4327),a=n(4684),s=r("".charAt),c=r("".charCodeAt),u=r("".slice),h=function(t){return function(e,n){var r,h,f=i(a(e)),l=o(n),p=f.length;return l<0||l>=p?t?"":void 0:(r=c(f,l))<55296||r>56319||l+1===p||(h=c(f,l+1))<56320||h>57343?t?s(f,l):r:t?u(f,l,l+2):h-56320+(r-55296<<10)+65536}};t.exports={codeAt:h(!1),charAt:h(!0)}},6430:function(t,e,n){var r=n(8844),o=2147483647,i=/[^\0-\u007E]/,a=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",c=RangeError,u=r(a.exec),h=Math.floor,f=String.fromCharCode,l=r("".charCodeAt),p=r([].join),d=r([].push),v=r("".replace),g=r("".split),m=r("".toLowerCase),E=function(t){return t+22+75*(t<26)},y=function(t,e,n){var r=0;for(t=n?h(t/700):t>>1,t+=h(t/e);t>455;)t=h(t/35),r+=36;return h(r+36*t/(t+38))},T=function(t){var e=[];t=function(t){for(var e=[],n=0,r=t.length;n<r;){var o=l(t,n++);if(o>=55296&&o<=56319&&n<r){var i=l(t,n++);56320==(64512&i)?d(e,((1023&o)<<10)+(1023&i)+65536):(d(e,o),n--)}else d(e,o)}return e}(t);var n,r,i=t.length,a=128,u=0,v=72;for(n=0;n<t.length;n++)(r=t[n])<128&&d(e,f(r));var g=e.length,m=g;for(g&&d(e,"-");m<i;){var T=o;for(n=0;n<t.length;n++)(r=t[n])>=a&&r<T&&(T=r);var _=m+1;if(T-a>h((o-u)/_))throw new c(s);for(u+=(T-a)*_,a=T,n=0;n<t.length;n++){if((r=t[n])<a&&++u>o)throw new c(s);if(r===a){for(var A=u,R=36;;){var x=R<=v?1:R>=v+26?26:R-v;if(A<x)break;var C=A-x,w=36-x;d(e,f(E(x+C%w))),A=h(C/w),R+=36}d(e,f(E(A))),v=y(u,_,m===g),u=0,m++}}u++,a++}return p(e,"")};t.exports=function(t){var e,n,r=[],o=g(v(m(t),a,"."),".");for(e=0;e<o.length;e++)n=o[e],d(r,u(i,n)?"xn--"+T(n):n);return p(r,".")}},146:function(t,e,n){var r=n(3615),o=n(3689),i=n(9037).String;t.exports=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},9886:function(t,e,n){var r,o,i,a,s=n(9037),c=n(1735),u=n(4071),h=n(9985),f=n(6812),l=n(3689),p=n(2688),d=n(6004),v=n(6420),g=n(1500),m=n(4764),E=n(806),y=s.setImmediate,T=s.clearImmediate,_=s.process,A=s.Dispatch,R=s.Function,x=s.MessageChannel,C=s.String,w=0,S={},b="onreadystatechange";l((function(){r=s.location}));var P=function(t){if(f(S,t)){var e=S[t];delete S[t],e()}},L=function(t){return function(){P(t)}},O=function(t){P(t.data)},H=function(t){s.postMessage(C(t),r.protocol+"//"+r.host)};y&&T||(y=function(t){g(arguments.length,1);var e=h(t)?t:R(t),n=d(arguments,1);return S[++w]=function(){c(e,void 0,n)},o(w),w},T=function(t){delete S[t]},E?o=function(t){_.nextTick(L(t))}:A&&A.now?o=function(t){A.now(L(t))}:x&&!m?(a=(i=new x).port2,i.port1.onmessage=O,o=u(a.postMessage,a)):s.addEventListener&&h(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!l(H)?(o=H,s.addEventListener("message",O,!1)):o=b in v("script")?function(t){p.appendChild(v("script"))[b]=function(){p.removeChild(this),P(t)}}:function(t){setTimeout(L(t),0)}),t.exports={set:y,clear:T}},7578:function(t,e,n){var r=n(8700),o=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?o(n+e,0):i(n,e)}},5290:function(t,e,n){var r=n(4413),o=n(4684);t.exports=function(t){return r(o(t))}},8700:function(t,e,n){var r=n(8828);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},3126:function(t,e,n){var r=n(8700),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},690:function(t,e,n){var r=n(4684),o=Object;t.exports=function(t){return o(r(t))}},3250:function(t,e,n){var r=n(5904),o=RangeError;t.exports=function(t,e){var n=r(t);if(n%e)throw new o("Wrong offset");return n}},5904:function(t,e,n){var r=n(8700),o=RangeError;t.exports=function(t){var e=r(t);if(e<0)throw new o("The argument can't be less than 0");return e}},8732:function(t,e,n){var r=n(2615),o=n(8999),i=n(734),a=n(4849),s=n(5899),c=n(4201),u=TypeError,h=c("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var n,c=a(t,h);if(c){if(void 0===e&&(e="default"),n=r(c,t,e),!o(n)||i(n))return n;throw new u("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},8360:function(t,e,n){var r=n(8732),o=n(734);t.exports=function(t){var e=r(t,"string");return o(e)?e:e+""}},3043:function(t,e,n){var r={};r[n(4201)("toStringTag")]="z",t.exports="[object z]"===String(r)},4327:function(t,e,n){var r=n(926),o=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},3691:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},4630:function(t,e,n){var r=n(8844),o=0,i=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},6837:function(t,e,n){var r=n(3689),o=n(4201),i=n(7697),a=n(3931),s=o("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),r+=n+t})),n.delete("a",2),n.delete("b",void 0),a&&(!t.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!e.size&&(a||!i)||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},9525:function(t,e,n){var r=n(146);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5648:function(t,e,n){var r=n(7697),o=n(3689);t.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1500:function(t){var e=TypeError;t.exports=function(t,n){if(t<n)throw new e("Not enough arguments");return t}},9834:function(t,e,n){var r=n(9037),o=n(9985),i=r.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},4201:function(t,e,n){var r=n(9037),o=n(3430),i=n(6812),a=n(4630),s=n(146),c=n(9525),u=r.Symbol,h=o("wks"),f=c?u.for||u:u&&u.withoutSetter||a;t.exports=function(t){return i(h,t)||(h[t]=s&&i(u,t)?u[t]:f("Symbol."+t)),h[t]}},752:function(t,e,n){var r=n(5290),o=n(7370),i=n(9478),a=n(618),s=n(2560).f,c=n(1934),u=n(7807),h=n(3931),f=n(7697),l="Array Iterator",p=a.set,d=a.getterFor(l);t.exports=c(Array,"Array",(function(t,e){p(this,{type:l,target:r(t),index:0,kind:e})}),(function(){var t=d(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,u(void 0,!0);switch(t.kind){case"keys":return u(n,!1);case"values":return u(e[n],!1)}return u([n,e[n]],!1)}),"values");var v=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!h&&f&&"values"!==v.name)try{s(v,"name",{value:"values"})}catch(t){}},278:function(t,e,n){var r=n(9989),o=n(8820).left,i=n(6834),a=n(3615);r({target:"Array",proto:!0,forced:!n(806)&&a>79&&a<83||!i("reduce")},{reduce:function(t){var e=arguments.length;return o(this,t,e,e>1?arguments[1]:void 0)}})},1692:function(t,e,n){var r=n(9989),o=n(2615),i=n(509),a=n(8742),s=n(9302),c=n(8734);r({target:"Promise",stat:!0,forced:n(562)},{all:function(t){var e=this,n=a.f(e),r=n.resolve,u=n.reject,h=s((function(){var n=i(e.resolve),a=[],s=0,h=1;c(t,(function(t){var i=s++,c=!1;h++,o(n,e,t).then((function(t){c||(c=!0,a[i]=t,--h||r(a))}),u)})),--h||r(a)}));return h.error&&u(h.value),n.promise}})},5089:function(t,e,n){var r=n(9989),o=n(3931),i=n(7073).CONSTRUCTOR,a=n(7919),s=n(6058),c=n(9985),u=n(1880),h=a&&a.prototype;if(r({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&c(a)){var f=s("Promise").prototype.catch;h.catch!==f&&u(h,"catch",f,{unsafe:!0})}},6697:function(t,e,n){var r,o,i,a=n(9989),s=n(3931),c=n(806),u=n(9037),h=n(2615),f=n(1880),l=n(9385),p=n(5997),d=n(4241),v=n(509),g=n(9985),m=n(8999),E=n(767),y=n(6373),T=n(9886).set,_=n(231),A=n(920),R=n(9302),x=n(4410),C=n(618),w=n(7919),S=n(7073),b=n(8742),P="Promise",L=S.CONSTRUCTOR,O=S.REJECTION_EVENT,H=S.SUBCLASSING,D=C.getterFor(P),I=C.set,j=w&&w.prototype,N=w,U=j,B=u.TypeError,M=u.document,k=u.process,F=b.f,V=F,G=!!(M&&M.createEvent&&u.dispatchEvent),$="unhandledrejection",X=function(t){var e;return!(!m(t)||!g(e=t.then))&&e},z=function(t,e){var n,r,o,i=e.value,a=1===e.state,s=a?t.ok:t.fail,c=t.resolve,u=t.reject,f=t.domain;try{s?(a||(2===e.rejection&&Q(e),e.rejection=1),!0===s?n=i:(f&&f.enter(),n=s(i),f&&(f.exit(),o=!0)),n===t.promise?u(new B("Promise-chain cycle")):(r=X(n))?h(r,n,c,u):c(n)):u(i)}catch(t){f&&!o&&f.exit(),u(t)}},q=function(t,e){t.notified||(t.notified=!0,_((function(){for(var n,r=t.reactions;n=r.get();)z(n,t);t.notified=!1,e&&!t.rejection&&W(t)})))},Y=function(t,e,n){var r,o;G?((r=M.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},!O&&(o=u["on"+t])?o(r):t===$&&A("Unhandled promise rejection",n)},W=function(t){h(T,u,(function(){var e,n=t.facade,r=t.value;if(K(t)&&(e=R((function(){c?k.emit("unhandledRejection",r,n):Y($,n,r)})),t.rejection=c||K(t)?2:1,e.error))throw e.value}))},K=function(t){return 1!==t.rejection&&!t.parent},Q=function(t){h(T,u,(function(){var e=t.facade;c?k.emit("rejectionHandled",e):Y("rejectionhandled",e,t.value)}))},J=function(t,e,n){return function(r){t(e,r,n)}},Z=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,q(t,!0))},tt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new B("Promise can't be resolved itself");var r=X(e);r?_((function(){var n={done:!1};try{h(r,e,J(tt,n,t),J(Z,n,t))}catch(e){Z(n,e,t)}})):(t.value=e,t.state=1,q(t,!1))}catch(e){Z({done:!1},e,t)}}};if(L&&(U=(N=function(t){E(this,U),v(t),h(r,this);var e=D(this);try{t(J(tt,e),J(Z,e))}catch(t){Z(e,t)}}).prototype,(r=function(t){I(this,{type:P,done:!1,notified:!1,parent:!1,reactions:new x,rejection:!1,state:0,value:void 0})}).prototype=f(U,"then",(function(t,e){var n=D(this),r=F(y(this,N));return n.parent=!0,r.ok=!g(t)||t,r.fail=g(e)&&e,r.domain=c?k.domain:void 0,0===n.state?n.reactions.add(r):_((function(){z(r,n)})),r.promise})),o=function(){var t=new r,e=D(t);this.promise=t,this.resolve=J(tt,e),this.reject=J(Z,e)},b.f=F=function(t){return t===N||undefined===t?new o(t):V(t)},!s&&g(w)&&j!==Object.prototype)){i=j.then,H||f(j,"then",(function(t,e){var n=this;return new N((function(t,e){h(i,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete j.constructor}catch(t){}l&&l(j,U)}a({global:!0,constructor:!0,wrap:!0,forced:L},{Promise:N}),p(N,P,!1,!0),d(P)},6409:function(t,e,n){var r=n(9989),o=n(3931),i=n(7919),a=n(3689),s=n(6058),c=n(9985),u=n(6373),h=n(2945),f=n(1880),l=i&&i.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){l.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,s("Promise")),n=c(t);return this.then(n?function(n){return h(e,t()).then((function(){return n}))}:t,n?function(n){return h(e,t()).then((function(){throw n}))}:t)}}),!o&&c(i)){var p=s("Promise").prototype.finally;l.finally!==p&&f(l,"finally",p,{unsafe:!0})}},3964:function(t,e,n){n(6697),n(1692),n(5089),n(8829),n(2092),n(7905)},8829:function(t,e,n){var r=n(9989),o=n(2615),i=n(509),a=n(8742),s=n(9302),c=n(8734);r({target:"Promise",stat:!0,forced:n(562)},{race:function(t){var e=this,n=a.f(e),r=n.reject,u=s((function(){var a=i(e.resolve);c(t,(function(t){o(a,e,t).then(n.resolve,r)}))}));return u.error&&r(u.value),n.promise}})},2092:function(t,e,n){var r=n(9989),o=n(2615),i=n(8742);r({target:"Promise",stat:!0,forced:n(7073).CONSTRUCTOR},{reject:function(t){var e=i.f(this);return o(e.reject,void 0,t),e.promise}})},7905:function(t,e,n){var r=n(9989),o=n(6058),i=n(3931),a=n(7919),s=n(7073).CONSTRUCTOR,c=n(2945),u=o("Promise"),h=i&&!s;r({target:"Promise",stat:!0,forced:i||s},{resolve:function(t){return c(h&&this===u?a:this,t)}})},4043:function(t,e,n){var r=n(9989),o=n(6308);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},1694:function(t,e,n){var r=n(730).charAt,o=n(4327),i=n(618),a=n(1934),s=n(7807),c="String Iterator",u=i.set,h=i.getterFor(c);a(String,"String",(function(t){u(this,{type:c,string:o(t),index:0})}),(function(){var t,e=h(this),n=e.string,o=e.index;return o>=n.length?s(void 0,!0):(t=r(n,o),e.index+=t.length,s(t,!1))}))},7267:function(t,e,n){var r=n(1735),o=n(2615),i=n(8844),a=n(8678),s=n(3689),c=n(5027),u=n(9985),h=n(981),f=n(8700),l=n(3126),p=n(4327),d=n(4684),v=n(1514),g=n(4849),m=n(7017),E=n(6100),y=n(4201)("replace"),T=Math.max,_=Math.min,A=i([].concat),R=i([].push),x=i("".indexOf),C=i("".slice),w="$0"==="a".replace(/./,"$0"),S=!!/./[y]&&""===/./[y]("a","$0");a("replace",(function(t,e,n){var i=S?"$":"$0";return[function(t,n){var r=d(this),i=h(t)?void 0:g(t,y);return i?o(i,t,r,n):o(e,p(r),t,n)},function(t,o){var a=c(this),s=p(t);if("string"==typeof o&&-1===x(o,i)&&-1===x(o,"$<")){var h=n(e,a,s,o);if(h.done)return h.value}var d=u(o);d||(o=p(o));var g,y=a.global;y&&(g=a.unicode,a.lastIndex=0);for(var w,S=[];null!==(w=E(a,s))&&(R(S,w),y);){""===p(w[0])&&(a.lastIndex=v(s,l(a.lastIndex),g))}for(var b,P="",L=0,O=0;O<S.length;O++){for(var H,D=p((w=S[O])[0]),I=T(_(f(w.index),s.length),0),j=[],N=1;N<w.length;N++)R(j,void 0===(b=w[N])?b:String(b));var U=w.groups;if(d){var B=A([D],j,I,s);void 0!==U&&R(B,U),H=p(r(o,void 0,B))}else H=m(D,s,I,j,U,o);I>=L&&(P+=C(s,L,I)+H,L=I+D.length)}return P+C(s,L)}]}),!!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!w||S)},9976:function(t,e,n){var r=n(9037),o=n(2615),i=n(4872),a=n(6310),s=n(3250),c=n(690),u=n(3689),h=r.RangeError,f=r.Int8Array,l=f&&f.prototype,p=l&&l.set,d=i.aTypedArray,v=i.exportTypedArrayMethod,g=!u((function(){var t=new Uint8ClampedArray(2);return o(p,t,{length:1,0:3},1),3!==t[1]})),m=g&&i.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var t=new f(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));v("set",(function(t){d(this);var e=s(arguments.length>1?arguments[1]:void 0,1),n=c(t);if(g)return o(p,this,n,e);var r=this.length,i=a(n),u=0;if(i+e>r)throw new h("Wrong length");for(;u<i;)this[e+u]=n[u++]}),!g||m)},3356:function(t,e,n){var r=n(9037),o=n(6576),i=n(3689),a=n(509),s=n(382),c=n(4872),u=n(7365),h=n(7298),f=n(3615),l=n(7922),p=c.aTypedArray,d=c.exportTypedArrayMethod,v=r.Uint16Array,g=v&&o(v.prototype.sort),m=!(!g||i((function(){g(new v(2),null)}))&&i((function(){g(new v(2),{})}))),E=!!g&&!i((function(){if(f)return f<74;if(u)return u<67;if(h)return!0;if(l)return l<602;var t,e,n=new v(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(g(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));d("sort",(function(t){return void 0!==t&&a(t),E?g(this,t):s(p(this),function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t))}),!E||m)},6265:function(t,e,n){var r=n(9037),o=n(6338),i=n(3265),a=n(752),s=n(5773),c=n(4201),u=c("iterator"),h=c("toStringTag"),f=a.values,l=function(t,e){if(t){if(t[u]!==f)try{s(t,u,f)}catch(e){t[u]=f}if(t[h]||s(t,h,e),o[e])for(var n in a)if(t[n]!==a[n])try{s(t,n,a[n])}catch(e){t[n]=a[n]}}};for(var p in o)l(r[p]&&r[p].prototype,p);l(i,"DOMTokenList")},2625:function(t,e,n){n(752);var r=n(9989),o=n(9037),i=n(2615),a=n(8844),s=n(7697),c=n(6837),u=n(1880),h=n(2148),f=n(6045),l=n(5997),p=n(974),d=n(618),v=n(767),g=n(9985),m=n(6812),E=n(4071),y=n(926),T=n(5027),_=n(8999),A=n(4327),R=n(5391),x=n(5684),C=n(5185),w=n(1664),S=n(7807),b=n(1500),P=n(4201),L=n(382),O=P("iterator"),H="URLSearchParams",D=H+"Iterator",I=d.set,j=d.getterFor(H),N=d.getterFor(D),U=Object.getOwnPropertyDescriptor,B=function(t){if(!s)return o[t];var e=U(o,t);return e&&e.value},M=B("fetch"),k=B("Request"),F=B("Headers"),V=k&&k.prototype,G=F&&F.prototype,$=o.RegExp,X=o.TypeError,z=o.decodeURIComponent,q=o.encodeURIComponent,Y=a("".charAt),W=a([].join),K=a([].push),Q=a("".replace),J=a([].shift),Z=a([].splice),tt=a("".split),et=a("".slice),nt=/\+/g,rt=Array(4),ot=function(t){return rt[t-1]||(rt[t-1]=$("((?:%[\\da-f]{2}){"+t+"})","gi"))},it=function(t){try{return z(t)}catch(e){return t}},at=function(t){var e=Q(t,nt," "),n=4;try{return z(e)}catch(t){for(;n;)e=Q(e,ot(n--),it);return e}},st=/[!'()~]|%20/g,ct={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ut=function(t){return ct[t]},ht=function(t){return Q(q(t),st,ut)},ft=p((function(t,e){I(this,{type:D,target:j(t).entries,index:0,kind:e})}),H,(function(){var t=N(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,S(void 0,!0);var r=e[n];switch(t.kind){case"keys":return S(r.key,!1);case"values":return S(r.value,!1)}return S([r.key,r.value],!1)}),!0),lt=function(t){this.entries=[],this.url=null,void 0!==t&&(_(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===Y(t,0)?et(t,1):t:A(t)))};lt.prototype={type:H,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,r,o,a,s,c,u=this.entries,h=w(t);if(h)for(n=(e=C(t,h)).next;!(r=i(n,e)).done;){if(a=(o=C(T(r.value))).next,(s=i(a,o)).done||(c=i(a,o)).done||!i(a,o).done)throw new X("Expected sequence with length 2");K(u,{key:A(s.value),value:A(c.value)})}else for(var f in t)m(t,f)&&K(u,{key:f,value:A(t[f])})},parseQuery:function(t){if(t)for(var e,n,r=this.entries,o=tt(t,"&"),i=0;i<o.length;)(e=o[i++]).length&&(n=tt(e,"="),K(r,{key:at(J(n)),value:at(W(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],r=0;r<e.length;)t=e[r++],K(n,ht(t.key)+"="+ht(t.value));return W(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var pt=function(){v(this,dt);var t=I(this,new lt(arguments.length>0?arguments[0]:void 0));s||(this.size=t.entries.length)},dt=pt.prototype;if(f(dt,{append:function(t,e){var n=j(this);b(arguments.length,2),K(n.entries,{key:A(t),value:A(e)}),s||this.length++,n.updateURL()},delete:function(t){for(var e=j(this),n=b(arguments.length,1),r=e.entries,o=A(t),i=n<2?void 0:arguments[1],a=void 0===i?i:A(i),c=0;c<r.length;){var u=r[c];if(u.key!==o||void 0!==a&&u.value!==a)c++;else if(Z(r,c,1),void 0!==a)break}s||(this.size=r.length),e.updateURL()},get:function(t){var e=j(this).entries;b(arguments.length,1);for(var n=A(t),r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){var e=j(this).entries;b(arguments.length,1);for(var n=A(t),r=[],o=0;o<e.length;o++)e[o].key===n&&K(r,e[o].value);return r},has:function(t){for(var e=j(this).entries,n=b(arguments.length,1),r=A(t),o=n<2?void 0:arguments[1],i=void 0===o?o:A(o),a=0;a<e.length;){var s=e[a++];if(s.key===r&&(void 0===i||s.value===i))return!0}return!1},set:function(t,e){var n=j(this);b(arguments.length,1);for(var r,o=n.entries,i=!1,a=A(t),c=A(e),u=0;u<o.length;u++)(r=o[u]).key===a&&(i?Z(o,u--,1):(i=!0,r.value=c));i||K(o,{key:a,value:c}),s||(this.size=o.length),n.updateURL()},sort:function(){var t=j(this);L(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=j(this).entries,r=E(t,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((e=n[o++]).value,e.key,this)},keys:function(){return new ft(this,"keys")},values:function(){return new ft(this,"values")},entries:function(){return new ft(this,"entries")}},{enumerable:!0}),u(dt,O,dt.entries,{name:"entries"}),u(dt,"toString",(function(){return j(this).serialize()}),{enumerable:!0}),s&&h(dt,"size",{get:function(){return j(this).entries.length},configurable:!0,enumerable:!0}),l(pt,H),r({global:!0,constructor:!0,forced:!c},{URLSearchParams:pt}),!c&&g(F)){var vt=a(G.has),gt=a(G.set),mt=function(t){if(_(t)){var e,n=t.body;if(y(n)===H)return e=t.headers?new F(t.headers):new F,vt(e,"content-type")||gt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),R(t,{body:x(0,A(n)),headers:x(0,e)})}return t};if(g(M)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return M(t,arguments.length>1?mt(arguments[1]):{})}}),g(k)){var Et=function(t){return v(this,V),new k(t,arguments.length>1?mt(arguments[1]):{})};V.constructor=Et,Et.prototype=V,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Et})}}t.exports={URLSearchParams:pt,getState:j}},9307:function(t,e,n){n(2625)},9391:function(t,e,n){n(1694);var r,o=n(9989),i=n(7697),a=n(6837),s=n(9037),c=n(4071),u=n(8844),h=n(1880),f=n(2148),l=n(767),p=n(6812),d=n(5394),v=n(1055),g=n(9015),m=n(730).codeAt,E=n(6430),y=n(4327),T=n(5997),_=n(1500),A=n(2625),R=n(618),x=R.set,C=R.getterFor("URL"),w=A.URLSearchParams,S=A.getState,b=s.URL,P=s.TypeError,L=s.parseInt,O=Math.floor,H=Math.pow,D=u("".charAt),I=u(/./.exec),j=u([].join),N=u(1..toString),U=u([].pop),B=u([].push),M=u("".replace),k=u([].shift),F=u("".split),V=u("".slice),G=u("".toLowerCase),$=u([].unshift),X="Invalid scheme",z="Invalid host",q="Invalid port",Y=/[a-z]/i,W=/[\d+-.a-z]/i,K=/\d/,Q=/^0x/i,J=/^[0-7]+$/,Z=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,nt=/[\0\t\n\r #/:<>?@[\\\]^|]/,rt=/^[\u0000-\u0020]+/,ot=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,it=/[\t\n\r]/g,at=function(t){var e,n,r,o;if("number"==typeof t){for(e=[],n=0;n<4;n++)$(e,t%256),t=O(t/256);return j(e,".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,o=0,i=0;i<8;i++)0!==t[i]?(o>n&&(e=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(e=r,n=o),e}(t),n=0;n<8;n++)o&&0===t[n]||(o&&(o=!1),r===n?(e+=n?":":"::",o=!0):(e+=N(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},st={},ct=d({},st,{" ":1,'"':1,"<":1,">":1,"`":1}),ut=d({},ct,{"#":1,"?":1,"{":1,"}":1}),ht=d({},ut,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ft=function(t,e){var n=m(t,0);return n>32&&n<127&&!p(e,t)?t:encodeURIComponent(t)},lt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pt=function(t,e){var n;return 2===t.length&&I(Y,D(t,0))&&(":"===(n=D(t,1))||!e&&"|"===n)},dt=function(t){var e;return t.length>1&&pt(V(t,0,2))&&(2===t.length||"/"===(e=D(t,2))||"\\"===e||"?"===e||"#"===e)},vt=function(t){return"."===t||"%2e"===G(t)},gt={},mt={},Et={},yt={},Tt={},_t={},At={},Rt={},xt={},Ct={},wt={},St={},bt={},Pt={},Lt={},Ot={},Ht={},Dt={},It={},jt={},Nt={},Ut=function(t,e,n){var r,o,i,a=y(t);if(e){if(o=this.parse(a))throw new P(o);this.searchParams=null}else{if(void 0!==n&&(r=new Ut(n,!0)),o=this.parse(a,null,r))throw new P(o);(i=S(new w)).bindURL(this),this.searchParams=i}};Ut.prototype={type:"URL",parse:function(t,e,n){var o,i,a,s,c,u=this,h=e||gt,f=0,l="",d=!1,m=!1,E=!1;for(t=y(t),e||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,t=M(t,rt,""),t=M(t,ot,"$1")),t=M(t,it,""),o=v(t);f<=o.length;){switch(i=o[f],h){case gt:if(!i||!I(Y,i)){if(e)return X;h=Et;continue}l+=G(i),h=mt;break;case mt:if(i&&(I(W,i)||"+"===i||"-"===i||"."===i))l+=G(i);else{if(":"!==i){if(e)return X;l="",h=Et,f=0;continue}if(e&&(u.isSpecial()!==p(lt,l)||"file"===l&&(u.includesCredentials()||null!==u.port)||"file"===u.scheme&&!u.host))return;if(u.scheme=l,e)return void(u.isSpecial()&&lt[u.scheme]===u.port&&(u.port=null));l="","file"===u.scheme?h=Pt:u.isSpecial()&&n&&n.scheme===u.scheme?h=yt:u.isSpecial()?h=Rt:"/"===o[f+1]?(h=Tt,f++):(u.cannotBeABaseURL=!0,B(u.path,""),h=It)}break;case Et:if(!n||n.cannotBeABaseURL&&"#"!==i)return X;if(n.cannotBeABaseURL&&"#"===i){u.scheme=n.scheme,u.path=g(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,h=Nt;break}h="file"===n.scheme?Pt:_t;continue;case yt:if("/"!==i||"/"!==o[f+1]){h=_t;continue}h=xt,f++;break;case Tt:if("/"===i){h=Ct;break}h=Dt;continue;case _t:if(u.scheme=n.scheme,i===r)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query=n.query;else if("/"===i||"\\"===i&&u.isSpecial())h=At;else if("?"===i)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query="",h=jt;else{if("#"!==i){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.path.length--,h=Dt;continue}u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query=n.query,u.fragment="",h=Nt}break;case At:if(!u.isSpecial()||"/"!==i&&"\\"!==i){if("/"!==i){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,h=Dt;continue}h=Ct}else h=xt;break;case Rt:if(h=xt,"/"!==i||"/"!==D(l,f+1))continue;f++;break;case xt:if("/"!==i&&"\\"!==i){h=Ct;continue}break;case Ct:if("@"===i){d&&(l="%40"+l),d=!0,a=v(l);for(var T=0;T<a.length;T++){var _=a[T];if(":"!==_||E){var A=ft(_,ht);E?u.password+=A:u.username+=A}else E=!0}l=""}else if(i===r||"/"===i||"?"===i||"#"===i||"\\"===i&&u.isSpecial()){if(d&&""===l)return"Invalid authority";f-=v(l).length+1,l="",h=wt}else l+=i;break;case wt:case St:if(e&&"file"===u.scheme){h=Ot;continue}if(":"!==i||m){if(i===r||"/"===i||"?"===i||"#"===i||"\\"===i&&u.isSpecial()){if(u.isSpecial()&&""===l)return z;if(e&&""===l&&(u.includesCredentials()||null!==u.port))return;if(s=u.parseHost(l))return s;if(l="",h=Ht,e)return;continue}"["===i?m=!0:"]"===i&&(m=!1),l+=i}else{if(""===l)return z;if(s=u.parseHost(l))return s;if(l="",h=bt,e===St)return}break;case bt:if(!I(K,i)){if(i===r||"/"===i||"?"===i||"#"===i||"\\"===i&&u.isSpecial()||e){if(""!==l){var R=L(l,10);if(R>65535)return q;u.port=u.isSpecial()&&R===lt[u.scheme]?null:R,l=""}if(e)return;h=Ht;continue}return q}l+=i;break;case Pt:if(u.scheme="file","/"===i||"\\"===i)h=Lt;else{if(!n||"file"!==n.scheme){h=Dt;continue}switch(i){case r:u.host=n.host,u.path=g(n.path),u.query=n.query;break;case"?":u.host=n.host,u.path=g(n.path),u.query="",h=jt;break;case"#":u.host=n.host,u.path=g(n.path),u.query=n.query,u.fragment="",h=Nt;break;default:dt(j(g(o,f),""))||(u.host=n.host,u.path=g(n.path),u.shortenPath()),h=Dt;continue}}break;case Lt:if("/"===i||"\\"===i){h=Ot;break}n&&"file"===n.scheme&&!dt(j(g(o,f),""))&&(pt(n.path[0],!0)?B(u.path,n.path[0]):u.host=n.host),h=Dt;continue;case Ot:if(i===r||"/"===i||"\\"===i||"?"===i||"#"===i){if(!e&&pt(l))h=Dt;else if(""===l){if(u.host="",e)return;h=Ht}else{if(s=u.parseHost(l))return s;if("localhost"===u.host&&(u.host=""),e)return;l="",h=Ht}continue}l+=i;break;case Ht:if(u.isSpecial()){if(h=Dt,"/"!==i&&"\\"!==i)continue}else if(e||"?"!==i)if(e||"#"!==i){if(i!==r&&(h=Dt,"/"!==i))continue}else u.fragment="",h=Nt;else u.query="",h=jt;break;case Dt:if(i===r||"/"===i||"\\"===i&&u.isSpecial()||!e&&("?"===i||"#"===i)){if(".."===(c=G(c=l))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(u.shortenPath(),"/"===i||"\\"===i&&u.isSpecial()||B(u.path,"")):vt(l)?"/"===i||"\\"===i&&u.isSpecial()||B(u.path,""):("file"===u.scheme&&!u.path.length&&pt(l)&&(u.host&&(u.host=""),l=D(l,0)+":"),B(u.path,l)),l="","file"===u.scheme&&(i===r||"?"===i||"#"===i))for(;u.path.length>1&&""===u.path[0];)k(u.path);"?"===i?(u.query="",h=jt):"#"===i&&(u.fragment="",h=Nt)}else l+=ft(i,ut);break;case It:"?"===i?(u.query="",h=jt):"#"===i?(u.fragment="",h=Nt):i!==r&&(u.path[0]+=ft(i,st));break;case jt:e||"#"!==i?i!==r&&("'"===i&&u.isSpecial()?u.query+="%27":u.query+="#"===i?"%23":ft(i,st)):(u.fragment="",h=Nt);break;case Nt:i!==r&&(u.fragment+=ft(i,ct))}f++}},parseHost:function(t){var e,n,r;if("["===D(t,0)){if("]"!==D(t,t.length-1))return z;if(e=function(t){var e,n,r,o,i,a,s,c=[0,0,0,0,0,0,0,0],u=0,h=null,f=0,l=function(){return D(t,f)};if(":"===l()){if(":"!==D(t,1))return;f+=2,h=++u}for(;l();){if(8===u)return;if(":"!==l()){for(e=n=0;n<4&&I(tt,l());)e=16*e+L(l(),16),f++,n++;if("."===l()){if(0===n)return;if(f-=n,u>6)return;for(r=0;l();){if(o=null,r>0){if(!("."===l()&&r<4))return;f++}if(!I(K,l()))return;for(;I(K,l());){if(i=L(l(),10),null===o)o=i;else{if(0===o)return;o=10*o+i}if(o>255)return;f++}c[u]=256*c[u]+o,2!=++r&&4!==r||u++}if(4!==r)return;break}if(":"===l()){if(f++,!l())return}else if(l())return;c[u++]=e}else{if(null!==h)return;f++,h=++u}}if(null!==h)for(a=u-h,u=7;0!==u&&a>0;)s=c[u],c[u--]=c[h+a-1],c[h+--a]=s;else if(8!==u)return;return c}(V(t,1,-1)),!e)return z;this.host=e}else if(this.isSpecial()){if(t=E(t),I(et,t))return z;if(e=function(t){var e,n,r,o,i,a,s,c=F(t,".");if(c.length&&""===c[c.length-1]&&c.length--,(e=c.length)>4)return t;for(n=[],r=0;r<e;r++){if(""===(o=c[r]))return t;if(i=10,o.length>1&&"0"===D(o,0)&&(i=I(Q,o)?16:8,o=V(o,8===i?1:2)),""===o)a=0;else{if(!I(10===i?Z:8===i?J:tt,o))return t;a=L(o,i)}B(n,a)}for(r=0;r<e;r++)if(a=n[r],r===e-1){if(a>=H(256,5-e))return null}else if(a>255)return null;for(s=U(n),r=0;r<n.length;r++)s+=n[r]*H(256,3-r);return s}(t),null===e)return z;this.host=e}else{if(I(nt,t))return z;for(e="",n=v(t),r=0;r<n.length;r++)e+=ft(n[r],st);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return p(lt,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&pt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,o=t.host,i=t.port,a=t.path,s=t.query,c=t.fragment,u=e+":";return null!==o?(u+="//",t.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=at(o),null!==i&&(u+=":"+i)):"file"===e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+j(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(t){var e=this.parse(t);if(e)throw new P(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new Bt(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+at(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(y(t)+":",gt)},getUsername:function(){return this.username},setUsername:function(t){var e=v(y(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=ft(e[n],ht)}},getPassword:function(){return this.password},setPassword:function(t){var e=v(y(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=ft(e[n],ht)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?at(t):at(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,wt)},getHostname:function(){var t=this.host;return null===t?"":at(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,St)},getPort:function(){var t=this.port;return null===t?"":y(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=y(t))?this.port=null:this.parse(t,bt))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+j(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Ht))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=y(t))?this.query=null:("?"===D(t,0)&&(t=V(t,1)),this.query="",this.parse(t,jt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=y(t))?("#"===D(t,0)&&(t=V(t,1)),this.fragment="",this.parse(t,Nt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Bt=function(t){var e=l(this,Mt),n=_(arguments.length,1)>1?arguments[1]:void 0,r=x(e,new Ut(t,!1,n));i||(e.href=r.serialize(),e.origin=r.getOrigin(),e.protocol=r.getProtocol(),e.username=r.getUsername(),e.password=r.getPassword(),e.host=r.getHost(),e.hostname=r.getHostname(),e.port=r.getPort(),e.pathname=r.getPathname(),e.search=r.getSearch(),e.searchParams=r.getSearchParams(),e.hash=r.getHash())},Mt=Bt.prototype,kt=function(t,e){return{get:function(){return C(this)[t]()},set:e&&function(t){return C(this)[e](t)},configurable:!0,enumerable:!0}};if(i&&(f(Mt,"href",kt("serialize","setHref")),f(Mt,"origin",kt("getOrigin")),f(Mt,"protocol",kt("getProtocol","setProtocol")),f(Mt,"username",kt("getUsername","setUsername")),f(Mt,"password",kt("getPassword","setPassword")),f(Mt,"host",kt("getHost","setHost")),f(Mt,"hostname",kt("getHostname","setHostname")),f(Mt,"port",kt("getPort","setPort")),f(Mt,"pathname",kt("getPathname","setPathname")),f(Mt,"search",kt("getSearch","setSearch")),f(Mt,"searchParams",kt("getSearchParams")),f(Mt,"hash",kt("getHash","setHash"))),h(Mt,"toJSON",(function(){return C(this).serialize()}),{enumerable:!0}),h(Mt,"toString",(function(){return C(this).serialize()}),{enumerable:!0}),b){var Ft=b.createObjectURL,Vt=b.revokeObjectURL;Ft&&h(Bt,"createObjectURL",c(Ft,b)),Vt&&h(Bt,"revokeObjectURL",c(Vt,b))}T(Bt,"URL"),o({global:!0,constructor:!0,forced:!a,sham:!i},{URL:Bt})},8730:function(t,e,n){n(9391)}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t].call(i.exports,i,i.exports,r),i.exports}r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return function(){r.r(o),r.d(o,{EditGraphicsAddon:function(){return xt},EditGraphicsAddonEvents:function(){return g}});var t=r(5778);function e(){return e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(this,arguments)}function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}r(752),r(6265),r(9976),r(3356);var a={print:4,modify:8,extract:16,annotForm:32,fillForm:256,extractAccess:512,assemble:1024,printHigh:2048};let s=t.Deps.jQuery,c=t.shared.browser.getPtPxRatio,u=t.Events;const{ActivationGroup:h}=t.shared.activation,{notImplemented:f}=t.commons,{GraphicsObject:l}=t.PDF.engine,{BuiltinShortcutContext:p,BuiltinCommand:d}=t.keyboard;let v=function(n){function r(t,e,r){var o;return(o=n.call(this)||this).isDestroyed=!1,o.graphicsObject=t,o.pageRender=e,o.dependences=r,o}i(r,n);var o=r.prototype;return o.doActive=function(){let t=this.$handler,e=this.dependences.pdfViewer;if(!t){t=this.initUI(),this.$handler=t;const n=this.getContextMenuConfig();n&&!this.contextmenu&&(this.contextmenu=e.viewerUI.createContextMenu(this,t.get(0),n))}t.addClass("fwr__active"),this.updateShapeControl(),this.bindEvent()},o.getContextMenuConfig=function(){},o.getContextMenuComponentName=function(){f()},o.removeGraphicObject=function(){this.remove()},o.remove=function(){if(this.isActive){this.removeToolbar&&this.removeToolbar();const t=this.dependences.pdfViewer;t.getAllActiveElements().forEach((t=>{t.unActive(),t!==this&&t.remove&&t.remove()}));0===t.getAllActiveElements().length&&t.activeElement()}},o.removeGraphicObjects=function(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(n.removeToolbar&&n.removeToolbar(),n.unActive(),n.dependences.pdfViewer.unActiveElement(n),n.destroy(),!n.graphicsObject.doc.checkPermission(a.modify))throw new Error("Permission error");let r=0===e;n.graphicsObject.getPDFPage().removeGraphicsObjectEx(n.graphicsObject,r)}this.dependences.pdfViewer.activeElement()},o.bindEvent=function(){const{pdfViewer:t}=this.dependences;t.getKeyboard().withContext(p.ACTIVATION_ANY,(e=>{this.isDestroyed||(this.__off__delete__event__=e.keydown(d.DELETE_SELECTED_OBJECT,(e=>{const n=t.getAllActiveElements();n.length>1?this===n[n.length-1]&&this.removeGraphicObjects(n):this.removeGraphicObject(),this.__off__delete__event__()})),this.__off__esc__event__=e.keydown(d.UNSELECT_OBJECT,(t=>{this.unActive(!0)})))}))},o.unBindEvent=function(){this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=()=>{},this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=()=>{},this.__off_active_escape_event&&this.__off_active_escape_event(),delete this.__off_active_escape_event},o.translateContextMenuName=function(t){for(let e in t)if("items"===e){let n=t[e],r=this.dependences.pdfViewer.i18n;for(let t in n){let e=n[t];e.nameI18nKey&&(e.name=r.t(e.nameI18nKey))}}return t},o.updateShapeControl=function(){const t=this.getBoundary(),e=this._getShapeControllerBoundaryBox();this.shapeControl&&this.shapeControl.active(this.$handler,t,e)},o.unActive=function(){this.isActive&&(n.prototype.unActive.call(this),this.$handler&&(this.$handler.removeClass("fwr__active"),this.shapeControl&&this.shapeControl.deactive(),this.dependences.pdfViewer.eventEmitter.off(u.fitWidthResizeViewport,this.afterZoom),this.dependences.pdfViewer.eventEmitter.off(u.zoomToSuccess,this.afterZoom),this.$handler&&this.$handler.remove(),this.$handler=null,this.unBindEvent(),this.$charEditContainer&&this.$charEditContainer.off("focus"),this.removeToolbar&&this.removeToolbar()))},o.doDeactive=function(){},o.destroy=function(){this.isDestroyed=!0,this.unActive(),this.shapeControl&&this.shapeControl.destroy(),this.contextmenu&&this.contextmenu.destroy()},o.getModel=function(){return this.graphicsObject},o._getShapeControllerBoundaryBox=function(){const t=this.pageRender.page;let e=c()*this.pageRender.getScale(),[n,r]=[t.getPxWidth()*e,t.getPxHeight()*e];return this.pageRender.rotate%180!=0&&([r,n]=[n,r]),{left:0,top:0,width:n,height:r}},o.getBoundary=function(){const t=this.pageRender.page,e=this.graphicsObject.getRect(),n=t.getDeviceRect(e,this.pageRender.getScale(),this.pageRender.getRotation());return{left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top}},o.initUI=function(){if(this.$handler)return;let e=this.$handler=s('<div class="fwr__graphics-object-handler"\n        ></div>');this.pageRender.pageHandler.$handler.append(e),e.get(0).__graphics_object_component=this;let n=!0;return this.predefineTextObject&&(n=!1),this.shapeControl=new t.ShapeControl({prestart:()=>this.onPrestart(),start:(t,e,n)=>this.onStartUpdateShape(t,e,n),moving:(t,e,{offsetX:n,offsetY:r})=>this.onShapeMoving(t,e,n,r),update:(t,e)=>this.onShapeUpdating(t,e),end:(t,e,n,r)=>this.onShapeUpdateEnd(t,e,n,r),afterEnd:t=>this.onAfterShapeCtrlEnd(t),resizable:n,enableDiagonally:!0,enableFrame:!0,previewer:!0,auxiliaryLine:void 0}),this.dependences.pdfViewer.eventEmitter.on(u.zoomToSuccess,this.afterZoom=()=>{this.updateShapeControl()}),this.dependences.pdfViewer.eventEmitter.on(u.fitWidthResizeViewport,this.afterZoom),this.$handler},o.onPrestart=function(){this.dependences.pdfViewer.getAllActiveElements().forEach((t=>{t!==this&&t instanceof r&&this.shapeControl.companion(t.shapeControl)}))},o.onAfterShapeCtrlEnd=function(t){this.shapeControl.clearCompanions()},o.onStartUpdateShape=function(t,e,n){if("move"){if(this.dependences.pdfViewer.getAllActiveElements().length>1||!this.graphicsObject.getBitmap)return;s(this.shapeControl.ui.querySelector(".fv__shape-control-previewer")).show(),this.graphicsObject.getBitmap(this.pageRender.getScale(),this.pageRender.getRotation()).then((t=>{if(!t)return;let e=this.shapeControl.getPreviewerContext();s(e.canvas).attr({width:t.width,height:t.height});let n=e.createImageData(t.width,t.height+1),r=new(Uint8ClampedArray||Uint8Array)(t.buffer);n.data.set(r),e.putImageData(n,0,0)}))}},o.onShapeMoving=function(t,e){},o.onShapeUpdating=function(t,e){},o.onShapeUpdateEnd=function(t,n,r,o=!0){let i=e({},t);i.right=i.left+i.width,i.bottom=i.top+i.height,i=this.pageRender.page.reverseDeviceRect(i,this.pageRender.getScale(),this.pageRender.getRotation()),this.graphicsObject.setRect(i,o).then((t=>{s(this.shapeControl.ui.querySelector(".fv__shape-control-previewer")).hide(),this.updateShapeControl()}))},o.setColor=function(t){return this.graphicsObject.setBorderColor(t)},o.setBorderStyle=function(t,e){return this.graphicsObject.setBorderStyle(t,e).then((t=>{this.updateShapeControl()}))},o.setOpacity=function(t){return this.graphicsObject.setOpacity(t)},o.setFillColor=function(t){return this.graphicsObject.setFillColor(t)},o.setBorderWidth=function(t){return this.graphicsObject.setBorderWidth(t).then((t=>{this.updateShapeControl()}))},o.moveToPosition=function(t,e){return this.graphicsObject.moveToPosition(t,e).then((t=>{this.updateShapeControl()}))},o.getGraphicsObject=function(){return this.graphicsObject},r}(t.shared.activation.Activatable);r(3964),r(4043),r(7267),r(6409);var g={textObjectActive:"text-object-active",textObjectUnActive:"text-object-unactive",addTextObjectParamTransfer:"add-text-object-param-transfer"};r(8730),r(9307);let m,E,y={};"function"==typeof FontFace?(m=function(t,e){return y[t]?y[t]:y[t]=new Promise((function(n,r){e().then((function(e){if(!e)return r(),void y[t];var o=new FontFace(t,e.buffer||e.url);o.load().then((()=>{document.fonts.add(o),n(o)}),(function(){r(),delete y[t]}))}),(function(){r(),delete y[t]}))}))},E=function(t){y[t]&&y[t].then((function(e){delete y[t],document.fonts.delete(e)}))}):(m=function(t,e){return y[t]?y[t]:y[t]=new Promise((function(n,r){e().then((function(e){return e?e.buffer?URL.createObjectURL(new Blob([e.buffer],"application/x-font-woff")):e.url:(r("woff is invalid"),void delete y[t])})).then((function(e){if(!e)return r();let o=document.createElement("style");o.innerHTML='@font-face{font-family:"'+t+'"; src:url("'+e+'");}',document.head.appendChild(o),n(o)}))}))},E=function(t){y[t]&&y[t].then((function(e){delete y[t],e.parentNode.removeChild(e)}))});var T;!function(t){t.STATE_HANDLER_HAND="hand",t.STATE_HANDLER_CHECK_THE_SEARCH="checkTheSearch",t.STATE_HANDLER_CREATE_CARET="createCaret",t.STATE_HANDLER_CREATE_ARROW="createArrow",t.STATE_HANDLER_CREATE_AREA_HIGHLIGHT="createAreaHighlight",t.STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT="createAreaHighlight",t.STATE_HANDLER_CREATE_CIRCLE="createCircle",t.STATE_HANDLER_CREATE_FILE_ATTACHMENT="createFileAttachment",t.STATE_HANDLER_CREATE_HIGHLIGHT="createHighlight",t.STATE_HANDLER_CREATE_IMAGE="createImage",t.STATE_HANDLER_CREATE_LINK="createLink",t.STATE_HANDLER_CREATE_LINE="createLine",t.STATE_HANDLER_CREATE_DISTANCE="createDistance",t.STATE_HANDLER_CREATE_PERIMETER="createPerimeter",t.STATE_HANDLER_CREATE_AREA="createArea",t.STATE_HANDLER_CREATE_CIRCLE_AREA="createCircleArea",t.STATE_HANDLER_CREATE_PENCIL="createPencil",t.STATE_HANDLER_CREATE_POLYGON_CLOUD="createPolygonCloud",t.STATE_HANDLER_CREATE_POLYGON="createPolygon",t.STATE_HANDLER_CREATE_POLYLINE="createPolyline",t.STATE_HANDLER_CREATE_REPLACE="createReplace",t.STATE_HANDLER_CREATE_SQUARE="createSquare",t.STATE_HANDLER_CREATE_SQUIGGLY="createSquiggly",t.STATE_HANDLER_CREATE_STAMP="createStamp",t.STATE_HANDLER_CREATE_STRIKE_OUT="createStrikeOut",t.STATE_HANDLER_CREATE_TEXT="createText",t.STATE_HANDLER_CREATE_UNDERLINE="createUnderline",t.STATE_HANDLER_MARQUEE="marquee",t.STATE_HANDLER_ERASER="eraser",t.STATE_HANDLER_LOUPE="loupe",t.STATE_HANDLER_SELECT_TEXT_ANNOTATION="select-text-annotation",t.STATE_HANDLER_SELECT_TEXT_IMAGE="select-text-image",t.STATE_HANDLER_SELECT_ANNOTATION="select-annotation",t.STATE_HANDLER_CREATE_FREETEXT_BOX="createFreeTextBox",t.STATE_HANDLER_CREATE_FREETEXT_CALLOUT="createFreeTextCallout",t.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER="createFreeTextTypewriter",t.STATE_HANDLER_CREATE_FIELD_TEXT="CreateTextStateHandler",t.STATE_HANDLER_CREATE_FIELD_SIGNATURE="CreateSignStateHandler",t.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON="CreatePushButtonStateHandler",t.STATE_HANDLER_CREATE_FIELD_CHECK_BOX="CreateCheckBoxStateHandler",t.STATE_HANDLER_CREATE_RADIO_BUTTON="CreateRadioButtonStateHandler",t.STATE_HANDLER_CREATE_FIELD_COMBO_BOX="CreateComboBoxStateHandler",t.STATE_HANDLER_CREATE_FIELD_LIST_BOX="CreateListBoxStateHandler",t.STATE_HANDLER_CREATE_FIELD_DATE="CreateDateStateHandler",t.STATE_HANDLER_CREATE_FIELD_IMAGE="CreateImageStateHandler",t.STATE_HANDLER_SNAPSHOT_TOOL="snapshot-tool"}(T||(T={}));const _=T.STATE_HANDLER_HAND;T.STATE_HANDLER_CHECK_THE_SEARCH,T.STATE_HANDLER_CREATE_CARET,T.STATE_HANDLER_CREATE_ARROW,T.STATE_HANDLER_CREATE_AREA_HIGHLIGHT,T.STATE_HANDLER_CREATE_AREA_HIGHLIGHT,T.STATE_HANDLER_CREATE_CIRCLE,T.STATE_HANDLER_CREATE_FILE_ATTACHMENT,T.STATE_HANDLER_CREATE_HIGHLIGHT,T.STATE_HANDLER_CREATE_IMAGE,T.STATE_HANDLER_CREATE_LINK,T.STATE_HANDLER_CREATE_LINE,T.STATE_HANDLER_CREATE_DISTANCE,T.STATE_HANDLER_CREATE_PERIMETER,T.STATE_HANDLER_CREATE_AREA,T.STATE_HANDLER_CREATE_CIRCLE_AREA,T.STATE_HANDLER_CREATE_PENCIL,T.STATE_HANDLER_CREATE_POLYGON_CLOUD,T.STATE_HANDLER_CREATE_POLYGON,T.STATE_HANDLER_CREATE_POLYLINE,T.STATE_HANDLER_CREATE_REPLACE,T.STATE_HANDLER_CREATE_SQUARE,T.STATE_HANDLER_CREATE_SQUIGGLY,T.STATE_HANDLER_CREATE_STAMP,T.STATE_HANDLER_CREATE_STRIKE_OUT,T.STATE_HANDLER_CREATE_TEXT,T.STATE_HANDLER_CREATE_UNDERLINE,T.STATE_HANDLER_MARQUEE,T.STATE_HANDLER_ERASER,T.STATE_HANDLER_LOUPE,T.STATE_HANDLER_SELECT_TEXT_ANNOTATION,T.STATE_HANDLER_SELECT_TEXT_IMAGE,T.STATE_HANDLER_SELECT_ANNOTATION,T.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER,T.STATE_HANDLER_CREATE_FREETEXT_CALLOUT,T.STATE_HANDLER_CREATE_FREETEXT_BOX,T.STATE_HANDLER_SNAPSHOT_TOOL,T.STATE_HANDLER_CREATE_FIELD_TEXT,T.STATE_HANDLER_CREATE_FIELD_SIGNATURE,T.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON,T.STATE_HANDLER_CREATE_RADIO_BUTTON;r(278);function A(t,e,n){t.focus(n),setTimeout((()=>{t.focus(n),t.setSelectionRange(e.startOffset,e.endOffset)})),t.setSelectionRange(e.startOffset,e.endOffset)}function R(t,e,n){var r,o;t.focus(e),setTimeout((()=>t.focus(e)));const i=document.createRange();if(i.selectNodeContents(t),n){const e=t.childNodes[n.startNodeIndex||0];e&&i.setStart(e,Math.min(n.startOffset,(null===(r=e.textContent)||void 0===r?void 0:r.length)||0));const a=t.childNodes[n.endNodeIndex||0];a&&i.setStart(a,Math.min(n.endOffset,(null===(o=e.textContent)||void 0===o?void 0:o.length)||0))}i.collapse(!0);const a=window.getSelection();a&&(a.removeAllRanges(),a.addRange(i))}let x=t.Deps.jQuery,C=t.shared.browser.getPtPxRatio;const w=t.ViewerEvents.renderPageSuccess,S=t.ViewerEvents.switchStateHandler,{BuiltinCommand:b,BuiltinShortcutContext:P}=t.keyboard,{debounce:L}=t.shared,{colorConvertor:O,KeyCodes:H,KeyboardUtils:{isMatch:D,matchers:I}}=t.commons;let j=function(e){function n(t,n,r){var o;return(o=e.call(this,t,n,r)||this).fillSign=!1,o}i(n,e);var r=n.prototype;return r.initUI=function(){let e=this.$handler=x('<div class="fwr__graphics-object-handler fwr__text-object-edit"\n        ></div>');this.pageRender.pageHandler.$handler.after(e),e.get(0).__graphics_object_component=this;this.shapeControl=new t.ShapeControl({prestart:()=>this.onPrestart(),start:(t,e,n)=>this.onStartUpdateShape(t,e,n),moving:(t,e,{offsetX:n,offsetY:r})=>this.onShapeMoving(t,e,n,r),update:(t,e)=>this.onShapeUpdating(t,e),rotate:(t,e)=>this.onRotate(t,e),end:(t,e,n,r)=>this.onShapeUpdateEnd(t,e,n,r),afterEnd:t=>this.onAfterShapeCtrlEnd(t),resizable:!0,enableDiagonally:!0,enableFrame:!0,previewer:!0});return e.on("dblclick",(()=>{this.unActive(),this.activeCharEdit()})),this.$handler},r.reActive=function(){},r.active=function(t=!0){e.prototype.active.call(this),this.reActive=()=>{this.unActive(),this.active()};let n=this.pageRender.pdfViewer.getEventEmitter();t&&n.emit(g.textObjectActive,this),this.pageRedrawBind&&n.off(w,this.pageRedrawBind),n.on(w,this.pageRedrawBind=t=>{t.index===this.getModel().getPDFPage().getIndex()&&this.reActive()}),n.on(S,this.switchStateHandlerBind=()=>{this.eCharInput&&this.applyEdit()})},r.unActive=function(){this.dependences.pdfViewer._setSaveBefore(),e.prototype.unActive.call(this),this.unActiveCharEdit();let t=this.pageRender.pdfViewer.getEventEmitter();t.off(w,this.pageRedrawBind),t.off(S,this.switchStateHandlerBind),t.emit(g.textObjectUnActive,this)},r.unActiveCharEdit=function(){this.$charEditContainer&&this.$charEditContainer.remove(),this.$charEditContainer=null,this.unswitchBinder&&this.unswitchBinder()},r.applyEdit=function(){if(!this.eCharInput)return Promise.reject(new Error("text input box has not been initialized!"));let t=this.eCharInput.innerText;"string"!=typeof t&&(t=this.eCharInput.textContent);let e="",n=0;for(let r=0;r<t.length;r++){this.eCharInput.innerText=t.substring(0,r+1);let o=t[r];for(;("\n"==o||"\r"==o)&&r<t.length;)r++,o=t[r];const i=this.eCharInput.offsetHeight;e+=0!==n&&n<i?"\n"+o:o,n=i}return t=e.replace(/\u00a0/g," "),this.isApplyEdit=!0,this.setTextChar(t).then((()=>{this.unActive()})).finally((()=>{this.isApplyEdit=!1}))},r.initCharEditContainer=function(){let t;t=this.fillSign?x('<div class="fv__text-object-edit-char-container"><div class="fv__text-object-edit-char-mask-layer"></div><div><span class="fv_fillsign-moving"></span><span class="fv__text-object-edit-char-input " contenteditable></span></div></div>'):x('<div class="fv__text-object-edit-char-container"><div class="fv__text-object-edit-char-mask-layer"></div><span class="fv__text-object-edit-char-input " contenteditable></span></div>'),this.pageRender.$handler.after(t);let e=t.find(".fv__text-object-edit-char-input"),n=e[0];return this.eCharInput=n,e.on("keydown",(n=>{if(!n.shiftKey&&(13===n.keyCode&&(n.preventDefault(),this.applyEdit()),this.fillSign)){let n=t.find(".fv__text-object-edit-char-mask-layer"),r=e[0].getBoundingClientRect().width;n.width()<r+15&&n.css("width",r+15+"px")}})),this.fillSign&&this.bindMovingEvent(t),t},r.activeCharEdit=function(e){this.isActive=!0;let n=this.$charEditContainer=this.$charEditContainer||this.initCharEditContainer(),r=n.find(".fv__text-object-edit-char-mask-layer");const o=n.find(".fv__text-object-edit-char-input");this.dependences.pdfViewer._setSaveBefore((()=>this.applyEdit()));let i=this.graphicsObject,a=i.getRect(),s=this.pageRender;const c=s.pdfViewer;return o.off("focus").on("focus",(()=>{const t=c.getKeyboard(),e=t.activeContext(P.EDIT_TEXT_OBJECT);let n,r=!1;t.withContext(P.EDIT_TEXT_OBJECT,(t=>{r||(n=t.keyup(b.BLUR_EDITTING_TEXT_OBJECT,(()=>{let t=this.eCharInput.innerText;"string"!=typeof t&&(t=this.eCharInput.textContent),this.setTextChar(t).then((()=>{this.unActive()})),c.getStateHandlerManager().switchTo(_)})))})),this.unswitchBinder=()=>{r||(r=!0,e(),n&&n())}})),c.getEventEmitter().on(S,this.switchStateHandlerBind=()=>{this.eCharInput&&this.applyEdit()}),Promise.all([s.getPDFPage(),s.getScale(),s.getRotation()]).then((([t,e,n])=>[t.getDeviceRect(a,e,n),t,e,n])).then((([o,a,c,u])=>{n.css({left:o.left+"px",top:o.bottom+"px"});let h=n.find(".fv__text-object-edit-char-input"),f=h[0];r.css({width:o.right-o.left+"px",height:o.bottom-o.top+"px"});let l=i.getText();l=l.replace(/\u0020/g," "),void 0===e&&(e=l),"string"==typeof f.innerText?f.innerText=l:f.textContent=l;let p=i.getFontSize(),d=i.getMatrix().toArray().slice(0,4),v=12,E=p*C()<v;E&&(p*=v,d[0]/=v,d[1]/=v,d[2]/=v,d[3]/=v),d[0]*=c,d[1]*=-c,d[2]*=-c,d[3]*=c;let y=new t.Matrix(d[0],d[1],d[2],d[3],0,0),T=a.getRotationAngle()+u;if(y.rotate(T/180*Math.PI),this.fillSign)h.css({fontSize:p+"pt",transform:"matrix("+y.toArray().join(",")+")",color:O(16777215&i.getFillColor(),"#"),transform:"matrix("+y.toArray().join(",")+")"});else{if("TimesNewRoman"===i.info.textState.font.baseName)otherFontName="Times New Roman";h.css({fontFamily:'"'+[i.info.textState.font.baseName,i.info.textState.font.familyName,i.info.textState.font.nameKey,i.info.textState.font.name,"FoxitPDFSDKForWeb"].join('","')+'"',fontSize:p+"pt",fontWeight:i.info.textState.font.isBold?700:400,fontStyle:i.info.textState.font.isItalic?"italic":"",transform:"matrix("+y.toArray().join(",")+")",color:O(16777215&i.getFillColor(),"#")})}let _,x,S=h.height(),b=h.width(),P=y.transformPoint(b,S),H=P[0],D=P[1];this.fillSign&&this.showToolbar(Math.abs(D)),H>=0&&D>0?(_=-y.transformPoint(b,0)[1]-S,x=0):H<0&&D>=0?(_=-y.transformPoint(b,0)[1]-S,x=-y.transformPoint(0,b)[1]):H<=0&&D<0?(_=y.transformPoint(0,S)[1]-S,x=-H+y.transformPoint(0,S)[0]):H>0&&D<=0&&(_=-y.transformPoint(0,S)[1]-S,x=H-y.transformPoint(b,0)[0]),h.css({top:_+"px",left:x+"px",transformOrigin:"left "+S+"px",bottom:"auto"}),e!==l&&("string"==typeof f.innerText?f.innerText=e:f.textContent=e),this.fillSign||m(i.info.textState.font.nameKey||i.info.textState.font.name,i.getWoff.bind(i)).catch((function(){})),this.reActive=t=>{this.unActive(),this.activeCharEdit(t)};let I=this.pageRender.pdfViewer.getEventEmitter();this.fillSign||I.emit(g.textObjectActive,this),document.activeElement!==f&&f.focus();let{maxWidth:j,maxHeight:N}=V(),U=E?c/v:c;f.style.cssText+=`\n                max-width: ${j/U}px;\n            `;let B=f.textContent;const M=()=>{f.style.cssText+="\n                    white-space: pre;\n                    width: auto;\n                ";const{width:t}=f.getBoundingClientRect();f.style.cssText+=`\n                    width: ${Math.min(j,t)/U}px;\n                    white-space: pre-line;\n                `;const e=function(t){const e=window.getSelection();if(null==e?void 0:e.rangeCount){const r=e.getRangeAt(0);if(t.contains(r.startContainer)&&t.contains(r.endContainer))return{startNodeIndex:n(r.startContainer),endNodeIndex:n(r.endContainer),startOffset:r.startOffset,endOffset:r.endOffset}}return null;function n(e){let n=e;for(;n&&n.parentElement!==t;)n=n.parentNode;return Array.from(t.childNodes).indexOf(n)}}(f),{height:n}=f.getBoundingClientRect();n>N?(f.textContent=B,function(t,e,n){t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?A(t,e,n):"inherit"!==t.contentEditable&&R(t,n,e)}(f,e)):B=f.textContent};let k=!1;f.addEventListener("input",(()=>{k||M()})),f.addEventListener("compositionstart",(()=>{k=!0,f.style.maxWidth=j/c+"px"}));const F=L(M,0);function V(){const t=s.$ui[0].getBoundingClientRect(),e=f.getBoundingClientRect();return{maxWidth:t.right-e.left,maxHeight:t.bottom-e.top}}f.addEventListener("compositionupdate",(()=>{F()})),f.addEventListener("compositionend",(()=>{k=!1,f.style.maxWidth="",M()})),this.pageRedrawBind&&I.off(w,this.pageRedrawBind),I.on(w,this.pageRedrawBind=t=>{if(t.index===this.getModel().getPDFPage().getIndex()){e="string"==typeof f.innerText?f.innerText:f.textContent;const{maxWidth:n,maxHeight:r}=V();j=n,N=r;let o=E?t.scale/v:t.scale;f.style.cssText+=`\n                        max-width: ${j/o}px;\n                    `}})}))},r.showToolbar=function(t){},r.setTextChar=function(t){return this.graphicsObject.setText(t)},r.getContextMenuConfig=function(){},r.getTextChar=function(){if(this.$charEditContainer){let t=this.$charEditContainer.find(".fv__text-object-edit-char-input")[0],e=t.innerText;return"string"!=typeof e&&(e=t.textContent),e.replace(/\u00a0/g," ")}return this.getModel().getText()},r.textCharSure=function(){return!this.isApplyEdit&&this.$charEditContainer?this.fillSign?this.saveFillSign():this.applyEdit():Promise.resolve()},r.remove=function(){return e.prototype.remove.call(this),this.dependences.pdfViewer.unActiveElement(this),this.destroy(),this.graphicsObject.remove()},n}(v);function N(t){if("clientX"in t)return t.clientX;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientX;case"touchend":case"touchcancel":return t.changedTouches[0].clientX}}function U(t){if("clientY"in t)return t.clientY;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientY;case"touchend":case"touchcancel":return t.changedTouches[0].clientY}}let B=t.Deps.jQuery;const{colorConvertor:M}=t.commons;let k=function(e){function n(t,n,r){return e.call(this,t,n,r)||this}i(n,e);var r=n.prototype;return r.active=function(){e.prototype.active.call(this)},r.getPropertyOptions=function(){let t=this.graphicsObject,e=t.getBorderColor();e=this.graphicsObject.needStroke()?M(e||4278190080,"#"):0;let n=t.getFillColor();0==t.getFillMode()&&(n=0);let r=t.getBorderWidth();return{color:e,borderTransparent:!0,opacity:t.getOpacity(),fillColor:n,borderWidth:r}},r.initUI=function(){e.prototype.initUI.call(this),this.$tip=B('<div class="fwr__path-object-tip"></div>'),this.$tip.appendTo(this.$handler);let t=this.rectHammer=new Hammer.Manager(this.$handler[0],{recognizers:[[Hammer.Press]]});return this.$handler.on("mousemove",(t=>{this.$tip.hide()})),t.on("press",(t=>{if(B(".fv__ui-mobile").length)return;const e=this.graphicsObject.getRect();let n=F(this.$handler.parent()[0],t),r={left:n.x+"px",top:n.y+20+"px"};n=this.pageRender.page.reverseDevicePoint([n.x,n.y],this.pageRender.getScale(),this.pageRender.getRotation()),this.$tip.show().css(r).html(`object : x:${e.left.toFixed(2)},y:${e.bottom.toFixed(2)}<br/>mouse: x:${n[0].toFixed(2)},y:${n[1].toFixed(2)}`)})),this.$handler},r.showPropertiesDialog=function(e){let n=this.dependences.pdfViewer.activePropertiesDialog;this.dependences.pdfViewer.activePropertiesDialog?(n.show(e),n.setViewerComponent(this),this.activePropertiesDialog=n):this.propertiesControl=new t.PropertiesControl(this)},r.getContextMenuComponentName=function(){return"fv--path-graphics-object-contextmenu"},r.getContextMenuConfig=function(){return{selector:"div.fv__shape-control",items:{properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:(t,e,n)=>{this.showPropertiesDialog(n)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:()=>{this.remove()}}}}},r.unActive=function(t){let n=this.activePropertiesDialog;n&&n.viewerComponent===this&&n.hide(),e.prototype.unActive.call(this,t)},r.remove=function(){return e.prototype.remove.call(this),this.dependences.pdfViewer.unActiveElement(this),this.destroy(),this.graphicsObject.remove()},r.destroy=function(){this.contextmenu&&this.contextmenu.destroy(),this.propertiesControl&&this.propertiesControl.close(),this.propertiesControl=null,this.rectHammer&&this.rectHammer.destroy(),e.prototype.destroy.call(this)},n}(v);const F=(t,e)=>{let n=t.getBoundingClientRect();const r=e.srcEvent,o=N(r),i=U(r);return{x:o-n.left-e.deltaX,y:i-n.top-e.deltaY}};let V=t.Deps.jQuery,G=t.Events,$=function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e.prototype._resize=function(e,n,r){this.enableUniform="north"!=e&&"south"!=e&&"east"!=e&&"west"!=e,t.prototype._resize.call(this,e,n,r)},e}(t.ShapeControl),X=function(e){function n(t,n,r){return e.call(this,t,n,r)||this}i(n,e);var r=n.prototype;return r.initUI=function(){let t=this,e=this.$handler=V('<div class="fwr__graphics-object-handler" \n        ></div>');return this.pageRender.pageHandler.$handler.append(e),e.get(0).__graphics_object_component=this,this.shapeControl=new $({prestart:()=>this.onPrestart(),start:(t,e,n)=>this.onStartUpdateShape(t,e,n),moving:(t,e,{offsetX:n,offsetY:r})=>this.onShapeMoving(t,e,n,r),update:(t,e)=>this.onShapeUpdating(t,e),beforeRotateStart:()=>this.onBeforeRotateStart(),rotateEnd:(t,e,n,r)=>this.onRotate(t),afterRotateEnd:()=>this.onAfterRotateEnd(),rotateStart:()=>this.onRotateStart(),end:(t,e,n,r)=>this.onShapeUpdateEnd(t,e,n,r),afterEnd:t=>this.onAfterShapeCtrlEnd(t),resizable:!0,rotatable:!0,enableDiagonally:!0,enableFrame:!0,enableUniform:!0,previewer:!0,enableSizeBox:!0}),this.dependences.pdfViewer.eventEmitter.on(G.zoomToSuccess,this.afterZoom=function(){t.updateShapeControl()}),this.$handler},r.onBeforeRotateStart=function(){this.dependences.pdfViewer.getAllActiveElements().forEach((t=>{t!==this&&t instanceof n&&this.shapeControl.companion(t.shapeControl)}))},r.onAfterRotateEnd=function(){this.shapeControl.rotateDegree=0,this.shapeControl.companions.forEach((t=>t.rotateDegree=0)),this.shapeControl.clearCompanions()},r.onRotate=function(t){return this.pageRender.$handler.get(0).classList.remove("fv__cursor-rotation"),this.graphicsObject.setRotation(t).then((t=>{this.updateShapeControl()}))},r.updateShapeControl=function(){e.prototype.updateShapeControl.call(this),this.shapeControl.ui.style.transform=""},r.onRotateStart=function(){this.pageRender.$handler.get(0).classList.add("fv__cursor-rotation")},r.getContextMenuConfig=function(){return{selector:"div.fv__shape-control",items:{properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:(t,e,n)=>{this.showPropertiesDialog(n)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:()=>{const t=this.dependences.pdfViewer;t.getAllActiveElements().forEach((t=>{t.remove&&t.remove()}));if(0===t.getAllActiveElements().length){const e=t.getCurrentActivatable();e&&t.unActiveElement(e)}}}}}},r.getContextMenuComponentName=function(){return"fv--image-graphics-object-contextmenu"},r.getPropertyOptions=function(){return{opacity:this.graphicsObject.getOpacity(),borderStyle:!1}},r.showPropertiesDialog=function(e){let n=this.dependences.pdfViewer.activePropertiesDialog;this.dependences.pdfViewer.activePropertiesDialog?(n.show(e),n.setViewerComponent(this),this.activePropertiesDialog=n):this.$propertiesControl=new t.PropertiesControl(this)},r.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close()},r.destroy=function(){this.contextmenu&&this.contextmenu.destroy(),this.dependences.pdfViewer.eventEmitter.off(G.zoomToSuccess,this.afterZoom),e.prototype.destroy.call(this)},r.setOpacity=function(t){this.graphicsObject.setOpacity(t)},r.remove=function(){e.prototype.remove.call(this),this.graphicsObject.remove(),this.dependences.pdfViewer.unActiveElement(this),this.destroy()},r.unActive=function(t){let n=this.activePropertiesDialog;n&&n.viewerComponent===this&&n.hide(),e.prototype.unActive.call(this,t)},n}(v),z=function(){function t(){this.matchRules=[]}var e=t.prototype;return e.registerMatchRule=function(t){return this.matchRules.push(t),t},e.unRegisterMatchRule=function(t){let e=this.matchRules.indexOf(t);-1!==e&&this.matchRules.splice(e,1)},e.get=function(t){let e=this.matchRules,n=this.getDefault(t);for(let r=e.length;r--;){let o=e[r];if("function"!=typeof o)continue;let i=o(t,n);if(i)return i}return n},e.getDefault=function(t){switch(t.getType()){case 1:return j;case 2:return k;case 3:return X;default:return v}},t}();const{Hammer:q}=t.Deps;function Y(e,n){const r=e.graphicsManager;let o=["","text","path","image","shading","all"][n],a=o?["fv__edit-",o,"-state-handler"].join(""):"";return a+=" fv__edit-graphics-state-handler",function(t){function s(e){return t.call(this,e)||this}i(s,t),s.getStateName=function(){return"edit-"+o};var c=s.prototype;return c.pageHandler=function(t){this.pageRender=t;let o=t.getPDFPage(),i=t.$handler,s=i[0];i.addClass(a),(this.hammer=new q(s)).on("tap",(i=>{if(-1!=i.target.className.indexOf("fv__shape-control-move-area"))return Promise.resolve();this.resetHandler();let a=W(s,i);o.then((e=>[e,e.reverseDevicePoint([a.x,a.y],t.getScale(),t.getRotation())])).then((([t,[e,r]])=>5===n?t.getGraphicsObjectAtPoint([e,r],5,0):t.getGraphicsObjectAtPoint([e,r],3,n))).then((t=>!t||t.type<1||t.type>3?Promise.reject():[r.get(t),t])).then((([n,r])=>new n(r,t,e))).then((t=>(this.currentComponent=t,t.active()))).catch((t=>{t&&console.error(t),this.currentComponent=null,this.pdfViewer.activeElement()}))}))},c.destroyPageHandler=function(){this.unregisterKeyEvent&&this.unregisterKeyEvent(),this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(a),this.resetHandler()},c.out=function(){this.destroyPageHandler()},c.resetHandler=function(){this.currentComponent&&(this.currentComponent.textCharSure&&this.currentComponent.textCharSure(),this.currentComponent.unActive())},s}(t.IStateHandler)}const W=(t,e)=>{let n=t.getBoundingClientRect(),r=e.srcEvent;const o=N(r),i=U(r);return{x:o-n.left-e.deltaX,y:i-n.top-e.deltaY}},{Hammer:K}=t.Deps;let Q=function(){function t(){}return t.pointsToRect=function(t,e,n){let r=t.x>e.x?e.x:t.x,o=t.x<e.x?e.x:t.x,i=t.y>e.y?e.y:t.y,a=t.y<e.y?e.y:t.y;if(n){let t=i;i=a,a=t,i-a<1&&(i=a+1,a-=1)}else a-i<1&&(a=i+1,i-=1);return o-r<1&&(o=r+1,r-=1),{left:r-2,top:a+1,right:o+2,bottom:i-1}},t.generatePoints=function(e,n,r){let{x:o,y:i}=e,{x:a,y:s}=n,c=a-o,u=s-i;switch(r){case"line":return t.genLinePoints(o,i,c,u);case"square":return t.genSquarePoints(o,i,c,u);case"circle":return t.genOvalPoints(o,i,c,u);case"roundRect":return t.genRoundRectPoints(o,i,c,u)}},t.genLinePoints=function(t,e,n,r){let o=[];return o.push(["m",t,e]),o.push(["l",t+n,e+r]),o},t.genOvalPoints=function(t,e,n,r){let o=[];return o.push(["m",t+n/2,e]),o=o.concat(J(t+n/2,e,n/2,r/2,1)),o=o.concat(J(t+n,e+r/2,-n/2,r/2,0)),o=o.concat(J(t+n/2,e+r,-n/2,-r/2,1)),o=o.concat(J(t,e+r/2,n/2,-r/2,0)),o.push(["h",o[0][1],o[0][2]]),o},t.genRoundRectPoints=function(t,e,n,r){let o=[],i=.2*n,a=.2*r,s=.8*n,c=.8*r;return o.push(["m",t+i,e]),o.push(["l",t+s,e]),o=o.concat(J(t+s,e,i,a,1)),o.push(["l",t+n,e+c]),o=o.concat(J(t+n,e+c,-i,a,0)),o.push(["l",t+i,e+r]),o=o.concat(J(t+i,e+r,-i,-a,1)),o.push(["l",t,e+a]),o=o.concat(J(t,e+a,i,-a,0)),o.push(["l",o[0][1],o[0][2]]),o.push(["h"]),o},t.genSquarePoints=function(t,e,n,r){let o=[];return o.push(["m",t,e]),o.push(["l",t+n,e]),o.push(["l",t+n,e+r]),o.push(["l",t,e+r]),o.push(["h",t,e]),o},t}();function J(t,e,n,r,o){let i=[],a=.5522847498308;return o?(i.push(["c",t+a*n,e]),i.push(["c",t+n,e+a*r]),i.push(["c",t+n,e+r])):(i.push(["c",t,e+a*r]),i.push(["c",t+a*n,e+r]),i.push(["c",t+n,e+r])),i}let Z=t.Deps.jQuery;const{Hammer:tt}=t.Deps,et=t.IStateHandler;let nt=function(){this.addon=null,this.pathType=0,this.canAdd=!1},rt=function(t){function e(e){var n;return(n=t.call(this,e)||this).destroyHooks=[],n}i(e,t);var n=e.prototype;return n.addDestroyHook=function(...t){var e;(e=this.destroyHooks).push.apply(e,t)},n.addEventTo=function(t,e,n){return t.on(e,n),()=>{t.off(e,n)}},e.setAddon=function(t,e=(t?t.pdfViewer:null)){if(e){e.getIoC().getInstanceByClass(nt).addon=t}},e.getStateName=function(){return"add-path-object"},e.setPathType=function(t,e=0){t.getIoC().getInstanceByClass(nt).pathType=e},n.pageHandler=function(t){this.pageRender=t;const e=t.pdfViewer.getIoC().getInstanceByClass(nt);let n=t.$handler;n.addClass("fv__create-callout-state-handler "+this.cursorStyle),this.shapeDom=(t=>{let e=t.find(".fv__add-path-preview");return 0==e.length&&(e=Z('<canvas class="fv__add-path-preview" style="position: absolute;display:none"></canvas>'),t.append(e)),e})(n);let r,o,i=n[0],a=this.hammer=new tt.Manager(i,{recognizers:[[tt.Pan,{direction:tt.DIRECTION_ALL}]]});const s=t=>{e.canAdd=-1!=t.target.className.indexOf("fv__pdf-page-handler-container")};this.addDestroyHook(this.addEventTo(n,"mousedown",s),this.addEventTo(n,"touchstart",s),(()=>{a.destroy()})),a.on("panstart",(t=>{e.canAdd&&(r=ot(i,t))})).on("panend",(n=>{if(!r)return;o={x:r.x+n.deltaX,y:r.y+n.deltaY};let i=this.pageRender.page.reverseDevicePoint([r.x,r.y],this.pageRender.getScale(),this.pageRender.getRotation()),a=this.pageRender.page.reverseDevicePoint([o.x,o.y],this.pageRender.getScale(),this.pageRender.getRotation()),s={x:i[0],y:i[1]},c={x:a[0],y:a[1]},u=Q.generatePoints(s,c,e.pathType),h=Q.pointsToRect(s,c);this.pageRender.page.addGraphicsObject({type:2,points:u,rect:h}).then((t=>(r=null,this.shapeDom.hide(),t))).then((t=>t?[e.addon.graphicsManager.get(t),t]:Promise.reject(new Error("Graphics object was not created!")))).then((([n,r])=>new n(r,t,e.addon))).then((t=>{this.currentComponet=t,this.pdfViewer.activeElement(t)})).catch((t=>{throw this.currentComponet=null,this.pdfViewer.activeElement(),t}))})).on("panmove",(t=>{if(r){o={x:r.x+t.deltaX,y:r.y+t.deltaY};let n=Q.pointsToRect(r,o,!0);((t,e,n)=>{let r=n[0],o=r.getContext("2d");o.clearRect(0,0,n.width(),n.height()),r.width=e.right-e.left+4,r.height=e.bottom-e.top+4,o.clearRect(0,0,n.width(),n.height()),o.beginPath(),o.lineWidth=2,o.strokeStyle="#5aa",o.transform(1,0,0,1,2-e.left,2-e.top);for(var i=[],a=0;a<t.length;a++)switch(t[a][0]){case"m":o.moveTo(t[a][1],t[a][2]);break;case"l":o.lineTo(t[a][1],t[a][2]);break;case"c":i.push(t[a][1],t[a][2]),6===i.length&&(o.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]),i=[]);break;case"h":4===i.length?(o.bezierCurveTo(i[0],i[1],i[2],i[3],t[a][1],t[a][2]),i=[]):o.lineTo(t[a][1],t[a][2]),o.closePath()}o.stroke(),n.css({left:e.left,top:e.top}).show()})(Q.generatePoints(r,o,e.pathType),n,this.shapeDom)}}))},n.destroyPageHandler=function(){this.destroyHooks.forEach((t=>t())),this.resetHandler()},n.out=function(){this.destroyPageHandler()},n.resetHandler=function(){this.currentComponet&&this.currentComponet.destroy()},e}(et);const ot=(t,e)=>{let n=t.getBoundingClientRect(),r=e.srcEvent;const o=N(r),i=U(r);return{x:o-n.left-e.deltaX,y:i-n.top-e.deltaY}},it=t.Deps.jQuery,at=t.IStateHandler,st=t.Events;let ct=function(){this.addon=null},ut=function(t){function e(e){return t.call(this,e)||this}i(e,t),e.setAddon=function(t,e=(t?t.pdfViewer:null)){if(e){e.getIoC().getInstanceByClass(ct).addon=t}},e.getStateName=function(){return"add-image-object"};var n=e.prototype;return n.pageHandler=function(t){let e=this;this.pageRender=t;const n=this.pdfViewer.getIoC().getInstanceByClass(ct);let r,o,i=this.$handler=t.$handler,a=i[0],s=this.hammer=new Hammer.Manager(a,{recognizers:[[Hammer.Tap],[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});function c(){return o||(o=it('<img style="position: absolute;top:200%;left:0;border:2px solid transparent;" src="'+r+'"/>'),i.append(o),o)}this.pdfViewer.eventEmitter.on(st.addEditImage,this.loadFile=t=>{r=t}),i.off("mouseenter").on("mouseenter",(t=>{r&&c().show()})),i.off("mousemove mousewheel").on("mousemove mousewheel",(t=>{if(!r)return;let e=a.getBoundingClientRect(),n=t.clientX-e.left,o=t.clientY-e.top;c().css({top:o,left:n})})),i.off("mouseleave").on("mouseleave",(t=>{r&&c().hide()}));let u=!0;s.on("tap",(o=>{if(!u)return;if(u=!1,!r)return;let i={},s=ht(a,o),h=c(),f=h.width(),l=h.height();t.getPDFPage().then((o=>{const a=t.getRotation();let c=3*f/o.getPxWidth(),p=3*l/o.getPxHeight();if(c>1||p>1){let t=Math.max(c,p);t>1&&(t=1/t),f*=t,l*=t}if(90===a||270===a){const t=f;f=l,l=t}var d;i.top=s.y,i.left=s.x,i.right=i.left+f,i.bottom=i.top+l,(d=r,new Promise((function(t,e){let n=new XMLHttpRequest;n.open("GET",d),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300||304===n.status?t(n.response):e())},n.onerror=function(){e()},n.send()}))).then((r=>{let s=o.reverseDeviceRect(i,t.getScale(),a);o.addImage(r,s,a).then((e=>{if(!e)return this.pdfViewer.getStateHandlerManager().switchTo("edit-all"),h.remove(),this.currentComponet=null,void this.pdfViewer.activeElement();let r=new(n.addon.graphicsManager.get(e))(e,t,n.addon);this.pdfViewer.getStateHandlerManager().switchTo("edit-all"),this.currentComponet=r,h.remove(),u=!0,this.pdfViewer.activeElement(r)})).catch((t=>{t&&console.error(t),e.currentComponet=null,e.pdfViewer.activeElement()}))}))}))}))},n.destroyPageHandler=function(){this.$handler.off("mousemove mousewheel mouseleave"),this.$handler.empty(),this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.pdfViewer.eventEmitter.off(st.addEditImage,this.loadFile)},n.out=function(){this.destroyPageHandler()},e}(at);const ht=(t,e)=>{let n=t.getBoundingClientRect(),r=e.srcEvent;const o=N(r),i=U(r);return{x:o-n.left-e.deltaX,y:i-n.top-e.deltaY}};let ft="fv__add-text-object-state-handler";const{Hammer:lt}=t.Deps;var pt;!function(t){t[t.ALL=0]="ALL",t[t.TEXT=1]="TEXT",t[t.PATH=2]="PATH",t[t.IMAGE=3]="IMAGE",t[t.SHADING=4]="SHADING",t[t.FORM_X_OBJECT=5]="FORM_X_OBJECT"}(pt||(pt={}));const{Selections:dt,SelectionEventType:vt,createAreaLimitationReducer:gt,BorderStyle:mt}=t.shared.areaSelections,{Hammer:Et}=t.Deps,{ActivationGroup:yt}=t.shared.activation,Tt=t.shared.keyboardStatus,_t=t.shared.QueuedAsyncTaskExecutor,At={};function Rt(n){const r=n.graphicsManager,o="fv__edit-all-state-handler fv__edit-graphics-state-handler";return function(a){function s(t){var e;return(e=a.call(this,t)||this).destroyHooks=[],e}i(s,a),s.getStateName=function(){return"edit-all"};var c=s.prototype;return c.pageHandler=function(i){let a=new yt;this.pageRender=i;let s=i.getPDFPage(),c=i.$handler,u=c[0];c.addClass(o);const h=new _t;this.selections=new dt({anchorElement:u,borderStyle:mt.DOTTED}),this.selections.reducer(gt(u)),this.selections.reducer((function(t){if(void 0===t)return;const n=u.getBoundingClientRect();return e({left:t.clientLeft-n.left,top:t.clientTop-n.top},t)})),this.selections.eventInterceptor((t=>t.target===u));let f=!1;this.selections.eventInterceptor((t=>f));const l=t=>{f=t.target===u};u.addEventListener("mousedown",l),u.addEventListener("touchstart",l),this.destroyHooks.push((()=>{u.removeEventListener("mousedown",l),u.removeEventListener("touchstart",l)})),this.selections.on(vt.END,(e=>{h.exec((()=>s.then((o=>{let s=this.pageRender.scale,c=this.pageRender.getRotation();const u=o.reverseDeviceRect({left:e.left,right:e.left+e.width,top:e.top,bottom:e.top+e.height},s,c);let h=Math.min(2/this.pageRender.scale,2);return o.getGraphicsObjectsInRect(u,h,pt.ALL).then((e=>{!e||e.length<1||(d()||a.clear(),this.pdfViewer.activeElement(a),e.forEach((t=>{let e=t.getRect();if(e.right-e.left<1||e.top-e.bottom<1)return;const o=new(r.get(t))(t,i,n);a.add(o)})),this.pdfViewer.eventEmitter.emit(t.Events.activeElementChanged))}))}))))}));let p=this.hammer=new Et(u);p.on("tap",(e=>{this.resetHandler();let o=function(t,e){let n=t.getBoundingClientRect(),r=e.srcEvent;const o=N(r),i=U(r);return{x:o-n.left-e.deltaX,y:i-n.top-e.deltaY}}(u,e);s.then((t=>[t,t.reverseDevicePoint([o.x,o.y],i.getScale(),i.getRotation())])).then((([t,[e,n]])=>t.getGraphicsObjectAtPoint([e,n],5,0))).then((t=>t?t.type<1||t.type>3?Promise.reject():[r.get(t),t]:Promise.reject(At))).then((([t,e])=>new t(e,i,n))).then((n=>{if(this.currentComponent=n,d()){const t=e.target.closest(".fwr__graphics-object-handler");if(t){const e=a.activations.find((e=>!!e.$handler&&e.$handler.get(0)===t));if(e)return a.remove(e),void this.pdfViewer.activeElement(a)}}else a.clear();a.add(n),this.pdfViewer.activeElement(a),this.pdfViewer.eventEmitter.emit(t.Events.tapGraphicsObject,n.getGraphicsObject())})).catch((t=>{t===At&&d()||(t!==At&&t&&console.error(t),this.currentComponent=null,this.pdfViewer.activeElement())}))})),this.destroyHooks.push((()=>p.destroy()),(()=>this.selections.destroy()),(()=>{a.clear(),this.pdfViewer.unActiveElement(a)}));const d=()=>!!this.pdfViewer.isShortcutKeyEnabled()&&(t.DeviceInfo.isMac?Tt.isWin:Tt.isCtrl)},c.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.destroyHooks.forEach((t=>t())),this.pageRender.$handler.removeClass(o),this.resetHandler(),this.pageRender=null,this.destroyHooks=null},c.out=function(){this.destroyPageHandler()},c.resetHandler=function(){this.currentComponent&&this.currentComponent.textCharSure&&this.currentComponent.textCharSure()},s}(t.IStateHandler)}let xt=function(){function n(t){this.pdfViewer=t,this.graphicsManager=new z,this.pdfViewer.addon=this}var r=n.prototype;return r.init=function(){let n=function(e){const n=e.graphicsManager;let r="text",o=r?["fv__edit-",r,"-state-handler"].join(""):"";return o+=" fv__edit-graphics-state-handler",function(t){function a(e){return t.call(this,e)||this}i(a,t),a.getStateName=function(){return"edit-"+r};var s=a.prototype;return s.pageHandler=function(t){this.pageRender=t;let r=t.$handler,i=r[0];r.addClass(o);let a=this.hammer=new K.Manager(i,{recognizers:[[K.Pan,{direction:K.DIRECTION_ALL}]]});a.add(new K.Tap({event:"doubletap",taps:2})),a.add(new K.Tap({event:"singletap"})),a.get("doubletap").recognizeWith("singletap"),a.get("singletap").requireFailure("doubletap"),a.on("singletap",(r=>{this.resetHandler();let o=r.changedPointers[0];t.getPDFPage().then((e=>[e,e.reverseDevicePoint([o.offsetX,o.offsetY],t.getScale(),t.getRotation())])).then((([t,[e,n]])=>t.getGraphicsObjectAtPoint([e,n],3,1))).then((t=>t?[n.get(t),t]:Promise.reject(new Error(`Text object not found at this position: [${o.offsetX}, ${o.offsetY}]`)))).then((([n,r])=>new n(r,t,e))).then((t=>(this.currentComponet=t,t.active()))).catch((t=>{t&&console.error(t),this.currentComponet=null,this.pdfViewer.activeElement()}))})),a.on("doubletap",(r=>{this.resetHandler();let o=r.changedPointers[0];t.getPDFPage().then((e=>[e,e.reverseDevicePoint([o.offsetX,o.offsetY],t.getScale(),t.getRotation())])).then((([t,[e,n]])=>t.getGraphicsObjectAtPoint([e,n],3,1))).then((t=>t?[n.get(t),t]:Promise.reject(new Error(`Text object not found at this position: [${o.offsetX}, ${o.offsetY}]`)))).then((([n,r])=>new n(r,t,e))).then((t=>(this.currentComponet=t,t.activeCharEdit()))).catch((t=>{t&&console.error(t),this.currentComponet=null,this.pdfViewer.activeElement()}))}))},s.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(o),this.resetHandler()},s.out=function(){this.destroyPageHandler()},s.resetHandler=function(){this.currentComponet&&(this.currentComponet.textCharSure&&this.currentComponet.textCharSure(),this.currentComponet.unActive())},a}(t.IStateHandler)}(this),r=Y(this,2),o=Y(this,3),a=Rt(this),s=function(n){const r=n.graphicsManager;let o=function(){function e(){this.currentEditingGraphicComponent=null}e.inject=function(){return{pdfViewer:t.PDFViewer}};var n=e.prototype;return n.allInjected=function(){this.pdfViewer.eventEmitter.on(t.ViewerEvents.willCloseDocument,(()=>{this.currentEditingGraphicComponent&&this.currentEditingGraphicComponent.isActive&&this.currentEditingGraphicComponent.unActive(),this.currentEditingGraphicComponent=null}))},n.applyCurrent=function(){const t=this.currentEditingGraphicComponent;t&&(t.textCharSure&&t.textCharSure(),t.unActive(),this.currentEditingGraphicComponent=null)},e}();return function(a){function s(t){var e;return(e=a.call(this,t)||this).service=t.getIoC().getInstanceByClass(o),e}i(s,a),s.getStateName=function(){return"add-text-object"};var c=s.prototype;return c.pageHandler=function(o){this.pageRender=o;let i=o.getPDFPage(),a=o.$handler,s=a[0];a.addClass(ft),(this.hammer=new lt(s)).on("tap",(a=>{this.resetHandler();let s=a.changedPointers[0];i.then((t=>[t,t.reverseDevicePoint([s.offsetX,s.offsetY],o.getScale(),o.getRotation())])).then((([n,[r,i]])=>{let a=n.getRotationAngle(),s=new t.Matrix;s.rotate((a+o.getRotation())/180*Math.PI),s.translate(r,i);let c=this.pdfViewer.store.getCurrentValue("add-text-object-param-transfer");return n.addGraphicsObject(e({},c,{originPosition:{x:r,y:i}},{type:1,matrix:s.toArray()}))})).then((t=>t?[r.get(t),t]:Promise.reject(new Error("Graphics object was not created!")))).then((([t,e])=>new t(e,o,n))).then((t=>(this.service.currentEditingGraphicComponent=t,this.currentGraphicComponent=t,t.activeCharEdit()))).catch((t=>{t&&console.error(t),this.service.currentEditingGraphicComponent=null,this.currentGraphicComponent=null,this.pdfViewer.activeElement()}))}))},c.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(ft),this.pdfViewer.getEventEmitter().off(g.addTextObjectParamTransfer,this.addTextObjectParamTransferBind),this.resetHandler()},c.out=function(){this.destroyPageHandler()},c.resetHandler=function(){this.service.currentEditingGraphicComponent&&this.service.applyCurrent()},s}(t.IStateHandler)}(this),c=this.pdfViewer.getStateHandlerManager();[n,r,o,a,rt,s,ut].forEach((t=>{t.setAddon&&t.setAddon(this),c.register(t)})),this.pdfViewer.addDestroyHook((()=>{rt.setAddon(null,this.pdfViewer),ut.setAddon(null,this.pdfViewer)}))},r.getGraphicsManager=function(){return this.graphicsManager},n}()}(),o}()}));