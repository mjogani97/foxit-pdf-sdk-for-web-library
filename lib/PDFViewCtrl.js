!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("dayjs"),require("dayjs-plugin-utc"),require("dialog-polyfill"),require("eventemitter3"),require("file-saver"),require("hammerjs"),require("i18next"),require("i18next-chained-backend"),require("i18next-localstorage-backend"),require("i18next-xhr-backend"),require("jquery"),require("jquery-contextmenu")):"function"==typeof define&&define.amd?define(["dayjs","dayjs-plugin-utc","dialog-polyfill","eventemitter3","file-saver","hammerjs","i18next","i18next-chained-backend","i18next-localstorage-backend","i18next-xhr-backend","jquery","jquery-contextmenu"],e):"object"==typeof exports?exports.PDFViewCtrl=e(require("dayjs"),require("dayjs-plugin-utc"),require("dialog-polyfill"),require("eventemitter3"),require("file-saver"),require("hammerjs"),require("i18next"),require("i18next-chained-backend"),require("i18next-localstorage-backend"),require("i18next-xhr-backend"),require("jquery"),require("jquery-contextmenu")):t.PDFViewCtrl=e(t.dayjs,t.dayjsPluginUTC,t.dialogPolyfill,t.EventEmitter,t.saveAs,t.Hammer,t.i18next,t.i18nextChainedBackend,t.i18nextLocalStorageBackend,t.i18nextXHRBackend,t.jQuery,t["jquery-contextmenu"])}(self,(function(t,e,n,i,r,o,s,a,c,l,h,u){return function(){var d,f,p={9059:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$escape;return e+='<dialog class="fv__ui-layer fv__action-dialog" >\n   <div class="fv__action-dialog-header">\n  <div class="fv__action-dialog-title">',e+=n(i.i18n("viewer_:dialog.actionDialog.title")),e+='</div>\n  <div class="fv__action-dialog-close"><i class="fv__action-dialog-close-icon">x</i></div>\n   </div>\n   <div class="fv__action-dialog-body">\n  <div class="fv__action-dialog-select">\n <span class="fv__action-dialog-select-title">',e+=n(i.i18n("viewer_:dialog.actionDialog.selectKey")),e+='</span>\n <select id="select-action">\n<option value="TypeGoto">',e+=n(i.i18n("viewer_:dialog.actionDialog.selectAction.goto")),e+='</option>\n<option value="TypeURI">',e+=n(i.i18n("viewer_:dialog.actionDialog.selectAction.webLink")),e+='</option>\n </select>\n  </div>\n  <div class="fv__action-dialog-url fv__action-dialog-box" data-type="TypeURI">\n <div class="fv__action-dialog-url-title fv__action-box-title">',e+=n(i.i18n("viewer_:dialog.actionDialog.URLAction.title")),e+='</div>\n <div class="fv__action-dialog-url-input">\n<input class="fv__action-dialog-input" id="url-input"/>\n </div>\n  </div>\n  <div class="fv__action-dialog-goto fv__action-dialog-box" style="display:block;"  data-type="TypeGoto">\n <div class="fv__action-dialog-goto-title fv__action-box-title">',e+=n(i.i18n("viewer_:dialog.actionDialog.GotoAction.title")),e+='</div>\n <div class="fv__action-dialog-goto-container">\n<div class="fv__action-dialog-goto-center">\n   <div class="fv__action-dialog-goto-left">\n  <div class="fv__action-dialog-goto-target">',e+=n(i.i18n("viewer_:dialog.actionDialog.GotoAction.target")),e+=':</div>\n   </div>\n   <div class="fv__action-dialog-goto-right">\n  <div class="fv__action-dialog-goto-input">\n <input type="number" min="1" class="fv__action-dialog-input" id="goto-input"/>\n  </div>\n  <div class="fv__action-dialog-goto-position">\n <span class="fv__action-dialog-goto-position-left">',e+=n(i.i18n("viewer_:dialog.actionDialog.GotoAction.left")),e+=':</span><span class="fv__action-dialog-goto-left-value">0</span>\n <span class="fv__action-dialog-goto-position-top">',e+=n(i.i18n("viewer_:dialog.actionDialog.GotoAction.top")),e+=':</span><span class="fv__action-dialog-goto-top-value">0</span>\n  </div>\n   </div>\n</div>\n </div>\n  </div>\n   </div>\n   <div class="fv__action-dialog-footer">\n  <div class="fv__action-dialog-btns">\n  <button type="button" class="fv__action-btn fv__action-btn-ok">',e+=n(i.i18n("viewer_:dialog.actionDialog.OK")),e+='</button>\n  <button type="button" class="fv__action-btn fv__action-btn-cancel ">',e+=n(i.i18n("viewer_:dialog.actionDialog.Cancel")),e+="</button>\n  </div>\n   </div>\n</dialog>"}},875:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$escape;return e+='<dialog class="fv__ui-layer fv__place-redaction-dialog" >\n   <div class="fv__place-redaction-dialog-header">\n  <div class="fv__place-redaction-dialog-title">',e+=n(i.i18n("viewer_:dialog.placeRedactionDialog.title")),e+='</div>\n  <div class="fv__place-redaction-dialog-close"><i class="fv__place-redaction-dialog-close-icon">x</i></div>\n   </div>\n   <div class="fv__place-redaction-dialog-body">\n<div class="fv__redaction-container">\n<label>\n<input name="redaction-page-type" class="redaction-page-radio" type="radio" checked value="1" /><span>',e+=n(i.i18n("viewer_:dialog.placeRedactionDialog.allPage")),e+='</span>\n</label>\n</div>\n<div class="fv__redaction-container">\n<label>\n<input name="redaction-page-type" class="redaction-page-radio" type="radio" value="2" /><span>',e+=n(i.i18n("viewer_:dialog.placeRedactionDialog.specificPage")),e+='</span>\n<div class="fv__redaction-range">',e+=n(i.i18n("viewer_:dialog.placeRedactionDialog.pageRange")),e+=': <input type="text" class="fv__redaction-page-range" disabled placeholder="',e+=n(t),e+='"/></div>\n</label>\n</div> \n   </div>\n   <div class="fv__place-redaction-dialog-footer">\n<div class="fv__redaction-container footer" style="text-align:right">\n<button type="button" class="fv__redaction-btn fv__ui-dialog-ok-button">',e+=n(i.i18n("viewer_:dialog.placeRedactionDialog.OK")),e+='</button>\n<button type="button" class="fv__redaction-cancel fv__ui-dialog-cancel-button">',e+=n(i.i18n("viewer_:dialog.placeRedactionDialog.Cancel")),e+="</button>\n</div>\n   </div>\n</dialog>"}},5100:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";var e="",n=(t=t||{}).disabledAttr,r=t.disabled,o=t.i18nRoot,s=t.hlm,a=t.endingStyle,c=t.borderWidth,l=i.$escape,h=t.minBorderWidth,u=t.borderStyle,d=t.cloudy,f=t.highlightingMode,p=t.rotation,g=t.fillColor,m=t.checked,v=t.strFillColor,y=t.color,w=t.lineStartStyle,b=t.startStyle,A=t.lineEndStyle,P=t.endStyle,S=t.hasCap,C=(t.hasCapChecked,t.opacity);e+='<div class="fv__annot-properties-dialog">\n<div>\n';n=r?"disabled=disabled":"",s=(o="viewer_:dialog.")+"highlightingMode.",a=o+"endingStyle.";if(e+="\n",void 0!==c&&(e+='\n<div class="fv__property-item">\n<span class="fv__property-item-name-container">',e+=l(i.i18n(o+"borderWidth")),e+='</span>\n<div class="fv__property-item-field-container">\n<input id="thickness-input-tx" type="number"\n   min="',e+=l(null!=h?h:1),e+='" max="12" step="1" value="',e+=l(c),e+='"\n   ',e+=l(n),e+='>\n<input id="thickness-input" type="range"\n   value="',e+=l(c),e+='" min="1" max="12" step="1"\n   ',e+=l(n),e+=">\n</div>\n</div>\n"),!1!==u&&(e+='\n<div class="fv__property-item">\n<span class="fv__property-item-name-container">',e+=l(i.i18n(o+"borderStyle")),e+='</span>\n<div class="fv__property-item-field-container">\n<select id="borderStyle-select" ',e+=l(n),e+='>\n<option value="0">———————————</option>\n<option value="1">. . . . . . . . . . . . . . . . . . . . .</option>\n<option value="2">-  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -</option>\n<option value="3">—  —  —  —  —  —  —  —  —</option>\n<option value="4">—  -  —  -  —  -  —  -  —  -  —  -</option>\n<option value="5">——  -  ——  -  ——  -  ——  -</option>\n<option value="6">-   ———   -   ———   -   ———</option>\n',!0===d&&(e+='\n<option value="7">﹋﹋﹋﹋﹋﹋﹋﹋﹋﹋﹋</option>\n<option value="8">~~~~~~~~~~~~~~~~~~~</option>\n'),e+="\n</select>\n</div>\n</div>\n"),void 0!==f&&(e+='\n<div class="fv__property-item">\n<span class="fv__property-item-name-container">',e+=l(i.i18n(s+"title")),e+='</span>\n<div class="fv__property-item-field-container">\n<select id="highlighting-select" ',e+=l(n),e+='>\n<option value="0">',e+=l(i.i18n(s+"none")),e+='</option>\n<option value="1">',e+=l(i.i18n(s+"invert")),e+='</option>\n<option value="2">',e+=l(i.i18n(s+"outline")),e+='</option>\n<option value="3">',e+=l(i.i18n(s+"push")),e+='</option>\n<option value="4">',e+=l(i.i18n(s+"toggle")),e+="</option>\n</select>\n</div>\n</div>\n"),void 0!==p&&(e+='\n<div class="fv__property-item">\n<span class="fv__property-item-name-container">',e+=l(i.i18n(o+"rotate")),e+='</span>\n<div class="fv__property-item-field-container">\n<select id="rotation-select" ',e+=l(n),e+='>\n<option value="0">0</option>\n<option value="1">90</option>\n<option value="2">180</option>\n<option value="3">270</option>\n</select>\n</div>\n</div>\n'),void 0!==g){m="",r="",v=g;if(0==g)r="disabled=1",m="checked=1",v="#FFFFFF";else{for(v=(g&=16777215).toString(16);v.length<6;)v="0"+v;v="#"+v}e+='\n<div class="fv__property-item">\n<span class="fv__property-item-name-container">',e+=l(i.i18n(o+"fillColor")),e+='</span>\n\n<div class="fv__property-item-field-container">\n<input id="fillcolor-input" type="color" value="',e+=l(v),e+='" ',e+=l(r),e+=" ",e+=l(n),e+='>\n\n<label>\n<input id="fillColor-transparent-input" type="checkbox" ',e+=l(m),e+=" ",e+=l(n),e+=">\n",e+=l(i.i18n(o+"transparent")),e+="\n</label>\n</div>\n</div>\n"}(void 0!==y&&(0===y&&(y="#ffffff"),e+='\n<div class="fv__property-item">\n<label>\n<span class="fv__property-item-name-container">',e+=l(i.i18n(o+"color")),e+='</span>\n<div class="fv__property-item-field-container">\n<input id="color-input" type="color" value="',e+=l(y),e+='" ',e+=l(n),e+=">\n</div>\n</label>\n</div>\n"),w&&(e+='\n<div class="fv__property-item">\n<span class="fv__property-item-name-container">',e+=l(i.i18n(o+"startStyle")),e+='</span>\n<div class="fv__property-item-field-container">\n<select id="startstyle-select" value="',e+=l(b),e+='" ',e+=l(n),e+='>\n<option value="0">',e+=l(i.i18n(a+"none")),e+='</option>\n<option value="1">',e+=l(i.i18n(a+"square")),e+='</option>\n<option value="2">',e+=l(i.i18n(a+"circle")),e+='</option>\n<option value="3">',e+=l(i.i18n(a+"diamond")),e+='</option>\n<option value="4">',e+=l(i.i18n(a+"openArrow")),e+='</option>\n<option value="5">',e+=l(i.i18n(a+"closedArrow")),e+='</option>\n<option value="6">',e+=l(i.i18n(a+"butt")),e+='</option>\n<option value="7">',e+=l(i.i18n(a+"reverseOpenArrow")),e+='</option>\n<option value="8">',e+=l(i.i18n(a+"reverseClosedArrow")),e+='</option>\n<option value="9">',e+=l(i.i18n(a+"slash")),e+="</option>\n</select>\n</div>\n</div>\n"),A&&(e+='\n<div class="fv__property-item">\n<span class="fv__property-item-name-container">',e+=l(i.i18n(o+"endStyle")),e+='</span>\n<div class="fv__property-item-field-container">\n<select id="endstyle-select" value="',e+=l(P),e+='" ',e+=l(n),e+='>\n<option value="0" >',e+=l(i.i18n(a+"none")),e+='</option>\n<option value="1" >',e+=l(i.i18n(a+"square")),e+='</option>\n<option value="2" >',e+=l(i.i18n(a+"circle")),e+='</option>\n<option value="3" >',e+=l(i.i18n(a+"diamond")),e+='</option>\n<option value="4" >',e+=l(i.i18n(a+"openArrow")),e+='</option>\n<option value="5" >',e+=l(i.i18n(a+"closedArrow")),e+='</option>\n<option value="6" >',e+=l(i.i18n(a+"butt")),e+='</option>\n<option value="7" >',e+=l(i.i18n(a+"reverseOpenArrow")),e+='</option>\n<option value="8" >',e+=l(i.i18n(a+"reverseClosedArrow")),e+='</option>\n<option value="9" >',e+=l(i.i18n(a+"slash")),e+="</option>\n</select>\n</div>\n</div>\n"),void 0!==S)&&(e+='\n<div class="fv__property-item">\n<label class="fv__property-item-only-field-container">\n<input id="hasCap-input" type="checkbox" ',e+=l(S?"checked=true":""),e+=" ",e+=l(n),e+=">\n",e+=l(i.i18n(o+"hasCap")),e+="\n</label>\n</div>\n");return!1!==C&&(e+='\n<div class="fv__property-item">\n<label class="fv__property-item-name-container">',e+=l(i.i18n(o+"opacity")),e+='</label>\n<div class="fv__property-item-field-container">\n<input id="opacity-input" type="range" value="',e+=l(C),e+='" min="0" max="1" step="0.01" ',e+=l(n),e+=">\n</div>\n</div>\n"),e+='\n</div>\n<div class="fv__btn-close-container">\n<button type="button" class="fv__btn fv__btn-close">',e+=l(i.i18n(o+"close")),e+="</button>\n</div>\n</div>"}},4637:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$escape;return e+='<dialog class="fv__dialog fv__annot-reply-dialog trust-dia-dibox">\n  <p><span>',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.diaTitle")),e+='</span><i class="fv__icon-layer-close"></i></p>\n  <div class="fv__trust-tip-container">\n<p><i class="fv__icon-dialog-level-warning"></i><span>',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.disableTip")),e+='</span></p>\n  </div>\n  <div class="fv__textarea-container trust-dia-inbox">\n  <label>\n  <input type="checkbox" name="trustToClose">\n  <span>',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.rememberTime")),e+='</span>\n  </label>\n  </div>\n  <div class="fv__btn_reply_container btn-bot-box">\n  <button type="button" class="fv__btn fv__btn-reply trust-ok-btn">',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.play")),e+='</button>\n  <button type="button" class="fv__btn fv__btn-close trust-no-btn">',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.reject")),e+="</button>\n  </div>\n</dialog>"}},1160:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";var e="",n=(t=t||{}).i,r=(t.pointIndex,i.$escape);for(n=0;n<t.anchorCount;n++){e+="\n";e+='\n<div class="fv__pdf-annot-line-point" data-index="',e+=r(n),e+='"><div class="fv__pdf-annot-line-point-item"></div></div>\n'}return e+="\n\n",t.isLineDimension&&(e+='\n<div class="fv__pdf-annot-line-caption" data-index="caption">',e+=r(t.captionText),e+="</div>\n"),e}},1583:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$escape,r=t.fillColor;return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M7.2,14.9H3.7c-.4,0-.7.3-.8.8V28.5c0,.4.3.7.8.8H7.2c.4,0,.7-.3.8-.8V15.7C7.9,15.2,7.6,14.9,7.2,14.9Z"/>\n<path fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M10.8,7.9h3.5a.79.79,0,0,1,.8.8V28.5a.79.79,0,0,1-.8.8H10.8a.79.79,0,0,1-.8-.8V8.7C10.1,8.3,10.4,7.9,10.8,7.9Z"/>\n<path fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M25.1,8h3.5a.79.79,0,0,1,.8.8V28.6a.79.79,0,0,1-.8.8H25.1a.79.79,0,0,1-.8-.8V8.8A.86.86,0,0,1,25.1,8Z"/>\n<path fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M17.9,19.9h3.5a.79.79,0,0,1,.8.8v7.8a.79.79,0,0,1-.8.8H17.9a.79.79,0,0,1-.8-.8V20.7C17.2,20.2,17.5,19.9,17.9,19.9Z"/>\n</svg>'}},6283:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 56">\n  <path stroke="#3f3f3f" transform="rotate(-44 14.147195816040043,29.311956405639645) " d="m22.48496,6.139239a10.573254,11.136632 0 0 1 3.338127,0.652288a9.244045,9.736598 0 0 1 5.769976,9.259314a9.4253,9.927512 0 0 1 -2.733941,7.127445l-18.503194,19.727748a6.585627,6.936531 0 0 1 -1.827662,1.272758a4.380348,4.613748 0 0 1 -2.129755,0.572741a5.603824,5.902415 0 0 1 -2.114651,-0.572741a5.55851,5.854687 0 0 1 -1.510465,-1.272758a6.177801,6.506975 0 0 1 -1.208372,-1.925046a4.531394,4.772842 0 0 1 -0.302093,-2.227326a8.307556,8.750211 0 0 1 1.510465,-4.168282l16.977624,-18.534538a2.326116,2.450059 0 0 1 1.223476,-0.636379a2.311011,2.43415 0 0 1 1.510465,0.636379a1.706825,1.797771 0 0 1 0.619291,1.288667a2.054232,2.163689 0 0 1 -0.619291,1.590947l-17.294822,18.216348a2.311011,2.43415 0 0 0 -0.604186,1.590947a1.9485,2.052322 0 0 0 1.782348,1.940956a1.510465,1.590947 0 0 0 1.223476,-0.636379l18.533403,-19.823205a5.060057,5.329674 0 0 0 1.510465,-4.168282a6.404371,6.745617 0 0 0 -1.510465,-4.152373a4.531394,4.772842 0 0 0 -3.64022,-1.909137a4.863697,5.122851 0 0 0 -3.957418,1.909137l-18.503194,19.807296a11.14723,11.741192 0 0 0 -2.114651,3.181895a9.334672,9.832055 0 0 0 0,7.381996a11.14723,11.741192 0 0 0 2.114651,3.181895a8.790905,9.259314 0 0 0 6.343952,2.879615a8.594545,9.052491 0 0 0 6.404371,-2.879615l18.820391,-19.489106a1.510465,1.590947 0 0 1 1.208372,-0.636379a1.842767,1.940956 0 0 1 1.208372,0.636379a1.616197,1.702314 0 0 1 0.619291,1.288667a1.510465,1.590947 0 0 1 -0.619291,1.272758l-18.503194,19.807296a14.878078,15.670832 0 0 1 -4.244406,3.181895a12.400916,13.061679 0 0 1 -4.863697,0.970478a12.325393,12.982131 0 0 1 -4.848592,-0.970478a9.87844,10.404796 0 0 1 -4.244406,-3.181895a12.400916,13.061679 0 0 1 -2.733941,-4.470562a13.760334,14.493531 0 0 1 -0.906279,-5.106941a15.512474,16.33903 0 0 1 0.906279,-5.44104a12.627486,13.300321 0 0 1 2.733941,-4.470562l18.503194,-19.807296a9.379986,9.879784 0 0 1 6.676254,-2.895524z" stroke-miterlimit="10" fill="',e+=(0,i.$escape)(t.fillColor),e+='"/>\n</svg>\n'}},6852:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M26.9,20.3h0l-.1-.1-.1-.1-4.9-5.2h0V4.1H23a.94.94,0,0,0,1-1V2.5a.94.94,0,0,0-1-1H8.4a.94.94,0,0,0-1,1v.6a.94.94,0,0,0,1,1H9.7V14.9h0l-5,5.2-.1.1-.1.1h0c-.1.1-.1.2-.1.4a.79.79,0,0,0,.8.8H15v8.6a1,1,0,0,0,.8.9h0a1.22,1.22,0,0,0,.8-.9V21.5h9.7a.77.77,0,0,0,.8-.7v-.1A.76.76,0,0,1,26.9,20.3Z"/>\n</svg>'}},8807:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M30.2,20.4,13.6,2.4H3L2.4,3v9.4L19.5,31l1.1-.2L30,21.5ZM6.2,7.5A1.75,1.75,0,0,1,4.5,5.8,1.75,1.75,0,0,1,6.2,4.1,1.75,1.75,0,0,1,7.9,5.8,1.69,1.69,0,0,1,6.2,7.5Z"/>\n</svg>'}},3110:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M2.56,16.77a1,1,0,0,1,0-1.41L6.5,11.42a1,1,0,0,1,1.41,0l5.75,5.75a1,1,0,0,0,1.41,0h0l9.43-9.43a1,1,0,0,1,1.41,0l3.94,3.94a1,1,0,0,1,0,1.41L15.08,27.88a1,1,0,0,1-1.41,0Z"/>\n</svg>'}},7308:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M16,2A14.13,14.13,0,0,0,1.77,16,14.12,14.12,0,0,0,16,29.94,14.13,14.13,0,0,0,30.32,16h0A14.13,14.13,0,0,0,16.06,2Zm0,26a12,12,0,1,1,.09,0Z"/>\n</svg>'}},3856:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M27.6,2H4.75a3,3,0,0,0-3,3V21.63a3,3,0,0,0,3,3H6.2l1.22,6.24V31l6.37-6.37H27.6a3,3,0,0,0,3-3V5A3,3,0,0,0,27.6,2Z"/>\n<path fill="#3f3f3f" isolation="isolate"\n  d="M27.24,6.92a.52.52,0,0,1-.52.52H6.22a.52.52,0,0,1-.52-.52h0a.52.52,0,0,1,.52-.52h20.5a.52.52,0,0,1,.52.52Z"/>\n<path fill="#3f3f3f" isolation="isolate"\n  d="M27.35,12.07a.51.51,0,0,1-.5.52H6.33a.51.51,0,0,1-.51-.51h0a.51.51,0,0,1,.51-.51H26.84a.51.51,0,0,1,.51.51Z"/>\n<path fill="#3f3f3f" isolation="isolate"\n  d="M22,17.19c0,.29-.18.52-.39.52H6.2c-.22,0-.39-.23-.39-.52h0c0-.28.17-.52.39-.52H21.63c.21,0,.39.24.39.52Z"/>\n</svg>'}},4814:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M24,1.4a1.55,1.55,0,0,0-2.18,0L17.17,6A1.55,1.55,0,0,1,15,6L10.35,1.4a1.55,1.55,0,0,0-2.18,0L1.59,8a1.55,1.55,0,0,0,0,2.18L6.22,14.8a1.56,1.56,0,0,1,0,2.19l-4.63,4.6a1.56,1.56,0,0,0,0,2.19l6.58,6.58a1.56,1.56,0,0,0,2.19,0L15,25.73a1.56,1.56,0,0,1,2.19,0l4.62,4.63a1.55,1.55,0,0,0,2.18,0l6.58-6.58a1.56,1.56,0,0,0,0-2.19L25.93,17a1.55,1.55,0,0,1,0-2.18h0l4.62-4.62a1.55,1.55,0,0,0,0-2.18Z"/>\n</svg>'}},9797:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M30.68,16.17A14.48,14.48,0,1,1,16.19,1.7h0A14.47,14.47,0,0,1,30.68,16.17Z"/>\n<path fill="#fff" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M11.23,13.28c0-2.28.95-5.29,5-5.29,3.2,0,5,2,5,4a4.9,4.9,0,0,1-1.35,3.6c-1.59,1.58-1.8,2.38-1.8,3.84h0c0,.19-.5.35-1.12.35H15.51c-.61,0-1.11-.32-1.11-.71a7.58,7.58,0,0,1,.33-1.77,11.61,11.61,0,0,1,1.21-2.63c.32-.41,1.56-.95,1.56-2.33,0-.88-.37-1.37-1.35-1.37C15.33,11,15,12.2,15,12.2a1.51,1.51,0,0,1-1.38,1.08Zm3.17,9a1.13,1.13,0,0,1,1.11-1.12h1.43a1.12,1.12,0,0,1,1.12,1.12h0V24a1.12,1.12,0,0,1-1.12,1.12H15.51A1.13,1.13,0,0,1,14.4,24Z"/>\n</svg>'}},4739:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M30.16,24.36,17.49,6.08a2,2,0,0,0-1.64-.92,2,2,0,0,0-1.63.92L1.55,24.36a2.06,2.06,0,0,0-.41,1.19,1.56,1.56,0,0,0,1.29,1.54H29.28a1.56,1.56,0,0,0,1.29-1.54A2.06,2.06,0,0,0,30.16,24.36Z"/>\n</svg>'}},1158:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M27.65,5.25A9.26,9.26,0,0,0,12.4,15L3,24.32a4.53,4.53,0,0,0-1.15,2.8v1.67a2,2,0,0,0,2,2h1.7a4.3,4.3,0,0,0,2.74-1.1,3.53,3.53,0,0,0,1-2.29.89.89,0,0,0,0-.23v-.05a.23.23,0,0,1,.07-.19.4.4,0,0,1,.28-.08,1.86,1.86,0,0,0,2-1.48.63.63,0,0,1,.46-.53,1.57,1.57,0,0,0,1.44-1.66v-.09a.38.38,0,0,1,0-.15h.18a2,2,0,0,0,2.15-.59,12.55,12.55,0,0,1,1.31-1.51l.46-.47a9.23,9.23,0,0,0,10-15.09Zm-2.1,4.86a1.92,1.92,0,1,1,0-2.72h0A1.93,1.93,0,0,1,25.55,10.11Z"/>\n</svg>'}},2186:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$escape,r=t.fillColor;return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<polygon fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n points="5.88 28.59 4.82 24.23 5.06 5.18 6 2.71 9.65 2.59 19.29 3.06 21.65 4.47 25.41 7.76 25.65 9.53 26.1 21.8 25.52 28.58 23.53 29.29 9.41 28.94 5.88 28.59"/>\n<path fill="#3f3f3f"\n  d="M22.26,18.19a.35.35,0,0,1-.35.35H8.73a.35.35,0,0,1-.35-.35h0a.34.34,0,0,1,.33-.35h13.2a.35.35,0,0,1,.35.35Z"/>\n<path fill="#3f3f3f"\n  d="M22.26,21.8a.35.35,0,0,1-.35.35H8.73a.34.34,0,0,1-.35-.33v0h0a.35.35,0,0,1,.35-.35H21.91a.35.35,0,0,1,.35.35Z"/>\n<path fill="#3f3f3f"\n  d="M22.14,25.18a.35.35,0,0,1-.35.35H8.61a.35.35,0,0,1-.35-.35h0a.35.35,0,0,1,.35-.35H21.79a.35.35,0,0,1,.35.35Z"/>\n<path fill="#3f3f3f"\n  d="M22.26,14.69a.35.35,0,0,1-.35.35H8.73a.35.35,0,0,1-.35-.35h0a.35.35,0,0,1,.35-.35H21.91a.35.35,0,0,1,.35.35Z"/>\n<path fill="#3f3f3f"\n  d="M24.48,30.13H6.3A2.28,2.28,0,0,1,4,27.87V4.07A2.28,2.28,0,0,1,6.29,1.8H20.41l.14.13.13.14,5.8,5.69.14.13.14.14V27.85a2.28,2.28,0,0,1-2.28,2.28ZM6.73,3.83a.82.82,0,0,0-.81.81V27.29a.82.82,0,0,0,.81.8H24a.81.81,0,0,0,.82-.8h0V9.69H18.29V3.83ZM20.29,7.69h3.25L20.29,4.5Z"/>\n<path fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M23.28,28.58A.58.58,0,0,1,22.7,28V26.36a.58.58,0,0,0-.58-.58H20.48a.58.58,0,0,1-.58-.58V23a.58.58,0,0,1,.58-.58h1.64a.58.58,0,0,0,.58-.58V20.17a.6.6,0,0,1,.58-.59h2.24a.6.6,0,0,1,.58.59V21.8a.58.58,0,0,0,.58.58h1.63a.58.58,0,0,1,.58.58V25.2a.58.58,0,0,1-.58.58H26.68a.58.58,0,0,0-.58.58V28a.58.58,0,0,1-.58.58Z"/>\n</svg>'}},927:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<polygon fill="',e+=(0,i.$escape)(t.fillColor),e+='"\n points="6.35 4 5.88 28.59 7.53 29.77 19.88 29.41 22 28.82 26.23 24.47 27.06 10.94 26.71 3.41 24.94 2.47 6.71 3.06 6.35 4"/>\n<path fill="#3f3f3f"\n  d="M23.17,16.73a.37.37,0,0,0-.36-.35H9.33a.37.37,0,0,0-.36.35H9a.36.36,0,0,0,.36.36H22.81a.36.36,0,0,0,.36-.36Z"/>\n<path fill="#3f3f3f"\n  d="M23.17,13a.36.36,0,0,0-.36-.36H9.33A.36.36,0,0,0,9,13H9a.37.37,0,0,0,.36.35H22.81A.37.37,0,0,0,23.17,13Z"/>\n<path fill="#3f3f3f"\n  d="M23.17,9.35A.37.37,0,0,0,22.81,9H9.33A.37.37,0,0,0,9,9.35H9a.36.36,0,0,0,.36.36H22.81a.36.36,0,0,0,.36-.36Z"/>\n<path fill="#3f3f3f"\n  d="M23.17,20.31a.37.37,0,0,0-.36-.35H9.33a.37.37,0,0,0-.36.35H9a.36.36,0,0,0,.36.36H22.81a.36.36,0,0,0,.36-.36Z"/>\n<path fill="#3f3f3f"\n  d="M25.62,2a2.32,2.32,0,0,1,2.32,2.32V24.63l-.14.14-.14.13-5.93,5.82-.14.14-.14.14H7a2.32,2.32,0,0,1-2.32-2.32h0V4.34A2.32,2.32,0,0,1,7,2H25.62ZM7.46,28.92H19.28v-6H26v-18a.83.83,0,0,0-.83-.83H7.46a.83.83,0,0,0-.83.83V28.09A.83.83,0,0,0,7.46,28.92Zm13.87-4v3.27L24.65,25Z"/>\n</svg>'}},5984:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M10.36,2.52A7.93,7.93,0,0,0,9,2.77H9A6.45,6.45,0,0,0,4.51,9.1a6.52,6.52,0,0,0,6.23,6.77H11V29.19l1.49.69v.95h2.1L14.54,6h3.54V29.19l1.5.69v.95h2.09L21.59,6h3.7V2.52Z"/>\n</svg>'}},1490:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M28.87,16.67a.82.82,0,0,0,.3-1.12.86.86,0,0,0-.3-.3L13.94,4.65c-.54-.39-1-.16-1,.52V9.78A1.22,1.22,0,0,1,11.73,11H4.32a1.22,1.22,0,0,0-1.21,1.22v7.49a1.22,1.22,0,0,0,1.21,1.22h7.41a1.21,1.21,0,0,1,1.21,1.21h0v4.61c0,.67.46.9,1,.52Z"/>\n</svg>'}},9856:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M29,16h0a1.3,1.3,0,0,0-.07-.33c0-.42-.84-1.16-1.28-1.43L7.17,2a1.76,1.76,0,0,0-1.32-.26h0A1.16,1.16,0,0,0,5.33,2h0l7.25,14L5.33,30h0a1.09,1.09,0,0,0,.52.27h0A1.76,1.76,0,0,0,7.17,30L27.63,17.83c.44-.27,1.28-1,1.28-1.43a1.3,1.3,0,0,0,.07-.33h0Z"/>\n</svg>'}},7156:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M24.28,29.33A2.58,2.58,0,0,1,23.1,29l-4.89-2.64A3.73,3.73,0,0,0,16.47,26a3.7,3.7,0,0,0-1.73.37L9.85,29a2.56,2.56,0,0,1-1.18.34,1.43,1.43,0,0,1-1.14-.52,2,2,0,0,1-.33-1.75l1-5.47a4.17,4.17,0,0,0-1.08-3.3l-4-3.84a1.88,1.88,0,0,1-.7-2,1.84,1.84,0,0,1,1.72-1.17l5.5-.74a4.22,4.22,0,0,0,2.81-2l2.4-5a1.87,1.87,0,0,1,1.64-1.26,1.87,1.87,0,0,1,1.64,1.26l2.41,5a4.15,4.15,0,0,0,2.8,2l5.51.74a1.85,1.85,0,0,1,1.71,1.17,1.83,1.83,0,0,1-.7,2l-4,3.84a4.14,4.14,0,0,0-1.07,3.29l1,5.47a2,2,0,0,1-.33,1.75,1.43,1.43,0,0,1-1.14.52Z"/>\n</svg>'}},9649:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M16.49,3.74a.78.78,0,0,0-1.07-.28.75.75,0,0,0-.28.28L5,18.08c-.37.52-.15,1,.49,1H9.91a1.17,1.17,0,0,1,1.17,1.17h0v7.1a1.18,1.18,0,0,0,1.17,1.16h7.18a1.17,1.17,0,0,0,1.17-1.17h0v-7.1A1.17,1.17,0,0,1,21.7,19h4.51c.64,0,.86-.43.48-.95Z"/>\n</svg>'}},7283:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=(0,i.$escape)(t.fillColor),e+='" stroke="#3f3f3f" stroke-miterlimit="10" \n  d="M7.4,5C7,4.8,6.6,5,6.4,5.4c-0.1,0.1-0.1,0.3,0,0.4l1.3,17.5c0,0.6,0.5,0.8,1,0.4l3.4-2.8\n\tc0.5-0.4,1.2-0.3,1.6,0.2c0,0,0,0,0,0l4.5,5.5c0.4,0.5,1.1,0.6,1.6,0.2c0,0,0,0,0,0l5.5-4.6c0.5-0.4,0.6-1.1,0.2-1.6c0,0,0,0,0,0\n\tL21,15.1c-0.4-0.5-0.3-1.2,0.1-1.6l3.4-2.8c0.5-0.4,0.4-0.9-0.2-1.1L7.4,5z"/>\n</svg>\n'}},8998:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$escape,r=t.fillColor;return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<circle fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" cx="7.53" cy="27.68" r="1"/>\n<circle fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" cx="25.53" cy="27.68" r="1"/>\n<path fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M26.53,15.76V14.61A10,10,0,0,0,16.6,4.68h-.14a10,10,0,0,0-9.93,9.93v1.15a6.5,6.5,0,0,0,1,12.92l.68-.3.32-.7v-13a8,8,0,0,1,16,0v13l.35.61.65.39a6.5,6.5,0,0,0,1-12.92Z"/>\n<rect fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="10.53" y="18.68" width="2" height="8" rx="0.99"/>\n<rect fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="20.53" y="18.68" width="2" height="8" rx="0.99"/>\n<rect fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="15.53" y="19.68" width="2" height="6" rx="0.99"/>\n</svg>'}},2314:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$escape,r=t.fillColor;return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M9,12v2c0,4.4,2.6,8,7,8s7-3.6,7-8V12h2v2.07C25,19.53,21.53,24,16.07,24h-.14C10.47,24,7,19.53,7,14.07V12Z"/>\n<circle fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" cx="8" cy="12" r="1"/>\n<circle fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" cx="24" cy="12" r="1"/>\n<rect fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="15" y="23" width="2" height="5" rx="0.99"/>\n<rect fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="8" y="27" width="16" height="2" rx="0.99"/>\n<rect fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="12" y="4" width="8" height="16" rx="3.95"/>\n</svg>'}},9291:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$escape,r=t.fillColor;return e+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n<path fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10"\n  d="M18.7,4.62a5.88,5.88,0,0,0-3,1.79l-5.12,4.74H4.91a2,2,0,0,0-2,2v6.38a2,2,0,0,0,2,2h5.66l5.12,4.73a6,6,0,0,0,3,1.8.48.48,0,0,0,.51-.45V5.13C19.14,4.75,19,4.62,18.7,4.62Z"/>\n<rect fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="24" y="20.12" width="2" height="8" rx="0.99" transform="translate(-9.73 24.74) rotate(-45)"/>\n<rect fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="20.95" y="6.88" width="8" height="2" rx="0.99"\n  transform="translate(1.74 19.95) rotate(-45)"/>\n<rect fill="',e+=n(r),e+='" stroke="#3f3f3f" stroke-miterlimit="10" x="22" y="15" width="6" height="2" rx="0.99"/>\n</svg>'}},4252:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e,r="",o=i.$escape;return t.length&&(r+='\n<label class="fv__label-block-text">',r+=o(i.i18n("viewer_:dialog.replies")),r+="</label>\n",e=n(1186)(t),r+=e,r+="\n"),r}},4210:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e,r="",o=i.$escape;return r+='<li class="fv__replies_item"><span class="fv__replies_content">',r+=o(t.content),r+="</span>\n",e=n(1186)(t.replies),r+=e,r+="\n</li>"}},1186:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",r=i.$each;t.$value,t.$index;return t.length&&(e+='\n<ul class="fv__replies_list">\n',r(t,(function(t,i){var r;e+="\n",r=n(4210)(t),e+=r,e+="\n"})),e+="\n</ul>\n"),e}},6912:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",r=i.$escape,o=t.content,s=t.replies;return e+='<dialog class="fv__dialog fv__annot-reply-dialog">\n<div class="fv__textarea-container">\n<label>\n<span class="fv__label-block-text">',e+=r(i.i18n("viewer_:dialog.content")),e+='</span>\n<textarea class="fv__block-textarea content-textarea">',e+=r(o),e+='</textarea>\n</label>\n</div>\n<div class="fv__textarea-container">\n<label>\n<span class="fv__label-block-text">',e+=r(i.i18n("viewer_:dialog.reply")),e+='</span>\n<textarea class="fv__block-textarea reply-textarea"></textarea>\n</label>\n</div>\n<div class="fv__btn_reply_container">\n<button type="button" class="fv__btn fv__btn-reply" disabled>',e+=r(i.i18n("viewer_:dialog.reply")),e+='</button>\n</div>\n<div class="fv__dialog-replies-block">\n',function(t){e+=t}(n(4252)(s)),e+='\n</div>\n<div class="fv__btn-close-container">\n<button type="button" class="fv__btn fv__btn-close">',e+=r(i.i18n("viewer_:dialog.close")),e+="</button>\n</div>\n</dialog>"}},5322:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<div class="fv__text-boundary fv__text-boundary-',e+=(0,i.$escape)(t.direction),e+='">\n<div class="fv__text-boundary-blank">\n<div class="fv__text-boundary-cursor"></div>\n<div class="fv__text-boundary-sign"></div>\n</div>\n</div>'}},7539:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$escape;return e+='<dialog class="fv__dialog fv__annot-reply-dialog trust-dia-dibox">\n  <p><span>',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.diaTitle")),e+='</span><i class="fv__icon-layer-close"></i></p>\n  <div class="fv__trust-tip-container">\n<p><i class="fv__icon-dialog-level-warning"></i><span>',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.enableTip")),e+='</span></p>\n  </div>\n  <div class="fv__textarea-container trust-dia-inbox">\n  <label>\n  <input type="radio" name="trustMode" value="one" checked>\n  <span>',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.trustOneTime")),e+='</span>\n  </label>\n  <label>\n  <input type="radio" name="trustMode" value="always">\n  <span>',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.trustAlways")),e+='</span>\n  </label>\n  </div>\n  <div class="fv__btn_reply_container btn-bot-box">\n  <button type="button" class="fv__btn fv__btn-reply trust-ok-btn">',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.ok")),e+='</button>\n  <button type="button" class="fv__btn fv__btn-close trust-no-btn">',e+=n(i.i18n("viewer_:preferenceDialog.safeReading.cancel")),e+="</button>\n  </div>\n</dialog>"}},1771:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,r=t.borderWidth,o=t.borderColorHex,s=(t.position,t.background),a=t.align,c=(t.style,i.$escape),l=t.i,h=t.options,u=t.optClass;n="border:"+r+"px solid "+o+";box-sizing:border-box;",s="background-color:"+s+";outline:none;";switch(a){case 0:a="text-align:left;";break;case 1:a="text-align:center;";break;case 2:a="text-align:right;"}e+='\n<div class="checkbox form-field-options" style="',e+=c(n+"left:0px;top:100%;max-height:200px;width:100%;position:absolute;"+s+a+"overflow-y:auto"),e+='" tabindex="-1">\n';for(l=0;l<h.length;l++){u="form-field-option";h[l].selected&&(u+=" selected"),e+='\n<div \ntabindex="-1"\nclass="',e+=c(u),e+='" \ndata-val="',e+=c(h[l].value),e+='" \ndata-index="',e+=c(l),e+='"\nstyle="white-space: nowrap; overflow-x: hidden;"\n>',e+=c(h[l].label),e+="</div>\n"}return e+="\n</div>"}},7416:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,r=t.borderWidth,o=t.borderColor,s=t.position,a=t.height,c=t.width,l=t.background,h=t.align,u=(t.readonlyAttr,t.readonly),d=t.comboEditable,f=(t.cursor,t.fs,t.fontSize),p=(t.fcolor,t.color),g=t.style,m=t.dropButtonDisplay,v=i.$escape,y=t.value;n="border:"+r+"px solid "+o+";box-sizing:border-box;",s="left:0px;top:0px;height:"+a+";width:"+c+";position:absolute;",l="background-color:"+l+";outline:none;";switch(h){case 0:h="text-align:left;";break;case 1:h="text-align:center;";break;case 2:h="text-align:right;"}g=n+s+l+h+("font-size:"+f+";")+("color:"+p+";")+(d?"":"cursor:pointer;"),m=u?"display:none":"display:block";return e+='\n<input class="fwr__ui-combo-input" ',e+=v(u||!d?"readonly":""),e+=' style="',e+=v(g),e+='" value="',e+=v(y),e+='" tabindex="-1"/>\n<div class="fwr__ui-combo-dropdown" style="',e+=v(m),e+='"></div>\n<div class="fwr__ui-combo-arrow"><span /></div>'}},5143:function(t,e,n){n(5779);t.exports=function(t){"use strict";t=t||{};return"<div class='esign-china-field-username'\nstyle=\"\nposition: absolute;\nwidth: max-content;\ndisplay: none;\nheight: 24px;\ninset: 0px;\nline-height: 18px;\ncolor: white;\npadding: 3px;\nborder-radius: 3px;\nmargin: auto;\n\"\n></div>\n<div class='esign-china-stamp-container'\n style='position: absolute;\n display: none;\n width: 240px;\n overflow-y: scroll;\n max-height: 217px;\n padding: 10px 15px 15px 20px;\n background: #FFFFFF;\n border: solid 1px rgba(0, 0, 0, 0.1);\n box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.15);\n border-radius: 3px;'>\n</div>","<div class='esign-china-field-username'\nstyle=\"\nposition: absolute;\nwidth: max-content;\ndisplay: none;\nheight: 24px;\ninset: 0px;\nline-height: 18px;\ncolor: white;\npadding: 3px;\nborder-radius: 3px;\nmargin: auto;\n\"\n></div>\n<div class='esign-china-stamp-container'\n style='position: absolute;\n display: none;\n width: 240px;\n overflow-y: scroll;\n max-height: 217px;\n padding: 10px 15px 15px 20px;\n background: #FFFFFF;\n border: solid 1px rgba(0, 0, 0, 0.1);\n box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.15);\n border-radius: 3px;'>\n</div>"}},6892:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,r=t.borderColor,o=(t.position,t.background),s=t.borderStyle,a=t.borderWidth,c=t.align,l=(t.fs,t.fontSize),h=(t.fcolor,t.color),u=(t.style,t.optsClass,i.$escape),d=t.i,f=t.options,p=t.optClass,g=t.readonly;n="border-color:"+r+";box-sizing:border-box;",o="background-color:"+o+";outline:none;";switch(n+="underline"===s?"border-width: 0 0 "+a+"px 0;border-style:solid;":"border-width:"+a+"px;border-style:"+s+";",c){case 0:c="text-align:left;";break;case 1:c="text-align:center;";break;case 2:c="text-align:right;"}e+='\n<div class="form-field-options" style="',e+=u(n+"left:0px;top:0px;height:100%;width:100%;"+o+c+"overflow-y:auto;"+("font-size:"+l+";")+("color:"+h+";")),e+='" tabindex="-1">\n';for(d=0;d<f.length;d++){p="form-field-option";f[d].selected&&(p+=" selected"),g&&(p+=" readonly"),e+='\n<div \nclass="',e+=u(p),e+='" \ndata-val="',e+=u(f[d].value),e+='" \ndata-index="',e+=u(d),e+='"\nstyle="white-space: nowrap; overflow-x: hidden;"\ntabindex="-1"\n>',e+=u(f[d].label),e+="</div>\n"}return e+="\n</div>"}},2565:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<?xml version="1.0" standalone="no"?><svg t="1589451362275" viewBox="-100 -100 1224 1224" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path fill="',e+=(0,i.$escape)(t.fillColor),e+='" d="M997.888 70.144C686.592 261.12 460.8 502.272 358.912 623.104l-248.832-195.072-110.08 88.576 429.568 437.248c73.728-189.44 308.224-559.616 594.432-822.784l-26.112-60.928m0 0z"></path></svg>'}},2911:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";var e="",n=(t=t||{}).small,r=i.$escape,o=t.fillColor;return e+='<?xml version="1.0" standalone="no"?><svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n',0==n?(e+='\n<path stroke="',e+=r(o),e+='" d="M15 15 L185 185 M15 185 L185 15" style="stroke-width:12"></path></svg>\n'):(e+='\n<path stroke="',e+=r(o),e+='" d="M40 40 L160 160 M40 160 L160 40" style="stroke-width:30"></path></svg>\n'),e}},5133:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg viewBox="0 0 400 400"  width="400" height="400" xmlns="http://www.w3.org/2000/svg">\n  <path id="svg_4" d="m30.75,155.65323l131.477663,0l40.627609,-124.90323l40.627633,124.90323l131.477639,0l-106.367469,77.193558l40.629712,124.90323l-106.367515,-77.19566l-106.367492,77.19566l40.629723,-124.90323l-106.367503,-77.193558z" fill="',e+=(0,i.$escape)(t.fillColor),e+='"/>\n</svg>'}},5115:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<svg viewBox="0 0 300 300"  width="300" height="300" xmlns="http://www.w3.org/2000/svg">\n  <circle cx="151" cy="151" r="85" fill="',e+=(0,i.$escape)(t.fillColor),e+='"/>\n</svg>'}},781:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<?xml version="1.0" standalone="no"?><svg class="icon" viewBox="0 0 390 390" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">  <rect height="270" width="270" y="60" x="60" fill="',e+=(0,i.$escape)(t.fillColor),e+='"/></svg>'}},5617:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<?xml version="1.0" standalone="no"?><svg t="1589451342686" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path fill="',e+=(0,i.$escape)(t.fillColor),e+='" d="M512 69.479l442.498 442.498-442.498 442.498-442.498-442.498 442.498-442.498z"></path></svg>'}},9194:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";var e="",n=(t=t||{}).border,r=t.borderWidth,o=t.borderColor,s=t.position,a=t.left,c=t.top,l=t.height,h=t.width,u=t.background,d=t.transform,f=t.rotation,p=t.alignStyle,g=t.align,m=(t.fs,t.fontSize),v=(t.fcolor,t.color),y=t.transformStyle,w=t.style,b=t.maxLengthAttr,A=t.maxLength,P=t.spellCheckAttr,S=t.isNoSpellCheck,C=t.isMultiline,E=i.$escape,x=t.isNoScroll,D=t.ro,I=t.value,R=t.comb,T=t.diffLen,F=t.i,_=t.v,k=t.type,M=t.isPassword,O=t.readonly,L=t.isSafari;n="border:"+r+"px solid "+o+";",s="left:"+a+";top:"+c+";height:"+l+";width:"+h+";",u="background-color:"+u+";",d="";switch(0!==f&&(d="transform:rotate("+f+"deg);transform-origin: center;"),g){case 0:p="text-align:left;";break;case 1:p="text-align:center;";break;case 2:p="text-align:right;"}y=d,w=n+s+u+p+("font-size:"+m+";")+("color:"+v+";"),b=A?"maxlength="+A:"",P="spellcheck="+!S;if(C)w+="resize: none;",e+='\n<div class="textCombInput"><textarea class="fv__pdf-form-field-combo-textarea ',e+=E(x?"fv__no-scroll-text":"fv__scroll-text"),e+='" ',e+=E(D),e+=' style="',e+=E(w),e+='">',e+=E(I),e+="</textarea></div>\n";else if(R){e+='\n<div class="textCombInput" >\n<div class="textCombContainer">\n';for(T=A-I.length,F=0;F<A;F++){_=I[F];2==g&&A>I.length&&F<T&&(_=""),2==g&&F>=T&&(_=I[F-T]),e+='\n<div class="textComb" style="',e+=E(n),e+='" data-index="',e+=E(F),e+='">',e+=E(_),e+="</div>\n"}e+='\n</div>\n\n<input type="',e+=E(k),e+='" ',e+=E(D),e+=' style="',e+=E(w),e+='" ',e+=E(b),e+=" ",e+=E(P),e+=' value="',e+=E(I),e+='" tabindex="-1">\n</div>\n'}else{D=O?"readonly":"";e+='\n<div class="textCombInput">\n<input  type="',e+=E(k=M?"password":"text"),e+='" ',e+=E(D),e+=" ",e+=E(b),e+=" ",e+=E(P),e+=' style="',e+=E(w+y),e+=E(L&&"box-sizing: content-box; padding: 0;"),e+='" value="',e+=E(I),e+='" tabindex="-1"/>\n<div class="dtbox"></div>\n</div>\n'}return e}},4563:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+="<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n  <script>\nwindow.initJS = function (PDFJSGlobal) {\n  window.PDFJSGlobal = PDFJSGlobal\n  function appClosure() {\nfor (var i in window) {\n  if (i != 'PDFJSGlobal'\n&& i != 'location'\n&& i != 'window'\n&& i != 'appClosure') {\n  try {\neval('var ' + i + '=null');\n  } catch (ex) {}\n  }\n}\nvar proto = Object.getPrototypeOf ? Object.getPrototypeOf(window.PDFJSGlobal.doc) : window.PDFJSGlobal.doc.__proto__;\nObject.getOwnPropertyNames(proto).forEach(function (key) {\n  if (key === \"constructor\") return;\n  var descriptor = Object.getOwnPropertyDescriptor(proto, key);\n  if(typeof descriptor.value === 'function') {\nwindow[key] = function () {\n  return window.PDFJSGlobal.doc[key].apply(window.PDFJSGlobal.doc, arguments)\n}\n  } else {\n  if(window[key]){window[key] = window.PDFJSGlobal.doc[key];return}\nObject.defineProperty(window, key, {\n  get: function () {\nreturn window.PDFJSGlobal.doc[key];\n  }, set: function (val) {\nwindow.PDFJSGlobal.doc[key] = val\n  }\n})\n  }\n})\n\nreturn {\n  docClosure: function (f) {\nwith (PDFJSGlobal) {\n  with (PDFJSGlobal.doc) {\ntry {\n  eval(f);\n} catch (e) {\n  //",e+=(0,i.$escape)(t.log||""),e+="&&console.warn(e)\n}\nreturn function (f) {\n  return eval(f)\n}\n  }\n}\n  }\n}\n  }\n  window.app = appClosure();\n}\n\nwindow.runJS = function (data, engineEvent) {\n  var doc = window.PDFJSGlobal.doc;\n  window.PDFJSGlobal.event = engineEvent;\n\n  doc.timeStamp = engineEvent && engineEvent.timeStamp;\n\n  var resetDocClosure = function () {\ndoc.exec = app.docClosure.call(doc, data.code);\n  }\n  if(typeof data.code === 'string')\n  data.code = data.code.replace(/window\\.open/g, ''); //Sanitize window.open\n  switch (data.action) {\ncase 'execute':\n  doc.exec(data.code, data, engineEvent);\n  break;\ncase 'reset':\n  resetDocClosure();\n  return;\ndefault:\n  if (data.global) { // 兼容旧版本\nreturn resetDocClosure();\n  }\n  }\n  window.PDFJSGlobal.event = null;\n}\n  <\/script>\n</head>\n\n<body>\n</body>\n\n</html>\n"}},8272:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<div class="fv__ui-print-process">\n<div class="fv__ui-print-process-title">',e+=(0,i.$escape)(t.title),e+='</div>\n<div class="fv__ui-print-process-digital-progress"><span class="fv__ui-print-process-current">0</span>/<span class="fv__ui-print-process-total">0</span></div>\n<div class="fv__ui-print-process-bar">\n<div class="fv__ui-print-process-percent"></div>\n</div>\n</div>'}},1885:function(t,e,n){n(5779);t.exports=function(t){"use strict";t=t||{};return'<div class="fv-callout">\n<div class="fv__shape-control callout">\n<canvas class="fv__shape-control-previewer"></canvas>\n<div class="fv__shape-control-move-area"></div>\n<div class="fv__shape-control-inner-area">\n<div class="fv__shape-controller callout left text"></div>\n<div class="fv__shape-controller callout top text"></div>\n<div class="fv__shape-controller callout right text"></div>\n<div class="fv__shape-controller callout bottom text"></div>\n</div>\n<div class="fv__shape-control-text-area"></div>\n<div class="fv__shape-controller callout calloutStart"></div>\n<div class="fv__shape-controller callout calloutKnee"></div>\n</div>\n</div>','<div class="fv-callout">\n<div class="fv__shape-control callout">\n<canvas class="fv__shape-control-previewer"></canvas>\n<div class="fv__shape-control-move-area"></div>\n<div class="fv__shape-control-inner-area">\n<div class="fv__shape-controller callout left text"></div>\n<div class="fv__shape-controller callout top text"></div>\n<div class="fv__shape-controller callout right text"></div>\n<div class="fv__shape-controller callout bottom text"></div>\n</div>\n<div class="fv__shape-control-text-area"></div>\n<div class="fv__shape-controller callout calloutStart"></div>\n<div class="fv__shape-controller callout calloutKnee"></div>\n</div>\n</div>'}},8012:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$escape,r=t.previewer,o=t.moveable,s=t.resizable,a=t.enableFrame,c=t.enableDiagonally,l=t.enableSizeBox,h=t.rotatable,u=t.degreeInitVisibility;return e+='<div class="fv__shape-control">\n<canvas class="fv__shape-control-previewer" ',e+=n(r?"":"style=display:none"),e+=" ></canvas>\n",o&&(e+='\n<div class="fv__shape-control-move-area"></div>\n'),e+='\n<div class="fv__shape-controller-resizable-wrap" ',e+=n(s?"":"style=visibility:hidden"),e+=" >\n",a&&(e+='\n<div class="fv__shape-controller" direction="north"></div>\n<div class="fv__shape-controller" direction="south"></div>\n<div class="fv__shape-controller" direction="west"></div>\n<div class="fv__shape-controller" direction="east"></div>\n'),e+="\n",c&&(e+='\n<div class="fv__shape-controller" direction="north-west"></div>\n<div class="fv__shape-controller" direction="north-east"></div>\n<div class="fv__shape-controller" direction="south-west"></div>\n<div class="fv__shape-controller" direction="south-east"></div>\n'),e+="\n",l&&(e+='\n<div class="fv__shape-size"></div>\n'),e+="\n</div>\n",h&&(e+='\n<div class="fv__shape-rotate">\n<div class="fv-shape-rotate-handle fv__cursor-rotation"></div>\n<div class="fv-shape-rotate-degree" ',e+=n(u?"":"style=visibility:hidden"),e+=' ></div>\n<div class="fv-shape-rotate-bound"></div>\n</div>\n'),e+="\n</div>"}},564:function(t,e,n){n(5779);t.exports=function(t){"use strict";var e="";return e+='<div class="fv__rendering-container" >\n',e+=(t=t||{}).isIE?'\n<ul class="fv__loading-animation">\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n<li></li>\n</ul>\n':'\n<div class="fv__rendering-svg" aria-live="assertive" aria-busy="true"></div>\n',e+="\n</div>"}},4528:function(t,e,n){n(5779);t.exports=function(t){"use strict";t=t||{};return'<div class="fv__ui-progress-layer">\n<div class="fv__ui-progress-icon"></div>\n<span class="fv__ui-progress-text"></span>\n</div>','<div class="fv__ui-progress-layer">\n<div class="fv__ui-progress-icon"></div>\n<span class="fv__ui-progress-text"></span>\n</div>'}},3013:function(t,e,n){var i=n(5779);t.exports=function(t){"use strict";t=t||{};var e="",n=i.$each,r=t.actions,o=(t.$value,t.$index,i.$escape);return e+='<div class="fv__selection-tool-tip-container" tabindx="-1">\n\x3c!--<div class="fv__selection-tool-tip-items-container">--\x3e\n<div class="fv__selection-tool-tip-items">\n',n(r,(function(t,n){e+='\n<div class="fv__selection-tool-tip-item ',e+=o(t.iconClass),e+='" action="',e+=o(t.name),e+='"></div>\n'})),e+="\n</div>\n\x3c!--</div>--\x3e\n</div>"}},5680:function(t,e,n){n(5779);t.exports=function(t){"use strict";t=t||{};return'<div class="fv__pdf-viewer-layout">\r\n<div class="fv__pdf-viewer-rendering"></div>\r\n<div class="fv__pdf-viewer-container"></div>\r\n<div class="fv__pdf-viewer-handler-container"></div>\r\n</div>','<div class="fv__pdf-viewer-layout">\r\n<div class="fv__pdf-viewer-rendering"></div>\r\n<div class="fv__pdf-viewer-container"></div>\r\n<div class="fv__pdf-viewer-handler-container"></div>\r\n</div>'}},973:function(t){window,t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(2)},function(t,e,n){},function(t,e,n){"use strict";n.r(e),n(1);var i={isFirefox:function(){return"undefined"!=typeof InstallTrigger},getFirefoxMajorVersion:function(t){var e=(t=t||navigator.userAgent).toLowerCase().match(/firefox\/(\S+)/);if(e)return e[1].split(".").map((function(t){return parseInt(t)}))[0]},isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||!!document.documentMode},isEdge:function(){return!i.isIE()&&!!window.StyleMedia},isChrome:function(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||-1!==navigator.userAgent.toLowerCase().indexOf("safari")},isIOSChrome:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("crios")}},r=i,o={show:function(t){var e=document.createElement("div");e.setAttribute("style","font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;"),e.setAttribute("id","printJS-Modal");var n=document.createElement("div");n.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var i=document.createElement("div");i.setAttribute("class","printClose"),i.setAttribute("id","printClose"),n.appendChild(i);var r=document.createElement("span");r.setAttribute("class","printSpinner"),n.appendChild(r);var s=document.createTextNode(t.modalMessage);n.appendChild(s),e.appendChild(n),document.getElementsByTagName("body")[0].appendChild(e),document.getElementById("printClose").addEventListener("click",(function(){o.close()}))},close:function(){var t=document.getElementById("printJS-Modal");t&&t.parentNode.removeChild(t)}},s=o;function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t){return t.charAt(0).toUpperCase()+t.slice(1)}function l(t,e){for(var n=0;n<t.length;n++)if("object"===a(e)&&-1!==e.indexOf(t[n]))return!0;return!1}function h(t,e){var n=document.createElement("div");if(f(e.header))n.innerHTML=e.header;else{var i=document.createElement("h1"),r=document.createTextNode(e.header);i.appendChild(r),i.setAttribute("style",e.headerStyle),n.appendChild(i)}t.insertBefore(n,t.childNodes[0])}function u(t,e){var n=document.createElement("div");if(f(e.footer))n.innerHTML=e.footer;else{var i=document.createElement("h1"),r=document.createTextNode(e.footer);i.appendChild(r),i.setAttribute("style",e.footerStyle),n.appendChild(i)}t.insertBefore(n,t.childNodes.lastChild)}function d(t){t.showModal&&s.close(),t.onLoadingEnd&&t.onLoadingEnd(),(t.showModal||t.onLoadingStart)&&window.URL.revokeObjectURL(t.printable);var e="mouseover";(r.isChrome()||r.isFirefox())&&(e="focus"),window.addEventListener(e,(function n(){window.removeEventListener(e,n),t.onPrintDialogClose();var i=document.getElementById(t.frameId);i&&(t.frameRemoveDelay?setTimeout((function(){i.remove()}),t.frameRemoveDelay):i.remove())}))}function f(t){return new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>").test(t)}function p(t,e){try{if(t.focus(),r.isEdge()||r.isIE())try{t.contentWindow.document.execCommand("print",!1,null)}catch(e){setTimeout((function(){t.contentWindow.print()}),1e3)}else setTimeout((function(){t.contentWindow.print()}),1e3)}catch(t){e.onError(t)}finally{r.isFirefox()&&r.getFirefoxMajorVersion()<110&&(t.style.visibility="hidden",t.style.left="-1px"),d(e)}}var g={send:function(t,e){document.getElementsByTagName("body")[0].appendChild(e);var n=document.getElementById(t.frameId);n.onload=function(){if("pdf"!==t.type){var e=n.contentWindow||n.contentDocument;if(e.document&&(e=e.document),e.body.appendChild(t.printableElement),"pdf"!==t.type&&t.style){var i=document.createElement("style");i.innerHTML=t.style,e.head.appendChild(i)}var o=e.getElementsByTagName("img");o.length>0?function(t){var e=t.map((function(t){if(t.src&&t.src!==window.location.href)return function(t){return new Promise((function(e){!function n(){t&&void 0!==t.naturalWidth&&0!==t.naturalWidth&&t.complete?e():setTimeout(n,500)}()}))}(t)}));return Promise.all(e)}(Array.from(o)).then((function(){return p(n,t)})):p(n,t)}else r.isFirefox()&&r.getFirefoxMajorVersion()<110||r.isSafari()?setTimeout((function(){return p(n,t)}),1e3):p(n,t)}}},m=function(t,e){if(t.base64){-1!==t.printable.indexOf(",")&&(t.printable=t.printable.split(",")[1]);var n=Uint8Array.from(atob(t.printable),(function(t){return t.charCodeAt(0)}));v(t,e,n)}else{t.printable=/^(blob|http|\/\/)/i.test(t.printable)?t.printable:window.location.origin+("/"!==t.printable.charAt(0)?"/"+t.printable:t.printable);var i=new window.XMLHttpRequest;i.responseType="arraybuffer",i.addEventListener("error",(function(){d(t),t.onError(i.statusText,i)})),i.addEventListener("load",(function(){if(-1===[200,201].indexOf(i.status))return d(t),void t.onError(i.statusText,i);v(t,e,i.response)})),i.open("GET",t.printable,!0),i.send()}};function v(t,e,n){var i=new window.Blob([n],{type:"application/pdf"});i=window.URL.createObjectURL(i),e.setAttribute("src",i),g.send(t,e)}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}var w=function(t,e){var n,i="object"===y(n=t.printable)&&n&&(n instanceof HTMLElement||1===n.nodeType)?t.printable:document.getElementById(t.printable);i?(t.printableElement=b(i,t),t.header&&h(t.printableElement,t),t.footer&&u(t.printableElement,t),g.send(t,e)):window.console.error("Invalid HTML element id: "+t.printable)};function b(t,e){for(var n=t.cloneNode(),i=Array.prototype.slice.call(t.childNodes),r=0;r<i.length;r++)if(-1===e.ignoreElements.indexOf(i[r].id)){var o=b(i[r],e);n.appendChild(o)}switch(e.scanStyles&&1===t.nodeType&&n.setAttribute("style",function(t,e){for(var n="",i=(document.defaultView||window).getComputedStyle(t,""),r=0;r<i.length;r++)(-1!==e.targetStyles.indexOf("*")||-1!==e.targetStyle.indexOf(i[r])||l(e.targetStyles,i[r]))&&i.getPropertyValue(i[r])&&(n+=i[r]+":"+i.getPropertyValue(i[r])+";");return n+"max-width: "+e.maxWidth+"px !important; font-size: "+e.font_size+" !important;"}(t,e)),t.tagName){case"SELECT":n.value=t.value;break;case"CANVAS":n.getContext("2d").drawImage(t,0,0)}return n}var A=function(t,e){t.printableElement=document.createElement("div"),t.printableElement.setAttribute("style","width:100%"),t.printableElement.innerHTML=t.printable,t.header&&h(t.printableElement,t),t.footer&&u(t.printableElement,t),g.send(t,e)},P=function(t,e){t.printable.constructor!==Array&&(t.printable=[t.printable]),t.printableElement=document.createElement("div"),t.printable.forEach((function(e){var n=document.createElement("img");if(n.setAttribute("style",t.imageStyle),n.src=e,r.isFirefox()){var i=n.src;n.src=i}var o=document.createElement("div");o.appendChild(n),t.printableElement.appendChild(o)})),t.header&&h(t.printableElement,t),t.footer&&u(t.printableElement,t),g.send(t,e)};function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}var C=function(t,e){if("object"!==S(t.printable))throw new Error("Invalid javascript data object (JSON).");if("boolean"!=typeof t.repeatTableHeader)throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!t.properties||!Array.isArray(t.properties))throw new Error("Invalid properties array for your JSON data.");t.properties=t.properties.map((function(e){return{field:"object"===S(e)?e.field:e,displayName:"object"===S(e)?e.displayName:e,columnSize:"object"===S(e)&&e.columnSize?e.columnSize+";":100/t.properties.length+"%;"}})),t.printableElement=document.createElement("div"),t.header&&h(t.printableElement,t),t.printableElement.innerHTML+=function(t){var e=t.printable,n=t.properties,i='<table style="border-collapse: collapse; width: 100%;">';t.repeatTableHeader&&(i+="<thead>"),i+="<tr>";for(var r=0;r<n.length;r++)i+='<th style="width:'+n[r].columnSize+";"+t.gridHeaderStyle+'">'+c(n[r].displayName)+"</th>";i+="</tr>",t.repeatTableHeader&&(i+="</thead>"),i+="<tbody>";for(var o=0;o<e.length;o++){i+="<tr>";for(var s=0;s<n.length;s++){var a=e[o],l=n[s].field.split(".");if(l.length>1)for(var h=0;h<l.length;h++)a=a[l[h]];else a=a[n[s].field];i+='<td style="width:'+n[s].columnSize+t.gridStyle+'">'+a+"</td>"}i+="</tr>"}return i+"</tbody></table>"}(t),t.footer&&u(t.printableElement,t),g.send(t,e)};function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}var x=["pdf","html","image","json","raw-html"],D=function(){var t={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",footer:null,footerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(t){throw t},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",frameRemoveDelay:null,printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},e=arguments[0];if(void 0===e)throw new Error("printJS expects at least 1 attribute.");switch(E(e)){case"string":t.printable=encodeURI(e),t.fallbackPrintable=t.printable,t.type=arguments[1]||t.type;break;case"object":for(var n in t.printable=e.printable,t.fallbackPrintable=void 0!==e.fallbackPrintable?e.fallbackPrintable:t.printable,t.fallbackPrintable=t.base64?"data:application/pdf;base64,".concat(t.fallbackPrintable):t.fallbackPrintable,t)"printable"!==n&&"fallbackPrintable"!==n&&(t[n]=void 0!==e[n]?e[n]:t[n]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+E(e))}if(!t.printable)throw new Error("Missing printable information.");if(!t.type||"string"!=typeof t.type||-1===x.indexOf(t.type.toLowerCase()))throw new Error("Invalid print type. Available types are: pdf, html, image and json.");t.showModal&&s.show(t),t.onLoadingStart&&t.onLoadingStart();var i=document.getElementById(t.frameId);i&&i.parentNode.removeChild(i);var o=document.createElement("iframe");switch(r.isFirefox()?o.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):o.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),o.setAttribute("id",t.frameId),"pdf"!==t.type&&(o.srcdoc="<html><head><title>"+t.documentTitle+"</title>",t.css&&(Array.isArray(t.css)||(t.css=[t.css]),t.css.forEach((function(t){o.srcdoc+='<link rel="stylesheet" href="'+t+'">'}))),o.srcdoc+="</head><body></body></html>"),t.type){case"pdf":if(r.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer."),window.open(t.fallbackPrintable,"_blank").focus(),t.onIncompatibleBrowser()}catch(e){t.onError(e)}finally{t.showModal&&s.close(),t.onLoadingEnd&&t.onLoadingEnd()}else m(t,o);break;case"image":P(t,o);break;case"html":w(t,o);break;case"raw-html":A(t,o);break;case"json":C(t,o)}},I=D;"undefined"!=typeof window&&(window.printJS=I),e.default=I}]).default},5585:function(t,e,n){"use strict";
/*! art-template@runtime | https://github.com/aui/art-template */var i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{},r=Object.create(i),o=/["&'<>]/;function s(t){return"string"!=typeof t&&(t=null==t?"":"function"==typeof t?s(t.call(t)):JSON.stringify(t)),t}r.$escape=function(t){return function(t){var e=""+t,n=o.exec(e);if(!n)return t;var i="",r=void 0,s=void 0,a=void 0;for(r=n.index,s=0;r<e.length;r++){switch(e.charCodeAt(r)){case 34:a="&#34;";break;case 38:a="&#38;";break;case 39:a="&#39;";break;case 60:a="&#60;";break;case 62:a="&#62;";break;default:continue}s!==r&&(i+=e.substring(s,r)),s=r+1,i+=a}return s!==r?i+e.substring(s,r):i}(s(t))},r.$each=function(t,e){if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++)e(t[n],n);else for(var r in t)e(t[r],r)},t.exports=r},5779:function(t,e,n){"use strict";t.exports=n(5585)},8752:function(t,e,n){"use strict";n.d(e,{$j:function(){return s},Ak:function(){return l},YS:function(){return c},dN:function(){return o},kr:function(){return i},si:function(){return h}});n(4043),n(7267),n(752),n(6265);function i(t){if("number"!=typeof t)throw new TypeError("Unexpected color value:"+t);if(t<0)return-1;let e=t.toString(16),n=6;for(t>16777215&&(n=8);e.length<n;)e="0"+e;return"#"+e}const r=Math.pow(2,24);function o(t){let e,n,i,o;return t<16777216?o=255:(o=t/r&255,t&=16777215),i=255&t,n=t>>8&255,e=t>>16&255,{r:e,g:n,b:i,a:o}}function s(t,e="HTML",n=1){var i,r,o,s="";let a;if(t>4294967295)throw new Error("Incorrect color");switch("number"==typeof t&&(t=["int",t]),t[0]){case"int":i=(16711680&t[1])>>16,r=(65280&t[1])>>8,o=255&t[1];break;case"T":i=0,r=0,o=0,n=0;break;case"G":i=r=o=255*t[1];break;case"RGB":i=255*t[1],r=255*t[2],o=255*t[3];break;case"CMYK":i=(1-t[4])*(1-t[1])*255,r=(1-t[4])*(1-t[2])*255,o=(1-t[4])*(1-t[3])*255;break;case"r":a=t.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/),i=+a[1],r=+a[2],o=+a[3];let e=a[4];void 0!==e&&(n=+e);break;case"#":let s=4==t.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;a=t.match(s),i=parseInt(a[1],16),r=parseInt(a[2],16),o=parseInt(a[3],16);break;default:throw new Error("Unsupported color format")}switch(e){case"HTML":s=i===r&&r===o&&-1===o?"transparent":"rgba("+parseInt(i)+","+parseInt(r)+","+parseInt(o)+","+n+")";break;case"RGB":s=["RGB",i/255,r/255,o/255];break;case"#":s+=i<16?"#0"+i.toString(16):"#"+i.toString(16),s+=r<16?"0"+r.toString(16):r.toString(16),s+=o<16?"0"+o.toString(16):o.toString(16);break;case"int":s=0,s|=(n*=255)<<24,s|=i<<16,s|=r<<8,s|=o,s>>>=0;break;case"CMYK":{let t=255-i,e=255-r,n=255-o;return["CMYK",t/255,e/255,n/255,Math.min(t,e,n)/255]}case"GRAY":return["GRAY",(.3*i+.59*r+.11*o)/255]}return s}const a=4278190080;function c(t){switch(typeof t){case"number":if(t<=16777215)return a+t;if(t>16777215)return t;break;case"string":if((t=t.replace("#","").trim()).match(/^[0-9A-F]{8}$/i))return parseInt(t,16);if(t.match(/^[0-9A-F]{6}$/i))return a+parseInt(t,16);if(t.match(/^rgb\(\d{1,3}(,\d{1,3}){2}\)$/i)){const[,e,n,i]=t.split(/\D+/).map((t=>parseInt(t)));return a+(e<<16)+(n<<8)+i}if(t.match(/^rgba\(\d{1,3}(,\d{1,3}){3}\)$/i)){const[,e,n,i,r]=t.split(/\D+/).map((t=>parseInt(t)));return Math.floor(r*a)+(e<<16)+(n<<8)+i}}throw new Error(`incorrect color format: "${t}"`)}function l(t){let e,n,i;return e=((16711680&t)>>16)/255,n=((65280&t)>>8)/255,i=(255&t)/255,["RGB",e,n,i]}function h(t){let e;return e=0===t?"transparent":s(16777215&t,"#"),e}},3889:function(t,e,n){"use strict";n.r(e),n.d(e,{ApplicationContextImpl:function(){return ai},Aspect:function(){return io},BROWSER_DETECTION:function(){return je},BasicIoCStrategy:function(){return Zn},BrowserInfo:function(){return o},BuiltinIntersectionObserver:function(){return Xi},CLIPBOARD_DATA_TYPES:function(){return so},Color:function(){return ro},DEVICE_DETACTION:function(){return ct},DebounceAsyncTaskExecutor:function(){return p},DebounceTaskExecutor:function(){return hr},DeviceInfo:function(){return i},Disposable:function(){return ri},EDITABLE_ELEMENT_SHORTCUTS:function(){return wi},ExecutionContext:function(){return b},IOC_SHARED_SINGLETON:function(){return en},IOC_SINGLETON:function(){return nn},IoCScope:function(){return rn},KEYBOARD_LOCATION:function(){return pt},KeyCodes:function(){return ci},KeyboardImpl:function(){return xi},KeyboardUtils:function(){return r},Lazy:function(){return Qe},Log_Levels:function(){return s},Logger:function(){return _n},LoggerFactory:function(){return $n},MODULE_LICENSE_INFO:function(){return ao},NoLogger:function(){return kn},PrototypeIoCStrategy:function(){return ni},Proxy:function(){return M},QueuedAsyncTaskExecutor:function(){return A},Reflect:function(){return O},SHARED_STRATEGY:function(){return ei},STANDARD_HTML_ELEMENTS:function(){return co},SYSTEM_DEFAULT_SHORTCUTS:function(){return yi},Shortcut:function(){return vi},ShortcutContextImpl:function(){return Ci},ShortcutEventApportunity:function(){return Pi},ShortcutEventImpl:function(){return Ai},SingletonIoCStrategy:function(){return Xn},Store:function(){return hi},ThrottleAsyncTaskExecutor:function(){return C},ThrottleTaskStatus:function(){return S},ValueStore:function(){return ui},Watcher:function(){return vo},addClass:function(){return rr},appOnly:function(){return Oi},assertThat:function(){return on},attachContextMenuEvent:function(){return Qi},attachKeypressEvent:function(){return ee},browser:function(){return c},checkHighContrast:function(){return wo},colorConvertor:function(){return yo.$j},config:function(){return In},convertFromNumberToHex:function(){return yo.kr},convertFromNumberToJSColor:function(){return yo.Ak},convertFromNumberToRGBA:function(){return yo.dN},copyText:function(){return Gi},createClass:function(){return nr},createClickEvent:function(){return re},createDOM:function(){return po},createDeferred:function(){return d},createFocusEvent:function(){return oe},cssText:function(){return ar},dayjs:function(){return Qr},debounce:function(){return ur},diffRender:function(){return Ao},dom:function(){return ho},doms:function(){return uo},dpr:function(){return Li},eventPath:function(){return Ki},excludeCommandInterceptor:function(){return Ii},excludeEditableElementInterceptor:function(){return Ti},extToMimeType:function(){return Mi},extendOptions:function(){return fr},focusNeedBeOn:function(){return _i},getCanvasPixelRatio:function(){return zi},getDPI:function(){return Hi},getKey:function(){return Yt},getPtPxRatio:function(){return ji},getPxPtRatio:function(){return $i},getTransparentOrColor:function(){return yo.si},getUniqueId:function(){return B},includeCommandInterceptor:function(){return Di},interceptors:function(){return a},invokeAddDestroyHook:function(){return zn},invokeAllInjected:function(){return Yn},invokeDestroy:function(){return Kn},invokeInjected:function(){return Gn},invokePullout:function(){return qn},is360:function(){return Ne},isAliAppBrowser:function(){return J},isAlt:function(){return _t},isAltLeft:function(){return kt},isAltRight:function(){return Mt},isAndroid:function(){return G},isBaidu:function(){return Fe},isBlackBerry:function(){return K},isChrome:function(){return Pe},isChromebook:function(){return at},isChromiumEdge:function(){return Ae},isCtrl:function(){return xt},isCtrlLeft:function(){return Dt},isCtrlRight:function(){return It},isDefined:function(){return pn},isDesktop:function(){return tt},isDocument:function(){return br},isEdge:function(){return ye},isEditable:function(){return mr},isEditableElement:function(){return Ri},isElement:function(){return Ar},isEnd:function(){return jt},isEnter:function(){return Bt},isFirefox:function(){return Ee},isFullscreen:function(){return bo},isFunction:function(){return gn},isGecko:function(){return Ce},isHTMLElement:function(){return wr},isHome:function(){return Ht},isHuawei:function(){return it},isHuaweiBrowser:function(){return Oe},isIE:function(){return ge},isIE10:function(){return me},isIE10Compact:function(){return He},isIE8:function(){return Be},isIE8Compact:function(){return Ve},isIE9Compact:function(){return Ue},isIEAtLeast11:function(){return ve},isIOS:function(){return j},isIOSChrome:function(){return Le},isIPAD:function(){return W},isIPHONE:function(){return $},isIPOD:function(){return Y},isInCloseRange:function(){return yn},isInLeftCloseRange:function(){return wn},isInOpenRange:function(){return An},isInRightCloseRange:function(){return bn},isInteger:function(){return cn},isKey:function(){return Wt},isKindle:function(){return z},isLazy:function(){return Jn},isLiebao:function(){return ke},isLinux:function(){return rt},isMac:function(){return H},isMacOS:function(){return st},isMatch:function(){return St},isMaxthon:function(){return xe},isMeta:function(){return Ot},isMetaLeft:function(){return Lt},isMetaRight:function(){return Nt},isMiPad:function(){return et},isMiuiBrowser:function(){return Me},isMobile:function(){return Q},isNumber:function(){return sn},isNumberInRange:function(){return un},isNumpadEnter:function(){return Ut},isOpera:function(){return we},isQQ:function(){return Ie},isQuirksMode:function(){return De},isRunningInBrowser:function(){return Zi},isRunningInWorker:function(){return Ji},isSafari:function(){return Se},isSamePoint:function(){return fn},isShift:function(){return Rt},isShiftLeft:function(){return Tt},isShiftPressedKey:function(){return Qt},isShiftRight:function(){return Ft},isSougou:function(){return Te},isSpace:function(){return $t},isSquaredNumber:function(){return ln},isStandardEnter:function(){return Vt},isString:function(){return mn},isTablet:function(){return X},isTeamsAndroid:function(){return Z},isTouchDevice:function(){return V},isUC:function(){return _e},isValidNumber:function(){return an},isValidRange:function(){return vn},isValidRotationAngle:function(){return hn},isWeChat:function(){return Re},isWebOS:function(){return q},isWebkit:function(){return be},isWindowObject:function(){return yr},isWindows:function(){return ot},isXiaomi:function(){return nt},keyCodeToKey:function(){return Zt},keyboardStatus:function(){return ne},match:function(){return Pt},matchers:function(){return Et},moduleType:function(){return _o},noop:function(){return u},notImplemented:function(){return On},observeResize:function(){return Pr},onTap:function(){return $e},preventDefaultInterceptor:function(){return Fi},preventFastClickByKeydown:function(){return qe},removeClass:function(){return or},setAttrs:function(){return cr},setLogLevel:function(){return Tn},setThemeColor:function(){return Oo},simulateKey:function(){return te},singletonCreator:function(){return ir},standardColorAsARGBNumber:function(){return yo.YS},stopPropagationOnShortcutEvent:function(){return ze},strLogLevel2Num:function(){return Rn},toggleClassByFlag:function(){return sr},toggleLogOff:function(){return Fn},unsupported:function(){return Cr},useJQuery:function(){return no}});var i={};n.r(i),n.d(i,{DEVICE_DETACTION:function(){return ct},isAliAppBrowser:function(){return J},isAndroid:function(){return G},isBlackBerry:function(){return K},isChromebook:function(){return at},isDesktop:function(){return tt},isHuawei:function(){return it},isIOS:function(){return j},isIPAD:function(){return W},isIPHONE:function(){return $},isIPOD:function(){return Y},isKindle:function(){return z},isLinux:function(){return rt},isMac:function(){return H},isMacOS:function(){return st},isMiPad:function(){return et},isMobile:function(){return Q},isTablet:function(){return X},isTeamsAndroid:function(){return Z},isTouchDevice:function(){return V},isWebOS:function(){return q},isWindows:function(){return ot},isXiaomi:function(){return nt}});var r={};n.r(r),n.d(r,{KEYBOARD_LOCATION:function(){return pt},getKey:function(){return Yt},isAlt:function(){return _t},isAltLeft:function(){return kt},isAltRight:function(){return Mt},isCtrl:function(){return xt},isCtrlLeft:function(){return Dt},isCtrlRight:function(){return It},isEnd:function(){return jt},isEnter:function(){return Bt},isHome:function(){return Ht},isKey:function(){return Wt},isMatch:function(){return St},isMeta:function(){return Ot},isMetaLeft:function(){return Lt},isMetaRight:function(){return Nt},isNumpadEnter:function(){return Ut},isShift:function(){return Rt},isShiftLeft:function(){return Tt},isShiftPressedKey:function(){return Qt},isShiftRight:function(){return Ft},isSpace:function(){return $t},isStandardEnter:function(){return Vt},keyCodeToKey:function(){return Zt},match:function(){return Pt},matchers:function(){return Et},simulateKey:function(){return te}});var o={};n.r(o),n.d(o,{BROWSER_DETECTION:function(){return je},is360:function(){return Ne},isBaidu:function(){return Fe},isChrome:function(){return Pe},isChromiumEdge:function(){return Ae},isEdge:function(){return ye},isFirefox:function(){return Ee},isGecko:function(){return Ce},isHuaweiBrowser:function(){return Oe},isIE:function(){return ge},isIE10:function(){return me},isIE10Compact:function(){return He},isIE8:function(){return Be},isIE8Compact:function(){return Ve},isIE9Compact:function(){return Ue},isIEAtLeast11:function(){return ve},isIOSChrome:function(){return Le},isLiebao:function(){return ke},isMaxthon:function(){return xe},isMiuiBrowser:function(){return Me},isOpera:function(){return we},isQQ:function(){return Ie},isQuirksMode:function(){return De},isSafari:function(){return Se},isSougou:function(){return Te},isUC:function(){return _e},isWeChat:function(){return Re},isWebkit:function(){return be}});var s={};n.r(s),n.d(s,{LEVEL_DEBUG:function(){return Sn},LEVEL_ERROR:function(){return xn},LEVEL_INFO:function(){return Cn},LEVEL_WARN:function(){return En}});var a={};n.r(a),n.d(a,{excludeCommandInterceptor:function(){return Ii},excludeEditableElementInterceptor:function(){return Ti},focusNeedBeOn:function(){return _i},includeCommandInterceptor:function(){return Di},preventDefaultInterceptor:function(){return Fi}});var c={};function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function h(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(c),n.d(c,{copyText:function(){return Gi},dpr:function(){return Li},eventPath:function(){return Ki},getCanvasPixelRatio:function(){return zi},getDPI:function(){return Hi},getPtPxRatio:function(){return ji},getPxPtRatio:function(){return $i},isRunningInBrowser:function(){return Zi},isRunningInWorker:function(){return Ji}});n(3964),n(6409),n(4043);var u=()=>{};function d(){return new(function(){return function(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}())}function f(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let p=function(){function t(t=30,e=!1){this.lastTaskPromise=Promise.resolve(),this.interval=t,this.pending=!1,this.leading=e,this.flag=0,this.cancelLast=u,this.currentTaskFn=u}var e=t.prototype;return e.invokeTask=function(t){const e=t();return e instanceof Promise?e.finally((()=>{this.pending=!1})):(this.pending=!1,Promise.resolve(e))},e.exec=function(t,e=[],n=null){this.flag++,this.currentTaskFn=t.bind.apply(t,[n].concat(f(h,e)));const i=this.currentTaskFn;if(this.pending)return this.lastTaskPromise;this.leading&&(this.lastTaskPromise=this.lastTaskPromise.finally((()=>i())),this.currentTaskFn=u);const r=d(),o=()=>{this.pending=!0,this.lastTaskPromise=this.lastTaskPromise.finally((()=>{const t=setTimeout((()=>{if(this.flag>0)this.flag=0,clearTimeout(t),o();else{let t=this.currentTaskFn();t instanceof Promise?t=t.finally((()=>{this.pending=!1})):this.pending=!1,r.resolve(t)}}),this.interval)}))};return o(),r.promise},e.waitForLastTask=function(t){return this.lastTaskPromise||Promise.resolve(t)},e.cancel=function(){this.currentTaskFn=u},e.destroy=function(){this.cancel()},t}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function m(t){var e=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==g(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===g(e)?e:String(e)}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function y(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}n(752),n(6265);function w(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let b=function(){function t(t){this.task=t,this.cancelled=!1,this.defer=d()}var e=t.prototype;return e.cancel=function(){this.defer.resolve(),this.cancelled=!0},e.isCancelled=function(){return this.cancelled},e.reject=function(t){this.defer.reject(t)},e.resolve=function(t){this.defer.resolve(t)},y(t,[{key:"promise",get:function(){return this.defer.promise}}]),t}(),A=function(){function t(){this.insertions=[],this.executions=[],this.isRunning=!1}var e=t.prototype;return e.notifyExecute=function(){if(this.isRunning)return;this.isRunning=!0;const t=()=>{var e;const n=this.getAndPopNextExecution();if(!n)return void(this.isRunning=!1);let i=null===(e=this.executing)||void 0===e?void 0:e.promise;const r=()=>{if(this.executing=n,n.isCancelled())t();else{const e=n.task,i=()=>{try{return e()}catch(t){return Promise.reject(t)}};Promise.resolve(i()).then((t=>{n.resolve(t)}),(t=>{n.reject(t)})).finally((()=>{t()}))}};i?i.then(r,r):r()};t()},e.execTasks=function(t,e=!1){if(0===t.length)return this.waitForCurrentRunningTasks();const n=t.map((t=>new b(P(t))));var i,r;e?(i=this.executions).unshift.apply(i,w(h,n)):(r=this.executions).push.apply(r,w(h,n));const o=n[n.length-1].promise;return this.notifyExecute(),o},e.execInverse=function(t,e=1,n){return this.exec(t,e,n,!0)},e.exec=function(t,e=1,n,i=!1){let r;r="number"==typeof e?Array(e).fill(0).map(((t,e)=>[e])):e;const o=r.map((e=>t.bind.apply(t,[n].concat(w(h,e)))));return this.execTasks(o,i)},e.insert=function(...t){var e;const n=t.map(P).map((t=>new b(t)));(e=this.insertions).push.apply(e,w(h,n));const i=Promise.all(n.map((t=>t.promise)));return this.notifyExecute(),i},e.resume=function(){},e.cancel=function(){var t;this.insertions.forEach((t=>{t.cancel()})),this.executions.forEach((t=>{t.cancel()})),null===(t=this.executing)||void 0===t||t.cancel()},e.waitForCurrentRunningTasks=function(){const t=this.insertions.concat(this.executions);return this.executing&&t.push(this.executing),Promise.all(t.map((t=>t.promise)))},e.waitUntilQuiet=function(t=100){return new Promise((e=>{const n=()=>{setTimeout((()=>{this.executions.length>0?n():e(this.waitForCurrentRunningTasks())}),t)};n()}))},e.getRunningTaskCount=function(){return this.executions.filter((t=>!t.isCancelled())).length},e.getAndPopNextExecution=function(){let t;return this.insertions.length>0?(t=this.insertions[0],this.insertions.shift()):this.executions.length>0&&(t=this.executions[0],this.executions.shift()),t},t}();function P(t){return"function"==typeof t?t:t.context?Array.isArray(t.args)?(e=t.task).bind.apply(e,[t.context].concat(w(h,t.args))):t.task.bind(t.context):t.task;var e}var S;!function(t){t.IDLE="idle",t.RUNNING="running",t.CANCELLED="cancelled"}(S||(S={}));let C=function(){function t(t,e=!1){this.interval=t,this.retainLastTask=e,this.status=S.IDLE,this.lastCompleteTime=0,this.lastTaskPromise=Promise.resolve()}var e=t.prototype;return e.exec=function(t,e,n){const i=()=>{if(this.status===S.CANCELLED)return void(this.status=S.IDLE);this.status=S.RUNNING;const i=t.apply(n,e||[])||Promise.resolve();this.lastTaskPromise=i.finally((()=>{this.lastCompleteTime=Date.now(),this.status!==S.CANCELLED&&(this.status=S.IDLE)}))},r=Date.now();switch(this.status){case S.IDLE:if(r-this.lastCompleteTime>=this.interval){const t=()=>(i(),this.lastTaskPromise);return this.lastTaskPromise.then(t,t)}case S.CANCELLED:}return this.retainLastTask?new Promise((t=>{clearTimeout(this.retainTaskTimmerId);const e=this.interval-(Date.now()-this.lastCompleteTime)%this.interval;this.retainTaskTimmerId=setTimeout((()=>{i(),t(this.lastTaskPromise)}),e)})):this.lastTaskPromise},e.waitForLastTask=function(){return this.lastTaskPromise},e.cancel=function(){this.status=S.CANCELLED},e.isRunning=function(){return this.status===S.RUNNING},t}();function E(){return E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},E.apply(this,arguments)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function D(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,x(t,e)}n(278),n(6544);Object.getOwnPropertyDescriptors||(Object.getOwnPropertyDescriptors=function(t){return Object.getOwnPropertyNames(t).reduce(((e,n)=>(e[n]=Object.getOwnPropertyDescriptor(t,n),e)),{})});const I=["isProxy","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","apply","arguments","bind","call","caller",Symbol.hasInstance,"valueOf","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__"],R=["toSource","watch","unwatch"];function T(t,e){try{delete t[e]}catch(n){t[e]=void 0}}const F=I.concat(["length","name","prototype"]),_="origin",k="$proxy_class_symbol_"+Date.now().toString(32);let M=function(){function t(){}return t.getNoopConstructor=function(t){function e(){}return e.prototype=Object.create(t.prototype),e},t.getProxyClass=function(t,e,n=t,i=!1,r=(t=>!0)){let o;if(i){o=function(t){function e(e){var n;return(n=t.call(this)||this)[_]=e,n}return D(e,t),e}(this.getNoopConstructor(t)),o[k]=!0}else{o=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e}("function"==typeof n?n:this.getNoopConstructor(t));const e=this.getStaticDescriptors(t);Object.defineProperties(o,e),o[k]=!0}const s=this.getClassDescriptors(t.prototype);if("function"==typeof e)for(const t in s){let n=s[t];if(n&&r(t,n)){if("function"==typeof n.value){const r=n.value;n.value=i?function(...n){return e.call(this,this[_],r,n,t,"method")}:function(...n){return e.call(this,this,r,n,t,"method")}}if("function"==typeof n.get){const r=n.get;n.get=i?function(){return r.call(this[_])}:function(){return e.call(this,this,null,[],t,"getter")}}if("function"==typeof n.set){const r=n.set;n.set=i?function(t){r.call(this[_],t)}:function(n){return e.call(this,this,null,[n],t,"setter")}}}}return Object.defineProperties(o.prototype,s),o},t.isProxyClass=function(t){return"function"==typeof t&&t.hasOwnProperty(k)},t.getProxyObject=function(t,e,n){if(null==t)throw new Error("Cannot proxy a null or undefined object");const i=t.constructor;return new(this.getProxyClass(i,e,i,!0,n))(t)},t.getStaticDescriptors=function(t,e=F){const n=function t(e){if(e===Object||e===Function||!e)return{};const n=Object.getPrototypeOf(e),i=t(n);return E(i,Object.getOwnPropertyDescriptors(e))}(t);return e.forEach((t=>{T(n,t)})),R.forEach((e=>{t[e]===Function.prototype[e]&&T(n,e)})),n},t.getClassDescriptors=function(t,e=I){const n=function t(e){if("object"!=typeof e||null===e)return{};const n=Object.getPrototypeOf(e),i=n===e?{}:t(n);return E(i,Object.getOwnPropertyDescriptors(e))}(t);return e.forEach((t=>{T(n,t)})),R.forEach((e=>{t[e]===Object.prototype[e]&&T(n,e)})),n},t}();let O=function(){function t(){}return t.isSubClassOf=function(t,e){return"function"==typeof t&&"function"==typeof e&&t.prototype instanceof e},t.isOverrided=function(t,e,n){let i=e.prototype;for(;;){const e=i.constructor;if(!e||e===t||e===Object)return!1;if(Object.prototype.hasOwnProperty.call(i,n))return!M.isProxyClass(e);i=Object.getPrototypeOf(i)}},t.mixin=function(t,e){let n=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e}(t);const i=M.getStaticDescriptors(e);Object.defineProperties(n,i);const r=M.getClassDescriptors(e.prototype);return n.prototype=Object.create(n.prototype,r),n},t}();const L="unique_"+Date.now();var N=0;var B=function(t){return[t||"",L,N++].join("_")};const V=(()=>{if("undefined"==typeof window)return!1;var t=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||navigator.maxTouchPoints||window.DocumentTouch&&document instanceof DocumentTouch)||function(t){return!!window.matchMedia&&window.matchMedia(t).matches}(["(",t.join("touch-enabled),("),"heartz",")"].join(""))})(),U=navigator.userAgent.toLowerCase(),H=/macintosh|mac os x/.test(U),j=/ipad|iphone|ipod/.test(U),$=/iphone/.test(U),W=/ipad/.test(U),Y=/ipod/.test(U),G=/android/.test(U),K=/blackberry/.test(U),q=/webos/.test(U),z=/silk|kindle/.test(U),J=/aliapp/.test(U),Z=/teamsmobile-android/.test(U),X=!J&&/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(U),Q=(!X||Z)&&(/mobile/.test(U)||j||G||K||q||z),tt=!(Q||X||G||$||W||Y||z||q),et=/(MI(.*|\s*)PAD).*/i.test(U),nt=!et&&/MI(\s+|\d+?|HM|xiaomi).*/i.test(U),it=/HUAWEI/i.test(navigator.userAgent),rt=/Linux/i.test(U),ot=!rt&&/Windows(\s+NT)?/i.test(U),st=/MacIntosh|(mac os)/i.test(U),at=/(cros\s|chromebook)/i.test(U),ct={mac:H,ios:j,iphone:$,ipad:W,ipod:Y,android:G,blackberry:K,webos:q,kindle:z,tablet:X,mobile:Q,desktop:tt,xiaomi:nt,huawei:it,touch:V,linux:rt,windows:ot,macos:st,chromebook:at};function lt(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const ht=1,ut=2,dt=3,ft=0;var pt;!function(t){t[t.LEFT=KeyboardEvent.DOM_KEY_LOCATION_LEFT]="LEFT",t[t.RIGHT=KeyboardEvent.DOM_KEY_LOCATION_RIGHT]="RIGHT",t[t.STANDARD=KeyboardEvent.DOM_KEY_LOCATION_STANDARD]="STANDARD",t[t.NUMPAD=KeyboardEvent.DOM_KEY_LOCATION_NUMPAD]="NUMPAD"}(pt||(pt={}));let gt=function(){function t(t){this.isMatch=t}return t.prototype.match=function(){return this.isMatch},t}(),mt=function(){function t(t){this.keys=t}return t.prototype.match=function(t){return this.keys.some((e=>"string"==typeof e?Wt(t,e):"boolean"==typeof e?e:e.match(t)))},t}(),vt=function(){function t(t){this.callback=t}return t.prototype.match=function(t){return this.callback(t)},t}(),yt=function(){function t(t){this.keys=t}return t.prototype.match=function(t){return this.keys.every((e=>"string"==typeof e?Wt(t,e):"boolean"==typeof e?e:e.match(t)))},t}(),wt=function(){function t(t){this.key=t}return t.prototype.match=function(t){return Wt(t,this.key)},t}();KeyboardEvent.prototype.getModifierState||(KeyboardEvent.prototype.getModifierState=function(t){switch(t){case"Control":return this.ctrlKey;case"Shift":return this.shiftKey;case"Alt":return this.altKey;case"Meta":return this.metaKey}return!1});let bt=function(){function t(t,e={}){this.event=t,this.detectors=e,this.interrupted=!1}var e=t.prototype;return e.switchers=function(t){return this.ctrl(t).shift(t).meta(t).alt(t)},e.ctrl=function(t){return Xt(t)?this.detectors.control=()=>this.event.getModifierState("Control")===t:delete this.detectors.control,this},e.filter=function(t){return"function"==typeof t&&(this.detectors[B("filter")]=()=>t.call(this,this.event)),this},e.shift=function(t){return Xt(t)?this.detectors.shift=()=>this.event.getModifierState("Shift")===t:delete this.detectors.shift,this},e.capsLock=function(t){return Xt(t)?this.detectors.capsLock=()=>this.event.getModifierState("CapsLock")===t:delete this.detectors.capsLock,this},e.meta=function(t){return Xt(t)?this.detectors.meta=()=>this.event.metaKey===t:delete this.detectors.meta,this},e.alt=function(t){return Xt(t)?this.detectors.alt=()=>this.event.getModifierState("Alt")===t:delete this.detectors.alt,this},e.mod=function(t){return H?this.meta(t):this.ctrl(t)},e.location=function(t){return this.detectors.location=()=>Kt(this.event)===t,this},e.standard=function(){return this.location(pt.STANDARD)},e.numpad=function(){return this.location(pt.NUMPAD)},e.left=function(){return this.location(pt.LEFT)},e.right=function(){return this.location(pt.RIGHT)},e.run=function(t){if(this.passed()){!1===t(this.event)&&(this.interrupted=!0)}return this.clone()},e.key=function(...t){let e=new mt(t.map((t=>{switch(typeof t){case"string":return Et.key(t);case"boolean":return new gt(t)}return t})));return this.detectors.keys=()=>e.match(this.event),this},e.when=function(t,e){var n;return Array.isArray(t)?(n=this.clone()).key.apply(n,lt(h,t)).run(e):this.clone().key(t).run(e)},e.clone=function(){return this.interrupted?new At(this.event,{}):new t(this.event,E({},this.detectors))},e.passed=function(){return!this.interrupted&&!Object.values(this.detectors).some((t=>!t()))},t}(),At=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.switchers=function(){return this},n.ctrl=function(){return this},n.shift=function(){return this},n.capsLock=function(){return this},n.meta=function(){return this},n.alt=function(){return this},n.location=function(){return this},n.standard=function(){return this},n.numpad=function(){return this},n.left=function(){return this},n.right=function(){return this},n.run=function(){return this},n.key=function(){return this},n.when=function(){return this},e}(bt);function Pt(t){return new bt(t)}function St(t,e){const n=new bt(t);let i=!1;return n.when(e,(()=>{i=!0})),i}const Ct=t=>new wt(t),Et={or:(...t)=>new mt(t),key:Ct,and:(...t)=>new yt(t),Space:new vt($t),Home:new vt(Ht),End:new vt(jt),Enter:new vt(Bt),StandardEnter:new vt(Vt),NumpadEnter:new vt(Ut),Tab:Ct("Tab"),CapsLock:Ct("CapsLock"),PageUp:Ct("PageUp"),PageDown:Ct("PageDown"),ArrowUp:Ct("ArrowUp"),ArrowDown:Ct("ArrowDown"),ArrowLeft:Ct("ArrowLeft"),ArrowRight:Ct("ArrowRight"),BackSpace:Ct("Backspace"),Delete:Ct("Delete"),Escape:Ct("Escape"),F1:Ct("F1"),F2:Ct("F2"),F3:Ct("F3"),F4:Ct("F4"),F5:Ct("F5"),F6:Ct("F6"),F7:Ct("F7"),F8:Ct("F8"),F9:Ct("F9"),F10:Ct("F10"),F11:Ct("F11"),F12:Ct("F12")};function xt(t){return Dt(t)||It(t)}function Dt(t){return Gt(t,"Control",ht)}function It(t){return Gt(t,"Control",ut)}function Rt(t){return Tt(t)||Ft(t)}function Tt(t){return Gt(t,"Shift",ht)}function Ft(t){return Gt(t,"Shift",ut)}function _t(t){return kt(t)||Mt(t)}function kt(t){return Gt(t,"Alt",ht)}function Mt(t){return Gt(t,"Alt",ut)}function Ot(t){return Lt(t)||Nt(t)}function Lt(t){return Gt(t,"Meta",ht)}function Nt(t){return Gt(t,"Meta",ut)}function Bt(t){return Vt(t)||Ut(t)}function Vt(t){return Gt(t,"Enter",ft)}function Ut(t){return Gt(t,"Enter",dt)}function Ht(t){return Gt(t,"Home",ft)}function jt(t){return Gt(t,"End",ft)}function $t(t){return Wt(t," ")}function Wt(t,e){return Yt(t)===e}function Yt(t){return qt(t)?t.key:Zt(t.keyCode,t.shiftKey)}function Gt(t,e,n){if(void 0!==n&&Kt(t)!==n)return!1;let i=t.key;return qt(t)||(i=Zt(t.keyCode,t.shiftKey)),i===e}function Kt(t){return void 0===t.location?t.keyLocation:t.location}function qt(t){return void 0!==t.key}const zt={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",189:"_",187:"+",219:"{",220:"|",221:"}",186:":",222:'"',188:"<",190:">",191:"?",192:"~"},Jt={192:"`",191:"/",190:".",189:"-",188:",",220:"\\",222:"'",186:";",221:"]",219:"[",187:"=",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",27:"Escape",9:"Tab",20:"CapsLock",16:"Shift",17:"Control",91:"Meta",18:"Alt",32:" ",33:"PageUp",34:"PageDown",38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",13:"Enter",8:"Backspace",46:"Delete",45:"Insert",35:"End",36:"Home",144:"NumLock",111:"/",106:"*",109:"-",107:"+",110:".",96:0,97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9};function Zt(t,e){if(t>=65&&t<=90){const n=String.fromCharCode(t);return e?n.toUpperCase():n}return t>=48&&t<=57?e?zt[t]:String.fromCharCode(t):e?zt[t]:Jt[t]}function Xt(t){return"boolean"==typeof t}function Qt(t){return"string"==typeof zt[t.keyCode]&&t.shiftKey}function te(t,e,n,i={ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1}){const{ctrlKey:r,shiftKey:o,altKey:s,metaKey:a}=i,c=document.createEvent("KeyboardEvent");(c.initKeyboardEvent?c.initKeyboardEvent:c.initEvent).call(c,e,!0,!0,window,r,s,o,a,n,n,0),t.dispatchEvent(c)}function ee(t,e,n,i){let r=!1;const o=t=>{!r&&St(t,n)&&(r=!0)},s=t=>{r&&St(t,n)&&(r=!1,e(t))},a=t=>{(t instanceof FocusEvent||St(t,n))&&(r=!1)};return t.addEventListener("keydown",o,i),t.addEventListener("keyup",s,i),document.addEventListener("keyup",a),window.addEventListener("blur",a),()=>{t.removeEventListener("keydown",o,i),t.removeEventListener("keyup",s,i),document.removeEventListener("keyup",a),window.removeEventListener("blur",a)}}const ne=new(function(){function t(){this._ctrl=!1,this._shift=!1,this._win=!1,this._alt=!1,this._capsLock=!1,this._bindEvent()}return t.prototype._bindEvent=function(){window.addEventListener("keydown",(t=>{this._ctrl=t.ctrlKey,this._shift=t.shiftKey,this._alt=t.altKey,this._win=t.metaKey,this._capsLock=!!t.getModifierState&&t.getModifierState("CapsLock")}),!1),window.addEventListener("keyup",(t=>{this._shift=16!==t.keyCode&&this._shift,this._alt=18!==t.keyCode&&this._alt,this._ctrl=17!==t.keyCode&&this._ctrl,this._win=91!==t.keyCode&&this._win,this._capsLock=20!==t.keyCode&&this._capsLock}),!1),window.addEventListener("mousemove",(t=>{this._ctrl=t.ctrlKey,this._shift=t.shiftKey,this._alt=t.altKey,this._win=t.metaKey,this._capsLock=!!t.getModifierState&&t.getModifierState("CapsLock")}),{capture:!0}),window.addEventListener("wheel",(t=>{this._ctrl=t.ctrlKey,this._shift=t.shiftKey,this._alt=t.altKey,this._win=t.metaKey,this._capsLock=!!t.getModifierState&&t.getModifierState("CapsLock")}),{capture:!0})},y(t,[{key:"isCtrl",get:function(){return this._ctrl}},{key:"isCtrlDown",get:function(){return this._ctrl}},{key:"isShift",get:function(){return this._shift}},{key:"isShiftDown",get:function(){return this._shift}},{key:"isWin",get:function(){return this._win}},{key:"isWinDown",get:function(){return this._win}},{key:"isAlt",get:function(){return this._alt}},{key:"isAltDown",get:function(){return this._alt}},{key:"isCapsLock",get:function(){return this._capsLock}}]),t}());var ie=ne;function re(t){const e=document.createEvent("MouseEvent"),{screenX:n,screenY:i,clientX:r,clientY:o,button:s,relatedTarget:a}=t instanceof MouseEvent?t:{screenX:0,screenY:0,clientX:0,clientY:0,button:0,relatedTarget:null};return e.initMouseEvent("click",(null==t?void 0:t.bubbles)||!1,(null==t?void 0:t.cancelable)||!1,window,(null==t?void 0:t.detail)||-1,n,i,r,o,(null==t?void 0:t.ctrlKey)||ie.isCtrl,(null==t?void 0:t.altKey)||ie.isAlt,(null==t?void 0:t.shiftKey)||ie.isShift,(null==t?void 0:t.metaKey)||ie.isWin,s||0,a),e.isFake=!0,Object.defineProperties(e,{srcElement:{get:()=>null==t?void 0:t.srcElement},fromElement:{get:()=>null==t?void 0:t.fromElement},target:{get:()=>null==t?void 0:t.target},toElement:{get:()=>null==t?void 0:t.toElement}}),e}function oe(t){const e=document.createEvent("FocusEvent");return e.initEvent("focus",!0,!1),Object.defineProperties(e,{target:{get:()=>t}}),e}const se=navigator.userAgent.toLowerCase(),ae=/opera|opr/.test(se),ce=/msie/.test(se),le=/trident/.test(se),he=/\sapplewebkit\//.test(se),ue=/chrome/.test(se),de=/safari/.test(se),fe=/firefox/.test(se),pe=/edg\//.test(se),ge=(le||ce)&&!ae&&"msSaveBlob"in navigator,me=ge&&(()=>{const t=se.match(/msie ([\d\.]+)/);return!!t&&10===parseInt(t[1])})(),ve=!ce&&le&&!ae,ye=se.indexOf("edge")>-1,we=ae,be=he,Ae=!we&&ue&&!!window.chrome&&pe,Pe=/crios/.test(se)||!we&&ue&&!!window.chrome&&!pe,Se=!/huawei/.test(se)&&!we&&de&&!ue,Ce="Gecko"==navigator.product&&!be&&!we,Ee=!Pe&&!we&&!Se&&fe,xe=/maxthon/.test(se),De="BackCompact"==document.CompactMode,Ie=/tencenttraveler/.test(se)||/qqbrowser/.test(se),Re=/wechat/.test(se),Te=/metasr/.test(se)||/sogou/.test(se),Fe=/baidubrowser/.test(se),_e=/ucbrowser/.test(se),ke=/liebao/.test(se),Me=/miuibrowser/.test(se),Oe=/huaweibrowser/.test(se)||/huaweialp/.test(se),Le=/crios/.test(se),Ne=(()=>{if(Ie||_e||Te||Me||ke||xe)return!1;if(-1===se.indexOf("chrome"))return!1;const t=function(t,e){const n=navigator.mimeTypes;for(const i in n)if(n[i][t]==e)return!0;return!1}("type","application/vnd.chromium.remoting-viewer");return!window.chrome||t})(),Be=!!document.documentMode&&document.documentMode<8,Ve=8==document.documentMode,Ue=9==document.documentMode,He=10==document.documentMode,je={ie:ge,ieAtLeast11:ve,edge:ye,"chromium-edge":Ae,opera:we,webkit:be,chrome:Pe,safari:Se,gecko:Ce,firefox:Ee,maxthon:xe,quirksMode:De,"quirks-mode":De,qq:Ie,wechat:Re,sougou:Te,baidu:Fe,liebao:ke,uc:_e,miui:Me,huawei:Oe,360:Ne};function $e(t){const{target:e,onDoubleTap:n,onSingleTap:i,interval:r=300,preventDefault:o=!1,stopPropagation:s=!1}=t;e instanceof HTMLElement&&(e.style.cssText+="\n                    touch-action: none;\n                ");let a=0,c=null;function l(t){a=Date.now(),c=[t.clientX,t.clientY]}e.addEventListener("pointerdown",l);let h,u=0,d=0,f=0;function p(t){if(a=Date.now()-a,clearTimeout(h),"function"==typeof o?o(t)&&t.preventDefault():o&&t.preventDefault(),"function"==typeof s?s(t)&&t.stopPropagation():s&&t.stopPropagation(),0===f)if(1===u){u=0;const i=Date.now();i-d<=r&&(n.call(e,We(t,r)),d=0),d=i}else d=Date.now(),u=1,new Promise((t=>{h=setTimeout(t,r)})).then((()=>{if(u=0,d=0,i&&a<r&&c){Math.sqrt(Math.pow(Math.abs(c[0]-t.clientX),2)+Math.pow(Math.abs(c[1]-t.clientY),2))<5&&i.call(e,We(t,r))}}))}let g="pointerup";(j&&Pe||void 0===window.PointerEvent)&&(g="mouseup");const m=t=>{f=t instanceof TouchEvent?t.touches.length:0};return e.addEventListener("touchend",m),e.addEventListener(g,p),()=>{e.removeEventListener(g,p),e.removeEventListener("touchend",m),e.removeEventListener("pointerdown",l)}}function We(t,e){return{angle:0,deltaTime:e,deltaX:0,deltaY:0,direction:1,distance:0,eventType:4,isFinal:!0,isFirst:!1,maxPointers:1,offsetDirection:1,center:{x:t.clientX,y:t.clientY},changedPointers:[t],overallVelocity:0,overallVelocityX:0,overallVelocityY:0,pointerType:"mouse",pointers:[],preventDefault:()=>t.preventDefault(),stopPropagation:()=>t.stopPropagation(),rotation:0,scale:1,srcEvent:t,tapCount:2,target:t.target,timeStamp:t.timeStamp,type:"doubletap",velocity:0,velocityX:0,velocityY:0}}const{or:Ye,Enter:Ge,Space:Ke}=Et;function qe(t){let e=!1;const n=t=>{St(t,Ye(Ge,Ke))&&(e&&t.preventDefault(),e=!0)},i=t=>{(t instanceof FocusEvent||St(t,Ye(Ge,Ke)))&&(e=!1)};return document.addEventListener("keyup",i,!0),window.addEventListener("blur",i),t.addEventListener("keydown",n,{capture:!0}),()=>{document.removeEventListener("keyup",i,!0),window.removeEventListener("blur",i),t.removeEventListener("keydown",n,{capture:!0})}}function ze(t,e,n,i){const r=t=>{St(t,n)&&t.stopPropagation()};return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}const Je={},Ze="__lazy__";let Xe=function(){function t(){}return t.properties=function(e,n={}){for(const i in n){const r=n[i];"function"==typeof r&&t.property(e,i,r)}},t.property=function(e,n,i){let r=Je;Object.getOwnPropertyDescriptor(e,Ze)||Object.defineProperty(e,Ze,{value:{},enumerable:!1,configurable:!1});const o=e[Ze][n]||{};e[Ze][n]=o,o.initialized=!1;let s=!1;Object.defineProperty(e,n,{get(){if(!o.initialized){if(s)throw new Error("The lazy property is not initialized and cannot be accessed at this time");s=!0;try{r=i()}catch(t){throw s=!1,t}o.initialized=!0,Promise.resolve().then((()=>{(o.callbacks||[]).forEach((t=>{t(r)}))})),s=!1}return r},enumerable:!0,configurable:!0});const a=()=>{t.release(e,n)};return"function"===e.addDestroyHook&&targeet.addDestroyHook(a),a},t.value=function(e){const n="lazy_variable_"+Math.ceil(Math.random()*Date.now()).toString(34),i={};return t.property(i,n,e),{reset:()=>t.reset(i,n),get value(){return i[n]},get initialized(){return t.isPropertyIntialized(i,n)}}},t.loadProperty=function(t,e){const n=Object.getOwnPropertyDescriptor(t,e);if(n&&n.get)return n.get.call(t)},t.release=function(t,e){Ze in t&&delete t[Ze][e],Object.defineProperty(t,e,{get(){},enumerable:!1,configurable:!0})},t.reset=function(t,e){const n=t[Ze];if(n){const t=n[e];t&&(t.initialized=!1)}},t.isPropertyIntialized=function(t,e){const n=t[Ze];return!!(n&&n[e]&&n[e].initialized)},t.hasProperty=function(t,e){const n=t[Ze];return!(!n||!(e in n))},t.notNullProperty=function(e,n,i){return t.property(e,n,(()=>{const r=i();return null==r&&t.reset(e,n),r}))},t.get=function(e,n,i){t.isPropertyIntialized(e,n)&&i(e[n])},t.onInitialized=function(e,n,i){if(t.isPropertyIntialized(e,n))return i(e[n]),()=>{};const r=e[Ze][n]||{};return e[Ze][n]=r,r.callbacks=r.callbacks||[],r.callbacks.push(i),()=>{const t=r.callbacks.indexOf(i);t>-1&&r.callbacks.splice(t,1)}},t}();var Qe=Xe;function tn(t){const e=t.services,n=t.inject||e;if("function"==typeof n){const e=n.call(t);return Array.isArray(e)?e.reduce(((t,e,n)=>(t["service"+n]=e,t)),{}):"function"==typeof e?{service0:e}:e}return{}}const en="SHARED-SINGLETON",nn="SINGLETON";var rn;function on(t,e){if(!t)throw new Error(e)}function sn(t){return"number"==typeof t}function an(t){return sn(t)&&isFinite(t)}function cn(t){return sn(t)&&Math.floor(t)===t}function ln(t){return Math.pow(Math.floor(t),2)!==t}function hn(t){return(t%360+360)%360%90==0}function un(t,e,n,i=!1,r=!1){return(i?t>=e:t>e)&&(r?t<=n:t<n)}function dn(t,e,n=.01){return Math.abs(t-e)<n}function fn(t,e,n=.01){return dn(t.x,e.x)&&dn(t.y,e.y)}function pn(t){return null!=t}function gn(t){return"function"==typeof t}function mn(t){return"string"==typeof t}function vn(t,e,n=!1){return n?t<=e:t<e}function yn(t,e,n){return!!sn(e)&&(!!sn(n)&&(!(e>n)&&(t>=e&&t<=n)))}function wn(t,e,n){return!!sn(e)&&(!!sn(n)&&(!(e>n)&&(t>=e&&t<n)))}function bn(t,e,n){return!!sn(e)&&(!!sn(n)&&(!(e>n)&&(t>e&&t<=n)))}function An(t,e,n){return!!sn(e)&&(!!sn(n)&&(!(e>n)&&(t>e&&t<n)))}function Pn(t){const e=t.scope;return gn(e)&&e.call(t)||rn.SINGLETON}!function(t){t.SHARED_SINGLETON="SHARED-SINGLETON",t.SINGLETON="SINGLETON",t.PROTOTYPE="PROTOTYPE"}(rn||(rn={}));n(8832);const Sn=0,Cn=2,En=4,xn=8;var Dn=function(){function t(){}var e=t.prototype;return e.format=function(t,e,n){return[{type:"string",value:`[${this.levelText(e)}]`},{type:"string",value:`{${t}}`}].concat(n.map((t=>null==t?{type:typeof t,value:t+""}:{type:typeof t,value:t})))},e.levelText=function(t){switch(t){case Sn:return"DEBUG";case Cn:return"INFO";case En:return"WARN";case xn:return"ERROR"}return"UNKNOWN LEVEL"},t}();const In={logLevel:Rn("warn"),logLayout:"complex",logAppenders:["console"]||0,logOff:!1,setLogLevel:Tn,toggleLogOff:Fn};function Rn(t){switch(t){case"debug":return Sn;case"info":return Cn;case"warn":return En;default:return xn}}function Tn(t){switch(t){case Sn:case Cn:case En:case xn:In.logLevel=t}}function Fn(t){In.logOff="boolean"==typeof t?t:!In.logOff}let _n=function(){function t(t,e,n){this.appender=t,this.layout=e,this.module=n,this.logOff=!1}var e=t.prototype;return e.getMinLevel=function(){return void 0===this.minLevel?In.logLevel:this.minLevel},e.toggle=function(t){this.logOff="boolean"==typeof t?t:!this.logOff},e.setLevel=function(t){this.minLevel=t},e.doLog=function(t,e){if(this.isLogOff(t))return;const n=this.layout.format(this.module,t,e);this.appender.print(n,t)},e.log=function(t,...e){this.doLog(t,e)},e.debug=function(...t){this.doLog(Sn,t)},e.info=function(...t){this.doLog(Cn,t)},e.warn=function(...t){this.doLog(En,t)},e.error=function(...t){this.doLog(xn,t)},e.isLogOff=function(t){return this.logOff||In.logOff||t<this.getMinLevel()},t}(),kn=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.doLog=function(){},e}(_n);var Mn=_n;var On=function(t){throw new Error("Method not implemented"+(t?":"+t:""))};var Ln=function(){function t(){}return t.prototype.print=function(t,e){On(t,e)},t}();function Nn(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let Bn=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.print=function(t,e){var n,i,r,o,s;const a=t.map((t=>"string"!==t.type?" %o":" %c"+t.value)).join("").trim(),c=t.map((t=>"string"===t.type?t.style:t.value));switch(c.splice(0,0,a),e){case Sn:(n=console).debug.apply(n,Nn(h,c));break;case Cn:(i=console).info.apply(i,Nn(h,c));break;case En:(r=console).warn.apply(r,Nn(h,c));break;case xn:(o=console).error.apply(o,Nn(h,c));break;default:(s=console).log.apply(s,Nn(h,c))}},e}(Ln);var Vn=Bn;var Un=function(){function t(){}var e=t.prototype;return e.format=function(t,e,n){const i=(new Error).stack;let r;if(i){r="\n  "+i.split("\n")[4].trim()}return[{type:"string",style:`color: ${this.levelColor(e)};`,value:`[${this.levelText(e)}]`},{type:"string",style:"color: magenta",value:`{${t}}`}].concat(n.map((t=>null==t?{type:typeof t,style:"color: megenta;font-weight: bold",value:t+""}:"string"==typeof t?{type:typeof t,style:`color: ${this.levelColor(e)}`,value:t}:{type:typeof t,value:t}))).concat({type:"string",style:"color: grey;",value:r})},e.levelColor=function(t){switch(t){case Sn:return"blue";case Cn:return"green";case En:return"#5C3C00";case xn:return"red"}return"#000"},e.levelText=function(t){switch(t){case Sn:return"DEBUG";case Cn:return"INFO";case En:return"WARN";case xn:return"ERROR"}return"UNKNOWN LEVEL"},t}();var Hn=function(t){function e(e){var n;return(n=t.call(this)||this).appenders=e||[],n}return D(e,t),e.prototype.print=function(t,e){this.appenders.forEach((n=>n.print(t,e)))},e}(Ln);const jn={};let $n=function(){function t(){}return t.toggleLogger=function(t){Fn(t)},t.setLogLevel=function(t){Tn(t)},t.getLogger=function(t){return jn[t]=jn[t]||this.createLogger(t)},t.createLogger=function(t){let e,n=[];if("complex"===In.logLayout)e=new Un;else e=new Dn;return n=In.logAppenders.map((t=>{switch(t){case"console":return new Vn;case"websocket":return new WebsocketAppender}})).filter((t=>t instanceof Ln)),new Mn(new Hn(n),e,t)},t}();var Wn=$n;function Yn(t){gn(t.serviceInjected)&&(t.serviceInjected(),t.serviceInjected=u),gn(t.allInjected)&&(t.allInjected(),t.allInjected=u)}function Gn(t,e,n){gn(t.injected)&&t.injected(e,n)}function Kn(t){gn(t.destroy)&&t.destroy()}function qn(t,e){gn(t.pullout)&&t.pullout(e)}function zn(t,...e){gn(t.addDestroyHook)&&t.addDestroyHook.apply(t,e)}function Jn(t){return!!gn(t.isLazy)&&t.isLazy()}let Zn=function(){function t(){this.map=new Map}var e=t.prototype;return e.getComponentInstance=function(t,e){if(mn(t))return this.map.get(t);const n=t.$$ioc_instance_name;if(mn(n)&&this.map.has(n))return this.map.get(n);t.length>0&&Wn.getLogger(this+"").warn("Relying on other object instances through constructors is not a good practice",t);const i=1===t.length?new t(e):new t;return this.saveComponentInstance(t,i),i},e.saveComponentInstance=function(t,e){let n;if(mn(t)?n=t:(n=t.$$ioc_instance_name||this.generateInstanceName(),t.$$ioc_instance_name=n),this.map.has(n))throw new Error(`[IoC] An unknown error has occurred: Duplicate requests to create instances of the same type: (${t})!`);this.map.set(n,e)},e.onInject=function(t){const{targetStrategy:e,injectInto:n,component:i,propertyName:r}=t;e.level>this.level&&zn(i,(()=>{qn(n,r)}))},e.destroyComponents=function(){this.map.forEach((t=>{Kn(t)})),this.map.clear()},e.define=function(t){},t}(),Xn=function(t){D(n,t);var e=n.prototype;function n(e="singleton",n=Number.MAX_SAFE_INTEGER){var i;return(i=t.call(this)||this).name=e,i.level=n,i}return e.generateInstanceName=function(){return B(this.name)},e.registerComponentInstance=function(t){const e=t.constructor;this.saveComponentInstance(e,t)},e.registerComponentInstanceByName=function(t,e){this.saveComponentInstance(e,t)},n}(Zn);const Qn="object"==typeof window?window:globalThis;let ti=function(t){function e(){return t.call(this,"shared",1/0)||this}return D(e,t),e.prototype.destroyComponents=function(){},e}(Xn);const ei=Qn.__SHARED_IOC_STRATEGY__||new ti;Qn.__SHARED_IOC_STRATEGY__=ei;let ni=function(){function t(){this.level=Number.MIN_SAFE_INTEGER}var e=t.prototype;return e.getComponentInstance=function(t,e){return new t},e.onInject=function(t){const{targetStrategy:e,injectInto:n,component:i,propertyName:r}=t;e.level>this.level&&zn(i,(()=>{qn(n,r)}))},e.destroyComponents=function(){},e.define=function(){},t}();function ii(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let ri=function(){function t(){this.destroyHooks=[],this.isDestroyed=!1}var e=t.prototype;return e.ownsTo=function(e){if(!(e instanceof t))throw new Error("Cannot owns to non Disposable instance");const n=e.addDestroyHook(this);this.addDestroyHook(n)},e.addDestroyHook=function(...e){var n;return(n=this.destroyHooks).push.apply(n,ii(h,e.filter((e=>{if("function"!=typeof e&&!(e instanceof t))throw new Error(`[Illegal Argument] Invalid destroy hook:${e}, It's not a function!`);return!0})))),()=>{e.forEach((t=>{const e=this.destroyHooks.indexOf(t);e>-1&&this.destroyHooks.splice(e,1)}))}},e.destroy=function(){this.destroyHooks.slice(0).forEach((e=>{try{"function"==typeof e?e():e instanceof t&&e.destroy()}catch(t){throw t}})),this.destroyHooks=[],this.isDestroyed=!0},t}();var oi=ri;const si=B("$$ioc-component-instance-initialized");let ai=function(t){function e(){var e;return(e=t.call(this)||this).strategies=new Map,e.setStrategy(rn.SHARED_SINGLETON,ei),e.setStrategy(rn.PROTOTYPE,new ni),e.setStrategy(rn.SINGLETON,new Xn),e}D(e,t);var n=e.prototype;return n.define=function(t){const e=Pn(t),n=this.getStrategy(e);null==n||n.define(t)},n.getInstanceByClass=function(t,e){if(this.isDestroyed)throw new Error("IoC has been destroyed!");if("string"==typeof t){const n=this.getStrategy(rn.SINGLETON).getComponentInstance(t,e);return n&&this.initInstance(n)}if("function"!=typeof t)return;const n=Pn(t),i=this.getStrategy(n).getComponentInstance(t,e);return this.initInstance(i)},n.initInstance=function(t){if(this.isDestroyed)throw new Error("IoC has been destroyed!");if(!t||!t.constructor)throw new Error(`${t} is not a valid IoC Component instance!`);if(t[si])return t;Object.defineProperty(t,si,{get(){return!0},configurable:!1,enumerable:!1});const e=t.constructor,n=Pn(e),i=this.getStrategy(n),r=tn(e);for(const o in r)if(!Qe.hasProperty(t,o)){if(o in t)throw new Error(`Unable to inject instance, the same property name(${o}) already exists in target instance.`);Qe.property(t,o,(()=>{const r=Pn(e),s=tn(e),a=this.getStrategy(r);if(a.level<i.level)throw new Error(`[IoC] Instances of scope '${n}' cannot depend on scope '${r}'`);const c=this.getInstanceByClass(s[o],t);if(!c)throw new Error(`Unexpected ioc component class ${s[o]}, name: ${o}, owner: ${t}`);return Gn(t,o,c),i.onInject({component:c,injectInto:t,propertyName:o,targetStrategy:a}),c})),Jn(e)||Qe.loadProperty(t,o)}return Yn(t),t},n.setStrategy=function(t,e){this.strategies.set(t,e)},n.getStrategy=function(t){const e=this.strategies.get(t);if(!e)throw new Error(`[IoC] Incorrect scope: ${t}`);return e},n.hasStrategy=function(t){return this.strategies.has(t)},n.destroy=function(){t.prototype.destroy.call(this),this.strategies.forEach((t=>{t.destroyComponents()}))},e}(oi);var ci;!function(t){t[t.Unknown=0]="Unknown",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Shift=16]="Shift",t[t.Ctrl=17]="Ctrl",t[t.Alt=18]="Alt",t[t.PauseBreak=19]="PauseBreak",t[t.CapsLock=20]="CapsLock",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.LeftArrow=37]="LeftArrow",t[t.UpArrow=38]="UpArrow",t[t.RightArrow=39]="RightArrow",t[t.DownArrow=40]="DownArrow",t[t.Insert=45]="Insert",t[t.Delete=46]="Delete",t[t.KEY_0=48]="KEY_0",t[t.KEY_1=49]="KEY_1",t[t.KEY_2=50]="KEY_2",t[t.KEY_3=51]="KEY_3",t[t.KEY_4=52]="KEY_4",t[t.KEY_5=53]="KEY_5",t[t.KEY_6=54]="KEY_6",t[t.KEY_7=55]="KEY_7",t[t.KEY_8=56]="KEY_8",t[t.KEY_9=57]="KEY_9",t[t.KEY_A=65]="KEY_A",t[t.KEY_B=66]="KEY_B",t[t.KEY_C=67]="KEY_C",t[t.KEY_D=68]="KEY_D",t[t.KEY_E=69]="KEY_E",t[t.KEY_F=70]="KEY_F",t[t.KEY_G=71]="KEY_G",t[t.KEY_H=72]="KEY_H",t[t.KEY_I=73]="KEY_I",t[t.KEY_J=74]="KEY_J",t[t.KEY_K=75]="KEY_K",t[t.KEY_L=76]="KEY_L",t[t.KEY_M=77]="KEY_M",t[t.KEY_N=78]="KEY_N",t[t.KEY_O=79]="KEY_O",t[t.KEY_P=80]="KEY_P",t[t.KEY_Q=81]="KEY_Q",t[t.KEY_R=82]="KEY_R",t[t.KEY_S=83]="KEY_S",t[t.KEY_T=84]="KEY_T",t[t.KEY_U=85]="KEY_U",t[t.KEY_V=86]="KEY_V",t[t.KEY_W=87]="KEY_W",t[t.KEY_X=88]="KEY_X",t[t.KEY_Y=89]="KEY_Y",t[t.KEY_Z=90]="KEY_Z",t[t.Meta=91]="Meta",t[t.ContextMenu=93]="ContextMenu",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.F13=124]="F13",t[t.F14=125]="F14",t[t.F15=126]="F15",t[t.F16=127]="F16",t[t.F17=128]="F17",t[t.F18=129]="F18",t[t.F19=130]="F19",t[t.NumLock=144]="NumLock",t[t.ScrollLock=145]="ScrollLock",t[t.US_SEMICOLON=186]="US_SEMICOLON",t[t.US_EQUAL=187]="US_EQUAL",t[t.US_COMMA=188]="US_COMMA",t[t.US_MINUS=189]="US_MINUS",t[t.US_DOT=190]="US_DOT",t[t.US_SLASH=191]="US_SLASH",t[t.US_BACKTICK=192]="US_BACKTICK",t[t.US_OPEN_SQUARE_BRACKET=219]="US_OPEN_SQUARE_BRACKET",t[t.US_BACKSLASH=220]="US_BACKSLASH",t[t.US_CLOSE_SQUARE_BRACKET=221]="US_CLOSE_SQUARE_BRACKET",t[t.US_QUOTE=222]="US_QUOTE",t[t.NUMPAD_0=96]="NUMPAD_0",t[t.NUMPAD_1=97]="NUMPAD_1",t[t.NUMPAD_2=98]="NUMPAD_2",t[t.NUMPAD_3=99]="NUMPAD_3",t[t.NUMPAD_4=100]="NUMPAD_4",t[t.NUMPAD_5=101]="NUMPAD_5",t[t.NUMPAD_6=102]="NUMPAD_6",t[t.NUMPAD_7=103]="NUMPAD_7",t[t.NUMPAD_8=104]="NUMPAD_8",t[t.NUMPAD_9=105]="NUMPAD_9",t[t.NUMPAD_MULTIPLY=106]="NUMPAD_MULTIPLY",t[t.NUMPAD_ADD=107]="NUMPAD_ADD",t[t.NUMPAD_SEPARATOR=108]="NUMPAD_SEPARATOR",t[t.NUMPAD_SUBTRACT=109]="NUMPAD_SUBTRACT",t[t.NUMPAD_DECIMAL=110]="NUMPAD_DECIMAL",t[t.NUMPAD_DIVIDE=111]="NUMPAD_DIVIDE",t[t.KEY_IN_COMPOSITION=112]="KEY_IN_COMPOSITION",t[t.ABNT_C1=113]="ABNT_C1",t[t.ABNT_C2=114]="ABNT_C2"}(ci||(ci={}));const li=Promise.resolve();let hi=function(t){function e(){var e;return(e=t.call(this)||this).__data={},e.subscribers={},e.reducers=[],e.filters=[],e.addDestroyHook((()=>{e.reducers.length=0,e.filters.length=0,e.subscribers={},e.clear()})),e}D(e,t);var n=e.prototype;return n.getCurrentValue=function(t,e){if(arguments.length>1&&!this.has(t))return e;const n=this.__data[t];return this.reducers.reduce(((e,n)=>n(e,t)),n)},n.forEach=function(t){if("function"!=typeof t)throw new Error(typeof t+" is not a function!");for(const e in this.__data)t(this.getCurrentValue(e),e)},n.has=function(t){return t in this.__data},n.dispatch=function(t,e){if(this.isDestroyed)return li;this.__data[t]=e;const n=this.subscribers[t]||[],i=this.getCurrentValue(t),r=0===this.filters.length||this.filters.some((t=>t(e)));return r&&n.length?Promise.all(n.slice(0).map((e=>e.call(this,i,t)))):li},n.unDispatch=function(t){this.remove(t)},n.remove=function(t){this.isDestroyed||(delete this.__data[t],this.subscribers[t]=[])},n.subscribe=function(t,e=u){if(this.isDestroyed)return()=>{};let n=!1;const i=this.subscribers[t]||(this.subscribers[t]=[]),r=()=>{if(!n)return e.call(this,this.getCurrentValue(t),t)};let o;return i.push(r),t in this.__data&&Promise.resolve().then(r),()=>{if(n)return o;n=!0;const t=i.indexOf(r);return o=t>-1&&i.splice(t,1).length>0}},n.subscribeOnce=function(t,e=u){const n=this.subscribe(t,(function(t,i){return n&&n(),e.apply(this,[t,i])}));return n},n.takeWhile=function(t){return new Promise((e=>{const n=this.subscribe(t,(t=>{try{n&&n()}finally{e(t)}}))}))},n.reducer=function(t){if(this.isDestroyed)return u;if("function"!=typeof t)return u;const e=t.bind(this);return this.reducers.push(e),()=>{const t=this.reducers.indexOf(e);return t>-1&&this.reducers.splice(t,1).length>0}},n.filter=function(t){if(this.isDestroyed)return;if("function"!=typeof t)return u;const e=e=>t(e);return this.filters.push(e),()=>{const t=this.filters.indexOf(e);-1!==t&&this.filters.splice(t,1)}},n.clear=function(){this.__data={}},e}(oi),ui=function(t){function e(e){var n;return(n=t.call(this)||this).store=new hi,n.key="k",n.addDestroyHook(n.store),e&&n.dispatch(e),n}D(e,t);var n=e.prototype;return n.getCurrentValue=function(t){return this.store.getCurrentValue(this.key)||t},n.dispatch=function(t){this.store.dispatch(this.key,t)},n.subscribe=function(t){return this.store.subscribe(this.key,(e=>t(e)))},n.subscribeOnce=function(t){return this.store.subscribeOnce(this.key,(e=>t(e)))},n.takeWhile=function(){return this.store.takeWhile(this.key)},n.filter=function(t){return this.store.filter(t)},n.reduce=function(t){return this.store.reducer((e=>t(e)))},n.remove=function(){this.store.unDispatch(this.key)},e}(oi),di=function(){function t(){this.collection=[]}var e=t.prototype;return e.push=function(t){const e=this.indexOf(t),n=this.size();if(-1===e)this.collection.push(t);else{t===this.peak()?this.collection.push(t):this.collection.splice(e+1,1/0)}return()=>{n>=this.size()||this.collection.splice(n,1/0)}},e.indexOf=function(t){return this.collection.indexOf(t)},e.pop=function(){return this.collection.pop()},e.peak=function(){return this.collection[this.collection.length-1]},e.clear=function(){this.collection.length=0},e.size=function(){return this.collection.length},t}();window.ActvationShortcutContextManager=di;n(1386);var fi=n(8189),pi=n.n(fi);const gi=new(function(){function t(){this._keyCodeToStr=[],this._strToKeyCode={}}var e=t.prototype;return e.define=function(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t},e.keyCodeToStr=function(t){return this._keyCodeToStr[t]},e.strToKeyCode=function(t){return this._strToKeyCode[t.toLowerCase()]||ci.Unknown},t}());function mi(t,...e){e.forEach((e=>{gi.define(t,e)}))}mi(ci.Unknown,"unknown"),mi(ci.Backspace,"Backspace"),mi(ci.Tab,"Tab"),mi(ci.Enter,"Enter"),mi(ci.Shift,"Shift"),mi(ci.Ctrl,"Ctrl"),mi(ci.Alt,"Alt"),mi(ci.PauseBreak,"PauseBreak"),mi(ci.CapsLock,"CapsLock"),mi(ci.Escape,"Escape"),mi(ci.Space,"Space"),mi(ci.PageUp,"PageUp"),mi(ci.PageDown,"PageDown"),mi(ci.End,"End"),mi(ci.Home,"Home"),mi(ci.LeftArrow,"LeftArrow","Left"),mi(ci.UpArrow,"UpArrow","Up"),mi(ci.RightArrow,"RightArrow","Right"),mi(ci.DownArrow,"DownArrow","Down"),mi(ci.Insert,"Insert"),mi(ci.Delete,"Delete"),mi(ci.KEY_0,"0"),mi(ci.KEY_1,"1"),mi(ci.KEY_2,"2"),mi(ci.KEY_3,"3"),mi(ci.KEY_4,"4"),mi(ci.KEY_5,"5"),mi(ci.KEY_6,"6"),mi(ci.KEY_7,"7"),mi(ci.KEY_8,"8"),mi(ci.KEY_9,"9"),mi(ci.KEY_A,"A"),mi(ci.KEY_B,"B"),mi(ci.KEY_C,"C"),mi(ci.KEY_D,"D"),mi(ci.KEY_E,"E"),mi(ci.KEY_F,"F"),mi(ci.KEY_G,"G"),mi(ci.KEY_H,"H"),mi(ci.KEY_I,"I"),mi(ci.KEY_J,"J"),mi(ci.KEY_K,"K"),mi(ci.KEY_L,"L"),mi(ci.KEY_M,"M"),mi(ci.KEY_N,"N"),mi(ci.KEY_O,"O"),mi(ci.KEY_P,"P"),mi(ci.KEY_Q,"Q"),mi(ci.KEY_R,"R"),mi(ci.KEY_S,"S"),mi(ci.KEY_T,"T"),mi(ci.KEY_U,"U"),mi(ci.KEY_V,"V"),mi(ci.KEY_W,"W"),mi(ci.KEY_X,"X"),mi(ci.KEY_Y,"Y"),mi(ci.KEY_Z,"Z"),mi(ci.Meta,"Meta"),mi(ci.ContextMenu,"ContextMenu"),mi(ci.F1,"F1"),mi(ci.F2,"F2"),mi(ci.F3,"F3"),mi(ci.F4,"F4"),mi(ci.F5,"F5"),mi(ci.F6,"F6"),mi(ci.F7,"F7"),mi(ci.F8,"F8"),mi(ci.F9,"F9"),mi(ci.F10,"F10"),mi(ci.F11,"F11"),mi(ci.F12,"F12"),mi(ci.F13,"F13"),mi(ci.F14,"F14"),mi(ci.F15,"F15"),mi(ci.F16,"F16"),mi(ci.F17,"F17"),mi(ci.F18,"F18"),mi(ci.F19,"F19"),mi(ci.NumLock,"NumLock"),mi(ci.ScrollLock,"ScrollLock"),mi(ci.US_SEMICOLON,";",";","OEM_1"),mi(ci.US_EQUAL,"=","=","OEM_PLUS"),mi(ci.US_COMMA,",",",","OEM_COMMA"),mi(ci.US_MINUS,"-","-","OEM_MINUS"),mi(ci.US_DOT,".",".","OEM_PERIOD"),mi(ci.US_SLASH,"/","/","OEM_2"),mi(ci.US_BACKTICK,"`","`","OEM_3"),mi(ci.ABNT_C1,"ABNT_C1"),mi(ci.ABNT_C2,"ABNT_C2"),mi(ci.US_OPEN_SQUARE_BRACKET,"[","[","OEM_4"),mi(ci.US_BACKSLASH,"\\","\\","OEM_5"),mi(ci.US_CLOSE_SQUARE_BRACKET,"]","]","OEM_6"),mi(ci.US_QUOTE,"'","'","OEM_7"),mi(ci.NUMPAD_0,"NumPad0"),mi(ci.NUMPAD_1,"NumPad1"),mi(ci.NUMPAD_2,"NumPad2"),mi(ci.NUMPAD_3,"NumPad3"),mi(ci.NUMPAD_4,"NumPad4"),mi(ci.NUMPAD_5,"NumPad5"),mi(ci.NUMPAD_6,"NumPad6"),mi(ci.NUMPAD_7,"NumPad7"),mi(ci.NUMPAD_8,"NumPad8"),mi(ci.NUMPAD_9,"NumPad9"),mi(ci.NUMPAD_MULTIPLY,"NumPad_Multiply"),mi(ci.NUMPAD_ADD,"NumPad_Add"),mi(ci.NUMPAD_SEPARATOR,"NumPad_Separator"),mi(ci.NUMPAD_SUBTRACT,"NumPad_Subtract"),mi(ci.NUMPAD_DECIMAL,"NumPad_Decimal"),mi(ci.NUMPAD_DIVIDE,"NumPad_Divide");let vi=function(){function t(t,e,n,i,r){this.ctrlKey=t,this.shiftKey=e,this.altKey=n,this.metaKey=i,this.keyCode=r}t.from=function(e){const n=function(t){t=t.trim().toLowerCase();let e,n=!1,i=!1,r=!1,o=!1;do{e=!1,/^ctrl[\+\-]/.test(t)&&(n=!0,t=t.substring(5),e=!0),/^shift[\+\-]/.test(t)&&(i=!0,t=t.substring(6),e=!0),/^alt[\+\-]/.test(t)&&(r=!0,t=t.substring(4),e=!0),/^meta[\+\-]/.test(t)&&(o=!0,t=t.substring(5),e=!0),/^win[\+\-]/.test(t)&&(o=!0,t=t.substring(4),e=!0),/^cmd[\+\-]/.test(t)&&(o=!0,t=t.substring(4),e=!0),/^mod[\+\-]/.test(t)&&(H?o=!0:n=!0,t=t.substring(4),e=!0)}while(e);return{ctrl:n,shift:i,alt:r,meta:o,key:t}}(e),i=(r=n.key,gi.strToKeyCode(r));var r;if(i===ci.Unknown)throw new Error(`Incorrect shortcut: "${e}", "${n.key}" is not valid`);return new t(n.ctrl,n.shift,n.alt,n.meta,i)};var e=t.prototype;return e.equals=function(e){return e instanceof t&&(this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode)},e.isError=function(){return this.keyCode===ci.Unknown},e.toString=function(){const t=[];return this.ctrlKey&&t.push("Ctrl"),this.shiftKey&&t.push("Shift"),this.altKey&&t.push("Alt"),this.metaKey&&t.push("Meta"),t.join("+")+(t.length>0?"+":"")+(e=this.keyCode,gi.keyCodeToStr(e));var e},e.match=function(t){return this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode},t}();const yi=[vi.from("Mod+V"),vi.from("Mod+A"),vi.from("Mod+S"),vi.from("Mod+Shift+S"),vi.from("Mod+P"),vi.from("Mod+F")],wi=[vi.from("Mod+A"),vi.from("Mod+Z"),vi.from("Mod+Y"),vi.from("Delete"),vi.from("Backspace"),vi.from("Mod+Delete"),vi.from("Mod+Backspace")];var bi=vi;let Ai=function(){function t(t,e,n,i,r){this.native=t,this.shortcut=e,this.opportunity=n,this.command=i,this.context=r,this.stopped=!1,this.nativeEvent=this.native}var e=t.prototype;return e.preventDefault=function(){this.native.preventDefault()},e.stop=function(){this.stopped=!0},e.stopPropagation=function(){this.native.stopPropagation()},t}();var Pi;!function(t){t.keydown="keydown",t.keyup="keyup"}(Pi||(Pi={}));const Si=Wn.getLogger("ShortcutContext");let Ci=function(){function t(t){this.name=t,this.uperLayer=[],this.parents=[],this.emitter=new(pi()),this.shortcuts={},this.interceptors=[]}var e=t.prototype;return e.getUperLayers=function(){return this.uperLayer.slice(0)},e.getParents=function(){return this.parents.slice(0)},e.attach=function(t){const e=t;this.uperLayer.indexOf(e)>-1||this.uperLayer.push(e)},e.extend=function(t){const e=t;this.parents.indexOf(e)>-1||this.parents.push(e)},e.interceptor=function(...t){var e;return(e=this.interceptors).push.apply(e,t),()=>{t.forEach((t=>{const e=this.interceptors.indexOf(t);e>-1&&this.interceptors.splice(e,1)}))}},e.registerShortcut=function(t,e){return this.shortcuts[t]=bi.from(e),()=>{delete this.shortcuts[t]}},e.on=function(t,e,n={clear:!1}){n.clear&&this.removeListener(t);const i=t=>{const i=!!n.keydown,r=!!n.keyup||void 0===n.keydown&&void 0===n.keyup;if(!(i&&t.opportunity===Pi.keydown||r&&t.opportunity===Pi.keyup))return;if(t.stopped)return;(n.interceptors||[]).reduceRight(((t,e)=>n=>{e(n,t)}),(i=>{n.preventDefault&&t.preventDefault(),e(i)}))(t)},r=e=>{e!==t&&e||this.emitter.off(t,i)};return e.__remove__=r,this.emitter.on(t,i),r},e.keyup=function(t,e,n){return this.on(t,e,E(E({},n),{keyup:!0,keydown:!1}))},e.keydown=function(t,e,n){return this.on(t,e,E(E({},n),{keyup:!1,keydown:!0}))},e.removeListener=function(t,e){const n=e;e&&"string"==typeof n.__remove__?n.__remove__(t):this.emitter.removeAllListeners(t)},e.handleEvent=function(t,e){const n=Pi[t.type];if(!n)throw new Error(`Unexpected keyboard event type: ${t.type}, it should be "keydown" or "keyup"`);const i=this.getShortcuts();let r=!1;for(const o in i){const s=i[o],a=new Ai(t,s,n,o,this);if(St(t,s)){const n=e=>{this.getAncestorLink(o).forEach((t=>{t.emitter.emit(o,e)}));const n=yi.some((t=>t.equals(s)));n&&t.preventDefault()};e.concat(this.getInterceptors(o)).reduceRight(((t,e)=>n=>{e(n,t)}),n)(a),r=!0}}return r||this.uperLayer.some((n=>n.handleEvent(t,e)))},e.getInterceptors=function(t){return this.getAncestorLink(t).reduceRight(((t,e)=>t.concat(e.interceptors)),[])},e.getAncestorLink=function(t){const e=[],n=i=>{const r=i.getParents().some((i=>i.getShortcut(t,!1)?(e.push(i),!0):n(i)));if(r)e.unshift(i);else{this.getShortcut(t,!1)&&e.push(this)}};return n(this),e},e.getShortcut=function(t,e=!1){return this.getShortcuts(e)[t]},e.getShortcuts=function(t=!0){if(t){const e=this.parents.reduceRight(((e,n)=>E(e,n.getShortcuts(t))),{});return E({},e,this.shortcuts)}return E({},this.shortcuts)},e.getComandName=function(t,e=!1){const n="string"==typeof t?bi.from(t):t,i=this.getShortcuts(e);for(const t in i){if(i[t].equals(n))return t}},e.before=function(t,e,n=!1){return Si.warn("Deprecated API: ShortcutContext.before"),this.on(t,e,{keydown:!0,keyup:!1,preventDefault:n})},e.toString=function(){return this.name},t}();const Ei=Wn.getLogger("Keyboard");let xi=function(t){function e(e={anchor:document.body}){var n;return(n=t.call(this)||this).disabled=!1,n.contexts=new hi,n.activationManager=new di,n.interceptors=[],n.defaultShortcutContext=new Ci("default-shortcut-context"),n.anchor=e.anchor,n.prepare(),n.contexts.filter(Boolean),n.addDestroyHook(n.contexts),n}D(e,t);var n=e.prototype;return n.disable=function(){this.disabled=!0},n.enable=function(){this.disabled=!1},n.setup=function(t){t.forEach((t=>{this.createContext(t.context,t,(e=>{for(const n in t.shortcuts)e.registerShortcut(n,t.shortcuts[n])}))}))},n.createContext=function(t,e={},n){const i=e.extends||[],r=e.topLayers||[],o=t=>{const e=this.getContextByName(t);if(!e)throw new Error(`ShortcutContext cannot be used before created: ${t}`);return e},s=i.map((t=>o(t))),a=r.map((t=>o(t))),c=this.getContextByName(t)||new Ci(t);return s.forEach((t=>{c.extend(t)})),a.forEach((t=>{c.attach(t)})),this.contexts.dispatch(t,c),n&&this.withContext(t,n),c},n.withContext=function(t,e){return this.contexts.takeWhile(t).then((t=>(e.call(this,t),t)))},n.activeContext=function(t){const e=this.contexts.getCurrentValue(t);return e?this.activationManager.push(e):u},n.getActivateContext=function(){return this.activationManager.peak()||this.defaultShortcutContext},n.on=function(t,e,n){const i=this.findContextByCommand(t).map((i=>i.on(t,e,n)));return()=>{i.forEach((t=>t())),i.length=0}},n.keydown=function(t,e,n){const i=this.findContextByCommand(t).map((i=>i.keydown(t,e,n)));return()=>{i.forEach((t=>t())),i.length=0}},n.keyup=function(t,e,n){const i=this.findContextByCommand(t).map((i=>i.keyup(t,e,n)));return()=>{i.forEach((t=>t())),i.length=0}},n.findContextByShortcut=function(t){const e=[];return this.contexts.forEach((n=>{n.getComandName(t,!1)&&e.push(n)})),e},n.findContextByCommand=function(t){const e=[];return this.contexts.forEach((n=>{t in n.getShortcuts(!1)&&e.push(n)})),e},n.getContextByName=function(t){return this.contexts.getCurrentValue(t)},n.getBinder=function(t){return Ei.warn("Deprecated API: Keyboard.getBinder"),this.getContextByName(t)},n.activeBinder=function(t){return Ei.warn("Deprecated API: Keyboard.activeBinder"),this.activeContext(t)},n.markdown=function(){const t=[];return this.contexts.forEach((e=>{const n=e.getUperLayers(),i=e.getParents();n.forEach((n=>{t.push(`    ${n.name} --\x3e ${e.name}`)})),i.forEach((n=>{t.push(`    ${n.name} -.Extends.-> ${e.name}`)}));const r=e.getShortcuts(!1);if(Object.keys(r).length>0){t.push(`    subgraph ${e.name}_sub [${e.name}]`);for(const n in r)t.push(`    ${e.name} ==Shortcut==> ${n} -.-> ${r[n].toString()}`);t.push("    end")}})),`\`\`\`mermaid\nflowchart LR\n${t.join("\n")}\n\`\`\``},n.onShortcut=function(t,e,n){const i=t.toString();return this.defaultShortcutContext.registerShortcut(i,i),this.defaultShortcutContext.on(i,e,n)},n.interceptor=function(...t){var e;return(e=this.interceptors).push.apply(e,t),()=>{t.forEach((t=>{const e=this.interceptors.indexOf(t);e>-1&&this.interceptors.splice(e,1)}))}},n.getDefaultShortcutContext=function(){return this.defaultShortcutContext},n.prepare=function(){const t=t=>{const e=document.activeElement;if(this.disabled||e&&["textarea","input"].indexOf(e.tagName.toLocaleLowerCase())>-1)return;this.defaultShortcutContext.handleEvent(t,this.interceptors);const n=this.activationManager.peak();n&&n.handleEvent(t,this.interceptors)},e={};this.anchor.addEventListener("keyup",t,e),this.anchor.addEventListener("keydown",t,e),this.addDestroyHook((()=>{this.anchor.removeEventListener("keyup",t,e),this.anchor.removeEventListener("keydown",t,e)}))},n.getActivationManager=function(){return this.activationManager},e}(oi);function Di(t){return(e,n)=>{if(t.indexOf(e.command))return n(e)}}function Ii(t){return(e,n)=>{if(-1===t.indexOf(e.command))return n(e)}}function Ri(t,e){if(!(t&&t instanceof Element))return!1;const{visible:n=!0,enable:i=!0,readonly:r=!0}=e||{};if(n){const e=t.getClientRects();if(0===e.length)return!1;const n=e[0];if(n.width*n.height==0)return!1}switch(t.tagName.toLowerCase()){case"input":case"select":case"textarea":{const e=t;if(i&&e.disabled)return!1;if(r&&(e.disabled||e.readOnly))return!1}return!0}switch(t.contentEditable){case"true":case"plaintext-only":return!0}return!1}function Ti(t,...e){return(n,i)=>{e.length>0&&e.indexOf(n.command)>-1?i(n):Ri(n.native.target,t)||i(n)}}function Fi(t){return(e,n)=>{t&&e.command!==t||e.preventDefault(),n(e)}}function _i(t,e=!1){return(n,i)=>{let r;r=e?t=>t===document.activeElement||t.contains(document.activeElement):t=>t===document.activeElement;!!t.find(r)&&i(n)}}var ki={aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpg:"image/jpeg",jpeg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",mid:"audio/midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",cda:"application/x-cdf",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",fdf:"application/vnd.fdf",xfdf:"application/vnd.adobe.fdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",".tiff":"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"};function Mi(t,e="application/octet-stream"){return ki[t]||e}function Oi(){}const Li=(navigator.appVersion.match(/iphone/gi),"undefined"!=typeof devicePixelRatio?devicePixelRatio:1);let Ni,Bi,Vi,Ui=72;function Hi(){return Ni||(Ni=function(){if("undefined"!=typeof screen&&screen.deviceXDPI)return{x:screen.deviceXDPI,y:screen.deviceYDPI};if("undefined"!=typeof document){let t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;top:20in;border:none;padding:0;",document.body.appendChild(t);let e={x:parseInt(t.offsetWidth),y:parseInt(t.offsetHeight)};return t.parentNode.removeChild(t),e}return{x:96,y:96}}()),Ni}function ji(){if(void 0===Bi){const t=Hi();Bi=t.x/Ui}return Bi}function $i(){if(void 0===Vi){const t=Hi();Vi=Ui/t.x}return Vi}const Wi=t=>{const e=[new ClipboardItem({[t.type]:t})];return navigator.clipboard.write(e)};let Yi;function Gi(t){return function(){if(Se||Ee)return Promise.resolve(!1);if(!navigator.permissions||!navigator.permissions.query)return Promise.resolve(!1);try{return navigator.permissions.query({name:"clipboard-write",allowWithoutGesture:!1}).then((({state:t})=>"granted"===t))}catch(t){return console.log(t),Promise.resolve(!1)}}().then((e=>{if(e){const e=new Blob([t],{type:"text/plain"});return Wi(e).then((t=>!0))}{let e=Yi||(Yi=document.createElement("textarea"),Yi.style.opacity="0",Yi.style.top="-999px",Yi.style["z-index"]=-1,Yi.style.position="absolute",document.body.appendChild(Yi),Yi);e.value=t,e.select(),e.focus(),e.setSelectionRange(0,e.value.length);let n=document.execCommand("copy",!1,e.value);return e.blur(),n}}))}function Ki(t){let e;try{e=t.composedPath&&t.composedPath(),0==e.length&&(e=t.path)}catch(t){e=null}let n=t.target;return null!=e?e.indexOf(window)<0?e.concat(window):e:n===window?[window]:[n].concat(qi(n),window)}function qi(t,e){e=e||[];const n=t.parentNode;return n?qi(n,e.concat(n)):e}function zi(){if("object"!=typeof window)return 1;const t=window.devicePixelRatio||1,e=document.createElement("canvas").getContext("2d");return t/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}function Ji(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function Zi(){return"undefined"!=typeof window}let Xi=function(t){function e(e,n=0){var i;return(i=t.call(this)||this).observePairs=new Map,i.observer=new IntersectionObserver((t=>{t.forEach((t=>{const e=i.observePairs.get(t.target);null==e||e.callback.call(null,t.target,t.isIntersecting)}))}),{root:e,threshold:n}),i.addDestroyHook((()=>{i.observer.disconnect(),i.observePairs.clear()})),i}return D(e,t),e.prototype.observe=function(t,e){const n={callback:e,element:t};return this.observePairs.set(t,n),this.observer.observe(t),()=>{this.observer.unobserve(t),this.observePairs.delete(t)}},e}(oi);function Qi(t,e,n,i=!1){if(i||Q&&(Se||nt||_e)||W&&Se||it){let i,r=null,o=0,s=!1;const a=t=>{s=!1,i=void 0,clearTimeout(r),r=null,t.touches&&1!==t.touches.length||(o=0,i={x:t.touches[0].pageX,y:t.touches[0].pageY},r=setTimeout((()=>{s||l(t)}),600),t.stopPropagation())},c=t=>{if(t.touches&&1!==t.touches.length||!i)return;const e=t.touches[0],n=Math.pow(e.pageX-i.x,2)+Math.pow(e.pageY-i.y,2);o=Math.max(o,n),o>10&&(s=!0)},l=n=>{if(i=null,!n.changedTouches||1!==n.changedTouches.length)return void clearTimeout(r);const o=n.changedTouches[0],s=new Event("contextmenu"),a=["target","currentTarget","clientX","clientY","pageX","pageY","offsetX","offsetY","path"].reduce(((t,e)=>(t[e]={value:o[e]},t)),{});a.stopPropagation={value:function(){n.stopPropagation()}},a.preventDefault={value:function(){n.preventDefault()}};const c=Object.create(s,a);e.call(t,c),clearTimeout(r)},h=()=>{s=!1,clearTimeout(r)};t.addEventListener("touchstart",a,n),document.addEventListener("touchend",h,!0),document.addEventListener("touchmove",c,!0);const u=t=>{t.preventDefault()};return document.addEventListener("contextmenu",u,{capture:!0,passive:!1}),t.addEventListener("contextmenu",u),()=>{t.removeEventListener("touchstart",a,n),document.removeEventListener("touchmove",c,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("contextmenu",u,{capture:!0,passive:!1}),t.removeEventListener("contextmenu",u)}}return t.addEventListener("contextmenu",e,n),()=>{t.removeEventListener("contextmenu",e,n)}}function tr(t,e,n){return tr=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&x(r,n.prototype),r},tr.apply(null,arguments)}function er(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nr(t,e,n={}){const i=Object.hasOwnProperty.call(t,"constructor");let r=i?t.constructor:void 0,o=function(t){function e(){var e;return e=t.apply(this,arguments)||this,i?r.apply(er(e),arguments)||er(e):e}return D(e,t),e}(e);return i&&delete t.constructor,E(o.prototype,t),t.constructor=r,E(o,n),o}function ir(t){let e=null;return function(...n){return null===e&&(e=tr(t,n)),e}}function rr(t,e){const n=t.classList;n.contains(e)||n.add(e)}function or(t,e){const n=t.classList;n.contains(e)&&n.remove(e)}function sr(t,e,n,i){e?(rr(t,n),or(t,i)):(or(t,n),rr(t,i))}function ar(t,e){const n=[],i=getComputedStyle(t);if("string"==typeof e){let t={};e.split(/;[\r\n\s]*/).forEach((e=>{const[n,i]=e.split(/\s*:\s*/);t[n]=i})),e=t}for(const t in e)i[t]!==e[t]&&n.push(`${t}:${e[t]}`);n.length>0&&(t.style.cssText+=n.join(";"))}function cr(t,e){for(const n in e){const i=t[n],r=e[n];i!=r&&(t[n]=r)}}const lr=()=>{};let hr=function(){function t(t=100,e=!1){this.delay=t,this.leading=e,this.handle=lr,this.flag=0,this.pending=!1}var e=t.prototype;return e.exec=function(t){if(this.flag++,this.handle=t,this.pending)return;this.leading&&(t(),this.flag=0,this.handle=lr);const e=()=>{this.pending=!0,setTimeout((()=>{if(this.flag>1)this.flag=0,e();else{const t=this.handle;this.handle=lr,t(),this.pending=!1}}),this.delay)};e()},e.cancel=function(){this.handle=lr},t}();function ur(t,e=100,n=!1){const i=new hr(e,n);return function(...e){const n=t.bind.apply(t,[this].concat(e));i.exec(n)}}const dr={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"};function fr(t,...e){let n=!0;"boolean"==typeof t&&(n=t,t=e[0],e=e.slice(1)),(null===t||"object"!=typeof t&&"function"!=typeof t)&&(t={});for(let i=0,r=e.length;i<r;i++){const r=e[i];if(null!=r)for(const e in r){let i,o=t[e],s=r[e];if(t!==s)if(n&&s&&(gr(s)||(i=Array.isArray(s)))){let r;i?(i=!1,r=o&&Array.isArray(o)?o:[]):r=o&&gr(o)?o:{},t[e]=fr(n,r,s)}else void 0!==s&&(t[e]=s)}}return t}function pr(t,e){return null!=t&&{}.hasOwnProperty.call(t,e)}function gr(t){if(!t||"object"!==function(t){if(null===t)return"null";switch(typeof t){case"object":case"function":return dr[Object.prototype.toString(t)]||"object"}return typeof t}(t)||t.nodeType||null!=t&&t==t.window)return!1;if(t.constructor&&!pr(t,"constructor")&&!pr(t.constructor.prototype,"isPrototypeOf"))return!1;let e;for(e in t);return void 0===e||pr(t,e)}function mr(t){return Ri(t,{visible:!1,readonly:!1,enable:!1})}function vr(t){return function(){const t=new Set;function e(n){try{u.call(n.location.href)}catch(t){return}n instanceof n.Window&&t.add(n);for(let t=0;t<n.length;t++)e(n[t])}let n=window.top;n&&Object.getPrototypeOf(n)||(n=window);return e(n),Array.from(t)}().map((e=>e[t]))}function yr(t){return vr("window").indexOf(t)>=0}function wr(t){return vr("HTMLElement").some((e=>t instanceof e))}function br(t){return vr("document").indexOf(t)>=0}function Ar(t){return vr("Element").some((e=>t instanceof e))}function Pr(t,e){if(!Ar(t))throw new TypeError("Failed to execute 'observeResize': parameter 1 is not of type `Element`");if("function"!=typeof e)throw new TypeError("Failed to execute 'observeResize': parameter 2 is not of type `Function`");if(window.ResizeObserver){const n=new ResizeObserver((()=>{e()}));return n.observe(t),()=>{n.disconnect()}}{let n,i=!1,r=Sr(t);return n=setInterval((()=>{if(i)return;const n=Sr(t);r&&n&&(n.width!==r.width||n.height!==r.height)&&e(),r=n}),100),()=>{i=!0,clearInterval(n)}}}function Sr(t){if(!t)return null;if(ge)try{return t.getBoundingClientRect()}catch(t){return null}return t.getBoundingClientRect()}var Cr=function(){throw new Error("Unsupported operation!")},Er=n(6244),xr=n.n(Er),Dr=n(8366),Ir=n.n(Dr),Rr=n(449),Tr=n.n(Rr),Fr=n(1434),_r=n.n(Fr),kr=n(1128),Mr=n.n(kr),Or=n(579),Lr=n.n(Or),Nr=n(7074),Br=n.n(Nr),Vr=n(890),Ur=n.n(Vr),Hr=n(8990),jr=n.n(Hr),$r=n(5522),Wr=n.n($r),Yr=n(3765),Gr=n.n(Yr),Kr=n(5576),qr=n.n(Kr),zr=n(859),Jr=n.n(zr),Zr=n(4883),Xr=n.n(Zr);xr().locale(Mr()),xr().locale(Lr()),xr().locale(Br()),xr().locale(Ur()),xr().locale(jr()),xr().locale(jr()),xr().locale(Wr()),xr().locale(Gr()),xr().locale(qr()),xr().locale(Jr()),xr().locale(jr()),xr().locale(Xr()),xr().extend(Ir()),xr().extend(Tr()),xr().extend(_r());var Qr=xr(),to=n(2047),eo=n.n(to);function no(t,e){let n=eo().fn.on;try{eo().fn.on=function(...e){return t.addDestroyHook((()=>{eo().fn.off.apply(this,e)})),n.apply(this,e)},e(eo())}finally{eo().fn.on=n}}let io=function(){function t(t){this.originfn=t,this.beforeHooks=[],this.afterHooks=[],this.thrownHooks=[],this.aroundHooks=[]}t.on=function(e){if("function"==typeof e)return new t(e);if(e instanceof t)return new t(e.extract());throw new TypeError("Unexpected type: "+typeof e)};var e=t.prototype;return e.before=function(t){return"function"==typeof t&&this.beforeHooks.push(t),this},e.after=function(t){return"function"==typeof t&&this.afterHooks.push(t),this},e.thrown=function(t){return"function"==typeof t&&this.thrownHooks.push(t),this},e.around=function(t){return"function"==typeof t&&this.aroundHooks.push(t),this},e.proxy=function({before:t,after:e,thrown:n,around:i}={}){return this.before(t),this.after(e),this.thrown(n),this.around(i),this},e.extract=function(){const{beforeHooks:t,afterHooks:e,thrownHooks:n,aroundHooks:i,originfn:r}=this;function o(...i){t.forEach((t=>t.call(this,i)));try{const t=r.apply(this,i);return t instanceof Promise?(t.then((t=>{e.forEach((e=>e.call(this,t,i)))})),t.catch((t=>{n.forEach((e=>e.call(this,t,i)))}))):e.forEach((e=>e.call(this,t,i))),t}catch(t){n.forEach((e=>e.call(this,t,i)))}}return o.origin=r,i.reduceRight(((t,e)=>function(...n){return e(this,t,n)}),o)},t}(),ro=function(){function t(t,e,n,i){this.r=t,this.g=e,this.b=n,this.a=i}t.fromHSLA=function(e,n,i,r){const[o,s,a]=t.convertHSL2rgb(e,n,i);return new t(o,s,a,r)},t.fromRGBA=function(e,n){const[i,r,o]=t.separateRGBNumber(e);return new t(i,r,o,n)},t.fromARGB=function(e){if(e<=16777215)return t.fromRGBA(e,255);const n=255&e>>24,i=16777215&e;return t.fromRGBA(i,n)},t.fromRGB=function(e){return t.fromRGBA(e,255)},t.convertHSL2rgb=function(t,e,n){t=Math.min(359,Math.max(0,t)),e=Math.min(100,Math.max(0,e)),n=Math.min(100,Math.max(0,n)),n/=100;const i=(e/=100)*(1-Math.abs(2*n-1)),r=i*(1-Math.abs(t/60%2-1)),o=n-i/2;let s,a,c;return[s,a,c]=t>=0&&t<60?[i,r,0]:t>=60&&t<120?[r,i,0]:t>=120&&t<180?[0,i,r]:t>=180&&t<240?[0,r,i]:t>=240&&t<300?[r,0,i]:[i,0,r],[s,a,c].map((t=>Math.round(255*(t+o))))},t.convertRGB2CMYK=function(t,e,n){let i=t/255,r=e/255,o=n/255;const s=1-Math.max(i,r,o);return{c:(1-i-s)/(1-s),m:(1-r-s)/(1-s),y:(1-o-s)/(1-s),k:s}},t.convertRGB2HSV=function(t,e,n){const i=t/255,r=e/255,o=n/255,s=Math.max(i,r,o),a=s-Math.min(i,r,o);let c;c=0===a?0:s===i?(r-o)/a*60%6:s===r?60*((o-i)/a+2):60*((i-r)/a+4);return{h:c,s:0===s?0:a/s,v:s}},t.separateRGBNumber=function(t){return[t>>16&255,t>>8&255,255&t]};var e=t.prototype;return e.toCSS_Hex=function(){return`#${oo(this.r)}${oo(this.g)}${oo(this.b)}`},e.toCSS_RGB=function(){return`rgb(${this.r},${this.g},${this.b})`},e.toRGB=function(){return this.r<<16|this.g<<8|this.b},e.toCSS_RGBA=function(){return`rgba(${this.r},${this.g},${this.b},${this.a/255})`},e.toHSL=function(){const t=this.r/255,e=this.g/255,n=this.b/255,i=Math.min(t,e,n),r=Math.max(t,e,n),o=r-i;let s=0,a=0,c=0;return s=0===o?0:r===t?(e-n)/o%6:r===e?(n-t)/o+2:(t-e)/o+4,s<0&&(s+=360),c=(r+i)/2,a=0===o?0:o/(1-Math.abs(2*c-1)),a=+(100*a).toFixed(1),c=+(100*c).toFixed(1),{h:s,s:a,l:c}},e.toCSS_HSL=function(){const{h:t,s:e,l:n}=this.toHSL();return`hsl(${t},${e}%,${n}%)`},e.toCSS_HSLA=function(){const{h:t,s:e,l:n}=this.toHSL();return`hsla(${t},${e}%,${n}%, ${this.a/255})`},e.toCMYK=function(){return t.convertRGB2CMYK(this.r,this.g,this.b)},e.toHSV=function(){return t.convertRGB2HSV(this.r,this.g,this.b)},e.clone=function(){return new(0,this.constructor)(this.r,this.g,this.b,this.a)},e.isSameAs=function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},e.asArray=function(){return[this.r,this.g,this.b,this.a]},t}();function oo(t){const e=t.toString(16);return 1===e.length?"0"+e:e}var so;!function(t){t.PLAIN="text/plain",t.HTML="text/html",t.FILES="Files"}(so||(so={}));const ao="module-license-info",co=["html","a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],lo=document.createElement("div");function ho(t,...e){const n=fo(t,e);return lo.innerHTML=n.trim(),lo.firstChild}function uo(t,...e){const n=fo(t,e);return lo.innerHTML=n.trim(),Array.from(lo.childNodes)}function fo(t,e){return e.reduce(((e,n,i)=>e+n+t[i+1]),t[0])}function po(t,e={},n=[]){const i=document.createElement(t);for(let t in e)i.setAttribute(t,e[t]+"");return n.forEach((t=>{i.appendChild(t)})),i}const go="change",mo="update";let vo=function(t){function e(){var e;return(e=t.call(this)||this).store=new hi,e.addDestroyHook(e.store),e.store.filter((()=>!e.isDestroyed)),e}D(e,t);var n=e.prototype;return n.onChange=function(t,e=!1){return e?this.store.subscribeOnce(go,(e=>t(e))):this.store.subscribe(go,(e=>t(e)))},n.onUpdate=function(t){return this.store.subscribe(mo,(()=>t()))},n.handle=function(t){this.store.dispatch(go,t)},n.update=function(){return this.store.dispatch(mo,null)},e}(ri);var yo=n(8752);n(7267);function wo(){const t="rgb(31,41,59)",e=document.createElement("div");e.style.color=t,document.body.appendChild(e);try{const i=(n=e,document.defaultView?document.defaultView.getComputedStyle(n):n.currentStyle);return i.color.replace(/ /g,"")!==t}finally{document.body.removeChild(e)}var n}function bo(){const t=document,e=t.mozFullscreen||t.webkitIsFullScreen||t.fullscreen;return Q?Se?!!t.webkitCurrentFullScreenElement:e:e||window.innerHeight===window.screen.height&&window.innerWidth===window.screen.width}function Ao(t,e){const n=Array.from(t.childNodes.values());n.forEach(((i,r)=>{e.includes(i)||(t.removeChild(i),n.splice(r,1))})),e.forEach(((i,r)=>{if(!i||n[r]===i)return;const o=n.indexOf(i),s=e[r-1];var a;-1===o?(s?(a=s).getComponent&&"string"==typeof a.getComponent().attrs.slot?s.appendChild(i):s.after(i):t.prepend(i),n.splice(r,0,i)):r<n.length?(i.before(n[r]),function(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}(n,r,o),s?s.after(i):t.prepend(i)):(n.push(i),t.appendChild(i))}))}const Po="#9E3ABF",So={"accent-color":{varKey:"--fv-accent-color",defaultValue:Po,referenceValue:"#923094"},"accent-fill":{varKey:"--fv-accent-fill-color",defaultValue:Po,referenceValue:"#923094"},"btn-color":{varKey:"--fv-btn-color",defaultValue:Po,referenceValue:Po},border:{varKey:"--fv-btn-border-color",defaultValue:Po,referenceValue:"#9E3ABF"},"hover-color":{varKey:"--fv-btn-hover-color",defaultValue:Po,referenceValue:Po},"border-hover":{varKey:"--fv-btn-border-hover-color",defaultValue:Po,referenceValue:"#f9e3fa"},"pressed-bg":{varKey:"--fv-btn-pressed-bg",defaultValue:Po,referenceValue:"#9432AC"},"disabled-bg":{varKey:"--fv-btn-disabled-bg",defaultValue:Po,referenceValue:"#70289B"},"border-disabled-color":{varKey:"--fv-btn-border-disabled-color",defaultValue:Po,referenceValue:"#70289B"},"focus-bg":{varKey:"--fv-btn-focus-bg",defaultValue:Po,referenceValue:"#9E3ABF"},"border-pressed":{varKey:"--fv-btn-border-pressed-color",defaultValue:Po,referenceValue:"#D4A1E5"},"outline-focus-color":{varKey:"--fv-btn-outline-focus-color",defaultValue:Po,referenceValue:"#9E3ABF"},"outline-color":{varKey:"--fv-btn-outline-color",defaultValue:Po,referenceValue:"#9E3ABF"},"accent-btn-bg":{varKey:"--fv-accent-btn-bg",defaultValue:Po,referenceValue:"#9E3ABF"},"accent-btn-border-color":{varKey:"--fv-accent-btn-border-color",defaultValue:Po,referenceValue:"#9E3ABF"},"accent-btn-hover-bg":{varKey:"--fv-accent-btn-hover-bg",defaultValue:Po,referenceValue:"#af40ca"},"accent-btn-border-hover-color":{varKey:"--fv-accent-btn-border-hover-color",defaultValue:Po,referenceValue:"#af40ca"},"accent-btn-pressed-bg":{varKey:"--fv-accent-btn-pressed-bg",defaultValue:Po,referenceValue:"#9432AC"},"accent-btn-border-pressed-color":{varKey:"--fv-accent-btn-border-pressed-color",defaultValue:Po,referenceValue:"#9432AC"},"accent-btn-disabled-bg":{varKey:"--fv-accent-btn-disabled-bg",defaultValue:Po,referenceValue:"#70289B"},"accent-btn-disabled-color":{varKey:"--fv-accent-btn-disabled-color",defaultValue:Po,referenceValue:"#AF57CC"},"accent-btn-border-disabled-color":{varKey:"--fv-accent-btn-border-disabled-color",defaultValue:Po,referenceValue:"#70289B"},"accent-btn-focus-bg":{varKey:"--fv-accent-btn-focus-bg",defaultValue:Po,referenceValue:"#9E3ABF"},"accent-btn-border-focus-color":{varKey:"--fv-accent-btn-border-focus-color",defaultValue:Po,referenceValue:"#9E3ABF"}},Co="#333333",Eo={background:{varKey:"--fv-primary-bg",defaultValue:Co,referenceValue:Co},secondary:{varKey:"--fv-secondary-bg",defaultValue:Co,referenceValue:"#424242"},content:{varKey:"--fv-content-bg",defaultValue:Co,referenceValue:"#242424"},"hide-show":{varKey:"--fv-hide-show-bg",defaultValue:Co,referenceValue:"#131313"},hover:{varKey:"--fv-hover-bg",defaultValue:Co,referenceValue:"#515151"},active:{varKey:"--fv-active-bg",defaultValue:Co,referenceValue:"#424242"},input:{varKey:"--fv-input-bg",defaultValue:Co,referenceValue:"#242424"},footer:{varKey:"--fv-footer-bg",defaultValue:Co,referenceValue:"#131313"}},xo="#666666",Do={border:{varKey:"--fv-border-color",defaultValue:xo,referenceValue:xo},frame:{varKey:"--fv-frame-border-color",defaultValue:xo,referenceValue:"#131313"},tab:{varKey:"--fv-doc-tab-border-color",defaultValue:xo,referenceValue:"#242424"},"tab-active":{varKey:"--fv-doc-tab-border-active-color",defaultValue:xo,referenceValue:"#131313"},"spacing-line-primary":{varKey:"--fv-spacing-line-primary-color",defaultValue:xo,referenceValue:"#131313"},"spacing-line-secondary":{varKey:"--fv-spacing-line-secondary-color",defaultValue:xo,referenceValue:"#242424"},"spacing-line-tertiary":{varKey:"--fv-spacing-line-tertiary-color",defaultValue:xo,referenceValue:"#424242"},input:{varKey:"--fv-input-border-color",defaultValue:xo,referenceValue:"#515151"}},Io={link:{varKey:"--fv-link-color",defaultValue:"#99EBFF",referenceValue:"#99EBFF"}},Ro="#E3E3E3",To={primary:{varKey:"--fv-primary-color",defaultValue:Ro,referenceValue:Ro},secondary:{varKey:"--fv-secondary-color",defaultValue:Ro,referenceValue:"#F7F7F7"},placeholder:{varKey:"--fv-placeholder-color",defaultValue:Ro,referenceValue:"#ACACAC"},disable:{varKey:"--fv-disable-color",defaultValue:Ro,referenceValue:"#8B8B8B"},introductory:{varKey:"--fv-introductory-color",defaultValue:Ro,referenceValue:"#BDBDBD"}};function Fo(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const _o={primary:"primary",background:"brackground",border:"border",link:"link",text:"text"},ko=new Map,Mo={primary:So,background:Eo,border:Do,link:Io,text:To};function Oo(t=[{dom:dom,colors:colors}]){ko.clear(),t.forEach((t=>{const{dom:e,colors:n}=t;if(!n)return;const i=e||document.body;Object.keys(n).forEach((t=>function(t,e,n){if(!e)return void Object.keys(n).forEach((e=>{const{varKey:i}=n[e];t.style.removeProperty(i)}));let i=(0,yo.$j)(e,"RGB");i.shift(),Object.keys(n).forEach((r=>{const{varKey:o,defaultValue:s,referenceValue:a}=n[r];t.style.setProperty(o,s!==a?No.apply(void 0,Fo(h,i).concat([Lo(s,a)])):e)}))}(i,n[t],Mo[t])))}))}function Lo(t,e){const n=`${t}-${e}`;if(ko.get(n))return ko.get(`${t}-${e}`);let i=(0,yo.$j)(t,"RGB"),r=(0,yo.$j)(e,"RGB");const o={r:i[1]/r[1],g:i[2]/r[2],b:i[3]/r[3]};return ko.set(n,o),o}function No(t,e,n,i){const{r:r,g:o,b:s}=i;let a=["RGB",Bo(t/r),Bo(e/o),Bo(n/s)];return(0,yo.$j)(a,"HTML")}function Bo(t){return t>1?1:t}},8972:function(t,e,n){"use strict";n.r(e),n.d(e,{ANNOT_APPEARANCE_TYPE:function(){return I},AnnotFlagsName:function(){return u},BORDER_STYLE:function(){return o},CREATING_MEASUREMENT_CONTEXTMENU:function(){return g},CUSTOM_STAMPS_LOCALKEY:function(){return R},DB_PREFIX:function(){return A},DISTANCE_TOLERANCE:function(){return y},EMPTY_STR:function(){return b},FAVORITE_STAMPS_LOCALKEY:function(){return T},HIDE_FORM_FIELD_PROPERTY_BOX:function(){return S},HIDE_FORM_FIELD_SIMPLE_PROPERTY_BOX:function(){return C},HIGHLIGHTING_MODE:function(){return m},INTERNAL_THUMBNAIL_BITMAP_HEIGHT:function(){return D},INTERNAL_THUMBNAIL_BITMAP_WIDTH:function(){return x},Intents:function(){return a},LINE_CAPTION_POSITION:function(){return h},LineEndingName:function(){return c},LineEndingStyle:function(){return l},MARKUP_ANNOTATION_STATE:function(){return i},MEASUREMENT_INFO:function(){return E},MODULE_NAME_TYPE:function(){return F},MeasureType:function(){return f},PDFDocPermission:function(){return d},POINT_TOLERANCE:function(){return w},POINT_TYPE:function(){return s},POS_TYPE:function(){return r},RESOLVED_PROMISE_VOID:function(){return v},SET_FORM_CREATION_CONTINUOUSLY:function(){return P},STORE_NAMES:function(){return p}});n(278),n(3964);var i={MARKED:"marked",UNMARKED:"unmarked",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled",COMPLETED:"completed",DEFERRED:"deferred",FUTURE:"future",NONE:"none"};const r={FIRST:0,LAST:1,AFTER:2,BEFORE:3},o={SOLID:0,DASHED:1,UNDERLINE:2,BEVELED:3,INSET:4,CLOUDY:5,NOBORDER:6},s={MOVE_TO:1,LINE_TO:2,LINE_TO_CLOSE_FIGURE:3,BEZIER_TO:4,BEZIER_TO_CLOSE_FIGURE:5},a={LINE_ARROW:"LineArrow",LINE_DIMENSION:"LineDimension",POLYGON_CLOUD:"PolygonCloud",POLYGON_DIMENSION:"PolygonDimension",POLYLINE_DIMENSION:"PolyLineDimension",CIRCLE_DIMENSION:"CircleDimension",FREETEXT_TYPEWRITER:"FreeTextTypewriter",FREETEXT_CALLOUT:"FreeTextCallout",FREETEXT_TEXTBOX:"FreeTextTextbox",STRIKEOUT_TEXTEDIT:"StrikeOutTextEdit"},c={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"},l=Object.keys(c).reduce(((t,e)=>(t[c[e]]=Number(e),t)),{}),h={POS_INLINE:0,POS_TOP:1},u={0:"invisible",1:"hidden",2:"print",3:"nozoom",4:"norotate",5:"noview",6:"readonly",7:"locked",8:"togglenoview"},d={PrintLowQuality:4,ModifyDocument:8,Extract:16,AnnotForm:32,FillForm:256,ExtractAccess:512,Assemble:1024,PrintHighQuality:2048},f={MeasureTypeX:0,MeasureTypeY:1,MeasureTypeD:2,MeasureTypeA:3,MeasureTypeT:4,MeasureTypeS:5},p={SELECTION_INFO:"viewer--store-selection-info"},g="creating-measurement-contextmenu",m={NONE:0,INVERT:1,OUTLINE:2,PUSH:3,TOGGLE:4},v=Promise.resolve(),y=2,w=.01,b="",A="FoxitPDFSDKForWeb_",P="set_form_creation_continuously",S="hideFormFieldPropertyBox",C="hideFormFieldSimplePropertyBox",E="measurementInfo",x=200,D=258,I={ROLLOVER:"rollover",NORMAL:"normal",DOWN:"down"},R="CUSTOM-STAMPS",T="FAVORITE-STAMPS-LIST",F={ConnectedPDF:1,XFA:2,Redaction:3,RMS:4,OCR:5,Comparison:6,Compliance:7,Optimizer:8,Conversion:9,LayoutRecognition:10,AdvEdit:11}},8628:function(t,e,n){"use strict";n(3964);var i=n(8972);let r=new Error("Method not implemented."),o=function(){function t(t){this.option=t}var e=t.prototype;return e.loadForm=function(t){throw Error(r+": loadForm")},e.formFillerEvent=function(t,e,n,i){throw Error(r+": formFillerEvent")},e.updateField=function(t,e,n,i){throw Error(r+": updateField")},e.updateFormControl=function(t,e,n,i,o){throw Error(r+": updateFormControl")},e.reloadFieldByName=function(t,e){throw Error(r+": reloadFieldByName")},e.updateMKProperty=function(t,e,n,i,o){throw Error(r+": updateMKProperty")},e.setWidgetAS=function(t,e,n,i){throw Error(r+": setWidgetAS")},e.setFieldValue=function(t,e,n){throw Error(r+": setFieldValue")},e.getFieldsValue=function(t){throw Error(r+": getFieldsValue")},e.addControl=function(t,e,n,i,o){throw Error(r+": addControl")},e.createFieldByCopyControl=function(t,e,n,i,o,s,a){throw Error(r+": createFieldByCopyControl")},e.validateFieldName=function(t,e,n){throw Error(r+": validateFieldName")},e.renameField=function(t,e,n){throw Error(r+": renameField")},e.removeField=function(t,e){throw Error(r+": removeField")},e.removeControl=function(t,e,n){throw Error(r+": removeControl")},e.isLastSignature=function(t,e){throw Error(r+": isLastSignature")},e.fixPageFields=function(t,e){throw Error(r+": fixPageFields")},e.hasFixedPageFields=function(t,e){throw Error(r+": hasFixedPageFields")},e.getControlCount=function(t,e){throw Error(r+": getControlCount")},e.init=function(){return Promise.resolve(!0)},e.getPDFDocIdByFile=function(t){throw Error(r+": getPDFDocIdByFile")},e.getPDFDocIdByChunk=function(t,e){throw Error(r+": getPDFDocIdByChunk")},e.getPDFDocIdByHttpRangeRequest=function(t){throw Error(r+": getPDFDocIdByHttpRangeRequest")},e.getPDFDocIdByStream=function(t){throw Error(r+": getPDFDocIdByStream")},e.parsePDFDocByPassword=function(t,e=i.EMPTY_STR,n={}){throw Error(r+": parsePDFDocByPassword")},e.setIcons=function(t=""){throw Error(r+": setIcons")},e.addIcon=function(t){throw Error(r+": addIcon")},e.removeIcon=function(t,e,n){throw Error(r+": removeIcon")},e.getPDFDocInfoById=function(t){throw Error(r+": getPDFDocInfoById")},e.getMetadata=function(t){throw Error(r+": getMetadata")},e.setMetadataValue=function(t,e,n){throw Error(r+": setMetadataValue")},e.getFileVersion=function(t){throw Error(r+": getFileVersion")},e.getPageInfoByIndex=function(t,e){throw Error(r+": getPageInfoByIndex")},e.getPageInfoById=function(t,e){throw Error(r+": getPageInfoById")},e.getPageBitmap=function(t,e,n,i,o,s,a){throw Error(r+": getPageBitmap")},e.getPageAndHighlightBitmap=function(t,e,n,i,o){throw Error(r+": getPageAndHighlightBitmap")},e.setRenderFlag=function(t,e){throw Error(r+": setRenderFlag")},e.getAnnot=function(t,e,n){throw Error(r+": getAnnot")},e.getPageAnnotIDList=function(t,e){throw Error(r+": getPageAnnotIDList")},e.clearDesignerAssitCache=function(t,e){throw Error(r+": clearDesignerAssitCache")},e.clearAllDesignerAssistCache=function(t){throw Error(r+": clearAllDesignerAssistCache")},e.getAnnots=function(t,e,n){throw Error(r+": getAnnots")},e.getAnnotBitmap=function(t,e,n,i,o,s,a,c){throw Error(r+": getAnnotBitmap")},e.getAnnotBitmapByRange=function(t,e,n,i,o,s){throw Error(r+": getAnnotBitmapByRange")},e.getAnnotIdAtPoint=function(t,e,{x:n,y:i},o){throw Error(r+": getAnnotIdAtPoint")},e.getAnnotObjectNumAtPoint=function(t,e,{x:n,y:i},o){throw Error(r+": getAnnotObjectNumAtPoint")},e.getAnnotIdAtDevicePoint=function(t,e,{x:n,y:i},o,s){throw Error(r+": getAnnotIdAtDevicePoint")},e.getAnnotObjectNumAtDevicePoint=function(t,e,{x:n,y:i},o,s){throw Error(r+": getAnnotObjectNumAtDevicePoint")},e.getAnnotObjNumByNM=function(t,e,n){throw Error(r+": getAnnotObjNumByNM")},e.getCharInfoAtPoint=function(t,e,{x:n,y:i},o){throw Error(r+": getCharInfoAtPoint")},e.updateAnnotQuadPointsByCharIndex=function(t,e,n,i,o){throw Error(r+": updateAnnotQuadPointsByCharIndex")},e.setAnnotContent=function(t,e,n,i){throw Error(r+": setAnnotContent")},e.setAnnotBorderColor=function(t,e,n,i){throw Error(r+": setAnnotBorderColor")},e.setAnnotBorderStyle=function(t,e,n,i,o){throw Error(r+": setAnnotBorderStyle")},e.setAnnotBorderWidth=function(t,e,n,i){throw Error(r+": setAnnotBorderWidth")},e.setAnnotFillColor=function(t,e,n,i){throw Error(r+": setAnnotFillColor")},e.setRedactAnnotFillColor=function(t,e,n,i,o){throw Error(r+": setRedactAnnotFillColor")},e.setAnnotBorderInfo=function(t,e,n,i){throw Error(r+": setAnnotBorderInfo")},e.setRedactOverlayText=function(t,e,n,i){throw Error(r+": setRedactOverlayText")},e.removeRedactOverlayText=function(t,e,n){throw Error(r+": removeRedactOverlayText")},e.setRedactOverlayTextAlignment=function(t,e,n,i){throw Error(r+": setRedactOverlayTextAlignment")},e.setRedactRepeat=function(t,e,n,i){throw Error(r+": setRedactRepeat")},e.setRedactAutoFontSize=function(t,e,n,i){throw Error(r+": setRedactAutoFontSize")},e.getRedactDefaultAppearance=function(t,e,n){throw Error(r+": getRedactDefaultAppearance")},e.setRedactDefaultAppearance=function(t,e,n,i){throw Error(r+": setRedactDefaultAppearance")},e.setRedactOpacity=function(t,e,n,i,o){throw Error(r+": setRedactOpacity")},e.setAnnotOpacity=function(t,e,n,i){throw Error(r+": setAnnotOpacity")},e.removeAnnot=function(t,e,n){throw Error(r+": removeAnnot")},e.annotAddReply=function(t,e,n,i){throw Error(r+": annotAddReply")},e.annotRemoveReply=function(t,e,n,i){throw Error(r+": annotRemoveReply")},e.annotRemoveAllStateAnnots=function(t,e,n){throw Error(r+": annotRemoveAllStateAnnots")},e.annotRemoveAllReply=function(t,e,n){throw Error(r+": annotRemoveAllReply")},e.setAnnotRect=function(t,e,n,i){throw Error(r+": setAnnotRect")},e.setAnnotRectAndInnerRect=function(t,e,n,i,o){throw Error(r+": setAnnotRectAndInnerRect")},e.getAnnotInnerRect=function(t,e,n){throw Error(r+": getAnnotInnerRect")},e.moveAnnotTo=function(t,e,n,i){throw Error(r+": moveAnnotTo")},e.getPDFDocStream=function(t,e,n){throw Error(r+": getPDFDocStream")},e.setAnnotEndingStyle=function(t,e,n,i,o){throw Error(r+": setAnnotEndingStyle")},e.setLineStartPoint=function(t,e,n,i,o){throw Error(r+": setLineStartPoint")},e.setLineEndPoint=function(t,e,n,i,o){throw Error(r+": setLineEndPoint")},e.setAnnotLeaderLineLength=function(t,e,n,i){throw Error(r+": setAnnotLeaderLineLength")},e.setAnnotLeaderLineExtend=function(t,e,n,i){throw Error(r+": setAnnotLeaderLineExtend")},e.setAnnotLeaderLineOffset=function(t,e,n,i){throw Error(r+": setAnnotLeaderLineOffset")},e.setAnnotCaptionOffset=function(t,e,n,i,o){throw Error(r+": setAnnotCaptionOffset")},e.updateAnnotVertexes=function(t,e,n,i,o,s){throw Error(r+": updateAnnotVertexes")},e.setAnnotVertexes=function(t,e,n,i){throw Error(r+": setAnnotVertexes")},e.setAnnotAPBitmap=function(t,e,n,i,o){throw Error(r+": setAnnotAPBitmap")},e.getBitmapBuffer=function(t,e,n){throw Error(r+": getBitmapBuffer")},e.setAction=function(t,e,n,i){throw Error(r+": setAction")},e.removeAction=function(t,e,n,i,o,s){throw Error(r+": removeAction")},e.setDefaultAppearance=function(t,e,n,i){throw Error(r+": setDefaultAppearance")},e.setAnnotInnerRect=function(t,e,n,{left:i,right:o,top:s,bottom:a}){throw Error(r+": setAnnotInnerRect")},e.setAnnotFlag=function(t,e,n,i){throw Error(r+": setAnnotFlag")},e.importFromFDFFile=function(t,e,n){throw Error(r+": importFromFDFFile")},e.importFromFDF=function(t,e,n){throw Error(r+": importFromFDF")},e.exportToFDF=function(t,e,n){throw Error(r+": exportToFDF")},e.exportToStardardXml=function(t,e,n){throw Error(r+": exportToStardardXml")},e.exportToImage=function(t,e,n,i,o){throw Error(r+": exportToImage")},e.exportToTxt=function(t,e,n,i){throw Error(r+": exportToTxt")},e.exportImageObjectToImage=function(t,e,n,i,o){throw Error(r+": exportImageObjectToImage")},e.cancelExport=function(t){throw Error(r+": cancelExport")},e.addAnnot=function(t){throw Error(r+": addAnnot")},e.getTextRectsAtRect=function(t,e,n){throw Error(r+": getTextRectsAtRect")},e.getTextContinuousRectsAtRect=function(t,e,n){throw Error(r+": getTextContinuousRectsAtRect")},e.getTextContinuousRectsAtPoints=function(t,e,n,i,o,s,a){throw Error(r+": getTextContinuousRectsAtPoints")},e.getTextContinuousCharsAtRect=function(t,e,n){throw Error(r+": getTextContinuousCharsAtRect")},e.getDoubleClickTextRectAtPoint=function(t,e,n,i){throw Error(r+": getDoubleClickTextRectAtPoint")},e.getTextSearch=function(t,e,n,i){throw Error(r+": getTextSearch")},e.getAnnotTextSearch=function(t,e,n,i,o){throw Error(r+": getAnnotTextSearch")},e.textSearchFindNext=function(t){throw Error(r+": textSearchFindNext")},e.textSearchFindPrev=function(t){throw Error(r+": textSearchFindPrev")},e.textSearchDestroy=function(t){throw Error(r+": textSearchDestroy")},e.registerSecurityCallback=function(t,e){throw Error(r+": registerSecurityCallback")},e.destroyDoc=function(t){throw Error(r+": destroyDoc")},e.destroyPage=function(t,e){throw Error(r+": destroyPage")},e.setPopupOpenStatus=function(t,e,n,i){throw Error(r+": setPopupOpenStatus")},e.moveCaretRectByCharIndex=function(t,e,n,i){throw Error(r+": moveCaretRectByCharIndex")},e.setAnnotIntent=function(t,e,n,i){throw Error(r+": setAnnotIntent")},e.setUserName=function(t){throw Error(r+": setUserName")},e.getUserName=function(){throw Error(r+": getUserName")},e.addAnnotReviewState=function(t,e,n,i){throw Error(r+": addAnnotReviewState")},e.addAnnotMarkedState=function(t,e,n,i){throw Error(r+": addAnnotMarkedState")},e.setStateName=function(t,e,n,i){throw Error(r+": setStateName")},e.setNoteOpenStatus=function(t,e,n,i){throw Error(r+": setNoteOpenStatus")},e.removeAllStateAnnots=function(t,e,n){throw Error(r+": removeAllStateAnnots")},e.setDynamicInfoFormula=function(t,e){throw Error(r+": setDynamicInfoFormula")},e.getDynamicInfoFormula=function(){throw Error(r+": getDynamicInfoFormula")},e.setDigitalTimeFormat=function(t){throw Error(r+": setDigitalTimeFormat")},e.setDigitalInfo=function(t){throw Error(r+": setDigitalInfo")},e.getGraphicObjectsInfo=function(t,e){throw Error(r+": getGraphicObjectsInfo")},e.updatePageInfo=function(t,e){throw Error(r+": updatePageInfo")},e.setPageRotation=function(t,e,n){throw Error(r+": setPageRotation")},e.addPageImage=function(t,e,n,i,o,s,a){throw Error(r+": addPageImage")},e.addWatermark=function(t,e,n){throw Error(r+": addWatermark")},e.getGraphicsObjectAtPoint=function(t,e,n,i,o,s){throw Error(r+": getGraphicsObjectAtPoint")},e.getGraphicsObjectsByRect=function(t,e,n,i,o,s){throw new Error(r+"getGraphicsObjectsByRect")},e.setGraphicsObjectMatrix=function(t,e,n,i){throw Error(r+": setGraphicsObjectMatrix")},e.setGraphicsObjectRect=function(t,e,n,i){throw Error(r+": setGraphicsObjectRect")},e.getGraphicsObjectBitmap=function(t,e,n,i,o){throw Error(r+": getGraphicsObjectBitmap")},e.setGraphicsObjectBorderStyle=function(t,e,n,i,o){throw Error(r+": setGraphicsObjectBorderStyle")},e.setGraphicsObjectBorderWidth=function(t,e,n,i){throw Error(r+": setGraphicsObjectBorderWidth")},e.setGraphicsObjectBorderColor=function(t,e,n,i){throw Error(r+": setGraphicsObjectBorderColor")},e.setGraphicsObjectFillColor=function(t,e,n,i){throw Error(r+": setGraphicsObjectFillColor")},e.setGraphicsObjectOpacity=function(t,e,n,i){throw Error(r+": setGraphicsObjectOpacity")},e.addGraphicsObject=function(t,e,n){throw Error(r+": addGraphicsObject")},e.setImageObjectOpacity=function(t,e,n,i){throw Error(r+": setImageObjectOpacity")},e.setImageObjectRotation=function(t,e,n,i){throw Error(r+": setImageObjectRotation")},e.getImageObjectStream=function(t,e,n){throw Error(r+": getImageObjectStream")},e.insertSubAction=function(t,e,n,i){throw Error(r+": insertSubAction")},e.setSubAction=function(t,e,n,i){throw Error(r+": setSubAction")},e.removeAllSubActions=function(t,e){throw Error(r+": removeAllSubActions")},e.removeSubAction=function(t,e,n){throw Error(r+": removeSubAction")},e.setActionData=function(t,e,n){throw Error(r+": setActionData")},e.moveAction=function(t,e,n,i){throw Error(r+": moveAction")},e.removeGraphicsObject=function(t,e,n){throw Error(r+": removeGraphicsObject")},e.removePageAllAnnot=function(t,e){throw Error(r+": removePageAllAnnot")},e.setTextObjectChar=function(t,e,n,i){throw Error(r+": setTextObjectChar")},e.setTextObjectItalic=function(t,e,n,i){throw Error(r+": setTextObjectItalic")},e.setTextObjectBold=function(t,e,n,i){throw Error(r+": setTextObjectBold")},e.setTextObjectFontSize=function(t,e,n,i){throw Error(r+": setTextObjectFontSize")},e.setTextObjectStandardFont=function(t,e,n,i){throw Error(r+": setTextObjectStandardFont")},e.setTextObjectFontByName=function(t,e,n,i,o,s){throw Error(r+": setTextObjectFontByName")},e.getTextObjectWoff=function(t,e,n){throw Error(r+": getTextObjectWoff")},e.getAnnotWoff=function(t,e,n){throw Error(r+": getAnnotWoff")},e.drmEncrypt=function(t,e){throw Error(r+": drmEncrypt")},e.getAction=function(t,e,n){throw Error(r+": getAction")},e.getActionFileStream=function(t,e,n){throw Error(r+": getActionFileStream")},e.getTemplates=function(t){throw Error(r+": getTemplates")},e.hideTemplate=function(t,e,n){throw Error(r+": hideTemplate")},e.spawnPage=function(t,e,n,i,o){throw Error(r+": spawnPage")},e.setFieldsValue=function(t,e,n){throw Error(r+": setFieldsValue")},e.removeTemplate=function(t,e){throw Error(r+": removeTemplate")},e.setUniqueId=function(t,e,n,i){throw Error(r+": setUniqueId")},e.getFontBufferByName=function(t,e){throw Error(r+": getFontBufferByName")},e.getPageSizes=function(t,e){throw Error(r+": getPageSizes")},e.setMeasureRatio=function(t,e,n,i){throw Error(r+": setMeasureRatio")},e.setMeasureUnit=function(t,e,n,i){throw Error(r+": setMeasureUnit")},e.setMeasureConversionFactor=function(t,e,n,i){throw Error(r+": setMeasureConversionFactor")},e.startImportPages=function(t,e,n,i,o,s,a,c){throw Error(r+": startImportPages")},e.importPagesFromPDFDocs=function(t,e,n,i){throw Error(r+": importPagesFromPDFDocs")},e.exportPagesToPDFDocs=function(t,e,n,i,o){throw Error(r+": exportPagesToPDFDocs")},e.extractPages=function(t,e,n,i,o){throw Error(r+": extractPages")},e.getHeaderFooter=function(t){throw Error(r+": getHeaderFooter")},e.updateHeaderFooter=function(t,e){throw Error(r+": updateHeaderFooter")},e.addHeaderFooter=function(t,e){throw Error(r+": addHeaderFooter")},e.removeHeaderFooter=function(t){throw Error(r+": removeHeaderFooter")},e.paste=function(t,e,n,i,o,s){throw Error(r+": paste")},e.setDefaultAp=function(t,e,n,i){throw Error(r+": setDefaultAp")},e.addAnnotGroup=function(t,e,n,i){throw Error(r+": addAnnotGroup")},e.verifySignature=function(t,e,n){throw Error(r+": verifySignature")},e.getDigitalSignatureInfo=function(t,e,n){throw Error(r+": getDigitalSignatureInfo")},e.verifyDocSignature=function(t,e){throw Error(r+": verifyDocSignature")},e.verifySignatureLtv=function(t,e,n){throw Error(r+": verifySignatureLtv")},e.clearSignature=function(t,e,n){throw Error(r+": clearSignature")},e.setCalloutLinePoints=function(t,e,n,i){throw Error(r+": setCalloutLinePoints")},e.getGraphicsObjectByIndex=function(t,e,n){throw Error(r+": getGraphicsObjectByIndex")},e.getGraphicsObjectByIndex=function(t,e,n){throw Error(r+": getGraphicsObjectByIndex")},e.getGraphicsObjectsCount=function(t,e){throw Error(r+": getGraphicsObjectsCount")},e.getFontsInfo=function(t){notImplemented()},e.setInkList=function(t,e,n,i){throw Error(r+": setInkList")},e.getBookmarks=function(t){throw Error(r+": getBookmarks")},e.createRootBookmark=function(t){throw Error(r+": createRootBookmark")},e.insertBookmark=function(t,e,n,i,o,s,a){throw Error(r+": insertBookmark")},e.setBookmarkProperty=function(t,e,n){throw Error(r+": setBookmarkProperty")},e.removeBookmark=function(t,e){throw Error(r+": removeBookmark")},e.getBookmarkDestination=function(t,e){throw Error(r+": getBookmarkDestination")},e.setBookmarkDestination=function(t,e,n){throw Error(r+": setBookmarkDestination")},e.getBookmarkAction=function(t,e){throw Error(r+": getBookmarkAction")},e.setBookmarkAction=function(t,e,n){throw Error(r+": setBookmarkAction")},e.setPageAction=function(t,e,n){throw Error(r+": setBookmarkAction")},e.moveBookmarkAction=function(t,e,n){throw Error(r+": setBookmarkAction")},e.removeBookmarkAction=function(t,e,n){throw Error(r+": removeBookmarkAction")},e.getLayerNodes=function(t){throw Error(r+": getLayerNodes")},e.setLayerNodeVisiable=function(t,e,n){throw Error(r+": setLayerNodeVisiable")},e.getThumb=function(t,e,n,i){throw Error(r+": getThumb")},e.getMediaBoxBitmap=function(t,e,n,i){throw Error(r+": getMediaBoxBitmap")},e.movePageTo=function(t,e,n){throw Error(r+": movePageTo")},e.insertPage=function(t,e,n,i){throw Error(r+": insertPage")},e.removePage=function(t,e){throw Error(r+": removePage")},e.setAnnotIconName=function(t,e,n,i){throw Error(r+": setAnnotIconName")},e.getFileattachmentStream=function(t,e,n,i){throw Error(r+": getFileattachmentStream")},e.setCalloutLineEndingStyle=function(t,e,n,i){throw Error(r+": setCalloutLineEndingStyle")},e.getDocAdditionalActions=function(t){throw Error(r+": getDocAdditionalActions")},e.calcPageContentBBox=function(t,e,n){throw Error(r+": calcPageContentBBox")},e.getPageBox=function(t,e,n){throw Error(r+": getPageBox")},e.setPageBox=function(t,e,n,i){throw Error(r+": setPageBox")},e.setPageSize=function(t,e,n,i){throw Error(r+": setPageSize")},e.copyPages=function(t,e,n){throw Error(r+": copyPages")},e.saveCopyPagesData=function(t,e){throw Error(r+": saveCopyPagesData")},e.pastePages=function(t,e){throw Error(r+": pastePages")},e.embedAllPageThumbnail=function(t){throw Error(r+": embedAllPageThumbnail")},e.removeEmbeddedPageThumbnail=function(t){throw Error(r+": removeEmbeddedPageThumbnail")},e.cancelEmbedAllPageThumbnail=function(t){throw Error(r+": cancelEmbedAllPageThumbnail")},e.cancelRemoveEmbeddedPageThumbnail=function(t){throw Error(r+": cancelRemoveEmbeddedPageThumbnail")},e.getAllBoxes=function(t,e){throw Error(r+": getAllBoxes")},e.setAllBoxesByIndexes=function(t,e,n,i,o,s,a,c){throw Error(r+": setAllBoxesByIndexes")},e.getPageFormat=function(t,e,n,i,o="",s="",a=void 0){throw Error(r+": getPageFormat")},e.getPageFormatThumb=function(t,e,n,i,o,s,a,c){throw Error(r+": getPageFormatThumb")},e.addPageFormat=function(t,e,n,i){throw Error(r+": addPageFormat")},e.removeAllPageFormat=function(t,e){throw Error(r+": removeAllPageFormat")},e.extractPrintPages=function(t,e){throw Error(r+": extractPrintPages")},e.setDocColors=function(t,e){throw Error(r+": setDocColors")},e.markRedactAnnot=function(t,e,n,i){throw Error(r+": markRedactAnnot")},e.applyRedaction=function(t){throw Error(r+": applyRedaction")},e.redactApply=function(t,e,n){throw Error(r+": redactApply")},e.setRedactApplyFillColor=function(t,e,n,i){throw Error(r+": setRedactApplyFillColor")},e.getAnnotsRawData=function(t,e){throw Error(r+": getAnnotsRawData")},e.hasForm=function(t){throw Error(r+": hasForm")},e.setSubject=function(t,e,n,i){throw Error(r+": setSubject")},e.setTitle=function(t,e,n,i){throw Error(r+": setTitle")},e.setCreateDateTime=function(t,e,n,i){throw Error(r+": setCreateDateTime")},e.setModifiedDateTime=function(t,e,n,i){throw Error(r+": setModifiedDateTime")},e.setTabOrder=function(t,e,n){throw Error(r+": setTabOrder")},e.getTabOrder=function(t,e){throw Error(r+": getTabOrder")},e.setStructureOrder=function(t,e,n){throw Error(r+": setStructureOrder")},e.setAlignment=function(t,e,n,i){throw Error(r+": setAlignment")},e.getStdCipherOptions=function(t){throw Error(r+": getStdCipherOptions")},e.setAnnotRotation=function(t,e,n,i){throw Error(r+": setAnnotRotation")},e.setImage=function(t,e,n,i){throw Error(r+": setImage")},e.getWidgetMkOption=function(t,e,n){throw Error(r+": getWidgetMkOption")},e.setWidgetIconCaptionRelation=function(t,e,n,i){throw Error(r+": setWidgetIconCaptionRelation")},e.setWidgetHighlighting=function(t,e,n,i){throw Error(r+": setWidgetHighlighting")},e.setWidgetMkCaption=function(t,e,n,i,o){throw Error(r+": setWidgetMkCaption")},e.setWidgetMkIcon=function(t,e,n,i,o){throw Error(r+": setWidgetMkIcon")},e.getWidgetIconFitOption=function(t,e,n){throw Error(r+": getWidgetIconFitOption")},e.setWidgetIconFitOption=function(t,e,n,i){throw Error(r+": setWidgetIconFitOption")},e.getAllModuleLicenseRight=function(){throw Error(r+": getAllModuleLicenseRight")},e.ensureSideModeLoaded=function(){throw Error(r+": ensureSideModeLoaded")},e.moveGraphicsObjectByPosition=function(t,e,n,i,o){throw Error(r+": moveGraphicsObjectByPosition")},e.setDictionaryEntry=function(t,e,n,i,o){throw Error(r+": setDictionaryEntry")},e.getDictionaryEntry=function(t,e,n,i){throw Error(r+": getDictionaryEntry")},e.resetAppearanceStream=function(t,e,n){throw Error(r+": resetAppearanceStream")},e.renderTemplatesByObjNum=function(t,e){throw Error(r+": renderTemplatesByObjNum")},e.getNameTree=function(t,e){throw Error(r+": getNameTree")},e.addNameTreeObj=function(t,e,n,i){throw Error(r+": addNameTreeObj")},e.removeNameTreeObj=function(t,e,n){throw Error(r+": removeNameTreeObj")},e.replaceNameTreeObj=function(t,e,n,i){throw Error(r+": replaceNameTreeObj")},e.renameNameTreeObj=function(t,e,n,i){throw Error(r+": renameNameTreeObj")},e.getPageIndexByObjNum=function(t,e){throw Error(r+": getPageIndexByObjNum")},e.nameTreeTemplatesToPages=function(t,e){throw Error(r+": nameTreeTemplatesToPages")},e.nameTreePagesToTemplates=function(t,e){throw Error(r+": nameTreePagesToTemplates")},e.showNameTreePageAtTheEnd=function(t){throw Error(r+": showNameTreePageAtTheEnd")},e.hideNameTreePage=function(t,e){throw Error(r+": hideNameTreePage")},e.addFileSpec=function(t,e,n,i){throw Error(r+": addFileSpec")},e.setFileSpecDesc=function(t,e,n){throw Error(r+": setFileSpecDesc")},e.getFileSpecStream=function(t,e,n){throw Error(r+": getFileSpecStream")},e.addEmbeddedFileByAttachments=function(t,e,n){throw Error(r+": addEmbeddedFileByAttachments")},e.setEmbeddedFileByAttachments=function(t,e,n){throw Error(r+": setEmbeddedFileByAttachments")},e.removeEmbeddedFileByAttachments=function(t,e){throw Error(r+": removeEmbeddedFileByAttachments")},e.moveControl=function(t,e,n,i){throw Error(r+": moveControl")},e.getAnnotIdArrayByOrder=function(t,e){throw Error(r+": getAnnotIdArrayByOrder")},e.getPageDictionary=function(t,e){throw Error(r+": getPageDictionary")},e.getSuggestedFormDesignerRect=function(t,e){throw Error(r+": getSuggestedFormDesignerRect")},e.getPDFDictInfo=function(t){throw Error(r+": getInfo")},e.getPageLabels=function(t,e){throw Error(r+": getPageLabels")},e.startFormDesignerAssit=function(t){throw Error(r+": startFormDesignerAssit")},e.stopFormDesignerAssit=function(t){throw Error(r+": stopFormDesignerAssit")},e.hasKey=function(t,e,n){throw Error(r+": getInfo")},e.setAt=function(t,e,n,i){throw Error(r+": setAt")},e.getAt=function(t,e,n){throw Error(r+": getAt")},e.autoRecognitionForm=function(t){throw Error(r+": autoRecognitionForm")},e.isStaticXFA=function(t){throw Error(r+": isStaticXFA")},e.removeXFA=function(t){throw Error(r+": removeXFA")},e.createWebLinks=function(t,e,n){throw Error(r+": createWebLinks")},e.removeWebLinks=function(t,e,n){throw Error(r+": removeWebLinks")},e.linkHasPA=function(t,e,n){throw Error(r+": linkHasPA")},e.linkResetAByPA=function(t,e,n){throw Error(r+": linkResetAByPA")},e.getDestinationsArray=function(t){throw Error(r+": getDestinationsArray")},e.deleteDestination=function(t,e,n){throw Error(r+": deleteDestination")},e.renameDestination=function(t,e,n,i){throw Error(r+": renameDestination")},e.createDestination=function(t,e){throw Error(r+": createDestination")},e.resetDestination=function(t,e){throw Error(r+": resetDestination")},e.moveBookmark=function(t,e,n,i){throw Error(r+": moveBookmark")},e.combineFormsToCSV=function(t,e){throw Error(r+": combineFormsToCSV")},e.reversePages=function(t,e){throw Error(r+":reversePages")},e.movePagesTo=function(t,e,n){throw Error(r+": movePagesTo")},e.removePages=function(t,e){throw Error(r+": removePages")},e.insertBlankPages=function(t,e,n,i){throw Error(r+": insertBlankPages")},e.insertBlankPages2=function(t,e,n,i){throw Error(r+": insertBlankPages2")},e.rotatePages=function(t,e,n){throw Error(r+": rotatePages")},e.getPageIndexByLabelText=function(t,e){throw Error(r+": getPageIndexByLabelText")},e.getCurrentPageLabelInfo=function(t,e){throw Error(r+": getCurrentPageLabelInfo")},e.checkDocIsUseLogicPage=function(t){throw Error(r+": checkDocIsUseLogicPage")},e.formatPageNumbers=function(t,e,n,i,o){throw Error(r+": formatPageNumbers")},e.getPortfolioTreeNode=function(t){throw Error(r+": getPortfolioTreeNode")},e.sendSortFolioParam=function(t,e,n){throw Error(r+": sendSortFolioParam")},e.getFolioTreeRoot=function(t){throw Error(r+": getFolioTreeRoot")},e.getFolioFileInfo=function(t){throw Error(r+": getFolioFileInfo")},e.getSnappedPoint=function(t,e,n,i){throw new Error(r+": getSnappedPoint")},e.getPageTextRectCount=function(t,e){throw new Error(r+": getPageTextRectCount")},e.getPageTextByRectIndex=function(t,e,n){throw new Error(r+": getPageTextByRectIndex")},e.isCPDF=function(t){throw Error(r+": isCPDF")},e.getDocURI=function(t){throw Error(r+": getDocURI")},e.convertToCPDF=function(t,e,n,i,o){throw Error(r+": convertToCPDF")},e.removeCDocId=function(t,e,n,i,o){throw Error(r+": removeCDocId")},e.removeLayerNode=function(t,e){throw Error(r+": removeLayerNode")},e.getLayersByPage=function(t,e){throw Error(r+": getLayersByPage")},e.updateLayerInfo=function(t,e){throw Error(r+": updateLayerInfo")},e.flattenLayers=function(t){throw Error(r+": flattenLayers")},e.mergeLayers=function(t,e,n){throw Error(r+": mergeLayers")},e.getLayerRelatedAnnots=function(t,e){throw Error(r+": getLayerRelatedAnnots")},e.layerMoveTo=function(t,e,n,i){throw Error(r+": layerMoveTo")},e.getInfos=function(t){throw Error(r+": getInfos")},e.hasDocIsWrapped=function(t){throw Error(r+": hasDocIsWrapped")},e.removeMetadata=function(t,e){throw Error(r+": removeMetadata")},e.cloneGraphicObject=function(t,e,n,i){throw new Error(r+": cloneGraphicObject")},e.startReplacePages=function(t,e,n,i,o){throw Error(r+": startReplacePages")},e.normalizePage=function(t,e){throw new Error(r+": normalizePage")},e.getText=function(t,e,n,i){throw new Error(r+": getText")},e.cancelTaskProgress=function(t,e){throw new Error(r+": cancelTaskProgress")},e.getViewportRect=function(t,e){throw new Error(r+": getViewportRect")},e.getMeasureScaleRatio=function(t,e){throw new Error(r+": getMeasureScaleRatio")},e.setMeasureScaleRatio=function(t,e,n,i){throw new Error(r+": setMeasureScaleRatio")},e.exportMeasureData=function(t,e){throw new Error(r+": exportMeasureData")},e.setRenderConfigLineWeight=function(t,e){throw new Error(r+": setRenderConfigLineWeight")},e.setPageDisplayPreferences=function(t,e){throw new Error(r+": pageDisplayPreferences")},e.getPDFDocFromImageFile=function(t,e){throw new Error(r+": getPDFDocFromImageFile")},e.createSummarizeComments=function(t,e,n){throw new Error(r+": createSummarizeComments")},e.hiddenDataSanitizeDocument=function(t){throw new Error(r+": hiddenDataSanitizeDocument")},e.hiddenDataRemoveHiddenInfo=function(t,e){throw new Error(r+": hiddenDataRemoveHiddenInfo")},e.getCurFileSymbolId=function(t){throw new Error(r+": getCurFileSymbolId")},e.getFadeOutBackground=function(t){throw new Error(r+": getFadeOutBackground")},e.getConvertToMono=function(t){throw new Error(r+": getConvertToMono")},e.setPageTransition=function(t,e,n,i,o){throw new Error(r+": setPageTransition")},e.getPageTransitionByIndex=function(t,e){throw new Error(r+": getPageTransitionByIndex")},e.getPageTransition=function(t,e){throw new Error(r+": getPageTransition")},e.generateDocHash=function(){throw new Error(r+": generateDocHash")},e.getSignIdForEvidence=function(){throw new Error(r+": getSignIdForEvidence")},e.getTextInRect=function(){throw new Error(r+": getTextInRect")},e.getRichText=function(t,e,n){throw Error(r+": getRichText")},e.setRichText=function(t,e,n,i){throw Error(r+": setRichText")},e.addRichText=function(t,e,n,i){throw Error(r+": addRichText")},e.insertRichText=function(t,e,n,i){throw Error(r+": insertRichText")},e.removeRichText=function(t,e,n,i){throw Error(r+": removeRichText")},e.assignSignerForESignCN=function(){throw new Error(r+": assignSignerForESignCN")},e.setESignCNFlowSignMode=function(){throw new Error(r+": setESignCNFlowSignMode")},e.getESignCNFlowSignMode=function(){throw new Error(r+": getESignCNFlowSignMode")},e.isESignCNFile=function(){throw new Error(r+": isESignCNFile")},e.getESignCNMode=function(){throw new Error(r+": getESignCNMode")},e.getAssignInfoForESignCN=function(){throw new Error(r+": getAssignInfoForESignCN")},e.getOrderOfSignFlowFile=function(){throw new Error(r+": getOrderOfSignFlowFile")},e.checkFieldWhetherFill=function(){throw new Error(r+": checkFieldWhetherFill")},e.isESignCNSignature=function(){throw new Error(r+": isESignCNSignature")},e.setSignatureAP=function(){throw new Error(r+": setSignatureAP")},e.getFlowSignInfo=function(){throw new Error(r+": getFlowSignInfo")},e.addPagingSealSignature=function(){throw new Error(r+": addPagingSealSignature")},e.getAllPagingSealSignatures=function(){throw new Error(r+": getAllPagingSealSignatures")},e.removePagingSealSignature=function(){throw new Error(r+": removePagingSealSignature")},e.updatePagingSealSignature=function(){throw new Error(r+": updatePagingSealSignature")},e.getAllPagingSigsInfo=function(){throw new Error(r+": getAllPagingSealSignatures")},e.stampSetAtName=function(){throw new Error(r+": stampSetAtName")},e.addAuditTrail=function(){throw new Error(r+": addAuditTrail")},e.getDocAuditTrail=function(){throw new Error(r+": getDocAuditTrail")},e.destroyForm=function(){throw new Error(r+": destroyForm")},e.updatePropAuthDictForESignCN=function(){throw new Error(r+": updatePropAuthDictForESignCN")},e.transformPage=function(t,e,n){throw new Error(r+": transformPage")},e.getSignatureBitmap=function(t,e){throw new Error(r+": getSignatureBitmap")},e.comparePDFDocuments=function(t,e,n,i){throw new Error(r+":comparePDFDocuments")},e.setSignatureBitmap=function(t,e){throw new Error(r+": setSignatureBitmap")},e.emitPageBatchProcessor=function(t,e,n){throw new Error(r+": emitPageBatchProcessor")},e.getLastSaveFlags=function(t){throw Error(r+": getLastSaveFlags")},e.customProtectDoc=function(t,e){throw Error(r+": customProtectDoc")},e.drawTextString=function(t,e){throw new Error(r+": drawTextString")},e.updateCalloutFigure=function(t,e,n,i,o,s){throw Error(r+": updateCalloutFigure")},e.updateRectFigure=function(t,e,n,i,o){throw Error(r+": updateRectFigure")},e.updatePathPoint=function(t,e,n,i,o){throw Error(r+": updatePathPoint")},t}();e.Z=o},7402:function(t,e,n){"use strict";n(3964);var i=n(3889);let r=function(){},o=function(){function t(t){this.cacheMap={},this.callMap={},this.listeners={};this.setWorker(t),this.promises=[],this.workflow={out:[]},this._isIE10=i.isIE10,this.isDestroyed=!1}var e=t.prototype;return e.destroy=function(){this.isDestroyed||(this.isDestroyed=!0,this.worker&&this.worker.terminate())},e.setWorker=function(t){let e=this.cacheMap,n=this.callMap,i=this.listeners;this.worker=t,t.onmessage=o=>{let s=o.data;if(s.workflow){let t=this.workflow[s.workflow];return t?t.forEach((t=>t(s))):void 0}let a=s.destroyId;if(a)return void delete n[a];let c=s.params;if(s.uiListener){let t=i[s.uiListener];if(t)for(var l=0,h=t.length;l<h;l++)t[l](c);return}let u=s.callId;if(u)Promise.resolve((n[u]||r)(c)).then((e=>{let n=e instanceof ArrayBuffer?[e]:[];this._isIE10&&(n=null),t.postMessage({backId:s.backId,params:e},n)}));else{let t=s.id,n=e[t];delete e[t];let i=+s.type;try{n[["resolve","reject"][i]](c)}catch(t){0}setTimeout((()=>{if(Object.keys(e).length<1){let t=this.listeners.idle;t&&t.forEach((t=>t()));let e=this.listeners.reset;e&&e.forEach((t=>t()))}}),0)}},t.onerror=t=>{console.error("WorkerError",t)}},e.emit=function(t,e,n=[],r={}){return this._isIE10&&(n=n[0]),new Promise(((o,s)=>{const a=(0,i.getUniqueId)("worker");this.cacheMap[a]={resolve:o,reject:s};try{this.worker.postMessage({name:t,params:e,id:a,more:r},n)}catch(n){this.worker.postMessage({name:t,params:e,id:a,more:r})}}))},e.calls=function(t){const e=(0,i.getUniqueId)("worker_call");return this.callMap[e]=t,e},e.releaseCall=function(t){delete this.callMap[t]},e.on=function(t,e){(this.listeners[t]=this.listeners[t]||[]).push(e)},e.registerWorkflow=function(t="out",e=(()=>{})){this.workflow[t]?this.workflow[t].push(e):this.workflow[t]=[e]},e.unregisterWorkflow=function(t,e){let n=this.workflow[t].indexOf(e);n>=0&&this.workflow[t].splice(n,1)},e.off=function(t,e){let n=this.listeners[t];if(!n)return;let i=n.indexOf(e);-1!=i&&n.splice(i,1)},e.over=function(t){},t}();e.Z=o},4266:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return b}});var i=n(4578),r=n(5785),o=n(7326),s=(n(752),n(6265),n(3964),n(8730),n(9307),n(6409),n(9976),n(3356),n(8628)),a=n(7402),c=n(3889);const l=[["getRichText",["docId","pageId","annotId"]],["setRichText",["docId","pageId","annotId","datas"]],["addRichText",["docId","pageId","annotId","datas"]],["insertRichText",["docId","pageId","annotId","datas"]],["removeRichText",["docId","pageId","annotId","indexes"]],["enableCaption",["docId","pageId","annotId","enable"]],["setCaptionColor",["docId","pageId","annotId","captionColor"]],["getDictValue",["docId","pageId","annotId","key"]],["setDictValue",["docId","pageId","annotId","key","value"]],["updatePathPoint",["docId","pageId","annotId","index","point"]]],h=[["getTextByIndex",["docId","pageId","start","end"]],["emitPageBatchProcessor",["docId","pageId","options"]],["getTextRects",["docId","pageId","rects"]],["clearCacheObejcts",["docId","pageId"]],["getTextIndexAtPoint",["docId","pageId","point","tolerance"]],["getTextRectsByIndexes",["docId","pageId","startIndex","endIndex"]]],u=[["getLastSaveFlags",["docId"]],["getFontCount",["docId"]],["getFont",["docId","index"]],["signForESignUS",["docId","signInfo","fieldList"],!0],["addEmbeddedFile",["docId","key","fileSpec"]],["setEmbeddedFile",["docId","key","fileSpec"]],["getEmbeddedFile",["docId","key"]],["hasAnnots",["docId","pageIndex"]],["getAllPageAnnotCount",["docId"]],["getAllAnnotsData",["docId"]],["destroyPage",["docId","pageId"]],["getVersionID",["docId"]],["getRootLayerNodeChildrenCount",["docId"]]];function d(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}function f(t){let e=[];return t instanceof ArrayBuffer&&(e=[t]),e}const p="FoxitPDFSDKForWeb_JREngineCache_",g=p+"wasmBinary",m=p+"asmMem",v=p+"asmJs";var y=function(t){function e(e){var n;let i;n=t.call(this,e)||this;const s=()=>{[].concat(d(r.Z,l),d(r.Z,h),d(r.Z,u)).forEach((t=>{const[e,i]=t;n[e]=(...t)=>n.workerPromise.emit(e,(t=>(...e)=>{let n={},i=0;return t.map((t=>{i>=e.length||(n[t]=e[i++])})),n})(i).apply(void 0,t))}))};if(i=e.readyWorker){n.readyWorker=i,w(n.workerPromise=new a.Z(i.worker));let t=function(){e.licenseSN=e.licenseKey=e.l=""};return i.initJREnginePromise.then(t,t),s(),(0,o.Z)(n)}let f=e.workerPath,p=e.workerBlobUrl;"/"!==f[f.length-1]&&(f+="/");let g=n.workerUrl=f+"WebPDFJRWorker.js?h=81b5d2148abf85e9e9d68f4c49c58323",m=p||g,v=new Worker(m);return c.isIE&&(v.terminate(),v=new Worker(m)),w(n.workerPromise=new a.Z(v)),s(),n}(0,i.Z)(e,t);var n=e.prototype;return n.setWorker=function(t){this.workerPromise.setWorker(t)},n.registerWorkflow=function(t,e){this.workerPromise.registerWorkflow(t,e)},n.unregisterWorkflow=function(t,e){this.workerPromise.unregisterWorkflow(t,e)},n.init=function(){let t;if(t=this.readyWorker)return new Promise((function(e,n){return t.initJREnginePromise.then(e,n)}));let e,n={};(e=localStorage.getItem(g))&&(n.wasmBinary=e),(e=localStorage.getItem(m))&&(n.asmMem=e),(e=localStorage.getItem(v))&&(n.asmJs=e);let i=this.option,r=this.workerPromise;i.cache=n,i.compatibilityURL=r.calls((function(t){return URL.createObjectURL(t)})),i.d=location.href;let o=r.emit("initJREngine",i).then((t=>t));return o.finally((()=>{r.releaseCall(i.compatibilityURL)})),o},n.on=function(t,e){return this.workerPromise.on(t,e)},n.off=function(t,e){return this.workerPromise.off(t,e)},n.handleGroupMarkup=function(t,e,n,i){return this.workerPromise.emit("handleGroupMarkup",{docId:t,pageId:e,annotIds:n,isGroup:i})},n.continueProgress=function(t){return this.workerPromise.emit("progressContinue",{progressiveId:t})},n.cancleProgress=function(t){return this.workerPromise.emit("cancleProgress",{progressiveId:t})},n.getPDFDocIdByFile=function(t,e){let n=f(t);return this.workerPromise.emit("getPDFDocByFile",{file:t,option:e},n)},n.createNewDoc=function(t,e,n){return this.workerPromise.emit("createNewDoc",{title:t,author:e,pageSize:n})},n.createNewPortfolioDoc=function(t,e,n){const i=[t].concat(d(r.Z,e||[]));return this.workerPromise.emit("createNewPortfolioDoc",{fileCoversheet:t,files:e,title:n},i)},n.getPDFDocIdByChunk=function(t,e){let n=this.workerPromise.calls(e),i=this.workerPromise.emit("getPDFDocAsync",{size:t,getChunk:n});return i.finally((()=>{this.workerPromise.releaseCall(n)})),i},n.getPDFDocIdByHttpRangeRequest=function(t){return this.workerPromise.emit("getPDFDocIdByHttpRangeRequest",{size:t.size,range:t.range})},n.getPDFDocIdByArrayBuffer=function(t){return this.workerPromise.emit("getPDFDocByArrayBuffer",{buffer:t},[t])},n.setIcons=function(t=""){return this.workerPromise.emit("setIcons",{icons:t})},n.addIcon=function(t){return this.workerPromise.emit("addIcon",{icon:t})},n.removeIcon=function(t,e,n){return this.workerPromise.emit("removeIcon",{type:t,catalog:e,name:n})},n.checkCertificatePassword=function(t,e){return this.workerPromise.emit("checkCertificatePassword",{pfxFile:t,password:e})},n.getCertificateInfo=function(t,e){return this.workerPromise.emit("getCertificateInfo",{file:t,password:e})},n.createCertificateFile=function(t,e){return this.workerPromise.emit("createCertificateFile",{docId:t,info:e})},n.getCertificateSerials=function(t){return this.workerPromise.emit("getCertificateSerials",{docId:t})},n.parseByCertificate=function(t,e){return this.workerPromise.emit("parseByCertificate",{docId:t,info:e})},n.parsePDFDocByPassword=function(t,e,n){let i=[],r=n.fdf;return r&&r.file instanceof ArrayBuffer&&(i=[r.file]),this.workerPromise.emit("parsePDFDocByPassword",{id:t,password:e,initData:n},i)},n.getPDFDocInfoById=function(t){return this.workerPromise.emit("getPDFDocInfoById",t)},n.getMetadata=function(t){return this.workerPromise.emit("getMetadata",t)},n.setMetadataValue=function(t,e,n){return this.workerPromise.emit("setMetadataValue",{id:t,key:e,value:n})},n.getFileVersion=function(t){return this.workerPromise.emit("getFileVersion",t)},n.isLinearized=function(t){return this.workerPromise.emit("isLinearized",{docId:t})},n.loadForm=function(t){return this.workerPromise.emit("loadForm",{docId:t})},n.updateFormControl=function(t,e,n,i,r){return this.workerPromise.emit("updateFormControl",{docId:t,fieldName:e,objectNumber:n,key:i,value:r})},n.updateField=function(t,e,n,i){return this.workerPromise.emit("updateField",{docId:t,title:e,key:n,value:i})},n.reloadFieldByName=function(t,e){return this.workerPromise.emit("reloadFieldByName",{docId:t,fieldName:e})},n.updateMKProperty=function(t,e,n,i,r){return this.workerPromise.emit("updateMKProperty",{docId:t,pageId:e,annotId:n,key:i,value:r})},n.setWidgetAS=function(t,e,n,i){return this.workerPromise.emit("setWidgetAS",{docId:t,pageId:e,annotId:n,AS:i})},n.setFieldValue=function(t,e,n){return this.workerPromise.emit("setFieldValue",{docId:t,title:e,value:n})},n.formFillerEvent=function(t,e,n,i){return this.workerPromise.emit("formFillerEvent",{docId:t,type:e,pageIndex:n,point:i})},n.getFieldsValue=function(t){return this.workerPromise.emit("getFieldsValue",{docId:t})},n.addControl=function(t,e,n,i,r,o){return this.workerPromise.emit("addControl",{docId:t,pageIndex:e,fieldName:n,fieldType:i,rect:r,options:o})},n.createFieldByCopyControl=function(t,e,n,i,r,o,s,a){return this.workerPromise.emit("createFieldByCopyControl",{docId:t,pageIndex:e,fieldType:n,isImgFieldType:i,newFieldName:r,newRect:o,srcFieldName:s,srcObjectNumber:a})},n.validateFieldName=function(t,e,n){return this.workerPromise.emit("validateFieldName",{docId:t,fieldName:e,fieldType:n})},n.renameField=function(t,e,n){return this.workerPromise.emit("renameField",{docId:t,fieldName:e,newName:n})},n.removeField=function(t,e){return this.workerPromise.emit("removeField",{docId:t,fieldName:e})},n.removeControl=function(t,e,n,i){return this.workerPromise.emit("removeControl",{docId:t,fieldName:n,pageIndex:e,controlObjectNumber:i})},n.isLastSignature=function(t,e){return this.workerPromise.emit("isLastSignature",{docId:t,fieldName:e})},n.fixPageFields=function(t,e){return this.workerPromise.emit("fixPageFields",{docId:t,pageIndex:e})},n.hasFixedPageFields=function(t,e){return this.workerPromise.emit("hasFixedPageFields",{docId:t,pageIndex:e})},n.getControlCount=function(t,e){return this.workerPromise.emit("getControlCount",{docId:t,pageIndex:e})},n.copyControls=function(t,e,n,i){return this.workerPromise.emit("copyControls",{docId:t,pageIndex:e,dstPageIndex:n,controls:i})},n.getControlPageIndex=function(t,e,n){return this.workerPromise.emit("getControlPageIndex",{docId:t,fieldName:e,objectNumber:n})},n.getPageInfoByIndex=function(t,e){return this.workerPromise.emit("getPageInfoByIndex",{id:t,index:e})},n.setRenderFlag=function(t,e){return this.workerPromise.emit("setRenderFlag",{docId:t,flags:e})},n.getPageBitmap=function(t,e,n=1,i=0,r,o=["page"],s="view",a="",c=!1,l){return this.workerPromise.emit("getPageBitmap",{docId:t,pageId:e,scale:n,rotate:i,rect:r,flags:o,usage:s,id:a,isSharedPage:c,annotData:l})},n.getPageAndHighlightBitmap=function(t,e,n=1,i=0,r,o){return this.workerPromise.emit("getPageAndHighlightBitmap",{docId:t,pageId:e,scale:n,rotate:i,rect:r,exclude:o})},n.clearDesignerAssitCache=function(t,e){return this.workerPromise.emit("clearDesignerAssitCache",{docId:t,pageId:e})},n.clearAllDesignerAssistCache=function(t){return this.workerPromise.emit("clearAllDesignerAssistCache",{docId:t})},n.getAnnotBitmapByRange=function(t,e,n,i,r,o){return this.workerPromise.emit("getAnnotBitmapByRange",{docId:t,pageId:e,range:n,scale:i,rotate:r,rect:o})},n.getAnnot=function(t,e,n){return this.workerPromise.emit("getAnnot",{docId:t,pageId:e,annotId:n})},n.getPageAnnotIDList=function(t,e){return this.workerPromise.emit("getPageAnnotIDList",{docId:t,pageId:e})},n.getAnnots=function(t,e,n,i){return this.workerPromise.emit("getAnnots",{docId:t,pageId:e,idList:n,reload:i})},n.getAnnotBitmap=function(t,e,n,i,r,o,s){return this.workerPromise.emit("getAnnotBitmap",{docId:t,pageId:e,annotId:n,scale:i,rotate:r,rect:o,renderAppearanceType:s})},n.getAnnotObjNumByNM=function(t,e,n){return this.workerPromise.emit("getAnnotObjNumByNM",{docId:t,pageId:e,nm:n})},n.getAnnotIdAtPoint=function(t,e,{x:n,y:i},r){return this.workerPromise.emit("getAnnotIdAtPoint",{docId:t,pageId:e,points:{x:n,y:i},tolerance:r})},n.getAnnotIdAtDevicePoint=function(t,e,{x:n,y:i},r,o){return this.workerPromise.emit("getAnnotIdAtDevicePoint",{docId:t,pageId:e,points:{x:n,y:i},tolerance:r,matrix:o})},n.getAnnotObjectNumAtPoint=function(t,e,{x:n,y:i},r){return this.workerPromise.emit("getAnnotObjectNumAtPoint",{docId:t,pageId:e,points:{x:n,y:i},tolerance:r})},n.getAnnotObjectNumAtDevicePoint=function(t,e,{x:n,y:i},r,o){return this.workerPromise.emit("getAnnotObjectNumAtDevicePoint",{docId:t,pageId:e,points:{x:n,y:i},tolerance:r,matrix:o})},n.getCharInfoAtPoint=function(t,e,{x:n,y:i},r){return this.workerPromise.emit("getCharInfoAtPoint",{docId:t,pageId:e,points:{x:n,y:i},tolerance:r})},n.getThumb=function(t,e,n,i){return this.workerPromise.emit("getThumb",{docId:t,pageId:e,rotate:n,ratio:i})},n.getMediaBoxBitmap=function(t,e,n,i){return this.workerPromise.emit("getMediaBoxBitmap",{docId:t,pageId:e,width:n,height:i})},n.movePageTo=function(t,e,n){return this.workerPromise.emit("movePageTo",{docId:t,pageId:e,destIndex:n})},n.insertPage=function(t,e,n,i){return this.workerPromise.emit("insertPage",{docId:t,pageIndex:e,width:n,height:i})},n.removePage=function(t,e){return this.workerPromise.emit("removePage",{docId:t,pageIndex:e})},n.updateAnnotQuadPointsByCharIndex=function(t,e,n,i,r){return this.workerPromise.emit("updateAnnotQuadPointsByCharIndex",{docId:t,pageId:e,annotId:n,startCharIndex:i,endCharIndex:r})},n.setAnnotContent=function(t,e,n,i){return this.workerPromise.emit("setAnnotContent",{docId:t,pageId:e,annotId:n,content:i})},n.setAnnotBorderColor=function(t,e,n,i){return this.workerPromise.emit("setAnnotBorderColor",{docId:t,pageId:e,annotId:n,color:i})},n.setAnnotBorderStyle=function(t,e,n,i,r){return this.workerPromise.emit("setAnnotBorderStyle",{docId:t,pageId:e,annotId:n,style:i,styleParam:r})},n.setAnnotBorderWidth=function(t,e,n,i){return this.workerPromise.emit("setAnnotBorderWidth",{docId:t,pageId:e,annotId:n,width:i})},n.setAnnotFillColor=function(t,e,n,i){return this.workerPromise.emit("setAnnotFillColor",{docId:t,pageId:e,annotId:n,color:i})},n.setRedactAnnotFillColor=function(t,e,n,i,r){return this.workerPromise.emit("setRedactAnnotFillColor",{docId:t,pageId:e,annotId:n,color:i,onlyForFill:r})},n.setAnnotBorderInfo=function(t,e,n,i){return this.workerPromise.emit("setAnnotBorderInfo",{docId:t,pageId:e,annotId:n,borderInfo:i})},n.setRedactOverlayText=function(t,e,n,i){return this.workerPromise.emit("setRedactOverlayText",{docId:t,pageId:e,annotId:n,overlayText:i})},n.removeRedactOverlayText=function(t,e,n){return this.workerPromise.emit("removeRedactOverlayText",{docId:t,pageId:e,annotId:n})},n.setRedactOverlayTextAlignment=function(t,e,n,i){return this.workerPromise.emit("setRedactOverlayTextAlignment",{docId:t,pageId:e,annotId:n,alignment:i})},n.setRedactRepeat=function(t,e,n,i){return this.workerPromise.emit("setRedactRepeat",{docId:t,pageId:e,annotId:n,isRepeat:i})},n.setRedactAutoFontSize=function(t,e,n,i){return this.workerPromise.emit("setRedactAutoFontSize",{docId:t,pageId:e,annotId:n,isAutoFontSize:i})},n.getRedactDefaultAppearance=function(t,e,n){return this.workerPromise.emit("getRedactDefaultAppearance",{docId:t,pageId:e,annotId:n})},n.setRedactDefaultAppearance=function(t,e,n,i){return this.workerPromise.emit("setRedactDefaultAppearance",{docId:t,pageId:e,annotId:n,appearance:i})},n.setRedactOpacity=function(t,e,n,i,r){return this.workerPromise.emit("setRedactOpacity",{docId:t,pageId:e,annotId:n,opacity:i,only4Fill:r})},n.setRedactApplyFillColor=function(t,e,n,i){return this.workerPromise.emit("setRedactApplyFillColor",{docId:t,pageId:e,annotId:n,color:i})},n.setAnnotOpacity=function(t,e,n,i){return this.workerPromise.emit("setAnnotOpacity",{docId:t,pageId:e,annotId:n,opacity:i})},n.setAnnotRotation=function(t,e,n,i){return this.workerPromise.emit("setAnnotRotation",{docId:t,pageId:e,annotId:n,rotation:i})},n.removeAnnot=function(t,e,n){return this.workerPromise.emit("removeAnnot",{docId:t,pageId:e,annotId:n})},n.annotAddReply=function(t,e,n,i){return this.workerPromise.emit("annotAddReply",{docId:t,pageId:e,annotId:n,content:i})},n.setAnnotRect=function(t,e,n,i){return this.workerPromise.emit("setAnnotRect",{docId:t,pageId:e,annotId:n,rect:i})},n.setAnnotRectAndInnerRect=function(t,e,n,i,r){return this.workerPromise.emit("setAnnotRectAndInnerRect",{docId:t,pageId:e,annotId:n,rect:i,innerRect:r})},n.getAnnotInnerRect=function(t,e,n){return this.workerPromise.emit("getAnnotInnerRect",{docId:t,pageId:e,annotId:n})},n.moveAnnotTo=function(t,e,n,i){return this.workerPromise.emit("moveAnnotTo",{docId:t,pageId:e,annotId:n,position:i})},n.getPDFDocStream=function(t,e,n,i){let r=this.workerPromise.calls(e),o=this.workerPromise.emit("getPDFDocStream",{docId:t,writeStream:r,flag:n,endAllOperations:i});return o.finally((()=>{this.workerPromise.releaseCall(r)})),o},n.setAnnotIconName=function(t,e,n,i){return this.workerPromise.emit("setAnnotIconName",{docId:t,pageId:e,annotId:n,iconName:i})},n.getFileattachmentStream=function(t,e,n,i){let r=this.workerPromise.calls(i),o=this.workerPromise.emit("getFileattachmentStream",{docId:t,pageId:e,annotId:n,writeStream:r});return o.finally((()=>{this.workerPromise.releaseCall(r)})),o},n.setAnnotEndingStyle=function(t,e,n,i,r){return this.workerPromise.emit("setAnnotEndingStyle",{docId:t,pageId:e,annotId:n,isBeginning:i,style:r})},n.setLineStartPoint=function(t,e,n,i,r){return this.workerPromise.emit("setLineStartPoint",{docId:t,pageId:e,annotId:n,x:i,y:r})},n.setLineEndPoint=function(t,e,n,i,r){return this.workerPromise.emit("setLineEndPoint",{docId:t,pageId:e,annotId:n,x:i,y:r})},n.setAnnotLeaderLineLength=function(t,e,n,i){return this.workerPromise.emit("setAnnotLeaderLineLength",{docId:t,pageId:e,annotId:n,length:i})},n.setAnnotLeaderLineExtend=function(t,e,n,i){return this.workerPromise.emit("setAnnotLeaderLineExtend",{docId:t,pageId:e,annotId:n,length:i})},n.setAnnotLeaderLineOffset=function(t,e,n,i){return this.workerPromise.emit("setAnnotLeaderLineOffset",{docId:t,pageId:e,annotId:n,offset:i})},n.setAnnotCaptionOffset=function(t,e,n,i,r){return this.workerPromise.emit("setAnnotCaptionOffset",{docId:t,pageId:e,annotId:n,x:i,y:r})},n.updateAnnotVertexes=function(t,e,n,i,r,o){return this.workerPromise.emit("updateAnnotVertexes",{docId:t,pageId:e,annotId:n,pointIndex:i,x:r,y:o})},n.setAnnotVertexes=function(t,e,n,i){return this.workerPromise.emit("setAnnotVertexes",{docId:t,pageId:e,annotId:n,vertexes:i})},n.setHighlightingMode=function(t,e,n,i){return this.workerPromise.emit("setHighlightingMode",{docId:t,pageId:e,annotId:n,highlightingMode:i})},n.setAnnotAPBitmap=function(t,e,n,i,r){return this.workerPromise.emit("setAnnotAPBitmap",{docId:t,pageId:e,annotId:n,url:i,size:r})},n.getBitmapBuffer=function(t,e,n){return this.workerPromise.emit("getBitmapBuffer",{docId:t,pageId:e,annotId:n})},n.setAnnotInnerRect=function(t,e,n,{left:i,right:r,top:o,bottom:s}){return this.workerPromise.emit("setAnnotInnerRect",{docId:t,pageId:e,annotId:n,rect:{left:i,right:r,top:o,bottom:s}})},n.setCalloutLineEndingStyle=function(t,e,n,i){return this.workerPromise.emit("setCalloutLineEndingStyle",{docId:t,pageId:e,annotId:n,endingStyle:i})},n.setAction=function(t,e,n,i,r,o){return this.workerPromise.emit("setAction",{docId:t,pageId:e,annotId:n,type:i,trigger:r,append:o})},n.removeAction=function(t,e,n,i,r,o){return this.workerPromise.emit("removeAction",{docId:t,pageId:e,annotId:n,trigger:i,parentObject:r,objectNumber:o})},n.setDefaultAppearance=function(t,e,n,i){return this.workerPromise.emit("setDefaultAppearance",{docId:t,pageId:e,annotId:n,da:i})},n.removeAnnotAction=function(t,e,n){return this.workerPromise.emit("removeAnnotAction",{docId:t,pageId:e,annotId:n})},n.getAction=function(t,e,n){return this.workerPromise.emit("getAction",{docId:t,pageId:e,annotId:n})},n.getArticleList=function(t){return this.workerPromise.emit("getArticleList",{docId:t})},n.getStructureRoles=function(t){return this.workerPromise.emit("getStructureRoles",{docId:t})},n.setActionDataByIndex=function(t,e,n,i,r){return this.workerPromise.emit("setActionDataByIndex",{docId:t,pageId:e,annotId:n,data:i,actionIndex:r})},n.addBookmarksFromStructureRoles=function(t,e,n){return this.workerPromise.emit("addBookmarksFromStructureRoles",{docId:t,structureRoles:e,rootTitle:n})},n.setCalloutLinePoints=function(t,e,n,i){return this.workerPromise.emit("setCalloutLinePoints",{docId:t,pageId:e,annotId:n,calloutLinePoints:i})},n.setSubject=function(t,e,n,i){return this.workerPromise.emit("setSubject",{docId:t,pageId:e,annotId:n,subject:i})},n.setTitle=function(t,e,n,i){return this.workerPromise.emit("setTitle",{docId:t,pageId:e,annotId:n,title:i})},n.setCreateDateTime=function(t,e,n,i){return this.workerPromise.emit("setCreateDateTime",{docId:t,pageId:e,annotId:n,date:i})},n.setModifiedDateTime=function(t,e,n,i){return this.workerPromise.emit("setModifiedDateTime",{docId:t,pageId:e,annotId:n,date:i})},n.setUniqueId=function(t,e,n,i){return this.workerPromise.emit("setUniqueId",{docId:t,pageId:e,annotId:n,newId:i})},n.setDefaultAp=function(t,e,n,i){return this.workerPromise.emit("setDefaultAp",{docId:t,pageId:e,annotId:n,defaultAppearance:i})},n.setAlignment=function(t,e,n,i){return this.workerPromise.emit("setAlignment",{docId:t,pageId:e,annotId:n,value:i})},n.setAnnotFlag=function(t,e,n,i){return this.workerPromise.emit("setAnnotFlag",{docId:t,pageId:e,annotId:n,flag:i})},n.importFromFDF=function(t,e,n){let i=f(e);return this.workerPromise.emit("importFromFDF",{docId:t,fdf:e,dataType:n},i)},n.importFromFDFFile=function(t,e,n,i){return this.workerPromise.emit("importFromFDFFile",{docId:t,file:e,size:n,type:i})},n.exportToStardardXml=function(t,e,n){const i=this.workerPromise.calls(n);let r=this.workerPromise.emit("exportToStardardXml",{docId:t,fileName:e,callbackId:i});return r.finally((()=>{this.workerPromise.releaseCall(i)})),r},n.exportToFDF=function(t,e=0,n=2,i={}){return this.workerPromise.emit("exportToFDF",{docId:t,fileType:e,dataType:n,pageAnnots:i})},n.exportToImage=function(t,e,n,i,r){const o=this.workerPromise.calls(r);let s=this.workerPromise.emit("exportToImage",{docId:t,imageSetting:e,fileName:n,pageRange:i,callbackId:o});return s.finally((()=>{this.workerPromise.releaseCall(o)})),s},n.exportToTxt=function(t,e,n,i){const r=this.workerPromise.calls(i);let o=this.workerPromise.emit("exportToTxt",{docId:t,taskName:e,pageRange:n,callbackId:r});return o.finally((()=>{this.workerPromise.releaseCall(r)})),o},n.exportImageObjectToImage=function(t,e,n,i,r){const o=this.workerPromise.calls(r);let s=this.workerPromise.emit("exportImageObjectToImage",{docId:t,graphicsObject:e,imageSetting:n,fileName:i,callbackId:o});return s.finally((()=>{this.workerPromise.releaseCall(o)})),s},n.cancelExport=function(t){return this.workerPromise.emit("cancelExport",{docId:t})},n.addAnnot=function(t,e,n){return this.workerPromise.emit("addAnnot",{docId:t,pageId:e,annot:n})},n.addAnnots=function(t,e,n){let i=this.workerPromise.calls(n),r=this.workerPromise.emit("addAnnots",{docId:t,annotJsonArray:e,progress:i});return r.finally((()=>{this.workerPromise.releaseCall(i)})),r},n.markRedactAnnot=function(t,e,n,i){return this.workerPromise.emit("markRedactAnnot",{docId:t,pageId:e,rects:n,annot:i})},n.redactApply=function(t,e,n){return this.workerPromise.emit("redactApply",{docId:t,pageId:e,annotId:n})},n.applyRedaction=function(t){return this.workerPromise.emit("applyRedaction",{docId:t})},n.addAnnotGroup=function(t,e,n,i){return this.workerPromise.emit("addAnnotGroup",{docId:t,pageId:e,annots:n,headerIndex:i})},n.getBlankPageIndexes=function(t){return this.workerPromise.emit("getBlankPageIndexes",{docId:t})},n.getBookmarks=function(t){return this.workerPromise.emit("getBookmarks",{docId:t})},n.getCurFileSymbolId=function(t){return this.workerPromise.emit("getCurFileSymbolId",{docId:t})},n.getFadeOutBackground=function(t,e){return this.workerPromise.emit("getFadeOutBackground",{docId:t,imgBuffer:e})},n.getConvertToMono=function(t,e){return this.workerPromise.emit("getConvertToMono",{docId:t,imgBuffer:e})},n.createRootBookmark=function(t){return this.workerPromise.emit("createRootBookmark",{docId:t})},n.insertBookmark=function(t,e,n,i,r,o,s,a){return this.workerPromise.emit("insertBookmark",{docId:t,pbkId:e,title:n,pageIndex:i,top:r,left:o,relationship:s,scale:a})},n.setBookmarkProperty=function(t,e,n){return this.workerPromise.emit("setBookmarkProperty",{docId:t,bkId:e,properties:n})},n.removeBookmark=function(t,e){return this.workerPromise.emit("removeBookmark",{docId:t,bkId:e})},n.getBookmarkDestination=function(t,e){return this.workerPromise.emit("getBookmarkDestination",{docId:t,bkId:e})},n.setBookmarkDestination=function(t,e,n){return this.workerPromise.emit("setBookmarkDestination",{docId:t,bkId:e,gotoAction:n})},n.getBookmarkAction=function(t,e){return this.workerPromise.emit("getBookmarkAction",{docId:t,bkId:e})},n.setBookmarkAction=function(t,e,n){return this.workerPromise.emit("setBookmarkAction",{docId:t,bkId:e,action:n})},n.moveBookmarkAction=function(t,e,n){return this.workerPromise.emit("moveBookmarkAction",{docId:t,bkId:e,moveInfo:n})},n.removeBookmarkAction=function(t,e,n){return this.workerPromise.emit("removeBookmarkAction",{docId:t,bkId:e,action:n})},n.getLayerNodes=function(t){return this.workerPromise.emit("getLayerNodes",{docId:t})},n.setLayerNodeVisiable=function(t,e,n){return this.workerPromise.emit("setLayerNodeVisiable",{docId:t,layerId:e,visiable:n})},n.getTextRectsAtRect=function(t,e,n){return this.workerPromise.emit("getTextRectsAtRect",{docId:t,pageId:e,rect:n})},n.getTextContinuousRectsAtRect=function(t,e,n){return this.workerPromise.emit("getTextContinuousRectsAtRect",{docId:t,pageId:e,rect:n})},n.getTextContinuousRectsAtPoints=function(t,e,n,i,r,o,s,a){return this.workerPromise.emit("getTextContinuousRectsAtPoints",{docId:t,pageId:e,point1:n,point2:i,tolerance:r,start:o,end:s,isTextIndex:a})},n.getTextContinuousCharsAtRect=function(t,e,n,i){return this.workerPromise.emit("getTextContinuousCharsAtRect",{docId:t,pageId:e,rect:n,allInRect:i})},n.getDoubleClickTextRectAtPoint=function(t,e,n,i){return this.workerPromise.emit("getDoubleClickTextRectAtPoint",{docId:t,pageId:e,doubleClickPoint:n,tolerance:i})},n.getTextSearch=function(t,e,n,i){return this.workerPromise.emit("getTextSearch",{docId:t,pageId:e,pattern:n,flags:i})},n.getAnnotTextSearch=function(t,e,n,i,r){return this.workerPromise.emit("getAnnotTextSearch",{docId:t,pageId:e,annotId:n,pattern:i,flags:r})},n.textSearchFindNext=function(t){return this.workerPromise.emit("textSearchFindNext",{id:t})},n.textSearchFindPrev=function(t){return this.workerPromise.emit("textSearchFindPrev",{id:t})},n.textSearchDestroy=function(t){return this.workerPromise.emit("textSearchDestroy",{id:t})},n.registerSecurityCallback=function(t,e){return this.workerPromise.emit("registerSecurityCallback",{type:t,options:e})},n.registerCustomWebPluginSecurityCallback=function(t,e,n){return this.workerPromise.emit("registerCustomWebPluginSecurityCallback",{fileName:t,filter:e,pluginSecurityObj:n})},n.unRegisterSecurityHandler=function(t,e){return this.workerPromise.emit("unRegisterSecurityHandler",{pluginId:t,filter:e})},n.customProtectDoc=function(t,e){return this.workerPromise.emit("customProtectDoc",{docId:t,filter:e})},n.destroyDoc=function(t){return this.workerPromise.emit("destroyDoc",{id:t})},n.destroyPage=function(t,e){return this.workerPromise.emit("destroyPage",{docId:t,pageId:e})},n.setDocOpenAction=function(t,e,n){return this.workerPromise.emit("setDocOpenAction",{docId:t,type:e,params:n})},n.setDocActionData=function(t,e,n){return this.workerPromise.emit("setDocActionData",{docId:t,data:e,index:n})},n.moveCaretRectByCharIndex=function(t,e,n,i){return this.workerPromise.emit("moveCaretRectByCharIndex",{docId:t,pageId:e,annotId:n,charIndex:i})},n.setAnnotIntent=function(t,e,n,i){return this.workerPromise.emit("setAnnotIntent",{docId:t,pageId:e,annotId:n,intent:i})},n.setInkList=function(t,e,n,i){return this.workerPromise.emit("setInkList",{docId:t,pageId:e,annotId:n,inkList:i})},n.setUserName=function(t){return this.workerPromise.emit("setUserName",{name:t})},n.getUserName=function(){return this.workerPromise.emit("getUserName")},n.addAnnotReviewState=function(t,e,n,i){return this.workerPromise.emit("addAnnotReviewState",{docId:t,pageId:e,annotId:n,stateName:i})},n.addAnnotMarkedState=function(t,e,n,i){return this.workerPromise.emit("addAnnotMarkedState",{docId:t,pageId:e,annotId:n,stateName:i})},n.removeAllStateAnnots=function(t,e,n){return this.workerPromise.emit("removeAllStateAnnots",{docId:t,pageId:e,annotId:n})},n.setStateName=function(t,e,n,i){return this.workerPromise.emit("setStateName",{docId:t,pageId:e,stateAnnotId:n,stateName:i})},n.setNoteOpenStatus=function(t,e,n,i){return this.workerPromise.emit("setNoteOpenStatus",{docId:t,pageId:e,annotId:n,isOpen:i})},n.flatten=function(t,e,n){return this.workerPromise.emit("flatten",{docId:t,pageId:e,option:n})},n.setDynamicInfoFormula=function(t,e){return this.workerPromise.emit("setDynamicInfoFormula",{seperator:t,timeFormat:e})},n.getDynamicInfoFormula=function(){return this.workerPromise.emit("getDynamicInfoFormula")},n.setDigitalTimeFormat=function(t){return this.workerPromise.emit("setDigitalTimeFormat",{timeFormat:t})},n.setDigitalInfo=function(t){return this.workerPromise.emit("setDigitalInfo",{identityInfo:t})},n.getGraphicObjectsInfo=function(t,e){return this.workerPromise.emit("getGraphicObjectsInfo",{docId:t,pageId:e})},n.updatePageInfo=function(t,e){return this.workerPromise.emit("updatePageInfo",{docId:t,pageId:e})},n.setPageRotation=function(t,e,n){return this.workerPromise.emit("setPageRotation",{docId:t,pageId:e,rotation:n})},n.addPageImage=function(t,e,n,i,r,o,s){return this.workerPromise.emit("addPageImage",{docId:t,pageId:e,imageBuffer:n,point:i,width:r,height:o,rotation:s})},n.getPageAction=function(t,e,n){return this.workerPromise.emit("getPageAction",{docId:t,pageId:e,trigger:n})},n.setPageAction=function(t,e,n,i){return this.workerPromise.emit("setPageAction",{docId:t,pageId:e,trigger:n,action:i})},n.removePageAction=function(t,e,n,i){return this.workerPromise.emit("removePageAction",{docId:t,pageId:e,trigger:n,action:i})},n.movePageAction=function(t,e,n){return this.workerPromise.emit("movePageAction",{docId:t,pageId:e,moveInfo:n})},n.addWatermark=function(t,e,n){return this.workerPromise.emit("addWatermark",{docId:t,pageId:e,data:n})},n.getSecurityType=function(t){return this.workerPromise.emit("getSecurityType",{docId:t})},n.setCertificateAndPermission=function(t,e,n,i){return this.workerPromise.emit("setCertificateAndPermission",{docId:t,infos:e,cipher:n,isEncryptMetadata:i})},n.setPasswordAndPermission=function(t,e,n,i,r,o){return this.workerPromise.emit("setPasswordAndPermission",{docId:t,userPassword:e,ownerPassword:n,permission:i,cipher:r,isEncryptMetadata:o})},n.removeSecurity=function(t){return this.workerPromise.emit("removeSecurity",{docId:t})},n.checkPassword=function(t,e){return this.workerPromise.emit("checkPassword",{docId:t,password:e})},n.getPermission=function(t){return this.workerPromise.emit("getPermission",{docId:t})},n.getStdCipherOptions=function(t){return this.workerPromise.emit("getStdCipherOptions",{docId:t})},n.getUserPassword=function(t,e){return this.workerPromise.emit("getUserPassword",{docId:t,password:e})},n.getGraphicsObjectAtPoint=function(t,e,n,i,r,o){return this.workerPromise.emit("getGraphicsObjectAtPoint",{docId:t,pageId:e,point:n,tolerance:i,type:r,rect:o})},n.setGraphicsObjectMatrix=function(t,e,n,i){return this.workerPromise.emit("setGraphicsObjectMatrix",{docId:t,pageId:e,id:n,matrix:i})},n.setGraphicsObjectRect=function(t,e,n,i){return this.workerPromise.emit("setGraphicsObjectRect",{docId:t,pageId:e,id:n,rect:i})},n.getGraphicsObjectBitmap=function(t,e,n,i,r){return this.workerPromise.emit("getGraphicsObjectBitmap",{docId:t,pageId:e,id:n,scale:i,rotation:r})},n.setGraphicsObjectBorderStyle=function(t,e,n,i,r){return this.workerPromise.emit("setGraphicsObjectBorderStyle",{docId:t,pageId:e,id:n,value:i,dashes:r})},n.setGraphicsObjectBorderWidth=function(t,e,n,i){return this.workerPromise.emit("setGraphicsObjectBorderWidth",{docId:t,pageId:e,id:n,width:i})},n.setGraphicsObjectBorderColor=function(t,e,n,i){return this.workerPromise.emit("setGraphicsObjectBorderColor",{docId:t,pageId:e,id:n,color:i})},n.setGraphicsObjectFillColor=function(t,e,n,i){return this.workerPromise.emit("setGraphicsObjectFillColor",{docId:t,pageId:e,id:n,color:i})},n.setGraphicsObjectOpacity=function(t,e,n,i){return this.workerPromise.emit("setGraphicsObjectOpacity",{docId:t,pageId:e,id:n,opacity:i})},n.addGraphicsObject=function(t,e,n){return this.workerPromise.emit("addGraphicsObject",{docId:t,pageId:e,info:n})},n.setImageObjectOpacity=function(t,e,n,i){return this.workerPromise.emit("setImageObjectOpacity",{docId:t,pageId:e,id:n,opacity:i})},n.setImageObjectRotation=function(t,e,n,i){return this.workerPromise.emit("setImageObjectRotation",{docId:t,pageId:e,id:n,rotation:i})},n.getImageObjectStream=function(t,e,n){return this.workerPromise.emit("getImageObjectStream",{docId:t,pageId:e,id:n})},n.setActionDestination=function(t,e,n){return this.workerPromise.emit("setActionDestination",{docId:t,objNum:e,destination:n})},n.setActionFieldNames=function(t,e,n){return this.workerPromise.emit("setActionFieldNames",{docId:t,objNum:e,fieldNames:n})},n.setActionHideState=function(t,e,n){return this.workerPromise.emit("setActionHideState",{docId:t,objNum:e,isHide:n})},n.setActionScript=function(t,e,n){return this.workerPromise.emit("setActionScript",{docId:t,objNum:e,script:n})},n.setActionOCGState=function(t,e,n){return this.workerPromise.emit("setActionOCGState",{docId:t,objNum:e,layerIds:n})},n.setThreadActionIndex=function(t,e,n){return this.workerPromise.emit("setThreadActionIndex",{docId:t,objNum:e,index:n})},n.setActionFlags=function(t,e,n){return this.workerPromise.emit("setActionFlags",{docId:t,objNum:e,flags:n})},n.setActionURI=function(t,e,n){return this.workerPromise.emit("setActionURI",{docId:t,objNum:e,uri:n})},n.insertSubAction=function(t,e,n,i){return this.workerPromise.emit("insertSubAction",{docId:t,objNum:e,index:n,type:i})},n.setSubAction=function(t,e,n,i){return this.workerPromise.emit("setSubAction",{docId:t,objNum:e,index:n,type:i})},n.removeAllSubActions=function(t,e){return this.workerPromise.emit("removeAllSubActions",{docId:t,objNum:e})},n.removeSubAction=function(t,e,n){return this.workerPromise.emit("removeSubAction",{docId:t,objNum:e,index:n})},n.setActionData=function(t,e,n){return this.workerPromise.emit("setActionData",{docId:t,objNum:e,data:n})},n.moveAction=function(t,e,n,i){return this.workerPromise.emit("moveAction",{docId:t,pageId:e,objNum:n,moveInfo:i})},n.removeGraphicsObject=function(t,e,n,i){return this.workerPromise.emit("removeGraphicsObject",{docId:t,pageId:e,id:n,isFinal:i})},n.setPopupOpenStatus=function(t,e,n,i){return this.workerPromise.emit("setPopupOpenStatus",{docId:t,pageId:e,annotId:n,status:i})},n.removePageAllAnnot=function(t,e){return this.workerPromise.emit("removePageAllAnnot",{docId:t,pageId:e})},n.setTextObjectChar=function(t,e,n,i){return this.workerPromise.emit("setTextObjectChar",{docId:t,pageId:e,id:n,char:i})},n.setTextObjectItalic=function(t,e,n,i){return this.workerPromise.emit("setTextObjectItalic",{docId:t,pageId:e,id:n,italic:i})},n.setTextObjectBold=function(t,e,n,i){return this.workerPromise.emit("setTextObjectBold",{docId:t,pageId:e,id:n,bold:i})},n.setTextObjectFontSize=function(t,e,n,i){return this.workerPromise.emit("setTextObjectFontSize",{docId:t,pageId:e,id:n,size:i})},n.setTextObjectStandardFont=function(t,e,n,i){return this.workerPromise.emit("setTextObjectStandardFont",{docId:t,pageId:e,id:n,standardId:i})},n.setTextObjectFontByName=function(t,e,n,i,r,o){return this.workerPromise.emit("setTextObjectFontByName",{docId:t,pageId:e,id:n,name:i,styles:r,charset:o})},n.getTextObjectWoff=function(t,e,n){return this.workerPromise.emit("getTextObjectWoff",{docId:t,pageId:e,id:n})},n.getAnnotWoff=function(t,e,n){return this.workerPromise.emit("getAnnotWoff",{docId:t,pageId:e,id:n})},n.drmEncrypt=function(t,e){return this.workerPromise.emit("drmEncrypt",{docId:t,options:e})},n.getActionFileStream=function(t,e,n){let i=this.workerPromise.calls(n),r=this.workerPromise.emit("getActionFileStream",{docId:t,objNum:e,writeStream:i});return r.finally((()=>{this.workerPromise.releaseCall(i)})),r},n.getTemplates=function(t){return this.workerPromise.emit("getTemplates",{docId:t})},n.hideTemplate=function(t,e,n){return this.workerPromise.emit("hideTemplate",{docId:t,templateObj:e,isHidden:n})},n.spawnPage=function(t,e,n,i,r){return this.workerPromise.emit("spawnPage",{docId:t,templateObj:e,nPage:n,bRename:i,bOverlay:r})},n.setFieldsValue=function(t,e,n){return this.workerPromise.emit("setFieldsValue",{docId:t,fieldsValue:e,resetAP:n})},n.removeTemplate=function(t,e){return this.workerPromise.emit("removeTemplate",{docId:t,name:e})},n.getFontBufferByName=function(t,e){return this.workerPromise.emit("getFontBufferByName",{docId:t,fontName:e})},n.getPageSizes=function(t,e,n){return this.workerPromise.emit("getPageSizes",{docId:t,index:e,count:n})},n.setMeasureRatio=function(t,e,n,i){return this.workerPromise.emit("setMeasureRatio",{docId:t,pageId:e,annotId:n,ratioInfo:i})},n.setMeasureUnit=function(t,e,n,i,r){return this.workerPromise.emit("setMeasureUnit",{docId:t,pageId:e,annotId:n,unit:i,measureType:r})},n.setMeasureConversionFactor=function(t,e,n,i){return this.workerPromise.emit("setMeasureConversionFactor",{docId:t,pageId:e,annotId:n,factor:i})},n.startImportPages=function(t,e,n,i,r,o,s,a){return this.workerPromise.emit("startImportPages",{docId:t,destIndex:e,file:n,password:i,flags:r,layerName:o,startIndex:s,endIndex:a})},n.importPagesFromPDFDocs=function(t,e,n,i){return this.workerPromise.emit("importPagesFromPDFDocs",{docId:t,destIndex:e,srcDocs:n,layerName:i})},n.exportPagesToPDFDocs=function(t,e,n,i,r){return this.workerPromise.emit("exportPagesToPDFDocs",{docId:t,srcPages:e,destDocs:n,layerName:i,bookmarkTitle:r})},n.extractPages=function(t,e,n,i,r){let o=this.workerPromise.calls(n),s=this.workerPromise.emit("extractPages",{docId:t,pageRange:e,writeStream:o,file:i,password:r});return s.finally((()=>{this.workerPromise.releaseCall(o)})),s},n.copyPages=function(t,e,n){return this.workerPromise.emit("copyPages",{docId:t,pageRange:e,destIndex:n})},n.saveCopyPagesData=function(t,e){return this.workerPromise.emit("saveCopyPagesData",{docId:t,pageRange:e})},n.pastePages=function(t,e){return this.workerPromise.emit("pastePages",{docId:t,destIndex:e})},n.embedAllPageThumbnail=function(t){return this.workerPromise.emit("embedAllPageThumbnail",{docId:t})},n.removeEmbeddedPageThumbnail=function(t){return this.workerPromise.emit("removeEmbeddedPageThumbnail",{docId:t})},n.getAllBoxes=function(t,e){return this.workerPromise.emit("getAllBoxes",{docId:t,index:e})},n.setAllBoxesByIndexes=function(t,e,n,i,r,o,s,a){return this.workerPromise.emit("setAllBoxesByIndexes",{docId:t,indexes:e,width:n,height:i,xOffset:r,yOffset:o,boxes:s,isMoveWhite:a})},n.getPageFormat=function(t,e,n,i,r="",o="",s=void 0){return this.workerPromise.emit("getPageFormat",{docId:t,type:e,previewWidth:n,previewHeight:i,fileName:r,newDocId:o,localFormat:s})},n.getPageFormatThumb=function(t,e,n,i,r,o,s,a){return this.workerPromise.emit("getPageFormatThumb",{docId:t,type:e,pageIndex:n,data:i,isUpdate:r,bitmapWidth:o,bitmapHeight:s,rotate:a})},n.addPageFormat=function(t,e,n,i){return this.workerPromise.emit("addPageFormat",{docId:t,type:e,data:n,isUpdate:i})},n.removeAllPageFormat=function(t,e){return this.workerPromise.emit("removeAllPageFormat",{docId:t,type:e})},n.extractPrintPages=function(t,e){return this.workerPromise.emit("extractPrintPages",{docId:t,data:e})},n.getHeaderFooter=function(t){return this.workerPromise.emit("getHeaderFooter",t)},n.addHeaderFooter=function(t,e){return this.workerPromise.emit("addHeaderFooter",{headerFooter:e,docId:t})},n.updateHeaderFooter=function(t,e){return this.workerPromise.emit("updateHeaderFooter",{headerFooter:e,docId:t})},n.removeHeaderFooter=function(t){return this.workerPromise.emit("removeHeaderFooter",t)},n.paste=function(t,e,n,i,r,o){return this.workerPromise.emit("paste",{docId:t,pageId:e,srcPageId:n,type:i,objectId:r,position:o})},n.setFontMap=function(t){return this.workerPromise.emit("setFontMap",t)},n.setWatermarkFontMap=function(t){return this.workerPromise.emit("setWatermarkFontMap",t)},n.addFontMap=function(t){return this.workerPromise.emit("addFontMap",t)},n.setJPXDownSample=function(t){return this.workerPromise.emit("setJPXDownSample",t)},n.getAnnotsRawData=function(t,e){return this.workerPromise.emit("getAnnotsRawData",{docId:t,rawAnnots:e})},n.attachFile=function(t,e){return this.workerPromise.emit("attachFile",{docId:t,blob:e})},n.signDoc=function(t,e,n){return this.workerPromise.emit("signDoc",{docId:t,signInfo:e,ap:n})},n.signDocForESignCN=function(t,e){return this.workerPromise.emit("signDocForESignCN",{docId:t,signInfo:e})},n.getGraphicsObjectByIndex=function(t,e,n){return this.workerPromise.emit("getGraphicsObjectByIndex",{docId:t,pageId:e,index:n})},n.getGraphicsObjectsCount=function(t,e){return this.workerPromise.emit("getGraphicsObjectsCount",{docId:t,pageId:e})},n.getFontsInfo=function(t){return this.workerPromise.emit("getFontsInfo",{docId:t})},n.getDocAdditionalActions=function(t){return this.workerPromise.emit("getDocAdditionalActions",{docId:t})},n.calcPageContentBBox=function(t,e,n){return this.workerPromise.emit("calcPageContentBBox",{docId:t,pageIndex:e,mode:n})},n.getPageBox=function(t,e,n){return this.workerPromise.emit("getPageBox",{docId:t,pageIndex:e,boxType:n})},n.setPageBox=function(t,e,n,i){return this.workerPromise.emit("setPageBox",{docId:t,pageIndex:e,boxType:n,rect:i})},n.setPageSize=function(t,e,n,i){return this.workerPromise.emit("setPageSize",{docId:t,pageIndex:e,width:n,height:i})},n.syncDataCache=function(t,e){return this.workerPromise.emit("syncDataCache",{docId:t,pageIdMap:e})},n.setDocColors=function(t,e){return this.workerPromise.emit("setDocColors",{docId:t,colors:e})},n.setPageDisplayPreferences=function(t,e){return this.workerPromise.emit("setPageDisplayPreferences",{docId:t,pageDisplayPreferences:e})},n.moveAnnotsToPage=function(t,e,n,i){return this.workerPromise.emit("moveAnnotsToPage",{docId:t,srcPageId:e,dstPageId:n,annotInfos:i})},n.getOriginalStream=function(t){return this.workerPromise.emit("getOriginalStream",{docId:t})},n.hasForm=function(t){return this.workerPromise.emit("hasForm",{docId:t})},n.setTabOrder=function(t,e,n){return this.workerPromise.emit("setTabOrder",{docId:t,pageIndex:e,type:n})},n.getTabOrder=function(t,e){return this.workerPromise.emit("getTabOrder",{docId:t,pageIndex:e})},n.setStructureOrder=function(t,e,n){return this.workerPromise.emit("setStructureOrder",{docId:t,pageIndex:e,idList:n})},n.setLockAction=function(t,e,n,i){return this.workerPromise.emit("setLockAction",{docId:t,title:e,type:n,fieldNames:i})},n.VerifySignature=function(t,e,n){return this.workerPromise.emit("VerifySignature",{docId:t,fieldName:e,verifyConfig:n})},n.getDigitalSignatureInfo=function(t,e,n){return this.workerPromise.emit("getDigitalSignatureInfo",{docId:t,fieldName:e,trustedCertificateList:n})},n.verifyDocSignature=function(t,e){return this.workerPromise.emit("verifyDocSignature",{docId:t,verifyConfig:e})},n.verifySignatureLtv=function(t,e,n){return this.workerPromise.emit("verifySignatureLtv",{docId:t,fieldName:e,verifyConfig:n})},n.clearSignature=function(t,e,n){return this.workerPromise.emit("clearSignature",{docId:t,fieldName:e,verifyConfig:n})},n.setImage=function(t,e,n,i){return this.workerPromise.emit("setImage",{docId:t,pageId:e,annotId:n,buffer:i})},n.getWidgetMkOption=function(t,e,n){return this.workerPromise.emit("getWidgetMkOption",{docId:t,pageId:e,annotId:n})},n.setWidgetIconCaptionRelation=function(t,e,n,i){return this.workerPromise.emit("setWidgetIconCaptionRelation",{docId:t,pageId:e,annotId:n,relation:i})},n.setWidgetHighlighting=function(t,e,n,i){return this.workerPromise.emit("setWidgetHighlighting",{docId:t,pageId:e,annotId:n,mode:i})},n.setWidgetMkCaption=function(t,e,n,i,r){return this.workerPromise.emit("setWidgetMkCaption",{docId:t,pageId:e,annotId:n,position:i,caption:r})},n.setWidgetMkIcon=function(t,e,n,i,r){return this.workerPromise.emit("setWidgetMkIcon",{docId:t,pageId:e,annotId:n,position:i,buffer:r})},n.getWidgetIconFitOption=function(t,e,n){return this.workerPromise.emit("getWidgetIconFitOption",{docId:t,pageId:e,annotId:n})},n.setWidgetIconFitOption=function(t,e,n,i){return this.workerPromise.emit("setWidgetIconFitOption",{docId:t,pageId:e,annotId:n,option:i})},n.duplicateWidget=function(t,e,n,i){return this.workerPromise.emit("duplicateWidget",{docId:t,pages:e,fieldName:n,objectNumber:i})},n.duplicateField=function(t,e,n,i,r,o,s){return this.workerPromise.emit("duplicateField",{docId:t,fieldName:e,pageIndex:n,annotObjNum:i,columns:r,rows:o,positions:s})},n.getAllModuleLicenseRight=function(){return this.workerPromise.emit("getAllModuleLicenseRight")},n.ensureSideModeLoaded=function(t){return this.workerPromise.emit("ensureSideModeLoaded",{moduleType:t})},n.moveGraphicsObjectByPosition=function(t,e,n,i,r){return this.workerPromise.emit("moveGraphicsObjectByPosition",{docId:t,pageId:e,id:n,type:i,graphicObjectId:r})},n.setDictionaryEntry=function(t,e,n,i,r){return this.workerPromise.emit("setDictionaryEntry",{docId:t,pageId:e,annotId:n,key:i,value:r})},n.getDictionaryEntry=function(t,e,n,i){return this.workerPromise.emit("getDictionaryEntry",{docId:t,pageId:e,annotId:n,key:i})},n.resetAppearanceStream=function(t,e,n){return this.workerPromise.emit("resetAppearanceStream",{docId:t,pageId:e,annotId:n})},n.setCO=function(t,e){return this.workerPromise.emit("setCO",{docId:t,CO:e})},n.renderTemplatesByObjNum=function(t,e){return this.workerPromise.emit("renderTemplatesByObjNum",{docId:t,objNum:e})},n.getNameTree=function(t,e){return this.workerPromise.emit("getNameTree",{docId:t,type:e})},n.addNameTreeObj=function(t,e,n,i){return this.workerPromise.emit("addNameTreeObj",{docId:t,type:e,name:n,objNum:i})},n.removeNameTreeObj=function(t,e,n){return this.workerPromise.emit("removeNameTreeObj",{docId:t,type:e,name:n})},n.replaceNameTreeObj=function(t,e,n,i){return this.workerPromise.emit("replaceNameTreeObj",{docId:t,type:e,name:n,objNum:i})},n.renameNameTreeObj=function(t,e,n,i){return this.workerPromise.emit("renameNameTreeObj",{docId:t,type:e,oldName:n,newName:i})},n.getPageIndexByObjNum=function(t,e){return this.workerPromise.emit("getPageIndexByObjNum",{docId:t,objNum:e})},n.nameTreeTemplatesToPages=function(t,e){return this.workerPromise.emit("nameTreeTemplatesToPages",{docId:t,name:e})},n.nameTreePagesToTemplates=function(t,e){return this.workerPromise.emit("nameTreePagesToTemplates",{docId:t,name:e})},n.showNameTreePageAtTheEnd=function(t){return this.workerPromise.emit("showNameTreePageAtTheEnd",{docId:t})},n.hideNameTreePage=function(t,e){return this.workerPromise.emit("hideNameTreePage",{docId:t,pageIndex:e})},n.addFileSpec=function(t,e,n,i){return this.workerPromise.emit("addFileSpec",{docId:t,fileName:e,fileBuffer:n,modifiedDateTime:i})},n.setFileSpecDesc=function(t,e,n){return this.workerPromise.emit("setFileSpecDesc",{docId:t,desc:e,objNum:n})},n.getFileSpecStream=function(t,e,n){let i=this.workerPromise.calls(n),r=this.workerPromise.emit("getFileSpecStream",{docId:t,fileSpecObjNum:e,writeStreamCall:i});return r.finally((()=>{this.workerPromise.releaseCall(i)})),r},n.addEmbeddedFileByAttachments=function(t,e,n){return this.workerPromise.emit("addEmbeddedFileByAttachments",{docId:t,name:e,objNum:n})},n.setEmbeddedFileByAttachments=function(t,e,n){return this.workerPromise.emit("setEmbeddedFileByAttachments",{docId:t,name:e,objNum:n})},n.removeEmbeddedFileByAttachments=function(t,e){return this.workerPromise.emit("removeEmbeddedFileByAttachments",{docId:t,name:e})},n.cancelEmbedAllPageThumbnail=function(t){return this.workerPromise.emit("cancelEmbedAllPageThumbnail",{docId:t})},n.cancelRemoveEmbeddedPageThumbnail=function(t){return this.workerPromise.emit("cancelRemoveEmbeddedPageThumbnail",{docId:t})},n.moveControl=function(t,e,n,i){return this.workerPromise.emit("moveControl",{docId:t,fieldId:e,fieldName:n,newName:i})},n.getAnnotIdArrayByOrder=function(t,e){return this.workerPromise.emit("getAnnotIdArrayByOrder",{docId:t,pageId:e})},n.getAAJson=function(t,e){return this.workerPromise.emit("getAAJson",{docId:t,fieldName:e})},n.getPageDictionary=function(t,e){return this.workerPromise.emit("getPageDictionary",{docId:t,pageId:e})},n.getPDFDictInfo=function(t){return this.workerPromise.emit("getPDFDictInfo",{docId:t})},n.startFormDesignerAssit=function(t){return this.workerPromise.emit("startFormDesignerAssit",{docId:t})},n.stopFormDesignerAssit=function(t){return this.workerPromise.emit("stopFormDesignerAssit",{docId:t})},n.getPageLabels=function(t,e){return this.workerPromise.emit("getPageLabels",{docId:t,indexes:e})},n.hasKey=function(t,e,n){return this.workerPromise.emit("hasKey",{docId:t,id:e,key:n})},n.setAt=function(t,e,n,i){return this.workerPromise.emit("setAt",{docId:t,id:e,key:n,value:i})},n.getAt=function(t,e,n){return this.workerPromise.emit("getAt",{docId:t,id:e,key:n})},n.getSuggestedFormDesignerRect=function(t,e,n){return this.workerPromise.emit("getSuggestedFormDesignerRect",{docId:t,pageId:e,point:n})},n.autoRecognitionForm=function(t){return this.workerPromise.emit("autoRecognitionForm",{docId:t})},n.isStaticXFA=function(t){return this.workerPromise.emit("isStaticXFA",{docId:t})},n.isXFA=function(t){return this.workerPromise.emit("isXFA",{docId:t})},n.removeXFA=function(t){return this.workerPromise.emit("removeXFA",{docId:t})},n.createWebLinks=function(t,e,n){return this.workerPromise.emit("createWebLinks",{docId:t,pageId:e,paramPages:n})},n.removeWebLinks=function(t,e,n){return this.workerPromise.emit("removeWebLinks",{docId:t,pageId:e,paramPages:n})},n.linkHasPA=function(t,e,n){return this.workerPromise.emit("linkHasPA",{docId:t,pageId:e,annotId:n})},n.linkResetAByPA=function(t,e,n){return this.workerPromise.emit("linkResetAByPA",{docId:t,pageId:e,annotId:n})},n.getDestinationsArray=function(t){return this.workerPromise.emit("getDestinationsArray",{docId:t})},n.deleteDestination=function(t,e,n){return this.workerPromise.emit("deleteDestination",{docId:t,pageId:e,name:n})},n.renameDestination=function(t,e,n,i){return this.workerPromise.emit("renameDestination",{docId:t,pageId:e,oldName:n,newName:i})},n.createDestination=function(t,e,n,i){return this.workerPromise.emit("createDestination",{docId:t,pageId:e,title:n,pageNum:i})},n.resetDestination=function(t,e,n,i){return this.workerPromise.emit("resetDestination",{docId:t,pageId:e,title:n,pageNum:i})},n.moveBookmark=function(t,e,n,i){return this.workerPromise.emit("moveBookmark",{docId:t,targetBookmarkId:e,destBookmarkId:n,position:i})},n.combineFormsToCSV=function(t,e){let n=this.workerPromise.calls(e),i=this.workerPromise.emit("combineFormsToCSV",{filesArray:t,writeStreamCall:n});return i.finally((()=>{this.workerPromise.releaseCall(n)})),i},n.addAnnotObjects=function(t,e,n){return this.workerPromise.emit("addAnnotObjects",{docId:t,pageId:e,objects:n})},n.reversePages=function(t,e){return this.workerPromise.emit("reversePages",{docId:t,pageRanges:e})},n.movePagesTo=function(t,e,n){return this.workerPromise.emit("movePagesTo",{docId:t,pageRange:e,destIndex:n})},n.removePages=function(t,e){return this.workerPromise.emit("removePages",{docId:t,pageRange:e})},n.insertBlankPages=function(t,e,n,i){return this.workerPromise.emit("insertBlankPages",{docId:t,pageRange:e,width:n,height:i})},n.insertBlankPages2=function(t,e,n,i){return this.workerPromise.emit("insertBlankPages2",{docId:t,pageRange:e,width:n,height:i})},n.rotatePages=function(t,e,n){return this.workerPromise.emit("rotatePages",{docId:t,pageRange:e,rotation:n})},n.getPageIndexByLabelText=function(t,e){return this.workerPromise.emit("getPageIndexByLabelText",{docId:t,text:e})},n.getCurrentPageLabelInfo=function(t,e){return this.workerPromise.emit("getCurrentPageLabelInfo",{docId:t,pageIndex:e})},n.checkDocIsUseLogicPage=function(t){return this.workerPromise.emit("checkDocIsUseLogicPage",{docId:t})},n.formatPageNumbers=function(t,e,n,i){return this.workerPromise.emit("formatPageNumbers",{docId:t,isExtendNumbering:e,pageRange:n,numberingInfo:i})},n.updatePageLabelsByAction=function(t,e,n){return this.workerPromise.emit("updatePageLabelsByAction",{docId:t,action:e,args:n})},n.getPortfolioTreeNode=function(t){return this.workerPromise.emit("getPortfolioTreeNode",{docId:t})},n.getPortfolioInitialNodePath=function(t){return this.workerPromise.emit("getPortfolioInitialNodePath",{docId:t})},n.sendSortFolioParam=function(t,e,n){return this.workerPromise.emit("sendSortFolioParam",{docId:t,target:e,order:n})},n.getFolioNodePDFDoc=function(t){return this.workerPromise.emit("getFolioNodePDFDoc",{docId:t})},n.recordPDFFileByPortFolioNode=function(t,e){return this.workerPromise.emit("recordPDFFileByPortFolioNode",{docId:t,handle:e})},n.getPortfolioFileStream=function(t,e,n){let i=this.workerPromise.calls(n),r=this.workerPromise.emit("getPortfolioFileStream",{docId:t,nodeHandle:e,writeStream:i});return r.finally((()=>{this.workerPromise.releaseCall(i)})),r},n.getPortfolioStream=function(t,e){return this.workerPromise.emit("getPortfolioStream",{docId:t,nodeHandles:e})},n.getPortfolioSubNodes=function(t,e){return this.workerPromise.emit("getPortfolioSubNodes",{docId:t,nodeHandle:e})},n.changePortfolioSubNodesOrder=function(t,e,n,i){return this.workerPromise.emit("changePortfolioSubNodesOrder",{docId:t,nodeHandle:e,sourceIndexes:n,targetIndex:i})},n.portfolioMoveSubNodeToSubFolderNode=function(t,e,n,i){return this.workerPromise.emit("portfolioMoveSubNodeToSubFolderNode",{docId:t,nodeHandle:e,sourceHandles:n,targetHandle:i})},n.portfolioHasSameNameSubNode=function(t,e,n,i){return this.workerPromise.emit("portfolioHasSameNameSubNode",{docId:t,name:e,type:n,targetHandle:i})},n.setPortfolioInitialViewMode=function(t,e){return this.workerPromise.emit("setPortfolioInitialViewMode",{docId:t,value:e})},n.setPortfolioSortingOrder=function(t,e){return this.workerPromise.emit("setPortfolioSortingOrder",{docId:t,bool:e})},n.setPortfolioOrderSchemaField=function(t,e){return this.workerPromise.emit("setPortfolioOrderSchemaField",{docId:t,keyName:e})},n.deletePortfolioSchemaField=function(t,e){return this.workerPromise.emit("deletePortfolioSchemaField",{docId:t,index:e})},n.addPortfolioSchemaField=function(t,e){return this.workerPromise.emit("addPortfolioSchemaField",{docId:t,name:e})},n.changePortfolioSchemaFieldVisible=function(t,e,n){return this.workerPromise.emit("changePortfolioSchemaFieldVisible",{docId:t,index:e,isVisible:n})},n.changePortfolioSchemaFieldPosition=function(t,e,n){return this.workerPromise.emit("changePortfolioSchemaFieldPosition",{docId:t,index:e,offset:n})},n.getPortfolioInfo=function(t){return this.workerPromise.emit("getPortfolioInfo",{docId:t})},n.setPortfolioInfo=function(t,e){return this.workerPromise.emit("setPortfolioInfo",{docId:t,info:e})},n.portfolioAddFiles=function(t,e,n,i){return this.workerPromise.emit("portfolioAddFiles",{docId:t,files:e,targetIndex:n,folderNodeHandle:i})},n.portfolioCreateFolder=function(t,e,n){return this.workerPromise.emit("portfolioCreateFolder",{docId:t,name:e,folderNodeHandle:n})},n.portfolioRemoveSubNodes=function(t,e,n){return this.workerPromise.emit("portfolioRemoveSubNodes",{docId:t,folderNodeHandle:e,subNodeHandles:n})},n.portfolioRegenerateTOC=function(t,e){return this.workerPromise.emit("portfolioRegenerateTOC",{docId:t,title:e})},n.getSnappedPoint=function(t,e,n,i){return this.workerPromise.emit("getSnappedPoint",{docId:t,pageId:e,point:n,mode:i})},n.getPageTextRectCount=function(t,e){return this.workerPromise.emit("getPageTextRectCount",{docId:t,pageId:e})},n.getPageTextByRectIndex=function(t,e,n){return this.workerPromise.emit("getPageTextByRectIndex",{docId:t,pageId:e,rectIndex:n})},n.isCPDF=function(t){return this.workerPromise.emit("isCPDF",{docId:t})},n.getDocURI=function(t){return this.workerPromise.emit("getDocURI",{docId:t})},n.convertToCPDF=function(t,e,n,i,r){return this.workerPromise.emit("convertToCPDF",{docId:t,cPDFFileName:e,cPDFEndPoint:n,cPDFUserToken:i,cPDFUserIDFromToken:r})},n.removeCDocId=function(t,e,n,i,r){return this.workerPromise.emit("removeCDocId",{docId:t,cPDFFileName:e,cPDFEndPoint:n,cPDFUserToken:i,cPDFUserIDFromToken:r})},n.changePEProperty=function(t,e,n,i){return this.workerPromise.emit("changePEProperty",{docId:t,type:n,fn:e,param:i})},n.handlePageEditorEvent=function(t,e,n,...i){return this.workerPromise.emit("handlePageEditorEvent",{docId:t,fn:e,delay:n,args:i})},n.reInitPageEditor=function(t){return this.workerPromise.emit("reInitPageEditor",{docId:t})},n.updateWinlessMatrix=function(t,e,n){return this.workerPromise.emit("updateWinlessMatrix",{docId:t,type:e,matrixes:n})},n.changeEditingProperty=function(t,e,n){return this.workerPromise.emit("changeEditingProperty",{docId:t,fn:e,args:n})},n.triggerPopMenuAction=function(t,e){return this.workerPromise.emit("triggerPopMenuAction",{docId:t,action:e})},n.removeMetadata=function(t,e){return this.workerPromise.emit("removeMetadata",{id:t,key:e})},n.getViewerPreference=function(t){return this.workerPromise.emit("getViewerPreference",{docId:t})},n.setViewPreference=function(t,e,n){return this.workerPromise.emit("setViewPreference",{docId:t,key:e,value:n})},n.handleTouchUpEvent=function(t,e,...n){return this.workerPromise.emit("handleTouchUpEvent",{docId:t,fn:e,args:n})},n.handleFindReplaceEvent=function(t,e,...n){return this.workerPromise.emit("handleFindReplaceEvent",{docId:t,fn:e,args:n})},n.triggerTUPopMenuAction=function(t,e,n){return this.workerPromise.emit("triggerTUPopMenuAction",{docId:t,action:e,args:n})},n.removeLayerNode=function(t,e){return this.workerPromise.emit("removeLayerNode",{docId:t,layerId:e})},n.getLayersByPage=function(t,e){return this.workerPromise.emit("getLayersByPage",{docId:t,pageId:e})},n.updateLayerInfo=function(t,e){return this.workerPromise.emit("updateLayerInfo",{docId:t,layerInfo:e})},n.flattenLayers=function(t){return this.workerPromise.emit("flattenLayers",{docId:t})},n.mergeLayers=function(t,e,n){return this.workerPromise.emit("mergeLayers",{docId:t,layerIds:e,mergeTo:n})},n.getLayerRelatedAnnots=function(t,e){return this.workerPromise.emit("getLayerRelatedAnnots",{docId:t,layerId:e})},n.layerMoveTo=function(t,e,n,i){return this.workerPromise.emit("layerMoveTo",{docId:t,layerId:e,parentLayerId:n,index:i})},n.getInfos=function(t){return this.workerPromise.emit("getInfos",{docId:t})},n.hasDocIsWrapped=function(t){return this.workerPromise.emit("hasDocIsWrapped",{docId:t})},n.removeMetadata=function(t,e){return this.workerPromise.emit("removeMetadata",{id:t,key:e})},n.getViewerPreference=function(t){return this.workerPromise.emit("getViewerPreference",{docId:t})},n.setViewPreference=function(t,e,n){return this.workerPromise.emit("setViewPreference",{docId:t,key:e,value:n})},n.getInfos=function(t){return this.workerPromise.emit("getInfos",{docId:t})},n.getEmbeddedFontData=function(t){return this.workerPromise.emit("getEmbeddedFontData",{docId:t})},n.computeAuditSpace=function(t){return this.workerPromise.emit("computeAuditSpace",{docId:t})},n.optimizer=function(t,e,n){return this.workerPromise.emit("optimizer",{docId:t,option:e,portfolioNodeHandle:n})},n.optimizeScannedPDF=function(t,e,n){let i=this.workerPromise.calls(n),r=this.workerPromise.emit("optimizeScannedPDF",{docId:t,option:e,callback:i});return r.finally((()=>{this.workerPromise.releaseCall(i)})),r},n.startReplacePages=function(t,e,n,i,r){return this.workerPromise.emit("startReplacePages",{docId:t,startIndex:e,count:n,srcPdfDocId:i,srcPageindexRange:r})},n.importAsLayer=function(t,e){return this.workerPromise.emit("importAsLayer",{docId:t,args:e})},n.previewImportLayer=function(t,e){return this.workerPromise.emit("previewImportLayer",{docId:t,args:e})},n.reloadLayer=function(t){return this.workerPromise.emit("reloadLayer",{docId:t})},n.cloneGraphicObject=function(t,e,n,i){return this.workerPromise.emit("cloneGraphicObject",{docId:t,pageId:e,srcPageId:n,ids:i})},n.compareDoc=function({baseDocId:t,basePageCount:e,basePageIndex:n,baseFileName:i,compareDocId:r,comparedPageCount:o,comparePageIndex:s,comparePageNum:a,compareFileName:c,newTemplateId:l,oldTemplateId:h,options:u,compareResultStrings:d}){let f={baseDocId:t,basePageCount:e,basePageIndex:n,baseFileName:i,compareDocId:r,comparedPageCount:o,comparePageIndex:s,comparePageNum:a,compareFileName:c,newTemplateId:l,oldTemplateId:h,inputOptions:u,compareResultStrings:d};return this.workerPromise.emit("compareDoc",{compareDocParam:f})},n.searchDoc=function(t,e,n,i,r){return this.workerPromise.emit("searchDoc",{docId:t,type:e,words:n,flag:i,isForRedact:r})},n.generateDocHash=function(t,e){return this.workerPromise.emit("generateDocHash",{docId:t,buffer:e})},n.getSignIdForEvidence=function(t){return this.workerPromise.emit("getSignIdForEvidence",{docId:t})},n.assignSignerForESignCN=function(t,e){return this.workerPromise.emit("assignSignerForESignCN",{docId:t,data:e})},n.setESignCNFlowSignMode=function(t,e){return this.workerPromise.emit("setESignCNFlowSignMode",{docId:t,type:e})},n.getESignCNFlowSignMode=function(t){return this.workerPromise.emit("getESignCNFlowSignMode",{docId:t})},n.isESignCNFile=function(t){return this.workerPromise.emit("isESignCNFile",{docId:t})},n.getESignCNMode=function(t,e){return this.workerPromise.emit("getESignCNMode",{docId:t,fieldName:e})},n.isESignCNSignature=function(t,e,n){return this.workerPromise.emit("isESignCNSignature",{docId:t,fieldId:e,pageIndex:n})},n.addAuditTrail=function(t){return this.workerPromise.emit("addAuditTrail",{docId:t})},n.getDocAuditTrail=function(t,e,n){return this.workerPromise.emit("getDocAuditTrail",{docId:t,buffer:e,flowSignAnnots:n})},n.destroyForm=function(t){return this.workerPromise.emit("destroyForm",{docId:t})},n.updatePropAuthDictForESignCN=function(t,e,n){return this.workerPromise.emit("updatePropAuthDictForESignCN",{docId:t,fieldName:e,willingnessInfo:n})},n.getAssignInfoForESignCN=function(t){return this.workerPromise.emit("getAssignInfoForESignCN",{docId:t})},n.getOrderOfSignFlowFile=function(t){return this.workerPromise.emit("getOrderOfSignFlowFile",{docId:t})},n.checkFieldWhetherFill=function(t,e){return this.workerPromise.emit("checkFieldWhetherFill",{docId:t,emailValue:e})},n.setSignatureAP=function(t,e,n,i,r){return this.workerPromise.emit("setSignatureAP",{docId:t,pageIndex:e,annotId:n,inkSignBuffer:i,pagingSigObjNum:r})},n.getFlowSignInfo=function(t){return this.workerPromise.emit("getFlowSignInfo",{docId:t})},n.addPagingSealSignature=function(t,e){return this.workerPromise.emit("addPagingSealSignature",{docId:t,pagingSigConfig:e})},n.updatePagingSealSignature=function(t,e,n){return this.workerPromise.emit("updatePagingSealSignature",{docId:t,pagingSigConfig:e,pagingSigObjNum:n})},n.getAllPagingSealSignatures=function(t,e){return this.workerPromise.emit("getAllPagingSealSignatures",{docId:t,pagingSigObjNum:e})},n.removePagingSealSignature=function(t,e){return this.workerPromise.emit("removePagingSealSignature",{docId:t,pagingSigObjNum:e})},n.getAllPagingSigsInfo=function(t,e){return this.workerPromise.emit("getAllPagingSigsInfo",{docId:t,pagingSigObjNum:e})},n.updateBeadRect=function(t,e,n,i){return this.workerPromise.emit("updateBeadRect",{docId:t,threadObjNum:e,beadObjNum:n,rect:i})},n.insertThread=function(t,e){return this.workerPromise.emit("insertThread",{docId:t,threadInfo:e})},n.updateThread=function(t,e){return this.workerPromise.emit("updateThread",{docId:t,threadInfo:e})},n.removeThread=function(t,e){return this.workerPromise.emit("removeThread",{docId:t,objNum:e})},n.insertBead=function(t,e,n,i,r){return this.workerPromise.emit("insertBead",{docId:t,pageIndex:e,threadObjNum:n,pdfBeadRect:i,beadIndex:r})},n.removeBead=function(t,e,n){return this.workerPromise.emit("removeBead",{docId:t,threadObjNum:e,beadObjNum:n})},n.mergeThread=function(t,e,n){return this.workerPromise.emit("mergeThread",{docId:t,threadObjNum:e,mergeToThreadObjNum:n})},n.normalizePage=function(t,e){return this.workerPromise.emit("normalizePage",{docId:t,pageId:e})},n.getViewportRect=function(t,e){return this.workerPromise.emit("getViewportRect",{docId:t,pageId:e})},n.getMeasureScaleRatio=function(t,e){return this.workerPromise.emit("getMeasureScaleRatio",{docId:t,pageId:e})},n.setMeasureScaleRatio=function(t,e,n,i){return this.workerPromise.emit("setMeasureScaleRatio",{docId:t,pageId:e,storeInPage:n,measureInfo:i})},n.exportMeasureData=function(t,e){return this.workerPromise.emit("exportMeasureData",{docId:t,columnNames:e})},n.setRenderConfigLineWeight=function(t,e){return this.workerPromise.emit("setRenderConfigLineWeight",{docId:t,lineWeight:e})},n.convertToTextMarkup=function(t,e){return this.workerPromise.emit("convertToTextMarkup",{docId:t,findResults:e})},n.redactSearch=function(t,e,n,i,r,o){return this.workerPromise.emit("redactSearch",{docId:t,findResults:e,start:n,count:i,overlayTexts:r,opts:o})},n.setRedactAppearance=function(t,e,n,i){return this.workerPromise.emit("setRedactAppearance",{docId:t,pageId:e,annotId:n,option:i})},n.getCompareFileFilterNums=function(t){return this.workerPromise.emit("getCompareFileFilterNums",{docId:t})},n.getPDFDocFromImageFile=function(t,e){return this.workerPromise.emit("getPDFDocFromImageFile",t,e)},n.isScannedDoc=function(t){return this.workerPromise.emit("isScannedDoc",{docId:t})},n.getPageCountAsync=function(t){return this.workerPromise.emit("getPageCountAsync",{docId:t})},n.getPageTexts=function(t,e,n,i,r){return this.workerPromise.emit("getPageTexts",{docId:t,pageId:e,settings:n,minWidth:i,eol:r})},n.hasOwnerPassword=function(t){return this.workerPromise.emit("hasOwnerPassword",{docId:t})},n.removePDFAID=function(t){return this.workerPromise.emit("removePDFAID",{docId:t})},n.setPageTransition=function(t,e,n,i,r){return this.workerPromise.emit("setPageTransition",{docId:t,transName:e,direction:n,speed:i,range:r})},n.getPageTransitionByIndex=function(t,e){return this.workerPromise.emit("getPageTransitionByIndex",{docId:t,pageIndex:e})},n.getText=function(t,e,n,i){let r=this.workerPromise.calls(i),o=this.workerPromise.emit("getText",{docId:t,pageRange:e,taskId:n,taskProgress:r});return o.finally((()=>{this.workerPromise.releaseCall(r)})),o},n.cancelTaskProgress=function(t,e){return this.workerPromise.emit("cancelTaskProgress",{docId:t,taskId:e})},n.isScannedPage=function(t,e){return this.workerPromise.emit("isScannedPage",{docId:t,pageId:e})},n.createSummarizeComments=function(t,e,n){let i=this.workerPromise.calls(e),r=this.workerPromise.emit("createSummarizeComments",{docId:t,param:n,writeStream:i});return r.finally((()=>{this.workerPromise.releaseCall(i)})),r},n.getPageTransition=function(t,e){return this.workerPromise.emit("getPageTransition",{docId:t,pageId:e})},n.hiddenDataSanitizeDocument=function(t){return this.workerPromise.emit("hiddenDataSanitizeDocument",{docId:t})},n.hiddenDataRemoveHiddenInfo=function(t,e){return this.workerPromise.emit("hiddenDataRemoveHiddenInfo",{docId:t,options:e})},n.cacheFontConfig=function(t,e,n){return this.workerPromise.emit("cacheFontConfig",{fontServerRoot:t,notExistFonts:e,customUploadFonts:n})},n.getFxcoreFontList=function(){return this.workerPromise.emit("getFxcoreFontList")},n.getPureTexts=function(t,e,n){return this.workerPromise.emit("getPureTexts",{docId:t,pageId:e,lr:n})},n.getLRContentForChatWithDoc=function(t,e){return this.workerPromise.emit("getLRContentForChatWithDoc",{docId:t,options:e})},n.getFATLAndEUTLList=function(t,e){return this.workerPromise.emit("getFATLAndEUTLList",{urls:t,isUpdate:e})},n.getTextInRect=function(t,e,n,i){return this.workerPromise.emit("getTextInRect",{docId:t,pageId:e,rect:n,type:i})},n.previewIconDoc=function(t){return this.workerPromise.emit("previewIconDoc",{icon:t})},n.getAnnotRects=function(t,e){return this.workerPromise.emit("getAnnotRects",{docId:t,pageId:e})},n.transformPage=function(t,e,n){return this.workerPromise.emit("transformPage",{docId:t,pageId:e,options:n})},n.getSignatureBitmap=function(t,e){return this.workerPromise.emit("getSignatureBitmap",{docId:t,fieldName:e})},n.setSignatureBitmap=function(t,e,n){return this.workerPromise.emit("setSignatureBitmap",{docId:t,fieldName:e,buffer:n})},n.getGraphicsObjectsByRect=function(t,e,n,i,r,o){return this.workerPromise.emit("getGraphicsObjectsByRect",{docId:t,pageId:e,rect:n,tolerance:i,type:r,isInRect:o})},n.removeAllEmbeddedFiles=function(t){return this.workerPromise.emit("removeAllEmbeddedFiles",{docId:t})},n.getEmbeddedFileNames=function(t){return this.workerPromise.emit("getEmbeddedFileNames",{docId:t})},n.comparePDFDocuments=function(t,e,n,i){return this.workerPromise.emit("comparePDFDocuments",{docId:t,otherDocId:e,params:n,progressId:i})},n.getCharBBox=function(t,e){return this.workerPromise.emit("getCharBBox",{fontId:t,unicode:e})},n.getCharWidthByFontID=function(t,e){return this.workerPromise.emit("getCharWidthByFontID",{fontId:t,unicode:e})},n.getFontToneByFontID=function(t){return this.workerPromise.emit("getFontToneByFontID",{fontId:t})},n.updateCalloutFigure=function(t,e,n,i,r,o){return this.workerPromise.emit("updateCalloutFigure",{docId:t,pageId:e,annotId:n,outerRect:i,innerRect:r,calloutLinePoints:o})},n.clearPageRenderCache=function(t,e){return this.workerPromise.emit("clearPageRenderCache",{docId:t,pageId:e})},n.updateRectFigure=function(t,e,n,i,r){return this.workerPromise.emit("updateRectFigure",{docId:t,pageId:e,annotId:n,outerRect:i,innerRect:r})},n.drawTextString=function(t,e){return this.workerPromise.emit("drawTextString",{docId:t,font:e})},e}(s.Z);function w(t){t.on("wasmBinary",(function(t){localStorage.setItem(g,t)})),t.on("asmMem",(function(t){localStorage.setItem(m,t)})),t.on("asmJs",(function(t){localStorage.setItem(v,t)}))}var b=function(t){return function(t){function e(e,n,i){var r;return(r=t.call(this,e,n,i)||this).api=new y(e),r}(0,i.Z)(e,t);var n=e.prototype;return n.registerSecurityCallback=function(t,e){return this.api.registerSecurityCallback(t,e)},n.registerCustomWebPluginSecurityCallback=function(t,e,n){return this.api.registerCustomWebPluginSecurityCallback(t,e,n)},n.unRegisterSecurityHandler=function(t,e){return this.api.unRegisterSecurityHandler(t,e)},n.setFontMap=function(t){return this.api.setFontMap(t)},n.setWatermarkFontMap=function(t){return this.api.setWatermarkFontMap(t)},n.addFontMap=function(t){return this.api.addFontMap(t)},n.getCharBBox=function(t,e){return this.api.getCharBBox(t,e)},n.getCharWidthByFontID=function(t,e){return this.api.getCharWidthByFontID(t,e)},n.getFontToneByFontID=function(t){return this.api.getFontToneByFontID(t)},n.setJPXDownSample=function(t){return this.api.setJPXDownSample(t)},n.cacheFontConfig=function(t,e,n){return this.api.cacheFontConfig(t,e,n)},n.getFxcoreFontList=function(){return this.api.getFxcoreFontList()},n.getFATLAndEUTLList=function(t,e=!1){return this.api.getFATLAndEUTLList(t,e)},e}(t)}},7187:function(t){var e=Object.create||function(t){var e=function(){};return e.prototype=t,new e},n=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},i=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=e(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0;var o,s=10;try{var a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0}),o=0===a.x}catch(t){o=!1}function c(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function l(t,n,i,r){var o,s,a;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((s=t._events)?(s.newListener&&(t.emit("newListener",n,i.listener?i.listener:i),s=t._events),a=s[n]):(s=t._events=e(null),t._eventsCount=0),a){if("function"==typeof a?a=s[n]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),!a.warned&&(o=c(t))&&o>0&&a.length>o){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(n)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=t,l.type=n,l.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else a=s[n]=i,++t._eventsCount;return t}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function u(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=i.call(h,r);return o.listener=n,r.wrapFn=o,o}function d(t,e,n){var i=t._events;if(!i)return[];var r=i[e];return r?"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):p(r,r.length):[]}function f(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function p(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}o?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');s=t}}):r.defaultMaxListeners=s,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return c(this)},r.prototype.emit=function(t){var e,n,i,r,o,s,a="error"===t;if(s=this._events)a=a&&null==s.error;else if(!a)return!1;if(a){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var c=new Error('Unhandled "error" event. ('+e+")");throw c.context=e,c}if(!(n=s[t]))return!1;var l="function"==typeof n;switch(i=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var i=t.length,r=p(t,i),o=0;o<i;++o)r[o].call(n)}(n,l,this);break;case 2:!function(t,e,n,i){if(e)t.call(n,i);else for(var r=t.length,o=p(t,r),s=0;s<r;++s)o[s].call(n,i)}(n,l,this,arguments[1]);break;case 3:!function(t,e,n,i,r){if(e)t.call(n,i,r);else for(var o=t.length,s=p(t,o),a=0;a<o;++a)s[a].call(n,i,r)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,i,r,o){if(e)t.call(n,i,r,o);else for(var s=t.length,a=p(t,s),c=0;c<s;++c)a[c].call(n,i,r,o)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),o=1;o<i;o++)r[o-1]=arguments[o];!function(t,e,n,i){if(e)t.apply(n,i);else for(var r=t.length,o=p(t,r),s=0;s<r;++s)o[s].apply(n,i)}(n,l,this,r)}return!0},r.prototype.addListener=function(t,e){return l(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return l(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,u(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,u(this,t,e)),this},r.prototype.removeListener=function(t,n){var i,r,o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(i=r[t]))return this;if(i===n||i.listener===n)0==--this._eventsCount?this._events=e(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||n));else if("function"!=typeof i){for(o=-1,s=i.length-1;s>=0;s--)if(i[s]===n||i[s].listener===n){a=i[s].listener,o=s;break}if(o<0)return this;0===o?i.shift():function(t,e){for(var n=e,i=n+1,r=t.length;i<r;n+=1,i+=1)t[n]=t[i];t.pop()}(i,o),1===i.length&&(r[t]=i[0]),r.removeListener&&this.emit("removeListener",t,a||n)}return this},r.prototype.removeAllListeners=function(t){var i,r,o;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=e(null),this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=e(null):delete r[t]),this;if(0===arguments.length){var s,a=n(r);for(o=0;o<a.length;++o)"removeListener"!==(s=a[o])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=e(null),this._eventsCount=0,this}if("function"==typeof(i=r[t]))this.removeListener(t,i);else if(i)for(o=i.length-1;o>=0;o--)this.removeListener(t,i[o]);return this},r.prototype.listeners=function(t){return d(this,t,!0)},r.prototype.rawListeners=function(t){return d(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},r.prototype.listenerCount=f,r.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},4953:function(t){
/* flatpickr v4.6.9, @license MIT */
t.exports=function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(){return t=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},t.apply(this,arguments)};function e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}var n=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],i={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return"undefined"!=typeof console&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var n=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},r={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},o=function(t,e){return void 0===e&&(e=2),("000"+t).slice(-1*e)},s=function(t){return!0===t?1:0};function a(t,e){var n;return function(){var i=this;clearTimeout(n),n=setTimeout((function(){return t.apply(i,arguments)}),e)}}var c=function(t){return t instanceof Array?t:[t]};function l(t,e,n){if(!0===n)return t.classList.add(e);t.classList.remove(e)}function h(t,e,n){var i=window.document.createElement(t);return e=e||"",n=n||"",i.className=e,void 0!==n&&(i.textContent=n),i}function u(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function d(t,e){return e(t)?t:t.parentNode?d(t.parentNode,e):void 0}function f(t,e){var n=h("div","numInputWrapper"),i=h("input","numInput "+t),r=h("span","arrowUp"),o=h("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==e)for(var s in e)i.setAttribute(s,e[s]);return n.appendChild(i),n.appendChild(r),n.appendChild(o),n}function p(t){try{return"function"==typeof t.composedPath?t.composedPath()[0]:t.target}catch(e){return t.target}}var g=function(){},m=function(t,e,n){return n.months[e?"shorthand":"longhand"][t]},v={D:g,F:function(t,e,n){t.setMonth(n.months.longhand.indexOf(e))},G:function(t,e){t.setHours(parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,n){t.setHours(t.getHours()%12+12*s(new RegExp(n.amPM[1],"i").test(e)))},M:function(t,e,n){t.setMonth(n.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(1e3*parseFloat(e))},W:function(t,e,n){var i=parseInt(e),r=new Date(t.getFullYear(),0,2+7*(i-1),0,0,0,0);return r.setDate(r.getDate()-r.getDay()+n.firstDayOfWeek),r},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours(parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:g,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:g,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},y={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},w={Z:function(t){return t.toISOString()},D:function(t,e,n){return e.weekdays.shorthand[w.w(t,e,n)]},F:function(t,e,n){return m(w.n(t,e,n)-1,!1,e)},G:function(t,e,n){return o(w.h(t,e,n))},H:function(t){return o(t.getHours())},J:function(t,e){return void 0!==e.ordinal?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[s(t.getHours()>11)]},M:function(t,e){return m(t.getMonth(),!0,e)},S:function(t){return o(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,n){return n.getWeek(t)},Y:function(t){return o(t.getFullYear(),4)},d:function(t){return o(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return o(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return o(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},b=function(t){var e=t.config,n=void 0===e?i:e,o=t.l10n,s=void 0===o?r:o,a=t.isMobile,c=void 0!==a&&a;return function(t,e,i){var r=i||s;return void 0===n.formatDate||c?e.split("").map((function(e,i,o){return w[e]&&"\\"!==o[i-1]?w[e](t,r,n):"\\"!==e?e:""})).join(""):n.formatDate(t,e,r)}},A=function(t){var e=t.config,n=void 0===e?i:e,o=t.l10n,s=void 0===o?r:o;return function(t,e,r,o){if(0===t||t){var a,c=o||s,l=t;if(t instanceof Date)a=new Date(t.getTime());else if("string"!=typeof t&&void 0!==t.toFixed)a=new Date(t);else if("string"==typeof t){var h=e||(n||i).dateFormat,u=String(t).trim();if("today"===u)a=new Date,r=!0;else if(/Z$/.test(u)||/GMT$/.test(u))a=new Date(t);else if(n&&n.parseDate)a=n.parseDate(t,h);else{a=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var d=void 0,f=[],p=0,g=0,m="";p<h.length;p++){var w=h[p],b="\\"===w,A="\\"===h[p-1]||b;if(y[w]&&!A){m+=y[w];var P=new RegExp(m).exec(t);P&&(d=!0)&&f["Y"!==w?"push":"unshift"]({fn:v[w],val:P[++g]})}else b||(m+=".");f.forEach((function(t){var e=t.fn,n=t.val;return a=e(a,n,c)||a}))}a=d?a:void 0}}if(a instanceof Date&&!isNaN(a.getTime()))return!0===r&&a.setHours(0,0,0,0),a;n.errorHandler(new Error("Invalid date provided: "+l))}}};function P(t,e,n){return void 0===n&&(n=!0),!1!==n?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var S=function(t,e,n){return t>Math.min(e,n)&&t<Math.max(e,n)},C={DAY:864e5};function E(t){var e=t.defaultHour,n=t.defaultMinute,i=t.defaultSeconds;if(void 0!==t.minDate){var r=t.minDate.getHours(),o=t.minDate.getMinutes(),s=t.minDate.getSeconds();e<r&&(e=r),e===r&&n<o&&(n=o),e===r&&n===o&&i<s&&(i=t.minDate.getSeconds())}if(void 0!==t.maxDate){var a=t.maxDate.getHours(),c=t.maxDate.getMinutes();(e=Math.min(e,a))===a&&(n=Math.min(c,n)),e===a&&n===c&&(i=t.maxDate.getSeconds())}return{hours:e,minutes:n,seconds:i}}"function"!=typeof Object.assign&&(Object.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var i=function(e){e&&Object.keys(e).forEach((function(n){return t[n]=e[n]}))},r=0,o=e;r<o.length;r++)i(o[r]);return t});var x=300;function D(g,v){var w={config:t(t({},i),R.defaultConfig),l10n:r};function D(){w.utils={getDaysInMonth:function(t,e){return void 0===t&&(t=w.currentMonth),void 0===e&&(e=w.currentYear),1===t&&(e%4==0&&e%100!=0||e%400==0)?29:w.l10n.daysInMonth[t]}}}function I(){w.element=w.input=g,w.isOpen=!1,Pt(),Ct(),Nt(),Lt(),D(),w.isMobile||Y(),H(),(w.selectedDates.length||w.config.noCalendar)&&(w.config.enableTime&&L(w.config.noCalendar?w.latestSelectedDateObj:void 0),Gt(!1)),F();var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!w.isMobile&&t&&Et(),Ut("onReady")}function T(t){return t.bind(w)}function F(){var t=w.config;!1===t.weekNumbers&&1===t.showMonths||!0!==t.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==w.calendarContainer&&(w.calendarContainer.style.visibility="hidden",w.calendarContainer.style.display="block"),void 0!==w.daysContainer){var e=(w.days.offsetWidth+1)*t.showMonths;w.daysContainer.style.width=e+"px",w.calendarContainer.style.width=e+(void 0!==w.weekWrapper?w.weekWrapper.offsetWidth:0)+"px",w.calendarContainer.style.removeProperty("visibility"),w.calendarContainer.style.removeProperty("display")}}))}function _(t){if(0===w.selectedDates.length){var e=void 0===w.config.minDate||P(new Date,w.config.minDate)>=0?new Date:new Date(w.config.minDate.getTime()),n=E(w.config);e.setHours(n.hours,n.minutes,n.seconds,e.getMilliseconds()),w.selectedDates=[e],w.latestSelectedDateObj=e}void 0!==t&&"blur"!==t.type&&qt(t);var i=w._input.value;O(),Gt(),w._input.value!==i&&w._debouncedChange()}function k(t,e){return t%12+12*s(e===w.l10n.amPM[1])}function M(t){switch(t%24){case 0:case 12:return 12;default:return t%12}}function O(){if(void 0!==w.hourElement&&void 0!==w.minuteElement){var t=(parseInt(w.hourElement.value.slice(-2),10)||0)%24,e=(parseInt(w.minuteElement.value,10)||0)%60,n=void 0!==w.secondElement?(parseInt(w.secondElement.value,10)||0)%60:0;void 0!==w.amPM&&(t=k(t,w.amPM.textContent));var i=void 0!==w.config.minTime||w.config.minDate&&w.minDateHasTime&&w.latestSelectedDateObj&&0===P(w.latestSelectedDateObj,w.config.minDate,!0);if(void 0!==w.config.maxTime||w.config.maxDate&&w.maxDateHasTime&&w.latestSelectedDateObj&&0===P(w.latestSelectedDateObj,w.config.maxDate,!0)){var r=void 0!==w.config.maxTime?w.config.maxTime:w.config.maxDate;(t=Math.min(t,r.getHours()))===r.getHours()&&(e=Math.min(e,r.getMinutes())),e===r.getMinutes()&&(n=Math.min(n,r.getSeconds()))}if(i){var o=void 0!==w.config.minTime?w.config.minTime:w.config.minDate;(t=Math.max(t,o.getHours()))===o.getHours()&&e<o.getMinutes()&&(e=o.getMinutes()),e===o.getMinutes()&&(n=Math.max(n,o.getSeconds()))}N(t,e,n)}}function L(t){var e=t||w.latestSelectedDateObj;e&&N(e.getHours(),e.getMinutes(),e.getSeconds())}function N(t,e,n){void 0!==w.latestSelectedDateObj&&w.latestSelectedDateObj.setHours(t%24,e,n||0,0),w.hourElement&&w.minuteElement&&!w.isMobile&&(w.hourElement.value=o(w.config.time_24hr?t:(12+t)%12+12*s(t%12==0)),w.minuteElement.value=o(e),void 0!==w.amPM&&(w.amPM.textContent=w.l10n.amPM[s(t>=12)]),void 0!==w.secondElement&&(w.secondElement.value=o(n)))}function B(t){var e=p(t),n=parseInt(e.value)+(t.delta||0);(n/1e3>1||"Enter"===t.key&&!/[^\d]/.test(n.toString()))&&ft(n)}function V(t,e,n,i){return e instanceof Array?e.forEach((function(e){return V(t,e,n,i)})):t instanceof Array?t.forEach((function(t){return V(t,e,n,i)})):(t.addEventListener(e,n,i),void w._handlers.push({remove:function(){return t.removeEventListener(e,n)}}))}function U(){Ut("onChange")}function H(){if(w.config.wrap&&["open","close","toggle","clear"].forEach((function(t){Array.prototype.forEach.call(w.element.querySelectorAll("[data-"+t+"]"),(function(e){return V(e,"click",w[t])}))})),w.isMobile)Bt();else{var t=a(wt,50);if(w._debouncedChange=a(U,x),w.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&V(w.daysContainer,"mouseover",(function(t){"range"===w.config.mode&&yt(p(t))})),V(window.document.body,"keydown",vt),w.config.inline||w.config.static||V(window,"resize",t),void 0!==window.ontouchstart?V(window.document,"touchstart",dt):V(window.document,"mousedown",dt),V(window.document,"focus",dt,{capture:!0}),!0===w.config.clickOpens&&(V(w._input,"focus",w.open),V(w._input,"click",w.open)),void 0!==w.daysContainer&&(V(w.monthNav,"click",Kt),V(w.monthNav,["keyup","increment"],B),V(w.daysContainer,"click",Tt)),void 0!==w.timeContainer&&void 0!==w.minuteElement&&void 0!==w.hourElement){var e=function(t){return p(t).select()};V(w.timeContainer,["increment"],_),V(w.timeContainer,"blur",_,{capture:!0}),V(w.timeContainer,"click",$),V([w.hourElement,w.minuteElement],["focus","click"],e),void 0!==w.secondElement&&V(w.secondElement,"focus",(function(){return w.secondElement&&w.secondElement.select()})),void 0!==w.amPM&&V(w.amPM,"click",(function(t){_(t),U()}))}w.config.allowInput&&V(w._input,"blur",mt)}}function j(t,e){var n=void 0!==t?w.parseDate(t):w.latestSelectedDateObj||(w.config.minDate&&w.config.minDate>w.now?w.config.minDate:w.config.maxDate&&w.config.maxDate<w.now?w.config.maxDate:w.now),i=w.currentYear,r=w.currentMonth;try{void 0!==n&&(w.currentYear=n.getFullYear(),w.currentMonth=n.getMonth())}catch(t){t.message="Invalid date supplied: "+n,w.config.errorHandler(t)}e&&w.currentYear!==i&&(Ut("onYearChange"),Q()),!e||w.currentYear===i&&w.currentMonth===r||Ut("onMonthChange"),w.redraw()}function $(t){var e=p(t);~e.className.indexOf("arrow")&&W(t,e.classList.contains("arrowUp")?1:-1)}function W(t,e,n){var i=t&&p(t),r=n||i&&i.parentNode&&i.parentNode.firstChild,o=Ht("increment");o.delta=e,r&&r.dispatchEvent(o)}function Y(){var t=window.document.createDocumentFragment();if(w.calendarContainer=h("div","flatpickr-calendar"),w.calendarContainer.tabIndex=-1,!w.config.noCalendar){if(t.appendChild(nt()),w.innerContainer=h("div","flatpickr-innerContainer"),w.config.weekNumbers){var e=st(),n=e.weekWrapper,i=e.weekNumbers;w.innerContainer.appendChild(n),w.weekNumbers=i,w.weekWrapper=n}w.rContainer=h("div","flatpickr-rContainer"),w.rContainer.appendChild(rt()),w.daysContainer||(w.daysContainer=h("div","flatpickr-days"),w.daysContainer.tabIndex=-1),X(),w.rContainer.appendChild(w.daysContainer),w.innerContainer.appendChild(w.rContainer),t.appendChild(w.innerContainer)}w.config.enableTime&&t.appendChild(it()),l(w.calendarContainer,"rangeMode","range"===w.config.mode),l(w.calendarContainer,"animate",!0===w.config.animate),l(w.calendarContainer,"multiMonth",w.config.showMonths>1),w.calendarContainer.appendChild(t);var r=void 0!==w.config.appendTo&&void 0!==w.config.appendTo.nodeType;if((w.config.inline||w.config.static)&&(w.calendarContainer.classList.add(w.config.inline?"inline":"static"),w.config.inline&&(!r&&w.element.parentNode?w.element.parentNode.insertBefore(w.calendarContainer,w._input.nextSibling):void 0!==w.config.appendTo&&w.config.appendTo.appendChild(w.calendarContainer)),w.config.static)){var o=h("div","flatpickr-wrapper");w.element.parentNode&&w.element.parentNode.insertBefore(o,w.element),o.appendChild(w.element),w.altInput&&o.appendChild(w.altInput),o.appendChild(w.calendarContainer)}w.config.static||w.config.inline||(void 0!==w.config.appendTo?w.config.appendTo:window.document.body).appendChild(w.calendarContainer)}function G(t,e,n,i){var r=pt(e,!0),o=h("span","flatpickr-day "+t,e.getDate().toString());return o.dateObj=e,o.$i=i,o.setAttribute("aria-label",w.formatDate(e,w.config.ariaDateFormat)),-1===t.indexOf("hidden")&&0===P(e,w.now)&&(w.todayDateElem=o,o.classList.add("today"),o.setAttribute("aria-current","date")),r?(o.tabIndex=-1,jt(e)&&(o.classList.add("selected"),w.selectedDateElem=o,"range"===w.config.mode&&(l(o,"startRange",w.selectedDates[0]&&0===P(e,w.selectedDates[0],!0)),l(o,"endRange",w.selectedDates[1]&&0===P(e,w.selectedDates[1],!0)),"nextMonthDay"===t&&o.classList.add("inRange")))):o.classList.add("flatpickr-disabled"),"range"===w.config.mode&&$t(e)&&!jt(e)&&o.classList.add("inRange"),w.weekNumbers&&1===w.config.showMonths&&"prevMonthDay"!==t&&n%7==1&&w.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+w.config.getWeek(e)+"</span>"),Ut("onDayCreate",o),o}function K(t){t.focus(),"range"===w.config.mode&&yt(t)}function q(t){for(var e=t>0?0:w.config.showMonths-1,n=t>0?w.config.showMonths:-1,i=e;i!=n;i+=t)for(var r=w.daysContainer.children[i],o=t>0?0:r.children.length-1,s=t>0?r.children.length:-1,a=o;a!=s;a+=t){var c=r.children[a];if(-1===c.className.indexOf("hidden")&&pt(c.dateObj))return c}}function z(t,e){for(var n=-1===t.className.indexOf("Month")?t.dateObj.getMonth():w.currentMonth,i=e>0?w.config.showMonths:-1,r=e>0?1:-1,o=n-w.currentMonth;o!=i;o+=r)for(var s=w.daysContainer.children[o],a=n-w.currentMonth===o?t.$i+e:e<0?s.children.length-1:0,c=s.children.length,l=a;l>=0&&l<c&&l!=(e>0?c:-1);l+=r){var h=s.children[l];if(-1===h.className.indexOf("hidden")&&pt(h.dateObj)&&Math.abs(t.$i-l)>=Math.abs(e))return K(h)}w.changeMonth(r),J(q(r),0)}function J(t,e){var n=gt(document.activeElement||document.body),i=void 0!==t?t:n?document.activeElement:void 0!==w.selectedDateElem&&gt(w.selectedDateElem)?w.selectedDateElem:void 0!==w.todayDateElem&&gt(w.todayDateElem)?w.todayDateElem:q(e>0?1:-1);void 0===i?w._input.focus():n?z(i,e):K(i)}function Z(t,e){for(var n=(new Date(t,e,1).getDay()-w.l10n.firstDayOfWeek+7)%7,i=w.utils.getDaysInMonth((e-1+12)%12,t),r=w.utils.getDaysInMonth(e,t),o=window.document.createDocumentFragment(),s=w.config.showMonths>1,a=s?"prevMonthDay hidden":"prevMonthDay",c=s?"nextMonthDay hidden":"nextMonthDay",l=i+1-n,u=0;l<=i;l++,u++)o.appendChild(G(a,new Date(t,e-1,l),l,u));for(l=1;l<=r;l++,u++)o.appendChild(G("",new Date(t,e,l),l,u));for(var d=r+1;d<=42-n&&(1===w.config.showMonths||u%7!=0);d++,u++)o.appendChild(G(c,new Date(t,e+1,d%r),d,u));var f=h("div","dayContainer");return f.appendChild(o),f}function X(){if(void 0!==w.daysContainer){u(w.daysContainer),w.weekNumbers&&u(w.weekNumbers);for(var t=document.createDocumentFragment(),e=0;e<w.config.showMonths;e++){var n=new Date(w.currentYear,w.currentMonth,1);n.setMonth(w.currentMonth+e),t.appendChild(Z(n.getFullYear(),n.getMonth()))}w.daysContainer.appendChild(t),w.days=w.daysContainer.firstChild,"range"===w.config.mode&&1===w.selectedDates.length&&yt()}}function Q(){if(!(w.config.showMonths>1||"dropdown"!==w.config.monthSelectorType)){var t=function(t){return!(void 0!==w.config.minDate&&w.currentYear===w.config.minDate.getFullYear()&&t<w.config.minDate.getMonth()||void 0!==w.config.maxDate&&w.currentYear===w.config.maxDate.getFullYear()&&t>w.config.maxDate.getMonth())};w.monthsDropdownContainer.tabIndex=-1,w.monthsDropdownContainer.innerHTML="";for(var e=0;e<12;e++)if(t(e)){var n=h("option","flatpickr-monthDropdown-month");n.value=new Date(w.currentYear,e).getMonth().toString(),n.textContent=m(e,w.config.shorthandCurrentMonth,w.l10n),n.tabIndex=-1,w.currentMonth===e&&(n.selected=!0),w.monthsDropdownContainer.appendChild(n)}}}function tt(){var t,e=h("div","flatpickr-month"),n=window.document.createDocumentFragment();w.config.showMonths>1||"static"===w.config.monthSelectorType?t=h("span","cur-month"):(w.monthsDropdownContainer=h("select","flatpickr-monthDropdown-months"),w.monthsDropdownContainer.setAttribute("aria-label",w.l10n.monthAriaLabel),V(w.monthsDropdownContainer,"change",(function(t){var e=p(t),n=parseInt(e.value,10);w.changeMonth(n-w.currentMonth),Ut("onMonthChange")})),Q(),t=w.monthsDropdownContainer);var i=f("cur-year",{tabindex:"-1"}),r=i.getElementsByTagName("input")[0];r.setAttribute("aria-label",w.l10n.yearAriaLabel),w.config.minDate&&r.setAttribute("min",w.config.minDate.getFullYear().toString()),w.config.maxDate&&(r.setAttribute("max",w.config.maxDate.getFullYear().toString()),r.disabled=!!w.config.minDate&&w.config.minDate.getFullYear()===w.config.maxDate.getFullYear());var o=h("div","flatpickr-current-month");return o.appendChild(t),o.appendChild(i),n.appendChild(o),e.appendChild(n),{container:e,yearElement:r,monthElement:t}}function et(){u(w.monthNav),w.monthNav.appendChild(w.prevMonthNav),w.config.showMonths&&(w.yearElements=[],w.monthElements=[]);for(var t=w.config.showMonths;t--;){var e=tt();w.yearElements.push(e.yearElement),w.monthElements.push(e.monthElement),w.monthNav.appendChild(e.container)}w.monthNav.appendChild(w.nextMonthNav)}function nt(){return w.monthNav=h("div","flatpickr-months"),w.yearElements=[],w.monthElements=[],w.prevMonthNav=h("span","flatpickr-prev-month"),w.prevMonthNav.innerHTML=w.config.prevArrow,w.nextMonthNav=h("span","flatpickr-next-month"),w.nextMonthNav.innerHTML=w.config.nextArrow,et(),Object.defineProperty(w,"_hidePrevMonthArrow",{get:function(){return w.__hidePrevMonthArrow},set:function(t){w.__hidePrevMonthArrow!==t&&(l(w.prevMonthNav,"flatpickr-disabled",t),w.__hidePrevMonthArrow=t)}}),Object.defineProperty(w,"_hideNextMonthArrow",{get:function(){return w.__hideNextMonthArrow},set:function(t){w.__hideNextMonthArrow!==t&&(l(w.nextMonthNav,"flatpickr-disabled",t),w.__hideNextMonthArrow=t)}}),w.currentYearElement=w.yearElements[0],Wt(),w.monthNav}function it(){w.calendarContainer.classList.add("hasTime"),w.config.noCalendar&&w.calendarContainer.classList.add("noCalendar");var t=E(w.config);w.timeContainer=h("div","flatpickr-time"),w.timeContainer.tabIndex=-1;var e=h("span","flatpickr-time-separator",":"),n=f("flatpickr-hour",{"aria-label":w.l10n.hourAriaLabel});w.hourElement=n.getElementsByTagName("input")[0];var i=f("flatpickr-minute",{"aria-label":w.l10n.minuteAriaLabel});if(w.minuteElement=i.getElementsByTagName("input")[0],w.hourElement.tabIndex=w.minuteElement.tabIndex=-1,w.hourElement.value=o(w.latestSelectedDateObj?w.latestSelectedDateObj.getHours():w.config.time_24hr?t.hours:M(t.hours)),w.minuteElement.value=o(w.latestSelectedDateObj?w.latestSelectedDateObj.getMinutes():t.minutes),w.hourElement.setAttribute("step",w.config.hourIncrement.toString()),w.minuteElement.setAttribute("step",w.config.minuteIncrement.toString()),w.hourElement.setAttribute("min",w.config.time_24hr?"0":"1"),w.hourElement.setAttribute("max",w.config.time_24hr?"23":"12"),w.hourElement.setAttribute("maxlength","2"),w.minuteElement.setAttribute("min","0"),w.minuteElement.setAttribute("max","59"),w.minuteElement.setAttribute("maxlength","2"),w.timeContainer.appendChild(n),w.timeContainer.appendChild(e),w.timeContainer.appendChild(i),w.config.time_24hr&&w.timeContainer.classList.add("time24hr"),w.config.enableSeconds){w.timeContainer.classList.add("hasSeconds");var r=f("flatpickr-second");w.secondElement=r.getElementsByTagName("input")[0],w.secondElement.value=o(w.latestSelectedDateObj?w.latestSelectedDateObj.getSeconds():t.seconds),w.secondElement.setAttribute("step",w.minuteElement.getAttribute("step")),w.secondElement.setAttribute("min","0"),w.secondElement.setAttribute("max","59"),w.secondElement.setAttribute("maxlength","2"),w.timeContainer.appendChild(h("span","flatpickr-time-separator",":")),w.timeContainer.appendChild(r)}return w.config.time_24hr||(w.amPM=h("span","flatpickr-am-pm",w.l10n.amPM[s((w.latestSelectedDateObj?w.hourElement.value:w.config.defaultHour)>11)]),w.amPM.title=w.l10n.toggleTitle,w.amPM.tabIndex=-1,w.timeContainer.appendChild(w.amPM)),w.timeContainer}function rt(){w.weekdayContainer?u(w.weekdayContainer):w.weekdayContainer=h("div","flatpickr-weekdays");for(var t=w.config.showMonths;t--;){var e=h("div","flatpickr-weekdaycontainer");w.weekdayContainer.appendChild(e)}return ot(),w.weekdayContainer}function ot(){if(w.weekdayContainer){var t=w.l10n.firstDayOfWeek,n=e(w.l10n.weekdays.shorthand);t>0&&t<n.length&&(n=e(n.splice(t,n.length),n.splice(0,t)));for(var i=w.config.showMonths;i--;)w.weekdayContainer.children[i].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+n.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function st(){w.calendarContainer.classList.add("hasWeeks");var t=h("div","flatpickr-weekwrapper");t.appendChild(h("span","flatpickr-weekday",w.l10n.weekAbbreviation));var e=h("div","flatpickr-weeks");return t.appendChild(e),{weekWrapper:t,weekNumbers:e}}function at(t,e){void 0===e&&(e=!0);var n=e?t:t-w.currentMonth;n<0&&!0===w._hidePrevMonthArrow||n>0&&!0===w._hideNextMonthArrow||(w.currentMonth+=n,(w.currentMonth<0||w.currentMonth>11)&&(w.currentYear+=w.currentMonth>11?1:-1,w.currentMonth=(w.currentMonth+12)%12,Ut("onYearChange"),Q()),X(),Ut("onMonthChange"),Wt())}function ct(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!0),w.input.value="",void 0!==w.altInput&&(w.altInput.value=""),void 0!==w.mobileInput&&(w.mobileInput.value=""),w.selectedDates=[],w.latestSelectedDateObj=void 0,!0===e&&(w.currentYear=w._initialDate.getFullYear(),w.currentMonth=w._initialDate.getMonth()),!0===w.config.enableTime){var n=E(w.config);N(n.hours,n.minutes,n.seconds)}w.redraw(),t&&Ut("onChange")}function lt(){w.isOpen=!1,w.isMobile||(void 0!==w.calendarContainer&&w.calendarContainer.classList.remove("open"),void 0!==w._input&&w._input.classList.remove("active")),Ut("onClose")}function ht(){void 0!==w.config&&Ut("onDestroy");for(var t=w._handlers.length;t--;)w._handlers[t].remove();if(w._handlers=[],w.mobileInput)w.mobileInput.parentNode&&w.mobileInput.parentNode.removeChild(w.mobileInput),w.mobileInput=void 0;else if(w.calendarContainer&&w.calendarContainer.parentNode)if(w.config.static&&w.calendarContainer.parentNode){var e=w.calendarContainer.parentNode;if(e.lastChild&&e.removeChild(e.lastChild),e.parentNode){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}}else w.calendarContainer.parentNode.removeChild(w.calendarContainer);w.altInput&&(w.input.type="text",w.altInput.parentNode&&w.altInput.parentNode.removeChild(w.altInput),delete w.altInput),w.input&&(w.input.type=w.input._type,w.input.classList.remove("flatpickr-input"),w.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(t){try{delete w[t]}catch(t){}}))}function ut(t){return!(!w.config.appendTo||!w.config.appendTo.contains(t))||w.calendarContainer.contains(t)}function dt(t){if(w.isOpen&&!w.config.inline){var e=p(t),n=ut(e),i=e===w.input||e===w.altInput||w.element.contains(e)||t.path&&t.path.indexOf&&(~t.path.indexOf(w.input)||~t.path.indexOf(w.altInput)),r="blur"===t.type?i&&t.relatedTarget&&!ut(t.relatedTarget):!i&&!n&&!ut(t.relatedTarget),o=!w.config.ignoredFocusElements.some((function(t){return t.contains(e)}));r&&o&&(void 0!==w.timeContainer&&void 0!==w.minuteElement&&void 0!==w.hourElement&&""!==w.input.value&&void 0!==w.input.value&&_(),w.close(),w.config&&"range"===w.config.mode&&1===w.selectedDates.length&&(w.clear(!1),w.redraw()))}}function ft(t){if(!(!t||w.config.minDate&&t<w.config.minDate.getFullYear()||w.config.maxDate&&t>w.config.maxDate.getFullYear())){var e=t,n=w.currentYear!==e;w.currentYear=e||w.currentYear,w.config.maxDate&&w.currentYear===w.config.maxDate.getFullYear()?w.currentMonth=Math.min(w.config.maxDate.getMonth(),w.currentMonth):w.config.minDate&&w.currentYear===w.config.minDate.getFullYear()&&(w.currentMonth=Math.max(w.config.minDate.getMonth(),w.currentMonth)),n&&(w.redraw(),Ut("onYearChange"),Q())}}function pt(t,e){var n;void 0===e&&(e=!0);var i=w.parseDate(t,void 0,e);if(w.config.minDate&&i&&P(i,w.config.minDate,void 0!==e?e:!w.minDateHasTime)<0||w.config.maxDate&&i&&P(i,w.config.maxDate,void 0!==e?e:!w.maxDateHasTime)>0)return!1;if(!w.config.enable&&0===w.config.disable.length)return!0;if(void 0===i)return!1;for(var r=!!w.config.enable,o=null!==(n=w.config.enable)&&void 0!==n?n:w.config.disable,s=0,a=void 0;s<o.length;s++){if("function"==typeof(a=o[s])&&a(i))return r;if(a instanceof Date&&void 0!==i&&a.getTime()===i.getTime())return r;if("string"==typeof a){var c=w.parseDate(a,void 0,!0);return c&&c.getTime()===i.getTime()?r:!r}if("object"==typeof a&&void 0!==i&&a.from&&a.to&&i.getTime()>=a.from.getTime()&&i.getTime()<=a.to.getTime())return r}return!r}function gt(t){return void 0!==w.daysContainer&&-1===t.className.indexOf("hidden")&&-1===t.className.indexOf("flatpickr-disabled")&&w.daysContainer.contains(t)}function mt(t){t.target!==w._input||!(w.selectedDates.length>0||w._input.value.length>0)||t.relatedTarget&&ut(t.relatedTarget)||w.setDate(w._input.value,!0,t.target===w.altInput?w.config.altFormat:w.config.dateFormat)}function vt(t){var e=p(t),n=w.config.wrap?g.contains(e):e===w._input,i=w.config.allowInput,r=w.isOpen&&(!i||!n),o=w.config.inline&&n&&!i;if(13===t.keyCode&&n){if(i)return w.setDate(w._input.value,!0,e===w.altInput?w.config.altFormat:w.config.dateFormat),e.blur();w.open()}else if(ut(e)||r||o){var s=!!w.timeContainer&&w.timeContainer.contains(e);switch(t.keyCode){case 13:s?(t.preventDefault(),_(),Rt()):Tt(t);break;case 27:t.preventDefault(),Rt();break;case 8:case 46:n&&!w.config.allowInput&&(t.preventDefault(),w.clear());break;case 37:case 39:if(s||n)w.hourElement&&w.hourElement.focus();else if(t.preventDefault(),void 0!==w.daysContainer&&(!1===i||document.activeElement&&gt(document.activeElement))){var a=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),at(a),J(q(1),0)):J(void 0,a)}break;case 38:case 40:t.preventDefault();var c=40===t.keyCode?1:-1;w.daysContainer&&void 0!==e.$i||e===w.input||e===w.altInput?t.ctrlKey?(t.stopPropagation(),ft(w.currentYear-c),J(q(1),0)):s||J(void 0,7*c):e===w.currentYearElement?ft(w.currentYear-c):w.config.enableTime&&(!s&&w.hourElement&&w.hourElement.focus(),_(t),w._debouncedChange());break;case 9:if(s){var l=[w.hourElement,w.minuteElement,w.secondElement,w.amPM].concat(w.pluginElements).filter((function(t){return t})),h=l.indexOf(e);if(-1!==h){var u=l[h+(t.shiftKey?-1:1)];t.preventDefault(),(u||w._input).focus()}}else!w.config.noCalendar&&w.daysContainer&&w.daysContainer.contains(e)&&t.shiftKey&&(t.preventDefault(),w._input.focus())}}if(void 0!==w.amPM&&e===w.amPM)switch(t.key){case w.l10n.amPM[0].charAt(0):case w.l10n.amPM[0].charAt(0).toLowerCase():w.amPM.textContent=w.l10n.amPM[0],O(),Gt();break;case w.l10n.amPM[1].charAt(0):case w.l10n.amPM[1].charAt(0).toLowerCase():w.amPM.textContent=w.l10n.amPM[1],O(),Gt()}(n||ut(e))&&Ut("onKeyDown",t)}function yt(t){if(1===w.selectedDates.length&&(!t||t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled"))){for(var e=t?t.dateObj.getTime():w.days.firstElementChild.dateObj.getTime(),n=w.parseDate(w.selectedDates[0],void 0,!0).getTime(),i=Math.min(e,w.selectedDates[0].getTime()),r=Math.max(e,w.selectedDates[0].getTime()),o=!1,s=0,a=0,c=i;c<r;c+=C.DAY)pt(new Date(c),!0)||(o=o||c>i&&c<r,c<n&&(!s||c>s)?s=c:c>n&&(!a||c<a)&&(a=c));for(var l=0;l<w.config.showMonths;l++)for(var h=w.daysContainer.children[l],u=function(i,r){var c=h.children[i],l=c.dateObj.getTime(),u=s>0&&l<s||a>0&&l>a;return u?(c.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach((function(t){c.classList.remove(t)})),"continue"):o&&!u?"continue":(["startRange","inRange","endRange","notAllowed"].forEach((function(t){c.classList.remove(t)})),void(void 0!==t&&(t.classList.add(e<=w.selectedDates[0].getTime()?"startRange":"endRange"),n<e&&l===n?c.classList.add("startRange"):n>e&&l===n&&c.classList.add("endRange"),l>=s&&(0===a||l<=a)&&S(l,n,e)&&c.classList.add("inRange"))))},d=0,f=h.children.length;d<f;d++)u(d,f)}}function wt(){!w.isOpen||w.config.static||w.config.inline||Et()}function bt(t,e){if(void 0===e&&(e=w._positionElement),!0===w.isMobile){if(t){t.preventDefault();var n=p(t);n&&n.blur()}return void 0!==w.mobileInput&&(w.mobileInput.focus(),w.mobileInput.click()),void Ut("onOpen")}if(!w._input.disabled&&!w.config.inline){var i=w.isOpen;w.isOpen=!0,i||(w.calendarContainer.classList.add("open"),w._input.classList.add("active"),Ut("onOpen"),Et(e)),!0===w.config.enableTime&&!0===w.config.noCalendar&&(!1!==w.config.allowInput||void 0!==t&&w.timeContainer.contains(t.relatedTarget)||setTimeout((function(){return w.hourElement.select()}),50))}}function At(t){return function(e){var n=w.config["_"+t+"Date"]=w.parseDate(e,w.config.dateFormat),i=w.config["_"+("min"===t?"max":"min")+"Date"];void 0!==n&&(w["min"===t?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),w.selectedDates&&(w.selectedDates=w.selectedDates.filter((function(t){return pt(t)})),w.selectedDates.length||"min"!==t||L(n),Gt()),w.daysContainer&&(It(),void 0!==n?w.currentYearElement[t]=n.getFullYear().toString():w.currentYearElement.removeAttribute(t),w.currentYearElement.disabled=!!i&&void 0!==n&&i.getFullYear()===n.getFullYear())}}function Pt(){var e=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],r=t(t({},JSON.parse(JSON.stringify(g.dataset||{}))),v),o={};w.config.parseDate=r.parseDate,w.config.formatDate=r.formatDate,Object.defineProperty(w.config,"enable",{get:function(){return w.config._enable},set:function(t){w.config._enable=Ot(t)}}),Object.defineProperty(w.config,"disable",{get:function(){return w.config._disable},set:function(t){w.config._disable=Ot(t)}});var s="time"===r.mode;if(!r.dateFormat&&(r.enableTime||s)){var a=R.defaultConfig.dateFormat||i.dateFormat;o.dateFormat=r.noCalendar||s?"H:i"+(r.enableSeconds?":S":""):a+" H:i"+(r.enableSeconds?":S":"")}if(r.altInput&&(r.enableTime||s)&&!r.altFormat){var l=R.defaultConfig.altFormat||i.altFormat;o.altFormat=r.noCalendar||s?"h:i"+(r.enableSeconds?":S K":" K"):l+" h:i"+(r.enableSeconds?":S":"")+" K"}Object.defineProperty(w.config,"minDate",{get:function(){return w.config._minDate},set:At("min")}),Object.defineProperty(w.config,"maxDate",{get:function(){return w.config._maxDate},set:At("max")});var h=function(t){return function(e){w.config["min"===t?"_minTime":"_maxTime"]=w.parseDate(e,"H:i:S")}};Object.defineProperty(w.config,"minTime",{get:function(){return w.config._minTime},set:h("min")}),Object.defineProperty(w.config,"maxTime",{get:function(){return w.config._maxTime},set:h("max")}),"time"===r.mode&&(w.config.noCalendar=!0,w.config.enableTime=!0),Object.assign(w.config,o,r);for(var u=0;u<e.length;u++)w.config[e[u]]=!0===w.config[e[u]]||"true"===w.config[e[u]];for(n.filter((function(t){return void 0!==w.config[t]})).forEach((function(t){w.config[t]=c(w.config[t]||[]).map(T)})),w.isMobile=!w.config.disableMobile&&!w.config.inline&&"single"===w.config.mode&&!w.config.disable.length&&!w.config.enable&&!w.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),u=0;u<w.config.plugins.length;u++){var d=w.config.plugins[u](w)||{};for(var f in d)n.indexOf(f)>-1?w.config[f]=c(d[f]).map(T).concat(w.config[f]):void 0===r[f]&&(w.config[f]=d[f])}r.altInputClass||(w.config.altInputClass=St().className+" "+w.config.altInputClass),Ut("onParseConfig")}function St(){return w.config.wrap?g.querySelector("[data-input]"):g}function Ct(){"object"!=typeof w.config.locale&&void 0===R.l10ns[w.config.locale]&&w.config.errorHandler(new Error("flatpickr: invalid locale "+w.config.locale)),w.l10n=t(t({},R.l10ns.default),"object"==typeof w.config.locale?w.config.locale:"default"!==w.config.locale?R.l10ns[w.config.locale]:void 0),y.K="("+w.l10n.amPM[0]+"|"+w.l10n.amPM[1]+"|"+w.l10n.amPM[0].toLowerCase()+"|"+w.l10n.amPM[1].toLowerCase()+")",void 0===t(t({},v),JSON.parse(JSON.stringify(g.dataset||{}))).time_24hr&&void 0===R.defaultConfig.time_24hr&&(w.config.time_24hr=w.l10n.time_24hr),w.formatDate=b(w),w.parseDate=A({config:w.config,l10n:w.l10n})}function Et(t){if("function"!=typeof w.config.position){if(void 0!==w.calendarContainer){Ut("onPreCalendarPosition");var e=t||w._positionElement,n=Array.prototype.reduce.call(w.calendarContainer.children,(function(t,e){return t+e.offsetHeight}),0),i=w.calendarContainer.offsetWidth,r=w.config.position.split(" "),o=r[0],s=r.length>1?r[1]:null,a=e.getBoundingClientRect(),c=window.innerHeight-a.bottom,h="above"===o||"below"!==o&&c<n&&a.top>n,u=window.pageYOffset+a.top+(h?-n-2:e.offsetHeight+2);if(l(w.calendarContainer,"arrowTop",!h),l(w.calendarContainer,"arrowBottom",h),!w.config.inline){var d=window.pageXOffset+a.left,f=!1,p=!1;"center"===s?(d-=(i-a.width)/2,f=!0):"right"===s&&(d-=i-a.width,p=!0),l(w.calendarContainer,"arrowLeft",!f&&!p),l(w.calendarContainer,"arrowCenter",f),l(w.calendarContainer,"arrowRight",p);var g=window.document.body.offsetWidth-(window.pageXOffset+a.right),m=d+i>window.document.body.offsetWidth,v=g+i>window.document.body.offsetWidth;if(l(w.calendarContainer,"rightMost",m),!w.config.static)if(w.calendarContainer.style.top=u+"px",m)if(v){var y=xt();if(void 0===y)return;var b=window.document.body.offsetWidth,A=Math.max(0,b/2-i/2),P=".flatpickr-calendar.centerMost:before",S=".flatpickr-calendar.centerMost:after",C=y.cssRules.length,E="{left:"+a.left+"px;right:auto;}";l(w.calendarContainer,"rightMost",!1),l(w.calendarContainer,"centerMost",!0),y.insertRule(P+","+S+E,C),w.calendarContainer.style.left=A+"px",w.calendarContainer.style.right="auto"}else w.calendarContainer.style.left="auto",w.calendarContainer.style.right=g+"px";else w.calendarContainer.style.left=d+"px",w.calendarContainer.style.right="auto"}}}else w.config.position(w,t)}function xt(){for(var t=null,e=0;e<document.styleSheets.length;e++){var n=document.styleSheets[e];try{n.cssRules}catch(t){continue}t=n;break}return null!=t?t:Dt()}function Dt(){var t=document.createElement("style");return document.head.appendChild(t),t.sheet}function It(){w.config.noCalendar||w.isMobile||(Q(),Wt(),X())}function Rt(){w._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(w.close,0):w.close()}function Tt(t){t.preventDefault(),t.stopPropagation();var e=function(t){return t.classList&&t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled")&&!t.classList.contains("notAllowed")},n=d(p(t),e);if(void 0!==n){var i=n,r=w.latestSelectedDateObj=new Date(i.dateObj.getTime()),o=(r.getMonth()<w.currentMonth||r.getMonth()>w.currentMonth+w.config.showMonths-1)&&"range"!==w.config.mode;if(w.selectedDateElem=i,"single"===w.config.mode)w.selectedDates=[r];else if("multiple"===w.config.mode){var s=jt(r);s?w.selectedDates.splice(parseInt(s),1):w.selectedDates.push(r)}else"range"===w.config.mode&&(2===w.selectedDates.length&&w.clear(!1,!1),w.latestSelectedDateObj=r,w.selectedDates.push(r),0!==P(r,w.selectedDates[0],!0)&&w.selectedDates.sort((function(t,e){return t.getTime()-e.getTime()})));if(O(),o){var a=w.currentYear!==r.getFullYear();w.currentYear=r.getFullYear(),w.currentMonth=r.getMonth(),a&&(Ut("onYearChange"),Q()),Ut("onMonthChange")}if(Wt(),X(),Gt(),o||"range"===w.config.mode||1!==w.config.showMonths?void 0!==w.selectedDateElem&&void 0===w.hourElement&&w.selectedDateElem&&w.selectedDateElem.focus():K(i),void 0!==w.hourElement&&void 0!==w.hourElement&&w.hourElement.focus(),w.config.closeOnSelect){var c="single"===w.config.mode&&!w.config.enableTime,l="range"===w.config.mode&&2===w.selectedDates.length&&!w.config.enableTime;(c||l)&&Rt()}U()}}w.parseDate=A({config:w.config,l10n:w.l10n}),w._handlers=[],w.pluginElements=[],w.loadedPlugins=[],w._bind=V,w._setHoursFromDate=L,w._positionCalendar=Et,w.changeMonth=at,w.changeYear=ft,w.clear=ct,w.close=lt,w._createElement=h,w.destroy=ht,w.isEnabled=pt,w.jumpToDate=j,w.open=bt,w.redraw=It,w.set=_t,w.setDate=Mt,w.toggle=Vt;var Ft={locale:[Ct,ot],showMonths:[et,F,rt],minDate:[j],maxDate:[j],clickOpens:[function(){!0===w.config.clickOpens?(V(w._input,"focus",w.open),V(w._input,"click",w.open)):(w._input.removeEventListener("focus",w.open),w._input.removeEventListener("click",w.open))}]};function _t(t,e){if(null!==t&&"object"==typeof t)for(var i in Object.assign(w.config,t),t)void 0!==Ft[i]&&Ft[i].forEach((function(t){return t()}));else w.config[t]=e,void 0!==Ft[t]?Ft[t].forEach((function(t){return t()})):n.indexOf(t)>-1&&(w.config[t]=c(e));w.redraw(),Gt(!0)}function kt(t,e){var n=[];if(t instanceof Array)n=t.map((function(t){return w.parseDate(t,e)}));else if(t instanceof Date||"number"==typeof t)n=[w.parseDate(t,e)];else if("string"==typeof t)switch(w.config.mode){case"single":case"time":n=[w.parseDate(t,e)];break;case"multiple":n=t.split(w.config.conjunction).map((function(t){return w.parseDate(t,e)}));break;case"range":n=t.split(w.l10n.rangeSeparator).map((function(t){return w.parseDate(t,e)}))}else w.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(t)));w.selectedDates=w.config.allowInvalidPreload?n:n.filter((function(t){return t instanceof Date&&pt(t,!1)})),"range"===w.config.mode&&w.selectedDates.sort((function(t,e){return t.getTime()-e.getTime()}))}function Mt(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=w.config.dateFormat),0!==t&&!t||t instanceof Array&&0===t.length)return w.clear(e);kt(t,n),w.latestSelectedDateObj=w.selectedDates[w.selectedDates.length-1],w.redraw(),j(void 0,e),L(),0===w.selectedDates.length&&w.clear(!1),Gt(e),e&&Ut("onChange")}function Ot(t){return t.slice().map((function(t){return"string"==typeof t||"number"==typeof t||t instanceof Date?w.parseDate(t,void 0,!0):t&&"object"==typeof t&&t.from&&t.to?{from:w.parseDate(t.from,void 0),to:w.parseDate(t.to,void 0)}:t})).filter((function(t){return t}))}function Lt(){w.selectedDates=[],w.now=w.parseDate(w.config.now)||new Date;var t=w.config.defaultDate||("INPUT"!==w.input.nodeName&&"TEXTAREA"!==w.input.nodeName||!w.input.placeholder||w.input.value!==w.input.placeholder?w.input.value:null);t&&kt(t,w.config.dateFormat),w._initialDate=w.selectedDates.length>0?w.selectedDates[0]:w.config.minDate&&w.config.minDate.getTime()>w.now.getTime()?w.config.minDate:w.config.maxDate&&w.config.maxDate.getTime()<w.now.getTime()?w.config.maxDate:w.now,w.currentYear=w._initialDate.getFullYear(),w.currentMonth=w._initialDate.getMonth(),w.selectedDates.length>0&&(w.latestSelectedDateObj=w.selectedDates[0]),void 0!==w.config.minTime&&(w.config.minTime=w.parseDate(w.config.minTime,"H:i")),void 0!==w.config.maxTime&&(w.config.maxTime=w.parseDate(w.config.maxTime,"H:i")),w.minDateHasTime=!!w.config.minDate&&(w.config.minDate.getHours()>0||w.config.minDate.getMinutes()>0||w.config.minDate.getSeconds()>0),w.maxDateHasTime=!!w.config.maxDate&&(w.config.maxDate.getHours()>0||w.config.maxDate.getMinutes()>0||w.config.maxDate.getSeconds()>0)}function Nt(){w.input=St(),w.input?(w.input._type=w.input.type,w.input.type="text",w.input.classList.add("flatpickr-input"),w._input=w.input,w.config.altInput&&(w.altInput=h(w.input.nodeName,w.config.altInputClass),w._input=w.altInput,w.altInput.placeholder=w.input.placeholder,w.altInput.disabled=w.input.disabled,w.altInput.required=w.input.required,w.altInput.tabIndex=w.input.tabIndex,w.altInput.type="text",w.input.setAttribute("type","hidden"),!w.config.static&&w.input.parentNode&&w.input.parentNode.insertBefore(w.altInput,w.input.nextSibling)),w.config.allowInput||w._input.setAttribute("readonly","readonly"),w._positionElement=w.config.positionElement||w._input):w.config.errorHandler(new Error("Invalid input element specified"))}function Bt(){var t=w.config.enableTime?w.config.noCalendar?"time":"datetime-local":"date";w.mobileInput=h("input",w.input.className+" flatpickr-mobile"),w.mobileInput.tabIndex=1,w.mobileInput.type=t,w.mobileInput.disabled=w.input.disabled,w.mobileInput.required=w.input.required,w.mobileInput.placeholder=w.input.placeholder,w.mobileFormatStr="datetime-local"===t?"Y-m-d\\TH:i:S":"date"===t?"Y-m-d":"H:i:S",w.selectedDates.length>0&&(w.mobileInput.defaultValue=w.mobileInput.value=w.formatDate(w.selectedDates[0],w.mobileFormatStr)),w.config.minDate&&(w.mobileInput.min=w.formatDate(w.config.minDate,"Y-m-d")),w.config.maxDate&&(w.mobileInput.max=w.formatDate(w.config.maxDate,"Y-m-d")),w.input.getAttribute("step")&&(w.mobileInput.step=String(w.input.getAttribute("step"))),w.input.type="hidden",void 0!==w.altInput&&(w.altInput.type="hidden");try{w.input.parentNode&&w.input.parentNode.insertBefore(w.mobileInput,w.input.nextSibling)}catch(t){}V(w.mobileInput,"change",(function(t){w.setDate(p(t).value,!1,w.mobileFormatStr),Ut("onChange"),Ut("onClose")}))}function Vt(t){if(!0===w.isOpen)return w.close();w.open(t)}function Ut(t,e){if(void 0!==w.config){var n=w.config[t];if(void 0!==n&&n.length>0)for(var i=0;n[i]&&i<n.length;i++)n[i](w.selectedDates,w.input.value,w,e);"onChange"===t&&(w.input.dispatchEvent(Ht("change")),w.input.dispatchEvent(Ht("input")))}}function Ht(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}function jt(t){for(var e=0;e<w.selectedDates.length;e++)if(0===P(w.selectedDates[e],t))return""+e;return!1}function $t(t){return!("range"!==w.config.mode||w.selectedDates.length<2)&&P(t,w.selectedDates[0])>=0&&P(t,w.selectedDates[1])<=0}function Wt(){w.config.noCalendar||w.isMobile||!w.monthNav||(w.yearElements.forEach((function(t,e){var n=new Date(w.currentYear,w.currentMonth,1);n.setMonth(w.currentMonth+e),w.config.showMonths>1||"static"===w.config.monthSelectorType?w.monthElements[e].textContent=m(n.getMonth(),w.config.shorthandCurrentMonth,w.l10n)+" ":w.monthsDropdownContainer.value=n.getMonth().toString(),t.value=n.getFullYear().toString()})),w._hidePrevMonthArrow=void 0!==w.config.minDate&&(w.currentYear===w.config.minDate.getFullYear()?w.currentMonth<=w.config.minDate.getMonth():w.currentYear<w.config.minDate.getFullYear()),w._hideNextMonthArrow=void 0!==w.config.maxDate&&(w.currentYear===w.config.maxDate.getFullYear()?w.currentMonth+1>w.config.maxDate.getMonth():w.currentYear>w.config.maxDate.getFullYear()))}function Yt(t){return w.selectedDates.map((function(e){return w.formatDate(e,t)})).filter((function(t,e,n){return"range"!==w.config.mode||w.config.enableTime||n.indexOf(t)===e})).join("range"!==w.config.mode?w.config.conjunction:w.l10n.rangeSeparator)}function Gt(t){void 0===t&&(t=!0),void 0!==w.mobileInput&&w.mobileFormatStr&&(w.mobileInput.value=void 0!==w.latestSelectedDateObj?w.formatDate(w.latestSelectedDateObj,w.mobileFormatStr):""),w.input.value=Yt(w.config.dateFormat),void 0!==w.altInput&&(w.altInput.value=Yt(w.config.altFormat)),!1!==t&&Ut("onValueUpdate")}function Kt(t){var e=p(t),n=w.prevMonthNav.contains(e),i=w.nextMonthNav.contains(e);n||i?at(n?-1:1):w.yearElements.indexOf(e)>=0?e.select():e.classList.contains("arrowUp")?w.changeYear(w.currentYear+1):e.classList.contains("arrowDown")&&w.changeYear(w.currentYear-1)}function qt(t){t.preventDefault();var e="keydown"===t.type,n=p(t),i=n;void 0!==w.amPM&&n===w.amPM&&(w.amPM.textContent=w.l10n.amPM[s(w.amPM.textContent===w.l10n.amPM[0])]);var r=parseFloat(i.getAttribute("min")),a=parseFloat(i.getAttribute("max")),c=parseFloat(i.getAttribute("step")),l=parseInt(i.value,10),h=l+c*(t.delta||(e?38===t.which?1:-1:0));if(void 0!==i.value&&2===i.value.length){var u=i===w.hourElement,d=i===w.minuteElement;h<r?(h=a+h+s(!u)+(s(u)&&s(!w.amPM)),d&&W(void 0,-1,w.hourElement)):h>a&&(h=i===w.hourElement?h-a-s(!w.amPM):r,d&&W(void 0,1,w.hourElement)),w.amPM&&u&&(1===c?h+l===23:Math.abs(h-l)>c)&&(w.amPM.textContent=w.l10n.amPM[s(w.amPM.textContent===w.l10n.amPM[0])]),i.value=o(h)}}return I(),w}function I(t,e){for(var n=Array.prototype.slice.call(t).filter((function(t){return t instanceof HTMLElement})),i=[],r=0;r<n.length;r++){var o=n[r];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=D(o,e||{}),i.push(o._flatpickr)}catch(t){console.error(t)}}return 1===i.length?i[0]:i}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return I(this,t)},HTMLElement.prototype.flatpickr=function(t){return I([this],t)});var R=function(t,e){return"string"==typeof t?I(window.document.querySelectorAll(t),e):t instanceof Node?I([t],e):I(t,e)};return R.defaultConfig={},R.l10ns={en:t({},r),default:t({},r)},R.localize=function(e){R.l10ns.default=t(t({},R.l10ns.default),e)},R.setDefaults=function(e){R.defaultConfig=t(t({},R.defaultConfig),e)},R.parseDate=A({}),R.formatDate=b({}),R.compareDates=P,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(t){return I(this,t)}),Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof t?parseInt(t,10):t))},"undefined"!=typeof window&&(window.flatpickr=R),R}()},2805:function(t,e){!function(t){"use strict";var e="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},n={weekdays:{shorthand:["So","Mo","Di","Mi","Do","Fr","Sa"],longhand:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},months:{shorthand:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],longhand:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},firstDayOfWeek:1,weekAbbreviation:"KW",rangeSeparator:" bis ",scrollTitle:"Zum Ändern scrollen",toggleTitle:"Zum Umschalten klicken",time_24hr:!0};e.l10ns.de=n;var i=e.l10ns;t.German=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},969:function(t,e){!function(t){"use strict";var e="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},n={weekdays:{shorthand:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],longhand:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"]},months:{shorthand:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],longhand:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]},ordinal:function(){return"º"},firstDayOfWeek:1,rangeSeparator:" a ",time_24hr:!0};e.l10ns.es=n;var i=e.l10ns;t.Spanish=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},401:function(t,e){!function(t){"use strict";var e="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},n={firstDayOfWeek:1,weekdays:{shorthand:["dim","lun","mar","mer","jeu","ven","sam"],longhand:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},months:{shorthand:["janv","févr","mars","avr","mai","juin","juil","août","sept","oct","nov","déc"],longhand:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},ordinal:function(t){return t>1?"":"er"},rangeSeparator:" au ",weekAbbreviation:"Sem",scrollTitle:"Défiler pour augmenter la valeur",toggleTitle:"Cliquer pour basculer",time_24hr:!0};e.l10ns.fr=n;var i=e.l10ns;t.French=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},9088:function(t,e){!function(t){"use strict";var e="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},n={weekdays:{shorthand:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],longhand:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"]},months:{shorthand:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],longhand:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"]},firstDayOfWeek:1,ordinal:function(){return"°"},rangeSeparator:" al ",weekAbbreviation:"Se",scrollTitle:"Scrolla per aumentare",toggleTitle:"Clicca per cambiare",time_24hr:!0};e.l10ns.it=n;var i=e.l10ns;t.Italian=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},6741:function(t,e){!function(t){"use strict";var e="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},n={weekdays:{shorthand:["日","月","火","水","木","金","土"],longhand:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},months:{shorthand:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],longhand:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},time_24hr:!0,rangeSeparator:" から ",monthAriaLabel:"月",amPM:["午前","午後"],yearAriaLabel:"年",hourAriaLabel:"時間",minuteAriaLabel:"分"};e.l10ns.ja=n;var i=e.l10ns;t.Japanese=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},1844:function(t,e){!function(t){"use strict";var e="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},n={weekdays:{shorthand:["일","월","화","수","목","금","토"],longhand:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},months:{shorthand:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],longhand:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},ordinal:function(){return"일"},rangeSeparator:" ~ "};e.l10ns.ko=n;var i=e.l10ns;t.Korean=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},6679:function(t,e){!function(t){"use strict";var e="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},n={weekdays:{shorthand:["zo","ma","di","wo","do","vr","za"],longhand:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"]},months:{shorthand:["jan","feb","mrt","apr","mei","jun","jul","aug","sept","okt","nov","dec"],longhand:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"]},firstDayOfWeek:1,weekAbbreviation:"wk",rangeSeparator:" t/m ",scrollTitle:"Scroll voor volgende / vorige",toggleTitle:"Klik om te wisselen",time_24hr:!0,ordinal:function(t){return 1===t||8===t||t>=20?"ste":"de"}};e.l10ns.nl=n;var i=e.l10ns;t.Dutch=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},7821:function(t,e){!function(t){"use strict";var e="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},n={weekdays:{shorthand:["週日","週一","週二","週三","週四","週五","週六"],longhand:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},months:{shorthand:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],longhand:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},rangeSeparator:" 至 ",weekAbbreviation:"週",scrollTitle:"滾動切換",toggleTitle:"點擊切換 12/24 小時時制"};e.l10ns.zh_tw=n;var i=e.l10ns;t.MandarinTraditional=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},799:function(t,e){!function(t){"use strict";var e="undefined"!=typeof window&&void 0!==window.flatpickr?window.flatpickr:{l10ns:{}},n={weekdays:{shorthand:["周日","周一","周二","周三","周四","周五","周六"],longhand:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},months:{shorthand:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],longhand:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},rangeSeparator:" 至 ",weekAbbreviation:"周",scrollTitle:"滚动切换",toggleTitle:"点击切换 12/24 小时时制"};e.l10ns.zh=n;var i=e.l10ns;t.Mandarin=n,t.default=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},2705:function(t,e,n){var i=n(5639).Symbol;t.exports=i},4239:function(t,e,n){var i=n(2705),r=n(9607),o=n(2333),s=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?r(t):o(t)}},7561:function(t,e,n){var i=n(7990),r=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(r,""):t}},1957:function(t,e,n){var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=i},9607:function(t,e,n){var i=n(2705),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=i?i.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(t){}var r=s.call(t);return i&&(e?t[a]=n:delete t[a]),r}},2333:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},5639:function(t,e,n){var i=n(1957),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},7990:function(t){var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},3279:function(t,e,n){var i=n(3218),r=n(7771),o=n(4841),s=Math.max,a=Math.min;t.exports=function(t,e,n){var c,l,h,u,d,f,p=0,g=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=c,i=l;return c=l=void 0,p=e,u=t.apply(i,n)}function w(t){var n=t-f;return void 0===f||n>=e||n<0||m&&t-p>=h}function b(){var t=r();if(w(t))return A(t);d=setTimeout(b,function(t){var n=e-(t-f);return m?a(n,h-(t-p)):n}(t))}function A(t){return d=void 0,v&&c?y(t):(c=l=void 0,u)}function P(){var t=r(),n=w(t);if(c=arguments,l=this,f=t,n){if(void 0===d)return function(t){return p=t,d=setTimeout(b,e),g?y(t):u}(f);if(m)return clearTimeout(d),d=setTimeout(b,e),y(f)}return void 0===d&&(d=setTimeout(b,e)),u}return e=o(e)||0,i(n)&&(g=!!n.leading,h=(m="maxWait"in n)?s(o(n.maxWait)||0,e):h,v="trailing"in n?!!n.trailing:v),P.cancel=function(){void 0!==d&&clearTimeout(d),p=0,c=f=l=d=void 0},P.flush=function(){return void 0===d?u:A(r())},P}},3218:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},3448:function(t,e,n){var i=n(4239),r=n(7005);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},7771:function(t,e,n){var i=n(5639);t.exports=function(){return i.Date.now()}},4841:function(t,e,n){var i=n(7561),r=n(3218),o=n(3448),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var n=a.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):s.test(t)?NaN:+t}},1551:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}var i=function(){function e(n,i){t(this,e),this.counter=0,this.modes={iframe:"iframe",popup:"popup"},this.standards={strict:"strict",loose:"loose",html5:"html5"};var r={mode:this.modes.iframe,standard:this.standards.html5,popHt:500,popWd:400,popX:200,popY:200,popTitle:"",popClose:!0,extraCss:"",extraHead:"",retainAttr:["id","class","style"]};this.settings=Object.assign({},r,i),this.idPrefix="printArea_",this.ele=1===n.nodeType?n:document.querySelector(n)}return n(e,[{key:"print",value:function(){var t=this;this.counter++;for(var e=document.querySelectorAll("[id^="+this.idPrefix+"]");e.length;)e[0].parentNode.removeChild(e[0]),e=document.querySelectorAll("[id^="+this.idPrefix+"]");this.settings.id=this.idPrefix+this.counter;var n=this.getPrintWindow();this.write(n.doc,this.ele),setTimeout((function(){t.windowPrint(n)}),1e3)}},{key:"windowPrint",value:function(t){var e=t.win;e.focus(),e.print(),this.settings.mode===this.modes.popup&&this.settings.popClose&&setTimeout((function(){e.close()}),1e3)}},{key:"write",value:function(t,e){t.open(),t.write(this.docType()+"<html>"+this.getHead()+this.getBody(e)+"</html>"),t.close()}},{key:"docType",value:function(){return this.settings.mode===this.modes.iframe?"":this.settings.standard===this.standards.html5?"<!DOCTYPE html>":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01'+(this.settings.standard===this.standards.loose?" Transitional":"")+'//EN" "http://www.w3.org/TR/html4/'+(this.settings.standard===this.standards.loose?"loose":"strict")+'.dtd">'}},{key:"getHead",value:function(){var t="";this.settings.extraHead&&this.settings.extraHead.replace(/([^,]+)/g,(function(e){t+=e}));var e=document.querySelectorAll("link");return e=Array.from(e).filter((function(t){var e=t.getAttribute("rel");return e&&"stylesheet"===e.toLowerCase()})).filter((function(t){var e=t.getAttribute("media");return!e||"print"===e.toLowerCase()||"all"===e.toLowerCase()})).map((function(t){var e=t.getAttribute("href");return'<link type="text/css" rel="stylesheet" href="'.concat(e,'" >')})),this.settings.extraCss&&this.settings.extraCss.replace(/([^,\s]+)/g,(function(e){t+='<link type="text/css" rel="stylesheet" href="'+e+'">'})),"<head><title>"+this.settings.popTitle+"</title>"+t+e.join()+"</head>"}},{key:"getBody",value:function(t){var e="",n=this.settings.retainAttr,i=this.getFormData(t),r="";return n.forEach((function(t){var e=i.getAttribute(t);e&&(r+=(r.length>0?" ":"")+t+"='"+e+"'")})),"<body>"+(e+="<div "+r+">"+i.innerHTML+"</div>")+"</body>"}},{key:"getFormData",value:function(t){var e=t.cloneNode(!0),n=e.querySelectorAll("input,select,textarea");return Array.from(t.querySelectorAll("input,select,textarea")).forEach((function(t,e){var i=t.getAttribute("type");if(!i){var r=t.nodeName;i="SELECT"===r?"select":"TEXTAREA"===r?"textarea":""}var o=n[e];if("radio"===i||"checkbox"===i)o.removeAttribute("checked"),t.checked&&o.setAttribute("checked",!0);else if("text"===i||""===i)o.setAttribute("value",t.textContent);else if("select"===i){var s=t.querySelectorAll("option"),a=o.querySelectorAll("option");Array.from(s).forEach((function(t,e){a[e].removeAttribute("selected"),t.selected&&a[e].setAttribute("selected",!0)}))}else"textarea"===i&&(o.textContent=t.value)})),e}},{key:"getPrintWindow",value:function(){switch(this.settings.mode){case this.modes.iframe:var t=this.Iframe();return{win:t.contentWindow||t,doc:t.doc};case this.modes.popup:var e=this.Popup();return{win:e,doc:e.doc}}}},{key:"Iframe",value:function(){var t,e=this.settings.id,n="border:0;position:absolute;width:0px;height:0px;right:0px;top:0px;";try{t=document.createElement("iframe"),document.body.appendChild(t),t.setAttribute("style",n),t.setAttribute("id",e),t.setAttribute("src","#"+(new Date).getTime()),t.doc=null,t.doc=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:t.document}catch(t){throw t+". iframes may not be supported in this browser."}if(null==t.doc)throw"Cannot find document.";return t}},{key:"Popup",value:function(){var t="location=yes,statusbar=no,directories=no,menubar=no,titlebar=no,toolbar=no,dependent=no";t+=",width="+this.settings.popWd+",height="+this.settings.popHt,t+=",resizable=yes,screenX="+this.settings.popX+",screenY="+this.settings.popY+",personalbar=no,scrollbars=yes";var e=window.open("","_blank",t);return e.doc=e.document,e}}]),e}();return window.PrintArea=i,i}()},8990:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={s:"ein paar Sekunden",m:["eine Minute","einer Minute"],mm:"%d Minuten",h:["eine Stunde","einer Stunde"],hh:"%d Stunden",d:["ein Tag","einem Tag"],dd:["%d Tage","%d Tagen"],M:["ein Monat","einem Monat"],MM:["%d Monate","%d Monaten"],y:["ein Jahr","einem Jahr"],yy:["%d Jahre","%d Jahren"]};function r(t,e,n){var r=i[n];return Array.isArray(r)&&(r=r[e?0:1]),r.replace("%d",t)}var o={name:"de",weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sept._Okt._Nov._Dez.".split("_"),ordinal:function(t){return t+"."},weekStart:1,yearStart:4,formats:{LTS:"HH:mm:ss",LT:"HH:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},relativeTime:{future:"in %s",past:"vor %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r}};return n.default.locale(o,null,!0),o}(n(6244))},4883:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(t){return t+"º"}};return n.default.locale(i,null,!0),i}(n(6244))},5522:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={name:"fr",weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(t){return t+(1===t?"er":"")}};return n.default.locale(i,null,!0),i}(n(6244))},890:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={name:"it",weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),weekStart:1,monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"tra %s",past:"%s fa",s:"qualche secondo",m:"un minuto",mm:"%d minuti",h:"un' ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:function(t){return t+"º"}};return n.default.locale(i,null,!0),i}(n(6244))},859:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={name:"ja",weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(t){return t+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiem:function(t){return t<12?"午前":"午後"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}};return n.default.locale(i,null,!0),i}(n(6244))},5576:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={name:"ko",weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),ordinal:function(t){return t+"일"},formats:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},meridiem:function(t){return t<12?"오전":"오후"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"}};return n.default.locale(i,null,!0),i}(n(6244))},3765:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={name:"nl",weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),ordinal:function(t){return"["+t+(1===t||8===t||t>=20?"ste":"de")+"]"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"een minuut",mm:"%d minuten",h:"een uur",hh:"%d uur",d:"een dag",dd:"%d dagen",M:"een maand",MM:"%d maanden",y:"een jaar",yy:"%d jaar"}};return n.default.locale(i,null,!0),i}(n(6244))},1128:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(t,e){return"W"===e?t+"周":t+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(t,e){var n=100*t+e;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(i,null,!0),i}(n(6244))},7074:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={name:"zh-hk",months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),ordinal:function(t,e){return"W"===e?t+"週":t+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d 分鐘",h:"一小時",hh:"%d 小時",d:"一天",dd:"%d 天",M:"一個月",MM:"%d 個月",y:"一年",yy:"%d 年"}};return n.default.locale(i,null,!0),i}(n(6244))},579:function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),i={name:"zh-tw",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(t,e){return"W"===e?t+"週":t+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"},meridiem:function(t,e){var n=100*t+e;return n<600?"凌晨":n<900?"早上":n<1100?"上午":n<1300?"中午":n<1800?"下午":"晚上"}};return n.default.locale(i,null,!0),i}(n(6244))},1434:function(t){t.exports=function(){"use strict";return function(t,e){var n=e.prototype,i=n.format;n.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return i.bind(this)(t);var r=this.$utils(),o=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return n.ordinal(e.$D);case"gggg":return e.weekYear();case"GGGG":return e.isoWeekYear();case"wo":return n.ordinal(e.week(),"W");case"w":case"ww":return r.s(e.week(),"w"===t?1:2,"0");case"W":case"WW":return r.s(e.isoWeek(),"W"===t?1:2,"0");case"k":case"kk":return r.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return t}}));return i.bind(this)(o)}}}()},8366:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(i,r,o){var s=r.prototype;o.utc=function(t){return new r({date:t,utc:!0,args:arguments})},s.utc=function(e){var n=o(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},s.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var a=s.parse;s.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),a.call(this,t)};var c=s.init;s.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else c.call(this)};var l=s.utcOffset;s.utcOffset=function(i,r){var o=this.$utils().u;if(o(i))return this.$u?0:o(this.$offset)?l.call(this):this.$offset;if("string"==typeof i&&(i=function(t){void 0===t&&(t="");var i=t.match(e);if(!i)return null;var r=(""+i[0]).match(n)||["-",0,0],o=r[0],s=60*+r[1]+ +r[2];return 0===s?0:"+"===o?s:-s}(i),null===i))return this;var s=Math.abs(i)<=16?60*i:i,a=this;if(r)return a.$offset=s,a.$u=0===i,a;if(0!==i){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(a=this.local().add(s+c,t)).$offset=s,a.$x.$localOffset=c}else a=this.utc();return a};var h=s.format;s.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,e)},s.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var u=s.toDate;s.toDate=function(t){return"s"===t&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var d=s.diff;s.diff=function(t,e,n){if(t&&this.$u===t.$u)return d.call(this,t,e,n);var i=this.local(),r=o(t).local();return d.call(i,r,e,n)}}}()},6244:function(e){"use strict";e.exports=t},449:function(t){"use strict";t.exports=e},8717:function(t){"use strict";t.exports=n},8189:function(t){"use strict";t.exports=i},1276:function(t){"use strict";t.exports=r},3214:function(t){"use strict";t.exports=o},1543:function(t){"use strict";t.exports=s},9903:function(t){"use strict";t.exports=a},1821:function(t){"use strict";t.exports=c},1416:function(t){"use strict";t.exports=l},2047:function(t){"use strict";t.exports=h},7686:function(t){"use strict";t.exports=u},509:function(t,e,n){"use strict";var i=n(9985),r=n(3691),o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not a function")}},2655:function(t,e,n){"use strict";var i=n(9429),r=n(3691),o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not a constructor")}},3550:function(t,e,n){"use strict";var i=n(9985),r=String,o=TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw new o("Can't set "+r(t)+" as a prototype")}},7370:function(t,e,n){"use strict";var i=n(4201),r=n(5391),o=n(2560).f,s=i("unscopables"),a=Array.prototype;void 0===a[s]&&o(a,s,{configurable:!0,value:r(null)}),t.exports=function(t){a[s][t]=!0}},1514:function(t,e,n){"use strict";var i=n(730).charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},767:function(t,e,n){"use strict";var i=n(3622),r=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw new r("Incorrect invocation")}},5027:function(t,e,n){"use strict";var i=n(8999),r=String,o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not an object")}},7075:function(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},4872:function(t,e,n){"use strict";var i,r,o,s=n(7075),a=n(7697),c=n(9037),l=n(9985),h=n(8999),u=n(6812),d=n(926),f=n(3691),p=n(5773),g=n(1880),m=n(2148),v=n(3622),y=n(1868),w=n(9385),b=n(4201),A=n(4630),P=n(618),S=P.enforce,C=P.get,E=c.Int8Array,x=E&&E.prototype,D=c.Uint8ClampedArray,I=D&&D.prototype,R=E&&y(E),T=x&&y(x),F=Object.prototype,_=c.TypeError,k=b("toStringTag"),M=A("TYPED_ARRAY_TAG"),O="TypedArrayConstructor",L=s&&!!w&&"Opera"!==d(c.opera),N=!1,B={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},V={BigInt64Array:8,BigUint64Array:8},U=function(t){var e=y(t);if(h(e)){var n=C(e);return n&&u(n,O)?n[O]:U(e)}},H=function(t){if(!h(t))return!1;var e=d(t);return u(B,e)||u(V,e)};for(i in B)(o=(r=c[i])&&r.prototype)?S(o)[O]=r:L=!1;for(i in V)(o=(r=c[i])&&r.prototype)&&(S(o)[O]=r);if((!L||!l(R)||R===Function.prototype)&&(R=function(){throw new _("Incorrect invocation")},L))for(i in B)c[i]&&w(c[i],R);if((!L||!T||T===F)&&(T=R.prototype,L))for(i in B)c[i]&&w(c[i].prototype,T);if(L&&y(I)!==T&&w(I,T),a&&!u(T,k))for(i in N=!0,m(T,k,{configurable:!0,get:function(){return h(this)?this[M]:void 0}}),B)c[i]&&p(c[i],M,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:N&&M,aTypedArray:function(t){if(H(t))return t;throw new _("Target is not a typed array")},aTypedArrayConstructor:function(t){if(l(t)&&(!w||v(R,t)))return t;throw new _(f(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n,i){if(a){if(n)for(var r in B){var o=c[r];if(o&&u(o.prototype,t))try{delete o.prototype[t]}catch(n){try{o.prototype[t]=e}catch(t){}}}T[t]&&!n||g(T,t,n?e:L&&x[t]||e,i)}},exportTypedArrayStaticMethod:function(t,e,n){var i,r;if(a){if(w){if(n)for(i in B)if((r=c[i])&&u(r,t))try{delete r[t]}catch(t){}if(R[t]&&!n)return;try{return g(R,t,n?e:L&&R[t]||e)}catch(t){}}for(i in B)!(r=c[i])||r[t]&&!n||g(r,t,e)}},getTypedArrayConstructor:U,isView:function(t){if(!h(t))return!1;var e=d(t);return"DataView"===e||u(B,e)||u(V,e)},isTypedArray:H,TypedArray:R,TypedArrayPrototype:T}},1055:function(t,e,n){"use strict";var i=n(4071),r=n(2615),o=n(690),s=n(1228),a=n(3292),c=n(9429),l=n(6310),h=n(6522),u=n(5185),d=n(1664),f=Array;t.exports=function(t){var e=o(t),n=c(this),p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g;m&&(g=i(g,p>2?arguments[2]:void 0));var v,y,w,b,A,P,S=d(e),C=0;if(!S||this===f&&a(S))for(v=l(e),y=n?new this(v):f(v);v>C;C++)P=m?g(e[C],C):e[C],h(y,C,P);else for(A=(b=u(e,S)).next,y=n?new this:[];!(w=r(A,b)).done;C++)P=m?s(b,g,[w.value,C],!0):w.value,h(y,C,P);return y.length=C,y}},4328:function(t,e,n){"use strict";var i=n(5290),r=n(7578),o=n(6310),s=function(t){return function(e,n,s){var a,c=i(e),l=o(c),h=r(s,l);if(t&&n!=n){for(;l>h;)if((a=c[h++])!=a)return!0}else for(;l>h;h++)if((t||h in c)&&c[h]===n)return t||h||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},6834:function(t,e,n){"use strict";var i=n(3689);t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){return 1},1)}))}},8820:function(t,e,n){"use strict";var i=n(509),r=n(690),o=n(4413),s=n(6310),a=TypeError,c=function(t){return function(e,n,c,l){i(n);var h=r(e),u=o(h),d=s(h),f=t?d-1:0,p=t?-1:1;if(c<2)for(;;){if(f in u){l=u[f],f+=p;break}if(f+=p,t?f<0:d<=f)throw new a("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=p)f in u&&(l=n(l,u[f],f,h));return l}};t.exports={left:c(!1),right:c(!0)}},9015:function(t,e,n){"use strict";var i=n(7578),r=n(6310),o=n(6522),s=Array,a=Math.max;t.exports=function(t,e,n){for(var c=r(t),l=i(e,c),h=i(void 0===n?c:n,c),u=s(a(h-l,0)),d=0;l<h;l++,d++)o(u,d,t[l]);return u.length=d,u}},6004:function(t,e,n){"use strict";var i=n(8844);t.exports=i([].slice)},382:function(t,e,n){"use strict";var i=n(9015),r=Math.floor,o=function(t,e){var n=t.length,c=r(n/2);return n<8?s(t,e):a(t,o(i(t,0,c),e),o(i(t,c),e),e)},s=function(t,e){for(var n,i,r=t.length,o=1;o<r;){for(i=o,n=t[o];i&&e(t[i-1],n)>0;)t[i]=t[--i];i!==o++&&(t[i]=n)}return t},a=function(t,e,n,i){for(var r=e.length,o=n.length,s=0,a=0;s<r||a<o;)t[s+a]=s<r&&a<o?i(e[s],n[a])<=0?e[s++]:n[a++]:s<r?e[s++]:n[a++];return t};t.exports=o},5271:function(t,e,n){"use strict";var i=n(2297),r=n(9429),o=n(8999),s=n(4201)("species"),a=Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,(r(e)&&(e===a||i(e.prototype))||o(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?a:e}},7120:function(t,e,n){"use strict";var i=n(5271);t.exports=function(t,e){return new(i(t))(0===e?0:e)}},1228:function(t,e,n){"use strict";var i=n(5027),r=n(2125);t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(e){r(t,"throw",e)}}},6431:function(t,e,n){"use strict";var i=n(4201)("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){try{if(!e&&!r)return!1}catch(t){return!1}var n=!1;try{var o={};o[i]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},6648:function(t,e,n){"use strict";var i=n(8844),r=i({}.toString),o=i("".slice);t.exports=function(t){return o(r(t),8,-1)}},926:function(t,e,n){"use strict";var i=n(3043),r=n(9985),o=n(6648),s=n(4201)("toStringTag"),a=Object,c="Arguments"===o(function(){return arguments}());t.exports=i?o:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=a(t),s))?n:c?o(e):"Object"===(i=o(e))&&r(e.callee)?"Arguments":i}},8758:function(t,e,n){"use strict";var i=n(6812),r=n(9152),o=n(2474),s=n(2560);t.exports=function(t,e,n){for(var a=r(e),c=s.f,l=o.f,h=0;h<a.length;h++){var u=a[h];i(t,u)||n&&i(n,u)||c(t,u,l(e,u))}}},1748:function(t,e,n){"use strict";var i=n(3689);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},7807:function(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},5773:function(t,e,n){"use strict";var i=n(7697),r=n(2560),o=n(5684);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},5684:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6522:function(t,e,n){"use strict";var i=n(8360),r=n(2560),o=n(5684);t.exports=function(t,e,n){var s=i(e);s in t?r.f(t,s,o(0,n)):t[s]=n}},2148:function(t,e,n){"use strict";var i=n(8702),r=n(2560);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),r.f(t,e,n)}},1880:function(t,e,n){"use strict";var i=n(9985),r=n(2560),o=n(8702),s=n(5014);t.exports=function(t,e,n,a){a||(a={});var c=a.enumerable,l=void 0!==a.name?a.name:e;if(i(n)&&o(n,l,a),a.global)c?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},6045:function(t,e,n){"use strict";var i=n(1880);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},5014:function(t,e,n){"use strict";var i=n(9037),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},8494:function(t,e,n){"use strict";var i=n(3691),r=TypeError;t.exports=function(t,e){if(!delete t[e])throw new r("Cannot delete property "+i(e)+" of "+i(t))}},7697:function(t,e,n){"use strict";var i=n(3689);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2659:function(t){"use strict";var e="object"==typeof document&&document.all,n=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},6420:function(t,e,n){"use strict";var i=n(9037),r=n(8999),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},5565:function(t){"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},6338:function(t){"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3265:function(t,e,n){"use strict";var i=n(6420)("span").classList,r=i&&i.constructor&&i.constructor.prototype;t.exports=r===Object.prototype?void 0:r},7365:function(t,e,n){"use strict";var i=n(71).match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},2532:function(t,e,n){"use strict";var i=n(8563),r=n(806);t.exports=!i&&!r&&"object"==typeof window&&"object"==typeof document},8563:function(t){"use strict";t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},7298:function(t,e,n){"use strict";var i=n(71);t.exports=/MSIE|Trident/.test(i)},3221:function(t,e,n){"use strict";var i=n(71);t.exports=/ipad|iphone|ipod/i.test(i)&&"undefined"!=typeof Pebble},4764:function(t,e,n){"use strict";var i=n(71);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},806:function(t,e,n){"use strict";var i=n(9037),r=n(6648);t.exports="process"===r(i.process)},7486:function(t,e,n){"use strict";var i=n(71);t.exports=/web0s(?!.*chrome)/i.test(i)},71:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},3615:function(t,e,n){"use strict";var i,r,o=n(9037),s=n(71),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,h=l&&l.v8;h&&(r=(i=h.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(!(i=s.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/))&&(r=+i[1]),t.exports=r},7922:function(t,e,n){"use strict";var i=n(71).match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},2739:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},9989:function(t,e,n){"use strict";var i=n(9037),r=n(2474).f,o=n(5773),s=n(1880),a=n(5014),c=n(8758),l=n(5266);t.exports=function(t,e){var n,h,u,d,f,p=t.target,g=t.global,m=t.stat;if(n=g?i:m?i[p]||a(p,{}):(i[p]||{}).prototype)for(h in e){if(d=e[h],u=t.dontCallGetSet?(f=r(n,h))&&f.value:n[h],!l(g?h:p+(m?".":"#")+h,t.forced)&&void 0!==u){if(typeof d==typeof u)continue;c(d,u)}(t.sham||u&&u.sham)&&o(d,"sham",!0),s(n,h,d,t)}}},3689:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},8678:function(t,e,n){"use strict";n(4043);var i=n(6576),r=n(1880),o=n(6308),s=n(3689),a=n(4201),c=n(5773),l=a("species"),h=RegExp.prototype;t.exports=function(t,e,n,u){var d=a(t),f=!s((function(){var e={};return e[d]=function(){return 7},7!==""[t](e)})),p=f&&!s((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!f||!p||n){var g=i(/./[d]),m=e(d,""[t],(function(t,e,n,r,s){var a=i(t),c=e.exec;return c===o||c===h.exec?f&&!s?{done:!0,value:g(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));r(String.prototype,t,m[0]),r(h,d,m[1])}u&&c(h[d],"sham",!0)}},7809:function(t,e,n){"use strict";var i=n(2297),r=n(6310),o=n(5565),s=n(4071),a=function(t,e,n,c,l,h,u,d){for(var f,p,g=l,m=0,v=!!u&&s(u,d);m<c;)m in n&&(f=v?v(n[m],m,e):n[m],h>0&&i(f)?(p=r(f),g=a(t,e,f,p,g,h-1)-1):(o(g+1),t[g]=f),g++),m++;return g};t.exports=a},1735:function(t,e,n){"use strict";var i=n(7215),r=Function.prototype,o=r.apply,s=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(i?s.bind(o):function(){return s.apply(o,arguments)})},4071:function(t,e,n){"use strict";var i=n(6576),r=n(509),o=n(7215),s=i(i.bind);t.exports=function(t,e){return r(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},7215:function(t,e,n){"use strict";var i=n(3689);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},2615:function(t,e,n){"use strict";var i=n(7215),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},1236:function(t,e,n){"use strict";var i=n(7697),r=n(6812),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!i||i&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},2743:function(t,e,n){"use strict";var i=n(8844),r=n(509);t.exports=function(t,e,n){try{return i(r(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},6576:function(t,e,n){"use strict";var i=n(6648),r=n(8844);t.exports=function(t){if("Function"===i(t))return r(t)}},8844:function(t,e,n){"use strict";var i=n(7215),r=Function.prototype,o=r.call,s=i&&r.bind.bind(o,o);t.exports=i?s:function(t){return function(){return o.apply(t,arguments)}}},6058:function(t,e,n){"use strict";var i=n(9037),r=n(9985);t.exports=function(t,e){return arguments.length<2?(n=i[t],r(n)?n:void 0):i[t]&&i[t][e];var n}},1664:function(t,e,n){"use strict";var i=n(926),r=n(4849),o=n(981),s=n(9478),a=n(4201)("iterator");t.exports=function(t){if(!o(t))return r(t,a)||r(t,"@@iterator")||s[i(t)]}},5185:function(t,e,n){"use strict";var i=n(2615),r=n(509),o=n(5027),s=n(3691),a=n(1664),c=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(r(n))return o(i(n,t));throw new c(s(t)+" is not iterable")}},4849:function(t,e,n){"use strict";var i=n(509),r=n(981);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},7017:function(t,e,n){"use strict";var i=n(8844),r=n(690),o=Math.floor,s=i("".charAt),a=i("".replace),c=i("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,h=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,i,u,d){var f=n+t.length,p=i.length,g=h;return void 0!==u&&(u=r(u),g=l),a(d,g,(function(r,a){var l;switch(s(a,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,n);case"'":return c(e,f);case"<":l=u[c(a,1,-1)];break;default:var h=+a;if(0===h)return r;if(h>p){var d=o(h/10);return 0===d?r:d<=p?void 0===i[d-1]?s(a,1):i[d-1]+s(a,1):r}l=i[h-1]}return void 0===l?"":l}))}},9037:function(t,e,n){"use strict";var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},6812:function(t,e,n){"use strict";var i=n(8844),r=n(690),o=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},7248:function(t){"use strict";t.exports={}},920:function(t){"use strict";t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},2688:function(t,e,n){"use strict";var i=n(6058);t.exports=i("document","documentElement")},8506:function(t,e,n){"use strict";var i=n(7697),r=n(3689),o=n(6420);t.exports=!i&&!r((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},4413:function(t,e,n){"use strict";var i=n(8844),r=n(3689),o=n(6648),s=Object,a=i("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},3457:function(t,e,n){"use strict";var i=n(9985),r=n(8999),o=n(9385);t.exports=function(t,e,n){var s,a;return o&&i(s=e.constructor)&&s!==n&&r(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},6738:function(t,e,n){"use strict";var i=n(8844),r=n(9985),o=n(4091),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},618:function(t,e,n){"use strict";var i,r,o,s=n(9834),a=n(9037),c=n(8999),l=n(5773),h=n(6812),u=n(4091),d=n(2713),f=n(7248),p="Object already initialized",g=a.TypeError,m=a.WeakMap;if(s||u.state){var v=u.state||(u.state=new m);v.get=v.get,v.has=v.has,v.set=v.set,i=function(t,e){if(v.has(t))throw new g(p);return e.facade=t,v.set(t,e),e},r=function(t){return v.get(t)||{}},o=function(t){return v.has(t)}}else{var y=d("state");f[y]=!0,i=function(t,e){if(h(t,y))throw new g(p);return e.facade=t,l(t,y,e),e},r=function(t){return h(t,y)?t[y]:{}},o=function(t){return h(t,y)}}t.exports={set:i,get:r,has:o,enforce:function(t){return o(t)?r(t):i(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=r(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return n}}}},3292:function(t,e,n){"use strict";var i=n(4201),r=n(9478),o=i("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},2297:function(t,e,n){"use strict";var i=n(6648);t.exports=Array.isArray||function(t){return"Array"===i(t)}},9985:function(t,e,n){"use strict";var i=n(2659),r=i.all;t.exports=i.IS_HTMLDDA?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},9429:function(t,e,n){"use strict";var i=n(8844),r=n(3689),o=n(9985),s=n(926),a=n(6058),c=n(6738),l=function(){},h=[],u=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,f=i(d.exec),p=!d.test(l),g=function(t){if(!o(t))return!1;try{return u(l,h,t),!0}catch(t){return!1}},m=function(t){if(!o(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!f(d,c(t))}catch(t){return!0}};m.sham=!0,t.exports=!u||r((function(){var t;return g(g.call)||!g(Object)||!g((function(){t=!0}))||t}))?m:g},5266:function(t,e,n){"use strict";var i=n(3689),r=n(9985),o=/#|\.prototype\./,s=function(t,e){var n=c[a(t)];return n===h||n!==l&&(r(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",h=s.POLYFILL="P";t.exports=s},981:function(t){"use strict";t.exports=function(t){return null==t}},8999:function(t,e,n){"use strict";var i=n(9985),r=n(2659),o=r.all;t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:i(t)||t===o}:function(t){return"object"==typeof t?null!==t:i(t)}},3931:function(t){"use strict";t.exports=!1},1245:function(t,e,n){"use strict";var i=n(8999),r=n(6648),o=n(4201)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"===r(t))}},734:function(t,e,n){"use strict";var i=n(6058),r=n(9985),o=n(3622),s=n(9525),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&o(e.prototype,a(t))}},8734:function(t,e,n){"use strict";var i=n(4071),r=n(2615),o=n(5027),s=n(3691),a=n(3292),c=n(6310),l=n(3622),h=n(5185),u=n(1664),d=n(2125),f=TypeError,p=function(t,e){this.stopped=t,this.result=e},g=p.prototype;t.exports=function(t,e,n){var m,v,y,w,b,A,P,S=n&&n.that,C=!(!n||!n.AS_ENTRIES),E=!(!n||!n.IS_RECORD),x=!(!n||!n.IS_ITERATOR),D=!(!n||!n.INTERRUPTED),I=i(e,S),R=function(t){return m&&d(m,"normal",t),new p(!0,t)},T=function(t){return C?(o(t),D?I(t[0],t[1],R):I(t[0],t[1])):D?I(t,R):I(t)};if(E)m=t.iterator;else if(x)m=t;else{if(!(v=u(t)))throw new f(s(t)+" is not iterable");if(a(v)){for(y=0,w=c(t);w>y;y++)if((b=T(t[y]))&&l(g,b))return b;return new p(!1)}m=h(t,v)}for(A=E?t.next:m.next;!(P=r(A,m)).done;){try{b=T(P.value)}catch(t){d(m,"throw",t)}if("object"==typeof b&&b&&l(g,b))return b}return new p(!1)}},2125:function(t,e,n){"use strict";var i=n(2615),r=n(5027),o=n(4849);t.exports=function(t,e,n){var s,a;r(t);try{if(!(s=o(t,"return"))){if("throw"===e)throw n;return n}s=i(s,t)}catch(t){a=!0,s=t}if("throw"===e)throw n;if(a)throw s;return r(s),n}},974:function(t,e,n){"use strict";var i=n(2013).IteratorPrototype,r=n(5391),o=n(5684),s=n(5997),a=n(9478),c=function(){return this};t.exports=function(t,e,n,l){var h=e+" Iterator";return t.prototype=r(i,{next:o(+!l,n)}),s(t,h,!1,!0),a[h]=c,t}},1934:function(t,e,n){"use strict";var i=n(9989),r=n(2615),o=n(3931),s=n(1236),a=n(9985),c=n(974),l=n(1868),h=n(9385),u=n(5997),d=n(5773),f=n(1880),p=n(4201),g=n(9478),m=n(2013),v=s.PROPER,y=s.CONFIGURABLE,w=m.IteratorPrototype,b=m.BUGGY_SAFARI_ITERATORS,A=p("iterator"),P="keys",S="values",C="entries",E=function(){return this};t.exports=function(t,e,n,s,p,m,x){c(n,e,s);var D,I,R,T=function(t){if(t===p&&O)return O;if(!b&&t&&t in k)return k[t];switch(t){case P:case S:case C:return function(){return new n(this,t)}}return function(){return new n(this)}},F=e+" Iterator",_=!1,k=t.prototype,M=k[A]||k["@@iterator"]||p&&k[p],O=!b&&M||T(p),L="Array"===e&&k.entries||M;if(L&&(D=l(L.call(new t)))!==Object.prototype&&D.next&&(o||l(D)===w||(h?h(D,w):a(D[A])||f(D,A,E)),u(D,F,!0,!0),o&&(g[F]=E)),v&&p===S&&M&&M.name!==S&&(!o&&y?d(k,"name",S):(_=!0,O=function(){return r(M,this)})),p)if(I={values:T(S),keys:m?O:T(P),entries:T(C)},x)for(R in I)(b||_||!(R in k))&&f(k,R,I[R]);else i({target:e,proto:!0,forced:b||_},I);return o&&!x||k[A]===O||f(k,A,O,{name:p}),g[e]=O,I}},2013:function(t,e,n){"use strict";var i,r,o,s=n(3689),a=n(9985),c=n(8999),l=n(5391),h=n(1868),u=n(1880),d=n(4201),f=n(3931),p=d("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(r=h(h(o)))!==Object.prototype&&(i=r):g=!0),!c(i)||s((function(){var t={};return i[p].call(t)!==t}))?i={}:f&&(i=l(i)),a(i[p])||u(i,p,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:g}},9478:function(t){"use strict";t.exports={}},6310:function(t,e,n){"use strict";var i=n(3126);t.exports=function(t){return i(t.length)}},8702:function(t,e,n){"use strict";var i=n(8844),r=n(3689),o=n(9985),s=n(6812),a=n(7697),c=n(1236).CONFIGURABLE,l=n(6738),h=n(618),u=h.enforce,d=h.get,f=String,p=Object.defineProperty,g=i("".slice),m=i("".replace),v=i([].join),y=a&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),w=String(String).split("String"),b=t.exports=function(t,e,n){"Symbol("===g(f(e),0,7)&&(e="["+m(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||c&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),y&&n&&s(n,"arity")&&t.length!==n.arity&&p(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var i=u(t);return s(i,"source")||(i.source=v(w,"string"==typeof e?e:"")),t};Function.prototype.toString=b((function(){return o(this)&&d(this).source||l(this)}),"toString")},8828:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},231:function(t,e,n){"use strict";var i,r,o,s,a,c=n(9037),l=n(4071),h=n(2474).f,u=n(9886).set,d=n(4410),f=n(4764),p=n(3221),g=n(7486),m=n(806),v=c.MutationObserver||c.WebKitMutationObserver,y=c.document,w=c.process,b=c.Promise,A=h(c,"queueMicrotask"),P=A&&A.value;if(!P){var S=new d,C=function(){var t,e;for(m&&(t=w.domain)&&t.exit();e=S.get();)try{e()}catch(t){throw S.head&&i(),t}t&&t.enter()};f||m||g||!v||!y?!p&&b&&b.resolve?((s=b.resolve(void 0)).constructor=b,a=l(s.then,s),i=function(){a(C)}):m?i=function(){w.nextTick(C)}:(u=l(u,c),i=function(){u(C)}):(r=!0,o=y.createTextNode(""),new v(C).observe(o,{characterData:!0}),i=function(){o.data=r=!r}),P=function(t){S.head||i(),S.add(t)}}t.exports=P},8742:function(t,e,n){"use strict";var i=n(509),r=TypeError,o=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw new r("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new o(t)}},5394:function(t,e,n){"use strict";var i=n(7697),r=n(8844),o=n(2615),s=n(3689),a=n(300),c=n(7518),l=n(9556),h=n(690),u=n(4413),d=Object.assign,f=Object.defineProperty,p=r([].concat);t.exports=!d||s((function(){if(i&&1!==d({b:1},d(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!==d({},t)[n]||a(d({},e)).join("")!==r}))?function(t,e){for(var n=h(t),r=arguments.length,s=1,d=c.f,f=l.f;r>s;)for(var g,m=u(arguments[s++]),v=d?p(a(m),d(m)):a(m),y=v.length,w=0;y>w;)g=v[w++],i&&!o(f,m,g)||(n[g]=m[g]);return n}:d},5391:function(t,e,n){"use strict";var i,r=n(5027),o=n(8920),s=n(2739),a=n(7248),c=n(2688),l=n(6420),h=n(2713),u="prototype",d="script",f=h("IE_PROTO"),p=function(){},g=function(t){return"<"+d+">"+t+"</"+d+">"},m=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},v=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;v="undefined"!=typeof document?document.domain&&i?m(i):(e=l("iframe"),n="java"+d+":",e.style.display="none",c.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(g("document.F=Object")),t.close(),t.F):m(i);for(var r=s.length;r--;)delete v[u][s[r]];return v()};a[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p[u]=r(t),n=new p,p[u]=null,n[f]=t):n=v(),void 0===e?n:o.f(n,e)}},8920:function(t,e,n){"use strict";var i=n(7697),r=n(5648),o=n(2560),s=n(5027),a=n(5290),c=n(300);e.f=i&&!r?Object.defineProperties:function(t,e){s(t);for(var n,i=a(e),r=c(e),l=r.length,h=0;l>h;)o.f(t,n=r[h++],i[n]);return t}},2560:function(t,e,n){"use strict";var i=n(7697),r=n(8506),o=n(5648),s=n(5027),a=n(8360),c=TypeError,l=Object.defineProperty,h=Object.getOwnPropertyDescriptor,u="enumerable",d="configurable",f="writable";e.f=i?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"==typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var i=h(t,e);i&&i[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:i[d],enumerable:u in n?n[u]:i[u],writable:!1})}return l(t,e,n)}:l:function(t,e,n){if(s(t),e=a(e),s(n),r)try{return l(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},2474:function(t,e,n){"use strict";var i=n(7697),r=n(2615),o=n(9556),s=n(5684),a=n(5290),c=n(8360),l=n(6812),h=n(8506),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=a(t),e=c(e),h)try{return u(t,e)}catch(t){}if(l(t,e))return s(!r(o.f,t,e),t[e])}},2741:function(t,e,n){"use strict";var i=n(4948),r=n(2739).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},7518:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},1868:function(t,e,n){"use strict";var i=n(6812),r=n(9985),o=n(690),s=n(2713),a=n(1748),c=s("IE_PROTO"),l=Object,h=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=o(t);if(i(e,c))return e[c];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof l?h:null}},3622:function(t,e,n){"use strict";var i=n(8844);t.exports=i({}.isPrototypeOf)},4948:function(t,e,n){"use strict";var i=n(8844),r=n(6812),o=n(5290),s=n(4328).indexOf,a=n(7248),c=i([].push);t.exports=function(t,e){var n,i=o(t),l=0,h=[];for(n in i)!r(a,n)&&r(i,n)&&c(h,n);for(;e.length>l;)r(i,n=e[l++])&&(~s(h,n)||c(h,n));return h}},300:function(t,e,n){"use strict";var i=n(4948),r=n(2739);t.exports=Object.keys||function(t){return i(t,r)}},9556:function(t,e){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},9385:function(t,e,n){"use strict";var i=n(2743),r=n(5027),o=n(3550);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=i(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),o(i),e?t(n,i):n.__proto__=i,n}}():void 0)},5899:function(t,e,n){"use strict";var i=n(2615),r=n(9985),o=n(8999),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!o(a=i(n,t)))return a;if(r(n=t.valueOf)&&!o(a=i(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!o(a=i(n,t)))return a;throw new s("Can't convert object to primitive value")}},9152:function(t,e,n){"use strict";var i=n(6058),r=n(8844),o=n(2741),s=n(7518),a=n(5027),c=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?c(e,n(t)):e}},9302:function(t){"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},7073:function(t,e,n){"use strict";var i=n(9037),r=n(7919),o=n(9985),s=n(5266),a=n(6738),c=n(4201),l=n(2532),h=n(8563),u=n(3931),d=n(3615),f=r&&r.prototype,p=c("species"),g=!1,m=o(i.PromiseRejectionEvent),v=s("Promise",(function(){var t=a(r),e=t!==String(r);if(!e&&66===d)return!0;if(u&&(!f.catch||!f.finally))return!0;if(!d||d<51||!/native code/.test(t)){var n=new r((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))};if((n.constructor={})[p]=i,!(g=n.then((function(){}))instanceof i))return!0}return!e&&(l||h)&&!m}));t.exports={CONSTRUCTOR:v,REJECTION_EVENT:m,SUBCLASSING:g}},7919:function(t,e,n){"use strict";var i=n(9037);t.exports=i.Promise},2945:function(t,e,n){"use strict";var i=n(5027),r=n(8999),o=n(8742);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},562:function(t,e,n){"use strict";var i=n(7919),r=n(6431),o=n(7073).CONSTRUCTOR;t.exports=o||!r((function(t){i.all(t).then(void 0,(function(){}))}))},8055:function(t,e,n){"use strict";var i=n(2560).f;t.exports=function(t,e,n){n in t||i(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},4410:function(t){"use strict";var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},6100:function(t,e,n){"use strict";var i=n(2615),r=n(5027),o=n(9985),s=n(6648),a=n(6308),c=TypeError;t.exports=function(t,e){var n=t.exec;if(o(n)){var l=i(n,t,e);return null!==l&&r(l),l}if("RegExp"===s(t))return i(a,t,e);throw new c("RegExp#exec called on incompatible receiver")}},6308:function(t,e,n){"use strict";var i,r,o=n(2615),s=n(8844),a=n(4327),c=n(9633),l=n(7901),h=n(3430),u=n(5391),d=n(618).get,f=n(2100),p=n(6422),g=h("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,v=m,y=s("".charAt),w=s("".indexOf),b=s("".replace),A=s("".slice),P=(r=/b*/g,o(m,i=/a/,"a"),o(m,r,"a"),0!==i.lastIndex||0!==r.lastIndex),S=l.BROKEN_CARET,C=void 0!==/()??/.exec("")[1];(P||C||S||f||p)&&(v=function(t){var e,n,i,r,s,l,h,f=this,p=d(f),E=a(t),x=p.raw;if(x)return x.lastIndex=f.lastIndex,e=o(v,x,E),f.lastIndex=x.lastIndex,e;var D=p.groups,I=S&&f.sticky,R=o(c,f),T=f.source,F=0,_=E;if(I&&(R=b(R,"y",""),-1===w(R,"g")&&(R+="g"),_=A(E,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==y(E,f.lastIndex-1))&&(T="(?: "+T+")",_=" "+_,F++),n=new RegExp("^(?:"+T+")",R)),C&&(n=new RegExp("^"+T+"$(?!\\s)",R)),P&&(i=f.lastIndex),r=o(m,I?n:f,_),I?r?(r.input=A(r.input,F),r[0]=A(r[0],F),r.index=f.lastIndex,f.lastIndex+=r[0].length):f.lastIndex=0:P&&r&&(f.lastIndex=f.global?r.index+r[0].length:i),C&&r&&r.length>1&&o(g,r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r&&D)for(r.groups=l=u(null),s=0;s<D.length;s++)l[(h=D[s])[0]]=r[h[1]];return r}),t.exports=v},9633:function(t,e,n){"use strict";var i=n(5027);t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},3477:function(t,e,n){"use strict";var i=n(2615),r=n(6812),o=n(3622),s=n(9633),a=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in a||r(t,"flags")||!o(a,t)?e:i(s,t)}},7901:function(t,e,n){"use strict";var i=n(3689),r=n(9037).RegExp,o=i((function(){var t=r("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),s=o||i((function(){return!r("a","y").sticky})),a=o||i((function(){var t=r("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},2100:function(t,e,n){"use strict";var i=n(3689),r=n(9037).RegExp;t.exports=i((function(){var t=r(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},6422:function(t,e,n){"use strict";var i=n(3689),r=n(9037).RegExp;t.exports=i((function(){var t=r("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},4684:function(t,e,n){"use strict";var i=n(981),r=TypeError;t.exports=function(t){if(i(t))throw new r("Can't call method on "+t);return t}},4241:function(t,e,n){"use strict";var i=n(6058),r=n(2148),o=n(4201),s=n(7697),a=o("species");t.exports=function(t){var e=i(t);s&&e&&!e[a]&&r(e,a,{configurable:!0,get:function(){return this}})}},5997:function(t,e,n){"use strict";var i=n(2560).f,r=n(6812),o=n(4201)("toStringTag");t.exports=function(t,e,n){t&&!n&&(t=t.prototype),t&&!r(t,o)&&i(t,o,{configurable:!0,value:e})}},2713:function(t,e,n){"use strict";var i=n(3430),r=n(4630),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},4091:function(t,e,n){"use strict";var i=n(9037),r=n(5014),o="__core-js_shared__",s=i[o]||r(o,{});t.exports=s},3430:function(t,e,n){"use strict";var i=n(3931),r=n(4091);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.3",mode:i?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.3/LICENSE",source:"https://github.com/zloirock/core-js"})},6373:function(t,e,n){"use strict";var i=n(5027),r=n(2655),o=n(981),s=n(4201)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||o(n=i(a)[s])?e:r(n)}},730:function(t,e,n){"use strict";var i=n(8844),r=n(8700),o=n(4327),s=n(4684),a=i("".charAt),c=i("".charCodeAt),l=i("".slice),h=function(t){return function(e,n){var i,h,u=o(s(e)),d=r(n),f=u.length;return d<0||d>=f?t?"":void 0:(i=c(u,d))<55296||i>56319||d+1===f||(h=c(u,d+1))<56320||h>57343?t?a(u,d):i:t?l(u,d,d+2):h-56320+(i-55296<<10)+65536}};t.exports={codeAt:h(!1),charAt:h(!0)}},6430:function(t,e,n){"use strict";var i=n(8844),r=2147483647,o=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",c=RangeError,l=i(s.exec),h=Math.floor,u=String.fromCharCode,d=i("".charCodeAt),f=i([].join),p=i([].push),g=i("".replace),m=i("".split),v=i("".toLowerCase),y=function(t){return t+22+75*(t<26)},w=function(t,e,n){var i=0;for(t=n?h(t/700):t>>1,t+=h(t/e);t>455;)t=h(t/35),i+=36;return h(i+36*t/(t+38))},b=function(t){var e=[];t=function(t){for(var e=[],n=0,i=t.length;n<i;){var r=d(t,n++);if(r>=55296&&r<=56319&&n<i){var o=d(t,n++);56320==(64512&o)?p(e,((1023&r)<<10)+(1023&o)+65536):(p(e,r),n--)}else p(e,r)}return e}(t);var n,i,o=t.length,s=128,l=0,g=72;for(n=0;n<t.length;n++)(i=t[n])<128&&p(e,u(i));var m=e.length,v=m;for(m&&p(e,"-");v<o;){var b=r;for(n=0;n<t.length;n++)(i=t[n])>=s&&i<b&&(b=i);var A=v+1;if(b-s>h((r-l)/A))throw new c(a);for(l+=(b-s)*A,s=b,n=0;n<t.length;n++){if((i=t[n])<s&&++l>r)throw new c(a);if(i===s){for(var P=l,S=36;;){var C=S<=g?1:S>=g+26?26:S-g;if(P<C)break;var E=P-C,x=36-C;p(e,u(y(C+E%x))),P=h(E/x),S+=36}p(e,u(y(P))),g=w(l,A,v===m),l=0,v++}}l++,s++}return f(e,"")};t.exports=function(t){var e,n,i=[],r=m(g(v(t),s,"."),".");for(e=0;e<r.length;e++)n=r[e],p(i,l(o,n)?"xn--"+b(n):n);return f(i,".")}},9558:function(t,e,n){"use strict";var i=n(1435).end,r=n(9983);t.exports=r("trimEnd")?function(){return i(this)}:"".trimEnd},9983:function(t,e,n){"use strict";var i=n(1236).PROPER,r=n(3689),o=n(6350);t.exports=function(t){return r((function(){return!!o[t]()||"​᠎"!=="​᠎"[t]()||i&&o[t].name!==t}))}},2291:function(t,e,n){"use strict";var i=n(1435).start,r=n(9983);t.exports=r("trimStart")?function(){return i(this)}:"".trimStart},1435:function(t,e,n){"use strict";var i=n(8844),r=n(4684),o=n(4327),s=n(6350),a=i("".replace),c=RegExp("^["+s+"]+"),l=RegExp("(^|[^"+s+"])["+s+"]+$"),h=function(t){return function(e){var n=o(r(e));return 1&t&&(n=a(n,c,"")),2&t&&(n=a(n,l,"$1")),n}};t.exports={start:h(1),end:h(2),trim:h(3)}},146:function(t,e,n){"use strict";var i=n(3615),r=n(3689),o=n(9037).String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},9886:function(t,e,n){"use strict";var i,r,o,s,a=n(9037),c=n(1735),l=n(4071),h=n(9985),u=n(6812),d=n(3689),f=n(2688),p=n(6004),g=n(6420),m=n(1500),v=n(4764),y=n(806),w=a.setImmediate,b=a.clearImmediate,A=a.process,P=a.Dispatch,S=a.Function,C=a.MessageChannel,E=a.String,x=0,D={},I="onreadystatechange";d((function(){i=a.location}));var R=function(t){if(u(D,t)){var e=D[t];delete D[t],e()}},T=function(t){return function(){R(t)}},F=function(t){R(t.data)},_=function(t){a.postMessage(E(t),i.protocol+"//"+i.host)};w&&b||(w=function(t){m(arguments.length,1);var e=h(t)?t:S(t),n=p(arguments,1);return D[++x]=function(){c(e,void 0,n)},r(x),x},b=function(t){delete D[t]},y?r=function(t){A.nextTick(T(t))}:P&&P.now?r=function(t){P.now(T(t))}:C&&!v?(s=(o=new C).port2,o.port1.onmessage=F,r=l(s.postMessage,s)):a.addEventListener&&h(a.postMessage)&&!a.importScripts&&i&&"file:"!==i.protocol&&!d(_)?(r=_,a.addEventListener("message",F,!1)):r=I in g("script")?function(t){f.appendChild(g("script"))[I]=function(){f.removeChild(this),R(t)}}:function(t){setTimeout(T(t),0)}),t.exports={set:w,clear:b}},7578:function(t,e,n){"use strict";var i=n(8700),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},5290:function(t,e,n){"use strict";var i=n(4413),r=n(4684);t.exports=function(t){return i(r(t))}},8700:function(t,e,n){"use strict";var i=n(8828);t.exports=function(t){var e=+t;return e!=e||0===e?0:i(e)}},3126:function(t,e,n){"use strict";var i=n(8700),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},690:function(t,e,n){"use strict";var i=n(4684),r=Object;t.exports=function(t){return r(i(t))}},3250:function(t,e,n){"use strict";var i=n(5904),r=RangeError;t.exports=function(t,e){var n=i(t);if(n%e)throw new r("Wrong offset");return n}},5904:function(t,e,n){"use strict";var i=n(8700),r=RangeError;t.exports=function(t){var e=i(t);if(e<0)throw new r("The argument can't be less than 0");return e}},8732:function(t,e,n){"use strict";var i=n(2615),r=n(8999),o=n(734),s=n(4849),a=n(5899),c=n(4201),l=TypeError,h=c("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var n,c=s(t,h);if(c){if(void 0===e&&(e="default"),n=i(c,t,e),!r(n)||o(n))return n;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},8360:function(t,e,n){"use strict";var i=n(8732),r=n(734);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},3043:function(t,e,n){"use strict";var i={};i[n(4201)("toStringTag")]="z",t.exports="[object z]"===String(i)},4327:function(t,e,n){"use strict";var i=n(926),r=String;t.exports=function(t){if("Symbol"===i(t))throw new TypeError("Cannot convert a Symbol value to a string");return r(t)}},3691:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},4630:function(t,e,n){"use strict";var i=n(8844),r=0,o=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+o,36)}},6837:function(t,e,n){"use strict";var i=n(3689),r=n(4201),o=n(7697),s=n(3931),a=r("iterator");t.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),i="";return t.pathname="c%20d",e.forEach((function(t,n){e.delete("b"),i+=n+t})),n.delete("a",2),n.delete("b",void 0),s&&(!t.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!e.size&&(s||!o)||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host}))},9525:function(t,e,n){"use strict";var i=n(146);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5648:function(t,e,n){"use strict";var i=n(7697),r=n(3689);t.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1500:function(t){"use strict";var e=TypeError;t.exports=function(t,n){if(t<n)throw new e("Not enough arguments");return t}},9834:function(t,e,n){"use strict";var i=n(9037),r=n(9985),o=i.WeakMap;t.exports=r(o)&&/native code/.test(String(o))},4201:function(t,e,n){"use strict";var i=n(9037),r=n(3430),o=n(6812),s=n(4630),a=n(146),c=n(9525),l=i.Symbol,h=r("wks"),u=c?l.for||l:l&&l.withoutSetter||s;t.exports=function(t){return o(h,t)||(h[t]=a&&o(l,t)?l[t]:u("Symbol."+t)),h[t]}},6350:function(t){"use strict";t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},4564:function(t,e,n){"use strict";var i=n(9989),r=n(7809),o=n(509),s=n(690),a=n(6310),c=n(7120);i({target:"Array",proto:!0},{flatMap:function(t){var e,n=s(this),i=a(n);return o(t),(e=c(n,0)).length=r(e,n,n,i,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},2795:function(t,e,n){"use strict";var i=n(9989),r=n(7809),o=n(690),s=n(6310),a=n(8700),c=n(7120);i({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),n=s(e),i=c(e,0);return i.length=r(i,e,e,n,0,void 0===t?1:a(t)),i}})},752:function(t,e,n){"use strict";var i=n(5290),r=n(7370),o=n(9478),s=n(618),a=n(2560).f,c=n(1934),l=n(7807),h=n(3931),u=n(7697),d="Array Iterator",f=s.set,p=s.getterFor(d);t.exports=c(Array,"Array",(function(t,e){f(this,{type:d,target:i(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,l(void 0,!0);switch(t.kind){case"keys":return l(n,!1);case"values":return l(e[n],!1)}return l([n,e[n]],!1)}),"values");var g=o.Arguments=o.Array;if(r("keys"),r("values"),r("entries"),!h&&u&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(t){}},1386:function(t,e,n){"use strict";var i=n(9989),r=n(8820).right,o=n(6834),s=n(3615);i({target:"Array",proto:!0,forced:!n(806)&&s>79&&s<83||!o("reduceRight")},{reduceRight:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},278:function(t,e,n){"use strict";var i=n(9989),r=n(8820).left,o=n(6834),s=n(3615);i({target:"Array",proto:!0,forced:!n(806)&&s>79&&s<83||!o("reduce")},{reduce:function(t){var e=arguments.length;return r(this,t,e,e>1?arguments[1]:void 0)}})},5137:function(t,e,n){"use strict";var i=n(9989),r=n(8844),o=n(509),s=n(690),a=n(6310),c=n(8494),l=n(4327),h=n(3689),u=n(382),d=n(6834),f=n(7365),p=n(7298),g=n(3615),m=n(7922),v=[],y=r(v.sort),w=r(v.push),b=h((function(){v.sort(void 0)})),A=h((function(){v.sort(null)})),P=d("sort"),S=!h((function(){if(g)return g<70;if(!(f&&f>3)){if(p)return!0;if(m)return m<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)v.push({k:e+i,v:n})}for(v.sort((function(t,e){return e.v-t.v})),i=0;i<v.length;i++)e=v[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));i({target:"Array",proto:!0,forced:b||!A||!P||!S},{sort:function(t){void 0!==t&&o(t);var e=s(this);if(S)return void 0===t?y(e):y(e,t);var n,i,r=[],h=a(e);for(i=0;i<h;i++)i in e&&w(r,e[i]);for(u(r,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:l(e)>l(n)?1:-1}}(t)),n=a(r),i=0;i<n;)e[i]=r[i++];for(;i<h;)c(e,i++);return e}})},385:function(t,e,n){"use strict";n(7370)("flatMap")},3383:function(t,e,n){"use strict";n(7370)("flat")},5398:function(t,e,n){"use strict";var i=n(9989),r=n(9037);i({global:!0,forced:r.globalThis!==r},{globalThis:r})},1692:function(t,e,n){"use strict";var i=n(9989),r=n(2615),o=n(509),s=n(8742),a=n(9302),c=n(8734);i({target:"Promise",stat:!0,forced:n(562)},{all:function(t){var e=this,n=s.f(e),i=n.resolve,l=n.reject,h=a((function(){var n=o(e.resolve),s=[],a=0,h=1;c(t,(function(t){var o=a++,c=!1;h++,r(n,e,t).then((function(t){c||(c=!0,s[o]=t,--h||i(s))}),l)})),--h||i(s)}));return h.error&&l(h.value),n.promise}})},5089:function(t,e,n){"use strict";var i=n(9989),r=n(3931),o=n(7073).CONSTRUCTOR,s=n(7919),a=n(6058),c=n(9985),l=n(1880),h=s&&s.prototype;if(i({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(t){return this.then(void 0,t)}}),!r&&c(s)){var u=a("Promise").prototype.catch;h.catch!==u&&l(h,"catch",u,{unsafe:!0})}},6697:function(t,e,n){"use strict";var i,r,o,s=n(9989),a=n(3931),c=n(806),l=n(9037),h=n(2615),u=n(1880),d=n(9385),f=n(5997),p=n(4241),g=n(509),m=n(9985),v=n(8999),y=n(767),w=n(6373),b=n(9886).set,A=n(231),P=n(920),S=n(9302),C=n(4410),E=n(618),x=n(7919),D=n(7073),I=n(8742),R="Promise",T=D.CONSTRUCTOR,F=D.REJECTION_EVENT,_=D.SUBCLASSING,k=E.getterFor(R),M=E.set,O=x&&x.prototype,L=x,N=O,B=l.TypeError,V=l.document,U=l.process,H=I.f,j=H,$=!!(V&&V.createEvent&&l.dispatchEvent),W="unhandledrejection",Y=function(t){var e;return!(!v(t)||!m(e=t.then))&&e},G=function(t,e){var n,i,r,o=e.value,s=1===e.state,a=s?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{a?(s||(2===e.rejection&&Z(e),e.rejection=1),!0===a?n=o:(u&&u.enter(),n=a(o),u&&(u.exit(),r=!0)),n===t.promise?l(new B("Promise-chain cycle")):(i=Y(n))?h(i,n,c,l):c(n)):l(o)}catch(t){u&&!r&&u.exit(),l(t)}},K=function(t,e){t.notified||(t.notified=!0,A((function(){for(var n,i=t.reactions;n=i.get();)G(n,t);t.notified=!1,e&&!t.rejection&&z(t)})))},q=function(t,e,n){var i,r;$?((i=V.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),l.dispatchEvent(i)):i={promise:e,reason:n},!F&&(r=l["on"+t])?r(i):t===W&&P("Unhandled promise rejection",n)},z=function(t){h(b,l,(function(){var e,n=t.facade,i=t.value;if(J(t)&&(e=S((function(){c?U.emit("unhandledRejection",i,n):q(W,n,i)})),t.rejection=c||J(t)?2:1,e.error))throw e.value}))},J=function(t){return 1!==t.rejection&&!t.parent},Z=function(t){h(b,l,(function(){var e=t.facade;c?U.emit("rejectionHandled",e):q("rejectionhandled",e,t.value)}))},X=function(t,e,n){return function(i){t(e,i,n)}},Q=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,K(t,!0))},tt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new B("Promise can't be resolved itself");var i=Y(e);i?A((function(){var n={done:!1};try{h(i,e,X(tt,n,t),X(Q,n,t))}catch(e){Q(n,e,t)}})):(t.value=e,t.state=1,K(t,!1))}catch(e){Q({done:!1},e,t)}}};if(T&&(N=(L=function(t){y(this,N),g(t),h(i,this);var e=k(this);try{t(X(tt,e),X(Q,e))}catch(t){Q(e,t)}}).prototype,(i=function(t){M(this,{type:R,done:!1,notified:!1,parent:!1,reactions:new C,rejection:!1,state:0,value:void 0})}).prototype=u(N,"then",(function(t,e){var n=k(this),i=H(w(this,L));return n.parent=!0,i.ok=!m(t)||t,i.fail=m(e)&&e,i.domain=c?U.domain:void 0,0===n.state?n.reactions.add(i):A((function(){G(i,n)})),i.promise})),r=function(){var t=new i,e=k(t);this.promise=t,this.resolve=X(tt,e),this.reject=X(Q,e)},I.f=H=function(t){return t===L||undefined===t?new r(t):j(t)},!a&&m(x)&&O!==Object.prototype)){o=O.then,_||u(O,"then",(function(t,e){var n=this;return new L((function(t,e){h(o,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete O.constructor}catch(t){}d&&d(O,N)}s({global:!0,constructor:!0,wrap:!0,forced:T},{Promise:L}),f(L,R,!1,!0),p(R)},6409:function(t,e,n){"use strict";var i=n(9989),r=n(3931),o=n(7919),s=n(3689),a=n(6058),c=n(9985),l=n(6373),h=n(2945),u=n(1880),d=o&&o.prototype;if(i({target:"Promise",proto:!0,real:!0,forced:!!o&&s((function(){d.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=l(this,a("Promise")),n=c(t);return this.then(n?function(n){return h(e,t()).then((function(){return n}))}:t,n?function(n){return h(e,t()).then((function(){throw n}))}:t)}}),!r&&c(o)){var f=a("Promise").prototype.finally;d.finally!==f&&u(d,"finally",f,{unsafe:!0})}},3964:function(t,e,n){"use strict";n(6697),n(1692),n(5089),n(8829),n(2092),n(7905)},8829:function(t,e,n){"use strict";var i=n(9989),r=n(2615),o=n(509),s=n(8742),a=n(9302),c=n(8734);i({target:"Promise",stat:!0,forced:n(562)},{race:function(t){var e=this,n=s.f(e),i=n.reject,l=a((function(){var s=o(e.resolve);c(t,(function(t){r(s,e,t).then(n.resolve,i)}))}));return l.error&&i(l.value),n.promise}})},2092:function(t,e,n){"use strict";var i=n(9989),r=n(2615),o=n(8742);i({target:"Promise",stat:!0,forced:n(7073).CONSTRUCTOR},{reject:function(t){var e=o.f(this);return r(e.reject,void 0,t),e.promise}})},7905:function(t,e,n){"use strict";var i=n(9989),r=n(6058),o=n(3931),s=n(7919),a=n(7073).CONSTRUCTOR,c=n(2945),l=r("Promise"),h=o&&!a;i({target:"Promise",stat:!0,forced:o||a},{resolve:function(t){return c(h&&this===l?s:this,t)}})},2003:function(t,e,n){"use strict";var i=n(7697),r=n(9037),o=n(8844),s=n(5266),a=n(3457),c=n(5773),l=n(2741).f,h=n(3622),u=n(1245),d=n(4327),f=n(3477),p=n(7901),g=n(8055),m=n(1880),v=n(3689),y=n(6812),w=n(618).enforce,b=n(4241),A=n(4201),P=n(2100),S=n(6422),C=A("match"),E=r.RegExp,x=E.prototype,D=r.SyntaxError,I=o(x.exec),R=o("".charAt),T=o("".replace),F=o("".indexOf),_=o("".slice),k=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M=/a/g,O=/a/g,L=new E(M)!==M,N=p.MISSED_STICKY,B=p.UNSUPPORTED_Y,V=i&&(!L||N||P||S||v((function(){return O[C]=!1,E(M)!==M||E(O)===O||"/a/i"!==String(E(M,"i"))})));if(s("RegExp",V)){for(var U=function(t,e){var n,i,r,o,s,l,p=h(x,this),g=u(t),m=void 0===e,v=[],b=t;if(!p&&g&&m&&t.constructor===U)return t;if((g||h(x,t))&&(t=t.source,m&&(e=f(b))),t=void 0===t?"":d(t),e=void 0===e?"":d(e),b=t,P&&"dotAll"in M&&(i=!!e&&F(e,"s")>-1)&&(e=T(e,/s/g,"")),n=e,N&&"sticky"in M&&(r=!!e&&F(e,"y")>-1)&&B&&(e=T(e,/y/g,"")),S&&(o=function(t){for(var e,n=t.length,i=0,r="",o=[],s={},a=!1,c=!1,l=0,h="";i<=n;i++){if("\\"===(e=R(t,i)))e+=R(t,++i);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:I(k,_(t,i+1))&&(i+=2,c=!0),r+=e,l++;continue;case">"===e&&c:if(""===h||y(s,h))throw new D("Invalid capture group name");s[h]=!0,o[o.length]=[h,l],c=!1,h="";continue}c?h+=e:r+=e}return[r,o]}(t),t=o[0],v=o[1]),s=a(E(t,e),p?this:x,U),(i||r||v.length)&&(l=w(s),i&&(l.dotAll=!0,l.raw=U(function(t){for(var e,n=t.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(e=R(t,i))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),r+=e):r+="[\\s\\S]":r+=e+R(t,++i);return r}(t),n)),r&&(l.sticky=!0),v.length&&(l.groups=v)),t!==b)try{c(s,"source",""===b?"(?:)":b)}catch(t){}return s},H=l(E),j=0;H.length>j;)g(U,E,H[j++]);x.constructor=U,U.prototype=x,m(r,"RegExp",U,{constructor:!0})}b("RegExp")},4043:function(t,e,n){"use strict";var i=n(9989),r=n(6308);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},5847:function(t,e,n){"use strict";var i=n(9037),r=n(7697),o=n(2148),s=n(9633),a=n(3689),c=i.RegExp,l=c.prototype;r&&a((function(){var t=!0;try{c(".","d")}catch(e){t=!1}var e={},n="",i=t?"dgimsy":"gimsy",r=function(t,i){Object.defineProperty(e,t,{get:function(){return n+=i,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var s in t&&(o.hasIndices="d"),o)r(s,o[s]);return Object.getOwnPropertyDescriptor(l,"flags").get.call(e)!==i||n!==i}))&&o(l,"flags",{configurable:!0,get:s})},1694:function(t,e,n){"use strict";var i=n(730).charAt,r=n(4327),o=n(618),s=n(1934),a=n(7807),c="String Iterator",l=o.set,h=o.getterFor(c);s(String,"String",(function(t){l(this,{type:c,string:r(t),index:0})}),(function(){var t,e=h(this),n=e.string,r=e.index;return r>=n.length?a(void 0,!0):(t=i(n,r),e.index+=t.length,a(t,!1))}))},6532:function(t,e,n){"use strict";var i=n(9989),r=n(2615),o=n(8844),s=n(4684),a=n(9985),c=n(981),l=n(1245),h=n(4327),u=n(4849),d=n(3477),f=n(7017),p=n(4201),g=n(3931),m=p("replace"),v=TypeError,y=o("".indexOf),w=o("".replace),b=o("".slice),A=Math.max,P=function(t,e,n){return n>t.length?-1:""===e?n:y(t,e,n)};i({target:"String",proto:!0},{replaceAll:function(t,e){var n,i,o,p,S,C,E,x,D,I=s(this),R=0,T=0,F="";if(!c(t)){if((n=l(t))&&(i=h(s(d(t))),!~y(i,"g")))throw new v("`.replaceAll` does not allow non-global regexes");if(o=u(t,m))return r(o,t,I,e);if(g&&n)return w(h(I),t,e)}for(p=h(I),S=h(t),(C=a(e))||(e=h(e)),E=S.length,x=A(1,E),R=P(p,S,0);-1!==R;)D=C?h(e(S,R,p)):f(S,p,R,[],void 0,e),F+=b(p,T,R)+D,T=R+E,R=P(p,S,R+x);return T<p.length&&(F+=b(p,T)),F}})},7267:function(t,e,n){"use strict";var i=n(1735),r=n(2615),o=n(8844),s=n(8678),a=n(3689),c=n(5027),l=n(9985),h=n(981),u=n(8700),d=n(3126),f=n(4327),p=n(4684),g=n(1514),m=n(4849),v=n(7017),y=n(6100),w=n(4201)("replace"),b=Math.max,A=Math.min,P=o([].concat),S=o([].push),C=o("".indexOf),E=o("".slice),x="$0"==="a".replace(/./,"$0"),D=!!/./[w]&&""===/./[w]("a","$0");s("replace",(function(t,e,n){var o=D?"$":"$0";return[function(t,n){var i=p(this),o=h(t)?void 0:m(t,w);return o?r(o,t,i,n):r(e,f(i),t,n)},function(t,r){var s=c(this),a=f(t);if("string"==typeof r&&-1===C(r,o)&&-1===C(r,"$<")){var h=n(e,s,a,r);if(h.done)return h.value}var p=l(r);p||(r=f(r));var m,w=s.global;w&&(m=s.unicode,s.lastIndex=0);for(var x,D=[];null!==(x=y(s,a))&&(S(D,x),w);){""===f(x[0])&&(s.lastIndex=g(a,d(s.lastIndex),m))}for(var I,R="",T=0,F=0;F<D.length;F++){for(var _,k=f((x=D[F])[0]),M=b(A(u(x.index),a.length),0),O=[],L=1;L<x.length;L++)S(O,void 0===(I=x[L])?I:String(I));var N=x.groups;if(p){var B=P([k],O,M,a);void 0!==N&&S(B,N),_=f(i(r,void 0,B))}else _=v(k,a,M,O,N,r);M>=T&&(R+=E(a,T,M)+_,T=M+k.length)}return R+E(a,T)}]}),!!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!x||D)},6386:function(t,e,n){"use strict";n(1313);var i=n(9989),r=n(9558);i({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==r},{trimEnd:r})},4130:function(t,e,n){"use strict";var i=n(9989),r=n(2291);i({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==r},{trimLeft:r})},1313:function(t,e,n){"use strict";var i=n(9989),r=n(9558);i({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==r},{trimRight:r})},3255:function(t,e,n){"use strict";n(4130);var i=n(9989),r=n(2291);i({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==r},{trimStart:r})},6544:function(t,e,n){"use strict";var i=n(9989),r=n(7697),o=n(9037),s=n(8844),a=n(6812),c=n(9985),l=n(3622),h=n(4327),u=n(2148),d=n(8758),f=o.Symbol,p=f&&f.prototype;if(r&&c(f)&&(!("description"in p)||void 0!==f().description)){var g={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:h(arguments[0]),e=l(p,this)?new f(t):void 0===t?f():f(t);return""===t&&(g[e]=!0),e};d(m,f),m.prototype=p,p.constructor=m;var v="Symbol(description detection)"===String(f("description detection")),y=s(p.valueOf),w=s(p.toString),b=/^Symbol\((.*)\)[^)]+$/,A=s("".replace),P=s("".slice);u(p,"description",{configurable:!0,get:function(){var t=y(this);if(a(g,t))return"";var e=w(t),n=v?P(e,7,-1):A(e,b,"$1");return""===n?void 0:n}}),i({global:!0,constructor:!0,forced:!0},{Symbol:m})}},9976:function(t,e,n){"use strict";var i=n(9037),r=n(2615),o=n(4872),s=n(6310),a=n(3250),c=n(690),l=n(3689),h=i.RangeError,u=i.Int8Array,d=u&&u.prototype,f=d&&d.set,p=o.aTypedArray,g=o.exportTypedArrayMethod,m=!l((function(){var t=new Uint8ClampedArray(2);return r(f,t,{length:1,0:3},1),3!==t[1]})),v=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var t=new u(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));g("set",(function(t){p(this);var e=a(arguments.length>1?arguments[1]:void 0,1),n=c(t);if(m)return r(f,this,n,e);var i=this.length,o=s(n),l=0;if(o+e>i)throw new h("Wrong length");for(;l<o;)this[e+l]=n[l++]}),!m||v)},3356:function(t,e,n){"use strict";var i=n(9037),r=n(6576),o=n(3689),s=n(509),a=n(382),c=n(4872),l=n(7365),h=n(7298),u=n(3615),d=n(7922),f=c.aTypedArray,p=c.exportTypedArrayMethod,g=i.Uint16Array,m=g&&r(g.prototype.sort),v=!(!m||o((function(){m(new g(2),null)}))&&o((function(){m(new g(2),{})}))),y=!!m&&!o((function(){if(u)return u<74;if(l)return l<67;if(h)return!0;if(d)return d<602;var t,e,n=new g(516),i=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,i[t]=t-2*e+3;for(m(n,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==i[t])return!0}));p("sort",(function(t){return void 0!==t&&s(t),y?m(this,t):a(f(this),function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t))}),!y||v)},8832:function(t,e,n){"use strict";n(5398)},8320:function(t,e,n){"use strict";n(6532)},6265:function(t,e,n){"use strict";var i=n(9037),r=n(6338),o=n(3265),s=n(752),a=n(5773),c=n(4201),l=c("iterator"),h=c("toStringTag"),u=s.values,d=function(t,e){if(t){if(t[l]!==u)try{a(t,l,u)}catch(e){t[l]=u}if(t[h]||a(t,h,e),r[e])for(var n in s)if(t[n]!==s[n])try{a(t,n,s[n])}catch(e){t[n]=s[n]}}};for(var f in r)d(i[f]&&i[f].prototype,f);d(o,"DOMTokenList")},2625:function(t,e,n){"use strict";n(752);var i=n(9989),r=n(9037),o=n(2615),s=n(8844),a=n(7697),c=n(6837),l=n(1880),h=n(2148),u=n(6045),d=n(5997),f=n(974),p=n(618),g=n(767),m=n(9985),v=n(6812),y=n(4071),w=n(926),b=n(5027),A=n(8999),P=n(4327),S=n(5391),C=n(5684),E=n(5185),x=n(1664),D=n(7807),I=n(1500),R=n(4201),T=n(382),F=R("iterator"),_="URLSearchParams",k=_+"Iterator",M=p.set,O=p.getterFor(_),L=p.getterFor(k),N=Object.getOwnPropertyDescriptor,B=function(t){if(!a)return r[t];var e=N(r,t);return e&&e.value},V=B("fetch"),U=B("Request"),H=B("Headers"),j=U&&U.prototype,$=H&&H.prototype,W=r.RegExp,Y=r.TypeError,G=r.decodeURIComponent,K=r.encodeURIComponent,q=s("".charAt),z=s([].join),J=s([].push),Z=s("".replace),X=s([].shift),Q=s([].splice),tt=s("".split),et=s("".slice),nt=/\+/g,it=Array(4),rt=function(t){return it[t-1]||(it[t-1]=W("((?:%[\\da-f]{2}){"+t+"})","gi"))},ot=function(t){try{return G(t)}catch(e){return t}},st=function(t){var e=Z(t,nt," "),n=4;try{return G(e)}catch(t){for(;n;)e=Z(e,rt(n--),ot);return e}},at=/[!'()~]|%20/g,ct={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},lt=function(t){return ct[t]},ht=function(t){return Z(K(t),at,lt)},ut=f((function(t,e){M(this,{type:k,target:O(t).entries,index:0,kind:e})}),_,(function(){var t=L(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=void 0,D(void 0,!0);var i=e[n];switch(t.kind){case"keys":return D(i.key,!1);case"values":return D(i.value,!1)}return D([i.key,i.value],!1)}),!0),dt=function(t){this.entries=[],this.url=null,void 0!==t&&(A(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===q(t,0)?et(t,1):t:P(t)))};dt.prototype={type:_,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,n,i,r,s,a,c,l=this.entries,h=x(t);if(h)for(n=(e=E(t,h)).next;!(i=o(n,e)).done;){if(s=(r=E(b(i.value))).next,(a=o(s,r)).done||(c=o(s,r)).done||!o(s,r).done)throw new Y("Expected sequence with length 2");J(l,{key:P(a.value),value:P(c.value)})}else for(var u in t)v(t,u)&&J(l,{key:u,value:P(t[u])})},parseQuery:function(t){if(t)for(var e,n,i=this.entries,r=tt(t,"&"),o=0;o<r.length;)(e=r[o++]).length&&(n=tt(e,"="),J(i,{key:st(X(n)),value:st(z(n,"="))}))},serialize:function(){for(var t,e=this.entries,n=[],i=0;i<e.length;)t=e[i++],J(n,ht(t.key)+"="+ht(t.value));return z(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ft=function(){g(this,pt);var t=M(this,new dt(arguments.length>0?arguments[0]:void 0));a||(this.size=t.entries.length)},pt=ft.prototype;if(u(pt,{append:function(t,e){var n=O(this);I(arguments.length,2),J(n.entries,{key:P(t),value:P(e)}),a||this.length++,n.updateURL()},delete:function(t){for(var e=O(this),n=I(arguments.length,1),i=e.entries,r=P(t),o=n<2?void 0:arguments[1],s=void 0===o?o:P(o),c=0;c<i.length;){var l=i[c];if(l.key!==r||void 0!==s&&l.value!==s)c++;else if(Q(i,c,1),void 0!==s)break}a||(this.size=i.length),e.updateURL()},get:function(t){var e=O(this).entries;I(arguments.length,1);for(var n=P(t),i=0;i<e.length;i++)if(e[i].key===n)return e[i].value;return null},getAll:function(t){var e=O(this).entries;I(arguments.length,1);for(var n=P(t),i=[],r=0;r<e.length;r++)e[r].key===n&&J(i,e[r].value);return i},has:function(t){for(var e=O(this).entries,n=I(arguments.length,1),i=P(t),r=n<2?void 0:arguments[1],o=void 0===r?r:P(r),s=0;s<e.length;){var a=e[s++];if(a.key===i&&(void 0===o||a.value===o))return!0}return!1},set:function(t,e){var n=O(this);I(arguments.length,1);for(var i,r=n.entries,o=!1,s=P(t),c=P(e),l=0;l<r.length;l++)(i=r[l]).key===s&&(o?Q(r,l--,1):(o=!0,i.value=c));o||J(r,{key:s,value:c}),a||(this.size=r.length),n.updateURL()},sort:function(){var t=O(this);T(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,n=O(this).entries,i=y(t,arguments.length>1?arguments[1]:void 0),r=0;r<n.length;)i((e=n[r++]).value,e.key,this)},keys:function(){return new ut(this,"keys")},values:function(){return new ut(this,"values")},entries:function(){return new ut(this,"entries")}},{enumerable:!0}),l(pt,F,pt.entries,{name:"entries"}),l(pt,"toString",(function(){return O(this).serialize()}),{enumerable:!0}),a&&h(pt,"size",{get:function(){return O(this).entries.length},configurable:!0,enumerable:!0}),d(ft,_),i({global:!0,constructor:!0,forced:!c},{URLSearchParams:ft}),!c&&m(H)){var gt=s($.has),mt=s($.set),vt=function(t){if(A(t)){var e,n=t.body;if(w(n)===_)return e=t.headers?new H(t.headers):new H,gt(e,"content-type")||mt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(t,{body:C(0,P(n)),headers:C(0,e)})}return t};if(m(V)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return V(t,arguments.length>1?vt(arguments[1]):{})}}),m(U)){var yt=function(t){return g(this,j),new U(t,arguments.length>1?vt(arguments[1]):{})};j.constructor=yt,yt.prototype=j,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:yt})}}t.exports={URLSearchParams:ft,getState:O}},9307:function(t,e,n){"use strict";n(2625)},9391:function(t,e,n){"use strict";n(1694);var i,r=n(9989),o=n(7697),s=n(6837),a=n(9037),c=n(4071),l=n(8844),h=n(1880),u=n(2148),d=n(767),f=n(6812),p=n(5394),g=n(1055),m=n(9015),v=n(730).codeAt,y=n(6430),w=n(4327),b=n(5997),A=n(1500),P=n(2625),S=n(618),C=S.set,E=S.getterFor("URL"),x=P.URLSearchParams,D=P.getState,I=a.URL,R=a.TypeError,T=a.parseInt,F=Math.floor,_=Math.pow,k=l("".charAt),M=l(/./.exec),O=l([].join),L=l(1..toString),N=l([].pop),B=l([].push),V=l("".replace),U=l([].shift),H=l("".split),j=l("".slice),$=l("".toLowerCase),W=l([].unshift),Y="Invalid scheme",G="Invalid host",K="Invalid port",q=/[a-z]/i,z=/[\d+-.a-z]/i,J=/\d/,Z=/^0x/i,X=/^[0-7]+$/,Q=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,nt=/[\0\t\n\r #/:<>?@[\\\]^|]/,it=/^[\u0000-\u0020]+/,rt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ot=/[\t\n\r]/g,st=function(t){var e,n,i,r;if("number"==typeof t){for(e=[],n=0;n<4;n++)W(e,t%256),t=F(t/256);return O(e,".")}if("object"==typeof t){for(e="",i=function(t){for(var e=null,n=1,i=null,r=0,o=0;o<8;o++)0!==t[o]?(r>n&&(e=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(e=i,n=r),e}(t),n=0;n<8;n++)r&&0===t[n]||(r&&(r=!1),i===n?(e+=n?":":"::",r=!0):(e+=L(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},at={},ct=p({},at,{" ":1,'"':1,"<":1,">":1,"`":1}),lt=p({},ct,{"#":1,"?":1,"{":1,"}":1}),ht=p({},lt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ut=function(t,e){var n=v(t,0);return n>32&&n<127&&!f(e,t)?t:encodeURIComponent(t)},dt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ft=function(t,e){var n;return 2===t.length&&M(q,k(t,0))&&(":"===(n=k(t,1))||!e&&"|"===n)},pt=function(t){var e;return t.length>1&&ft(j(t,0,2))&&(2===t.length||"/"===(e=k(t,2))||"\\"===e||"?"===e||"#"===e)},gt=function(t){return"."===t||"%2e"===$(t)},mt={},vt={},yt={},wt={},bt={},At={},Pt={},St={},Ct={},Et={},xt={},Dt={},It={},Rt={},Tt={},Ft={},_t={},kt={},Mt={},Ot={},Lt={},Nt=function(t,e,n){var i,r,o,s=w(t);if(e){if(r=this.parse(s))throw new R(r);this.searchParams=null}else{if(void 0!==n&&(i=new Nt(n,!0)),r=this.parse(s,null,i))throw new R(r);(o=D(new x)).bindURL(this),this.searchParams=o}};Nt.prototype={type:"URL",parse:function(t,e,n){var r,o,s,a,c,l=this,h=e||mt,u=0,d="",p=!1,v=!1,y=!1;for(t=w(t),e||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,t=V(t,it,""),t=V(t,rt,"$1")),t=V(t,ot,""),r=g(t);u<=r.length;){switch(o=r[u],h){case mt:if(!o||!M(q,o)){if(e)return Y;h=yt;continue}d+=$(o),h=vt;break;case vt:if(o&&(M(z,o)||"+"===o||"-"===o||"."===o))d+=$(o);else{if(":"!==o){if(e)return Y;d="",h=yt,u=0;continue}if(e&&(l.isSpecial()!==f(dt,d)||"file"===d&&(l.includesCredentials()||null!==l.port)||"file"===l.scheme&&!l.host))return;if(l.scheme=d,e)return void(l.isSpecial()&&dt[l.scheme]===l.port&&(l.port=null));d="","file"===l.scheme?h=Rt:l.isSpecial()&&n&&n.scheme===l.scheme?h=wt:l.isSpecial()?h=St:"/"===r[u+1]?(h=bt,u++):(l.cannotBeABaseURL=!0,B(l.path,""),h=Mt)}break;case yt:if(!n||n.cannotBeABaseURL&&"#"!==o)return Y;if(n.cannotBeABaseURL&&"#"===o){l.scheme=n.scheme,l.path=m(n.path),l.query=n.query,l.fragment="",l.cannotBeABaseURL=!0,h=Lt;break}h="file"===n.scheme?Rt:At;continue;case wt:if("/"!==o||"/"!==r[u+1]){h=At;continue}h=Ct,u++;break;case bt:if("/"===o){h=Et;break}h=kt;continue;case At:if(l.scheme=n.scheme,o===i)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=m(n.path),l.query=n.query;else if("/"===o||"\\"===o&&l.isSpecial())h=Pt;else if("?"===o)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=m(n.path),l.query="",h=Ot;else{if("#"!==o){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=m(n.path),l.path.length--,h=kt;continue}l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=m(n.path),l.query=n.query,l.fragment="",h=Lt}break;case Pt:if(!l.isSpecial()||"/"!==o&&"\\"!==o){if("/"!==o){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,h=kt;continue}h=Et}else h=Ct;break;case St:if(h=Ct,"/"!==o||"/"!==k(d,u+1))continue;u++;break;case Ct:if("/"!==o&&"\\"!==o){h=Et;continue}break;case Et:if("@"===o){p&&(d="%40"+d),p=!0,s=g(d);for(var b=0;b<s.length;b++){var A=s[b];if(":"!==A||y){var P=ut(A,ht);y?l.password+=P:l.username+=P}else y=!0}d=""}else if(o===i||"/"===o||"?"===o||"#"===o||"\\"===o&&l.isSpecial()){if(p&&""===d)return"Invalid authority";u-=g(d).length+1,d="",h=xt}else d+=o;break;case xt:case Dt:if(e&&"file"===l.scheme){h=Ft;continue}if(":"!==o||v){if(o===i||"/"===o||"?"===o||"#"===o||"\\"===o&&l.isSpecial()){if(l.isSpecial()&&""===d)return G;if(e&&""===d&&(l.includesCredentials()||null!==l.port))return;if(a=l.parseHost(d))return a;if(d="",h=_t,e)return;continue}"["===o?v=!0:"]"===o&&(v=!1),d+=o}else{if(""===d)return G;if(a=l.parseHost(d))return a;if(d="",h=It,e===Dt)return}break;case It:if(!M(J,o)){if(o===i||"/"===o||"?"===o||"#"===o||"\\"===o&&l.isSpecial()||e){if(""!==d){var S=T(d,10);if(S>65535)return K;l.port=l.isSpecial()&&S===dt[l.scheme]?null:S,d=""}if(e)return;h=_t;continue}return K}d+=o;break;case Rt:if(l.scheme="file","/"===o||"\\"===o)h=Tt;else{if(!n||"file"!==n.scheme){h=kt;continue}switch(o){case i:l.host=n.host,l.path=m(n.path),l.query=n.query;break;case"?":l.host=n.host,l.path=m(n.path),l.query="",h=Ot;break;case"#":l.host=n.host,l.path=m(n.path),l.query=n.query,l.fragment="",h=Lt;break;default:pt(O(m(r,u),""))||(l.host=n.host,l.path=m(n.path),l.shortenPath()),h=kt;continue}}break;case Tt:if("/"===o||"\\"===o){h=Ft;break}n&&"file"===n.scheme&&!pt(O(m(r,u),""))&&(ft(n.path[0],!0)?B(l.path,n.path[0]):l.host=n.host),h=kt;continue;case Ft:if(o===i||"/"===o||"\\"===o||"?"===o||"#"===o){if(!e&&ft(d))h=kt;else if(""===d){if(l.host="",e)return;h=_t}else{if(a=l.parseHost(d))return a;if("localhost"===l.host&&(l.host=""),e)return;d="",h=_t}continue}d+=o;break;case _t:if(l.isSpecial()){if(h=kt,"/"!==o&&"\\"!==o)continue}else if(e||"?"!==o)if(e||"#"!==o){if(o!==i&&(h=kt,"/"!==o))continue}else l.fragment="",h=Lt;else l.query="",h=Ot;break;case kt:if(o===i||"/"===o||"\\"===o&&l.isSpecial()||!e&&("?"===o||"#"===o)){if(".."===(c=$(c=d))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(l.shortenPath(),"/"===o||"\\"===o&&l.isSpecial()||B(l.path,"")):gt(d)?"/"===o||"\\"===o&&l.isSpecial()||B(l.path,""):("file"===l.scheme&&!l.path.length&&ft(d)&&(l.host&&(l.host=""),d=k(d,0)+":"),B(l.path,d)),d="","file"===l.scheme&&(o===i||"?"===o||"#"===o))for(;l.path.length>1&&""===l.path[0];)U(l.path);"?"===o?(l.query="",h=Ot):"#"===o&&(l.fragment="",h=Lt)}else d+=ut(o,lt);break;case Mt:"?"===o?(l.query="",h=Ot):"#"===o?(l.fragment="",h=Lt):o!==i&&(l.path[0]+=ut(o,at));break;case Ot:e||"#"!==o?o!==i&&("'"===o&&l.isSpecial()?l.query+="%27":l.query+="#"===o?"%23":ut(o,at)):(l.fragment="",h=Lt);break;case Lt:o!==i&&(l.fragment+=ut(o,ct))}u++}},parseHost:function(t){var e,n,i;if("["===k(t,0)){if("]"!==k(t,t.length-1))return G;if(e=function(t){var e,n,i,r,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,h=null,u=0,d=function(){return k(t,u)};if(":"===d()){if(":"!==k(t,1))return;u+=2,h=++l}for(;d();){if(8===l)return;if(":"!==d()){for(e=n=0;n<4&&M(tt,d());)e=16*e+T(d(),16),u++,n++;if("."===d()){if(0===n)return;if(u-=n,l>6)return;for(i=0;d();){if(r=null,i>0){if(!("."===d()&&i<4))return;u++}if(!M(J,d()))return;for(;M(J,d());){if(o=T(d(),10),null===r)r=o;else{if(0===r)return;r=10*r+o}if(r>255)return;u++}c[l]=256*c[l]+r,2!=++i&&4!==i||l++}if(4!==i)return;break}if(":"===d()){if(u++,!d())return}else if(d())return;c[l++]=e}else{if(null!==h)return;u++,h=++l}}if(null!==h)for(s=l-h,l=7;0!==l&&s>0;)a=c[l],c[l--]=c[h+s-1],c[h+--s]=a;else if(8!==l)return;return c}(j(t,1,-1)),!e)return G;this.host=e}else if(this.isSpecial()){if(t=y(t),M(et,t))return G;if(e=function(t){var e,n,i,r,o,s,a,c=H(t,".");if(c.length&&""===c[c.length-1]&&c.length--,(e=c.length)>4)return t;for(n=[],i=0;i<e;i++){if(""===(r=c[i]))return t;if(o=10,r.length>1&&"0"===k(r,0)&&(o=M(Z,r)?16:8,r=j(r,8===o?1:2)),""===r)s=0;else{if(!M(10===o?Q:8===o?X:tt,r))return t;s=T(r,o)}B(n,s)}for(i=0;i<e;i++)if(s=n[i],i===e-1){if(s>=_(256,5-e))return null}else if(s>255)return null;for(a=N(n),i=0;i<n.length;i++)a+=n[i]*_(256,3-i);return a}(t),null===e)return G;this.host=e}else{if(M(nt,t))return G;for(e="",n=g(t),i=0;i<n.length;i++)e+=ut(n[i],at);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return f(dt,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&ft(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,i=t.password,r=t.host,o=t.port,s=t.path,a=t.query,c=t.fragment,l=e+":";return null!==r?(l+="//",t.includesCredentials()&&(l+=n+(i?":"+i:"")+"@"),l+=st(r),null!==o&&(l+=":"+o)):"file"===e&&(l+="//"),l+=t.cannotBeABaseURL?s[0]:s.length?"/"+O(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},setHref:function(t){var e=this.parse(t);if(e)throw new R(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new Bt(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+st(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(w(t)+":",mt)},getUsername:function(){return this.username},setUsername:function(t){var e=g(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=ut(e[n],ht)}},getPassword:function(){return this.password},setPassword:function(t){var e=g(w(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=ut(e[n],ht)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?st(t):st(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,xt)},getHostname:function(){var t=this.host;return null===t?"":st(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Dt)},getPort:function(){var t=this.port;return null===t?"":w(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=w(t))?this.port=null:this.parse(t,It))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+O(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,_t))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=w(t))?this.query=null:("?"===k(t,0)&&(t=j(t,1)),this.query="",this.parse(t,Ot)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=w(t))?("#"===k(t,0)&&(t=j(t,1)),this.fragment="",this.parse(t,Lt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Bt=function(t){var e=d(this,Vt),n=A(arguments.length,1)>1?arguments[1]:void 0,i=C(e,new Nt(t,!1,n));o||(e.href=i.serialize(),e.origin=i.getOrigin(),e.protocol=i.getProtocol(),e.username=i.getUsername(),e.password=i.getPassword(),e.host=i.getHost(),e.hostname=i.getHostname(),e.port=i.getPort(),e.pathname=i.getPathname(),e.search=i.getSearch(),e.searchParams=i.getSearchParams(),e.hash=i.getHash())},Vt=Bt.prototype,Ut=function(t,e){return{get:function(){return E(this)[t]()},set:e&&function(t){return E(this)[e](t)},configurable:!0,enumerable:!0}};if(o&&(u(Vt,"href",Ut("serialize","setHref")),u(Vt,"origin",Ut("getOrigin")),u(Vt,"protocol",Ut("getProtocol","setProtocol")),u(Vt,"username",Ut("getUsername","setUsername")),u(Vt,"password",Ut("getPassword","setPassword")),u(Vt,"host",Ut("getHost","setHost")),u(Vt,"hostname",Ut("getHostname","setHostname")),u(Vt,"port",Ut("getPort","setPort")),u(Vt,"pathname",Ut("getPathname","setPathname")),u(Vt,"search",Ut("getSearch","setSearch")),u(Vt,"searchParams",Ut("getSearchParams")),u(Vt,"hash",Ut("getHash","setHash"))),h(Vt,"toJSON",(function(){return E(this).serialize()}),{enumerable:!0}),h(Vt,"toString",(function(){return E(this).serialize()}),{enumerable:!0}),I){var Ht=I.createObjectURL,jt=I.revokeObjectURL;Ht&&h(Bt,"createObjectURL",c(Ht,I)),jt&&h(Bt,"revokeObjectURL",c(jt,I))}b(Bt,"URL"),r({global:!0,constructor:!0,forced:!s,sham:!o},{URL:Bt})},8730:function(t,e,n){"use strict";n(9391)},7326:function(t,e,n){"use strict";function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,{Z:function(){return i}})},4578:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});var i=n(9611);function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,(0,i.Z)(t,e)}},9611:function(t,e,n){"use strict";function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}n.d(e,{Z:function(){return i}})},5785:function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,{Z:function(){return r}})}},g={};function m(t){var e=g[t];if(void 0!==e)return e.exports;var n=g[t]={exports:{}};return p[t].call(n.exports,n,n.exports,m),n.exports}m.m=p,m.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return m.d(e,{a:e}),e},m.d=function(t,e){for(var n in e)m.o(e,n)&&!m.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},m.f={},m.e=function(t){return Promise.all(Object.keys(m.f).reduce((function(e,n){return m.f[n](t,e),e}),[]))},m.u=function(t){return"web-pdf-sr.js"},m.miniCssF=function(t){},m.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),m.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},d={},f="PDFViewCtrl:",m.l=function(t,e,n,i){if(d[t])d[t].push(e);else{var r,o;if(void 0!==n)for(var s=document.getElementsByTagName("script"),a=0;a<s.length;a++){var c=s[a];if(c.getAttribute("src")==t||c.getAttribute("data-webpack")==f+n){r=c;break}}r||(o=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,m.nc&&r.setAttribute("nonce",m.nc),r.setAttribute("data-webpack",f+n),r.src=t),d[t]=[e];var l=function(e,n){r.onerror=r.onload=null,clearTimeout(h);var i=d[t];if(delete d[t],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach((function(t){return t(n)})),e)return e(n)},h=setTimeout(l.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=l.bind(null,r.onerror),r.onload=l.bind(null,r.onload),o&&document.head.appendChild(r)}},m.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){var t;m.g.importScripts&&(t=m.g.location+"");var e=m.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),m.p=t}(),function(){var t={657:0};m.f.j=function(e,n){var i=m.o(t,e)?t[e]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise((function(n,r){i=t[e]=[n,r]}));n.push(i[2]=r);var o=m.p+m.u(e),s=new Error;m.l(o,(function(n){if(m.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",s.name="ChunkLoadError",s.type=r,s.request=o,i[1](s)}}),"chunk-"+e,e)}};var e=function(e,n){var i,r,o=n[0],s=n[1],a=n[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in s)m.o(s,i)&&(m.m[i]=s[i]);if(a)a(m)}for(e&&e(n);c<o.length;c++)r=o[c],m.o(t,r)&&t[r]&&t[r][0](),t[r]=0},n=self.webpackChunkPDFViewCtrl=self.webpackChunkPDFViewCtrl||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var v={};return function(){"use strict";m.r(v),m.d(v,{ActivationGroup:function(){return TC},AnnotComponent:function(){return Br},AnnotationApRenderer:function(){return Ca},AnnotationAuthorityManager:function(){return zb},BrowserInfo:function(){return _.BrowserInfo},CalloutShape:function(){return vu},CaretComponent:function(){return Fh},CircleComponent:function(){return Dl},CombindForms:function(){return sC},Consts:function(){return st},CustomScrollWrap:function(){return wS},Deps:function(){return pC},DeviceInfo:function(){return _.DeviceInfo},DivScrollWrap:function(){return fC},DocCustomRender:function(){return Po},Events:function(){return nt},FakeCircleAnnotation:function(){return lC},FakeSquareAnnotation:function(){return cC},FileAttachmentComponent:function(){return Ih},FontUtil:function(){return a},FormRender:function(){return Io},FreeTextBoxComponent:function(){return Ou},FreeTextCalloutComponent:function(){return _u},FreeTextComponent:function(){return hu},FreeTextTypeWritterComponent:function(){return fu},HighlightComponent:function(){return yc},HtmlUtil:function(){return o},IContextMenu:function(){return Mm},IStateHandler:function(){return Zo},IViewMode:function(){return lo},InkComponent:function(){return Bh},KeyboardUtils:function(){return _.KeyboardUtils},LineComponent:function(){return $c},LinkAnnotComponent:function(){return Sl},LocalCanvasApRenderer:function(){return fc},Log:function(){return wC},MarkupAnnotComponent:function(){return ka},Matrix:function(){return M},NoteComponent:function(){return Eh},PDF:function(){return EC},PDFDocRendering:function(){return Ao},PDFPageRendering:function(){return H},PDFViewer:function(){return bP},PDFViewerRendering:function(){return T},PageCustomRender:function(){return j},PolyLineComponent:function(){return tl},PolygonCloudAnnotComponent:function(){return Qh},PolygonComponent:function(){return hl},PropertiesControl:function(){return va},RetryPasswordComponent:function(){return Ks},STATE_HANDLER_NAMES:function(){return i},ScreenComponent:function(){return tf},ScrollWrap:function(){return zo},ShapeControl:function(){return sc},SignatureUtil:function(){return d},SnapshotServer:function(){return bm},SoundComponent:function(){return ff},SquareComponent:function(){return kh},SquigglyComponent:function(){return Cc},StampComponent:function(){return Oh},StrikeOutComponent:function(){return bc},StrikeOutTextEditComponent:function(){return ef},TextMarkupAnnotComponent:function(){return dc},TileJREngineApRenderer:function(){return xa},UnderlineComponent:function(){return Pc},UserPermission:function(){return So},ViewerEvents:function(){return dC},_internal:function(){return FC},collab:function(){return IC},commons:function(){return _},constants:function(){return xC},creation:function(){return yC},interfaces:function(){return SC},keyboard:function(){return DC},overlayComparison:function(){return mC},printer:function(){return RC},readAloud:function(){return f},renderers:function(){return _C},shared:function(){return vC},stateHandler:function(){return bC},storage:function(){return g},ui:function(){return PC},vendors:function(){return gC},viewMode:function(){return AC},viewerui:function(){return CC}});var t={};m.r(t),m.d(t,{Activatable:function(){return W},ActivationGroup:function(){return Y},ActivationManager:function(){return G}});var e={};m.r(e),m.d(e,{Action_Trigger:function(){return Ht},Action_Type:function(){return At},Additional_Permission:function(){return ft},Alignment:function(){return wt},Border_Style:function(){return gt},Box_Type:function(){return $t},Calc_Margin_Mode:function(){return jt},CornerMarkStyle:function(){return ee},Ending_Style:function(){return yt},Error_Code:function(){return dt},FileAttachment_Icon:function(){return mt},File_Type:function(){return Ct},FillSignType:function(){return Qt},Flatten_Option:function(){return Et},Font_CIDCharset:function(){return qt},Font_Charset:function(){return Kt},Font_Descriptor_Flags:function(){return Bt},Font_StandardID:function(){return Yt},Font_Style:function(){return pt},Font_Styles:function(){return Gt},Graphics_FillMode:function(){return zt},Graphics_ObjectType:function(){return Jt},Highlight_Mode:function(){return Pt},MK_Properties:function(){return Zt},NameTreeType:function(){return te},NewWindowFlag:function(){return ie},Note_Icon:function(){return vt},Point_Type:function(){return bt},PosType:function(){return Xt},Position:function(){return xt},Range_Filter:function(){return kt},Relationship:function(){return St},Rendering_Content:function(){return Mt},Rendering_Usage:function(){return Ot},Rotation:function(){return Rt},Rotation_Degree:function(){return Tt},STAMP_TEXT_TYPE:function(){return ne},Saving_Flag:function(){return _t},Search_Flag:function(){return Ft},Signature_Ap_Flags:function(){return Ut},Signature_State:function(){return Vt},Standard_Font:function(){return It},Text_Mode:function(){return Wt},Watermark_Flag:function(){return Dt},date_Format:function(){return Lt},page_Number_Format:function(){return Nt}});var n={};m.r(n),m.d(n,{allIsSpace:function(){return be},debounce:function(){return we},getQuadPointsFromRect:function(){return ye},normalizeQuadPoints:function(){return ve},verifyRect:function(){return Ae}});var i={};m.r(i),m.d(i,{STATE_HANDLER_CHECK_THE_SEARCH:function(){return Te},STATE_HANDLER_CREATE_AREA:function(){return We},STATE_HANDLER_CREATE_AREA_HIGHLIGHT:function(){return Me},STATE_HANDLER_CREATE_ARROW:function(){return _e},STATE_HANDLER_CREATE_ARTICLE_BUTTON:function(){return An},STATE_HANDLER_CREATE_CARET:function(){return Fe},STATE_HANDLER_CREATE_CIRCLE:function(){return Oe},STATE_HANDLER_CREATE_CIRCLE_AREA:function(){return Ye},STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT:function(){return ke},STATE_HANDLER_CREATE_CROP_PAGES:function(){return mn},STATE_HANDLER_CREATE_DISTANCE:function(){return je},STATE_HANDLER_CREATE_EDIT_IMAGE:function(){return Ve},STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON:function(){return wn},STATE_HANDLER_CREATE_FIELD_SIGNATURE:function(){return yn},STATE_HANDLER_CREATE_FIELD_TEXT:function(){return vn},STATE_HANDLER_CREATE_FILE_ATTACHMENT:function(){return Le},STATE_HANDLER_CREATE_FREETEXT_BOX:function(){return pn},STATE_HANDLER_CREATE_FREETEXT_CALLOUT:function(){return fn},STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER:function(){return dn},STATE_HANDLER_CREATE_HIGHLIGHT:function(){return Ne},STATE_HANDLER_CREATE_IMAGE:function(){return Be},STATE_HANDLER_CREATE_LINE:function(){return He},STATE_HANDLER_CREATE_LINK:function(){return Ue},STATE_HANDLER_CREATE_PENCIL:function(){return Ge},STATE_HANDLER_CREATE_PERIMETER:function(){return $e},STATE_HANDLER_CREATE_POLYGON:function(){return qe},STATE_HANDLER_CREATE_POLYGON_CLOUD:function(){return Ke},STATE_HANDLER_CREATE_POLYLINE:function(){return ze},STATE_HANDLER_CREATE_RADIO_BUTTON:function(){return bn},STATE_HANDLER_CREATE_REPLACE:function(){return Je},STATE_HANDLER_CREATE_SQUARE:function(){return Ze},STATE_HANDLER_CREATE_SQUARE_CROP:function(){return Xe},STATE_HANDLER_CREATE_SQUIGGLY:function(){return Qe},STATE_HANDLER_CREATE_STAMP:function(){return tn},STATE_HANDLER_CREATE_STRIKE_OUT:function(){return en},STATE_HANDLER_CREATE_TEXT:function(){return nn},STATE_HANDLER_CREATE_UNDERLINE:function(){return rn},STATE_HANDLER_ERASER:function(){return sn},STATE_HANDLER_HAND:function(){return Re},STATE_HANDLER_LOUPE:function(){return an},STATE_HANDLER_MARQUEE:function(){return on},STATE_HANDLER_SELECT_ANNOTATION:function(){return un},STATE_HANDLER_SELECT_TEXT:function(){return hn},STATE_HANDLER_SELECT_TEXT_ANNOTATION:function(){return cn},STATE_HANDLER_SELECT_TEXT_IMAGE:function(){return ln},STATE_HANDLER_SNAPSHOT_TOOL:function(){return gn},StateNameAnnotTypeMap:function(){return Pn},StateNameFieldTypeMap:function(){return Sn}});var r={};m.r(r),m.d(r,{CENTIMETER:function(){return Un},CUSTOM:function(){return kn},FOOT:function(){return Ln},INCH:function(){return _n},KILOMETER:function(){return Bn},METER:function(){return Vn},MILE:function(){return Mn},MILLIMETER:function(){return Hn},PICA:function(){return jn},PIXEL_HORIZONTAL:function(){return $n},PIXEL_VERTICAL:function(){return Wn},POINT:function(){return On},YARD:function(){return Nn},getScaleByUnit:function(){return Kn},getUnitByName:function(){return Gn}});var o={};m.r(o),m.d(o,{html2Escape:function(){return hd},htmlCharacter2Entity:function(){return ud},jquerySelector2Escape:function(){return dd}});var s={};m.r(s),m.d(s,{arrayBufferToBase64:function(){return Ly},base64ToArrayBuffer:function(){return Ny},formatFileLastModified:function(){return My},formatFileSize:function(){return ky},isFDFFile:function(){return Fy},isJSONFile:function(){return Ty},isXFDFFile:function(){return _y},removeWhiteBgFromBase64:function(){return Oy}});var a={};m.r(a),m.d(a,{AdditionalFamilies:function(){return Kw},BaseFontFamilies:function(){return Yw},BaseFontFamiliesCN:function(){return Gw},FontFamilies:function(){return Ww},FoxitFontMap:function(){return $w},extensionFontFamilies:function(){return zw},getDefaultName:function(){return Jw},mapFontName2StdID:function(){return Hw},mapStdID2FontName:function(){return jw},standardFontFamilies:function(){return qw},stdFontMap:function(){return Uw}});var c={};m.r(c),m.d(c,{isAudioFile:function(){return HP},isBMP:function(){return zP},isFDF:function(){return ZP},isGIF:function(){return qP},isImageFile:function(){return YP},isJPEG:function(){return GP},isPDF:function(){return RP},isPDFFile:function(){return IP},isPNG:function(){return KP},isPlainText:function(){return eS},isSVG:function(){return JP},isTheoraCodec:function(){return NP},isValidMP3:function(){return jP},isValidMP4:function(){return MP},isValidOGGAudio:function(){return $P},isValidOGGVideo:function(){return LP},isValidWebM:function(){return OP},isVideoFile:function(){return TP},isVorbisCodec:function(){return WP},isXDP:function(){return XP},matchFileHead:function(){return DP},supportsH264Video:function(){return _P},supportsMP3:function(){return VP},supportsOGGAudio:function(){return UP},supportsOGGVideo:function(){return kP}});var l={};m.r(l),m.d(l,{BorderStyle:function(){return nS},SelectionEventType:function(){return iS},Selections:function(){return oS},createAreaLimitationReducer:function(){return rS}});var h={};m.r(h),m.d(h,{convertPermissionToUIData:function(){return aS},convertUIDataToPermission:function(){return cS},getInputOwnerPwd:function(){return fS},getPermissionDefaultUIData:function(){return sS},getPwdPopupLatestUIData:function(){return hS},requestOwnerPassword:function(){return vS},setCertificateAndPermission:function(){return gS},setInputOwnerPwd:function(){return pS},setPasswordAndPermission:function(){return mS},setPwdPopupLatestUIData:function(){return uS}});var u={};m.r(u),m.d(u,{Eraser:function(){return CS},Point:function(){return AS},PointType:function(){return yS}});var d={};m.r(d),m.d(d,{addFATLAndEUTLListToCertificateList:function(){return US},addTrustedCert:function(){return OS},getFATLAndEUTLList:function(){return HS},getSignatureFieldFromPDFDoc:function(){return xS},getTrustedCertificateList:function(){return VS},getTrustedCertificateListDb:function(){return MS},hasCertifySignatureInPDF:function(){return DS},hasSignedSignatureInPDF:function(){return IS},removeTrustedCert:function(){return LS},removeTrustedCerts:function(){return NS},verifySignatureUtil:function(){return jS}});var f={};m.r(f),m.d(f,{AbstractPDFTextToSpeechSynthesis:function(){return nA},PDFTextToSpeechSynthesisStatus:function(){return tA},ReadAloudService:function(){return hA},Store:function(){return Qb}});var p={};m.r(p),m.d(p,{FileFormat:function(){return c},SecurityUtils:function(){return h},file:function(){return s},pageRangeTwoDimensionToOne:function(){return so}});var g={};function y(){return y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},y.apply(this,arguments)}m.r(g),m.d(g,{IndexedDBStorageDriver:function(){return sP},LocalStorageDriver:function(){return uC},StorageFeature:function(){return Qn}});var w=m(5785);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function A(t){var e=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==b(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===b(e)?e:String(e)}function P(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,A(i.key),i)}}function S(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var C=m(7326),E=m(4578),x=(m(3964),m(752),m(6265),m(4043),m(2003),m(278),m(6409),m(8730),m(9307),m(5137),m(9976),m(3356),m(2795),m(3383),m(2047)),D=m.n(x),I=m(5680),R=m.n(I);var T=function(){function t(t,e){this.$ui=D()(t),this.pdfViewerRender=e,this.pdfViewer=e.pdfViewer}var e=t.prototype;return e.rendering=function(){this.closeLoadingFn=this.pdfViewer.viewerUI.loading(this.$ui.get(0))},e.rendered=function(){this.closeLoadingFn&&this.closeLoadingFn()},t}(),F='<div class="fv__pdf-view-mode-item"> <div class="fv__pdf-page-layout"> <div class="fv__pdf-page-rendering" style="position:absolute;width:100%;z-index:1000"></div> <div class="fv__pdf-custom-page-container"></div> <div class="fv__pdf-page-container"> </div> <div class="fv__pdf-page-annots-container"></div> <div class="fv__pdf-page-customs-container"></div> <div class="fv__pdf-page-handler-container"></div> </div> </div>',_=m(3889);let k=function(){function t(t=1,e=0,n=0,i=1,r=0,o=0){if("function"==typeof t.transformRect){let s=t;t=s.a,e=s.b,n=s.c,i=s.d,r=s.e,o=s.f}else if(Array.isArray(t)){let s=t;t=s[0],e=s[1],n=s[2],i=s[3],r=s[4],o=s[5]}this.a=t,this.b=e,this.c=n,this.d=i,this.e=r,this.f=o}t.Concat2mt=function(e,n){return new t(e.a*n.a+e.b*n.c,e.a*n.b+e.b*n.d,e.c*n.a+e.d*n.c,e.c*n.b+e.d*n.d,e.e*n.a+e.f*n.c+n.e,e.e*n.b+e.f*n.d+n.f)};var e=t.prototype;return e.set=function(t,e,n,i,r,o){this.a=t,this.b=e,this.c=n,this.d=i,this.e=r,this.f=o},e.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0},e.reverse=function(e=this){let n=e.a*e.d-e.b*e.c;if(0==n)return e;let i=-n;return new t(e.d/n,e.b/i,e.c/i,e.a/n,(e.c*e.f-e.d*e.e)/n,(e.a*e.f-e.b*e.e)/i)},e.setReverse=function(t){let e=this.reverse(t);this.set(e.a,e.b,e.c,e.d,e.e,e.f)},e.rotate=function(e,n){let i,r=Math.cos(e),o=Math.sin(e),s=new t(r,o,-o,r,0,0);i=n?t.Concat2mt(s,this):t.Concat2mt(this,s),this.set(i.a,i.b,i.c,i.d,i.e,i.f)},e.rotateAt=function(t,e,n,i){this.translate(t,e,i),this.rotate(n,i),this.translate(-t,-e,i)},e.translate=function(t,e,n){n?(this.e+=t*this.a+e*this.c,this.f+=e*this.d+t*this.b):(this.e+=t,this.f+=e)},e.concat=function(e,n,i,r,o,s,a){let c,l;e instanceof t?(c=e,a=n):c=new t(e,n,i,r,o,s),l=a?t.Concat2mt(c,this):t.Concat2mt(this,c),this.set(l.a,l.b,l.c,l.d,l.e,l.f)},e.is90Rotated=function(){let t=1e3*this.a;t<0&&(t*=-1);let e=1e3*this.d;e<0&&(e*=-1);let n=this.b;n<0&&(n*=-1);let i=this.c;return i<0&&(i*=-1),t<n&&e<i},e.isScaled=function(){let t=1e3*this.b;t<0&&(t*=-1);let e=1e3*this.c;e<0&&(e*=-1);let n=this.a;n<0&&(n*=-1);let i=this.d;return i<0&&(i*=-1),t<n&&e<i},e.getA=function(){return this.a},e.getB=function(){return this.b},e.getC=function(){return this.c},e.getD=function(){return this.d},e.getE=function(){return this.e},e.getF=function(){return this.f},e.scale=function(t,e,n){this.a*=t,this.d*=e,n?(this.b*=t,this.c*=e):(this.b*=e,this.c*=t,this.e*=t,this.f*=e)},e.transformXDistance=function(t){let e=this.a*t,n=this.b*t;return Math.sqrt(e*e+n*n)},e.transformYDistance=function(t){let e=this.c*t,n=this.d*t;return Math.sqrt(e*e+n*n)},e.transformDistance=function(t,e){let n=this.a*t+this.c*e,i=this.b*t+this.d*e;return Math.sqrt(n*n+i*i)},e.transformPoint=function(t,e){return[this.a*t+this.c*e+this.e,this.b*t+this.d*e+this.f]},e.transformRect=function(t,e,n,i){let r,o=[t,t,n,n],s=[e,i,e,i];for(let t=0;t<4;t++)r=this.transformPoint(o[t],s[t]),o[t]=r[0],s[t]=r[1];let a=[o[0],o[0],s[0],s[0]];for(let t=1;t<4;t++)a[0]>o[t]&&(a[0]=o[t]),a[1]<o[t]&&(a[1]=o[t]),a[2]>s[t]&&(a[2]=s[t]),a[3]<s[t]&&(a[3]=s[t]);return[a[0],a[2],a[1],a[3]]},e.getXUnit=function(){let t=this.a,e=this.b;return 0===e?Math.abs(t):0===t?Math.abs(e):Math.sqrt(t*t+e*e)},e.getYUnit=function(){let t=this.c,e=this.d;return 0===t?Math.abs(e):0===e?Math.abs(t):Math.sqrt(t*t+e*e)},e.getUnitRect=function(){return this.transformRect(0,0,1,1)},e.matchRect=function(t,e){let n=e[0]-e[2];this.a=Math.abs(n)<.001?1:(t[0]-t[2])/n,n=e[3]-e[1],this.d=Math.abs(n)<.001?1:(t[3]-t[1])/n,this.e=t[0]-e[0]*this.a,this.f=t[3]-e[3]*this.d,this.b=0,this.c=0},e.getAngle=function(){return Math.atan2(this.b,this.a)},e.toArray=function(){return[this.a,this.b,this.c,this.d,this.e,this.f]},t}();var M=k;let O,L=function(){function t(t){(0,_.assertThat)(Array.isArray(t),"Illegal Matrix values, it should be an array! But actual: "+t),(0,_.assertThat)(16===t.length,"Incorrect matrix values size, it must be 16!"),this.values=t,this.cols=Math.sqrt(t.length)}var e=t.prototype;return e.multiVec4=function(t,e,n,i=1){return[this.getAt(0,0)*t+this.getAt(0,1)*e+this.getAt(0,2)*n+this.getAt(0,3)*i,this.getAt(1,0)*t+this.getAt(1,1)*e+this.getAt(1,2)*n+this.getAt(1,3)*i,this.getAt(2,0)*t+this.getAt(2,1)*e+this.getAt(2,2)*n+this.getAt(2,3)*i,this.getAt(3,0)*t+this.getAt(3,1)*e+this.getAt(3,2)*n+this.getAt(3,3)*i]},e.getAt=function(t,e){const n=t*this.cols+e;return(0,_.assertThat)(n<this.values.length,`Cannot access value at (${t},${e}), it out bound of this matrix!`),this.values[n]},t}(),N=function(){function t(t,e,n=0,i=1){this.a=t,this.b=e,this.c=n,this.d=i}var e=t.prototype;return e.transform=function(e){const[n,i,r,o]=e.multiVec4(this.a,this.b,this.c,this.d);return new t(n,i,r,o)},e.scale=function(t,e=t,n=e){return this.transform(function(t,e=t,n=e){return new L([t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1])}(t,e,n))},e.rotateZ=function(t){return this.transform(function(t=0){const e=t/180*Math.PI,n=Math.cos(e),i=Math.sin(e);return new L([n,i,0,0,-i,n,0,0,0,0,1,0,0,0,0,1])}(t))},e.translate=function(t,e=0,n=0){return this.transform(function(t,e=0,n=0){return new L([1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1])}(t,e,n))},t}();function B(t){return function(){if(!O){const t=(0,_.getDPI)();O=[t.x,t.y]}return O}()[t]}function V(t,e=0){return t*B(e)/72}function U(t,e,n=1,i=0){const r=new N(t,e,0).scale(n).rotateZ(i);return[Math.round(Math.abs(r.a)),Math.round(Math.abs(r.b))]}var H=function(){function t(t,e){this.$ui=D()(t),this.pageRender=e,this.docRender=e.docRender,this.viewerRender=this.docRender.viewerRender,this.pdfViewer=this.viewerRender.pdfViewer}var e=t.prototype;return e.rendering=function(){this.closeRenderingFn=this.pdfViewer.viewerUI.loading(this.$ui.get(0))},e.rendered=function(){this.closeRenderingFn&&this.closeRenderingFn()},e.destroy=function(){this.closeRenderingFn&&this.closeRenderingFn(),this.$ui=null},t}();let j=function(){function t(t,e){this.eCustom=t,this.pdfPageRender=e}var e=t.prototype;return e.render=function(t,e){},e.destroy=function(){this.pdfPageRender=null,this.eCustom=null},t}(),W=function(){function t(){this.isActive=!1}var e=t.prototype;return e.active=function(){this.isActive||(this.isActive=!0,this.doActive())},e.unActive=function(){this.isActive&&(this.isActive=!1,this.doDeactive())},t}(),Y=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).activations=[],e}(0,E.Z)(e,t);var n=e.prototype;return n.add=function(t){this.contains(t)||(this.activations.push(t),this.isActive&&!t.isActive&&t.active())},n.remove=function(t){const n=this.activations.indexOf(t);return n<0?this.activations.some(((n,i)=>{if(n instanceof e){const e=n.remove(t);return e&&!n.hasActivations()&&this.activations.splice(i,1),e}return!1})):(this.activations.splice(n,1),this.isActive&&t.isActive&&(t instanceof e?(t.activations||[]).forEach((t=>t.unActive())):t.unActive()),!0)},n.exclude=function(t){return this.activations.filter((e=>!t.contains(e)))},n.contains=function(t){return this.activations.indexOf(t)>-1||this.activations.some((n=>n instanceof e&&n.contains(t)))},n.clear=function(){this.activations.forEach((t=>{t.isActive&&t.unActive()})),this.activations.length=0},n.getAllActivations=function(){return this.activations.reduce(((t,n)=>(n instanceof e?t.push.apply(t,n.getAllActivations()):t.push(n),t)),[])},n.hasActivations=function(){return this.activations.length>0},n.doActive=function(){this.activations.forEach((t=>{t.isActive||t.active()}))},n.doDeactive=function(){this.activations.forEach((t=>{t.isActive&&t.unActive()})),this.activations.length=0},e}(W),G=function(){function t(){}var e=t.prototype;return e.active=function(t){var e,n,i,r;if(this.getCurrentActivatable()!==t){if(this.currentActivatable instanceof Y){if(this.currentActivatable.contains(t))return;if(t instanceof Y){const e=this.currentActivatable.exclude(t);e.length>0?e.forEach((t=>{t.isActive&&t.unActive()})):this.currentActivatable.isActive&&this.currentActivatable.unActive()}else(null===(e=this.currentActivatable)||void 0===e?void 0:e.isActive)&&(null===(n=this.currentActivatable)||void 0===n||n.unActive())}else(null===(i=this.currentActivatable)||void 0===i?void 0:i.isActive)&&(null===(r=this.currentActivatable)||void 0===r||r.unActive());this.currentActivatable=t,t.isActive||t.active()}},e.unActive=function(t){const e=this.getCurrentActivatable();e&&t&&t.isActive&&(e instanceof Y?e.remove(t):e===t&&(t.isActive&&t.unActive(),this.currentActivatable=void 0))},e.unActiveCurrent=function(){var t,e;(null===(t=this.currentActivatable)||void 0===t?void 0:t.isActive)&&(null===(e=this.currentActivatable)||void 0===e||e.unActive()),this.currentActivatable=void 0},e.getCurrentActivatable=function(){var t;if(null===(t=this.currentActivatable)||void 0===t?void 0:t.isActive)return this.currentActivatable},e.getAllCurrentActivatables=function(){const t=this.getCurrentActivatable();return t?t instanceof Y?t.getAllActivations():[t]:[]},e.hasActivations=function(){return null!=this.currentActivatable&&(!(this.currentActivatable instanceof Y)||this.currentActivatable.hasActivations())},e.currentActivableIs=function(t){const e=this.getCurrentActivatable();return e===t||e instanceof Y&&e.contains(t)},e.clear=function(){this.currentActivatable=void 0},t}();var K=function(t){function e(e={name:null,pdfViewer:null}){var n;return(n=t.call(this)||this).disposor=new _.Disposable,n._parent=e,n._parentName=e.name,n.pdfViewer=e.pdfViewer,n.isDestroyed=!1,n}(0,E.Z)(e,t);var n=e.prototype;return n.addDestroyHook=function(...t){var e;(e=this.disposor).addDestroyHook.apply(e,t)},n.destroy=function(){this._parent=null,this.isDestroyed=!0,this.disposor.destroy()},n.parent=function(t){let e=this._parent;return t?e?t===this._parentName?e:e.parent(t):null:e},n.doActive=function(){},n.doDeactive=function(){},e}(W);const q=function(){};var z=function(t){function e(n,i,r,o){var s;return(s=t.call(this,o)||this).name=e.getDefaultName(),s.$ui=n,s.$handler=i,s.$page=o.$ui,s.annot=r,s.component=new(s.pdfViewer.annotManager.get(r))(r,n[0],i[0],(0,C.Z)(s)),s}(0,E.Z)(e,t),e.getDefaultName=function(){return"annotRender"};var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.annot=null,this.component.destroy(),this.component=null},n.updateSize=function(t=this.scale,e=this.rotate){return this.component.updateSize(t,e)},n.render=function(t=this.scale,e=this.rotate,n){if(this.isDestroyed||this.component.isDestroyed)return Promise.resolve();const i=this.scale,r=this.rotate;this.scale=t,this.rotate=e;const o=this.component;if(o.setVisibleRect(n),o.isHidden()){if(o.$ui.addClass("fv__markup-annot-invisible"),!o.isFormControl())return Promise.resolve()}else o.isUIVisible()&&o._showUI();return o.$ui.removeClass("fv__markup-annot-invisible"),o.isUIVisible()?Promise.resolve(o.render(t,e)).then((n=>{const s=i!==t||r!==e;return Promise.resolve(o.afterRender({transformed:s,prescale:i,scale:t,prerotate:r,rotate:e})).then((t=>n))})).catch(q):Promise.resolve()},n.add=function(t=this.scale,e=this.rotate){return this.scale=t,this.rotate=e,Promise.resolve(this.component.add(t,e))},n.active=function(t){return Promise.resolve(this.component.active(t))},n.unActive=function(){return Promise.resolve(this.component.unActive())},n.destroy=function(){this.component.destroy()},n.focus=function(){return this.component.focus(this.$page)},n.blur=function(){return this.component.blur(this.$page)},n.remove=function(t){const e=this.parent();if(t)return e.unActiveAnnot(this.annot).then((()=>{this.component.remove(),e.removeAnnotRender(this)}));let n=this.getRelevanceRenders(),i=[];for(let t=n.length;t--;)i[t]=n[t].remove(!0);return Promise.all(i)},n.showContextMenu=function(t,e){return this.component.showContextMenu(t,e)},n.doubleTapAnnot=function(){this.component.doubleTapAnnot()},n.redraw=function(t,e){if(t)return Promise.resolve(this.component.redraw(e));let n=this.getGroupRenders(),i=[];for(let t=n.length;t--;)i[t]=n[t].redraw(!0,e);return Promise.all(i)},n.getAnnot=function(){return this.getPDFAnnot()},n.getPDFAnnot=function(){return this.annot},n.getGroupRenders=function(){let t=this.annot,e=[t];if(!t.IsGrouped||!t.IsGrouped())return[this];e=[].concat(t.getGroupElements());const n=this.parent().getAnnotRenders();let i=[];for(const t in n){const r=n[t],o=e.indexOf(r.getPDFAnnot());if(o>-1&&(i.push(r),e.splice(o,1)),!e.length)break}return i},n.getRelevanceRenders=function(){let t,e=[],n=this.annot;n=n.getGroupHeader&&n.getGroupHeader()||n,(t=n.getPopup&&n.getPopup())&&e.push(t),function(t,e){J(t,"getReplies",e)}(n,e),Z(n,e),X(n,e);let i=n.isGrouped&&n.isGrouped()?n.getGroupElements():[n];e=e.concat(i);let r=this.parent().getAnnotRenders(),o=[];try{for(const t in r){const n=r[t],i=e.indexOf(n.getPDFAnnot());if(i>-1&&(o.push(n),e.splice(i,1)),!e.length)break}}catch(t){}return o},n.moved=function(t){this.component.moved(),this.component.movedByOther(t)},n.getComponent=function(){return this.component},n.invisibleRender=function(){this.component.invisibleRender()},n.clearCache=function(){this.component.clearCache()},e}(K);function J(t,e,n){if(!t[e])return;let i=t[e](),r=i.length;if(r){n.push.apply(n,i);for(let t=r;t--;){let r=i[t];Z(r,n),X(r,n),J(r,e,n)}}}function Z(t,e){return J(t,"getMarkedStates",e)}function X(t,e){return J(t,"getReviewStates",e)}const Q=()=>!0,tt=(t,e)=>e[t];var et={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReplyAdded:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationReviewStateAnnotAdded:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationMarkedStateAnnotAdded:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationPositionMoved:"annotation-moved-position",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",annotationLoaded:"annotation-loaded",actionUpdated:"action-updated",actionAdd:"action-add",actionAdded:"action-add",actionRemove:"action-remove",actionRemoved:"action-remove",layerVisibleChange:"layer-visible-change",layerVisibleChanged:"layer-visible-change",layerRemoved:"layer-removed",layerMerged:"layer-merged",bookmarkAdded:"bookmark-added",structureBookmarkAdded:"structure-bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageInfoChanged:"page-info-change",pageRotationChange:"page-rotation-change",pageRotationChanged:"page-rotation-change",imageAdded:"image-added",watermarkAdded:"watermark-added",watermarkRemoved:"watermark-removed",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:"doc-password-changed",drmEncryptSuccess:"drm-encrypt-success",drmEncryptSucceeded:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:"remove-password-and-permission",pwdAndPermRemoved:"remove-password-and-permission",securityTypeChanged:"security-type-changed",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",pagesInserted:"import-pages",importPages:"import-pages",documentAttachmentAdd:"document-attachment-add",docAttachmentAdded:"document-attachment-add",documentAttachmentModify:"document-attachment-modify",docAttachmentModified:"document-attachment-modify",documentAttachmentRemove:"document-attachment-remove",docAttachmentRemoved:"document-attachment-remove",applyRedaction:"apply-redaction",redactionApplied:"apply-redaction",removeReviewState:"remove-review-state",reviewStateRemoved:"remove-review-state",removeMarkedState:"remove-marked-state",markedStateRemoved:"remove-marked-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded",COChange:"COChange",COChanged:"COChange",pagesReversed:"pages-reversed",pagesMoved:"pages-moved",pagesRemoved:"pages-removed",pagesRotated:"pages-rotated",pageMeasureScaleRatioChanged:" page-measure-scale-ratio-changed",obtainsPageFromEngine:"obtains-page-from-engine",pagesBoxChange:"pages-box-changed",pagesBoxChanged:"pages-box-changed",pagesLabelChange:"pages-label-change",pagesLabelChanged:"pages-label-change",pagesLabelNeedUpdate:"pages-label-need-change",pagesLabelNeedUpdated:"pages-label-need-change",pagesReplace:"pages-replace",pagesReplaced:"pages-replace",recognitionForm:"recognition-form",removeEmbeddedPageThumbnail:"remove-embedded-page-thumbnail",embeddedPageThumbnailRemoved:"remove-embedded-page-thumbnail",objectStartEdit:"object-start-edit",objectEndEdit:"object-end-edit",objectSelectionChanged:"object-selection-changed",objectAdded:"object-added",objectPropertyChanged:"object-property-changed",paragraphTextOnActivate:"paragraph-text-on-activate",paragraphTextOnDeactivate:"paragraph-text-on-deactivate",paragraphTextEnterEdit:"paragraph-text-enter-edit",paragraphTextExitEdit:"paragraph-text-exit-edit",paragraphTextOnChar:"paragraph-text-on-char",articleThreadAdded:"article-thread-added",articleThreadUpdated:"article-thread-updated",articleThreadRemoved:"article-thread-removed",articleBeadAdded:"article-bead-added",articleBeadRemoved:"article-bead-removed",articleBeadUpdated:"article-bead-updated",articleEnterReadMode:"article-enter-read-mode",articleOutReadMode:"article-out-read-mode",signChinaNoApply:"sign-china-no-apply",signChinaFlowNoApply:"sign-china-flow-no-apply",signChinaLegalNoticeConfirm:"sign-china-legal-notice-confirm",invalidRect:"invalidRect",formReloaded:"formReloaded"};var nt=y({jrLicenseSuccess:"jr-license-success",srLicenseSuccess:"sr-license-success",beforeOpenFile:"before-open-file",openingFile:"opening-file",beforeLoadPDFDoc:"before-load-pdf-document",openFileSuccess:"open-file-success",openFileFailed:"open-file-failed",willCloseDocument:"will-close-document",renderFileSuccess:"render-file-success",renderFileFailed:"render-file-error",beforeRenderPage:"before-render-page",renderPageSuccess:"render-page-success",updateZoomMode:"update-zoom-mode",beforeZoomTo:"before-zoom-to",zoomToSuccess:"zoom-to-success",zoomToFailed:"zoom-to-failed",startChangeViewMode:"start-change-view-mode",changeViewModeSuccess:"change-view-mode-success",changeViewModeFailed:"change-view-mode-failed",pagesLayoutRedrawBegin:"pages-layout-redraw-begin",pageLayoutRedraw:"page-layout-redraw",pagesLayoutRedrawEnd:"pages-layout-redraw-end",copyTextSuccess:"copy-text-success",copyTextFailed:"copy-text-failed",tapPage:"tap-page",tapAnnotation:"tap-annotation",pressPage:"press-page",pressAnnotation:"press-annotation",pressText:"press-text",rightClickPage:"right-click-page",rightClickAnnotation:"right-click-annotation",doubleTapPage:"double-tap-page",doubleTapAnnotation:"double-tap-annotation",activeAnnotationBefore:"active-annotation-before",activeAnnotation:"active-annotation",activeAnnotationAfter:"active-annotation-after",panActiveAnnotation:"pan-active-annotation",doubleTapActiveAnnotation:"double-tap-active-annotation",contextMenuActiveAnnotation:"contextmenu-action-annotation",unActiveAnnotation:"unactive-annotation",updateActiveAnnotation:"update-action-annotation",updateActionAnnotation:"update-action-annotation",removeActiveAnnotationBefore:"remove-action-annotation-before",removeActionAnnotationBefore:"remove-action-annotation-before",removeActiveAnnotationSuccess:"remove-action-annotation-success",removeActionAnnotationSuccess:"remove-action-annotation-success",removeActiveAnnotationFailed:"remove-action-annotation-failed",removeActionAnnotationFailed:"remove-action-annotation-failed",beforeSwitchStateHandler:"before-switch-state-handler",switchStateHandler:"switch-state-handler",deactiveStateHandler:"deactive-state-handler",redactAnnotAllApplyed:"applyed-all-redaction",redactAnnotApplyed:"applyed-redaction",pageNumberChange:"page-number-change",beforeDocumentRotation:"before-document-rotation",afterDocumentRotation:"after-document-rotation",snapModeChanged:"snap-mode-changed",createPageAreaRenderer:"create-page-area-renderer",destroyPageAreaRenderer:"destroy-page-area-renderer",startUpdatePageAreaRenderer:"start-update-page-area-renderer",createSnapshotArea:"create-snapshot-area",updateSnapshotArea:"update-snapshot-area",stabilizedSnapshotArea:"stabilized-snapshot-area",switchPageAreaRenderer:"switch-page-area-renderer",fitWidthResizeViewport:"fit-width-resize-viewport",signatureFieldMouseLButtonDown:"signature-field-Lbutton-down",signatureFieldMouseLButtonUp:"signature-field-LButton-up",signatureFieldMouseEnter:"signature-field-mouse-enter",signatureFieldMouseExit:"signature-field-mouse-exit",visiblePagesRenderCompleted:"completed-render-visible-pages",marqueeZoomIn:"marquee-zoom-in",marqueeZoomOut:"marquee-zoom-out",inkSignAdded:"inkSign-added",inkSignDeleted:"inkSign-deleted",onlineSignAdded:"onlineSign-added",onlineSignDeleted:"onlineSign-deleted",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",customDataAdd:"custom-data-add",customDataImported:"custom-data-imported",customDataRemoved:"custom-data-removed",customDataUpdated:"custom-data-updated",distanceAnnotCreationStart:"distance-creation-start",perimeterAnnotCreationStart:"perimeter-creation-start",updateDistanceAnnot:"update-distance-annot",distanceAnnotCreationEnd:"distance-creation-end",distanceAnnotCreationCancel:"distance-creation-cancel",addEditImage:"add-edit-image",InkImageSelected:"ink-image-selected",OnlineImageSelected:"online-image-selected",checkTheSearch:"check-the-search",activeElementChanged:"active-element-changed",cancelCreatingDistance:"cancel-creating-measurement",completeCreatingDistance:"complete-creating-measurement",eraserSuccess:"eraser-success",addAnnotSuccess:"add-annot-success",cancelAddAnnot:"cancel-add-annot",globalAnnotFlagChanged:"global-annot-flag-changed",toolbarTabsClicked:"toolbar-tabs-clicked",sideBarChanged:"sidebar-changed",showWhatsNew:"show-whats-new",disableScroll:"disable-scroll",enableScroll:"enable-scroll",updateScrollableStatus:"update-scrollable-status",selectText:"select-text",changeEnableJS:"change-enable-js",toggleEngineSr2JrSuccess:"toggle-engine-sr-to-jr-success",iconInited:"iconInited",iconAdded:"iconAdded",iconRemoved:"iconRemoved",annotationPermissionChanged:"annotation-premission-changed",startScrollingPage:"pdfui-start-scrolling-page",scrollingPage:"pdfui-scrolling-page",endScrollingPage:"pdfui-end-scrolling-page",designerAssistantStatusChanged:"form-designer-assistant-status-changed",mouseEnter:"mouse-enter",mouseLeave:"mouse-leave",setFromFieldHighlight:"set_form_field_highlight",AddFontMaps:"set_font_map",thumbnailClicked:"thumbnail-clicked",layerActionActived:"layer-action-actived",redeModeShowSidebar:"rede-mode-show-sidebar",gridToggle:"grid-toggle",snapGridToggle:"snap-grid-toggle",toggleCollaborationMode:"toggleCollaborationMode",findReplaceDialogVisibleChange:"find-replace-dialog-visible-change",showAllComments:"show-all-comments",hideAllComments:"hide-all-comments",focusOnControl:"focus-on-control",blurFromObject:"blur-from-object",documentWillPrint:"document-will-print",documentDidPrint:"document-did-print",documentWillSave:"document-will-save",documentDidSave:"document-did-save",verifyDocSignatureEvent:"verify-doc-signature",verifySignatureEvent:"verify-signature",clearSignatureEvent:"clear-signature",viewSignedVersionDocEvent:"view-signed-version",showFieldPropertiesEvent:"show-field-properties",showSignatureVerifyInfoEvent:"show-signature-tusted-info",compareSignedVersionEvent:"compare-signed-version",showCompareSignedVersionResultEvent:"show-compare-signed-version-result",createInkSignSuccess:"createInkSignSuccess",galleryCreateStamp:"galleryCreateStamp",switchGalleryTabActive:"switchGalleryTabActive",mangeStampInner:"mangeStampInner",tapField:"tap-field",tapGraphicsObject:"tap-graphics-object",spawnPageSuccess:" spawn-page-success",progressChanged:"progress-changed",togglePageContextMenu:"toggle-page-contextmenu"},et);m(7686);let it=function(){},rt=function(){function t(){this.queue=[],this.promise=Promise.resolve()}var e=t.prototype;return e.push=function(t,e=it,n=100){return this.queue.push([t,e]),new Promise(((t,e)=>{setTimeout((()=>this.exec()),n)}))},e.exec=function(){if(this.execIng)return;let t=this.queue.pop();if(t){this.execIng=!0;for(let t=0,e=this.queue.length;t<e;t++)this.queue[t][1]();return this.queue=[],Promise.resolve(t[0]()).catch((()=>{try{return Promise.resolve(t[1]()).catch(it)}catch(t){}})).finally((()=>{this.execIng=!1,setTimeout((()=>{this.exec()}),30)}))}},e.end=function(){this.queue=[]},t}(),ot=function(){function t(){this.executor=new _.QueuedAsyncTaskExecutor}var e=t.prototype;return e.serial=function(t=[]){return this.executor.cancel(),this.executor.waitForCurrentRunningTasks().then((()=>(this.executor.resume(),this.executor.execTasks(t.map((t=>({task:t})))))))},e.push=function(...t){return this.executor.execTasks(t.map((t=>({task:t}))))},e.unshift=function(...t){return this.executor.insert(t.map((t=>({task:t})))),this.executor.waitForCurrentRunningTasks()},e.concat=function(t=[]){return t.forEach((t=>{this.executor.exec(t)})),this.executor.waitForCurrentRunningTasks()},e.exec=function(){return this.executor.waitForCurrentRunningTasks()},e.end=function(){return this.executor.cancel(),this.executor.waitForCurrentRunningTasks()},t}();var st=m(8972),at=(m(7267),m(6244)),ct=m.n(at);const lt=(t,e,n)=>{let i="";if("object"==typeof t&&t.IsValid){if(!t.IsValid())return i;t=function(t){return new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.milliseconds)}(t)}const r=ct()(t);if((e=e||"YYYY-MM-DD HH:mm:ss").indexOf("Z")>=0){n=y({separator:":",prefix:"",suffix:"",showSpace:!0},n);let t=r.format("Z");":"!==n.separator&&(t=t.replace(":",String(n.separator))),""!==n.prefix&&(t=String(n.prefix)+t),""!==n.suffix&&(t+=String(n.suffix)),e=e.replace(/\s+Z+|Z+/g,"");const o=n.showSpace?" ":"";i=r.format(e)+o+t}else i=r.format(e);return i},ht=t=>"D:"+lt(t,"YYYYMMDDHHmmssZ",{separator:"'",showSpace:!1})+"'";var ut=lt;m(5847),m(8320);var dt={success:0,file:1,format:2,password:3,handle:4,certificate:5,unknown:6,invalidLicense:7,param:8,unsupported:9,outOfMemory:10,securityHandler:11,notParsed:12,notFound:13,invalidType:14,conflict:15,unknownState:16,dataNotReady:17,invalidData:18,xFALoadError:19,notLoaded:20,invalidState:21,notCDRM:22,canNotConnectToServer:23,invalidUserToken:24,noRights:25,rightsExpired:26,deviceLimitation:27,canNotRemoveSecurityFromServer:28,canNotGetACL:29,canNotSetACL:30,isAlreadyCPDF:31,isAlreadyCDRM:32,canNotUploadDocInfo:33,canNotUploadCDRMInfo:34,invalidWrapper:35,canNotGetClientID:36,canNotGetUserToken:37,invalidACL:38,invalidClientID:39,OCREngineNotInit:40,diskFull:41,OCRTrialIsEnd:42,filePathNotExist:43,complianceEngineNotInit:44,complianceEngineInvalidUnlockCode:45,complianceEngineInitFailed:46,timeStampServerMgrNotInit:47,LTVVerifyModeNotSet:48,LTVRevocationCallbackNotSet:49,LTVCannotSwitchVersion:50,LTVCannotCheckDTS:51,LTVCannotLoadDSS:52,LTVCannotLoadDTS:53,needSigned:54,complianceResourceFile:55,timeStampServerMgrNoDefaltServer:56,defaultTimeStampServer:57,noConnectedPDFModuleRight:58,noXFAModuleRight:59,noRedactionModuleRight:60,noRMSModuleRight:61,noOCRModuleRight:62,noComparisonModuleRight:63,noComplianceModuleRight:64,noOptimizerModuleRight:65,noConversionModuleRight:66,collaborationSession:1400};const ft={download:1},pt={normal:0,italic:1,bold:2},gt={solid:0,dashed:1,underline:2,beveled:3,inset:4,cloudy:5,noBorder:6},mt={graph:"Graph",pushPin:"PushPin",paperclip:"Paperclip",tag:"Tag"},vt={Check:"Check",Circle:"Circle",Comment:"Comment",Cross:"Cross",Help:"Help",Insert:"Insert",Key:"Key",NewParagraph:"NewParagraph",Note:"Note",Paragraph:"Paragraph",RightArrow:"RightArrow",RightPointer:"RightPointer",Star:"Star",UpArrow:"UpArrow",UpLeftArrow:"UpLeftArrow"},yt={None:0,Square:1,Circle:2,Diamond:3,OpenArrow:4,ClosedArrow:5,Butt:6,ReverseOpenArrow:7,ReverseClosedArrow:8,Slash:9},wt={left:0,center:1,right:2},bt={moveTo:1,lineTo:2,lineToCloseFigure:3,bezierTo:4,bezierToCloseFigure:5},At={goto:"TypeGoto",launch:"TypeLaunch",uri:"TypeURI",named:"TypeNamed",thread:"TypeThread",submitForm:"TypeSubmitForm",resetForm:"TypeResetForm",javaScript:"TypeJavaScript",importData:"TypeImportData",hide:"TypeHide",gotoE:"TypeGoToE"},Pt={none:0,invert:1,outline:2,push:3,toggle:4},St={firstChild:0,lastChild:1,previousSibling:2,nextSibling:3,firstSibling:4,lastSibling:5},Ct={fdf:0,xfdf:1,xml:2,csv:3,txt:4},Et={all:0,field:1,annot:2},xt={topLeft:"TopLeft",topCenter:"TopCenter",topRight:"TopRight",centerLeft:"CenterLeft",center:"Center",centerRight:"CenterRight",bottomLeft:"BottomLeft",bottomCenter:"BottomCenter",bottomRight:"BottomRight"},Dt={asContent:0,asAnnot:1,onTop:2,unprintable:4,display:8},It={courier:0,courierBold:1,courierBoldOblique:2,courierOblique:3,helvetica:4,helveticaBold:5,helveticaBoldOblique:6,helveticaOblique:7,timesRoman:8,timesBold:9,timesBoldItalic:10,timesItalic:11,symbol:12,zapfDingbats:13},Rt={rotation0:0,rotation1:1,rotation2:2,rotation3:3},Tt={rotation0:0,rotation90:90,rotation180:180,rotation270:270},Ft={caseSensitive:1,wholeWord:2,consecutively:4},_t={normal:0,incremental:1,noOriginal:2,XRefStream:8,linearized:4096,removeRedundantObjects:16},kt={all:0,even:1,odd:2},Mt={page:"page",annot:"annot"},Ot={print:"print",view:"view"},Lt={MSlashD:0,MSlashDSlashYY:1,MSlashDSlashYYYY:2,MMSlashDDSlashYY:3,MMSlashDDSlashYYYY:4,DSlashMSlashYY:5,DSlashMSlashYYYY:6,DDSlashMMSlashYY:7,DDSlashMMSlashYYYY:8,MMSlashYY:9,MMSlashYYYY:10,MDotDDotYY:11,MDotDDotYYYY:12,MMDotDDDotYY:13,MMDotDDDotYYYY:14,MMDotYY:15,DDotMDotYYYY:16,DDDotMMDotYY:17,DDDotMMDotYYYY:18,YYHyphenMMHyphenDD:19,YYYYHyphenMMHyphenDD:20},Nt={default:0,numberOfCount:1,numberSlashCount:2,pageNumber:3,pageNumberOfCount:4},Bt={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144},Vt={VerifyErrorByteRange:64,verifyChange:128,verifyIncredible:256,verifyNoChange:1024,stateVerifyIssueUnknown:2048,verifyIssueValid:4096,verifyIssueUnknown:8192,verifyIssueRevoke:16384,verifyIssueExpire:32768,verifyIssueUncheck:65536,verifyIssueCurrent:131072,verifyTimestampNone:262144,verifyTimestampDoc:524288,verifyTimestampValid:1048576,verifyTimestampInvalid:2097152,verifyTimestampExpire:4194304,verifyTimestampIssueUnknown:8388608,verifyTimestampIssueValid:16777216,verifyTimestampTimeBefore:33554432,verifyChangeLegal:134217728,verifyChangeIllegal:268435456},Ut={showTagImage:1,showLabel:2,showReason:4,showDate:8,showDistinguishName:16,showLocation:32,showSigner:64,showBitmap:128,showText:256,showDrawing:512},Ht={click:-1,keyStroke:7,format:8,validate:9,calculate:10,mouseEnter:11,mouseExit:12,mouseDown:13,mouseUp:14,onFocus:15,onBlur:16},jt={CalcContentsBox:0,CalcDetection:1},$t={MediaBox:0,CropBox:1,TrimBox:2,ArtBox:3,BleedBox:4},Wt={Fill:0,Stroke:1,FillStroke:2,Invisible:3,FillClip:4,StrokeClip:5,FillStrokeClip:6,Clip:7},Yt={Courier:0,CourierB:1,CourierBI:2,CourierI:3,Helvetica:4,HelveticaB:5,HelveticaBI:6,HelveticaI:7,Times:8,TimesB:9,TimesBI:10,TimesI:11,Symbol:12,ZapfDingbats:13},Gt={FixedPitch:1,Serif:2,Symbolic:4,Script:8,NonSymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,Bold:262144},Kt={ANSI:0,Default:1,Symbol:2,Shift_JIS:128,Hangeul:129,GB2312:134,ChineseBig5:136,Thai:222,EastEurope:238,Russian:204,Greek:161,Turkish:162,Hebrew:177,Arabic:178,Baltic:186},qt={Unknown:0,GB1:1,CNS1:2,JAPAN1:3,KOREA1:4,UNICODE:5},zt={None:0,Alternate:1,Winding:2},Jt={All:0,Text:1,Path:2,Image:3,Shading:4,FormXObject:5},Zt={borderColor:"borderColor",fillColor:"fillColor",normalCaption:"normalCaption",downCaption:"downCaption",rolloverCaption:"rolloverCaption"},Xt={first:0,last:1,after:2,before:3},Qt={crossMark:1,checkMark:2,roundRectangle:3,line:4,dot:5},te={Dests:1,JavaScript:2,EmbeddedFiles:3,Templates:4,Pages:5},ee={none:1,superscript:2,subscript:3},ne={CUSTOM_TEXT:"type here to insert text",NAME:"author name",NAME_DATE_TIME:"author name, date and time",DATE_TIME:"date and time",DATE:"date"},ie={NewWindowFlagFalse:0,NewWindowFlagTrue:1,NewWindowFlagNone:2};const re="WRRRRRRRRWWRWWRRRRRRRRRRRRRRRRRRWRRRRDRRDDRNRNNDNNNNNNNNNNRRDRDRRRRRRRRRRRRRRRRRRRRRRRRRRRRDRDRRRRRRRRRRRRRRRRRRRRRRRRRRRRRDRDRRWRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRW";function oe(t){let e,n=t.length,i=0;for(e=0;e<n;e++){let n=t.charCodeAt(e);n>=128||"W"==re[n]||"#"==t[e]||"D"==re[n]?i+=3:i++}if(i==n)return t;let r="";for(e=0;e<n;e++){let n=t.charCodeAt(e);if(n>=128||"W"==re[n]||"#"==t[e]||"D"==re[n]){if("W"==re[n]&&0==n)continue;r+="#",r+="0123456789ABCDEF"[parseInt(n/16)],r+="0123456789ABCDEF"[n%16]}else r+=t[e]}return r}function se(t){let e;for(e=0;e<t.length&&!(t.charCodeAt(e)>255);e++);if(e===t.length)return"("+t.replace(/([\(|\)])/g,"\\$1")+")";let n="<FEFF";for(e=0;e<t.length;e++){let i=t.charCodeAt(e).toString(16);for(;i.length<4;)i="0"+i;n+=i}return n+">"}function ae(t){let e=[];for(let n=0;n<t.length;n++)e.push(t.charCodeAt(n));return new Uint8Array(e)}let ce=function(){function t(){}return t.JSONToFDF=function(e){let n={next:2,annotRef:[],file:"%FDF-1.2\n1 0 obj<</FDF<</Annots[{annotsRefArray}]>>/Type/Catalog>>endobj\n"},i=[];for(let r=0,o=e.length;r<o;r++){let o=e[r];o.type&&(o.deleted?i.push({name:o.name,page:o.page}):t.singleAnnotJSONToFDF(n,o,!1))}return new Blob([ae(n.file.replace(/\{annotsRefArray\}/,n.annotRef.join(" "))+"trailer\n<</Root 1 0 R>>\n%%EOF")],{type:"application/fdf"})},t.singleAnnotJSONToFDF=function(e,n,i=!1){let r,o=e.next;if(i?r="Popup":(r={unknowntype:"UnKnownType",text:"Text",link:"Link",freetext:"FreeText",line:"Line",square:"Square",circle:"Circle",polygon:"Polygon",polyline:"PolyLine",highlight:"Highlight",underline:"Underline",squiggly:"Squiggly",strikeout:"StrikeOut",stamp:"Stamp",caret:"Caret",ink:"Ink",psink:"PsInk",fileattachment:"FileAttachment",sound:"Sound",movie:"Movie",widget:"Widget",screen:"Screen",printermark:"PrinterMark",trapnet:"TrapNet",watermark:"Watermark","3d":"3D",popup:"Popup",redact:"Redact"}[(n&&n.type&&n.type.toLowerCase()||"").toString().toLowerCase()],i="popup"==r.toLowerCase()),!r||"link"==r.toLowerCase()||"screen"==r.toLowerCase()||"sound"==r.toLowerCase())return 0;let s=n.style||"S";s=s.toUpperCase()[0];let a=n.width,c=n.color||"",l="C"==s?"C":"S",h=n.intensity,u=0===n.opacity?0:n.opacity||1,d=se(n.contents||""),f=n.flags||"print",p=f.split(",");f=0;for(let t in st.AnnotFlagsName)-1!=p.indexOf(st.AnnotFlagsName[t])&&(f|=1<<parseInt(t));let g=n.creationdate,m=n.date,v=n.name||"",y=n.page,w=(n.rect||"").replace(/,/g," "),b=se(n.subject||"subject"),A=se(n.title||"title"),P=n["interior-color"]||n.interiorColor,S=`${o} 0 obj\n<</Rect [${w}]/Subtype /${r}/NM (${v})`;for(let t in n.customEntries)S+=`/${t} ${se(n.customEntries[t])}\n`;if(e.annotRef.push(`${o} 0 R `),e.next++,!i){if(m&&(S+=`/M (${m})`),S+=`/CA ${u}/Contents ${d}/CreationDate (${g})/F ${f}/Page ${y}/Subj ${b}/T ${A}/Type /Annot`,n.replyType){let t;t="string"==typeof n.replyType&&n.replyType||"Group",S+=`/RT /${t[0].toUpperCase()+t.substr(1)}`}n.inreplyto&&(S+=`/IRT (${n.inreplyto})`),n.measureRatio&&(S+=`/Measure<</R(${n.measureRatio})/X[<</C ${n.measureConversionFactor}/U(${n.measureUnit})>>]/Type/Measure/Subtype/RL>>`)}if(s||a){s=s||"S",a=a||"0",h=h||"0",l=l||"S",S+=`/BS <</S /${s} /W ${a} /D [${(n.dashes||"").replace(/,/g," ")}]>>/BE <</S /${l} /I ${h}>>`}if("FreeText"!=r?(c&&(S+="/C "+ue(c)),P&&(S+="/IC "+ue(P))):(P&&(S+="/C "+ue(P)),c&&(S+="/IC "+ue(c),S+=`/DS (color:${n.fontColor})`)),void 0!==n.rotation&&(S+=`/Rotate ${n.rotation}`),void 0!==n.bm&&(S+=`/BM /${oe(n.bm)}`),void 0!==n.bm&&(S+=`/ca ${n.ca}`),-1===["link","screen","Popup"].indexOf(r)){let t=n.intent||n.IT;t&&(S+=`/IT /${t.replaceAll(" ","#20")}`)}let C="";switch(r){case"Text":case"Note":let t;S=S.replace(/\/Subtype\s?\/Note/,"/Subtype /Text"),n.icon&&(S+=`/Name/${oe(n.icon)}`),(t=n.state)&&(S+=`/State(${t})/StateModel(${n.statemodel})`);break;case"Link":return"";case"FreeText":{S=S.replace(/\/C\s?\[[\s\S]*?\]/,""),P&&(S+=`/C ${ue(P)}`);let t=`/DA (${n.defaultappearance})/Q ${n.justification}`;if(n.callout){t+=`/CL  [${n.callout.replace(/,/g," ")}]`,t+=`/LE/${n.head}`}if(n.fringe){t+=`/RD [${n.fringe.replace(/,/g," ")}]`}C=t}break;case"Line":{let t="yes"===n.caption,e=`[/${n.head}/${n.tail}]`,i=n.leaderLength,r=n.start.replace(/,/g," ")+" "+n.end.replace(/,/g," "),o=n.leaderExtend,s=n.leaderOffset,a=n.captionOffset?n.captionOffset.x+" "+n.captionOffset.y:"";var E=`/Cap ${t}/LE ${e}/LL ${i}/L [${r}]/LLE ${o}/LLO ${s}`;a&&(E+=`/CO [${a}]`),void 0!==n.captionColor&&(E+=`/CC ${ue(n.captionColor)}`),C=E}break;case"Square":case"Circle":{let t=`/RD [${n.fringe.replace(/,/g," ")}]`;if(n.measureRatio&&n.measureUnit&&void 0!==n.measureConversionFactor){void 0!==n.captionColor&&(t+=`/CC ${ue(n.captionColor)}`),t+=`/Cap ${"yes"===n.caption}`,t+=`/Measure<</R(${n.measureRatio})/X[<</C ${n.measureConversionFactor}/U(${n.measureUnit})>>]/Type/Measure/Subtype/RL>>`}C=t}break;case"Polygon":case"PolyLine":{let t=n.vertices.replace(/[,|;]/g," "),e=(n.intent,"yes"===n.caption),i=`/Vertices [${t}]`;if(n.measureRatio&&n.measureUnit&&void 0!==n.measureConversionFactor&&(void 0!==n.captionColor&&(i+=`/CC ${ue(n.captionColor)}`),i+=`/Cap ${e}`,i+=`/Measure<</R(${n.measureRatio})/X[<</C ${n.measureConversionFactor}/U(${n.measureUnit})>>]/Type/Measure/Subtype/RL>>`),"PolyLine"==r){i+=`/LE ${`[/${n.head}/${n.tail}]`}`}if(n.path&&n.path.length>0){const t=n.path.split(";").map((t=>`[${t.replace(/,/g," ")}]`)).join(" ");i+=`/Path [${t}]`}C=i}break;case"Redact":if(C+="/OC "+ue(c),C+="/Repeat "+("yes"==n.repeat?"true":"false"),"Redact"==r){C+="/OverlayText"+se(n["overlay-text"]||n.overlaText||""),C+=`/DA (${n.defaultappearance})`,C+=`/Q ${n.justification||0}`}case"StrikeOut":case"Highlight":case"Squiggly":case"Underline":if(n.coords){C+=`/QuadPoints [${n.coords.replace(/,/g," ")}]`}break;case"Caret":C=`/RD [${n.fringe.replace(/,/g," ")}]`;break;case"Stamp":if(n.icon&&(C=`/Name/${oe(n.icon)}`),n.raw&&n.raw.N){C+=`/AP<</N ${le(e,n.raw,n.raw.N)} 0 R>>\n`}break;case"Ink":if("["===n.inklist[0]){let t=n.inklist.substr(1,n.inklist.length-2).split("],["),e="";t.map((t=>{e+="["+t.replace(/[,|;]/g," ")+"]"})),C=`/InkList [${e}]`}else C=`/InkList [[${n.inklist.replace(/[,|;]/g," ")}]]`;break;case"Popup":C="/Open "+("yes"==n.open?"true":"false");break;case"Sound":C+="/Sound "+le(e,n,{Filter:"/ASCIIHexDecode",R:n.rate,Type:"/Sound",stream:n.soundStream})+" 0 R";case"FileAttachment":if(n.icon&&(C+=`/Name/${oe(n.icon)}`),n.raw){C+=`/FS ${le(e,n.raw,n.raw.FS)} 0 R `}}if(n.popup){C+="/Popup "+t.singleAnnotJSONToFDF(e,n.popup,!0)+" 0 R"}return e.file+=S+C+">>\nendobj\n",o},t}();const le=(t,e,n)=>{let i=t.next;t.next++;let r="";if(r+=`${i} 0 obj\n`,"string"==typeof n)r+=n;else if(n instanceof Array)r+="["+n.map((n=>he(t,e,n))).join(" ")+"]";else{r+="<<\n";for(let i in n)"stream"!=i&&(r+="/"+i+" "+he(t,e,n[i]));if(r+=">>",n&&n.stream){let t="";for(let e=0;e<n.stream.length;e+=2){const i=parseInt(n.stream[e],16),r=parseInt(n.stream[e+1],16);t+=String.fromCharCode((i<<4)+r)}r+="stream\n"+t+"\nendstream"}}return r+="\nendobj\n",t.file+=r,i},he=(t,e,n)=>{if(null===n)return"null";let i=typeof n;if("number"==i)return n;if("string"==i){if("/"==n[0])return"/"+oe(n.replace("/",""));if("<"==n[0])return n;let i;if(i=n.match(/^(\d*)R$/)){return le(t,e,e[i[1]])+" 0 R"}return"("+n+")"}if("boolean"==i)return n?"true":"false";if(n instanceof Array)return"["+n.map((n=>he(t,e,n))).join(" ")+"]";let r="<<";for(let i in n)r+=`/${i} `+he(t,e,n[i]);return r+">>"};let ue=function(t){let e=t.match(/\#?(\w{2})(\w{2})(\w{2})/),n=parseInt(e[1],16)/255,i=parseInt(e[2],16)/255,r=parseInt(e[3],16)/255;return"["+n.toFixed(2)+" "+i.toFixed(2)+" "+r.toFixed(2)+"]"};const de=t=>{for(let e in st.LineEndingName)if(st.LineEndingName[e]==t)return+e;return 0};let fe=function(t,e,n,i){this.left=t,this.bottom=e,this.right=n,this.top=i};var pe={print:4,modify:8,extract:16,annotForm:32,fillForm:256,extractAccess:512,assemble:1024,printHigh:2048};var ge={contentUpdated:"content-updated",borderInfoUpdated:"borderInfo-updated",borderStyleUpdated:"borderStyle-updated",borderWidthUpdated:"borderWidth-updated",borderColorUpdated:"borderColor-updated",captionColorUpdated:"captionColor-updated",modifiedDateTimeUpdated:"modifiedDateTime-updated",uniqueIDUpdated:"uniqueID-updated",flagsUpdated:"flags-updated",rectUpdated:"rect-updated",innerRectUpdated:"innerRect-updated",iconNameUpdated:"iconName-updated",rotationUpdated:"rotation-updated",defaultAppearanceUpdated:"defaultAppearance-updated",calloutLineEndingStyleUpdated:"calloutLineEndingStyle-updated",calloutLinePointsUpdated:"calloutLinePoints-updated",fillColorUpdated:"fillColor-updated",textColorUpdated:"textColor-updated",alignmentUpdated:"alignment-updated",inkListUpdated:"inkList-updated",endPointUpdated:"endPoint-updated",startPointUpdated:"startPoint-updated",endingStyleUpdated:"endingStyle-updated",enableCaptionUpdated:"enableCaption-updated",leaderCaptionOffsetUpdated:"leaderCaptionOffset-updated",styleFillColorUpdated:"styleFillColor-updated",leaderLineLengthUpdated:"leaderLineLength-updated",leaderLineExtendUpdated:"leaderLineExtend-updated",leaderLineOffsetUpdated:"leaderLineOffset-updated",measureRatioUpdated:"measureRatio-updated",measureUnitUpdated:"measureUnit-updated",measureConversionFactorUpdated:"measureConversionFactor-updated",removeAction:"remove-action",actionDataUpdated:"actionData-updated",addAction:"add-action",moveAction:"move-action",highlightingModeUpdated:"highlightingMode-updated",subjectUpdated:"subject-updated",titleUpdated:"title-updated",createDateTimeUpdated:"createDateTime-updated",opacityUpdated:"opacity-updated",intentUpdated:"intent-updated",vertexesUpdated:"vertexes-updated",applyFillColorUpdated:"applyFillColor-updated",overlayTextUpdated:"overlayText-updated",overlayTexAlignmentUpdated:"overlayTextAlignment-updated",repeatUpdated:"repeat-updated",autoFontSizeUpdated:"autoFontSize-updated",redactDefaultAppearanceUpdated:"redactDefaultAppearance-update",redactOpacityUpdated:"redactOpacity-updated",quadPointsUpdated:"quadPoints-updated",reviewStateUpdated:"review-state-updated",markedStateUpdated:"marked-state-updated",statesCleared:"state-cleared",replyAdded:"add-replies",richTextUpdated:"rich-text-updated",richTextRemoved:"rich-text-removed",addDictionary:"add-dictionary",imageUpdated:"image-updated",formFieldValueUpdated:"form-field-value",formFieldsMaxLengthUpdated:"maxLength",formFieldItemsUpdated:"setItems",formFieldIconUpdated:"icon",formFieldInsertedItem:"insertItemAt",formFieldExportValueUpdated:"form-field-export-value",formFieldMKPropertyUpdated:"form-field-mk-property",formFieldAlternateName:"form-field-alternate-name",formFieldMappingName:"form-field-mapping-name",formFieldActionUpdated:"form-field-action",pathUpdated:"annot-path-updated"};var me={invisible:1,hidden:2,print:4,noZoom:8,noRotate:16,noView:32,readOnly:64,locked:128,toggleNoView:256,lockedContents:512};function ve(t){let e=t[0],n=t[1],i=t[2],r=t[3],o=new M;if(o.translate(e.x,e.y),o.rotate(Math.atan2(e.y-n.y,n.x-e.x)),o.transformPoint(i.x,i.y)[1]>0){let t=e;e=i,i=t,t=n,n=r,r=t}return[e,n,i,r]}function ye(t,e){let n=t.left,i=t.right,r=t.top,o=t.bottom;switch(e%4){case 0:return[{x:n,y:r},{x:i,y:r},{x:n,y:o},{x:i,y:o}];case 1:return[{x:i,y:r},{x:i,y:o},{x:n,y:r},{x:n,y:o}];case 2:return[{x:i,y:o},{x:n,y:o},{x:i,y:r},{x:n,y:r}];case 3:return[{x:n,y:o},{x:n,y:r},{x:i,y:o},{x:i,y:r}]}let s=new M,a=(n+i)/2,c=(r+o)/2;s.rotateAt(a,c,-radian);let l=s.transformRect(n,r,i,o),h=s.transformPoint(l[0],l[3]);h={x:h[0],y:h[1]};let u=s.transformPoint(l[2],l[3]);u={x:u[0],y:u[1]};let d=s.transformPoint(l[0],l[1]);d={x:d[0],y:d[1]};let f=s.transformPoint(l[2],l[1]);return f={x:f[0],y:f[1]},[h,u,d,f]}function we(t,e){let n;return function(){let i=this,r=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(i,r)}),t)}}function be(t){return 0===t.replace(/\s+/gi,"").length}function Ae(t){if(["left","right","top","bottom"].some((e=>"number"!=typeof t[e])))throw new Error("Param error: The rect parameter includes top, bottom, left and right. And only number is available");if(t.left===t.right||t.top===t.bottom)throw new Error("Param error: The value of the rect parameter is invalid.");return t.left>t.right&&([t.left,t.right]=[t.right,t.left]),t.bottom>t.top&&([t.top,t.bottom]=[t.bottom,t.top]),t}let Pe=function(){function t(t,e){this._isEmpty=!t,this.info=t||{},this.page=e,this.api=e.api;let n=this.engine=e.engine;this.eventEmitter=n.eventEmitter,this.id=t.id,this.objectNumber=t.objectNumber,this.isDestroyed=!1}var e=t.prototype;return e.destroy=function(){this.isDestroyed=!0,this.info=null,this.page=null,this.api=null,this.eventEmitter=null},e.checkModidyPerm=function(){if("widget"!=this.info.type){if(!this.page.doc.checkPermission(pe.annotForm))throw new Error("Permission error")}else if(!this.page.doc.checkPermission(pe.fillForm|pe.annotForm))throw new Error("Permission error")},e.hasModifyPermission=function(){return"widget"==this.info.type?this.page.doc.checkPermission(pe.fillForm|pe.annotForm):this.page.doc.checkPermission(pe.annotForm)},e.isEmpty=function(){return this._isEmpty},e.getInfo=function(){return this.info},e.getId=function(){return this.info.objectNumber},e.getObjectNumber=function(){return this.info.objectNumber},e.getUniqueID=function(){return this.info.name},e.setUniqueID=function(t){let e=this.getPDFPage(),n=e.getPDFDoc(),i=this.getUniqueID();return this.page.doc.api.setUniqueId(n.getId(),e.getId(),this.getId(),t).then((n=>n?(this.info.name=t,this.update(ge.uniqueIDUpdated).then((()=>(this.eventEmitter.emit(et.annotationIDUpdated,t,i,this,e),n)))):n))},e.getName=function(){return this.info.name},e.getPDFPage=function(){return this.page},e.getPage=function(){return this.getPDFPage()},e.getType=function(){return this.info.type},e.getTitle=function(){return this.info.title},e.isMarkup=function(){return this.info.isMarkup},e.isDeleted=function(){return this.info.isDeleted},e.getRect=function(){let t=this.info.rect;return new fe(t.left,t.bottom,t.right,t.top)},e._setRect=function(t,e=!0){this.oldRect=this.info.rect,this.info.rect=t;let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setAnnotRect(i.getId(),n.getId(),this.getId(),t).then((t=>t?this.update(ge.rectUpdated,e).then((()=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage()),t))):(this.info.rect=this.oldRect,t)))},e.setRect=function(t){this.oldRect=this.info.rect,t=Ae(t),this.info.rect=t;let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotRect(n.getId(),e.getId(),this.getId(),t).then((t=>t?this.update(ge.rectUpdated).then((t=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage()),!0))):(this.info.rect=this.oldRect,t)))},e.setRectAndInnerRect=function(t,e){this.oldRect=this.info.rect,this.info.rect=t,this.info.innerRect=e;let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setAnnotRectAndInnerRect(i.getId(),n.getId(),this.getId(),t,e).then((t=>t?this.update(ge.rectUpdated).then((t=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage()),!0))):t))},e.moveTo=function({left:t,top:e,action:n,triggerAction:i=!0}={}){const r=y({},this.info.rect),{right:o,bottom:s}=r,a=t-r.left,c=e-r.top;this.oldRect=r,this.info.rect={left:t,top:e,right:o+a,bottom:s+c};const l=this.getPDFPage(),h=l.getPDFDoc().getId(),u=l.getId(),d=this.getId();return this.page.doc.api.moveAnnotTo(h,u,d,{left:t,top:e}).then((t=>l.getAnnotsByObjectNumArray(t))).then((t=>Promise.all(t.map((t=>t._update()))).then((e=>{i&&this.eventEmitter.emit(et.annotationUpdated,t,l,ge.rectUpdated),"move"==n&&this.eventEmitter.emit(et.annotationMovedPosition,t,l,this)}))))},e.getDeviceRect=function(t=1,e=0){let n=this.page.getDeviceRect(this.getRect(),t,e);if(16&this.info.flag){let i=this.page.getDevicePoint([this.info.rect.left,this.info.rect.top],t,e);return{left:i[0],top:i[1],right:i[0]+n.right-n.left,bottom:i[1]+n.bottom-n.top}}return n},e.getDeviceInnerRect=function(t=1,e=0){return this.page.getDeviceRect(this.getInnerRect(),t,e)},e.getContent=function(){return this.info.content},e.setContent=function(t){return this.checkModidyPerm(),this._setContent(t).then((e=>(this.info.content=t,this.eventEmitter.emit(et.annotationUpdated,[this],this.getPDFPage(),ge.contentUpdated),this)))},e._setContent=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotContent(n.getId(),e.getId(),this.getId(),t)},e.getBorderColor=function(){return this.info.borderColor},e.setBorderColor=function(t){this.checkModidyPerm(),isNaN(t)&&(t=(0,_.colorConvertor)(t,"int",1));let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotBorderColor(n.getId(),e.getId(),this.getId(),t).then((n=>n?(0===t&&(this.info.hasBorderColor=!1),this.update(ge.borderColorUpdated).then((()=>{if(this.isGrouped&&this.isGrouped()){this.getGroupElements().map((t=>{t!=this&&this.eventEmitter.emit(et.annotationAppearanceUpdated,[t],e)}))}return this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e),n}))):n))},e.getBorderStyle=function(){return this.info.borderInfo.style},e.getBorderStyleWithParam=function(){const{style:t,cloudIntensity:e,dashes:n}=this.info.borderInfo;let i;switch(t){case st.BORDER_STYLE.SOLID:i=[];break;case st.BORDER_STYLE.CLOUDY:i=e;break;case st.BORDER_STYLE.DASHED:i=n}return{style:t,param:i}},e.getBorderInfo=function(){return y({},this.info.borderInfo)},e.setBorderInfo=function(t){this.checkModidyPerm();let e=this.getType();if(this.getQuadPoints||"caret"===e||"text"===e)return Promise.resolve();let n=JSON.parse(JSON.stringify(this.info.borderInfo||{}));t=this.info.borderInfo=y(n,t);let i=this.getPDFPage(),r=i.getPDFDoc();return 1===t.style&&0===t.dashes.length&&(t.dashes=[2,2]),5===t.style&&t.cloudIntensity>2&&(t.cloudIntensity=2),this.page.doc.api.setAnnotBorderInfo(r.getId(),i.getId(),this.getId(),t).then((t=>this._update())).then((t=>(this.eventEmitter.emit(et.annotationUpdated,[this],i,ge.borderInfoUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],i),!0)))},e.setBorderStyle=function(t,e){let n=this.info.borderInfo;switch(n.style=t,t){case 1:n.dashes=e;break;case 5:n.cloudIntensity=e}let i=this.getPDFPage(),r=i.getPDFDoc();return this.page.doc.api.setAnnotBorderStyle(r.getId(),i.getId(),this.getId(),t,e).then((t=>i.getAnnotsByObjectNumArray(t))).then((t=>{let e=[];for(let n=t.length;n--;)e.push(t[n]._update());return Promise.all(e)})).then((t=>(this.eventEmitter.emit(et.annotationUpdated,t,i,ge.borderStyleUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,t,i),!0)))},e.getBorderDashes=function(){return y([],this.info.borderInfo.dashes)},e.getBorderWidth=function(){let t=this.info.borderInfo.width;return void 0===t?1:+t},e.setBorderWidth=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotBorderWidth(n.getId(),e.getId(),this.getId(),t).then((t=>this._update().then((e=>t)))).then((t=>(t&&(this.eventEmitter.emit(et.annotationUpdated,[this],e,ge.borderWidthUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)),t)))},e.getCloudIntensity=function(){return this.info.borderInfo.cloudIntensity||0},e.reviseSummary=function(t){return Promise.resolve(this)},e.rectIsEmpty=function(){return this.info.rectIsEmpty},e.update=function(t,e=!0){return this._update().then((()=>(e&&t&&this.eventEmitter.emit(et.annotationUpdated,[this],this.getPDFPage(),t),this)))},e._update=function(t=!1){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.getAnnot(n.getId(),e.getId(),this.getId()).then((e=>(e.rotation&&e.rotation<0&&(e.rotation+=360),this.updateInfo(e,t),this)))},e._updateMore=function(){},e.getFlags=function(){return this.info.flag},e.isReplace=function(){return!1},e.getIndex=function(){return this.info.index},e.setFlags=function(t,e){this.checkModidyPerm(),this.info.flag=t;let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setAnnotFlag(i.getId(),n.getId(),this.getId(),t).then((i=>i?("widget"==this.getType()&&this.updateUI({type:"display",value:t}),this.update(ge.flagsUpdated,!e).then((t=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],n),i)))):i))},e.setFlagValue=function(t,e){return this.setFlags(t,e)},e.getModifiedDateTime=function(){const t=this.info.modifiedTimestamp;return t<0?null:new Date(t)},e.setModifiedDateTime=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setModifiedDateTime(n.getId(),e.getId(),this.getId(),t).then((t=>this.update(ge.modifiedDateTimeUpdated)))},e._setModifiedDateTime=function(t,e){this.checkModidyPerm();let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setModifiedDateTime(i.getId(),n.getId(),this.getId(),t).then((t=>this.update(ge.modifiedDateTimeUpdated,e)))},e.exportToJSON=function(){let t=(0,_.colorConvertor)(16777215&this.info.borderColor,"#"),e=this.info.flag,n=[];for(let t in st.AnnotFlagsName)e&1<<parseInt(t)&&n.push(st.AnnotFlagsName[t]);n=n.join(",");let i=this.info.name,r=this.page.getIndex(),o=this.info.rect,s=o.left+","+o.bottom+","+o.right+","+o.top,a=this.info.content,c=this.info.borderInfo,l=this.info.type,h=this.info.customEntries,u={type:l,color:t,flags:n,name:i,page:r,rect:s,contents:a,width:c.width,customEntries:h,objectNumber:this.info.objectNumber};switch(-1!=this.info.modifiedTimestamp&&(u.date=ht(new Date(this.info.modifiedTimestamp))),c.style){case st.BORDER_STYLE.SOLID:u.style="solid";break;case st.BORDER_STYLE.DASHED:u.style="dashed",u.dashPhase=c.dashPhase,u.dashes=c.dashes.join(",");break;case st.BORDER_STYLE.UNDERLINE:u.style="underline";break;case st.BORDER_STYLE.BEVELED:u.style="beveled";break;case st.BORDER_STYLE.INSET:u.style="inset";break;case st.BORDER_STYLE.CLOUDY:u.style="cloudy",u.intensity=c.cloudIntensity}return u},e.updateInfo=function(t,e){this._isEmpty=!t;const n=this.oldRect||this.info.rect;this.oldRect=null;const i=t.rect;this.info=t,e||this.eventEmitter.emit(et.invalidRect,new fe(n.left,n.bottom,n.right,n.top),new fe(i.left,i.bottom,i.right,i.top),t.type,t,this.page),this._updateMore(),this.action&&t.action&&(this.action=this.page.doc.engine.actionFactory.createAction(t.action,this.page.doc,this.page.doc.api,this.eventEmitter,this))},e.getIntent=function(){return""},e.setCustomEntries=function(t,e){this.info.customEntries=this.info.customEntries||{},this.info.customEntries[t]=e},e.setDictionaryEntry=function(t,e){return this._setDictionaryEntry(t,e).then((t=>(t&&this.eventEmitter.emit(et.annotationUpdated,[this],this.getPDFPage(),ge.addDictionary),t)))},e._setDictionaryEntry=function(t,e){let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setDictionaryEntry(i.getId(),n.getId(),this.getId(),t,e).then((n=>(n&&this.setCustomEntries(t,e),n)))},e.getDictionaryEntry=function(t){return this._getDictionaryEntry(t)},e._getDictionaryEntry=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.getDictionaryEntry(n.getId(),e.getId(),this.getId(),t)},e.resetAppearanceStream=function(){let t=this.getPDFPage(),e=t.getPDFDoc();return this.page.doc.api.resetAppearanceStream(e.getId(),t.getId(),this.getId())},e.getDictValue=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.getDictValue(n.getId(),e.getId(),this.getId(),t)},e.setDictValue=function(t,e){let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setDictValue(i.getId(),n.getId(),this.getId(),t,e)},t}();var Se=Pe;const Ce={ReadOnly:1,Required:2,NoExport:4,Hidden:8,ButtonNoToggleToOff:16384,ButtonRadiosInUnison:33554432,TextMultiline:4096,TextPassword:8192,TextDoNotSpellCheck:4194304,TextDoNotScroll:8388608,TextComb:16777216,ComboEdit:262144,ChoiceMultiSelect:2097152,CommitOnSelChange:67108864,inUnison:t=>t&Ce.ButtonRadiosInUnison,isHidden:function(t){return t&Ce.Hidden},isReadOnly:function(t){return t&Ce.ReadOnly},isRequired:function(t){return t&Ce.Required},isNoExport:function(t){return t&Ce.NoExport},isMultiline:function(t){return t&Ce.TextMultiline},isPassword:function(t){return t&Ce.TextPassword},isComb:function(t){return t&Ce.TextComb},isNoSpellCheck:function(t){return t&Ce.TextDoNotSpellCheck},isNoScroll:function(t){return t&Ce.TextDoNotScroll},isComboEdit:function(t){return t&Ce.ComboEdit},isChoiceMultiSelect:function(t){return t&Ce.ChoiceMultiSelect}},Ee={FlagExclude:1,FlagIncludeNoValueFields:2,FlagExportFormat:4,FlagGetMethod:8,FlagWithCoordinates:16,FlagAsXFDF:32,FlagIncludeAppendSaves:64,FlagIncludeAnnotations:128,FlagSubmitAsPDF:256,FlagCanonicalFormat:512,FlagExclNonUserAnnots:1024,FlagExclFKey:2048,FlagEmbedForm:8192,isExclude:t=>t&Ee.FlagExclude,isIncludeNoValueFields:t=>t&Ee.FlagIncludeNoValueFields,isHTML:t=>t&Ee.FlagExportFormat,isGetMethod:t=>t&Ee.FlagGetMethod,isXFDF:t=>t&Ee.FlagAsXFDF,isPDF:t=>t&Ee.FlagSubmitAsPDF,getType:t=>{let e=Ee.isHTML(t);if(e)return"HTML";let n=Ee.isXFDF(t);if(n)return"XFDF";let i=Ee.isPDF(t);return i?"PDF":e||n||i?void 0:"FDF"}};let xe={Unknown:0,PushButton:1,CheckBox:2,RadioButton:3,Text:6,ListBox:5,ComboBox:4,Sign:7,Barcode:8},De=Ce;var Ie;!function(t){t.STATE_HANDLER_HAND="hand",t.STATE_HANDLER_CHECK_THE_SEARCH="checkTheSearch",t.STATE_HANDLER_CREATE_CARET="createCaret",t.STATE_HANDLER_CREATE_ARROW="createArrow",t.STATE_HANDLER_CREATE_AREA_HIGHLIGHT="createAreaHighlight",t.STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT="createAreaHighlight",t.STATE_HANDLER_CREATE_CIRCLE="createCircle",t.STATE_HANDLER_CREATE_FILE_ATTACHMENT="createFileAttachment",t.STATE_HANDLER_CREATE_HIGHLIGHT="createHighlight",t.STATE_HANDLER_CREATE_IMAGE="createImage",t.STATE_HANDLER_CREATE_LINK="createLink",t.STATE_HANDLER_CREATE_LINE="createLine",t.STATE_HANDLER_CREATE_DISTANCE="createDistance",t.STATE_HANDLER_CREATE_PERIMETER="createPerimeter",t.STATE_HANDLER_CREATE_AREA="createArea",t.STATE_HANDLER_CREATE_CIRCLE_AREA="createCircleArea",t.STATE_HANDLER_CREATE_PENCIL="createPencil",t.STATE_HANDLER_CREATE_POLYGON_CLOUD="createPolygonCloud",t.STATE_HANDLER_CREATE_POLYGON="createPolygon",t.STATE_HANDLER_CREATE_POLYLINE="createPolyline",t.STATE_HANDLER_CREATE_REPLACE="createReplace",t.STATE_HANDLER_CREATE_SQUARE="createSquare",t.STATE_HANDLER_CREATE_SQUIGGLY="createSquiggly",t.STATE_HANDLER_CREATE_STAMP="createStamp",t.STATE_HANDLER_CREATE_STRIKE_OUT="createStrikeOut",t.STATE_HANDLER_CREATE_TEXT="createText",t.STATE_HANDLER_CREATE_UNDERLINE="createUnderline",t.STATE_HANDLER_MARQUEE="marquee",t.STATE_HANDLER_ERASER="eraser",t.STATE_HANDLER_LOUPE="loupe",t.STATE_HANDLER_SELECT_TEXT_ANNOTATION="select-text-annotation",t.STATE_HANDLER_SELECT_TEXT_IMAGE="select-text-image",t.STATE_HANDLER_SELECT_ANNOTATION="select-annotation",t.STATE_HANDLER_CREATE_FREETEXT_BOX="createFreeTextBox",t.STATE_HANDLER_CREATE_FREETEXT_CALLOUT="createFreeTextCallout",t.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER="createFreeTextTypewriter",t.STATE_HANDLER_CREATE_FIELD_TEXT="CreateTextStateHandler",t.STATE_HANDLER_CREATE_FIELD_SIGNATURE="CreateSignStateHandler",t.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON="CreatePushButtonStateHandler",t.STATE_HANDLER_CREATE_FIELD_CHECK_BOX="CreateCheckBoxStateHandler",t.STATE_HANDLER_CREATE_RADIO_BUTTON="CreateRadioButtonStateHandler",t.STATE_HANDLER_CREATE_FIELD_COMBO_BOX="CreateComboBoxStateHandler",t.STATE_HANDLER_CREATE_FIELD_LIST_BOX="CreateListBoxStateHandler",t.STATE_HANDLER_CREATE_FIELD_DATE="CreateDateStateHandler",t.STATE_HANDLER_CREATE_FIELD_IMAGE="CreateImageStateHandler",t.STATE_HANDLER_SNAPSHOT_TOOL="snapshot-tool"}(Ie||(Ie={}));const Re=Ie.STATE_HANDLER_HAND,Te=Ie.STATE_HANDLER_CHECK_THE_SEARCH,Fe=Ie.STATE_HANDLER_CREATE_CARET,_e=Ie.STATE_HANDLER_CREATE_ARROW,ke=Ie.STATE_HANDLER_CREATE_AREA_HIGHLIGHT,Me=Ie.STATE_HANDLER_CREATE_AREA_HIGHLIGHT,Oe=Ie.STATE_HANDLER_CREATE_CIRCLE,Le=Ie.STATE_HANDLER_CREATE_FILE_ATTACHMENT,Ne=Ie.STATE_HANDLER_CREATE_HIGHLIGHT,Be=Ie.STATE_HANDLER_CREATE_IMAGE,Ve="createEditImage",Ue=Ie.STATE_HANDLER_CREATE_LINK,He=Ie.STATE_HANDLER_CREATE_LINE,je=Ie.STATE_HANDLER_CREATE_DISTANCE,$e=Ie.STATE_HANDLER_CREATE_PERIMETER,We=Ie.STATE_HANDLER_CREATE_AREA,Ye=Ie.STATE_HANDLER_CREATE_CIRCLE_AREA,Ge=Ie.STATE_HANDLER_CREATE_PENCIL,Ke=Ie.STATE_HANDLER_CREATE_POLYGON_CLOUD,qe=Ie.STATE_HANDLER_CREATE_POLYGON,ze=Ie.STATE_HANDLER_CREATE_POLYLINE,Je=Ie.STATE_HANDLER_CREATE_REPLACE,Ze=Ie.STATE_HANDLER_CREATE_SQUARE,Xe="createSquareCrop",Qe=Ie.STATE_HANDLER_CREATE_SQUIGGLY,tn=Ie.STATE_HANDLER_CREATE_STAMP,en=Ie.STATE_HANDLER_CREATE_STRIKE_OUT,nn=Ie.STATE_HANDLER_CREATE_TEXT,rn=Ie.STATE_HANDLER_CREATE_UNDERLINE,on=Ie.STATE_HANDLER_MARQUEE,sn=Ie.STATE_HANDLER_ERASER,an=Ie.STATE_HANDLER_LOUPE,cn=Ie.STATE_HANDLER_SELECT_TEXT_ANNOTATION,ln=Ie.STATE_HANDLER_SELECT_TEXT_IMAGE,hn="select-text",un=Ie.STATE_HANDLER_SELECT_ANNOTATION,dn=Ie.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER,fn=Ie.STATE_HANDLER_CREATE_FREETEXT_CALLOUT,pn=Ie.STATE_HANDLER_CREATE_FREETEXT_BOX,gn=Ie.STATE_HANDLER_SNAPSHOT_TOOL,mn="create-crop-pages",vn=Ie.STATE_HANDLER_CREATE_FIELD_TEXT,yn=Ie.STATE_HANDLER_CREATE_FIELD_SIGNATURE,wn=Ie.STATE_HANDLER_CREATE_FIELD_PUSH_BUTTON,bn=Ie.STATE_HANDLER_CREATE_RADIO_BUTTON,An="CreateArticleButtonStateHandler",Pn={[nn]:"text",[Ne]:"highlight",[en]:"strikeout",[rn]:"underline",[Qe]:"squiggly",[Je]:"strikeout",[Fe]:"caret",[dn]:"freetext",[fn]:"freetext",[pn]:"freetext",[Ze]:"square",[Oe]:"circle",[He]:"line",[_e]:"line",[qe]:"polygon",[ze]:"polyline",[Ke]:"polygon",[ke]:"highlight",[Ge]:"ink",[tn]:"stamp",[je]:"line",[$e]:"polyline",[We]:"polygon",[Ye]:"circle",[Le]:"fileattachment",[Be]:"screen",[Ue]:"link","create-multi-media-state":"screen","create-redaction-text-image-state":"redact","create-redaction-state":"redact"},Sn={CreatePushButtonStateHandler:xe.PushButton,CreateCheckBoxStateHandler:xe.CheckBox,CreateRadioButtonStateHandler:xe.RadioButton,CreateComboBoxStateHandler:xe.ComboBox,CreateListBoxStateHandler:xe.ListBox,CreateTextStateHandler:xe.Text,CreateSignStateHandler:xe.Sign,CreateDateStateHandler:xe.Text,CreateImageStateHandler:xe.PushButton};var Cn={annotation:"annotation"};let En=function(){function t(t){this.annot=t.isGrouped&&t.isGrouped()?t.getGroupHeader():t,this.tooltip="",this.delay=500,this.moveThreshold=2,this.positionThreshold=10,this.oldClientX=0,this.oldClientY=0,this.tipElement=document.createElement("div"),document.getElementsByClassName("fv_viewer-tooltip-container").length>0&&(this.tooltip=document.getElementsByClassName("fv_viewer-tooltip-container")[0]),this.createTooltipElement()}var e=t.prototype;return e.createTooltipElement=function(){if(!(document.getElementsByClassName("fv_viewer-tooltip-container").length>0)){this.tipElement.classList.add("fv_viewer-tooltip-container"),this.tipElement.classList.add("tooltip-unactive");var t="";t+='<div class="fv_viewer-tooltip-title"> '+this.annot.getTitle()+"</div>",t+='<div class="fv_viewer-tooltip-content"> '+this.annot.getContent()+"</div>",this.tipElement.innerHTML=t,document.getElementsByTagName("body")[0].appendChild(this.tipElement),this.tooltip=document.getElementsByClassName("fv_viewer-tooltip-container")[0]}},e.getPosition=function(t,e){var n=document.documentElement.clientHeight,i=this.tooltip.getBoundingClientRect().width,r=this.tooltip.getBoundingClientRect().height,o=t+this.positionThreshold,s=e+this.positionThreshold;return document.documentElement.clientWidth-t<i+this.positionThreshold&&(o-=i+this.positionThreshold),n-s<r&&(s=e-r),{x:o,y:s}},e.setPosition=function(t,e){this.tooltip.style.left=t+"px",this.tooltip.style.top=e+"px"},e.hide=function(){this.tooltip.classList.remove("tooltip-active"),this.tooltip.classList.add("tooltip-unactive")},e.show=function(t,e){if("widget"===this.annot.getType()){let t=this.annot.getField();if(!t.getAlternateName())return;document.getElementsByClassName("fv_viewer-tooltip-title")[0].innerHTML="",document.getElementsByClassName("fv_viewer-tooltip-content")[0].innerHTML=t.getAlternateName()}else{const t=this.annot.getTitle(),e=this.annot.getContent();if(!t)return;document.getElementsByClassName("fv_viewer-tooltip-title")[0].innerHTML=t,document.getElementsByClassName("fv_viewer-tooltip-content")[0].innerHTML=e}let n=this.getPosition(t,e);this.setPosition(n.x,n.y),this.tooltip.classList.remove("tooltip-unactive"),this.tooltip.classList.add("tooltip-active")},t}();function xn(t,e){const{x:n,y:i}=t,{left:r,right:o,top:s,bottom:a}=e;return n>=r&&n<=o&&i>=a&&i<=s}const Dn="vertical",In="horizontal";let Rn=function(){function t(t,e){this.fromInchRate=t,this.name=e,Object.defineProperties(this,{fromInchRate:{value:t,enumerable:!0,writable:!1,configurable:!0},name:{value:e,enumerable:!0,writable:!1,configurable:!0}})}var e=t.prototype;return e.convertTo=function(t,e){return t/this.fromInchRate*e.fromInchRate},e.convertAreaTo=function(t,e){return t/Math.pow(this.fromInchRate,2)*Math.pow(e.fromInchRate,2)},S(t,[{key:"isPixel",get:function(){return!1}}]),t}(),Tn=function(t){function e(e){var n;return(n=t.call(this,0,"px")||this).orientation=e,Object.defineProperty((0,C.Z)(n),"fromInchRate",{get(){const t=(0,_.getDPI)();switch(e){case In:return t.x;case Dn:return t.y;default:return t.x}}}),n}return(0,E.Z)(e,t),S(e,[{key:"isPixel",get:function(){return!0}}]),e}(Rn);var Fn={inch:"inch",custom:"custom",mi:"mi",pt:"pt",ft:"ft",yd:"yd",km:"km",m:"m",cm:"cm",mm:"mm",pica:"pica"};const _n=new Rn(1,Fn.inch),kn=new Rn(1,Fn.custom),Mn=new Rn(1/63360,Fn.mi),On=new Rn(72,Fn.pt),Ln=new Rn(1/12,Fn.ft),Nn=new Rn(1/36,Fn.yd),Bn=new Rn(.0254/1e3,Fn.km),Vn=new Rn(.0254,Fn.m),Un=new Rn(2.54,Fn.cm),Hn=new Rn(25.4,Fn.mm),jn=new Rn(6,Fn.pica),$n=new Tn(In),Wn=new Tn(Dn),Yn={[_n.name]:_n,[kn.name]:kn,[Mn.name]:Mn,[On.name]:On,[Ln.name]:Ln,[Nn.name]:Nn,[Bn.name]:Bn,[Vn.name]:Vn,[Un.name]:Un,[Hn.name]:Hn,[jn.name]:jn,[$n.name]:$n};function Gn(t){switch(t=(t=t.toLowerCase()).replace(/[^a-z]/g,"")){case"in":t="inch";break;case"p":t="pica"}return Yn[t]}function Kn(t){let e=1;switch(t){case"pt":e=72;break;case"in":case"inch":default:e=1;break;case"cm":e=2.54;break;case"p":case"pica":e=5.9;break;case"mm":e=25.4}return e}const qn="userSpaceUnit",zn="userSpaceScaleValue",Jn="realScaleValue";Ie.STATE_HANDLER_CREATE_PERIMETER,Ie.STATE_HANDLER_CREATE_DISTANCE,Ie.STATE_HANDLER_CREATE_AREA,Ie.STATE_HANDLER_CREATE_CIRCLE_AREA;let Zn=function(){function t(){}return t.convertPoint2RealUnit=function(t,e){if(!e)return t;const n=e[zn],i=e[qn],r=e[Jn];return On.convertTo(t,i)*(r/n)},t.caculateDistance=function(e,n,i){const r=n.x-e.x,o=n.y-e.y;let s=Math.abs(r),a=Math.abs(o),c=Math.sqrt(s*s+a*a);return t.convertPoint2RealUnit(c,i)},t.caculateAngle=function(e,n,i,r){const o=t.caculateDistance(e,n,r),s=t.caculateDistance(n,i,r),a=t.caculateDistance(e,i,r),c=(Math.pow(o,2)+Math.pow(s,2)-Math.pow(a,2))/(2*o*s);if(Number.isNaN(c)||Number.isNaN(Math.acos(c)))return 0;return Math.round(Math.abs(Math.acos(c))/Math.PI*180*100)/100},t.caculateTriangleArea=function(t,e,n,i){let r=t.x*e.y+e.x*n.y+n.x*t.y-(t.x*n.y+e.x*t.y+n.x*e.y);if(r/=2,!i)return r;const o=i[zn],s=i[qn],a=i[Jn];return On.convertAreaTo(r,s)*Math.pow(a/o,2)},t.caculatePolygonArea=function(e,n){let i={x:0,y:0},r=0;for(let o=1;o<=e.length;++o)o<e.length?r+=t.caculateTriangleArea(i,e[o-1],e[o],n):r+=t.caculateTriangleArea(i,e[o-1],e[0],n);return Math.abs(r)},t.caculateCircleArea=function(t,e){let n=(t.right-t.left)*(t.top-t.bottom)*Math.PI;if(!e)return n;const i=e[zn],r=e[qn],o=e[Jn];return On.convertAreaTo(n/4,r)*Math.pow(o/i,2)},t}();var Xn,Qn,ti={unKnownType:"unknowntype",text:"text",link:"link",freeText:"freetext",line:"line",square:"square",circle:"circle",polygon:"polygon",polyLine:"polyline",polyline:"polyline",highlight:"highlight",underline:"underline",squiggly:"squiggly",strikeOut:"strikeout",stamp:"stamp",caret:"caret",ink:"ink",psInk:"psink",fileAttachment:"fileattachment",sound:"sound",movie:"movie",widget:"widget",screen:"screen",printerMark:"printermark",trapNet:"trapnet",watermark:"watermark",threeD:"3d",popup:"popup",redact:"redact"};function ei(){}!function(t){t[t.throttle=0]="throttle",t[t.debounce=1]="debounce"}(Xn||(Xn={})),function(t){t.MEASUREMENT="measurement",t.COMPARISON="comparison",t.STAMP="stamp",t.SIGN_CERTIFY="sign-certify",t.SIGNATURE="signature"}(Qn||(Qn={}));var ni=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};const ii="measurement-info",ri={userSpaceUnit:_n,userSpaceScaleValue:1,realUnit:_n,realScaleValue:1,caption:"",markup:!0},oi="measurementInfo";let si=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t),e.inject=function(){return{pdfViewer:bP}};var n=e.prototype;return n.allInjected=function(){this.pdfViewer.store.dispatch(oi,ri),this.getStorage().get(Qn.MEASUREMENT,ii).then((t=>{this.isDestroyed||t&&(this.pdfViewer.getStore().dispatch(oi,y({},this.convertFromRaw(t))),this.addDestroyHook(this.pdfViewer.store.subscribe(oi,(t=>{if(!this.isDestroyed)return this.updateMeasurementInfo(t)}))))})),this.addDestroyHook(this.getStorage().onChange((t=>{t.context.feature===Qn.MEASUREMENT&&this.pdfViewer.store.dispatch(oi,this.convertFromRaw(t.newValue))})),this.pdfViewer.addEventListener(nt.pageNumberChange,(()=>ni(this,void 0,void 0,(function*(){if(this.isDestroyed)return;const t=this.getStorage(),e=yield t.get(Qn.MEASUREMENT,ii);yield t.set(Qn.MEASUREMENT,ii,e)})))))},n.updateMeasurementInfo=function(t){return ni(this,void 0,void 0,(function*(){const e=y(y({},yield this.getMeasurementInfo()),t),n=this.convertToRaw(e);yield this.getStorage().set(Qn.MEASUREMENT,ii,n)}))},n.getMeasurementInfo=function(){return this.pdfViewer.store.getCurrentValue(oi)},n.onMeasurementInfoChange=function(t){return this.pdfViewer.store.subscribe(oi,t)||ei},n.getStorage=function(){return this.pdfViewer.getStorage()},n.convertFromRaw=function(t={}){return"object"!=typeof t?y({},ri):{userSpaceUnit:t.userSpaceUnit?new Rn(t.userSpaceUnit.fromInchRate,t.userSpaceUnit.name):_n,userSpaceScaleValue:null==t.userSpaceScaleValue?1:t.userSpaceScaleValue,realUnit:t.realUnit?new Rn(t.realUnit.fromInchRate,t.realUnit.name):_n,realScaleValue:null==t.realScaleValue?1:t.realScaleValue,caption:t.caption||"",markup:!1!==t.markup}},n.convertToRaw=function(t){return{userSpaceUnit:t.userSpaceUnit?{fromInchRate:t.userSpaceUnit.fromInchRate,name:t.userSpaceUnit.name}:ri.userSpaceUnit,userSpaceScaleValue:t.userSpaceScaleValue||ri.userSpaceScaleValue,realUnit:t.realUnit?{fromInchRate:t.realUnit.fromInchRate,name:t.realUnit.name}:ri.realUnit,realScaleValue:t.realScaleValue||ri.realScaleValue,caption:t.caption||ri.caption,markup:void 0===t.markup?ri.markup:t.markup}},n.isSame=function(t,e){return JSON.stringify(this.convertToRaw(t))===JSON.stringify(this.convertToRaw(e))},e}(_.Disposable);function ai(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let ci=function(){};let li=0;const hi=(0,_.createDOM)("canvas",{class:"highlightAP fv__ui-annots"}),ui=(0,_.createDOM)("canvas",{class:"annotRenderers fv__ui-annots"}),di=(0,_.createDOM)("div",{class:"linkHighlightMode",style:"display:none;cursor:pointer;position:absolute;z-index:27;"}),fi=(0,_.createDOM)("div",{class:"curAnnot",style:"cursor:pointer;position:absolute;z-index:28;"});let pi=function(t){function e(e,n,i){var r;(r=t.call(this,i)||this).name="annotsRender",r.$ui=e,0==r.$ui.find(".curAnnot").length&&r.$ui.append(r.$ownUI=D()([hi.cloneNode(),ui.cloneNode(),di.cloneNode(),fi.cloneNode()])),r.annotRenders={};let o=r.pdfViewer.customs||{};return r.activeAnnotBefore=o.activeAnnotBefore||ci,r.activeAnnotAfter=o.activeAnnotAfter||ci,r.unActiveAnnotBefore=o.unActiveAnnotBefore||ci,r.unActiveAnnotAfter=o.unActiveAnnotAfter||ci,r.pageRender=r._parent,r.initAnnotEvent(),r.renderParams=[i.scale,i.rotate,i.containerVisibleRect],r.hotAnnot=0,r.showAnnots=new Set,r.backAnnots=new Set,r.annotFiltered=i.docRender.hideMarkupFlag,r.rerenderAfterFilterTaskExecutor=new _.DebounceAsyncTaskExecutor,r.rerenderAnnotThrottleTaskExecutor=new _.ThrottleAsyncTaskExecutor(50,!0),r.rerenderAnnotDebounceTaskExecutor=new _.DebounceAsyncTaskExecutor(50,!1),r.mouseEventTaskExecutor=new _.ThrottleAsyncTaskExecutor(50,!0),r.rerenderMode=Xn.throttle,r}(0,E.Z)(e,t);var n=e.prototype;return n.setRerenderMode=function(t){this.rerenderMode=t},n.getRerenderMode=function(){return this.rerenderMode},n.getRerenderAnnotTaskExecutor=function(){return this.rerenderMode===Xn.throttle?this.rerenderAnnotThrottleTaskExecutor:this.rerenderAnnotDebounceTaskExecutor},n.removeUI=function(){},n.getAnnotAtPoint=function(t,e=!0){const n=this.pdfViewer.stateHandlerManager.currentStateHandler.getStateName();if(-1==["hand","select-annotation"].indexOf(n))return;const i=this._parent;if(!i)return null;let r=i.getPDFPointFromClientPoint(t.clientX,t.clientY);return i.getActiveAnnotInfo(r,e)},n.processStateData=function(t){const e=t.reduce(((t,e)=>{const n=e.getTitle(),i=t[n];return i?i.getModifiedDateTime()<=e.getModifiedDateTime()&&(t[n]=e):t[n]=e,t}),{});return Object.values(e).map((t=>t.getState()))},n.initEmitter=function(){const t=this.pdfViewer.getEventEmitter(),e=this._parent,n=(t=[])=>{Array.isArray(t)||(t=[t]);const n=t.filter((t=>"popup"!=t.getType())).map((t=>{let n=y({},t.info.rect);const i=e.scale*_.dpr;return n=e.page.getAnnotDeviceRect(t,i,e.rotate),n}));return{left:Math.min.apply(Math,ai(w.Z,n.map((t=>t.left)))),bottom:Math.max.apply(Math,ai(w.Z,n.map((t=>t.bottom)))),right:Math.max.apply(Math,ai(w.Z,n.map((t=>t.right)))),top:Math.min.apply(Math,ai(w.Z,n.map((t=>t.top)))),hasHighlight:t.some((t=>"highlight"==t.getType()))}},i=(t,e)=>(e=e||n(t),this.updateRender(e));t.on(nt.annotationLoaded,this.annotLoaded=(t,e,n)=>{this.isDestroyed||this.pageRender.isDestroyed||t==this.pageRender.page&&this.renderWidget.apply(this,ai(w.Z,this.renderParams))}),t.on("updatePageAnnot",this.updatePageAnnot=(t,e,n,r)=>{this.isDestroyed||this.pageRender.isDestroyed||(t==this.pageRender.page&&i(e),n==this.pageRender.page&&i(r))});let r,o=[nt.annotationRemoved,nt.annotationAdd];o.forEach((e=>{t.on(e,this[e+"Handler"]=t=>{if(this.isDestroyed||this.pageRender.isDestroyed)return;if(!t[0]||!t[0].page||t[0].page.getIndex()!=this.pageRender.index)return;if(t[0].isDeleted()||t.map((t=>this.showAnnots.add(t.id))),r){const e=n(t);r={left:Math.min(r.left,e.left),bottom:Math.max(r.bottom,e.bottom),right:Math.max(r.right,e.right),top:Math.min(r.top,e.top),hasHighlight:r.hasHighlight||t.some((t=>"highlight"==t.getType()))}}else r=n(t);this.getRerenderAnnotTaskExecutor().exec((t=>{if(!t[0].page||!this.pageRender||!this.pageRender.page)return;let e=r&&i(t,r).then((t=>{t&&this.pdfViewer.eventEmitter.emit("renderAnnotSuccess",this.pageRender)}));return r=null,e}),[t])})}));let s,a=[nt.invalidRect];a.forEach((e=>{t.on(e,this[e+"Handler"]=(t,e,n,o,s)=>{if(this.isDestroyed||this.pageRender.isDestroyed)return;if(s!=this.pageRender.page)return;t=this.pageRender.page.getAnnotDeviceRect(o,this.pageRender.scale*_.dpr,this.pageRender.rotate,t),e=this.pageRender.page.getAnnotDeviceRect(o,this.pageRender.scale*_.dpr,this.pageRender.rotate,e);let a={left:Math.min(t.left,e.left),bottom:Math.max(t.bottom,e.bottom),right:Math.max(t.right,e.right),top:Math.min(t.top,e.top),hasHighlight:"highlight"==n};r=r?{left:Math.min(r.left,a.left),bottom:Math.max(r.bottom,a.bottom),right:Math.max(r.right,a.right),top:Math.min(r.top,a.top),hasHighlight:r.hasHighlight||"highlight"==n}:a,"screen"==n&&o.isAudioVideo?(this.genScreenIcon(this.pageRender,o),this.updateActiveRect(this.pageRender,o,".fv__pdf-player")):"freetext"==n?this.updateActiveRect(this.pageRender,o,".fv__pdf-page-annot-handler-rect"):"line"==n&&(this.updateActiveRect(this.pageRender,o,".fv__pdf-page-annot-handler-rect"),this.updateLinePoint(this.pageRender,o));this.getRerenderAnnotTaskExecutor().exec((t=>{if(!this.pageRender||!this.pageRender.page)return;const e=r&&i(t,r);return r=null,e}),[])})})),t.on("annot-filter",this.applyFilter=(t,e)=>{switch(t){case"start":this.startFilterAnnot();break;case"end":this.endFilterAnnot();break;default:this.addShowAnnot(e)}}),t.on(nt.mouseEnter,this.mouseEnterListener=(t,e)=>{(this.pdfViewer.config.showAnnotTooltip&&"widget"!==e.annots[0].getType()||this.pdfViewer.config.showFormFieldTooltip&&"widget"===e.annots[0].getType())&&(s=this.pdfViewer.customs.AnnotTooltip?new this.pdfViewer.customs.AnnotTooltip(this.pdfViewer,e.annots[0]):new En(e.annots[0]),s.show(e.e.clientX,e.e.clientY))}),t.on(nt.mouseLeave,this.mouseLeaveListener=(t,e)=>{s&&s.hide()}),t.on(nt.pageMeasureScaleRatioChanged,this.updatePageMeasureScaleRatio=(t,e)=>{this._updatePageMeasureScaleRatio(t,e)}),o.push.apply(o,a),this.addDestroyHook.apply(this,[this.pdfViewer.addEventListener(nt.annotationImported,(()=>{this.pdfViewer.getAllActiveElements().forEach((t=>{t.isActive&&t.annot&&t.active()}))})),()=>t.off(nt.annotationLoaded,this.annotLoaded),()=>t.off(nt.fitWidthResizeViewport,this.resize),()=>t.off("updatePageAnnot",this.updatePageAnnot),()=>t.off("annot-filter",this.applyFilter),()=>t.off(nt.mouseEnter,this.mouseEnterListener),()=>t.off(nt.mouseLeave,this.mouseLeaveListener),()=>t.off(nt.pageMeasureScaleRatioChanged,this.updatePageMeasureScaleRatio)].concat(ai(w.Z,o.map((e=>()=>t.off(e,this[e+"Handler"]))))))},n.initAnnotEvent=function(){const t=this.pdfViewer,e=t.getCurrentPDFDoc();if(!e||e.isDestroyed||e.isDynamicXFA())return;const n=t.getEventEmitter(),i=this._parent;this.initEmitter();let r,o=0;const s=(t,e=!0)=>{if(e&&this.$ui.find(".curAnnot").hide(),this.hotAnnot&&-1!==["redact","link"].indexOf(this.hotAnnot.type)&&!this.hotAnnot.isDeleted){if("link"==this.hotAnnot.type)return void this.$ui.find(".linkHighlightMode").css({border:"none",background:"none","mix-blend-mode":"initial"}).hide();if(this.hotAnnot.type==ti.redact&&this.getAnnotRender(this.hotAnnot.id).component.isActive)return;const t=i.page.getDeviceRect(this.hotAnnot.rect,i.scale*_.dpr,i.rotate);this.mouseEventTaskExecutor.cancel(),this.mouseEventTaskExecutor.waitForLastTask().then((()=>this.pageRender.page.getAnnotBitmap(this.hotAnnot.id,i.scale*_.dpr*4/3,i.rotate,{x:t.left-3,y:t.top-3,width:t.right-t.left+6,height:t.bottom-t.top+6},!0,"normal").then((t=>(this.hotAnnot=0,this.updateCanvas(t,".annotRenderers"))))))}n.emit(nt.mouseLeave,Cn.annotation,{annots:[r],e:t})},a=t=>{if(i.isDestroyed)return this.hotAnnot=null,Promise.resolve();const[e,n]=i.getPDFPointFromClientPoint(t.clientX,t.clientY,!0);let r;return r=i.page.getAnnotCount()>1e3?new Promise((e=>{const n=this.getAnnotAtPoint(t);e(n?n.id:-1)})):i.getPDFPage().then((t=>{if(t.isVirtual())return-1;const r=i.scale,o=i.rotate,s=t.getDeviceMatrix(o);return s.scale(r,r),t.getAnnotObjectNumAtDevicePoint([e,n],5,[s.a,s.b,s.c,s.d,s.e,s.f])})),r.then((t=>{if(-1===t)return this.hotAnnot=null;this.hotAnnot=0;const e=this.getAnnotRender(t);return e?this.hotAnnot=e.component.annot.info:void 0})).then((t=>t&&-1!==["widget","link","screen"].indexOf(t.type)?t:t&&this.annotFiltered&&!this.showAnnots.has(t.id)?this.hotAnnot=0:t))};this.findAnnot=a;const c=e=>(_.isTouchDevice&&this.moveHandler(e),a(e).then((e=>{if(this.hotAnnot){const e=this.getAnnotRender(this.hotAnnot.id),n=t.stateHandlerManager.currentStateHandler.getStateName();if("hand"==n&&-1!=["screen","link","image"].indexOf(this.hotAnnot.type)||setTimeout((()=>{this.hotAnnot&&this.activeAnnot(this.hotAnnot.id)}),200),"hand"==n&&"link"==this.hotAnnot.type){const t=e.annot.getBorderWidth(),n=this.$ui.find(".linkHighlightMode").show(),r=i.page.getDeviceRect(this.hotAnnot.rect,i.scale,i.rotate);switch(r.width=r.right-r.left,r.height=r.bottom-r.top,delete r.right,delete r.bottom,e.annot.info.highlightingMode){case st.HIGHLIGHTING_MODE.NONE:n.hide();break;case st.HIGHLIGHTING_MODE.OUTLINE:return r.width<2*t&&(r.left-=(2*t-r.width)/2),r.height<2*t&&(r.top-=(2*t-r.height)/2),void n.css(y({"border-width":t,borderColor:"black",borderStyle:"solid",backgroundColor:"none"},r)).show();case st.HIGHLIGHTING_MODE.INVERT:return void n.css(y({"background-color":"white","mix-blend-mode":"difference"},r)).show();case st.HIGHLIGHTING_MODE.PUSH:return r.width<2*t&&(r.left-=(2*t-r.width)/2),r.height<2*t&&(r.top-=(2*t-r.height)/2),void n.css(y({border:`${t}px solid`,"border-color":"black #aaa #aaa black"},r)).show();case st.HIGHLIGHTING_MODE.TOGGLE:return}}}})));this.$ui.find(".curAnnot").on("mousemove",(t=>{0})).on("mouseleave",s),this.moveHandler=e=>{if(li)return;o=1;const s=t.stateHandlerManager.currentStateHandler.getStateName();-1!=["hand","select-annotation"].indexOf(s)&&this.mouseEventTaskExecutor.exec((()=>a(e).then((o=>{if(!o){const e=t.getAllActiveElements();if(!e.length)return this.$ui.find(".curAnnot").hide();{const t=e.find((t=>t.annot&&t.annot.getType()===ti.redact));if(!t)return this.$ui.find(".curAnnot").hide();if(!_.isTouchDevice){if(t.getPDFPage().getIndex()!==i.page.getIndex())return;const e=i.page.getDeviceRect(t.annot.getRect(),i.scale*_.dpr,i.rotate);return this.pageRender.page.getAnnotBitmap(t.id,i.scale*_.dpr*4/3,i.rotate,{x:e.left-3,y:e.top-3,width:e.right-e.left+6,height:e.bottom-e.top+6},!0,"normal").then((t=>this.updateCanvas(t,".annotRenderers")))}}}r=i.page.annotIdMap[o.id],n.emit(nt.mouseEnter,Cn.annotation,{annots:[r],e:e});const s=this.getEngineAnnot(o),a=this.getAnnotRect(s);if(this.$ui.find(".curAnnot").data("annot",o.id).css(a).show(),!_.isTouchDevice&&"redact"==o.type&&!o.isDeleted){const t=i.page.getDeviceRect(o.rect,i.scale*_.dpr,i.rotate);return this.pageRender.page.getAnnotBitmap(o.id,i.scale*_.dpr*4/3,i.rotate,{x:t.left-3,y:t.top-3,width:t.right-t.left+6,height:t.bottom-t.top+6},!0,"rollover").then((t=>this.updateCanvas(t,".annotRenderers")))}}))))},_.isTouchDevice||i.$ui.on("mousemove",this.moveHandler),this.tapPage=async t=>{if(this.hotAnnot=0,!_.isTouchDevice)return;const e=await a(t);if(!e)return!1;const i="hand"==this.pdfViewer.getStateHandlerManager().currentStateHandler.getStateName(),r=this.getAnnotRender(e.id);return i&&-1!==["screen","link","image","sound"].indexOf(e.type)?(["screen","sound"].indexOf(e.type)>-1?r.component.play():["link","image"].indexOf(e.type)>-1&&r.component.doAction(),n.emit(nt.tapAnnotation,r)):this.activeAnnot(e.id),!0},this.doubleTapPage=async t=>{if(!_.isTouchDevice)return;const e=await a(t);return!!e&&(this.doubleTapAnnot(e.id,t),!0)},this.pressPage=async t=>{if(!_.isTouchDevice)return;const e=await a(t);return!!e&&(n.emit(nt.pressAnnotation,this.getAnnotRender(e.id),t),d(t,1),t.preventDefault(),t.stopPropagation(),!0)},this.panStart=t=>{if(this.moveHandler(t),this.hotAnnot&&-1==["screen","link","image","watermark"].indexOf(this.hotAnnot.type)){this.getAnnotRender(this.hotAnnot.id);this.activeAnnot(this.hotAnnot.id,t)}};let l=this.$ui.find(".curAnnot").get(0);const h=new Hammer.Manager(l);h.add(new Hammer.Tap({event:"doubletap",taps:2})),h.add(new Hammer.Tap({event:"singletap"})),h.add(new Hammer.Pan),h.get("doubletap").recognizeWith("singletap"),h.get("singletap").requireFailure("doubletap"),h.add(new Hammer.Press);let u=Promise.resolve();if(h.on("panstart",(t=>{u.then((e=>{if(this.hotAnnot&&-1==["screen","link","image","watermark"].indexOf(this.hotAnnot.type)){this.getAnnotRender(this.hotAnnot.id);this.activeAnnot(this.hotAnnot.id,t.srcEvent,!0)}}))})),h.on("hammer.input",(t=>{if("pointerdown"==t.srcEvent.type)return li=1,o=0,void(o||(u=c(t.srcEvent)));if("pointerup"==t.srcEvent.type){li=0;const e="hand"==this.pdfViewer.getStateHandlerManager().currentStateHandler.getStateName();this.hotAnnot&&e&&-1!==["screen","link","image","sound"].indexOf(this.hotAnnot.type)&&(-1===["screen","sound"].indexOf(this.hotAnnot.type)&&t.srcEvent.target===l&&this.getAnnotRender(this.hotAnnot.id).component.doAction(),this.$ui.find(".linkHighlightMode").css({border:"none",background:"none","mix-blend-mode":"initial"}).hide())}})),h.on("singletap",(t=>{const e="hand"==this.pdfViewer.getStateHandlerManager().currentStateHandler.getStateName();if(this.hotAnnot){const t=this.getAnnotRender(this.hotAnnot.id);e&&-1!==["screen","link","image","sound"].indexOf(this.hotAnnot.type)&&["screen","sound"].indexOf(this.hotAnnot.type)>-1&&t.component.play(),n.emit(nt.tapAnnotation,t)}})),_.isTouchDevice&&(_.isSafari||_.isChrome)){let t="pointerdown";(_.isIOS&&_.isChrome||void 0===window.PointerEvent)&&(t="mousedown");const e=t=>{const e=this._findAnnotRender(t.target);e&&!this._isFormWidget(e)&&t.stopPropagation()};l.addEventListener(t,e);const i=(0,_.onTap)({target:l,stopPropagation:!1,onDoubleTap:t=>{const e=this._findAnnotRender(t.target);if(!e||this._isFormWidget(e))return;const i=e.annot.getId();n.emit(nt.doubleTapAnnotation,e,t),this.doubleTapAnnot(i,t),t.stopPropagation()}});this.addDestroyHook(i,(()=>{l.removeEventListener(t,e)}))}else h.on("doubletap",(t=>{const e=this._findAnnotRender(t.target);if(!e||this._isFormWidget(e)||-1!==["link","screen"].indexOf(e.annot.getType()))return;const i=e.annot.getId();n.emit(nt.doubleTapAnnotation,e,t),this.doubleTapAnnot(i,t)}));h.on("press",(t=>{if((0,_.isEditable)(t.target))return;const e=this.getAnnotRender(+D()(t.target).data("annot"));e&&!this._isFormWidget(e)&&n.emit(nt.pressAnnotation,e,t)}));const d=(t,e=!1)=>{let i=this._findAnnotRender(t.target);if(!e&&!i)return;if(e){const e=this.getAnnotAtPoint(t,!0);if(!e)return;i=this.getAnnotRender(e.id)}const r=i.annot.getType();if(!("select-annotation"==this.pdfViewer.getStateHandlerManager().currentStateHandler.getStateName())&&-1!==["link","screen","widget"].indexOf(r)&&!i.component.isActive&&!_.isTouchDevice)return void t.preventDefault();const o=i.annot.getId();n.emit(nt.rightClickAnnotation,i,t),this.showContextMenu(o,t.clientX,t.clientY,t).then((e=>{!1!==e&&(t.stopPropagation(),t.preventDefault())}))};this.addDestroyHook((()=>{h.destroy(),i.$ui&&i.$ui.off("mousemove",this.moveHandler),this.$ui.find(".curAnnot").off("mouseleave",s)}),(0,_.attachContextMenuEvent)(this.$ui.get(0),d,{capture:!0}))},n.getEngineAnnot=function(t){return this.getAnnotRender(t.id).component.annot},n.getAnnotRect=function(t){const e=this._parent,n=t.getDeviceRect(e.scale,e.rotate);let i=n.right-n.left+4,r=n.bottom-n.top+4;return 8&t.getFlags()&&(i/=e.scale,r/=e.scale),{width:i,height:r,left:n.left-2,top:n.top-2}},n._isFormWidget=function(t){return"widget"===t.annot.getType()},n._isFormWatermark=function(t){return"watermark"===t.annot.getType()},n._findAnnotRender=function(t){if(t==this.$ui.find(".curAnnot").get(0))return this.getAnnotRender(+D()(t).data("annot"));const e=()=>Object.keys(this.annotRenders).map((t=>this.annotRenders[t])),n=t.closest(".fv__pdf-page-annot-handler-container");if(n){return e().filter((t=>t.component.$handler.get(0)===n))[0]}if(t.closest(".fv__shape-control.callout")){return e().filter((t=>{const e=t.component;return!(t.annot.getIntent()!==st.Intents.FREETEXT_CALLOUT||!_.Lazy.isPropertyIntialized(e,"shapeControl"))&&e.shapeControl.annot.getId()===t.annot.getId()}))[0]}},n.updateSize=function(t,e){for(let n in this.annotRenders){const i=this.annotRenders[n].component;i.scale=t,i.rotate=e}if(0==this.$ui.find(".annotRenderers").width())return;const[n]=this.renderParams||[t],i=this.renderParams[2],r=t/n,o=`matrix(${r},0,0,${r},${i.left*(r-1)},${i.top*(r-1)})`;this.$ui.find(".fv__ui-annots").css("transform",o);const s=this.$ui.find(".fv__pdf-form-control-handler-container");for(let t of s){const e=parseFloat(D()(t).css("left")),n=parseFloat(D()(t).css("top"));D()(t).css({transform:`matrix(${r},0,0,${r},${e*(r-1)},${n*(r-1)})`})}this.scaleChanged=!0},n.renderWidget=function(t,e=0,n){if(this.widgetsDone=1,this.isDestroyed)return Promise.resolve();let i=this.renderSerialPromise;i&&i.end().catch(ci);const r=this.pageRender.page.annots.filter((t=>!this.annotRenders[t.objectNumber]&&"widget"==t.getType())).map((t=>this.annotRenders[t.objectNumber]=new z(D()("<div>"),D()("<div>"),t,this)));this.$ui.append(r.reduce(((t,e)=>(t.append(e.$ui,e.$handler),t)),D()(document.createDocumentFragment())));const o=()=>this.isDestroyed,s=r.map((i=>(i=>{if(o())return Promise.resolve();try{return i.render(t,e,n).then((t=>i.component.afterRender()))}catch(t){return Promise.reject(t)}})(i)));return i=this.renderSerialPromise=new ot(0),Promise.all(s)},n.skipRender=function(t,e){if(this.isDestroyed)return!0;return this._parent.pdfViewer.getScrollWrap().disabled||Math.abs(t-4*e/3)>1e-6},n.getBitmap=function(t,e=0,n,i="noHighlight",r=!1,o={left:n.left/_.dpr,right:n.right/_.dpr,top:n.top/_.dpr,bottom:n.bottom/_.dpr}){var s;if(this.skipRender(4/3,1))return Promise.resolve([1]);const a=this._parent,c="noHighlight"==i;let l=0;c&&"redact"==(null==(s=this.hotAnnot)?void 0:s.type)&&a.page.annots.find((t=>t.getId()===this.hotAnnot.id))&&(l=this.hotAnnot.id);const h=a.docRender.hideMarkupFlag,u=["annot"];h&&u.push("hideMarkup"),c?u.push("noHighlight"):u.push("onlyHighlight");const d=this.pdfViewer.getAnnotManager().getAnnotFlag_;let f=[];return this.pageRender&&this.pageRender.page||Promise.resolve([1]),f=this.pageRender.page.annots.map((t=>{const e=t.info.id;if(d&&t.getType()!==ti.link){let n=this.pdfViewer.getAnnotManager().getAnnotFlag(t).flag;if(1==(1&n)||2==(2&n)||32==(32&n))return e}if(this.annotFiltered){if(!this.showAnnots.has(e)&&t.isMarkup())return e}else if(h&&t.isMarkup())return e})),a.page.getPageBitmap(4*t/3*_.dpr,e,{x:n.left,y:n.top,width:n.right-n.left,height:n.bottom-n.top},u,"view","",{hideAnnots:f,hotAnnot:l,dpr:_.dpr}).then((e=>{let{buffer:n,image:i,progressiveId:s,x:a,y:l,width:h,height:u,scale:d,rate:f}=e;if(this.skipRender(d,t*_.dpr))return[1];if(r)return e;this.$ui.find(c?".annotRenderers":".highlightAP");let p=D()(`<canvas class='${c?"annotRenderers":"highlightAP"} fv__ui-annots'></canvas>`)[0];D()(p).css({transform:"scale(1)",left:o.left,top:o.top,width:o.right-o.left,height:o.bottom-o.top});const g=p.getContext("2d");if(p.width=h,p.height=u,g.clearRect(0,0,p.width,p.height),i)return new Promise(((e,n)=>{try{let n=new Image;n.onload=function(){g.drawImage(n,0,0,h,u),URL.revokeObjectURL(n.src),e([0,t])},n.src=URL.createObjectURL(i)}catch(t){n(t)}}));{const t=g.createImageData(h,u);t.data.set(new(Uint8ClampedArray||Uint8Array)(n)),g.putImageData(t,0,0)}return this.skipRender(d,t*_.dpr)?[1]:[0,t,p]}))},n.genScreenIcon=function(t,e){const n=t.scale,i=t.page.getDeviceRect(e.rect,n,t.rotate),r=`fv__screen-decorator-${e.id}`;let o=this.$ui.find("."+r);o.length||(o=D()(`<div class='fv__pdf-page-multi-media-annot-container screen-border ${r}' data-id='${e.id}'><div class='icon play'></div></div>`),this.$ui.append(o)),o.css({padding:(e.borderWidth||2)*_.dpr*n*4/3,left:i.left/t.getShowWidth()*100+"%",top:i.top/t.getShowHeight()*100+"%",width:(i.right-i.left)/t.getShowWidth()*100+"%",height:(i.bottom-i.top)/t.getShowHeight()*100+"%"});const s=this.pdfViewer.getPDFDocRender();let a=!1;if(this.pdfViewer.getAnnotManager().getAnnotFlag_){let n=this.pdfViewer.getAnnotManager().getAnnotFlag(t.page.annotIdMap[e.id]).flag;1!=(1&n)&&2!=(2&n)&&32!=(32&n)||(a=!0)}s.noInteraction||a?o.hide():o.show()},n.updateActiveRect=function(t,e,n){const i=t.annotsRender.getAnnotRender(e.name);if(!i)return;let r=i.$handler.find(n);const o=t.scale,s=t.page.getDeviceRect(e.rect,o,t.rotate);if(!r)return s;const a="px";return r.css({left:s.left+a,top:s.top+a,width:s.right-s.left+a,height:s.bottom-s.top+a}),s},n.updateLinePoint=function(t,e){const n=t.annotsRender.getAnnotRender(e.name);n&&n.component.updateHandlerPosition(!0)},n.updateCanvas=function(t,e){let{buffer:n,image:i,progressiveId:r,x:o,y:s,width:a,height:c,scale:l,rate:h}=t;const u=this.$ui.find(e);if(!u[0].width){const t=this.renderParams[2];u.attr({width:t.right-t.left,height:t.bottom-t.top})}let d=u[0].getContext("2d");const f=d.createImageData(a,c);f.data.set(new(Uint8ClampedArray||Uint8Array)(n)),this.renderParams[2]&&(d.putImageData(f,o-this.renderParams[2].left*_.dpr,s-this.renderParams[2].top*_.dpr),_.isSafari&&(u.hide(),setTimeout((()=>{u.show()}),0)))},n.updateRender=function(t){const e=this.pageRender.page.annots.some((t=>"highlight"==t.getType()));[[".annotRenderers",".annotRenderers"],[".highlightAP",".highlightAP"]].map((([t,n])=>{if((".highlightAP"!=t||e)&&0==this.$ui.find(t)[0].width){const t=this.renderParams[2];this.$ui.find(n).css({transform:"none",left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top}).attr({width:(t.right-t.left)*_.dpr,height:(t.bottom-t.top)*_.dpr})}}));const n=this.pageRender,i=(n.scale,_.dpr,t);i.left-=3,i.top-=3,i.right+=3,i.bottom+=3,i.left<0&&(i.left=0),i.top<0&&(i.top=0);const r=n.getCurrentVisibleRect();i.left=Math.min(i.left,r.left*_.dpr),i.top=Math.min(i.top,r.top*_.dpr),i.right=Math.max(i.right,r.right*_.dpr),i.bottom=Math.max(i.bottom,r.bottom*_.dpr);const o=[this.getBitmap(n.scale,n.rotate,i,"noHighlight",1)];return t.hasHighlight&&o.push(this.getBitmap(n.scale,n.rotate,i,"onlyHigh",1)),Promise.all(o).then((([t,e])=>!(1==t[0]||e&&1==e[0])&&(this.updateCanvas(t,".annotRenderers"),e&&this.updateCanvas(e,".highlightAP"),!0)))},n.render=function(t,e=0,n){if(this.skipRender(4/3,1))return[1];if(this.pageRender.isDestroyed)return[1];const i=this.pageRender,r=i.page,o=i.docRender.hideMarkupFlag,s=i.docRender.forceLoadAnnot,a=this.pdfViewer.getAnnotManager().getAnnotFlag_;let c;return c=o||s||a?r.getAnnots().then((t=>t&&t.map((t=>t.info)))):r.getAnnotRects(),c=c.then((t=>{if(!r.isDestroyed)return r.doc.hasFixedPageFields(r.getIndex()).then((t=>{if(t&&!r.hasFixedPageFields)return r.hasFixedPageFields=!0,r.doc.reloadPDFForm()})).then((e=>t))})),c.then((r=>{if(!r)return;if(this.renderParams=[t,e,n],!r.length)return this.$ui.find(".annotRenderers,.highlightAP").css({left:n.left,top:n.top,transform:"scale(1)",width:n.right-n.left,height:n.bottom-n.top}).attr({width:0,height:0}),void(this.widgetsDone=1);const o={left:n.left*_.dpr,right:n.right*_.dpr,top:n.top*_.dpr,bottom:n.bottom*_.dpr};return Promise.all([this.getBitmap(t,e,o,"noHighlight"),r.some((t=>"highlight"==t.type))?this.getBitmap(t,e,o,"onlyHigh"):Promise.resolve([0])]).then((([t,e])=>{if(t[0]||e[0])return[1];const n=this.$ui.find(".annotRenderers"),i=this.$ui.find(".highlightAP");return n.replaceWith(t[2]),e.length>1?i.replaceWith(e[2]):i.attr({width:0,height:0}),this.$ownUI=this.$ui.find(".fv__ui-annots,.linkHighlightMode,.curAnnot"),[0,t[1]]})).then((([o,s])=>{if(!o){if(this.pdfViewer.eventEmitter.emit("renderAnnotSuccess",this.pageRender),this.scaleChanged){const t=this.$ui.find(".fv__pdf-page-annot-handler-container");for(let e of t)D()(e).css({transform:"scale(1)"});this.scaleChanged=!1}r.forEach((t=>{"screen"==t.type&&t.isAudioVideo&&(this.genScreenIcon(i,t),this.updateActiveRect(i,t,".fv__pdf-player"))}));for(let t in this.annotRenders){let n=this.annotRenders[t];const i=n.component;if(!i||!i.annot)continue;"widget"==i.annot.getType()&&n.render(s,e);let r=n.scale,o=n.rotate;i.scale=s,i.rotate=e,n.scale=s,n.rotate=e;const a=r!==s||o!==e;n.component.isActive&&a&&n.component.active()}if(!this.widgetsDone){if(!i||!i.page)return;if(i.page.annots.length)return this.renderWidget(t,e,n);{let t;this.disposor.addDestroyHook((()=>{clearTimeout(t)}));t=setTimeout((()=>{this.isDestroyed||i&&i.page&&i.page.getAnnots()}),0)}}}}))}))},n.adjustHighlightsRender=function(){return Promise.resolve()},n.adjustHighlightAnnots=function(){let t=[];for(let e in this.annotRenders){let n=this.annotRenders[e];"highlight"===n.annot.getType()&&t.push(n.redraw())}return Promise.all(t)},n.destroy=function(){for(let t in this.annotRenders){let e=this.annotRenders[t];e&&e.destroy()}t.prototype.destroy.call(this),this.invisibleRender(),this.pageRender=null,this.annotRenders=null,this.rerenderAnnotDebounceTaskExecutor.cancel(),this.rerenderAnnotThrottleTaskExecutor.cancel(),this.rerenderAfterFilterTaskExecutor.cancel()},n.clickNoteAt=function(t){let e=this.annotRenders[t];e&&e.focus()},n.unActiveAnnot=function(t){let e=this.pdfViewer.getAllActiveElements();if(!e.length)return Promise.resolve();const n=this.pdfViewer.eventEmitter;return t||this.pdfViewer.clearMultiSelectActiveFlag(),Promise.resolve(this.unActiveAnnotBefore()).then((i=>{if(!1===i||null==this.pageRender)return;let r=e.filter((t=>t.annot));t instanceof Se?r=r.filter((e=>e.annot===t)):"number"==typeof t&&(r=r.filter((e=>e.annot.objectNumber===t))),r.forEach((t=>{this.pdfViewer.deactivateElement(t),n.emit(nt.unActiveAnnotation,t,t.annot.getId(),this),this.unActiveAnnotAfter(t)}))}))},n._unActiveAnnot=function(t){t.unActive()},n._forEachRenderer=function(t){for(const e in this.annotRenders)t.call(this,this.annotRenders[e],e,this.annotRenders)},n.activeAnnot=function(t,e,n=!1){let i=this.getAnnotRender(t);if(!i)return Promise.resolve();let r=this.pdfViewer;if(r.activationManager.currentActivableIs(i.component)&&!_.keyboardStatus.isShiftDown&&!n)return Promise.resolve(i);let o=r.eventEmitter,s=this.pdfViewer.customs;return Promise.resolve((s.activeAnnotBefore||ci)(i,t,this)).then((n=>{if(o.emit(nt.activeAnnotationBefore,i,t,this),!1===n)return i;if(i.annot.isGrouped&&i.annot.isGrouped()){let e=[];return i.getGroupRenders().map((t=>{"popup"!==t.annot.getType()&&e.push(t.active())})),Promise.all(e).then((()=>(o.emit(nt.activeAnnotation,i,t,this),Promise.resolve((s.activeAnnotationAfter||ci)(i,t,this))))).then((()=>(o.emit(nt.activeAnnotationAfter,i,t,this),i)))}return i.active(e).then((()=>(o.emit(nt.activeAnnotation,i,t,this),Promise.resolve((s.activeAnnotationAfter||ci)(i,t,this))))).then((()=>(o.emit(nt.activeAnnotationAfter,i,t,this),e&&i.component.triggerPointerDownOnShapeControl(e),i)))}))},n._activeAnnot=function(t,e){let n=this.annotRenders[t];return n?n.active():Promise.resolve()},n.splitAnnotIndexArr=function(t,e,n){let i=[],r=[],o=t+1,s=t-1,a=-1;for(let n=0,c=e.length;n<c;n++){let c=e[n],l=c.length;if(1===l&&c[0]===t)return!1;for(let e=0,h=l;e<h;e++){let l=c[e];if(l instanceof Array){let h=l[0],u=l[1];if(t===h){a=n,i=c.slice(0,e),r=u>o?[[o,u]]:[u],r=r.concat(c.slice(e+1));break}if(t===u){a=n,i=c.slice(0,e),h<s?i.push([h,s]):i.push(h),r=c.slice(e+1);break}if(t>h&&t<u){a=n,i=c.slice(0,e),s===h?i.push(h):i.push([h,s]),r=o===u?[u]:[[o,u]],r=r.concat(c.slice(e+1));break}}else if(l===t){a=n,i=c.slice(0,e),r=c.slice(e+1);break}}if(-1!==a)break}if(-1===a)return!1;let c=JSON.stringify(e[a]),l=n[c],h=[a,1];return i.length&&h.push(i),h.push([t]),r.length&&h.push(r),e.splice.apply(e,h),{removeTileCanvas:l,beforeIndexArr:i,splitIndexArr:[t],afterIndexArr:r,tileCanvasMap:n,splitKey:c}},n.splitTileCanvas=function(t,e,n,i,r,o,s,a,c,l){let h=t.beforeIndexArr,u=t.splitIndexArr,d=t.afterIndexArr,f=t.removeTileCanvas,p=t.tileCanvasMap,g=t.splitKey,m=D()(document.createDocumentFragment()),v=[];return h.length&&v.push(this.rangeAnnotTileCanvasRedraw(e,n,h,p,m,i,r,o,s,a,c,l)),v.push(this.renderSplitAnnots(u,e,n,m,i,c,l)),d.length&&v.push(this.rangeAnnotTileCanvasRedraw(e,n,d,p,m,i,r,o,s,a,c,l)),Promise.all(v).then((()=>{f.$container.before(m),f.destroy(),delete p[g]}))},n.createAnnotRender=function(t){if(this.annotRenders[t.id||t.getId()])return this.annotRenders[t.id||t.getId()];const e=D()("<div/>"),n=D()("<div/>");this.$ui.append(n);let i=new z(e,n,t,this);return this.annotRenders[t.getId()]=i,i.component.rotate=this._parent.rotate,i.component.scale=this._parent.scale,i},n.getAnnotRender=function(t){if(void 0===t)return;let e=this._parent;if(!e)return null;let n=e.page;if("number"==typeof t){let e=this.annotRenders[t];if(e)return e;const i=n.getAnnotsSync([t])[0];return i?this.createAnnotRender(i):null}if(t.trim().length<1)return null;let i=n.annots.find((e=>e.getName()===t));return i?this.createAnnotRender(i):null},n.getAnnotRenderSafely=function(t){const e=this.pageRender.page.annots.find((e=>e.id===t));return e?this.createAnnotRender(e):null},n.removeAnnotRender=function(t){const e=t.annot.getId();delete this.annotRenders[e]},n.showContextMenu=function(t,e,n,i){return this.activeAnnot(t,i).then((t=>t&&t.showContextMenu(e,n)))},n.doubleTapAnnot=function(t,e){return this.activeAnnot(t,e).then((t=>t&&t.doubleTapAnnot()))},n.getOrCreateAnnotRender=function(t,e=this.$ui[0]){const n=t.getId();if(this.annotRenders[n])return this.annotRenders[n];let i=D()("<div></div>"),r=D()("<div></div>");return e.appendChild(i[0]),e.appendChild(r[0]),this.annotRenders[n]=new z(i,r,t,this)},n.addAnnots=function(t){let e=D()(document.createDocumentFragment());this.annots.reduce(((t,n)=>{const i=n.getId();return t[i]||(t[i]=this.getOrCreateAnnotRender(n,e[0])),t}),this.annotRenders),this.$ui.append(e);let n=!1;for(let e=0,i=t.length;e<i;e++){if("highlight"===t[e].getType()){n=!0;break}}if(n){this.parent("pdfPageRender").redrawContent(!0)}},n.getAnnotRenders=function(){return this.annotRenders},n.removeAnnotRenders=function(t){this.annotRenders;const e=t.map((t=>{const e=t.getId(),n=this.getAnnotRender(e);return n&&n.remove(!0)}));return Promise.all(e)},n.redrawAnnotRenders=function(t){},n.movedAnnotRenders=function(t,e){for(let n=t.length;n--;){let i=t[n].getId(),r=this.getAnnotRender(i);r&&r.moved(e)}},n.addAnnotRenders=function(t){},n.updateAnnotRendersId=function(t,e){t in this.annotRenders&&(this.annotRenders[e]=this.annotRenders[t],delete this.annotRenders[t])},n.endRender=function(){let t=this.renderSerialPromise;t&&t.end().catch(ci)},n.invisibleRender=function(){this.endRender();let t=this.annotRenders;for(var e in t)t[e].invisibleRender()},n.showDownIcon=function(t){},n.startFilterAnnot=function(){this.annotFiltered=1,this.showAnnots=new Set},n.addShowAnnot=function(t){this.showAnnots.add(t)},n.endFilterAnnot=function(){this.annotFiltered&&this.rerenderAfterFilterTaskExecutor.exec((()=>{if(!this.isDestroyed)return this.render.apply(this,ai(w.Z,this.renderParams))}))},n._updatePageMeasureScaleRatio=function(t,e){if(0===e.length)return;const n=(t,e)=>{const n=e.x-t.x,i=e.y-t.y;let r=Math.abs(n),o=Math.abs(i);return Math.sqrt(r*r+o*o)};e.forEach((e=>{const i=e.getPDFPage().getIndex();t.getIndex()===i&&t.getMeasureScaleRatio().then((({ratioMap:i,unitName:r,scale:o})=>{t.getViewportRect().then((t=>{const s=e.getType();let a=!0;switch(s){case"circle":let{left:n,top:i}=e.getRect();a=xn({x:n,y:i},t);case"line":a=xn(e.getStartPoint(),t);break;case"polyline":case"polygon":let[...r]=e.getVertexes();if(r.length<1)return;a=xn({x:r[0].x,y:r[0].y},t)}let c,l,h,u,d=this.pdfViewer.getIoC().getInstanceByClass(si).getMeasurementInfo();if(o&&a)i.length?(c=i[0].value,l=Gn(i[0].unit),h=i[1].value,u=Gn(i[1].unit),d={userSpaceScaleValue:c,userSpaceUnit:l,realScaleValue:h,realUnit:u}):d=null;else{if(!d)return;o=1,c=d.userSpaceScaleValue,l=d.userSpaceUnit,h=d.realScaleValue,u=d.realUnit}let f=e.getContent(),p=f.indexOf("\n");p>=0&&(p+=1);const g=f.substr(0,p);let m=0;switch(s){case"circle":const t=Zn.caculateCircleArea(e.getRect(),d);return void e.setContent(`${g}${parseFloat(t*Math.pow(o,2)).toFixed(2)} sq ${r}`);case"line":let i=e.getStartPoint(),s=e.getEndPoint();m=n(i,s);break;case"polyline":let a=e.getVertexes(),c=a[0];for(let t=1;t<a.length;t++)m+=n(c,a[t]),c=a[t];break;case"polygon":let l=e.getVertexes();const h=Zn.caculatePolygonArea(l,d);return void e.setContent(`${g}${parseFloat(h*Math.pow(o,2)).toFixed(2)} sq ${r}`)}let v=m;if(d){v=On.convertTo(m*o,l)*(h/c)}else v=m*o;e.setContent(`${g}${parseFloat(v).toFixed(2)} ${r}`)}))}))}))},e}(K);var gi=pi;function mi(){if("undefined"!=typeof window){if(window.crypto)return function(){const t=new Uint32Array(1);return window.crypto.getRandomValues(t),t[0]/4294967296}();if(window.msCrypto)return function(){const t=new Uint32Array(1);return window.msCrypto.getRandomValues(t),t[0]/4294967296}()}return tt("random",Math)()}function vi(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const yi=function(){},wi=(0,_.createDOM)("canvas",{width:"0",class:"fv__tiles-canvas"}),bi=((0,_.createDOM)("div",{class:"fv__tiles-col"},[wi.cloneNode()]),(0,_.createDOM)("div",{class:"fv__tiles-row"}),(t,e=0)=>!t||t.right-t.left<=e||t.bottom-t.top<=e),Ai=(t,e)=>t.left>=e.left&&t.right<=e.right&&t.top>=e.top&&t.bottom<=e.bottom,Pi=(t,e,n)=>{if(!n&&t.left==e.left&&t.right==e.right&&t.top==e.top&&t.bottom==e.bottom)return[];let i={left:Math.max(t.left,e.left),bottom:Math.min(t.bottom,e.bottom),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top)};if(i.left<i.right&&i.top<i.bottom){if(n)return i;if(Ai(e,t))return[];let r,o;i.left==e.left?(r={left:i.right,right:e.right,top:e.top,bottom:e.bottom},o=i.top==e.top?{left:i.left,right:i.right,top:i.bottom,bottom:e.bottom}:{left:i.left,right:i.right,top:e.top,bottom:t.top}):i.right==e.right&&(o={left:e.left,right:i.left,top:e.top,bottom:e.bottom},r=i.top==e.top?{left:i.left,right:i.right,top:i.bottom,bottom:e.bottom}:{left:i.left,right:i.right,top:e.top,bottom:i.top});let s=[];return bi(o,0)||s.push(o),bi(r,0)||s.push(r),0!=s.length||bi(e)?s:[e]}return n?null:bi(e)?[]:[e]},Si=(t,e)=>{let n=t.left>e.left?t.left:e.left,i=t.right<e.right?t.right:e.right,r=t.bottom<e.bottom?t.bottom:e.bottom,o=t.top>e.top?t.top:e.top;if(!(n>=i||r<=o))return{left:n,right:i,bottom:r,top:o}},Ci=(t,e)=>t.left<=e.left&&t.right>=e.right&&t.bottom>=e.bottom&&t.top<=e.top;let Ei=function(){function t(t,e,n,i=!0){this.isDestroyed=!1,this.enableCache=i,this.cache={},this.getImageData=t,n&&(this.pageRender=n,this.api=n.page.api),this.tileTasks={},this.timer={};let r="fv__tiles-container";e=e?e.addClass(r):D()((0,_.createDOM)("div",{class:r})),this.setDom(e),this.updateCanvasMore=yi,this.updateCanvasContainer=yi,this.defer={},Object.defineProperties(this,{$canvases:{get:()=>this.$container.find(".fv__tiles-canvas")},rows:{get:()=>this.$container.find(".fv__tiles-row").length},$cols:{get:()=>this.$container.find(".fv__tiles-col")},cols:{get:()=>this.$container.find(".fv__tiles-row").eq(0).find(".fv__tiles-col").length}})}var e=t.prototype;return e.setDom=function(t){this.$container=t},e.redraw=function(t,e,n,i,r,o,s,a,c=0,l=0){let h;const u=this.getCurrentCanvas();if(u&&!u.isInvalid&&(h=this.getRenderedRect(u))){let t=this.getVisibleRealRect();if(t&&h.left<=t.left&&h.right>=t.right&&h.top<=t.top&&h.bottom>=t.bottom&&this.scale==s&&this.rotate===a&&this.showWidth===n&&this.showHeight===i)return Promise.resolve()}this.showWidth=n,this.showHeight=i;let d=[t,e,n,i,r,o,s,a,c,l];this.lastRedrawParams=d;let f=this.$container,p={left:c*s+"px",top:l*s+"px"};if(f.css(p),f.css(p),this.getRectBitmap){const t=!!this.scale&&this.scale!=s;return this.scale=s,this.rotate=a,this.renderVisibleRect(o,s,t)}return this.scale=s,this.rotate=a,this.updateDom(t,e,n,i,r,o,s,a,c,l),this.updateRenderCanvasSerial(t,e,n,i,r,o,s,a,c,l)},e.isRenderingDone=function(t,e){return t===this.scale&&e===this.$container.width()},e.updateDom=function(t,e,n,i,r,o,s,a,c=0,l=0,h=this.$container){if(0==n)return;let u={left:c*s+"px",top:l*s+"px"};this.updateCanvasContainer=()=>{h.css(u)},h.css(u);const d=n/_.dpr,f=i/_.dpr,p=D()((0,_.createDOM)("canvas",{id:"pdfcanvas",style:`width:${d}px;height:${f}px;`})),g=p[0];if(g.width=n,g.height=i,this.$container){const t=this.$container.find("#pdfcanvas");if(p.css("display",t.css("display")),this.$container.append(g),t&&t.length>0){let e=t[0];e.width=e.height=0,e.remove()}this.$container.show()}this.pageRender||this.lastRedrawParams||(this.lastRedrawParams=[t,e,n,i,r,o,s,a,c,l])},e.updateRenderCanvasSerial=function(t,e,n,i,r,o,s,a,c=0,l=0){let h=this.renderContentImageSerial;if(h&&h.end().catch((function(){})),0==n)return this.updateCanvasContainer(),Promise.resolve();h=this.renderContentImageSerial=new ot;var u=[];let d=r*s/o,f=r,p=parseInt(n%r+.5);p=p||1;let g=parseInt(i%r+.5);g=g||1;let m=c*s,v=l*s,y=this.visibleRect;for(let n=0,i=t;n<i;n++)for(let i=0,h=e;i<h;i++){if(y){let t=20,r=y.left-t,o=y.right+t,s=y.top-t,a=y.bottom+t,c=m+i*d,l=v+n*d;if(!(c+d>r&&c<o&&l+d>s&&l<a)){this.$canvases[e*n+i].width=0;continue}}let h=f,w=f;n===t-1&&(w=g),i===e-1&&(h=p),u.push(((t,e,n,i,r,o)=>()=>this.isDestroyed?Promise.resolve():this.updateCanvas(t,e,n,i,r,o,s,a,c,l))(n,i,h,w,r,o))}return h.serial(u)},e.updateCanvas=function(t,e,n,i,r,o,s,a,c,l){return this.renderImageData(t,e,n,i,r,o,s,a,c,l)},e.renderImageData=function(t,e,n,i,r,o,s,a,c,l){if(this.isDestroyed)return Promise.resolve();let h=[t,e,n,i,r,o,c,l,a].join("-"),u=this.cache,d=([h,"canvas"].join("-"),[h,"imageData"].join("-")),f=[h,"imageUrl"].join("-"),p=u[d];return(p?Promise.resolve(p):this.getImageData(t,e,n,i,r,o,c,l,a)).then((n=>{if(!n)return[];const{width:i,height:a,buffer:h,image:p,type:g,url:m}=n;u[d]={width:i,height:a,buffer:h,image:p,type:g,url:m};let v=this.getCurrentCanvas(),y=o/s;const w=this.lastRedrawParams[2],b=this.lastRedrawParams[3];let A=v.getContext("2d");if(0==i||0==a)return v.width=0,[A,t,e,i,a,r,o,c,l];if(Math.abs(v.width-w)>1&&(v.width=w,v.height=b,D()(v).css({width:this.showWidth/y,height:this.showHeight/y})),m)return new Promise(((n,s)=>{let h=u[f];if(h)return this.updateCanvasContainer(),A.drawImage(h,t*r,e*r),n([A,t,e,i,a,r,o,c,l]);let d=new Image;d.onload=()=>{u[f]=d,this.updateCanvasContainer(),A.drawImage(d,t*r,e*r),n([A,t,e,i,a,r,o,c,l])},d.src=m}));if(p)return new Promise(((n,s)=>{let h=u[f];if(h)return this.updateCanvasContainer(),A.drawImage(h,0,0),n([A,t,e,i,a,r,o,c,l]);try{let s=new Image;s.onload=()=>{u[f]=s,this.updateCanvasContainer(),A.drawImage(s,0,0),n([A,t,e,i,a,r,o,c,l])},s.src=URL.createObjectURL(p)}catch(t){console.log(t)}}));let P=new(Uint8ClampedArray||Uint8Array)(h),S=A.createImageData(i,a);return S.data.set(P),this.updateCanvasContainer(),this.$container.css({width:this.showWidth/y,height:this.showHeight/y}),A.putImageData(S,e*r,t*r),[v,A,t,e,i,a,r,o,c,l]})).then((([t,e,n,i,r,o,s])=>{this.updateCanvasMore(e,n,i,r,o,s,n,i)}))},e.hideContainer=function(){this.$container.hide(),this.invisibleRender()},e.showContainer=function(){let t=this.$container;if(t.is(":visible"))return;t.show();let e=this.lastRedrawParams;e&&this.redraw.apply(this,e)},e.setUpdateCanvasMore=function(t){this.updateCanvasMore=t},e.setRenderViewWatermark=function(t){this.isRenderViewWatermark=t},e.destroy=function(){this.offRender&&this.offRender(),this.isDestroyed=!0,delete this.getImageData,this.updateCanvasMore=yi,this.updateCanvasContainer=yi,this.$canvases.each((function(t,e){e.width=0}));let t=this.getCurrentCanvas();t&&(t.width=0,t.parentNode.removeChild(t)),this.$container.remove(),delete this.$container,this.clearCache()},e.setVisibleRect=function(t){this.visibleRect=t},e.clearCache=function(){let t=this.cache;for(var e in t)delete t[e];this.cache={};const n=this.getCurrentCanvas();n&&(n.isInvalid=!0),this.clearProgressiveTask()},e.clearProgressiveTask=function(){if(!this.getRectBitmap)return;for(const t in this.timer)clearTimeout(this.timer[t]);this.timer={};let t=[];for(let e in this.tileTasks)t.push(this.api.cancleProgress(e));return this.tileTasks={},this.offRender=null,Promise.all(t)},e.cancelInvisibleProgressiveTask=function(t){for(const e in this.tileTasks){const n=this.tileTasks[e];Si(n,t)||(this.timer[e]&&(clearTimeout(this.timer[e]),delete this.timer[e]),this.api.cancleProgress(e),delete this.tileTasks[e])}},e.invisibleRender=function(t=!1){if(this.enableCache&&this.getRectBitmap&&!t)return;this.$canvases.each((function(t,e){e.width=0}));let e=this.getCurrentCanvas();e&&(e.width=0,e.parentNode.removeChild(e)),this.clearCache()},e.invisibleCanvas=function(){},e.getRenderedRect=function(t){if(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}},e.recurToReduceRect=function(t,e){const n=[];for(let i=0;i<t.length;i++){const r=t[i],o=Pi(r,e);if(o.length){for(let e=0;e<o.length;e++)if(i==t.length-1)n.push(o[e]);else{let r=t.slice(i+1);const s=this.recurToReduceRect(r,o[e]);n.push.apply(n,vi(w.Z,s))}break}if(Ci(r,e))return[]}return n},e.pushToRenderRectsQueue=function(t){let e=[];for(const t in this.tileTasks){const n=this.tileTasks[t];e.push(n)}if(0==e.length)return t;let n=[];for(const i of t)n=n.concat(this.recurToReduceRect(e,i));return n},e.getCurrentCanvas=function(){if(!this.$container)return null;const t=this.$container.find("#pdfcanvas");return t&&t.length?t[0]:null},e.renderVisibleRect=function(t,e,n){if(0===e)return Promise.resolve();this.isZoom=n;const i=this.visibleRect.right-this.visibleRect.left,r=this.visibleRect.bottom-this.visibleRect.top;let o,s=this.getVisibleRealRect();const a=this.getCurrentCanvas();if(a&&a.left==s.left&&a.top==s.top&&a.right==s.right&&a.bottom==s.bottom)o=a,a.isInvalid=!1;else{const t=D()((0,_.createDOM)("canvas",{id:"pdfcanvas",style:`width:${i}px;height:${r}px;left:${this.visibleRect.left}px;top:${this.visibleRect.top}px; position:relative;`}));o=t[0],o.left=s.left,o.top=s.top,o.right=s.right,o.bottom=s.bottom,o.width=s.right-s.left,o.height=s.bottom-s.top}this.isZoom?this.clearProgressiveTask():this.cancelInvisibleProgressiveTask(s);if(this.pageRender.pdfViewer.getScrollWrap().disabled)return;let c=o.getContext("2d"),l=[s];if(!this.isZoom&&a&&o!=a&&!a.isInvalid){const t=this.getRenderedRect(a);if(t){const e=Si(t,s);if(e&&a){const n=t,i=e.right-e.left,r=e.bottom-e.top,o={left:e.left-n.left,top:e.top-n.top,width:i,height:r},l={left:e.left-s.left,top:e.top-s.top,width:i,height:r};c.drawImage(a,o.left,o.top,i,r,l.left,l.top,i,r)}l=Pi(t,s)}}const h=t=>{let e=this.getCurrentCanvas();e!=o&&(this.$container.append(o),this.$container.show(),e&&(e.width=e.height=0,e.remove(),e=null))};if(this.isZoom||h(),l=this.pushToRenderRectsQueue(l),!l.length)return;const u=[];return l.forEach((e=>{let n={x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top};if(0==n.width||0==n.height)return;let i=""+Date.now()+mi();this.tileTasks[i]=e;const r=this.getRectBitmap(n,t,i,this.rotate).then((t=>{if(t){const e=this.isZoom?o:this.getCurrentCanvas(),r=this.displayImage(t,n,e),s=t=>{if(this.api){const t=this.api.continueProgress(i).then((t=>{const e=this.isZoom?o:this.getCurrentCanvas();this.displayImage(t,n,e)}));t.then((t=>{this.tileTasks[i]&&(this.timer[i]&&(clearTimeout(this.timer[i]),delete this.timer[i]),this.timer[i]=setTimeout(s.bind(this),10))}))}};return 100!=t.rate&&s(),r}}));u.push(r)})),Promise.all(u).then((t=>{if(this.isZoom){t.every((t=>1==t))&&h()}}))},e.displayImage=function(t,e,n){let{buffer:i,isFirst:r,image:o,progressiveId:s,x:a,y:c,width:l,height:h,isVirtual:u}=t,[d,f,p,g,m,v,y,w,b,A]=this.lastRedrawParams;const P=4*v/3,S=t.scale||P,C=()=>{this.tileTasks[s]&&(this.api.cancleProgress(s),delete this.tileTasks[s]),this.timer[s]&&(clearTimeout(this.timer[s]),delete this.timer[s])},E=this.pageRender.pdfViewer.getScrollWrap();if(t.isEmpty||this.isDestroyed||!u&&!this.tileTasks[s])return C(),Promise.resolve(0);if(Math.abs(S-P)>1e-6||E.disabled)return C(),Promise.resolve(0);const x=this.$container;let D;x.css({transform:"scale(1)"});let I=(0,_.createDeferred)();if(o){let t=new Image;t.onload=()=>{D=function(e,n,i){e.drawImage(t,n,i)},I.resolve()},t.onerror=function(){I.reject()},t.src=URL.createObjectURL(o)}else{if(!i)return I.resolve();{let t=new(Uint8ClampedArray||Uint8Array)(i);if(!n)return;let e=n.getContext("2d").createImageData(l,h);if(e.data.set(t),_.isChrome&&this.isRenderViewWatermark){var R=document.createElement("canvas"),T=R.getContext("2d");R.width=l,R.height=h,T.putImageData(e,0,0);var F=new Image;F.src=R.toDataURL(),D=function(t,e,n){t.drawImage(F,e,n)}}else D=function(t,n,i){t.putImageData(e,n,i)};I.resolve()}}return I.promise.then((()=>{const i=n.getContext("2d"),o=n.left,u=n.top;return D(i,a-o,c-u),this.updateCanvasMore(i,a,c,o,u,l,h,1e6,0,0,e),this.renderedScale=S,r&&this.setDom(x),100==t.rate&&(this.timer[s]&&(clearTimeout(this.timer[s]),delete this.timer[s]),this.tileTasks[s]&&(this.api.cancleProgress(s),delete this.tileTasks[s]),0==Object.keys(this.tileTasks).length&&(this.offRender=null)),1}))},e.getVisibleRealRect=function(){let t=this.visibleRect;return t?{left:parseInt(t.left*_.dpr+.5),right:parseInt(t.right*_.dpr+.5),top:parseInt(t.top*_.dpr+.5),bottom:parseInt(t.bottom*_.dpr+.5)}:null},e.clearCanvasContent=function(){Array.from(this.$canvases).forEach((t=>{t.getContext("2d").clearRect(0,0,t.width,t.height)}))},t}();var xi=Ei,Di=m(3214),Ii=m.n(Di);var Ri=function(){function t(t,e){this.$handler=t,this.render=e,this.states=[]}var e=t.prototype;return e.active=function(){},e.destroy=function(){},e.intoState=function(){},e.outState=function(){},e.resetState=function(){},e.setStates=function(t=this.states){this.states=t},e.getStates=function(){return this.states},e.clearStates=function(){},t}();function Ti(){let t,e=this,n=e.$handler,i=n[0],r=this.render,o=r.pdfViewer.eventEmitter,s=new(Ii().Manager)(i,{recognizers:[[Ii().Pan,{direction:Ii().DIRECTION_ALL}]]});return s.add(new(Ii().Tap)({event:"doubletap",taps:2})),s.add(new(Ii().Tap)({event:"singletap"})),s.get("doubletap").recognizeWith("singletap"),s.get("singletap").requireFailure("doubletap"),s.on("singletap",(t=>{let e=r.annotsRender;e?(e.unActiveAnnot(),r.parent("pdfDocRender").getFormRender().blurControl(),o.emit(nt.tapPage,t)):o.emit(nt.tapPage,t)})),s.on("doubletap",(t=>{let e=r.annotsRender;e?(e.unActiveAnnot(),r.parent("pdfDocRender").getFormRender().blurControl(),o.emit(nt.doubleTapPage,t)):o.emit(nt.doubleTapPage,t)})),s.on("press",(t=>{let e=r.annotsRender;e?(e.unActiveAnnot(),r.parent("pdfDocRender").getFormRender().blurControl(),o.emit(nt.pressPage,t)):o.emit(nt.pressPage,t)})),i.oncontextmenu=function(t){t.preventDefault()},n.on("mouseup",t=t=>{if(3!==t.which)return;let e=r.annotsRender;e?(e.unActiveAnnot(),o.emit(nt.rightClickPage,t)):o.emit(nt.rightClickPage,t)}),function(){let r;s.destroy(),n.off("mouseup",t),e=r,n=r,i=r,o=r,t=r}}var Fi=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handlers={hand:Ti},i.destroyStateHandlers={},i}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){if(!this.activated){this.activated=!0,this.$handler.addClass("fv__active")}this.states.length||this.resetState()},n.destroy=function(){this.$handler.removeClass("fv__active")},n.intoState=function(t){let e=this.states;if(-1!==e.indexOf(t))return;e.push(t);let n=this.handlers[t];n&&(this.destroyStateHandlers[t]=n.bind(this)())},n.outState=function(t){let e,n;(e=this.destroyStateHandlers[t])&&(e.bind(this)(),delete this.destroyStateHandlers[t]),-1!==(n=this.states.indexOf(t))&&this.states.splice(n,1)},n.resetState=function(){this.setStates(["hand"])},n.setStates=function(t){let e=this.states;for(let t=0,n=e.length;t<n;t++)this.outState(e[t]);for(let e=0,n=t.length;e<n;e++)this.intoState(t[e])},n.getStates=function(){return this.states},e}(Ri);let _i=function(){function t(t,e,n,i=1,r=!1){this.pageRender=t,this.secondaryScale=i,this.fixedPosition=r;const o=document.createElement("div");o.classList.add("fv__page-area-renderer");const s=document.createElement("canvas");o.appendChild(s),this.canvas=s,this.element=o,this.setDimension(e,n),this.offsetPageX=0,this.offsetPageY=0}var e=t.prototype;return e.setDimension=function(t,e){this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.element.style.cssText+=`width: ${t}px;height:${e}px`},e.setPosition=function(t,e){this.offsetPageX=t,this.offsetPageY=e},e.setSecondaryScale=function(t){t=Number(t),(!isFinite(t)||t<=0)&&(t=1),this.secondaryScale=t},e.update=function(){const t=this.pageRender;return t.getPDFPage().then((e=>{let n=e.doc.api;this.tasks&&(n.cancleProgress(this.tasks.id),this.tasks=null);const i=t.scale,r=this.canvas,o=4*i/3*this.secondaryScale,s=t.getShowWidth()*this.secondaryScale,a=t.getShowHeight()*this.secondaryScale,c=r.width,l=r.height,h=c/2,u=l/2,d=this.offsetPageX*this.secondaryScale,f=this.offsetPageY*this.secondaryScale;let p=d-h,g=d+h,m=f-u,v=f+u,y=0,w=0;this.fixedPosition?(p<0&&(p=0,g=p+c),g>s&&(g=s,p=g-c),m<0&&(m=0,v=m+l),v>a&&(v=a,m=v-l)):(p<0?y=Math.min(-p,h):g>s&&(y=Math.max(s-g,-h)),m<0?w=Math.min(-m,u):v>a&&(w=Math.max(a-v,-u)),r.style.cssText+=`left: ${y}px; top: ${w}px`);const b=Math.max(0,p),A=Math.min(g,s),P=Math.max(0,m),S=Math.min(v,a),C=Math.round(A-b),E=Math.round(S-P),x=Math.abs(Math.min(0,y)),D=Math.abs(Math.min(0,w));let I=""+Date.now()+mi();return this.tasks={id:I,canvasDrawingLeft:x,canvasDrawingTop:D},this.getPageBitmap(e.getPDFDoc().getId(),e.getId(),o,this.pageRender.rotate,{x:b,y:P,width:C,height:E},I,_.dpr).then(this.displayImage.bind(this))}))},e.displayImage=function(t){let{buffer:e,image:n,progressiveId:i,x:r,y:o,width:s,height:a,rate:c}=t;if(t.isEmpty||!this.tasks)return void(this.tasks=null);if(this.tasks.id!=i)return;let l=this.canvas;const h=l.getContext("2d");if(h.clearRect(0,0,this.canvas.width,this.canvas.height),n)return new Promise(((t,e)=>{try{let e=new Image;e.onload=function(){h.drawImage(e,0,0,s,a),URL.revokeObjectURL(e.src),t(l)},e.src=URL.createObjectURL(n)}catch(t){console.log(t)}}));{const t=h.createImageData(s,a);t.data.set(new(Uint8ClampedArray||Uint8Array)(e)),h.putImageData(t,this.tasks.canvasDrawingLeft,this.tasks.canvasDrawingTop)}return 100==c&&(this.tasks=null),l},e.getPageBitmap=function(t,e,n,i,r,o,s){return this.pageRender.getPDFPage().then((a=>a.doc.api.getPageBitmap(t,e,n,i,r,["page","annot","form"],"view",o,!1,{hotAnnot:0,hideAnnots:[],dpr:s}).then((c=>{const l=c=>c.rate<100?a.doc.api.continueProgress(c.progressiveId).then(l):c.buffer||c.image?c:a.doc.api.getPageBitmap(t,e,n,i,r,["page","annot","form"],"view",o,!1,{hotAnnot:0,hideAnnots:[],dpr:s});return c.rate>=100?c:l(c)}))))},t}(),ki=function(){function t(t="Center",e=0,n=0,i=1,r=1,o=-45,s=100){this.position=t,this.offsetX=e,this.offsetY=n,this.scaleX=i,this.scaleY=r,this.rotation=o,this.opacity=s}var e=t.prototype;return e.setPosition=function(t){this.position=t},e.getPosition=function(){return this.position},e.setOffsetX=function(t){this.offsetX=t},e.getOffsetX=function(){return this.offsetX},e.setOffsetY=function(t){this.offsetY=t},e.getOffsetY=function(){return this.offsetY},e.setScaleX=function(t){this.scaleX=t},e.getScaleX=function(){return this.scaleX},e.setScaleY=function(t){this.scaleY=t},e.getScaleY=function(){return this.scaleY},e.setRotation=function(t){this.rotation=t},e.getRotation=function(){return this.rotation},e.setOpacity=function(t){this.opacity=t},e.getOpacity=function(){return this.opacity},t}(),Mi=function(){function t(t="Microsoft Yahei",e=20,n="#000000",i="normal",r=10,o="center"){this.font=t,this.fontSize=e,this.color=n,this.fontStyle=i,this.lineSpace=r,this.alignment=o}var e=t.prototype;return e.setFont=function(t){this.font=t},e.getFont=function(){return this.font},e.setFontSize=function(t){this.fontSize=t},e.getFontSize=function(){return this.fontSize},e.setColor=function(t){this.color=t},e.getColor=function(){return this.color},e.setFontStyle=function(t){this.fontStyle=t},e.getFontStyle=function(){return this.fontStyle},e.setLineSpace=function(t){this.lineSpace=t},e.getLineSpace=function(){return this.lineSpace},e.setAlignment=function(t){this.alignment=t},e.getAlignment=function(){return this.alignment},t}(),Oi=function(){function t(t,e){this.watermark=t,this.imageURL=e,this.originImageWidth=0,this.originImageHeight=0,this.imagePromise=this.loadImage()}var e=t.prototype;return e.ready=function(){return this.imagePromise.then((t=>(this.image=t,this.originImageWidth=t.width,this.originImageHeight=t.height,this)))},e.render=function(t,e,n,i){if(!this.image)throw new Error("Image watermark renderer has not been ready!");const r=document.createElement("canvas");r.width=n,r.height=i;const o=this.watermark.watermarkSettings,s=o.getOffsetX(),a=o.getOffsetY(),c=o.getScaleX(),l=o.getScaleY(),h=r.getContext("2d"),u=this.watermark.smartScale;h.globalAlpha=o.opacity/100;const d=this.image;return d.width=this.originImageWidth*c*u,d.height=this.originImageHeight*l*u,h.translate(-t,-e),this.performTransformation(h,d),h.drawImage(d,-d.width/2+s,-d.height/2+a,d.width,d.height),r},e.performTransformation=function(t,e){const n=this.watermark.watermarkSettings,i=n.getRotation(),{x:r,y:o}=function(t,e,n){let i,r,o=Math.sqrt(Math.pow(t/2,2)+Math.pow(e/2,2)),s=Math.asin(e/2/o)/(Math.PI/180),a=(n+360)%360;a>=270&&a<360||a>=90&&a<180?(i=n-s,r=s+n):(i=n+s,r=n-s);let c=o*Math.abs(Math.sin(i*Math.PI/180));return{x:o*Math.abs(Math.cos(r*Math.PI/180))-t/2,y:c-e/2}}(e.width,e.height,i),s=this.watermark.showWidth,a=this.watermark.showHeight;switch(n.getPosition()){case"TopLeft":c(r+e.width/2,o+e.height/2);break;case"TopCenter":c(s/2,o+e.height/2);break;case"TopRight":c(s-r-e.width/2,o+e.height/2);break;case"CenterLeft":c(r+e.width/2,a/2);break;case"Center":c(s/2,a/2);break;case"CenterRight":c(s-r-e.width/2,a/2);break;case"BottomLeft":c(r+e.width/2,a-o-e.height/2);break;case"BottomCenter":c(s/2,a-o-e.height/2);break;case"BottomRight":c(s-r-e.width/2,a-o-e.height/2)}function c(e,n){t.translate(e,n)}i%360!=0&&t.rotate(i*Math.PI/180)},e.loadImage=function(){const t=document.createElement("img");return new Promise(((e,n)=>{t.onload=()=>{e(t)},t.onerror=t=>{const e=new Error(`Failed to load watermark image: ${this.imageURL}`);e.originEvent=t,n(e)},t.src=this.imageURL}))},t}();let Li=function(){function t(t,e){this.watermark=t,this.text=e,this.allLines=e.split(/[\r\n]/)}var e=t.prototype;return e.ready=function(){return Promise.resolve(this)},e.render=function(t,e,n,i){const r=document.createElement("canvas");r.width=n,r.height=i;const{smartScale:o,watermarkTextProperties:s,watermarkSettings:a}=this.watermark,c=s.getFontSize()*o,l=s.getLineSpace()*o,h=s.getColor(),u=s.getFont(),d=r.getContext("2d");d.font=`${c}px ${u}`,d.fillStyle=h,d.lineWidth=1,d.strokeStyle=h,d.textBaseline="top",d.globalAlpha=a.getOpacity()/100;const f=this.allLines,p=f.length*c+(f.length-1)*l,g=this.resolveMaxWidth(d);return d.translate(-t,-e),this.performTransformation(d,g,p),this.renderText(d,g,p),r},e.renderText=function(t,e,n){const i=this.allLines,{smartScale:r,watermarkTextProperties:o,watermarkSettings:s}=this.watermark,a=o.getFontSize()*r,c=o.getLineSpace()*r,l=o.getFontStyle(),h=o.getAlignment(),u=s.getOffsetX(),d=s.getOffsetY();a<12&&t.scale(a/12,a/12),i.forEach(((i,r)=>{let o,s,f=i.replace(/(^\s*)|(\s*$)/g,""),p=f.length*a,g=0,m=0;switch(h){case"left":t.textAlign="left",o=-p/2-(e-p)/2,s=p/2-(e-p)/2,g=-e/2,m=-n/2;break;case"right":t.textAlign="right",o=-p/2+(e-p)/2,s=p/2+(e-p)/2,g=e/2,m=-n/2;break;default:t.textAlign="center",o=-p/2,s=p/2,m=-n/2}t.fillText(f,g+u,m+r*(c+a)+d),"underline"===l&&(t.moveTo(o+u,-n/2+a+r*(a+c)+d),t.lineTo(s+u,-n/2+a+r*(a+c)+d),t.stroke())}))},e.performTransformation=function(t,e,n){const{showWidth:i,showHeight:r,watermarkSettings:o}=this.watermark,s=o.getRotation(),{x:a,y:c}=function(t,e,n){let i,r,o=Math.sqrt(Math.pow(t/2,2)+Math.pow(e/2,2)),s=Math.asin(e/2/o)/(Math.PI/180),a=(n+360)%360;a>=270&&a<360||a>=90&&a<180?(i=n-s,r=s+n):(i=n+s,r=n-s);let c=o*Math.abs(Math.sin(i*Math.PI/180));return{x:o*Math.abs(Math.cos(r*Math.PI/180))-t/2,y:c-e/2}}(e,n,s);switch(o.getPosition()){case"TopLeft":l(a+e/2,c+n/2);break;case"TopCenter":l(i/2,c+n/2);break;case"TopRight":l(i-a-e/2,c+n/2);break;case"CenterLeft":l(a+e/2,r/2);break;case"Center":l(i/2,r/2);break;case"CenterRight":l(i-a-e/2,r/2);break;case"BottomLeft":l(a+e/2,r-c-n/2);break;case"BottomCenter":l(i/2,r-c-n/2);break;case"BottomRight":l(i-a-e/2,r-c-n/2)}function l(e,n){t.translate(e,n)}s%360!=0&&t.rotate(s*Math.PI/180)},e.resolveMaxWidth=function(t){const e=this.text.split(/[\r\n]+/);return Math.max.apply(Math,e.map((e=>t.measureText(e).width)))},t}();let Ni=function(){function t(t){this.watermark=t}var e=t.prototype;return e.getColumnSpace=function(){const{columnSpace:t,smartScale:e}=this.watermark;return V(t)*e},e.getRowSpace=function(){const{rowSpace:t,smartScale:e}=this.watermark;return V(t)*e},e.getColor=function(){return this.watermark.watermarkTextProperties.getColor()},e.resolveDimensions=function(t,e,n){return Math.ceil(t/(e+n))},t}();function Bi(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let Vi=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).watermark=e,i.text=n,i.allLines=n.split(/[\r\n]/),i}(0,E.Z)(e,t);var n=e.prototype;return n.ready=function(){return Promise.resolve(this)},n.setupFontInfo=function(t){const{watermarkTextProperties:e}=this.watermark,n=this.getFontSize(),i=e.getColor(),r=this.getFont();t.font=`${Math.max(12,n)}px ${r}`,t.fillStyle=i,t.lineWidth=1,t.strokeStyle=i,t.textBaseline="top"},n.getFontSize=function(){const{smartScale:t,watermarkTextProperties:e}=this.watermark;return V(e.getFontSize())*t},n.getFont=function(){return this.watermark.watermarkTextProperties.getFont()},n.getLineSpacePx=function(){const{watermarkTextProperties:t}=this.watermark;return V(t.getLineSpace())},n.resolveTextBlockRect=function(t){return this.invoke(t,(t=>{const e=this.getLineSpacePx();this.setupFontInfo(t);const n=this.getFontSize(),i=n<12?n/12:1,r=this.allLines.map((e=>{const n=t.measureText(e);return{width:n.width*i,height:(n.actualBoundingBoxDescent-n.actualBoundingBoxAscent)*i}})),o=r.reduce(((t,e)=>t+e.height),0)+e*(r.length-1),s=Math.max.apply(Math,Bi(w.Z,r.map((t=>t.width))));return{width:s,height:o,sizes:r,fontScale:i}}))},n.invoke=function(t,e){let n=!1;try{t.save();const i=e(t);return"function"==typeof i.then&&"function"==typeof i.finally&&(n=!0,i.finally((()=>{t.restore()}))),i}finally{n||t.restore()}},e}(Ni);function Ui(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}function Hi(t,e,n){const i=t/2,r=e/2,o=[{x:-i,y:-r},{x:i,y:-r},{x:-i,y:r},{x:i,y:r}].map((t=>({x:t.x*Math.cos(n)-t.y*Math.sin(n),y:t.x*Math.sin(n)+t.y*Math.cos(n)}))),s=t/(Math.max.apply(Math,Ui(w.Z,o.map((t=>t.x))))-Math.min.apply(Math,Ui(w.Z,o.map((t=>t.x))))),a=e/(Math.max.apply(Math,Ui(w.Z,o.map((t=>t.y))))-Math.min.apply(Math,Ui(w.Z,o.map((t=>t.y)))));return Math.min(s,a)}let ji=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.render=function(t,e,n,i){const r=document.createElement("canvas");r.width=n,r.height=i;const o=r.getContext("2d");if(!o)throw new Error("An unknown error has occurred and the view watermark cannot be rendered!");const s=this.resolveTextBlockRect(o),{smartScale:a,showWidth:c,showHeight:l,watermarkSettings:{opacity:h,rotation:u,scaleX:d,scaleY:f}}=this.watermark;this.setupFontInfo(o);const p=(u+360)%360/180*Math.PI;let g=Hi(c,l,p);const m=.5*c-t,v=.5*l-e;o.globalAlpha=h/100,o.translate(m,v),o.scale(g,g),o.rotate(-p),o.translate(-m,-v);const y=this.getColumnSpace(),w=this.getRowSpace(),b=s.width*d*s.fontScale,A=s.height*f*s.fontScale,P=this.resolveDimensions(c,b,y),S=this.resolveDimensions(l,A,w),C={left:t,top:e,right:t+n,bottom:e+i};for(let t=0;t<=P;t++){const e=t*b+y*t;for(let n=0;n<=S;n++){const i=n*A+w*n;this.renderText(e,i,s,C,o,t,n)}}return r},n.renderText=function(t,e,n,i,r,o,s){let a=e;const{watermarkTextProperties:{fontStyle:c,color:l,alignment:h},smartScale:u,watermarkSettings:{scaleX:d,scaleY:f}}=this.watermark,{sizes:p,fontScale:g}=n,m=this.getLineSpacePx()*f*u,v="underline"===c,y=this.allLines.map(((t,e)=>{const{width:n}=p[e];return n*d*g})),w=n.width*d*g;this.allLines.some(((e,n)=>{const{width:i,height:o}=p[n],s=i*d*g,c=o*f*g,b=(t=>{switch(h){case"right":return w-y[t];case"center":return.5*(w-y[t])}return 0})(n);if(r.save(),r.scale(g,g),r.fillText(e,(t+b)/g,a/g),r.restore(),v){r.save(),r.imageSmoothingEnabled=!0,r.lineWidth=Math.floor(1*u),r.strokeStyle=l;const e=a+c;r.moveTo(t+b,e),r.lineTo(t+b+s,e),r.stroke(),r.restore()}return a+=c+m,!1}))},e}(Vi),$i=function(t){function e(e,n){var i;return(i=t.call(this,e)||this).watermark=e,i.imageURL=n,i.originImageWidth=0,i.originImageHeight=0,i.imagePromise=i.loadImage(),i}(0,E.Z)(e,t);var n=e.prototype;return n.ready=function(){return this.imagePromise.then((t=>(this.image=t,this.originImageWidth=t.width,this.originImageHeight=t.height,this)))},n.render=function(t,e,n,i){if(!this.image)throw new Error("Image watermark renderer has not been ready!");const r=document.createElement("canvas");r.width=n,r.height=i;const o=r.getContext("2d");if(!o)throw new Error("An unknown error has occurred and the view watermark cannot be rendered!");const{smartScale:s,showWidth:a,showHeight:c,watermarkSettings:{opacity:l,rotation:h,scaleX:u,scaleY:d}}=this.watermark,f=(h+360)%360/180*Math.PI;let p=Hi(a,c,f);const g=.5*a-t,m=.5*c-e;o.globalAlpha=l/100,o.translate(g,m),o.scale(p,p),o.rotate(-f),o.translate(-g-t,-m-e);const v=this.getColumnSpace(),y=this.getRowSpace(),w=this.originImageWidth*u*s,b=this.originImageHeight*d*s;this.image.width=w,this.image.height=b;const A=this.resolveDimensions(a,w,v),P=this.resolveDimensions(c,b,y);for(let t=0;t<=A;t++){const e=t*w+v*t;for(let t=0;t<=P;t++){const n=t*b+y*t;o.drawImage(this.image,e,n,w,b)}}return r},n.loadImage=function(){const t=document.createElement("img");return new Promise(((e,n)=>{t.onload=()=>{e(t)},t.onerror=t=>{const e=new Error(`Failed to load watermark image: ${this.imageURL}`);e.originEvent=t,n(e)},0===this.imageURL.indexOf("blob")||0===this.imageURL.indexOf("data")?t.src=this.imageURL:function(t){if(Wi.has(t))return Wi.get(t);{const e=fetch(t).then((t=>t.blob())).then((t=>URL.createObjectURL(t)));return Wi.set(t,e),e}}(this.imageURL).then((e=>{t.src=e}))}))},e}(Ni);const Wi=new Map;let Yi=function(){function t(t,e,n,i,{isMultiline:r=!1,rowSpace:o=0,columnSpace:s=0,watermarkSettings:a={position:"Center",offsetX:0,offsetY:0,scaleX:1,scaleY:1,rotation:-45,opacity:100},watermarkTextProperties:c={font:"Microsoft Yahei",fontSize:20,color:"#000000",fontStyle:"normal",lineSpace:10,alignment:"center"}}={}){this.isMultiline=r,this.rowSpace=o,this.columnSpace=s,this.showWidth=t,this.showHeight=e,this.tileSize=n,this.smartScale=i;let{position:l,offsetX:h,offsetY:u,scaleX:d,scaleY:f,rotation:p,opacity:g}=a,{font:m,fontSize:v,color:y,fontStyle:w,lineSpace:b,alignment:A}=c;this.watermarkSettings=new ki(l,h,u,d,f,p,g),this.watermarkTextProperties=new Mi(m,v,y,w,b,A)}var e=t.prototype;return e.exportDataURL=function({content:t,type:e}){const n=t=>t.toDataURL();return"text"===e?this.createTextWatermark(t).then(n):"image"===e?this.createImageWatermark(t).then(n):void 0},e.getWatermarkRenderer=function({content:t,type:e}){switch(e){case"text":return this.isMultiline?new ji(this,t).ready():new Li(this,t).ready();case"image":return this.isMultiline?new $i(this,t).ready():new Oi(this,t).ready()}},e.createImageWatermark=function(t){const e=(0,_.createDeferred)();let n=document.createElement("canvas");n.width=this.showWidth,n.height=this.showHeight;let i=n.getContext("2d"),r=n.getContext("2d"),o=new Image;o.src=t;const s=this.watermarkSettings,a=s.getOffsetX(),c=s.getOffsetY(),l=s.getScaleX(),h=s.getScaleY(),u=s.getRotation(),d=this.showWidth,f=this.showHeight;return o.onload=()=>{o.width=o.width*l*this.smartScale,o.height=o.height*h*this.smartScale,Gi(i,s.getOpacity()),i.save();let{x:t,y:p}=Ki(o.width,o.height,u);switch(s.getPosition()){case"TopLeft":r.translate(t+o.width/2,p+o.height/2);break;case"TopCenter":r.translate(d/2,p+o.height/2);break;case"TopRight":r.translate(d-t-o.width/2,p+o.height/2);break;case"CenterLeft":r.translate(t+o.width/2,f/2);break;case"Center":r.translate(d/2,f/2);break;case"CenterRight":r.translate(d-t-o.width/2,f/2);break;case"BottomLeft":r.translate(t+o.width/2,f-p-o.height/2);break;case"BottomCenter":r.translate(d/2,f-p-o.height/2);break;case"BottomRight":r.translate(d-t-o.width/2,f-p-o.height/2)}u%360!=0&&r.rotate(u*Math.PI/180),r.drawImage(o,-o.width/2+a,-o.height/2+c,o.width,o.height),i.restore(),e.resolve(n)},o.onerror=t=>{const n=new Error("Failed to load image");n.originEvent=t,e.reject(n)},o.oncancel=t=>{const n=new Error("Load image has been cancelled");n.originEvent=t,e.reject(n)},e.promise},e.createTextWatermark=function(t){const e=(0,_.createDeferred)();let n=document.createElement("canvas");n.width=this.showWidth,n.height=this.showHeight;let i=t.split("\n"),r=n.getContext("2d"),o=n.getContext("2d"),s=this.showWidth,a=this.showHeight;const c=this.watermarkTextProperties,l=c.getFontSize()*this.smartScale,h=c.getLineSpace()*this.smartScale,u=c.getFontStyle(),d=c.getColor(),f=c.getAlignment(),p=c.getFont();o.font=l+"px "+p,o.fillStyle=d;const g=this.watermarkSettings,m=g.getOffsetX(),v=g.getOffsetY(),y=(g.getScaleX(),g.getScaleY(),g.getRotation());let w=0,b=i.length,A=b*l+(b-1)*h;i.map((t=>{let e=t.replace(/\s+/g,"");w=Math.max(e.length*l,w)})),o.lineWidth=1,o.strokeStyle=d,r.textBaseline="top",Gi(r,g.getOpacity());let{x:P,y:S}=Ki(w,A,y);switch(g.getPosition()){case"TopLeft":o.translate(P+w/2,S+A/2);break;case"TopCenter":o.translate(s/2,S+A/2);break;case"TopRight":o.translate(s-P-w/2,S+A/2);break;case"CenterLeft":o.translate(P+w/2,a/2);break;case"Center":o.translate(s/2,a/2);break;case"CenterRight":o.translate(s-P-w/2,a/2);break;case"BottomLeft":o.translate(P+w/2,a-S-A/2);break;case"BottomCenter":o.translate(s/2,a-S-A/2);break;case"BottomRight":o.translate(s-P-w/2,a-S-A/2)}return o.rotate(y*Math.PI/180),l<12&&o.scale(l/12,l/12),i.map(((t,e)=>{let n,i,s=t.replace(/(^\s*)|(\s*$)/g,""),a=s.length*l,c=0,d=0;switch(f){case"left":r.textAlign="left",n=-a/2-(w-a)/2,i=a/2-(w-a)/2,c=-w/2,d=-A/2;break;case"right":r.textAlign="right",n=-a/2+(w-a)/2,i=a/2+(w-a)/2,c=w/2,d=-A/2;break;default:r.textAlign="center",n=-a/2,i=a/2,d=-A/2}o.fillText(s,c+m,d+e*(h+l)+v),"underline"===u&&(o.moveTo(n,-A/2+l+e*(l+h)),o.lineTo(i,-A/2+l+e*(l+h)),o.stroke())})),e.resolve(n),e.promise},e.getWatermarkSettings=function(){return this.watermarkSettings},e.getWatermarkTextProperties=function(){return this.watermarkTextProperties},e.getHeight=function(){return this.showHeight},e.getWidth=function(){return this.showWidth},t}();function Gi(t,e){t.globalAlpha=e/100}function Ki(t,e,n){let i,r,o=Math.sqrt(Math.pow(t/2,2)+Math.pow(e/2,2)),s=Math.asin(e/2/o)/(Math.PI/180),a=(n+360)%360;a>=270&&a<360||a>=90&&a<180?(i=n-s,r=s+n):(i=n+s,r=n-s);let c=o*Math.abs(Math.sin(i*Math.PI/180));return{x:o*Math.abs(Math.cos(r*Math.PI/180))-t/2,y:c-e/2}}let qi=function(t){function e(e,n,i){var r;return(r=t.call(this,i)||this).name="customsRender",r.$ui=e,r.customs=n,r.customRenders={},r}(0,E.Z)(e,t);var n=e.prototype;return n.render=function(t,e=0){this.scale=t,this.rotate=e;let n=this.customs;this.adjustCustomsRenderInit(n);let i=this.pdfViewer.customRenderManager,r=this.customRenders;return Promise.all(n.map((n=>r[i.getCustomDataId(n)].render(t,e))))},n.activeCustom=function(t){let e=this.customRenders[this.customManager.getCustomDataId(t)];return e?(this.currentActiveCustomRender=e,e.render(this.scale,this.rotate)):Promise.reject(new Error("Custom render not found!"))},n.unActiveCustoms=function(){let t=this.currentActiveCustomRender;if(t)return t.unActive()},n.adjustCustomsRenderInit=function(t){let e=this.pdfViewer.customRenderManager,n=this.customRenders,i=document.createDocumentFragment();t.filter((t=>!n[e.getCustomDataId(t)])).map((t=>{let r=document.createElement("div"),o=document.createElement("div");i.appendChild(r),i.appendChild(o),n[e.getCustomDataId(t)]=new(e.get(t))(r,o,t,this)})).length&&this.$ui.append(i)},n.addCustomRenders=function(t){this.adjustCustomsRenderInit(t);let e=this.pdfViewer.customRenderManager,n=this.customRenders,i=this.scale,r=this.rotate;return Promise.all(t.map((t=>n[e.getCustomDataId(t)].render(i,r))))},n.removeCustomRenders=function(t){let e={},n=this.pdfViewer.customRenderManager,i=this.customRenders;t.map((t=>{let r=n.getCustomDataId(t);e[r]=1,delete i[r]}));let r=this.customs;for(let t=r.length;t--;)e[n.getCustomDataId(r[t])]&&r.splice(t,1)},n.destroy=function(){t.prototype.destroy.call(this);let e=this.customRenders;for(let t in e){let n=e[t];n&&n.destroy()}this.customRenders=null},n.updateCustomRenders=function(t){let e={},n=this.pdfViewer.customRenderManager,i=this.customRenders,r=t.map((t=>{let r=n.getCustomDataId(t);return e[r]=t,i[r]})),o=this.customs;for(let t=o.length;t--;){let i=n.getCustomDataId(o[t]);e[i]&&(o[t]=e[i])}return Promise.all(r.map((t=>t&&t.render(this.scale,this.rotate))))},e}(K),zi=function(){function t(){this.init.apply(this,arguments)}var e=t.prototype;return e.init=function(){if(1==arguments.length)this.info={type:arguments[0]};else{let[t,e,n,i,r,o]=arguments;this.info=t,this.factory=e,this.doc=n,this.host=o,this.eventEmitter=r}this.initSubAction()},e.checkInserted=function(){if(!this.doc.api)throw new Error("Please insert this action to a host first.")},e.initSubAction=function(){this.subAction=[],this.info.subAction&&this.info.subAction.forEach((t=>{this.subAction.push(this.factory.createAction(t,this.doc,this.doc.api,this.eventEmitter,this.host))}))},e.appendSubAction=function(t){this.subAction.push(t),this.info.subAction=this.info.subAction||[],this.info.subAction.push(t.info)},e.getType=function(){return this.info.type},e.getSubActionCount=function(){return this.info.subAction.length||0},e.getSubAction=function(t){return this.subAction[t]},e.insertSubAction=function(e,n){if(this.checkInserted(),"number"!=typeof e)throw new Error("param error. Only number is available.");return e=Math.max(0,Math.min(e,this.getSubActionCount())),n instanceof t&&(n=n.getType()),this.doc.api.insertSubAction(this.doc.getId(),this.info.objNumber,e,n).then((t=>(this.updateAction(t),t)))},e.setSubAction=function(e,n){if(this.checkInserted(),"number"!=typeof e)throw new Error("param error. Only number is available.");let i=this.getSubActionCount();if(0===i)throw new Error("Cannot be set without sub action.");return e=Math.max(0,Math.min(e,i-1)),n instanceof t&&(n=n.getType()),this.doc.api.setSubAction(this.doc.getId(),this.info.objNumber,e,n).then((t=>(this.updateAction(t),t)))},e.removeAllSubActions=function(){if(this.doc.api)return this.doc.api.removeAllSubActions(this.doc.getId(),this.info.objNumber).then((t=>{this.updateAction(t)}))},e.removeSubAction=function(t){if(!this.doc.api)return;if("number"!=typeof t)throw new Error("param error. Only number is available.");let e=this.getSubActionCount();if(0===e)throw new Error("Cannot be remove without sub action.");return t=Math.max(0,Math.min(t,e-1)),this.doc.api.removeSubAction(this.doc.getId(),this.info.objNumber,t).then((t=>{this.updateAction(t)}))},e.setActionData=function(t){return this.doc.api.setActionData(this.doc.getId(),this.info.objNumber,t).then((t=>{this.updateAction(t)}))},e.updateAction=function(t){y(this.info,t),this.initSubAction(),this.host&&(this.eventEmitter.emit(et.actionUpdated,this.host),this.host instanceof Se&&this.eventEmitter.emit(et.annotationUpdated,[this.host],this.host.getPDFPage(),"widget"===this.host.getType()?ge.formFieldActionUpdated:ge.actionDataUpdated))},e.checkOutData=function(t){return!0},e.exportToJson=function(){return{type:this.getType()}},t}(),Ji=function(t){function e(e,n,i,r,o,s){var a;return 0==arguments.length?(a=t.call(this,At.uri)||this,(0,C.Z)(a)):t.call(this,e,n,i,r,o,s)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getURI=function(){return this.info.uri},n.checkOutData=function(t){return t&&t.uri},n.setURI=function(t){if(!t&&"string"==typeof t)throw new Error("param error. Only non-empty strings is available.");return this.doc?this.doc.api.setActionURI(this.doc.getId(),this.info.objNumber,t).then((t=>(this.updateAction(t),t))):(this.info.uri=t,Promise.resolve())},n.exportToJson=function(){return y(t.prototype.exportToJson.call(this),{uri:this.getURI()})},e}(zi);m(6544);let Zi=function(){function t(t={}){this.fileSpec=t}var e=t.prototype;return e.setFileName=function(t){this.fileSpec.fileName=t},e.getChecksum=function(){return this.fileSpec.checksum},e.getCreationDateTime=function(){return this.fileSpec.creationDateTime},e.getDescription=function(){return this.fileSpec.description},e.getDict=function(){return this.fileSpec.dict},e.getFileData=function(){return this.fileSpec.fileData},e.getFileName=function(){return this.fileSpec.fileName},e.getFileSize=function(){return this.fileSpec.fileSize},e.getModifiedDateTime=function(){return this.fileSpec.modifiedDateTime},e.getSubtype=function(){return this.fileSpec.subtype},e.isEmbedded=function(){return this.fileSpec.isEmbedded},t}(),Xi=function(t){function e(e,n,i,r,o,s){var a;return 0==arguments.length?(a=t.call(this,At.launch)||this,(0,C.Z)(a)):((a=t.call(this,e,n,i,r,o,s)||this).fileSpec=a.info.fileSpec&&new Zi(a.info.fileSpec)||null,(0,C.Z)(a))}(0,E.Z)(e,t);var n=e.prototype;return n.setFileSpec=function(t){this.fileSpec=t,this.info.fileSpec=t.fileSpec},n.getFileSpec=function(){return this.fileSpec},n.checkOutData=function(t){return t&&t.buffer},n.updateAction=function(e){return this.fileSpec=e.fileSpec&&new Zi(e.fileSpec)||null,t.prototype.updateAction.call(this,e)},e}(zi);var Qi=Xi;let tr=function(t){function e(e,n,i,r,o,s){return t.call(this,e,n,i,r,o,s)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getName=function(){return this.info.name},n.checkOutData=function(t){return t&&t.name},e}(zi);var er=tr;let nr=function(t){function e(e,n,i,r,o,s){var a;return 0==arguments.length?(a=t.call(this,At.javaScript)||this,(0,C.Z)(a)):((a=t.call(this,e,n,i,r,o,s)||this).info.script&&(a.info.javascript=a.info.script),(0,C.Z)(a))}(0,E.Z)(e,t);var n=e.prototype;return n.getScript=function(){return this.info.javascript},n.checkOutData=function(t){return t&&t.javascript},n.setScript=function(t){return this.doc?this.doc.api.setActionScript(this.doc.getId(),this.info.objNumber,t).then((t=>(this.updateAction(t),t))):(this.info.javascript=t,Promise.resolve())},n.exportToJson=function(){return y(t.prototype.exportToJson.call(this),{script:this.getScript()})},e}(zi);var ir=nr;let rr=function(t){function e(e,n,i,r,o,s){var a;return a=e?t.call(this,e,n,i,r,o,s)||this:t.call(this,At.submitForm)||this,(0,C.Z)(a)}(0,E.Z)(e,t);var n=e.prototype;return n.getFlags=function(){return this.info.flags},n.getURL=function(){return this.info.url},n.getFieldNames=function(){return this.info.fieldNames},n.checkOutData=function(t){return t&&t.fieldNames&&t.url},n.setData=function(t,e,n){this.info.flags=t,this.info.url=e,this.info.fieldNames=n},e}(zi);var or=rr;let sr=function(t){function e(){var e;if(0==arguments.length)return e=t.call(this,At.resetForm)||this,(0,C.Z)(e);let[n,i,r,o,s,a]=arguments;return t.call(this,n,i,r,o,s,a)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getFlags=function(){return this.info.flags},n.getFieldNames=function(){return this.info.fieldNames},n.checkOutData=function(t){return t&&t.fieldNames},n.setFieldNames=function(t){return this.doc?this.doc.api.setActionFieldNames(this.doc.getId(),this.info.objNumber,t).then((t=>(this.updateAction(t),t))):(this.info.fieldNames=t,Promise.resolve())},n.setFlags=function(t){if(!this.doc)return this.info.flags=t,Promise.resolve();if(0!==t&&1!==t)throw new Error("param error. Only 0 or 1 is available.");return this.doc.api.setActionFlags(this.doc.getId(),this.info.objNumber,t).then((t=>(this.updateAction(t),t)))},n.exportToJson=function(){return y(t.prototype.exportToJson.call(this),{fieldNames:this.getFieldNames(),flags:this.getFlags()})},e}(zi);var ar=sr;let cr=function(t){function e(e,n,i,r,o,s){var a;return 0==arguments.length?(a=t.call(this,At.importData)||this,(0,C.Z)(a)):((a=t.call(this,e,n,i,r,o,s)||this).fileSpec=a.info.fileSpec&&new Zi(a.info.fileSpec)||null,(0,C.Z)(a))}(0,E.Z)(e,t);var n=e.prototype;return n.setFileSpec=function(t){this.fileSpec=t,this.info.fileSpec=t.fileSpec},n.getFileSpec=function(){return this.fileSpec},n.checkOutData=function(t){return t&&t.buffer},n.updateAction=function(e){return this.fileSpec=e.fileSpec&&new Zi(e.fileSpec)||null,t.prototype.updateAction.call(this,e)},e}(zi);var lr=cr;const hr=["ZoomXYZ","ZoomFitPage","ZoomFitHorz","ZoomFitRect","ZoomFitBHorz","ZoomFitVert"];let ur=function(t){function e(e,n,i,r,o,s){var a;return 0==arguments.length?(a=t.call(this,At.goto)||this,(0,C.Z)(a)):t.call(this,e,n,i,r,o,s)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getDestination=function(){return this.info.destination},n.checkOutData=function(t){return function(t){let e;e=!!t.type;let n={ZoomXYZ:function(){e=null!=t.pageIndex&&null!=t.left&&null!=t.top&&null!=t.zoomFactor},ZoomFitPage:function(){e=!(null==t.pageIndex)},ZoomFitHorz:function(){e=null!=t.pageIndex&&null!=t.top},ZoomFitVert:function(){e=null!=t.pageIndex&&t.left},ZoomFitRect:function(){e=null!=t.pageIndex&&t.left&&null!=t.top&&null!=t.bottom&&null!=t.right},ZoomFitBBox:function(){e=!(null==t.pageIndex)},ZoomFitBHorz:function(){e=null!=t.pageIndex&&null!=t.top},ZoomFitBVert:function(){e=null!=t.pageIndex&&null!=t.left}};return n[t.type](),e}(t)},n.setDestination=function(t){if(!this.doc)return this.info.destination=t,Promise.resolve();if(-1===hr.indexOf(t.zoomMode))throw new Error("param error. ZoomMode is invalid.");return t.pageIndex=Math.min(this.doc.getPageCount()-1,Math.max(t.pageIndex,0)),this.doc.api.setActionDestination(this.doc.getId(),this.info.objNumber,t).then((t=>(this.updateAction(t),t)))},n.exportToJson=function(){return y(t.prototype.exportToJson.call(this),{destination:this.getDestination()})},e}(zi);let dr=function(t){function e(e,n,i,r,o,s){var a;return 0==arguments.length?(a=t.call(this,At.hide)||this,(0,C.Z)(a)):t.call(this,e,n,i,r,o,s)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getFieldNames=function(){return this.info.fieldNames},n.getHideState=function(){return this.info.hideState},n.setFieldNames=function(t){return this.doc?this.doc.api.setActionFieldNames(this.doc.getId(),this.info.objNumber,t).then((t=>(this.updateAction(t),t))):(this.info.fieldNames=t,Promise.resolve())},n.setHideState=function(t){return this.doc?this.doc.api.setActionHideState(this.doc.getId(),this.info.objNumber,t).then((t=>(this.updateAction(t),t))):(this.info.hideState=t,Promise.resolve())},n.checkOutData=function(t){return t&&t.fieldNames&&t.hideState},n.exportToJson=function(){return y(t.prototype.exportToJson.call(this),{fieldNames:this.getFieldNames(),hideState:this.getHideState()})},e}(zi),fr=function(t){function e(e,n,i,r,o,s){var a;return(a=t.call(this,e,n,i,r,o,s)||this).fileSpec=a.info.fileSpec&&new Zi(a.info.fileSpec)||null,a}(0,E.Z)(e,t);var n=e.prototype;return n.getDestinationName=function(){return this.info.destinationName},n.getDestination=function(){return this.info.destination},n.getFileSpec=function(){return this.fileSpec},n.getNewWindowFlag=function(){return this.info.newWindowFlag},n.getFileSpecStream=function(){let t=[];return this.doc.api.getActionFileStream(this.doc.getId(),this.info.objNumber,(({arrayBuffer:e})=>{t.push(e)})).then((()=>t))},n.checkOutData=function(t){return function(t){let e;e=!!t.type;let n={ZoomXYZ:function(){e=null!=t.pageIndex&&null!=t.left&&null!=t.top&&null!=t.zoomFactor},ZoomFitPage:function(){e=!(null==t.pageIndex)},ZoomFitHorz:function(){e=null!=t.pageIndex&&null!=t.top},ZoomFitVert:function(){e=null!=t.pageIndex&&t.left},ZoomFitRect:function(){e=null!=t.pageIndex&&t.left&&null!=t.top&&null!=t.bottom&&null!=t.right},ZoomFitBBox:function(){e=!(null==t.pageIndex)},ZoomFitBHorz:function(){e=null!=t.pageIndex&&null!=t.top},ZoomFitBVert:function(){e=null!=t.pageIndex&&null!=t.left}};return n[t.type](),e&&t.buffer&&t.newWindowFlag}(t)},e}(zi);let pr=function(t){function e(e,n,i,r,o,s){var a;return(a=t.call(this,e,n,i,r,o,s)||this).rootFile=a.info.rootFile&&new Zi(a.info.rootFile)||null,a}(0,E.Z)(e,t);var n=e.prototype;return n.getDestinationName=function(){return this.info.destinationName},n.getDestination=function(){return this.info.destination},n.getRootFile=function(){return this.rootFile},n.getNewWindowFlag=function(){return this.info.newWindowFlag},n.getTarget=function(){return this.info.target},n.getTargetFileInfo=function(){const t=this.getTarget();if(!t)return Promise.resolve(null);let e=Promise.resolve();return e=t.pageIndex>-1?this.doc.getPageByIndex(t.pageIndex).then((t=>t.getAnnots())).then((e=>{const n=e[t.fileAttachmentAnnotIndex];return Promise.all([n,n.getFileattachmentStream()])})).then((t=>{let[e,n]=t,i=e.getFileSpec(),{description:r,fileName:o,fileSize:s}=i.fileSpec;return{blob:new Blob(n,{type:"application/pdf"}),description:r,fileName:o,fileSize:s}})):this.doc.getNameTree(te.EmbeddedFiles).then((e=>{let n=e[t.attachedFileName];if(n){let{objNum:t,description:e,fileName:i,fileSize:r}=n;return this.doc.getFileSpecStream(t).then((t=>({blob:new Blob(t,{type:"application/pdf"}),description:e,fileName:i,fileSize:r})))}})),e},n.checkOutData=function(t){return function(t){let e;e=!!t.type;let n={ZoomXYZ:function(){e=null!=t.pageIndex&&null!=t.left&&null!=t.top&&null!=t.zoomFactor},ZoomFitPage:function(){e=!(null==t.pageIndex)},ZoomFitHorz:function(){e=null!=t.pageIndex&&null!=t.top},ZoomFitVert:function(){e=null!=t.pageIndex&&t.left},ZoomFitRect:function(){e=null!=t.pageIndex&&t.left&&null!=t.top&&null!=t.bottom&&null!=t.right},ZoomFitBBox:function(){e=!(null==t.pageIndex)},ZoomFitBHorz:function(){e=null!=t.pageIndex&&null!=t.top},ZoomFitBVert:function(){e=null!=t.pageIndex&&null!=t.left}};return n[t.type](),e&&t.buffer&&t.newWindowFlag}(t)},e}(zi);let gr=function(t){function e(e,n,i,r,o,s){var a;return 0==arguments.length?(a=t.call(this,At.thread)||this,(0,C.Z)(a)):((a=t.call(this,e,n,i,r,o,s)||this).info.dest_thread_index&&(a.info.dest_thread_index=a.info.dest_thread_index),(0,C.Z)(a))}(0,E.Z)(e,t);var n=e.prototype;return n.getName=function(){return this.info.name},n.checkOutData=function(t){return t&&t.name},e}(zi),mr=function(t){function e(e,n,i,r,o,s){return t.call(this,e,n,i,r,o,s)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getName=function(){return this.info.name},n.checkOutData=function(t){return t&&t.name},n.setOCGState=function(t){const{hideLayerIds:e,visibleLayerIds:n}=this._getLayerIds(t);return this.doc?this.doc.api.setActionOCGState(this.doc.getId(),this.info.objNumber,e,n).then((t=>(this.updateAction(t),t))):(this.info.hideLayerIds=e,this.info.visibleLayerIds=n,Promise.resolve())},n._getLayerIds=function(t){const e=[],n=[];function i(t){t.children.length>0&&t.children.forEach((t=>{i(t)})),t.visible?n.push(t.id):e.push(t.id)}for(let e=0;e<t.length;e++)i(t[e]);return{hideLayerIds:e,visibleLayerIds:n}},e}(zi),vr=function(){function t(){}return t.createAction=function(t,e,n,i,r){if(t)switch(t.type){case"TypeThread":return new gr(t,this,e,n,i,r);case"TypeURI":return new Ji(t,this,e,n,i,r);case"TypeLaunch":return new Qi(t,this,e,n,i,r);case"TypeNamed":return new er(t,this,e,n,i,r);case"TypeJavaScript":return new ir(t,this,e,n,i,r);case"TypeSubmitForm":return new or(t,this,e,n,i,r);case"TypeResetForm":return new ar(t,this,e,n,i,r);case"TypeImportData":return new lr(t,this,e,n,i,r);case"TypeGoto":return new ur(t,this,e,n,i,r);case"TypeHide":return new dr(t,this,e,n,i,r);case"TypeGoToR":return new fr(t,this,e,n,i,r);case"TypeGoToE":return new pr(t,this,e,n,i,r);case"TypeSetOCGState":return new mr(t,this,e,n,i,r);default:return new zi(t,this,e,n,i,r)}},t}();var yr=vr;var wr=function(){function t(t,e,n){this.doc=t,this.field=e,this.info=n,this.changes={}}var e=t.prototype;return e.getExportValue=function(){return this.info.exportValue},e.setExportValue=function(t){this.info.exportValue=t},e.updateProperty=function(t,e){return this.changes[t]=e,this.info&&-1==this.info.objectNumber||!this.doc?Promise.resolve():this.doc.api.updateFormControl(this.doc.id,this.field.getName(),this.info.objectNumber,t,e)},e.getProperty=function(t){return this.changes[t]},e.destroy=function(){this.doc=null,this.info=null},e.isEmpty=function(){return this.changes==={}},e.setWidget=function(t){this.widget=t},e.getWidget=function(){return this.widget},e.getWidgetAnnot=function(){return this.widget?Promise.resolve(this.widget):this.doc.api.getControlPageIndex(this.doc.id,this.field.getName(),this.info.objectNumber).then((t=>{if(t>=0)return this.doc.getPageAnnots(t)})).then((t=>this.widget?this.widget:t?this.widget=t.find((t=>t.info.objectNumber==this.info.objectNumber)):void 0))},e.getIndex=function(){return this.info.index},e.getField=function(){return this.field},e.getDefaultAppearance=function(){let t=this.info&&this.info.DA;if(t&&Object.keys(t).length>0)return t=y({},this.info.DA),t;{let t=this.getField();return y({},t.info&&t.info.DA)}},e.setDefaultAppearance=function(t){if(!this.doc.checkPermission(pe.fillForm|pe.annotForm))throw new Error("Permission error");let e=(t=y({},this.info.DA,t)).textColor,n=t.textSize;if("number"!=typeof e||"number"!=typeof n)throw new Error("param error. Only number is available.");e=(4278190080|e)>>>0,t.textColor=e,t.textSize=n;(0,_.colorConvertor)(e,"RGB");let i=JSON.stringify(t);return this.doc.api.updateFormControl(this.doc.id,this.field.getName(),this.info.objectNumber,"DA",i).then((()=>{this.info.DA=t;let e=this.widget;if(e)return e.updateMKProperty("DA",t).then((n=>{let i=e.getPDFPage();this.widget.info.DA=t,this.doc.engine.eventEmitter.emit(nt.annotationUpdated,[e],i,ge.defaultAppearanceUpdated),e.updateUI({type:"DA",value:t})}))}))},t}();let br=function(){function t(t){this.match=t}var e=t.prototype;return e.getEndCharIndex=function(){return this.match.endCharIndex},e.getPageIndex=function(){return this.match.pageIndex},e.getRects=function(){return this.match.rectArray},e.getSentence=function(){return this.match.sentence},e.getSentenceStartIndex=function(){return this.match.sentenceStartIndex},e.getStartCharIndex=function(){return this.match.startCharIndex},t}(),Ar=function(){function t(t,e){this.id=t,this.annot=e,this.page=e.getPDFPage(),this.api=this.page.api}var e=t.prototype;return e.getId=function(){return this.id},e.findNext=function(){return this.page.doc.api.textSearchFindNext(this.getId()).then((t=>t?new br(t):null))},e.findPrev=function(){return this.page.doc.api.textSearchFindPrev(this.getId()).then((t=>t?new br(t):null))},e.destroy=function(){return this.page.doc.api.textSearchDestroy(this.getId())},t}(),Pr=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).resetAction(),i.mapFormControl(),i}(0,E.Z)(e,t);var n=e.prototype;return n.resetAction=function(){this.action=this.page.doc.engine.actionFactory.createAction(this.info.action,this.page.doc,this.page.doc.api,this.eventEmitter,this)},n.mapFormControl=function(){let t=this.info,e=this.getField();if(!e)return;let n=e.getControlById(t.objectNumber);n&&!n.isEmpty()&&n.setWidget(this),this.formControl=n},n.destroy=function(){this.action=null,this.render=null,t.prototype.destroy.call(this)},n.getControl=function(){return this.formControl||this.mapFormControl(),this.formControl},n.setDisplay=function(t,e){let n=this.info.flag;switch(t){case 0:n&=-2,n&=-3,n&=-33,n|=4;break;case 1:n&=-2,n&=-33,n|=6;break;case 2:n&=-2,n&=-5,n&=-3,n&=-33;break;case 3:n|=32,n|=4,n&=-3}return this.setFlagValue(n,e)},n.getObjNum=function(){return this.info.objectNumber},n.getAction=function(){return this.action},n.getRotation=function(){return this.info.rotation},n.getField=function(){if(!this.page)return null;let t=this.page.getPDFDoc().getPDFForm();return t&&t.getField(this.info.field)},n.getMKProperty=function(t){switch(t){case"borderColor":return this.info.MKBorderColor;case"fillColor":return this.info.fillColor;default:return this.info[t]}},n.setMKProperty=function(t,e){if(this.isDestroyed)return Promise.resolve();if(8===this.info.fieldType&&"rotation"!==t)return Promise.resolve();if("borderColor"===t){if(this.info.MKBorderColor==e)return Promise.resolve(!0);this.info.MKBorderColor=e}else{if(this.info[t]==e)return Promise.resolve(!0);this.info[t]=e}return this.updateMKProperty(t,e)},n._setMKProperty=function(t,e){switch(t){case"borderColor":if(this.info.MKBorderColor==e)break;this.info.MKBorderColor=e;break;default:if(this.info[t]==e)break;this.info[t]=e}},n.getBorderColor=function(){return this.getMKProperty("borderColor")},n.updateMKProperty=function(t,e){let n=this.page,i=n.getPDFDoc(),r={type:t,value:e};return this.page.doc.api.updateMKProperty(i.getId(),n.getId(),this.getId(),t,e).then((e=>(this.triggerUpdateEvent(ge.formFieldMKPropertyUpdated,t),this.updateUI(r),e)))},n.triggerUpdateEvent=function(t,e){this.engine.eventEmitter.emit(et.annotationUpdated,[this],this.getPDFPage(),t,e)},n.updateUI=function(t){this.isDestroyed||this.render&&this.render(t)},n.setRenderNotifier=function(t){this.render=t},n.getAdditionalAction=function(t){if(-1==t)return this.action;const e=this.getField();if(t>=Ht.keyStroke&&t<=Ht.calculate)return e&&e.getAction(t);if(!this.engineActions){this.engineActions={};for(let t in this.info.AA)this.engineActions[t]=yr.createAction(this.info.AA[t],this.page.getPDFDoc())}return this.engineActions[t]?this.engineActions[t]:e&&e.getAction(t)},n.switchAS=function(){let t=this.getField(),e=t.getType();if(3==e&&"Off"!=this.info.ApState)return Promise.resolve();1==this.info.ApStates.length&&"Off"!=this.info.ApStates[0]&&(this.info.ApStates[1]="Off"),this.info.ApStates[0]==this.info.ApState?this.info.ApState=this.info.ApStates[1]:this.info.ApState=this.info.ApStates[0];let n=this.info.ApState;return 3!=e&&2!=e||"Off"==n||(n=this.formControl.getExportValue()),t.setValue(n,this)},n.setAS=function(t,e){this._setAS(t,e);let n=this.page,i=n.getPDFDoc();return this.page.doc.api.setWidgetAS(i.getId(),n.getId(),this.getId(),this.info.ApState)},n._setAS=function(t,e){let n="Off",i=this.info.ApStates;if(3===this.getField().getType()){let i=this.getControl().getExportValue(),r=this.getOnAS();n=e==this.info.objectNumber?t==i||t==r?r:"Off":(!e||De.inUnison(this.getField().getFlags()))&&(t==i||t==r)?r:"Off"}else{let r=this.getField().getControlById(e);(!e||e&&this.getControl().getExportValue()==r.getExportValue())&&(n="Off"!=t?i[1]:i[0])}this.info.ApState=n},n.getWidgetMkOption=function(){let t=this.page,e=t.getPDFDoc();return t.doc.api.getWidgetMkOption(e.getId(),t.getId(),this.getId())},n.setWidgetIconCaptionRelation=function(t){let e=this.page,n=e.getPDFDoc();return e.doc.api.setWidgetIconCaptionRelation(n.getId(),e.getId(),this.getId(),t).then((t=>{this.updateUI({})}))},n.setWidgetHighlighting=function(t){let e=this.page,n=e.getPDFDoc();return e.doc.api.setWidgetHighlighting(n.getId(),e.getId(),this.getId(),t).then((t=>{this.updateUI({})}))},n.setWidgetMkCaption=function(t,e){let n=this.page,i=n.getPDFDoc();return n.doc.api.setWidgetMkCaption(i.getId(),n.getId(),this.getId(),t,e).then((t=>{this.updateUI({})}))},n.setWidgetMkIcon=function(t,e){let n=this.page,i=n.getPDFDoc();return n.doc.api.setWidgetMkIcon(i.getId(),n.getId(),this.getId(),t,e).then((t=>{this.updateUI({})}))},n.getWidgetIconFitOption=function(){let t=this.page,e=t.getPDFDoc();return t.doc.api.getWidgetIconFitOption(e.getId(),t.getId(),this.getId())},n.setWidgetIconFitOption=function(t){let e=this.page,n=e.getPDFDoc();return e.doc.api.setWidgetIconFitOption(n.getId(),e.getId(),this.getId(),t).then((t=>{this.updateUI({})}))},n.getDAFontSize=function(){let t=this.getDefaultAppearance(),e=t&&t.textSize;return e||this.getField().getDAFontSize()},n.getDirectionRTL=function(){return this.info.directionRTL},n.setDirectionRTL=function(t){if(void 0!==t&&0!==t&&1!==t)throw new Error("Unknown directionRTL: "+t);return this.updateMKProperty("directionRTL",t).then((()=>this.update().then((()=>this.getField().setAlignment(t?2:0)))))},n.getLineSpace=function(){return this.info.lineSpace},n.setLineSpace=function(t){if(!(void 0===t||Array.isArray(t)&&2===t.length&&-1!==[0,1,2,3].indexOf(t[0])&&t[1]>=0))throw new Error("Unknown lineSpace: "+t);return this.updateMKProperty("lineSpace",t).then((()=>this.update()))},n.getOnAS=function(){return"Off"!=this.info.ApStates[0]?this.info.ApStates[0]:this.info.ApStates[1]},n.getAS=function(){return this.info.ApState},n.getIconObjNum=function(t){switch(t){case 0:return this.info.normalIcon;case 1:return this.info.downIcon;case 2:return this.info.rollIcon}},n.setIconObj=function(t,e){let n;switch(e){case 0:n="normalIcon",this.info.normalIcon=t;break;case 1:n="downIcon",this.info.downIcon=t;break;case 2:n="rolloverIcon",this.info.rollIcon=t}return this.updateMKProperty(n,t)},n.setAdditionalAction=function(t,e){if("string"==typeof e){let t=new ir;t.setScript(e),e=t}return t>=Ht.keyStroke&&t<=Ht.calculate?this.getField().setAction(t,e):this.setAction(t,e)},n.setAction=function(t,e,n){if(!e)throw new Error("No Action!");let i=this.page,r=i.doc;return this.engineActions||this.getAdditionalAction(11),this.page.doc.api.setAction(r.getId(),i.getId(),this.getId(),e.info,t,n).then((i=>{if(!this.page.doc)return i;e.init(i,this.page.doc.engine.actionFactory,r,this.page.doc.api,this.page.doc.engine.eventEmitter,this);let o=!1;return-1==t&&this.info.action&&(o=!0),-1!=t&&this.engineActions[t]&&(o=!0),n&&o?-1==t?this.action.appendSubAction(e):this.engineActions[t].appendSubAction(e):-1==t?(this.info.action=e.info,this.action=e):(this.info.AA[t]=e.info,this.engineActions[t]=e),n?(this.eventEmitter.emit(et.actionAdd,this),this.triggerUpdateEvent(ge.addAction)):o?(this.eventEmitter.emit(et.actionUpdated,this),this.triggerUpdateEvent(ge.formFieldActionUpdated)):(this.eventEmitter.emit(et.actionAdd,this),this.triggerUpdateEvent(ge.addAction)),i}))},n.removeAction=function(t,e){let n=this.getField(),i=0,r=0;e?(i=0,r=e.info.objNumber):delete n.info.AA[t],"-1"==t?(delete this.info.action,delete this.action):(delete this.info.AA[t],this.engineActions&&delete this.engineActions[t],n.engineActions&&delete n.engineActions);let o=this.page,s=o.doc;return s.api.removeAction(s.getId(),o.getId(),this.getId(),t,i,r).then((e=>{let i=e[0];i?"-1"==t?(this.info.action=i,this.action=yr.createAction(i,this.page.getPDFDoc())):(this.info.AA[t]=i,this.engineActions[t]=yr.createAction(i,this.page.getPDFDoc())):delete n.info.AA[t],e[1]&&(n.info.AA[t]=e[1]),this.triggerUpdateEvent(ge.formFieldActionUpdated)}))},n.moveAction=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.moveAction(n.getId(),e.getId(),this.getId(),t).then((t=>this.update(ge.moveAction).then((t=>{this.updateAdditionalAction()}))))},n.updateAdditionalAction=function(){this.engineActions={};for(let t in this.info.AA)this.engineActions[t]=yr.createAction(this.info.AA[t],this.page.getPDFDoc())},n.getDAFontColor=function(){let t=this.getDefaultAppearance(),e=t&&t.textColor;return e||this.getField().getDAFontColor()},n.getAlignment=function(){return void 0!==this.info.alignment?this.info.alignment:this.getField().getAlignment()},n.getDefaultAppearance=function(){return this.formControl||this.mapFormControl(),this.formControl&&this.formControl.getDefaultAppearance()},n.setDefaultAppearance=function(t){return this.formControl||this.mapFormControl(),this.formControl&&this.formControl.setDefaultAppearance(t)},n._update=function(e){return this.engineActions=null,t.prototype._update.call(this,e)},n.getTextSearch=function(t,e){let n=this.page,i=n.doc;return this.page.doc.api.getAnnotTextSearch(i.getId(),n.getId(),this.getId(),t,e).then((t=>new Ar(t,this)))},e}(Se);var Sr=Pr;var Cr=function(){function t(t,e,n){this.pageRender=t,this.pdfDoc=t.getPDFDoc(),this.pdfArticle=this.pdfDoc.pdfArticle,this.pdfPage=t.page,this.pdfViewer=t.pdfViewer,this.$container=t.$customsContainer,this.articleInfo=e,this.articleBeadInfo=n,this.$dom=null,this.render()}var e=t.prototype;return e.render=function(){this.createDom()},e.updateRender=function(t,e){t&&(this.articleInfo=t),e&&(this.articleBeadInfo=e);const{left:n,top:i,right:r,bottom:o}=this.getDeviceRect(),s=r-n,a=o-i;this.$dom.css({width:s+"px",height:a+"px",top:i+"px",left:n+"px"})},e.read=function(){const t="fv__article-read";this.$dom.addClass(t),setTimeout((()=>{this.$dom.removeClass(t)}),500);const{rect:e,pageIndex:n}=this.articleBeadInfo,i=this.pdfViewer;return i.zoomTo(2).then((()=>i.goToPage(n,e.top,e.left)))},e.getDeviceRect=function(){const t=this.articleBeadInfo.rect,e=this.pageRender,n=e.getScale(),i=e.getRotation();return this.pdfPage.getDeviceRect(t,n,i)},e.createDom=function(){const{left:t,top:e,right:n,bottom:i}=this.getDeviceRect();this.$dom=D()('<div style="position:absolute;width:'+(n-t)+"px;height:"+(i-e)+"px;left:"+t+"px;top:"+e+'px;z-index:26;"></div>'),this.$container.append(this.$dom)},e.destroy=function(){this.articleBeadInfo=null,this.$dom.remove(),this.$dom=null,this.pdfDoc=null,this.pdfArticle=null},t}();var Er={PageOpened:0,PageClosed:1,DocWillClose:2,DocWillSave:3,DocSaved:4,DocWillPrint:5,DocPrinted:6,FieldKeyStroke:7,FieldWillFormat:8,FieldValueChanged:9,FieldRecalculateValue:10,AnnotCursorEnter:11,AnnotCursorExit:12,AnnotMouseButtonPressed:13,AnnotMouseButtonReleased:14,AnnotReceiveInputFocus:15,AnnotLoseInputFocus:16,AnnotPageOpened:17,AnnotPageClosed:18,AnnotPageVisible:19,AnnotPageInvisible:20};let xr="zIndexContextMenu";var Dr,Ir,Rr,Tr=function(){function t(t){this.flag=t}var e=t.prototype;return e.getValue=function(){return this.flag},e.checkInvisible=function(){return(this.flag&me.invisible)===me.invisible},e.checkHidden=function(){return(this.flag&me.hidden)===me.hidden},e.checkPrint=function(){return(this.flag&me.print)===me.print},e.checkNoZoom=function(){return(this.flag&me.noZoom)===me.noZoom},e.checkNoRotate=function(){return(this.flag&me.noRotate)===me.noRotate},e.checkNoView=function(){return(this.flag&me.noView)===me.noView},e.checkReadOnly=function(){return(this.flag&me.readOnly)===me.readOnly},e.checkLocked=function(){return(this.flag&me.locked)===me.locked},e.checkToggleNoView=function(){return(this.flag&me.toggleNoView)===me.toggleNoView},e.checkLockedContents=function(){return(this.flag&me.lockedContents)===me.lockedContents},e.check=function(t){return(this.flag&t)===t},e.or=function(t){return this.flag=this.flag|t,this},t}();!function(t){t.CREATE_ANNOT="create-annots",t.REMOVE_ANNOT="remove-annots",t.UPDATE_ANNOT="update-annots",t.ADD_REPLY="add-reply",t.REMOVE_REPLY="remove-reply",t.ADD_REVIEW_STATE="add-review-state",t.ADD_MARKED_STATE="add-marked-state",t.UPDATE_ANNOT_CONTENT="update-comment-content",t.PPO_REMOVE_PAGE="ppo-remove-page",t.PPO_REMOVE_PAGES="ppo-remove-pages",t.PPO_INSERT_PAGE="ppo-insert-page",t.PPO_ROTATE_PAGE="ppo-rotate-page",t.PPO_MOVE_PAGE="ppo-move-page",t.MOVE_ANNOTS_BETWEEN_PAGES="move-annotations-between-pages",t.IMPORT_ANNOTATIONS_FILE="import-annotations-file"}(Dr||(Dr={})),function(t){t.SELECT_ALL="builtin-command-select-all-annotations",t.CREATION_UNDO_LAST="builtin-command-creation-undo-last",t.DELETE_SELECTED_OBJECT="builtin-command-delete-selected-object",t.DELETE_SELECTED_ANNOT_MAC="builtin-command-delete-selected-annot-mac",t.UNSELECT_OBJECT="builtin-command-unselect-object",t.UNDO_OPERATION="builtin-command-undo",t.REDO_OPERATION="builtin-command-redo",t.CANCEL_CREATING_ANNOTATION_OPERATION="builtin-command-cancel-creating-annotation",t.CLOSE_LAYER="builtin-command-close-closable-layer",t.ARROW_UP="builtin-command-arrow-up",t.ARROW_DOWN="builtin-command-arrow-down",t.ARROW_LEFT="builtin-command-arrow-left",t.ARROW_RIGHT="builtin-command-arrow-right",t.SWITCH_TO_HAND_STATE="builtin-command-switch-hand-state",t.COPY_ACTIVATE_ELEMENT="builtin-command-copy-activate-element",t.CUT_ACTIVATE_ELEMENT="builtin-command-cut-activate-element",t.ADD_BOOKMARK="builtin-command-add-bookmark",t.COPY_TEXT_IMAGE="builtin-command-copy-text-image",t.BLUR_EDITTING_TEXT_OBJECT="builtin-command-blur-editting-text-object",t.ALIGNMENT_REDUCE_WIDTH="builtin-command-alignment-reduce-width",t.ALIGNMENT_RAISE_WIDTH="builtin-command-alignment-raise-width",t.ALIGNMENT_REDUCE_HEIGHT="builtin-command-alignment-reduce-height",t.ALIGNMENT_RAISE_HEIGHT="builtin-command-alignment-raise-height",t.ALIGNMENT_REDUCE_STEP_WIDTH="builtin-command-alignment-reduce-step-width",t.ALIGNMENT_RAISE_STEP_WIDTH="builtin-command-alignment-raise-step-width",t.ALIGNMENT_REDUCE_STEP_HEIGHT="builtin-command-alignment-reduce-step-height",t.ALIGNMENT_RAISE_STEP_HEIGHT="builtin-command-alignment-raise-step-height",t.TAB_NEXT_OPERATION="builtin-command-tab-next",t.TAB_PREVIOUS_OPERATION="builtin-command-tab-previous",t.DELETE_ATTACHMENT="builtin-command-delete-attachment",t.JUMP_TO_NEXT_PAGE="builtin-command-jump-to-next-page",t.JUMP_TO_PREVIOUS_PAGE="builtin-command-jump-to-previsous-page",t.JUMP_TO_FIRST_PAGE="builtin-command-jump-to-first-page",t.JUMP_TO_LAST_PAGE="builtin-command-jump-to-last-page",t.SCROLL_TO_NEXT_VISIBLE_AREA="builtin-command-scroll-to-next-visible-area",t.SCROLL_TO_PREVIOUS_VISIBLE_AREA="builtin-command-scroll-to-previous-visible-area",t.SCROLL_VIEWER_SCROLLBAR_LEFT="builtin-command-scroll-viewer-scrollbar-left",t.SCROLL_VIEWER_SCROLLBAR_RIGHT="builtin-command-scroll-viewer-scrollbar-right",t.SCROLL_VIEWER_SCROLLBAR_UP="builtin-command-scroll-viewer-scrollbar-up",t.SCROLL_VIEWER_SCROLLBAR_DOWN="builtin-command-scroll-viewer-scrollbar-down"}(Ir||(Ir={})),function(t){t.GLOBAL="builtin-shortcut-context-global",t.SELECTION="builtin-shortcut-context-selection",t.BASIC_STATE_HANDLER="builtin-shortcut-context-state-hander",t.ANNOTATION_PROPERTIES="builtin-shortcut-context-annot-properties",t.ACTIVATION_ANY="builtin-shortcut-context-activation-any",t.ACTIVATION_ANNOTATION="builtin-shortcut-context-activation-annot",t.ACTIVATION_WIDGET="builtin-shortcut-context-activation-widget",t.ACTIVATION_GRAPH_OBJ="builtin-shortcut-context-activation-graph_obj",t.VIEWER="builtin-shortcut-context-viewer",t.CREATING_ANNOTATION="builtin-shortcut-context-creating-annotation",t.CLOSABLE_LAYER="builtin-shortcut-context-closable-layer",t.EDIT_TEXT_OBJECT="builtin-shortcut-context-edit-text-object"}(Rr||(Rr={}));var Fr=[{context:Rr.GLOBAL,topLayers:[],extends:[],shortcuts:{}},{context:Rr.CLOSABLE_LAYER,topLayers:[Rr.GLOBAL],extends:[],shortcuts:{[Ir.CLOSE_LAYER]:"Escape"}},{context:Rr.VIEWER,topLayers:[Rr.GLOBAL],extends:[],shortcuts:{[Ir.UNDO_OPERATION]:"Mod+Z",[Ir.REDO_OPERATION]:"Mod+Y",[Ir.ADD_BOOKMARK]:"Mod+B",[Ir.DELETE_ATTACHMENT]:"Delete",[Ir.JUMP_TO_PREVIOUS_PAGE]:"LeftArrow",[Ir.JUMP_TO_NEXT_PAGE]:"RightArrow",[Ir.ARROW_UP]:"UpArrow",[Ir.ARROW_DOWN]:"DownArrow",[Ir.JUMP_TO_FIRST_PAGE]:"Home",[Ir.JUMP_TO_LAST_PAGE]:"End",[Ir.SCROLL_TO_NEXT_VISIBLE_AREA]:"PageDown",[Ir.SCROLL_TO_PREVIOUS_VISIBLE_AREA]:"PageUp",[Ir.SCROLL_VIEWER_SCROLLBAR_LEFT]:"Shift+LeftArrow",[Ir.SCROLL_VIEWER_SCROLLBAR_RIGHT]:"Shift+RightArrow",[Ir.SCROLL_VIEWER_SCROLLBAR_UP]:"Shift+UpArrow",[Ir.SCROLL_VIEWER_SCROLLBAR_DOWN]:"Shift+DownArrow"}},{context:Rr.EDIT_TEXT_OBJECT,topLayers:[Rr.GLOBAL],extends:[],shortcuts:{[Ir.BLUR_EDITTING_TEXT_OBJECT]:"Escape"}},{context:Rr.CREATING_ANNOTATION,topLayers:[Rr.VIEWER],extends:[],shortcuts:{[Ir.CANCEL_CREATING_ANNOTATION_OPERATION]:"Escape"}},{context:Rr.SELECTION,topLayers:[],extends:[],shortcuts:{[Ir.SELECT_ALL]:"Mod+A"}},{context:Rr.ACTIVATION_ANY,topLayers:[Rr.VIEWER],extends:[Rr.SELECTION],shortcuts:{[Ir.DELETE_SELECTED_OBJECT]:"Delete",[Ir.DELETE_SELECTED_ANNOT_MAC]:"Mod+Backspace",[Ir.UNSELECT_OBJECT]:"Escape",[Ir.COPY_ACTIVATE_ELEMENT]:"Mod+C",[Ir.CUT_ACTIVATE_ELEMENT]:"Mod+X"}},{context:Rr.ACTIVATION_ANNOTATION,topLayers:[Rr.VIEWER],extends:[Rr.ACTIVATION_ANY],shortcuts:{}},{context:Rr.ACTIVATION_WIDGET,topLayers:[Rr.VIEWER],extends:[Rr.ACTIVATION_ANY],shortcuts:{[Ir.ALIGNMENT_REDUCE_WIDTH]:"Mod+LeftArrow",[Ir.ALIGNMENT_RAISE_WIDTH]:"Mod+RightArrow",[Ir.ALIGNMENT_REDUCE_HEIGHT]:"Mod+UpArrow",[Ir.ALIGNMENT_RAISE_HEIGHT]:"Mod+DownArrow",[Ir.ALIGNMENT_REDUCE_STEP_WIDTH]:"Mod+Shift+LeftArrow",[Ir.ALIGNMENT_RAISE_STEP_WIDTH]:"Mod+Shift+RightArrow",[Ir.ALIGNMENT_REDUCE_STEP_HEIGHT]:"Mod+Shift+UpArrow",[Ir.ALIGNMENT_RAISE_STEP_HEIGHT]:"Mod+Shift+DownArrow"}},{context:Rr.ACTIVATION_GRAPH_OBJ,topLayers:[Rr.VIEWER],extends:[Rr.ACTIVATION_ANY],shortcuts:{}},{context:Rr.BASIC_STATE_HANDLER,topLayers:[Rr.VIEWER],extends:[],shortcuts:{[Ir.SWITCH_TO_HAND_STATE]:"Escape"}},{context:nn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Re,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:Ne,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:en,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:rn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Qe,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Je,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Fe,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:dn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:fn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:pn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Ze,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Oe,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:He,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:_e,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:qe,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:ze,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Ke,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:ke,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Ge,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:tn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:je,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:$e,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:We,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Ye,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Le,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Be,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Ue,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"create-multi-media-state",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"create-redaction-text-state",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"create-redaction-state",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"CreatePushButtonStateHandler",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"CreateCheckBoxStateHandler",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"CreateRadioButtonStateHandler",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"CreateComboBoxStateHandler",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"CreateListBoxStateHandler",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"CreateTextStateHandler",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"CreateSignStateHandler",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"CreateDateStateHandler",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:"CreateImageStateHandler",topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:Te,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:Ve,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:on,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:sn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:an,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:cn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:ln,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{[Ir.COPY_TEXT_IMAGE]:"Mod+C",[Ir.ADD_BOOKMARK]:"Mod+B",[Ir.SELECT_ALL]:"Mod+A"}},{context:un,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[Rr.SELECTION],shortcuts:{}},{context:gn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:vn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:yn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:wn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}},{context:bn,topLayers:[Rr.BASIC_STATE_HANDLER],extends:[],shortcuts:{}}];const _r="undefined"!=typeof PointerEvent,kr=_.isIE10?"MSPointerDown":_r?"pointerdown":"mousedown",Mr=_.isIE10?"MSPointerDown":"pointerdown",Or="add",Lr="minus";let Nr=function(t){function e(e,n,i,r){var o;(o=t.call(this,r)||this).hasFocus=!1,o.docRender=o.parent("pdfDocRender"),o.name="annot",o.eUi=n,o.element=n;let s=o.$ui=D()(n);if(s.addClass("fv__pdf-page-annot-container").data(xr,(0,C.Z)(o)),s.attr("objectNumber",e.objectNumber),o.eHandler=i,(o.$handler=D()(i)).addClass("fv__pdf-page-annot-handler-container"),o.$page=r.$page,o.annot=e,o.$$isUIVisible=!0,s.data("component",(0,C.Z)(o)),o.deleteStatus=0,o.annotsRender=r.parent("annotsRender"),o.eventHandlers=[],o.mouseEnterAnnots=[],!o.pdfViewer.getCurrentPDFDoc().isDynamicXFA()&&(o.bindDoubleTab(),_.isIOS)){let t=t=>t.preventDefault();n.addEventListener("touchstart",t),o.addDestroyHook((()=>{n.removeEventListener("touchstart",t)}))}const a=()=>{o.isDestroyed||o.annot.isDestroyed||o.getAppPermission().then((t=>{o.updateOnPermissionChange(t)}))},c=()=>{o.isDestroyed||o.annot.isDestroyed||o.removed||o.isActive&&o.mouseLeave()},l=()=>{o.removed=!0},h=o.pdfViewer.eventEmitter;return h.on(nt.permissionChanged,a),h.on(nt.globalAnnotFlagChanged,a),h.on(nt.activeElementChanged,c),h.on(nt.annotationRemoved,l),o.addDestroyHook((()=>{h.off(nt.permissionChanged,a),h.off(nt.globalAnnotFlagChanged,a),h.off(nt.activeElementChanged,c),h.off(nt.annotationRemoved,l)})),o}(0,E.Z)(e,t);var n=e.prototype;return n.getAppPermission=function(){return this.pdfViewer.getAnnotAuthorityManager().getPermission(this.annot)},n.initMouseEvent=function(){const t=this.pdfViewer.eventEmitter,e=this.getContainerElement();e.addEventListener("mouseenter",o),e.addEventListener("mousemove",(function(t){if(!r)return;let e=a(t);if(e.length===i.length)return;let o=[],s=Or;e.length>i.length?o=e.filter((t=>!i.some((e=>e.getId()===t.getId())))):(o=i.filter((t=>!e.some((e=>e.getId()===t.getId())))),s=Lr);o.length&&(n.mouseMove&&n.mouseMove(o,s),i=e)})),e.addEventListener("mouseleave",s),this.addDestroyHook((()=>{e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",s)}));let n=this,i=[],r=!1;function o(e){i=n.mouseEnterAnnots=a(e),t.emit(nt.mouseEnter,Cn.annotation,{annots:n.mouseEnterAnnots,e:e}),n.mouseEnter&&n.mouseEnter(Cn.annotation,{annots:n.mouseEnterAnnots,e:e}),r=n.needToggleView()}function s(e){i=[],t.emit(nt.mouseLeave,Cn.annotation,{annots:n.mouseEnterAnnots,e:e}),n.mouseLeave&&n.mouseLeave(Cn.annotation,{annots:n.mouseEnterAnnots,e:e})}const a=t=>{const e=this.annotsRender.getAnnotRenders(),n=Object.keys(e).map((t=>e[t])),{clientX:i,clientY:r}=t,o=[];return n.forEach((t=>{if(!this.annotsRender._isFormWidget(t)&&!this.annotsRender._isFormWatermark(t)){const e=t.component.$ui.get(0).getBoundingClientRect();i>=e.left&&i<=e.right&&r>=e.top&&r<=e.bottom&&o.push(t.annot)}})),o}},n.initPointerDownEvent=function(){const t=this.pdfViewer.getEventEmitter(),e=e=>{if(1!==e.which||e.isManual)return;if(["fv__shape-control-text-area","fv__shape-control-move-area","fv__shape-controller","fv-shape-rotate-handle"].some((t=>D()(e.target).hasClass(t))))return;const n=this.parent("pdfPageRender"),[i,r]=n.getPDFPointFromClientPoint(e.clientX,e.clientY,!0),o=this.parent();return n.getPDFPage().then((t=>{const e=n.scale,o=n.rotate,s=t.getDeviceMatrix();return s.scale(e,e),s.rotate(o),t.getAnnotObjectNumAtDevicePoint([i,r],1,[s.a,s.b,s.c,s.d,s.e,s.f])})).then((t=>{const e=this.annotsRender.getAnnotRender(t);if(e&&e!==o)if("watermark"===e.annot.getType())s(o);else s(e);else s(o)})),!1;function s(n){const i=n.component,r=i.shapeControl,o=!!r&&r.isActive;return t.emit(nt.tapAnnotation,n,e),Promise.resolve(i.tapAnnot(e)).then((()=>{o||i.triggerPointerDownOnShapeControl(e)}))}};this.eUi.addEventListener(kr,e),this.eHandler.addEventListener(kr,e),this.addDestroyHook((()=>{this.eHandler.removeEventListener(kr,e),this.eUi.removeEventListener(kr,e)}))},n.triggerPointerDownOnShapeControl=function(t){let e=this.eHandler.querySelector(".fv__shape-control-move-area");if(e){let n;"function"!=typeof PointerEvent||t instanceof MouseEvent?(n=document.createEvent("MouseEvent"),n.initMouseEvent(Mr,t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,null),n.pointerId=t.pointerId):n=new PointerEvent("pointerdown",t),n.isManual=!0,e.dispatchEvent(n),e.dispatchEvent(n)}},n.getContainerElement=function(){return this.$ui.get(0)},n.getHandlerElement=function(){return this.$handler.get(0)},n.getModel=function(){return this.annot},n.tapAnnot=function(){let t=this.getModel().getId();return this.pdfViewer.isMultiSelectActive()&&this.pdfViewer.getAllActivatedElements().find((t=>t===this))&&!_.keyboardStatus.isShiftDown?this.annotsRender.unActiveAnnot(t):this.annotsRender.activeAnnot(t)},n.getId=function(){return this.id},n.getIndex=function(){return this.annot.getIndex()},n.setId=function(t){return this.annot.setUniqueID(t).then((()=>{this.id=t}))},n.isHidden=function(){let t=this.getAnnotFlag();return!!(t.checkHidden()||t.checkNoView()&&!t.checkToggleNoView())},n._hideUI=function(){this.$ui[0].classList.add("fv__ui-hide"),this.$handler[0].classList.add("fv__ui-hide")},n._showUI=function(){this.$ui[0].classList.remove("fv__ui-hide"),this.$handler[0].classList.remove("fv__ui-hide")},n.hideUI=function(){return this.isUIVisible()?(this.isActive&&this.annotsRender.unActiveAnnot(this.annot),this.$$isUIVisible=!1,this._hideUI(),Promise.resolve()):Promise.resolve()},n.updateSize=function(t=this.scale,e=this.rotate){let n,i,r;if(this.scale=t,this.rotate=e,n=this.annot.getDeviceRect(this.scale,this.rotate),8&this.annot.getFlags()){let t=this.annot.getRect();r=t.top-t.bottom,i=t.right-t.left}else r=n.bottom-n.top,i=n.right-n.left},n.showUI=function(){return this.isUIVisible()?Promise.resolve():(this.$$isUIVisible=!0,this._showUI(),Promise.resolve(this.redraw()).then((()=>{this.pdfViewer.getAnnotAuthorityManager().update(this.annot)})))},n.isUIVisible=function(){return this.$$isUIVisible},n.render=function(t,e){this.scale=t,this.rotate=e},n.afterRender=function(){if(this.isDestroyed)return;const t=this.annot.getType();_.isDesktop&&this.pdfViewer.config.showFormFieldTooltip&&"widget"===t&&this.bindAnnotMouseEvents()},n.add=function(t,e){return this.render(t,e)},n.redraw=function(){},n.willRedraw=function(){},n.afterRedraw=function(){},n.doActive=function(){if(this.bindEvent(),this.pdfViewer.activationManager.currentActivableIs(this))return;const t=this.annot;if(t.isGrouped&&t.isGrouped()){const e=new Y;t.groupElements.forEach((t=>{const n=this.pdfViewer.getAnnotRender(t.getPDFPage().getIndex(),t.getId()).component;e.add(n)})),this.pdfViewer.activeElement(e)}else this.pdfViewer.activeElement(this)},n.doDeactive=function(){this.unBindEvent()},n.unActive=function(){t.prototype.unActive.call(this)},n.destroy=function(){this.isActive=!1,this.$ui&&this.$ui.remove(),this.$handler&&this.$handler.remove(),this.unBindEvent(),this.eventHandlers=[],t.prototype.destroy.call(this),this.annot=null,this.component=null,this.docRender=null,this.$ui=null,this.eHandler=null,this.$handler=null,this.$page=null,this.annotsRender=null},n.remove=function(){this.destroy()},n.showContextMenu=function(){},n.enableContextMenu=function(t){this._disabledContextMenu=!t},n.contextMenuIsEnable=function(){return!this._disabledContextMenu},n.zIndexDown=function(){this.$ui.addClass("fv__zindex-down"),this.zIndexDownFlag=!0},n.checkZIndexDown=function(){return!this.zIndexDownFlag},n.zIndexRecover=function(){this.$ui.removeClass("fv__zindex-down"),this.zIndexDownFlag=!1},n.moveTo=function(t,e,n,i=!0,r=!1,o=!0){if(!i)return this.$ui.css({left:t,top:e}),Promise.resolve(!0);let s;if(r)s={left:t,top:e,action:n,triggerAction:o};else{const i=this.scale,r=this.rotate,a=this.getPDFPage();let c=this.annot.getDeviceRect(i,r),l=t-c.left,h=e-c.top;if("freetext"!==this.annot.getType()&&Math.abs(l)<1&&Math.abs(h)<1)return Promise.resolve();let[u,d]=a.reverseDeviceOffset([l,h],i,r),f=this.annot.getRect();s={left:f.left+u,top:f.top+d,action:n,triggerAction:o}}return this.annot.moveTo(s).then((t=>this.updateRender&&this.updateRender().then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))))},n.move=function(t,e,n=!0){let i=this.annot.getDeviceRect(this.scale,this.rotate);return this.moveTo(i.left+t,i.top+e,n)},n.moved=function(){let t=this.annot.getDeviceRect(this.scale,this.rotate);this.$ui.css({left:t.left+"px",top:t.top+"px"}),this.activeRect()},n.movedByOther=function(t){},n.setRectInPDF=function(t,e){return this.annot._setRect(t,e).then((t=>t?this.updateRender().then((()=>(e&&this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n._setRect=function({left:t,top:e,width:n,height:i}={},r){n=Math.max(.001,n),i=Math.max(.001,i);const o=this.scale,s=this.rotate;let a=this.getPDFPage().reverseDeviceRect({left:t,top:e,right:t+n,bottom:e+i},o,s);return this.annot._setRect(a,r).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setRect=function({left:t,top:e,width:n,height:i}={}){n=Math.max(.001,n),i=Math.max(.001,i);const r=this.scale,o=this.rotate;let s=this.getPDFPage().reverseDeviceRect({left:t,top:e,right:t+n,bottom:e+i},r,o);return this.annot.setRect(s).then((t=>(t&&this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t)))},n.getRect=function(t=this.scale,e=this.rotate){const n=this.getPDFPage(),i=this.annot.getRect();return n.getDeviceRect(i,t,e)},n.getBoundary=function(){const t=this.annot.getDeviceRect(this.scale,this.rotate);let e=this.annot.getRect(),n=t.right-t.left,i=t.bottom-t.top;return 8&this.annot.getFlags()&&(n=e.right-e.left,i=e.top-e.bottom),{left:t.left,top:t.top,width:n,height:i}},n.getPosition=function(){const t=this.getPDFPage(),e=this.annot.getRect(),[n,i]=t.getDevicePoint([e.left,e.top],this.scale,this.rotate);return{left:n,top:i}},n.getDimension=function(){const t=this.getPDFPage(),e=this.annot.getRect(),n=t.getDeviceRect(e,this.scale,this.rotate);return{width:n.right-n.left,height:n.bottom-n.top}},n.removeAnnot=function(){return this.getAppPermission().then((t=>{if(t.ignorable()){if(this.getAnnotFlag().checkLocked())throw new Error("The remove operation was rejected because it is locked!")}if(t.isDeletable())return this.doRemoveAnnot()}))},n.doRemoveAnnot=function(){},n.deleteDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;let t=this.getAnnotFlag();return t.checkLocked()||t.checkReadOnly()},n.replyDisabled=function(){return!(32&this.docRender.getUserPermission().getValue())||(!this.annot.getContent()||"sound"===this.annot.getType())},n.propertyDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;let t=this.getAnnotFlag();return t.checkLocked()||t.checkReadOnly()},n.moveDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;let t=this.getAnnotFlag();return t.checkLocked()||t.checkReadOnly()},n.readOnlyDisabled=function(){if(!(32&this.docRender.getUserPermission().getValue()))return!0;return this.getAnnotFlag().checkReadOnly()},n.isLocked=function(){return this.getAnnotFlag().checkLocked()},n.bindEvent=function(){if(!this.pdfViewer)return;this.pdfViewer.getKeyboard().withContext(Rr.ACTIVATION_ANY,(t=>{if(this.isDestroyed)return;this.__off__delete__event__&&this.__off__delete__event__();let e=Ir.DELETE_SELECTED_OBJECT;this.__off__delete__event__=t.keyup(e,(t=>{!1!==this.isActive&&(this.removeAnnot(),t.stopPropagation())}),{interceptors:[(0,_.excludeEditableElementInterceptor)(),(t,e)=>{const n=this.pdfViewer.getStore().getCurrentValue(_.MODULE_LICENSE_INFO);if(!this.annot)return;const i=this.annot.getType();let r=!0;"redact"==i&&(r=Object.keys(n).find((t=>t.startsWith(i)?n[t]:""._))),r?e(t):this.pdfViewer.viewerUI.alert("dialog.error.noRedactionLicense")}]})}))},n.unBindEvent=function(){this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=ei},n.updateDeleteStatus=function(t){t?++this.deleteStatus:--this.deleteStatus,this.deleteStatus>0?this.unBindEvent():this.bindEvent()},n.getPDFAnnot=function(){return this.annot},n.getPDFPage=function(){return this.getPDFAnnot().getPDFPage()},n.getAnnotFlag=function(){return this.pdfViewer.annotManager.getAnnotFlag(this.annot)},n.groupMoveDisabled=function(){let t=!1;return this.annot&&this.annot.isGrouped&&this.annot.isGrouped()&&this.annot.groupElements.map((e=>{let n=e.getType();"strikeout"!==n&&"highlight"!==n&&"squiggly"!==n&&"underline"!==n||(t=!0)})),t},n.setVisibleRect=function(t){this.visibleRect=t},n.invisibleRender=function(){},n.clearCache=function(){},n.getRenderingData=function(t=this.scale,e=this.rotate){if(!this.annot)return null;const n=this.annot.getDeviceRect(t,this.rotate),i=this.getRect(),r=this.annot.page,o=this.pdfViewer.getSmartScale(t);return{annotInfo:this.annot.info,annotFlag:this.getAnnotFlag(),smartScale:o,rect:i,outerDeviceRect:n,innerDeviceRect:this.annot.getInnerRect?this.annot.getDeviceInnerRect(t,e):n,engineRenderingRect:r.getDeviceRect(i,o,e),scale:t,rotate:e,page:this.annot.page}},n.toImageURL=function(t=(t=>({x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}))){const e=this.annot.page,n=this.pdfViewer.getSmartScale(this.scale),i=this.annot.getDeviceRect(1,this.rotate);return e.getAnnotBitmap(this.annot.objectNumber,V(n),this.rotate,t(i,this,this.scale,this.rotate),!0).then((({width:t,height:e,buffer:n,image:i,type:r,url:o})=>{const s=document.createElement("canvas");s.width=t,s.height=e;const a=s.getContext("2d");if(o)return new Promise((t=>{const e=new Image;e.onload=()=>{a.drawImage(e,0,0),t(s.toDataURL())},e.src=o}));{let i=new(Uint8ClampedArray||Uint8Array)(n),r=a.createImageData(t,e);return r.data.set(i),a.putImageData(r,0,0),s.toDataURL()}}))},n.activeTooltip=function(t){},n.bindAnnotMouseEvents=function(){if("widget"!=this.annot.getType())return;var t=this.annot.isGrouped&&this.annot.isGrouped()?this.annot.getGroupHeader():this.annot,e=this.eHandler;let n;e.addEventListener("mousemove",this.mouseEnterListener=e=>{(this.pdfViewer.config.showAnnotTooltip&&"widget"!==t.getType()||this.pdfViewer.config.showFormFieldTooltip&&"widget"===t.getType())&&(n=this.pdfViewer.customs.AnnotTooltip?new this.pdfViewer.customs.AnnotTooltip(this.pdfViewer,t):new En(t),n.show(e.clientX,e.clientY))}),e.addEventListener("mouseout",this.mouseLeaveListener=t=>{n&&n.hide()}),this.addDestroyHook((()=>{e.removeEventListener("mousemove",this.mouseEnterListener),e.removeEventListener("mouseout",this.mouseLeaveListener)}))},n.collaborate=function(t=Dr.UPDATE_ANNOT){if(!this.pdfViewer.customs.isCollaborationMode||this.pdfViewer.customs.isCollaborationMode())return t===Dr.UPDATE_ANNOT?this.pdfViewer.collaborate(t,{annots:[this.annot.exportToJSON()]}):void 0},n.getPropertyOptions=function(){return{}},n.isFormControl=function(){return!1},n.updateOnPermissionChange=function(t){if(this.isDestroyed)return;if(!_.Lazy.isPropertyIntialized(this,"shapeControl"))return;let e=!1;e=!!this.groupMoveDisabled()||(t.ignorable()?this.moveDisabled():this.moveDisabled()||!t.isAdjustable());const n=this.shapeControl;e?n.disable():n.enable()},n.bindDoubleTab=function(){const t=t=>{this.pdfViewer.eventEmitter.emit(nt.doubleTapAnnotation,this.parent(),t),this.annotsRender.doubleTapAnnot(this.annot.id)};if(_.isTouchDevice&&(_.isSafari||_.isChrome)){const e=(0,_.onTap)({target:this.$handler[0],onDoubleTap:e=>{t(e)}});this.addDestroyHook(e)}else{const e=new Hammer.Manager(this.$handler[0]);e.add(new Hammer.Tap({event:"doubletap",taps:2})),e.add(new Hammer.Tap({event:"singletap"})),e.get("doubletap").recognizeWith("singletap"),e.get("singletap").requireFailure("doubletap"),e.on("doubletap",(e=>{t(e)})),this.addDestroyHook((t=>e.destroy()))}},n.needToggleView=function(){if(this.isDestroyed||!this.annot)return!1;const t=this.getAnnotFlag();return!(!t.checkToggleNoView()||t.checkHidden())},n.shouldRenderByMouseEvent=function(){const t=this.getAnnotFlag();return this.renderAppearanceType===st.ANNOT_APPEARANCE_TYPE.ROLLOVER?t.checkNoView():!t.checkNoView()},n.mouseEnter=function(){this.needToggleView()&&(this.renderAppearanceType=st.ANNOT_APPEARANCE_TYPE.ROLLOVER,this.redraw(!0))},n.mouseLeave=function(){this.needToggleView()&&this.pdfViewer.currentPDFDoc&&(this.renderAppearanceType=st.ANNOT_APPEARANCE_TYPE.NORMAL,this.redraw(!0))},n.mouseMove=function(t,e){t.forEach((t=>{let n=this.annotsRender._finAnnotRenderById(t.getId());if(n){const{component:t}=n;t.renderAppearanceType=e===Or?st.ANNOT_APPEARANCE_TYPE.ROLLOVER:st.ANNOT_APPEARANCE_TYPE.NORMAL,t.redraw(!0)}}))},S(e,[{key:"id",get:function(){return this.annot?this.annot.getId():void 0}}]),e}(K);var Br=Nr,Vr=m(5779),Ur=m.n(Vr);const Hr="delete-annotation",jr="pdf-viewer-keyboard-event-binder",$r="activation-annotation-keyboard-event-binder";let Wr=function(){function t(){}t.scope=function(){return _.IoCScope.SINGLETON};var e=t.prototype;return e.pressEnter=function(t){if(!t)return;if(!(t instanceof Jr))return;switch(t.getPDFAnnot().getField().getType()){case xe.ComboBox:return this.pressEnterOnComboBox(t);case xe.ListBox:break;case xe.CheckBox:case xe.PushButton:case xe.RadioButton:return this.pressEnterOnPushButton(t);case xe.Sign:return this.pressEnterOnSignature(t);case xe.Text:return this.pressEnterOnText(t);case xe.Unknown:return}},e.pressEnterOnText=function(t){const e=t.getPDFAnnot().getField(),n=t.formRender;De.isMultiline(e.getFlags())||Promise.resolve(n.blurControl(!0)).finally((()=>{t.parent("pdfPageRender").$ui.get(0).focus({preventScroll:!0})}))},e.pressEnterOnSignature=function(t){const e=t.pdfViewer,n=t.getPDFAnnot();e.eventEmitter.emit(nt.signatureFieldMouseLButtonUp,n)},e.pressEnterOnComboBox=function(t){if(t.isActive)t.formRender.blurControl();else{t.getPDFAnnot().updateUI({type:"focus"})}},e.pressEnterOnPushButton=function(t){t.handleEvent(Er.AnnotMouseButtonReleased,{button:0})},t}();function Yr(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const Gr=document.createElement("div");Gr.classList.add("fv__ui-form-foreground");const Kr="fv__select-annot-state-handler";let qr=function(t){function e(e,n,i,r){var o;(o=t.call(this,e,n,i,r)||this).$input=null,o.$border=null,o.scale=1,o.rotate=0,i=o.$handler,o.name="pdfControlRender",n.classList.add("fv__pdf-form-control-container"),o.formRender=o.parent("pdfDocRender").getFormRender();let s=e.getField(),a=o.$foreground=D()(Gr.cloneNode());if(!s)return(0,C.Z)(o);let c=!o.checkInvisible()&&o.pdfViewer.highlightControlsUI()?"block":"none",l="";o.checkReadOnly()&&7!==s.getType()&&(c="none",l+="form-field-readonly");let h=s.getType()==xe.PushButton?"0":"1";s&&De.isRequired(s.getFlags())&&a.addClass("required"),a.addClass(l).css({display:c,position:"absolute",width:"100%",height:"100%",left:0,top:0,opacity:h}),(7!=s.info.type||7===s.info.type&&!s.info.isSigned)&&o.normalBackgroundColorHandler(),i.addClass("fv__pdf-form-control-handler-container").append(a).attr("fieldName",s&&s.getName()).attr("tabindex","-1"),e.getMKProperty("fillColor")||(7===e.info.fieldType?i.css("mix-blend-mode","multiply"):i.css("background-blend-mode","multiply")),e.setRenderNotifier((t=>o.updateUI(t))),o.checkInvisible()&&i.hide(),o.bindControlEvent();let u=o.pdfViewer.i18n;const d=function(t){return u.t(t)};Ur().i18n=d,o.addDestroyHook((()=>{Ur().i18n===d&&(Ur().i18n=void 0)}));const f=(t,n)=>{if(e.getPDFPage()!==t)return;const i=e.getId();let r=n.find((t=>t.info.id===i));if(r&&r!==e){const t=e.render;r.setRenderNotifier(t),o.annot=r}};"select-annotation"===o.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()&&a.hide();const p=()=>{o.updateOnPermissionChange()},g=t=>{const e=o.pdfViewer.getPDFDocRender().$ui;t.getStateName()===Ie.STATE_HANDLER_SELECT_ANNOTATION?e.addClass(Kr):e.removeClass(Kr)};return o.pdfViewer.eventEmitter.on(nt.annotationLoaded,f),o.pdfViewer.eventEmitter.on(nt.permissionChanged,p),o.pdfViewer.eventEmitter.on(nt.switchStateHandler,g),o.addDestroyHook((()=>{o.pdfViewer.eventEmitter.off(nt.annotationLoaded,f),o.pdfViewer.eventEmitter.off(nt.permissionChanged,p),o.pdfViewer.eventEmitter.off(nt.switchStateHandler,g)})),o.addDestroyHook((0,_.attachKeypressEvent)(i.get(0),(()=>{o.pdfViewer.getIoC().getInstanceByClass(Wr).pressEnter((0,C.Z)(o))}),_.Shortcut.from("Enter"))),o}(0,E.Z)(e,t);var n=e.prototype;return n.updateOnPermissionChange=function(){const t=this.$foreground;if(!t)return;const e=this.checkReadOnly();if(t.toggleClass("form-field-readonly",e),!e){"select-annotation"===this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()?t.hide():(this.formRender.runtimeHighlight,t.show())}},n.initPointerDownEvent=function(){},n.updateSize=function(t=this.scale,e=this.rotate){},n.shapeControlOnStart=function(){this.pdfViewer.config.highPerformance&&(this.editAreaDebouncePromise=new _.DebounceAsyncTaskExecutor(10))},n.shapeControlOnUpdate=function(t,e){this.pdfViewer.config.highPerformance&&this.editAreaDebouncePromise.exec((()=>this.setRect(t))),this.$selectedContainer.add(this.$handler).add(this.$handler.find(".fv__tiles-col")).css(t)},n.shapeControlOnMoving=function(t,e){this.$selectedContainer.add(this.$handler).add(this.$handler.find(".fv__tiles-col")).css(t)},n.shapeControlOnEnd=function(t,e){return(this.pdfViewer.config.highPerformance?this.editAreaDebouncePromise.waitForLastTask():Promise.resolve()).then((()=>this.setRect(t).then((()=>this.render(this.scale,this.rotate,!0)))))},n.updateRender=function(){return Promise.resolve()},n.generateUI=function(){},n._hideUI=function(){this.$ui.hide()},n._showUI=function(){this.$ui.show()},n.destroy=function(){this.$handler.off("mouseenter mouseleave mousedown focus blur"),this.addListenAnnotMouseEvent&&this.addListenAnnotMouseEvent(),this.rectHammer&&this.rectHammer.destroy(),this.$foreground.remove(),this.$foreground=null,this.annot.setRenderNotifier(null),this.formRender=null,t.prototype.destroy.call(this),this.tileCanvas=null},n.bindControlEvent=function(){let t=this.pdfViewer.getCurrentPDFDoc();if(t.isDestroyed||t.isDynamicXFA())return;let e,n=this.$handler;const i=this;n.on("mouseleave",(t=>this.handleEvent(Er.AnnotCursorExit,t))).on("mousedown",(async t=>{if(t.button)return;"textarea"===t.target.nodeName.toLowerCase()&&t.offsetX>=t.target.clientWidth||this.hasFocus||n.get(0).focus({preventScroll:!0}),(0,_.isEditable)(t.target)||t.preventDefault();const r=i.pdfViewer.getCurrentPDFDoc();if(await r.readonly())return void t.preventDefault();t&&t.stopPropagation(),e=t;2!=this.handleEvent(Er.AnnotMouseButtonPressed,t)&&t.preventDefault()})).on("focus",(t=>{if(D()(t.target).hasClass("fv__pdf-form-control-handler-container"))return this.annot.updateUI&&this.annot.updateUI({type:"focus"}),void this.pdfViewer.eventEmitter.emit("tab-active",this.annot);this.handleEvent(Er.AnnotReceiveInputFocus,t)})).on("blur",(t=>{D()(t.target).hasClass("fv__pdf-form-control-handler-container")||this.handleEvent(Er.AnnotLoseInputFocus,t)})).on("contextmenu",(t=>{this.checkReadOnly()?t.preventDefault():this.handleEvent("contextmenu",t)})).on("click",(t=>{this.pdfViewer.eventEmitter.emit("tap-field",this.annot)})).on("mouseenter",(t=>this.handleEvent(Er.AnnotCursorEnter,t))),this.addListenAnnotMouseEvent=this.pdfViewer.addListenAnnotMouseEvent((async t=>{let n;return e&&(n=this.handleEvent(Er.AnnotMouseButtonReleased,t)),e=null,n}))},n.getTileConfig=function(t,e){let n=this.pdfViewer,i=n.getSmartScale(t),r=n.config.tileSize,o=this.annot,s=o.getDeviceRect(1,e),a=o.getDeviceRect(i,e),c=a.right-a.left,l=a.bottom-a.top;Math.ceil(l/r),Math.ceil(c/r);return[1,1,c,l,1e6,i,t,e,s.left,s.top,a]},n.updateForgroundAndHandler=function(t,e){let n=this.annot.getDeviceRect(t,e),i={width:n.right-n.left+.5|0,height:n.bottom-n.top+.5|0,left:n.left,top:n.top};return this.$handler.addClass("active").css(i),i},n.render=function(e=this.scale,n=this.rotate,i=!1,r="normal"){e||n||(e=this.annotsRender.scale,n=this.annotsRender.rotate),t.prototype.render.call(this,e,n,i);let o=this.annot,s=this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName();return this.checkInvisible()||o.isEmpty()||o.isDeleted()||o.rectIsEmpty()||!o.getField()?(this.checkInvisible()&&this.$handler.hide(),"select-annotation"==s?(this.updateForgroundAndHandler(e,n),this.redraw(e,n,i)):Promise.resolve()):(this.checkInvisible()||this.$handler.show(),this.updateForgroundAndHandler(e,n),this.redraw(e,n,i,r))},n.redraw=function(t=this.scale,e=this.rotate,n=!1,i="normal"){var r;let o=this.getTileConfig(t,e),s=this.annot,a=this.tileCanvas;return a||(a=this.tileCanvas=new xi(((t,e,n,i,r,o,c,l,h)=>s.getPDFPage().getAnnotBitmap(s.getId(),V(o),h,{x:c*o+e*r,y:l*o+t*r,width:n,height:i},!0,a.renderAppearanceType)),this.$handler)),a.renderAppearanceType=i,n&&a.clearCache(),(r=a).redraw.apply(r,Yr(w.Z,o))},n.doubleTapAnnot=function(){},n.checkReadOnly=function(){let t=this.annot.getField();if(!t)return!0;if(7==t.getType()&&t.isSigned())return!1;let e=!1;this.formRender.isReadOnly()&&(e=!0);this.getAnnotFlag();return De.isReadOnly(t.getFlags())&&(e=!0),e},n.getSignCNItem=function(){0},n.checkPagingSealByEsignCN=function(t){0},n.getMainPagingSealIdByEsignCN=function(){0},n.getPagingSealColorByEsignCN=function(t){0},n.checkReadOnlyByEsignCN=function(){return!1},n.checkInvisibleByEsignCN=function(){return!1},n.checkInvisible=function(){let t=this.getAnnotFlag();return!(!t.checkHidden()&&!t.checkNoView())},n.handleEvent=function(t,e){let n=this.annot.getField();if(0==e.button&&this.checkReadOnly())return t!=Er.AnnotMouseButtonReleased&&t!=Er.AnnotReceiveInputFocus||this.formRender.blurControl(),!0;if(0==e.button){switch(t){case Er.AnnotMouseButtonPressed:this.formRender.focusControl(this),1==n.getType()&&3===this.annot.info.highlightingMode&&this.render(this.scale,this.rotate,!0,"down");break;case Er.AnnotMouseButtonReleased:1==n.getType()&&3===this.annot.info.highlightingMode&&this.render(this.scale,this.rotate,!0,"normal");let t=Promise.resolve();2!=n.getType()&&3!=n.getType()||(t=this.annot.switchAS(),this.formRender.calculate(n));let e=this.annot,i=this.formRender;setTimeout((()=>{let r=e.getAction();t.then((t=>i.execAction("Field",r,n,n)))}),0)}this.performAction(t)}},n.updateUI=function({type:t,value:e}=null){if(!this.annot)return;let n=this.annot.getField(),i=this.$handler,r=this.$foreground,o=this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName();switch(t){case"readonly":e?(i.css("z-index",27),r.hide().addClass("form-field-readonly")):(!this.pdfViewer.highlightControlsUI()||"select-annotation"===o||1==n.getType()||this.checkReadOnly()||this.checkInvisible()||r.show(),r.removeClass("form-field-readonly"),i.css("z-index",29));break;case"required":let t=e?this.pdfViewer._runtimeColorOpacityRequired:this.pdfViewer._runtimeColorOpacity,s=e?this.pdfViewer._runtimeColorRequired:this.pdfViewer._runtimeColor,a=this.pdfViewer.getDisplayHighlightColor(s,t);e?r.addClass("required"):r.removeClass("required"),r.css({"background-color":a});break;case"hidden":if(e){if(i.hide(),6==n.getType())return;return void(this.$input&&this.$input.css("visibility","hidden"))}{if(!this.pdfViewer.highlightControlsUI()||"select-annotation"===o||1==n.getType()||this.checkReadOnly()||this.checkInvisible()||r.show().removeClass("form-field-readonly"),i.show(),6==n.getType())return;this.$input&&this.$input.css("visibility","visible");const t=i.get(0).getBoundingClientRect(),e=t.width*t.height;if(!e&&e>0)return;break}case"focus":this.formRender.focusControl(this);break;case"display":let c=this.annot.getFlags();if(2&c||32&c)return void i.hide().addClass("fv__ui-field-show-in-select-annot-handler");{!this.pdfViewer.highlightControlsUI()||"select-annotation"===o||1==n.getType()||this.checkReadOnly()||this.checkInvisible()||r.show().removeClass("form-field-readonly"),i.show();const t=i.get(0).getBoundingClientRect(),e=t.width*t.height;if(!e&&e>0)return;break}case"textColor":{if(!this.$input)break;let t=this.$input.find("input[type=text]");t||(t=this.$input.find("textarea")),t.css("color",(0,_.colorConvertor)(e))}break;case"textSize":{if(!this.$input)break;let t=this.$input.find("input[type=text]");t||(t=this.$input.find("textarea")),e?t.css("font-size",2*e+"px"):this.autoFontSize(0)}break;case"fillColor":e?this.$handler.css("background-blend-mode","unset"):this.$handler.css("background-blend-mode","multiply");break;case"orientation":{if(!this.$input)break;let t=this.$input.find("input[type=text]");t||(t=this.$input.find("textarea"));let n=90*(e||0);t.css("transform","rotate("+n+"deg)"),this.updateSize(this.scale,this.rotate,!0)}break;case"rename":return void this.render(this.scale,this.rotate,!0)}this.updateUIMore({type:t,value:e})},n.updateUIMore=function({type:t,value:e}){this.render(this.scale,this.rotate,!0)},n.focus=function(){let t=this.annot.getField();if(!t||!t.doc)return;if(t.getFlags()&De.ReadOnly==De.ReadOnly)return;this.hasFocus=!0,setTimeout((()=>{t&&t.doc&&this.hasFocus&&(this.$foreground.hide(),4!==t.getType()&&this.$handler.addClass("fv__control_focus"))}),50);let e=this.annot.getAdditionalAction(Er.AnnotReceiveInputFocus);try{return e&&this.formRender.execAction("Field",e,null,t)}finally{this.pdfViewer.eventEmitter.emit(nt.focusOnControl,this)}},n.blur=function(t=!1){this.hasFocus=!1;let e=this.annot.getField();if(!e)return;if(!this.checkReadOnly()&&this.pdfViewer.highlightControlsUI()){"select-annotation"===this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()?this.$foreground.hide():this.$foreground.show()}4!==e.getType()&&this.$handler.removeClass("fv__control_focus");let n=this.annot.getAdditionalAction(Er.AnnotLoseInputFocus);try{return n&&this.formRender.execAction("Field",n,null,e,"Blur")}finally{this.pdfViewer.eventEmitter.emit(nt.blurFromObject,this,t)}},n.performAction=function(t,e){this.formRender&&this.formRender.execAction("Field",this.annot.getAdditionalAction(t),null,this.annot.getField(),t,e)},n.autoFontSize=function(t,e=0){if(!this.annot)return;let n=this.$textInput||this.$input,i=this.annot.getField();if(!i)return;t||(t=i.getValue());let r=this.annot.getDefaultAppearance(),o=4*(r?r.textSize:0)/3*this.scale;if(!o&&!De.isMultiline(i.getFlags())){o=.7*n.outerHeight();let i=this.pdfViewer.$ui.find(".fwr-font-auto");0==i.length&&(i=D()('<div class="fwr-font-auto" style="position: absolute;top:0;width: fit-content;opacity: 0;"></div>'),i.appendTo(this.pdfViewer.$ui)),i.css("font-size",o+"px").text(t);let r=i.outerHeight(),s=n.parent().height();for(;r>s&&o>11;)o--,i.css("font-size",o+"px"),r=i.outerHeight();let a=i.outerWidth(),c=n.parent().width();for(;a>c-e&&o>11;)o--,i.css("font-size",o+"px"),a=i.outerWidth();n.css("font-size",o+"px")}},n.bindKeyboardEvent=function(){this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=this.pdfViewer&&this.pdfViewer.getKeyboardEventBinder($r).on(Hr,(t=>{this.removeAnnot()})),this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=this.pdfViewer&&this.pdfViewer.getKeyboardEventBinder($r).on("unactive-annotation",(t=>{this.unActiveEditing()})),this._undoSwitchKbBinder&&this._undoSwitchKbBinder(),this._undoSwitchKbBinder=this.pdfViewer.switchKeyboardEventBinder($r)},n.unBindKeyboardEvent=function(){this._undoSwitchKbBinder&&this._undoSwitchKbBinder(),this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=ei,this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=ei},n.removeAnnot=function(){if(this.deleteDisabled())return Promise.resolve();this.hideFormPropertiesDialog&&this.hideFormPropertiesDialog(),this.unBindKeyboardEvent();return this.pdfViewer.getPDFDocRender().getPDFDoc().loadPDFForm().then((t=>t.removeControl(this.annot.getField().getName(),this.annot.getObjNum()).then((t=>t))))},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.normalBackgroundColorHandler=function(t=!1){if(t)this.$foreground.css({"background-color":"unset"});else{const t=this.annot.getField();let e=this.pdfViewer.getDisplayHighlightColor(this.pdfViewer._runtimeColor,this.pdfViewer._runtimeColorOpacity);t&&De.isRequired(t.getFlags())&&(e=this.pdfViewer.getDisplayHighlightColor(this.pdfViewer._runtimeColorRequired,this.pdfViewer._runtimeColorOpacityRequired)),this.$foreground.css({"background-color":e})}},n.isFormControl=function(){return!0},e}(Br);var zr,Jr=qr,Zr=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};!function(t){t[t.FROM_NEXT=0]="FROM_NEXT",t[t.FROM_PREV=1]="FROM_PREV"}(zr||(zr={}));const Xr={"aria-hidden":"true",style:"position: fixed;top: 50%;left:50%;width:0;height:0;opacity: 0;pointer-events:none",tabindex:0};_.LoggerFactory.getLogger("AnnotTabManager");let Qr=function(t){function e(e){var n;(n=t.call(this)||this).pageRender=e,n.index=-1,n.jumpPrevElement=document.createElement("div"),n.jumpNextElement=document.createElement("div"),n.taskExecutor=new _.QueuedAsyncTaskExecutor,_.Lazy.property((0,C.Z)(n),"currentOrderedAnnotComponents",(()=>n.updateAnnots()));for(const t in Xr)n.jumpNextElement.setAttribute(t,Xr[t]),n.jumpPrevElement.setAttribute(t,Xr[t]);const i=t=>{n.currentFocusOnAnnotComponent&&t.preventDefault()};let r;return n.addDOMEvent(n.pageRender.$element.get(0),"keydown",(t=>{if((0,_.isEditableElement)(t.target))return;const{ArrowLeft:e,ArrowRight:i,ArrowDown:r,ArrowUp:o,or:s}=_.matchers;let a;if((0,_.isMatch)(t,s(e,o)))a=zr.FROM_NEXT;else{if(!(0,_.isMatch)(t,s(i,r)))return;a=zr.FROM_PREV}if(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)return;const c=n.currentFocusOnAnnotComponent;if(!(c&&c instanceof Jr))return;const l=c.annot.getField().controls;if(l.length<2)return;const h=l.map((t=>t.widget));n.taskExecutor.exec((()=>Zr((0,C.Z)(n),void 0,void 0,(function*(){const t=h.indexOf(c.annot);let e=a===zr.FROM_NEXT?t-1:t+1;e>=h.length&&(e=0),e<0&&(e=h.length-1);let n=h[e];const i=this.pageRender.pagesRender;if(!n){let t=this.pageRender.index;const r=this.pageRender.pagesRender.pageRenders.length;for(;!n;){let o=zr.FROM_NEXT?t-1:t+1;o>=r&&(o=0),o<0&&(o=r-1);const s=i.getPDFPageRender(o),a=yield s.getPDFPage();if(yield a.getAnnots(),n=l[e].widget,t=o,t===this.pageRender.index){n=h[0];break}}}const r=i.getPDFPageRender(n.page.getIndex());for(r.isRendered||(yield this.pageRender.pdfViewer.goToPage(r.index));!r.isRendered;)yield new Promise((t=>setTimeout(t,10)));r.getAnnotRender(n.getObjectNumber()).component.$handler.focus()})))),t.stopPropagation(),t.preventDefault()}),!0),n.addDOMEvent(n.jumpPrevElement,"focus",(()=>{n.currentFocusOnAnnotComponent?n.jumpToPrev():n.jumpToNext()})),n.addDOMEvent(n.jumpPrevElement,"keydown",i),n.addDOMEvent(n.jumpNextElement,"focus",(()=>{n.jumpToNext()})),n.addDOMEvent(n.jumpNextElement,"keydown",i),n.addViewerEvent(nt.blurFromObject,((t,e)=>{e||(clearTimeout(r),r=setTimeout((()=>{n.taskExecutor.exec((()=>{t===n.currentFocusOnAnnotComponent&&(n.currentFocusOnAnnotComponent=void 0,n.index=-1)}))}),100))})),n.addViewerEvent(nt.focusOnControl,(t=>{if(clearTimeout(r),n.isDestroyed)return;t.parent("pdfPageRender")===n.pageRender&&n.taskExecutor.exec((()=>{if(t!==n.currentFocusOnAnnotComponent)return n.currentOrderedAnnotComponents.then((e=>{let i=e.indexOf(t);-1!==i&&(n.currentFocusOnAnnotComponent=t,n.index=i)}))}))})),n.addViewerEvent(nt.activeAnnotation,(t=>{const e=t.component;e!==n.currentFocusOnAnnotComponent&&e.getPDFPage().getIndex()===n.pageRender.index&&n.taskExecutor.exec((()=>n.currentOrderedAnnotComponents.then((t=>{const i=t.indexOf(e);-1!==i&&(n.currentFocusOnAnnotComponent=e,n.index=i)}))))})),n.addViewerEvent(et.docModified,(()=>{_.Lazy.reset((0,C.Z)(n),"currentOrderedAnnotComponents")})),n.addDestroyHook((()=>{n.taskExecutor.cancel()})),n}(0,E.Z)(e,t);var n=e.prototype;return n.addDOMEvent=function(t,e,n,i){t.addEventListener(e,n,i),this.addDestroyHook((()=>{t.removeEventListener(e,n,i)}))},n.addViewerEvent=function(t,e){const n=this.pageRender.pdfViewer.eventEmitter;n.on(t,e),this.addDestroyHook((()=>{n.off(t,e)}))},n.updateAnnots=function(){const t=this.pageRender;let e;return e=t.annotsRender?t.getPDFPage():t.render(t.pagesRender.getPageScaleSync(t.index,t.docRender.getScale())).then((()=>t.getPDFPage())),e.then((t=>t.getAnnotIdArrayByOrder().then((e=>t.getAnnotsByObjectNumArray(e))).then((t=>t.filter((t=>{if(!(t instanceof Sr&&t.getField()))return!1;return(t.getField().getFlags()&De.ReadOnly)!=De.ReadOnly})).map((t=>{const e=this.pageRender.getAnnotRender(t.getObjectNumber());return e&&e.component})).filter((t=>t.$handler.is(":visible")))))))},n.jumpToNext=function(){this.taskExecutor.exec((()=>this.currentOrderedAnnotComponents.then((t=>{const e=t.length;if(e<1)return;const n=this.pageRender.index,i=this.pageRender.docRender;let r;if(this.currentFocusOnAnnotComponent){if(r=t[this.index+1],!r){const t=i.getPDFPageRender(n+1);if(t)return this.jumpToPage(t.index,zr.FROM_PREV);{let t=zr.FROM_NEXT;return 0!==n&&n!==i.doc.getPageCount()-1||(t=zr.FROM_PREV),this.jumpToPage(0,t)}}}else{r=t[this.index>-1?this.index%e:0]}r&&r.$handler.focus()}))))},n.jumpToPrev=function(){this.taskExecutor.exec((()=>this.currentOrderedAnnotComponents.then((t=>{const e=t.length;if(e<1)return;const n=this.pageRender.index,i=this.pageRender.docRender;let r;if(this.currentFocusOnAnnotComponent){if(r=t[this.index-1],!r){const t=n-1;if(-1===t){let t=i.getPDFDoc().getPageCount()-1;return this.jumpToPage(t,zr.FROM_NEXT)}return this.jumpToPage(t,zr.FROM_NEXT)}}else{r=t[this.index<=0?e-1:this.index-1]}r&&r.$handler.focus()}))))},n.jumpFromPrevPage=function(){return this.currentOrderedAnnotComponents.then((t=>!!t[0]&&(t[0].$handler.focus(),!0)))},n.jumpFromNextPage=function(){return this.currentOrderedAnnotComponents.then((t=>{const e=t[t.length-1];return!!e&&(e.$handler.focus(),!0)}))},n.jumpToPage=function(t,e){return Zr(this,void 0,void 0,(function*(){const n=this.pageRender.pdfViewer,i=this.pageRender.docRender,r=i.doc.getPageCount(),o=e===zr.FROM_NEXT,s=o?-1:1;let a,c=t;for(;;){a=i.getPDFPageRender(c);if(0!==(yield a.tabManager.currentOrderedAnnotComponents).length)break;if(c=(c+s+r)%r,c===t){a=i.getPDFPageRender(c);break}}c!==i.getCurrentPageIndex()&&(yield n.goToPage(c)),o?yield a.tabManager.jumpFromNextPage():yield a.tabManager.jumpFromPrevPage()}))},n.render=function(){this.pageRender.$ui.prepend(this.jumpPrevElement);this.pageRender.$element.append(this.jumpNextElement)},e}(_.Disposable);var to;!function(t){t.viewport="viewport",t.page="offset-page",t.scroll="scroll",t.pdf="pdf"}(to||(to={}));const eo=function(){},{min:no,max:io}=Math;let ro=function(t){function e(n,i,r,o){var s;(s=t.call(this,o)||this).isRendered=!1,s.renderedDefered=(0,_.createDeferred)(),s.name=e.getDefaultName(),s.$ui=n,s.$element=n.parent(),s.index=i,s.renderCount=0,n.attr("data-index",i),s.pagesRender=o,s.docRender=o.docRender,s.viewerRender=s.docRender.viewerRender,s.unObserveIntersectionObserver=s.docRender.intersectionObserver.observe(s.$element.get(0),((t,e)=>{s.docRender._updateVisiblePageIndex(s.index,e)})),s.unObservePageLayoutIntersectionObserver=s.docRender.intersectionObserver.observe(s.$ui.get(0),((t,e)=>{s.pageAreaIsVisible=e}));const a=n[0];s.$rendering=D()(a.querySelector(".fv__pdf-page-rendering")),s.$container=D()(a.querySelector(".fv__pdf-page-container")),s.$container[0].setAttribute("data-index",i),s.$annotsContainer=D()(a.querySelector(".fv__pdf-page-annots-container")),s.$customsContainer=D()(a.querySelector(".fv__pdf-page-customs-container"));let c=s.$handler=D()(a.querySelector(".fv__pdf-page-handler-container"));s.$invisible=D()(a.querySelector(".fv__pdf-invisible-page-container")),s.pageHandler=new Fi(c,(0,C.Z)(s)),s.doc=r,s.scale=1,s.rotate=o.rotate;let l=s.pdfViewer.customs||{};return s.pdfPageRendering=new(l.PDFPageRendering||H)(s.$rendering[0],(0,C.Z)(s)),s.pageCustomRender=new(l.PageCustomRender||j)(a.querySelector(".fv__pdf-custom-page-container"),(0,C.Z)(s)),s.renderFlags=7,s.renderingDeferreds=[],s.followRenderDeferreds=[],s.watermarkConfig=null,s.excluedHighlights=[],s.annotsRenderDeferred=(0,_.createDeferred)(),s.$element.attr({tabindex:"-1","aria-busy":!0,role:"article"}),s.$ui.addClass("fv__pdf-page-not-rendered"),_.Lazy.property((0,C.Z)(s),"tabManager",(()=>{const t=new Qr((0,C.Z)(s));return s.addDestroyHook(t),t})),s.$annotsContainer.on("pointerdown",s.pointerdownFn=t=>{const e=t.target.classList;(e.contains("fv__pdf-annot-line-point-item")||e.contains("fv__shape-control-move-area")||e.contains("fv__shape-controller"))&&(s.pdfViewer.setEnableScroll(!1),s.pdfViewer.setEnableScale(!1),document.addEventListener("pointerup",s.pointerupFn=t=>{s.pdfViewer.setEnableScroll(!0),s.pdfViewer.setEnableScale(!0)},{once:!0}))}),s}(0,E.Z)(e,t),e.getDefaultName=function(){return"pdfPageRender"};var n=e.prototype;return n.getHandlerDOM=function(){return this.$handler.get(0)},n.clearCanvasCache=function(t){this.pageContentTiles&&this.pageContentTiles.invisibleRender(t)},n.updateRenderFlags=function(t){this.renderFlags=this.renderFlags|t},n.updateRenderFlagsByScaleAndRotate=function(t,e){Math.abs(t-this.scale)>1e-6||e!==this.rotate?this.updateRenderFlags(7):this.updateRenderFlags(0)},n.checkRenderLayoutFlags=function(){return 4==(4&this.renderFlags)},n.resetRenderLayoutFlags=function(){this.renderFlags&=-5},n.checkRenderContainerFlags=function(){return this.checkRenderContentFlags()||this.checkRenderAnnotFlags()||this.checkRebuildAnnotFlags()},n.checkRenderContentFlags=function(){return 2==(2&this.renderFlags)},n.resetRenderContentFlags=function(){this.renderFlags&=-3},n.checkRenderAnnotFlags=function(){return 1==(1&this.renderFlags)},n.resetRenderAnnotFlags=function(){this.renderFlags&=-2,this.resetRebuildAnnotFlags()},n.checkRenderCustomFlags=function(){return 16==(16&this.renderFlags)},n.resetRenderCustomFlags=function(){this.renderFlags&=-17,this.resetRebuildCustomFlags()},n.checkRebuildAnnotFlags=function(){return 8==(8&this.renderFlags)},n.resetRebuildAnnotFlags=function(){this.renderFlags&=-9},n.checkRebuildCustomFlags=function(){return 32==(32&this.renderFlags)},n.resetRebuildCustomFlags=function(){this.renderFlags&=-33},n.setStateHandler=function(t){if(this.stateHandler){if(this.stateHandler.constructor.getStateName()===t.getStateName())return;this.stateHandler.destroyPageHandler()}(this.stateHandler=new t(this.pdfViewer)).pageHandler(this)},n.updateIndex=function(t){this.index!==t&&(this.index=t,this.$ui.attr("data-index",t),this.$container.attr("data-index",t))},n.getPDFPage=function(){return this.page?Promise.resolve(this.page):this.doc?this.doc.getPageByIndex(this.index).then((t=>(this.page=t,t.isVirtual()&&this.handleVirtualPage(),t))):Promise.resolve(null)},n.handleVirtualPage=function(){this.$ui.addClass("fv__virtual-pdf-page")},n.getPDFDoc=function(){return this.doc},n.getAnnotRender=function(t){try{return this.annotsRender&&this.annotsRender.getAnnotRender(t)}catch(t){return console.error(t),null}},n.getAnnotRenderSafely=function(t){return this.annotsRender?Promise.resolve(this.annotsRender.getAnnotRenderSafely(t)):this.getPDFPage().then((t=>t.getAnnots())).then((t=>new gi(this.$annotsContainer,t,this))).then((e=>e.getAnnotRenderSafely(t)))},n.getAnnotsRenderSafely=function(){return this.getPDFPage().then((t=>t.getAnnots())).then((t=>Promise.resolve(new gi(this.$annotsContainer,t,this))))},n.render=function(t=this.scale,e=this.rotate){if(this.endRender(),this.isDestroyed)return this.renderSerialPromise?this.renderSerialPromise.end():Promise.resolve();let n=this.renderSerialPromise;0===this.renderCount&&this.rendering(t),this.updateRenderFlagsByScaleAndRotate(t,e),this.scale=t,this.rotate=e;const i=!this.renderCount;return this.renderCount++,this.pdfViewer.eventEmitter.emit(nt.beforeRenderPage,this,i),Promise.resolve(this.pageCustomRender.render(t,e)).then((i=>{if(!1!==i)return n=this.renderSerialPromise=new ot(0),n.push((()=>{let n;if(this.checkRenderLayoutFlags()){this.resetRenderLayoutFlags();let i=this.pageTileConfigPromise=this.getPageTileConfig(t,e);this.pageTileConfig=null;const r=this.pageContentTiles?this.computePageSize(t,e).then((([n,i])=>{if(!this.doc.isPageSameSize())return this.pagesRender.viewMode.renderViewMode(this,t,e,n,i)})):this.renderLayout(t,e);n=Promise.all([i,r]).then((([t])=>(this.pageTileConfigPromise=null,this.pageTileConfig=t,t)))}else n=this.getPageTileConfig(t,e);return n.then((([t,e,n,i,r,o,s,a])=>{let c=this.pageContentTiles;if(!c){this.pageContentTiles=c=new xi(((t,e,n,i,r,o)=>this.getContentImageDataByTile(t,e,n,i,r,o)),null,this,this.pdfViewer.tileCache),this.pdfViewer.webPDFSRPromise||(c.getRectBitmap=(t,e,n,i)=>this.getRectBitmap(V(e),t,n,i));let t=c.$container;t.addClass("fv__pdf-page-content-container"),this.$container.append(t)}c.setRenderViewWatermark(!1);let l=this.containerVisibleRect=this.getContainerVisibleRect();c.setVisibleRect(l),this.checkRenderContentFlags()&&(c.clearCache(),this.resetRenderContentFlags());let h=(()=>{let t=[],e=this.getWatermarkConfig(),n=this.docRender.getWatermarkConfig();return Array.isArray(e)&&e.length>0?t=e:e&&e.content&&e.type?t=[e]:Array.isArray(n)&&n.length>0?t=n:n&&n.content&&n.type&&((0,_.isInCloseRange)(this.index,n.pageStart,n.pageEnd),t=[n]),t.filter((t=>{const{pageStart:e,pageEnd:n}=t,i="number"==typeof e&&e>0,r="number"==typeof n&&n>0;return i&&r?(0,_.isInCloseRange)(this.index,e,n):i?this.index>=e:!r||this.index<n}))})(),u=[];return h.length>0?(h.forEach((t=>{if(t.content&&t.type){let e=this.watermark=new Yi(n,i,r,o,t);u.push(e.getWatermarkRenderer(t))}})),Promise.all(u).then((l=>(c.setRenderViewWatermark(l.length>0),c.setUpdateCanvasMore(((t,e,n,i,r,o,s,a,c,h,u)=>{l.forEach((l=>{const u=i<0?h*a:e,d=r<0?c*a:n,f=Math.min(a,o),p=Math.min(a,s),g=l.render(u,d,f,p);t.drawImage(g,e-i,n-r)})),this.renderLayoutGrid(t,e,n,i,r,o,s)})),c.redraw(t,e,n,i,r,o,s,a))))):(this.pdfViewer.getLayoutGrid()&&c.setUpdateCanvasMore(((t,e,n,i,r,o,s,a)=>{this.renderLayoutGrid(t,e,n,i,r,o,s)})),c.redraw(t,e,n,i,r,o,s,a))}))})),n.push((()=>this.checkRebuildAnnotFlags()?(this.resetRebuildAnnotFlags(),this.rebuildAnnots(t,e,this.containerVisibleRect)):this.renderAnnots(t,e,this.containerVisibleRect))),n.push((()=>(this.checkRebuildCustomFlags()?this.rebuildCustoms(t):this.checkRenderCustomFlags()?this.renderCustoms(t):Promise.resolve()).then((()=>{this.resetRenderCustomFlags()})))),n.push((()=>{this.rendered(),this.renderSerialPromise=null,this.pdfViewer.eventEmitter.emit(nt.renderPageSuccess,this),this.tabManager.render()})),n.push((()=>{if(!this.stateHandler){let t=this.pdfViewer;(this.stateHandler=new(t.stateHandlerManager.getCurrentStates())(t)).pageHandler(this)}return Promise.resolve()})),n.exec();this.rendered()}))},n.queueRender=function(){let t=this.renderingDeferreds.length;if(!t)return;let e=this.renderingDeferreds[t-1],n=e.scale,i=e.rotate;this.updateRenderFlagsByScaleAndRotate(n,i),this._render(n,i).then((()=>{let t=this.renderingDeferreds;for(let e=0,n=t.length;e<n;e++)t[e].deferred.resolve(this);this.followRenderDeferreds.length?(this.renderingDeferreds=this.followRenderDeferreds,this.followRenderDeferreds=[],this.queueRender()):(this.renderingDeferreds=[],this.isRendering=!1)}))},n._render=function(t,e){return this.updatePageDOMRect(t),this.rendering(t),Promise.resolve(this.pageCustomRender.render(t,e)).then((n=>{if(!1!==n)return(this.checkRenderLayoutFlags()?this.renderLayout(t,e):Promise.resolve()).then((()=>(this.resetRenderLayoutFlags(),this.checkRenderContainerFlags()?this.renderContainer(t,e):Promise.resolve()))).then((()=>(this.scale=t,this.rotate=e,this.rendered(),this.pdfViewer.eventEmitter.emit(nt.renderPageSuccess,this),this)));this.rendered()}))},n.setShowWidth=function(t){this.showWidth=t},n.getShowWidth=function(){return this.showWidth},n.setShowHeight=function(t){this.showHeight=t},n.getShowHeight=function(){return this.showHeight},n.computePageSize=function(t=this.scale,e=this.rotate){return this.getPDFPage().then((n=>{const i=t=>{let i=U(n.getPxWidth(),n.getPxHeight(),t,e);return this.showWidth=i[0],this.showHeight=i[1],i};let r;return"fitVisible"!==t?(r=this.pagesRender.getPageScaleSync(this.index,t,e),i(r)):this.pagesRender.getPageScale(this.index,t,e).then((t=>i(t)))}))},n.renderLayout=function(t=this.docRender.getScale(),e=this.rotate){const n=n=>(this.updateRenderFlagsByScaleAndRotate(n,e),this.scale=n,this.rotate=e,this.computePageSize(n,e).then((([t,i])=>this.pagesRender.viewMode.renderViewMode(this,n,e,t,i))).then((()=>{const i=this.$ui;if(i.css({width:this.showWidth,height:this.showHeight}),this.annotsRender&&this.annotsRender.updateSize(n,e),this.pageContentTiles){let t=i.find(".fv__pdf-page-content-container"),e=n/this.pageContentTiles.scale;t.css("transform","scale("+e+")")}this.pdfViewer.eventEmitter.emit(nt.pageLayoutRedraw,this,t,e)})));if("fitVisible"!==t){const i=this.pagesRender.getPageScaleSync(this.index,t,e);return n(i)}return this.pagesRender.getPageScale(this.index,t,e).then((t=>n(t)))},n.renderContainer=function(t=this.scale,e=this.rotate){return this.renderPage(t,e)},n.getPageTileConfig=function(t,e){return this.getPDFPage().then((n=>{let i,r,o=this.getSmartScale(t),s=this.pdfViewer.config,a=s.tileSize;s.getTileSize&&(a=s.getTileSize(this.doc,this.page));let c=n.getPxWidth(),l=n.getPxHeight();const[h,u]=U(c,l,o,e);return i=Math.ceil(u/a),r=Math.ceil(h/a),[i,r,h,u,a,o,t,e]}))},n.renderPage=function(t=this.scale,e=this.rotate){return(this.checkRenderContentFlags()?this.renderContentImage(t,e):Promise.resolve()).then((n=>(this.resetRenderContentFlags(),this.checkRebuildAnnotFlags()?this.rebuildAnnots(t,e):this.checkRenderAnnotFlags()?this.renderAnnots(t,e):Promise.resolve()))).then((()=>(this.resetRenderAnnotFlags(),this.checkRebuildCustomFlags()?this.rebuildCustoms(t,e):this.checkRenderCustomFlags()?this.renderCustoms(t,e):Promise.resolve()))).then((()=>{if(this.resetRenderCustomFlags(),!this.stateHandler){let t=this.pdfViewer;(this.stateHandler=new(t.stateHandlerManager.getCurrentStates())(t)).pageHandler(this)}}))},n.updateSize=function(t=this.scale,e=this.rotate){return this.getPageTileConfig(t,e).then((([t,e,n,i,r,o,s,a])=>{let c=this.pageContentTiles;c&&c.updateDom(t,e,n,i,r,o,s,a)}))},n.renderContentImage=function(t=this.scale,e=this.rotate){return this.getPageTileConfig(t,e).then((([t,e,n,i,r,o,s,a])=>{let c=this.pageContentTiles;return c?c.redraw(t,e,n,i,r,o,s,a):Promise.resolve()}))},n.adjustHighlightInContentImage=function(t=[]){if([].concat(this.excluedHighlights).sort().join()!==[].concat(t).sort().join())return this.excluedHighlights=t,this.redrawContent(!0)},n.adjustHighlightAnnots=function(){return Promise.resolve()},n.getRotatedRowAndCols=function(t,e,n,i,r){switch(r){case 0:return[t,e];case 90:return[e,i-t];case 180:return[n-t,i-e];case 270:return[e,t]}},n.renderContentImageByTileCanvas=function(t,e,n,i,r,o,s,a){let c=this.pageContentTiles;if(!c){this.pageContentTiles=c=new xi(((t,e,n,i,r,o,s,a,c,l)=>this.getContentImageDataByTile(t,e,n,i,r,o)),null,!0);let t=c.$container;t.addClass("fv__pdf-page-content-container"),this.$container.append(t)}let l=this.getWatermarkConfig()||this.docRender.getWatermarkConfig();if(l&&l.content&&l.type){(this.watermark=new Yi(n,i,r,o,l.watermarkSettings,l.watermarkTextProperties)).exportDataURL({content:l.content,type:l.type}).then((t=>{let e=new Image;e.src=t,c.setUpdateCanvasMore(((t,n,i,r,o,s)=>{t.drawImage(e,i*s,n*s,r,o,0,0,r,o)}))}))}return c.redraw(t,e,n,i,r,o,s)},n.getActiveAnnotInfo=function(t,e){const n=this.page.annots.map((t=>t.info)).filter((e=>{if(-1===["popup","unknown","watermark","widget"].indexOf(e.type))return t[0]>=e.rect.left&&t[0]<=e.rect.right&&t[1]>=e.rect.bottom&&t[1]<=e.rect.top?e:void 0}));if(e){let t=n[n.length-1];for(let e=n.length-1;e>=0;e--)if("link"===n[e].type){t=n[e];break}return t}return n},n.renderAnnots=function(t,e,n){const i=i=>this.annotsRender?this.annotsRender.render(t,e,n):Promise.resolve().then((t=>(this.annotsRender||(this.annotsRender=new gi(this.$annotsContainer,t,this),this.annotsRenderDeferred.resolve(this.annotsRender)),this.annotsRender))).then((i=>i.render(t,e,n)));return this.parent("pdfDocRender").getFormRender()&&this.doc.getPDFForm()?this.doc.getPDFForm().addTask(i):Promise.resolve(i())},n.rebuildAnnots=function(t,e,n=this.containerVisibleRect){const i=()=>{let i;i=this.page.getAnnots(1),this.docRender.setRebuildAnnotsFlag(!0);let r=this.annotsRender;return r&&r.removeUI(),i.then((t=>(this.annotsRenderDeferred=(0,_.createDeferred)(),this.annotsRender=new gi(this.$annotsContainer,t,this),this.annotsRenderDeferred&&this.annotsRenderDeferred.resolve(),this.annotsRender))).then((i=>(n||(n=this.containerVisibleRect=this.getContainerVisibleRect()),i.render(t,e,n)))).then((t=>(r&&r.destroy(),t)))};let r=this.parent("pdfDocRender").getFormRender();const o=this.doc.getPDFForm();return r&&o?o.addTask(i):Promise.resolve(i())},n.renderCustoms=function(t,e){return this.customsRender?this.customsRender.render(t,e):this.getPDFPage().then((t=>this.pdfViewer.customRenderManager.getPageCustomData(t))).then((t=>(this.customsRender&&(this.customsRender.destroy(),this.customsRender=null),this.customsRender=this.customsRender||new qi(this.$customsContainer,t,this)))).then((n=>n.render(t,e)))},n.rebuildCustoms=function(t,e){return this.getPDFPage().then((t=>this.pdfViewer.customRenderManager.getPageCustomData(t))).then((t=>this.customsRender=this.customsRender||new qi(this.$customsContainer,t,this))).then((n=>n.render(t,e)))},n.renderAnnot=function(t,e,n){return new(this.pdfViewer.annotManager.get(t.getType()))(t,this).render(e,n)},n.updatePageDOMRect=function(t=this.scale,e=this.rotate){let n=this.doc.getPageSize(this.index);if((n||(-1===t&&(t=this.pagesRender.getEstimatedPageScaleSync(this.index,this.scale,this.rotate)),n=this.doc.getEstimatedPageSize(this.index),n&&-1!==t))&&t!=this.scale&&n){switch((e%360+360)%360){case 90:case 270:{const t=n.width;n.width=n.height,n.height=t}}n.width*=V(1)*t,n.height*=V(1)*t;const i=n;this.$ui.height()!=n.width&&(i.minHeight=40);const r=this.$ui.get(0),o=r.classList,s="fv__pdf-page-not-rendered";o.contains(s)&&o.remove(s),(0,_.cssText)(r,{width:Math.ceil(i.width)+"px",height:Math.ceil(i.height)+"px","min-height":i.minHeight+"px"})}},n.rendering=function(t=this.scale,e=this.rotate){this.$ui.addClass("fv__rendering"),this.pdfPageRendering.rendering()},n.rendered=function(){this.isDestroyed||(this.isRendered=!0,this.$ui.removeClass("fv__rendering"),this.pdfPageRendering.rendered(),this.pdfViewer.isWisWebPDFSR||this.openActionTrigged||!this.pdfViewer.enableOpenAction||this.getPDFPage().then((t=>{let e=t.getAction("open");e&&this.pdfViewer.actionManager.get(e,this).active(),this.openActionTrigged=!0})),this.renderedDefered.resolve())},n.isRendering=function(){return this.$ui.hasClass("fv__rendering")},n.waitRendered=function(){return this.isRendered?Promise.resolve():this.renderedDefered.promise},n.destroy=function(){this.isDestroyed||(this.unObserveIntersectionObserver(),this.unObservePageLayoutIntersectionObserver(),this.pointerdownFn&&(this.$annotsContainer.off("pointerdown",this.pointerdownFn),this.pointerdownFn=null),this.pointerupFn&&(document.removeEventListener("pointerup",this.pointerupFn),this.pointerupFn=null),t.prototype.destroy.call(this),this.invisibleRender(),this.pageContentTiles&&this.pageContentTiles.destroy(),this.stateHandler&&this.stateHandler.out(),this.annotsRender&&this.annotsRender.destroy(),this.annotsRenderDeferred=null,this.pageHandler.destroy(),this.$ui.parent().remove().next(".fv__pdf-view-mode-item-split").remove(),this.eLayoutContainerTransitionStyle&&document.body.removeChild(this.eLayoutContainerTransitionStyle),this.pdfPageRendering.destroy(),this.pageCustomRender&&this.pageCustomRender.destroy(),this.pageCustomRender=null,this.pdfPageRendering=null,this.pageHammer=null,this.pageHandler=null,this.$ui=null,this.eLayoutContainerTransitionStyle=null,this.doc=null,this.page=null,this.pageContentTiles=null,this.stateHandler=null)},n.getSmartScale=function(t){return this.pdfViewer.getSmartScale(t)},n.getScale=function(){return this.scale},n.getRotation=function(){return this.rotate},n.getRectBitmap=function(t,e,n,i=this.rotate){let r=this.page;const o=this.docRender.getUserPermission();o.checkAnnotForm()||o.checkFillForm();return r.getPageBitmap(t,i,e,["page"],"view",n)},n.previewRectBitmap=function(t,e,n,i=this.rotate){return this.getRectBitmap(t,e,n,i).then((r=>{const o=document.createElement("canvas"),s=o.getContext("2d"),{buffer:a,width:c,height:l,x:h,y:u}=r;let d=new(Uint8ClampedArray||Uint8Array)(a),f=s.createImageData(c,l);f.data.set(d),o.width=c+h,o.height=l+u,s.putImageData(f,0,0);const p={scale:t,rect:e,id:n,rotate:i,url:o.toDataURL()};return console.log(p),p}))},n.getContentImageDataByTile=function(t,e,n,i,r,o){return this.getRectBitmap(V(o),{x:e*r,y:t*r,width:n,height:i})},n.getTextContinueRectAtDeviceRect=function(t){let e;return this.getPDFPage().then((n=>(e=n,e.reverseDeviceRect(t,this.scale,this.rotate)))).then((t=>e.getTextContinuousRectsAtRect(t)))},n.getTextContinueRectAtDevicePoints=function(t,e,n,i){return Promise.all([this.getPDFPage(),this.reverseDevicePoint(t),this.reverseDevicePoint(e)]).then((([t,e,r])=>t.getTextContinuousRectsAtPoints(e,r,8,n,i)))},n.getDoubleClickTextRectAtPoint=function(t){return Promise.all([this.getPDFPage(),this.reverseDevicePoint(t)]).then((([t,e])=>t.getDoubleClickTextRectAtPoint(e,8)))},n.getTextContinuousCharAtDeviceRect=function(t){let e;return this.getPDFPage().then((n=>(e=n,e.reverseDeviceRect(t,this.scale,this.rotate)))).then((t=>e.getTextContinuousCharsAtRect(t)))},n.getAllTextRect=function(){return this.getPDFPage().then((t=>t.getTextContinuousRectsAtRect(t.info.cropBox)))},n.getAllTextChar=function(){return this.getPDFPage().then((t=>t.getTextContinuousCharsAtRect(t.info.cropBox,!0)))},n.transformPoint=async function(t){const{point:e,srcType:n,destType:i}=t,{scale:r,rotate:o}=this;if(!e)throw new Error(`[transformPoint] options.point is not a valid point object: ${JSON.stringify(e)}.`);if(!(0,_.isValidNumber)(e.x))throw new TypeError(`[transformPoint] options.point.x: ${e.x} is not a valid number`);if(!(0,_.isValidNumber)(e.y))throw new TypeError(`[transformPoint] options.point.y: ${e.y} is not a valid number`);if(n===i)return y({},e);if(!n)throw new Error("[transformPoint] options.srcType is not type of ViewerConstants.PagePointType");if(!i)throw new Error("[transformPoint] options.destType is not type of ViewerConstants.PagePointType");const s=await this.transformPointIntoPDFPoint({point:e,type:n,scale:r,rotate:o});return this.transformPDFPointToDestType({point:s,type:i,scale:r,rotate:o})},n.transformPDFPointToDestType=async function(t){let{point:e,type:n,scale:i,rotate:r}=t;isFinite(i)||(i=this.scale),isFinite(r)||(r=this.rotate);const o=await this.getPDFPage();switch(n){case to.scroll:{const t=this.getPagePositionOffsetViewerContainer(),[n,s]=o.getDevicePoint([e.x,e.y],i,r);return{x:t.x+n,y:t.y+s}}case to.page:{const[t,n]=o.getDevicePoint([e.x,e.y],i,r);return{x:t,y:n}}case to.viewport:{const[t,n]=o.getDevicePoint([e.x,e.y],i,r),s=this.$ui[0].getBoundingClientRect();return{x:s.left+t,y:s.top+n}}case"PDFViewerPort":{const[t,n]=o.getDevicePoint([e.x,e.y],i,r);let s=this.viewerRender.scrollWrap.getScrollHost();((0,_.isWindowObject)(s)||(0,_.isDocument)(s))&&(s=document.body);const a=this.$ui[0].getBoundingClientRect();let c=s.getBoundingClientRect();return{x:t+a.left-c.left,y:n+a.top-c.top}}case to.pdf:return e;default:throw new Error("[transformPDFPointToDestType] options.type is not type of ViewerConstants.PagePointType")}},n.transformPointIntoPDFPoint=async function(t){let{point:e,type:n,scale:i,rotate:r}=t;isFinite(i)||(i=this.scale),isFinite(r)||(r=this.rotate);const o=await this.getPDFPage();switch(n){case to.scroll:{const t=this.getPagePositionOffsetViewerContainer(),n=[e.x-t.x,e.y-t.y],[s,a]=o.reverseDevicePoint(n,i,r);return{x:s,y:a}}case to.viewport:const{left:t,top:n}=this.$ui[0].getBoundingClientRect();e={x:e.x-t,y:e.y-n};case to.page:const[s,a]=o.reverseDevicePoint([e.x,e.y],i,r);return{x:s,y:a};case to.pdf:return e;default:throw new Error("[transformPointIntoPDFPoint] options.type is not type of ViewerConstants.PagePointType")}},n.getPagePositionOffsetViewerContainer=function(){const t=this.pdfViewer.getPDFViewerRender().$ui[0],e=t.parentElement,n=e.getBoundingClientRect(),i=t.getBoundingClientRect(),r=this.$ui[0].getBoundingClientRect(),o=i.top-n.top,s=i.left-n.left;return{x:r.left+e.scrollLeft-i.left+s,y:r.top+e.scrollTop-i.top+o}},n.reverseDeviceRect=function(t){return this.getPDFPage().then((e=>e.reverseDeviceRect(t,this.scale,this.rotate)))},n.reverseDevicePoint=function([t,e],n=this.scale,i=this.rotate){return this.getPDFPage().then((r=>r.reverseDevicePoint([t,e],n,i)))},n.getDeviceRect=function(t){return this.getPDFPage().then((e=>e.getDeviceRect(t,this.scale,this.rotate)))},n.transformRectArray=function(t,e){let n=[],i=this.scale;for(let r=e.length;r--;){let o=e[r];n[r]=t.getDeviceRect(o,i,this.rotate)}return n},n.getClientPoint=function(t,e){let n=this.$ui[0].getBoundingClientRect();return[t+n.left,e+n.top]},n.redraw=function(t){return t&&(this.updateRenderFlags(7),this.annotsRender&&this.annotsRender.adjustHighlightsRender()),this.render()},n.redrawContent=function(t){return(t?(()=>{let t=this.pageContentTiles;return t&&t.clearCache(),Promise.resolve()})():Promise.resolve()).then((()=>this.renderContentImage(this.scale,this.rotate))).then((()=>this.adjustHighlightAnnots()))},n.getDevicePointFromEvent=function(t){let e=this.$ui.offset();return[t.pageX-e.left,t.pageY-e.top]},n.removeAnnotRenders=function(t){return this.annotsRender&&this.annotsRender.removeAnnotRenders(t)},n.redrawAnnotRenders=function(t){if("canvas"===this.pdfViewer.config.annotRenderingMode.highlight)return this.annotsRender.redrawAnnotRenders(t);let e=[],n=[];for(let i=0,r=t.length;i<r;i++){let r=t[i];"highlight"===r.getType()?e.push(r):n.push(r)}return e.length&&this.renderContentImage(),this.annotsRender.redrawAnnotRenders(n)},n.movedAnnotRenders=function(t,e){return this.annotsRender.movedAnnotRenders(t,e)},n.addAnnotRenders=function(t){if(!this.annotsRender)return this.annotsRenderDeferred.promise.then((()=>this.addAnnotRenders(t)));return this.annotsRender.addAnnotRenders(t)},n.getPageAreaRenderer=function(t,e,n=1,i=!1){return new _i(this,t,e,n,i)},n.getSnapshot=function(t,e,n,i){let r=1;const o=window.localStorage.getItem("PREFERENCES-GENNERAL");if(o){const{resolution:t,fixedResolution:e}=JSON.parse(o);e&&(r=t/96)}const s=this.getPageAreaRenderer(n*r,i*r,r,!0);return s.setPosition(t+n/2,e+i/2),s.update().then((t=>{const e=(0,_.createDeferred)();return t.toBlob((t=>e.resolve(t)),"image/png"),e.promise}))},n.unActiveAnnotRender=function(){try{this.annotsRender.unActiveAnnot()}catch(t){}},n.activeGraphicsObject=function(t){},n.addCustomRenders=function(t){this.customsRender.addCustomRenders(t)},n.removeCustomRenders=function(t){this.customsRender.removeCustomRenders(t)},n.updateCustomRenders=function(t){this.customsRender.updateCustomRenders(t)},n.setWatermarkConfig=function(t){this.watermarkConfig=t},n.getWatermarkConfig=function(){return this.page&&this.page.isVirtual()?{content:"VIRTUAL PAGE",type:"text",watermarkSettings:void 0,watermarkTextProperties:{font:"Microsoft Yahei",fontSize:40,color:"#000000",fontStyle:"normal",lineSpace:10,alignment:"center"}}:this.watermarkConfig},n.endRender=function(){let t=this.renderSerialPromise;t&&t.end().catch(eo);let e=this.annotsRender;e&&e.endRender()},n.invisibleRender=function(t){this.endRender();let e=this.pageContentTiles,n=this.annotsRender;if(t){e&&(e.destroy(),delete this.pageContentTiles),n&&(n.destroy(),delete this.annotsRender);let t=this.stateHandler;t&&(t.destroyPageHandler(),delete this.stateHandler),this.page&&(this.page.clearRenderCache(),this.page.clearCacheObjects())}else e&&e.invisibleRender(),n&&n.invisibleRender()},n.move=function(){},n.renderingFollowPromise=function(){},n.triggerAction=function(t){setTimeout((()=>{if(this.page&&!this.page.isDestroyed&&this.annotsRender)return!this.annotsRender.widgetsDone&&this.page.annots.length?this.triggerAction(t):void this.page.annots.forEach((e=>{e.getAdditionalAction&&this.docRender.formRender.execAction("annot",e.getAdditionalAction(t),e,e,Er[t])}))}),200)},n.getContainerVisibleRect=function(){let t=this.docRender,e=this.$ui[0].getBoundingClientRect(),n=t.getContainerVisibleRect();const i=(n.right-n.left)/2|0,r=(n.bottom-n.top)/2|0;let o=Math.max(e.left,n.left)-e.left-i,s=Math.min(e.right,n.right)-e.left+i,a=Math.max(e.top,n.top)-e.top-r,c=Math.min(e.bottom,n.bottom)-e.top+r;return o<0&&(o=0),a<0&&(a=0),s>this.getShowWidth()&&(s=this.getShowWidth()),c>this.getShowHeight()&&(c=this.getShowHeight()),{left:o,right:Math.max(o,s),top:a,bottom:Math.max(a,c)}},n.getCurrentVisibleRect=function(){let t=this.docRender,e=this.$ui[0].getBoundingClientRect(),n=t.getContainerVisibleRect();const i=n.right-n.left,r=n.bottom-n.top,o=io(0,n.left-e.left),s=io(0,n.top-e.top),a=no(io(0,e.width-o),i),c=no(io(0,e.height-s-io(0,e.bottom-n.bottom)),r);return{left:o,top:s,width:a,height:c,right:o+a,bottom:s+c}},n.getContainerFullRect=function(){const t=this.docRender,e=this.$ui[0].getBoundingClientRect(),n=t.getContainerVisibleRect();return{left:n.left-e.left,right:n.right-e.right,top:n.top-e.top,bottom:n.bottom-e.bottom}},n.getPDFRectFromClientRect=function(t){let e=this.$ui[0].getBoundingClientRect(),n=t.left-e.left,i=t.top-e.top,r={left:n,top:i,right:n+t.width,bottom:i+t.height};return this.page.reverseDeviceRect(r,this.scale,this.rotate)},n.getPDFPointFromClientPoint=function(t,e,n){let i=this.$ui[0].getBoundingClientRect();return n?[t-i.left,e-i.top]:this.page.reverseDevicePoint([t-i.left,e-i.top],this.scale,this.rotate)},n.formatGridOptions=function(t){if(!t)return;let e=Gn(t.unit);if(!e)return;let n=this.getScale(),i=e.convertTo(t.width*n,$n),r=e.convertTo(t.height*n,Wn),o=e.convertTo(t.offsetLeft*n,$n),s=e.convertTo(t.offsetTop*n,Wn),a=t.subdivisions;return{lineWidth:i,lineHeight:r,offsetLeft:o,offsetTop:s,subLineWidth:i/a,subLineHeight:r/a,maxWidth:this.getShowWidth(),maxHeight:this.getShowHeight()}},n.renderLayoutGrid=function(t,e,n,i,r,o,s){let a=this.pdfViewer.getLayoutGrid();if(!a)return;if(!Gn(a.unit))return;const c=t.canvas.width,l=t.canvas.height;t.getImageData(0,0,1,1);let h=a.color,u=h.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/)||[h,127,127,255],d=+u[1],f=+u[2],p=+u[3],g=.67,m="rgba("+(d+(255-d)*g)+","+(f+(255-f)*g)+","+(p+(255-p)*g)+","+(+u[4]||1)+")",{lineWidth:v,lineHeight:y,offsetLeft:w,offsetTop:b,subLineWidth:A,subLineHeight:P}=this.formatGridOptions(a),S=Math.abs((i-w)%v-v)%v,C=Math.abs((r-b)%y-y)%y,E=Math.abs((i-w)%A-A)%A,x=Math.abs((r-b)%P-P)%P,D=c,I=l;for(i=Math.max(0,i),r=Math.max(0,r),t.beginPath(),t.strokeStyle=m,t.lineWidth=1;E<D;)t.moveTo(E,0),t.lineTo(E,I),E+=A;for(;x<I;)t.moveTo(0,x),t.lineTo(D,x),x+=P;for(t.stroke(),t.beginPath(),t.strokeStyle=h;S<D;)t.moveTo(S,0),t.lineTo(S,I),S+=v;for(;C<I;)t.moveTo(0,C),t.lineTo(D,C),C+=y;t.stroke()},n.getTextRectsAtRect=function(t){let e;return this.getPDFPage().then((n=>(e=n,e.reverseDeviceRect(t,this.scale,this.rotate)))).then((t=>e.getTextRectsAtRect(t)))},n.renderArticles=function(t){if(!this.doc)return;let e;e=t&&t.length>0?Promise.resolve(t):this.doc.getPdfArticle().getArticleList(),e.then((t=>{t.forEach((t=>{(t.children||[]).forEach((e=>{this.renderArticle(t,e)}))}))}))},n.renderArticle=function(t,e){const n=this.articleBeads.hasOwnProperty(e.objNum);if(e.pageIndex===this.index)if(n){this.articleBeads[e.objNum].updateRender(t,e)}else this.articleBeads[e.objNum]=new Cr(this,t,e)},n.getSignaturePDFRect=function(t,e={}){const n=this.getRotation(),i=this.getScale();let r={};const o=this.$handler.find(`#${t}`);if(!o.length)return Promise.resolve();let s,a,c=o.find("canvas")[0].width+2,l=o.find("canvas")[0].height+2;90===n||270===n?(a=c,s=l):(s=c,a=l),r.top=parseFloat(o.css("top")),r.left=parseFloat(o.css("left")),r.right=r.left+s,r.bottom=r.top+a;let h=`${r.top}_${r.left}_${r.right}_${r.bottom}`;const u=JSON.parse(localStorage.getItem("device_rect_map")||"{}"),d={...u,...e};return Object.keys(d).length&&h in d?Promise.resolve(d[h]):this.getPDFPage().then((t=>{let o=t.reverseDeviceRect(r,i,n);e[h]=o;const s={...u,...e};return localStorage.setItem("device_rect_map",JSON.stringify(s)),o}),(()=>Promise.resolve()))},e}(K);var oo=ro;function so(t){return JSON.parse(JSON.stringify(t)).reduce(((t,e)=>{if(2===e.length){let t=[];for(let n=e[0];n<e[1];n++)t.push(n);e=t}return t.concat(e)}),[])}let ao=function(){function t(t){this.viewMode=t,_.Lazy.property(this,"executor",(()=>new _.ThrottleAsyncTaskExecutor(80)))}var e=t.prototype;return e.getPageCount=function(){const t=this.getPDFDocRender();if(!t)return 0;const e=t.getPDFDoc();return e?e.getPageCount():0},e.getPDFDocRender=function(){return this.viewMode.docRender},e.onKeyReleased=function(t){return!1},t}(),co=function(){function t(t){this.docRender=t,t.$ui.addClass("fv__view-mode"),this.pageDOMs=[],this.shortcutEventHandler=this.generateShortcutEventHandler()}t.getName=function(){};var e=t.prototype;return e.getItems=function(){return this.pageDOMs},e.into=function(t,e){this.pageDOMs=e;const n=document.createDocumentFragment();"function"==typeof n.append?n.append.apply(n,e):e.forEach((t=>{n.appendChild(t)})),t.innerHTML="",t.appendChild(n)},e.updatePageDOMs=function(t){this.pageDOMs=t},e.renderViewMode=function(t,e,n,i,r){},e.afterRenderVisiblePages=function(){},e.jumpToPage=function(t,{x:e=0,y:n=0}){},e.getFitHeight=function(t){},e.getFitWidth=function(t){},e.getVisibleIndexes=function(){return this.docRender.getVisiblePageIndexes()},e.getCurrentPageIndex=function(){return 0},e.getPrevPageIndex=function(){return Math.max(0,this.getCurrentPageIndex()-1)},e.getNextPageIndex=function(){const t=this.docRender.getPDFDoc().getPageCount();return Math.min(t-1,this.getCurrentPageIndex()+1)},e.out=function(){this.docRender=null,this.pageDOMs=[]},e.generateShortcutEventHandler=function(){},e.getShortcutEventHandler=function(){return this.shortcutEventHandler},t}();var lo=co;function ho(t,e=0){return"string"==typeof t&&(t=parseFloat(t)),isFinite(t)?t:e}let uo=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.onKeyPressed=function(t){const e=this.viewMode,n=e.fixedVerticalPosition;switch(t.command){case Ir.JUMP_TO_FIRST_PAGE:return this.executor.exec((()=>this.jumpToFirstPage())),!0;case Ir.JUMP_TO_LAST_PAGE:return this.executor.exec((()=>this.jumpToLastPage())),!0;case Ir.JUMP_TO_PREVIOUS_PAGE:return this.executor.exec((()=>e.jumpToPrevPage())),!0;case Ir.JUMP_TO_NEXT_PAGE:return this.executor.exec((()=>e.jumpToNextPage())),!0}if(n)switch(t.command){case Ir.SCROLL_TO_PREVIOUS_VISIBLE_AREA:case Ir.ARROW_UP:return this.executor.exec((()=>e.jumpToPrevPage())),!0;case Ir.SCROLL_TO_NEXT_VISIBLE_AREA:case Ir.ARROW_DOWN:return this.executor.exec((()=>e.jumpToNextPage())),!0}else{const n=e.computePageMetadata(e.currentPageIndex);if(!n)return!1;const i=e.scrollWrap,{pageHeight:r,visibleBoxHeight:o,visibleBoxWidth:s,scrollTop:a}=n,c=e.scrollWrap.getScrollTop();let l=80;switch(t.command){case Ir.SCROLL_TO_PREVIOUS_VISIBLE_AREA:case Ir.SCROLL_VIEWER_SCROLLBAR_UP:l=o;case Ir.ARROW_UP:return this.executor.exec((()=>{if(c>a){let t=c-a;return t=Math.min(l,t),i.scrollBy(0,-t,"smooth"),Promise.resolve()}return e.jumpToPrevPage()})),!0;case Ir.SCROLL_TO_NEXT_VISIBLE_AREA:case Ir.SCROLL_VIEWER_SCROLLBAR_DOWN:l=o;case Ir.ARROW_DOWN:return this.executor.exec((()=>{if(c>=a+(r-o))return e.jumpToNextPage();if(c>=a){let t=r-(c-a)-o;t=Math.min(t,l),i.scrollBy(0,t,"smooth")}return Promise.resolve()})),!0;case Ir.SCROLL_VIEWER_SCROLLBAR_LEFT:return i.scrollBy(-s,0,"smooth"),!0;case Ir.SCROLL_VIEWER_SCROLLBAR_RIGHT:return i.scrollBy(s,0,"smooth"),!0}}return!1},n.jumpToFirstPage=function(){return this.viewMode.jumpToPage(0,{x:0,y:0})},n.jumpToLastPage=function(){const t=this.getPageCount();return this.viewMode.jumpToPage(t-1,{x:0,y:0})},e}(ao);const fo="up",po="down",go="left-top",mo="left-bottom";let vo=function(t){function e(e){var n;(n=t.call(this,e)||this).currentPageIndex=0,n.scrollWrap=n.docRender.viewerRender.scrollWrap,n.lastScale=null,n.isZoomin=!1,n.fixedVerticalPosition=!1,n.currentPageOffset=0,n.rerenderViewExecutor=new _.DebounceAsyncTaskExecutor(100),n.rerenderPageExecutor=new _.DebounceAsyncTaskExecutor(10),n.scrollEventExecutor=new _.DebounceAsyncTaskExecutor(100),n.dragScrollbarEventExecutor=new _.ThrottleAsyncTaskExecutor(50,!0),n.queuedDragScrollbarEventExecutor=new _.QueuedAsyncTaskExecutor,n.mouseWheelExecutor=new _.QueuedAsyncTaskExecutor,n.jumpPageExecutor=new _.DebounceAsyncTaskExecutor,n.unbindScrollEvent=ei,n.unbindMouseEvent=ei,n.unbindWheelEvent=ei,n.allowHandleScrollOnWheel=!1,n.isMouseDownOnScrollbar=!1,n.handledWheel=!1,n.instanceId=mi(),n.diffJumpPage=n.diffJumpPage.bind((0,C.Z)(n)),n.forceUpdatePageContainer=n.forceUpdatePageContainer.bind((0,C.Z)(n)),n.currentScrollDirection;let i=n.scrollWrap.getScrollHost();i===window&&(i=document.documentElement);const r=t=>{const e=t.clientX,r=n.getCurrentVisibleBoxRect(),o=getComputedStyle(i),s=(parseInt(o.borderLeftWidth)||0)+(parseInt(o.borderRightWidth)||0),a=i.offsetWidth,c=a-i.clientWidth-s;n.isMouseDownOnScrollbar=e>=a-c+r.left},o=t=>{n.isMouseDownOnScrollbar=!1};return i.addEventListener("mousedown",r,{capture:!0}),window.addEventListener("mouseup",o,{capture:!0}),n.unbindMouseEvent=()=>{i.removeEventListener("mousedown",r,{capture:!0}),window.removeEventListener("mouseup",o,{capture:!0})},n}(0,E.Z)(e,t),e.getName=function(){return"single-page-view-mode"};var n=e.prototype;return n.diffJumpPage=function(){const t=(new Date).getTime();let e=t;return isNaN(this.countNum)?(this.countNum=0,this.lastCountDateTime=t):(this.countNum++,e=t-this.lastCountDateTime,this.lastCountDateTime=t),e},n.getPDFPageRender=function(t){return this.docRender.pagesRender.pageRenders[t]},n.into=function(t,e,n=this.currentPageIndex){this.docContainer=t,this.pageDOMs=e,t.classList.add("fv__viewer-single-view-mode");const i=this.pageDOMs[n];{const e=t.childNodes;if(e.length>1){if(_.isIE)for(let n=e.length-1;n>=0;n--)t.removeChild(e[n]);else t.innerHTML="";t.appendChild(i)}else 1===e.length?t.contains(i)||t.replaceChild(i,e[0]):t.contains(i)||t.appendChild(i)}this.renderPageContainer(),this.scrolledToPage(n),this.bindScrollEvent(),this.bindWheelEvent(),this.docRender.pdfViewer.eventEmitter.on(nt.pageAdded,this.forceUpdatePageContainer),this.docRender.pdfViewer.eventEmitter.on(nt.pageRemoved,this.forceUpdatePageContainer),this.docRender.pdfViewer.eventEmitter.on(nt.pagesInserted,this.forceUpdatePageContainer)},n.out=function(){this.pageDOMs.forEach((t=>{t.style.top&&(t.style.top="")})),this.docRender.pdfViewer.eventEmitter.off(nt.pageAdded,this.forceUpdatePageContainer),this.docRender.pdfViewer.eventEmitter.off(nt.pageRemoved,this.forceUpdatePageContainer),this.docRender.pdfViewer.eventEmitter.off(nt.pagesInserted,this.forceUpdatePageContainer),this.unbindScrollEvent(),this.unbindWheelEvent(),this.unbindMouseEvent(),this.rerenderViewExecutor.cancel(),this.rerenderPageExecutor.cancel(),this.jumpPageExecutor.cancel(),this.scrollEventExecutor.cancel(),this.mouseWheelExecutor.cancel(),this.dragScrollbarEventExecutor.cancel(),this.queuedDragScrollbarEventExecutor.cancel(),this.resetCurrentPageDom(),this.enableScroll(),this.docContainer.classList.remove("fv__viewer-single-view-mode"),this.isMouseDownOnScrollbar=!1,this.docContainer.style.height=""},n.rebindScrollEvent=function(){this.bindScrollEvent()},n.forceUpdatePageContainer=function(){this.renderPageContainer(!0)},n.updateScrollPosition=function(){const t=this.currentPageIndex,e=this.pageDOMs[t],n=t=>{const n=this.scrollWrap.getScrollTop();e.style.cssText+=`top: ${t.pageOffset+n}px`};if(!this.isPageRendered(t))return this.computePageMetadataAsync(t).then(n);n(this.computePageMetadata(t))},n.keepPagePosition=function(t=!1){if(this.fixedVerticalPosition||t)return this.updateScrollPosition()},n.isValidCurrentPageIndex=function(){const t=this.docRender;if(!t)return!1;const e=t.pagesRender;if(!e)return!1;const n=e.pageRenders;if(!n)return!1;const i=this.currentPageIndex;return i>=0&&i<n.length},n.bindScrollEvent=function(){this.unbindScrollEvent();let t=this.scrollWrap.getScrollTop();this.unbindScrollEvent=this.scrollWrap.addScrollEventListener((e=>{if(!this.allowHandleScrollOnWheel&&(this.allowHandleScrollOnWheel=!0,!this.isMouseDownOnScrollbar&&(_.isChrome||_.isChromiumEdge)))return;if(!this.isValidCurrentPageIndex())return;const n=this.keepPagePosition(),i=()=>{const e=this.scrollWrap.getScrollTop(),n=t;if(e>n?this.currentScrollDirection=po:e<n&&(this.currentScrollDirection=fo),this.isMouseDownOnScrollbar)this.queuedDragScrollbarEventExecutor.exec((()=>(t=e,this.handleDragScrollbar(this.scrollWrap.getScrollTop(),this.currentScrollDirection))));else{let n=!1;switch(this.currentScrollDirection){case po:n=this.isBottomOutOfBoundsOnWheel();break;case fo:n=this.isTopOutOfBoundsOnWheel()}if(!n)return t=e,this.handleWheel(this.scrollWrap.getScrollTop(),this.currentScrollDirection);{const t=this.handleWheel(e,this.currentScrollDirection);this.scrollEventExecutor.exec((()=>t))}}};n instanceof Promise?n.then(i):i()}))},n.bindWheelEvent=function(){this.unbindWheelEvent();const t=t=>{if(_.keyboardStatus.isCtrlDown)return;this.allowHandleScrollOnWheel=!1;const e=t.deltaY;let n;if(e<0)n=fo;else{if(!(e>0))return;n=po}this.currentScrollDirection=n,this.fixedVerticalPosition?(t.preventDefault(),this.keepPagePosition(),this.mouseWheelExecutor.exec((()=>{switch(n){case po:return this.jumpToNextPage();case fo:return this.jumpToPrevPage()}return st.RESOLVED_PROMISE_VOID}))):_.keyboardStatus.isShiftDown||!_.isChrome&&!_.isChromiumEdge||(this.allowHandleScrollOnWheel=!0)},e=this.scrollWrap.getScrollHost();e.addEventListener("wheel",t,{passive:!1}),this.unbindWheelEvent=()=>{e.removeEventListener("wheel",t,{passive:!1})}},n.handleDragScrollbar=function(t,e){if(this.fixedVerticalPosition){const n=this.computePageIndex(t);if(n!==this.currentPageIndex)return this.scrolledToPage(n,e)}else{if(e===fo)return this.handleDragUp(t);if(e===po)return this.handleDragDown(t)}return st.RESOLVED_PROMISE_VOID},n.handleWheel=function(t,e){if(this.fixedVerticalPosition){const n=this.computePageIndex(t);if(n!==this.currentPageIndex)return this.scrolledToPage(n,e)}else{if(e===fo)return this.handleWheelUp(t);if(e===po)return this.handleWheelDown(t)}return st.RESOLVED_PROMISE_VOID},n.handleWheelUp=function(t){this.handledWheel=!0;const e=this.getPDFPageRender(this.currentPageIndex),n=this.getCurrentVisibleBoxRect();if(e.$element[0].getBoundingClientRect().top>=n.top)return this.jumpToPrevPage()},n.handleWheelDown=function(t){this.handledWheel=!0;const e=this.getPDFPageRender(this.currentPageIndex),n=this.getCurrentVisibleBoxRect();if(e.$element[0].getBoundingClientRect().bottom<n.bottom)return this.jumpToNextPage()},n.isBottomOutOfBoundsOnWheel=function(t=this.currentPageIndex){const e=this.getPDFPageRender(t),n=this.getCurrentVisibleBoxRect();return e.$element[0].getBoundingClientRect().bottom<n.bottom},n.isTopOutOfBoundsOnWheel=function(t=this.currentPageIndex){const e=this.getPDFPageRender(t),n=this.getCurrentVisibleBoxRect();return e.$element[0].getBoundingClientRect().top>n.top},n.handleDragUp=function(t){const e=this.computePageMetadata(this.currentPageIndex);if(!e)return;const{pageTop:n,visibleBoxHeight:i}=e,r=this.pageDOMs[this.currentPageIndex],o=n-i;if(t>o&&t<n)r.style.cssText+=`top: ${t}px`;else if(t<o){const e=this.computePageIndex(t);return this.jumpToPage(e,fo)}return st.RESOLVED_PROMISE_VOID},n.handleDragDown=function(t){const e=this.computePageIndex(t);if(e!==this.currentPageIndex)return this.jumpToPage(e,po);{const t=this.currentPageIndex,e=this.scrollWrap.getScrollTop(),n=this.computePageMetadata(t);if(!n)return;const{scrollTop:i,pageHeight:r,visibleBoxHeight:o}=n;if(e>i+r-o&&this.pageDOMs.length>1){const n=e+o-r;this.pageDOMs[t].style.cssText+=`top: ${n}px`}}return st.RESOLVED_PROMISE_VOID},n.doJumpOnScroll=function(t){const e=e=>{const n=e.pageHeight-e.visibleBoxHeight;return this.jumpToPage(t,{y:n},!1).then((()=>{this.docRender.getPDFPageRender(e.pageIndex).renderLayout()}))};return this.isPageRendered(t)?e(this.computePageMetadata(t)):this.computePageMetadataAsync(t).then(e)},n.jumpToPage=function(t,e){const n=this.docRender.getPDFDoc().getPageCount();if(t<0||t>=n)throw new Error("Illegal page index value: "+t);const i=()=>(this.unbindScrollEvent(),this.computePageMetadataAsync(t).then((n=>{this.currentPageIndex=t;let i=this.waitForScrollEnd();try{this.rerenderPage(n),this.scrollToPage(n,e),this.docRender.setCurrentPageIndex(t)}finally{return i.finally((()=>{this.currentPageIndex=t,this.rebindScrollEvent()}))}})));return t===this.currentPageIndex?i():this.jumpPageExecutor.exec(i)},n.waitForScrollEnd=function(t=100,e=!0){const n=(0,_.createDeferred)();let i;const r=this.scrollWrap.addScrollEventListener((e=>{e.isMock||(clearTimeout(i),i=setTimeout((()=>{r(),n.resolve(),clearTimeout(i)}),t))}));return e&&(i=setTimeout((()=>{r(),n.resolve(),clearTimeout(i)}),t)),n.promise},n.jumpPageByWheelOnFixedPosition=function(t){if(this.fixedVerticalPosition)return this.mouseWheelExecutor.exec((()=>{let e,n;switch(t){case po:e=this.getNextPageIndex(),n=go;break;case fo:e=this.getPreviousPageIndex(),n=mo;break;default:return}if(e!==this.currentPageIndex)return this.unbindScrollEvent(),this.computePageMetadataAsync(index).then((t=>{this.currentPageIndex=index;let e=this.waitForScrollEnd(0,!1);try{this.rerenderPage(t),this.scrollToPage(t,n),this.docRender.setCurrentPageIndex(index)}finally{return e.finally((()=>{this.currentPageIndex=index,this.rebindScrollEvent()}))}}))}))},n.jumpToNextPage=function(){const t=this.getNextPageIndex();return t===this.currentPageIndex?st.RESOLVED_PROMISE_VOID:this.jumpToPage(t)},n.jumpToPrevPage=function(){const t=this.getPrevPageIndex();return t===this.currentPageIndex?st.RESOLVED_PROMISE_VOID:this.jumpToPage(t,mo,!1)},n.formatPosition=function(t,e){const n=Math.max(0,t.pageHeight-t.visibleBoxHeight),i=Math.max(0,t.pageWidth-t.visibleBoxWidth);switch(e){case mo:return{y:n};case go:return{};case"right-top":return{x:i};case"right-bottom":return{x:i,y:n}}return e},n.scrolledToPage=function(t,e){this.currentPageIndex=t;const n=n=>{n&&(this.rerenderPage(n),this.renderPagePosition(n,e),this.docRender.setCurrentPageIndex(t))};if(!this.isPageRendered(t))return this.computePageMetadataAsync(t).then(n);n(this.computePageMetadata(t));return st.RESOLVED_PROMISE_VOID},n.resetCurrentPageDom=function(){this.currentPageOffset=0;const t=this.pageDOMs[this.currentPageIndex];t&&(t.style.top="")},n.rerenderPage=function(t){if(!t)return;const{pageIndex:e,pageWidth:n,pageHeight:i,pageTop:r,visibleBoxHeight:o,visibleBoxWidth:s,refresh:a}=t,c=this.pageDOMs[e],l=this.docContainer;if(e!==this.currentPageIndex||a||!c.parentElement){const t=l.childNodes;if(t.length>1){if(_.isIE)for(let e=t.length-1;e>=0;e--)l.removeChild(t[e]);else l.innerHTML="";l.appendChild(c)}else 1===t.length?l.contains(c)||l.replaceChild(c,t[0]):l.contains(c)||l.appendChild(c);this.resetCurrentPageDom(),this.currentPageIndex=e}const h=n<=s,u=i<=o;this.fixedVerticalPosition=i<=o,c.style.cssText+=`top: ${r}px;`,c.children[0].style.cssText+=`width:${n}px;height:${i}px`;const d=this.docRender,f=this.docRender.getPDFPageRender(e).pagesRender,p=d.rotation;return f.getPageScale(e,d.scale,p).then((t=>{this.docRender.pdfViewer.eventEmitter.emit(nt.updateScrollableStatus,{disableHorizontal:h,disableVertical:u})}))},n.renderPagePosition=function(t,e){if(!t)return;const{pageHeight:n,pageTop:i,scrollTop:r,visibleBoxHeight:o}=t,s=this.pageDOMs[t.pageIndex];if(this.fixedVerticalPosition)this.keepPagePosition();else{s.style.cssText+=`top: ${i}px;`;const t=this.scrollWrap.getScrollTop();if(e===po){if(t>r+n-o){const e=t+o-n;s.style.cssText+=`top: ${e}px`}}else if(e===fo){t>i-o&&t<i&&(s.style.cssText+=`top: ${t}px`)}else{const e=s.offsetTop;e>t?s.style.cssText+=`top: ${t}px`:e+n<t+o&&(s.style.cssText+=`top: ${t+o-n}px`)}}},n.scrollToPage=function(t,e={},n=!1){const{visibleBoxHeight:i,visibleBoxWidth:r,pageHeight:o,pageWidth:s,scrollTop:a,pageTop:c}=t;let{x:l=this.scrollWrap.getScrollLeft(),y:h=0}=this.formatPosition(t,e);o<=i&&(h=0),s<r&&(l=0);const u=l;let d,f;f=o>=i?c+(o-i):a,d=Math.min(a+Math.max(0,h),f),this.scrollWrap.scrollTo(u,d,n?"smooth":"auto")},n.computePageMetadataAsync=function(t){const e=this.docRender,n=e.pagesRender.pageRenders[t],i=e.scale,r=e.rotation;return this.isPageRendered(t)?n.computePageSize(i,r).then((e=>this.computePageMetadata(t))):n?n.computePageSize(i,r).then((()=>{const e=this.computePageMetadata(t);return this.docContainer.style.cssText+=`height: ${e.containerHeight}px`,e})):Promise.resolve()},n.isPageRendered=function(t){const e=this.docRender.pagesRender.pageRenders[t];if(!e)return!1;const n=e.getShowHeight();return"number"==typeof n&&!isNaN(n)&&isFinite(n)},n.computePageMetadata=function(t){var e,n;const i=null==(e=this.docRender)||null==(n=e.pagesRender)?void 0:n.pageRenders[t];if(!i)return;const r=this.scrollWrap.getHeight(),o=this.scrollWrap.getWidth(),s=i.getShowHeight(),a=i.getShowWidth(),c=this.computeScrollTop(t),l=this.computeContainerHeight(t,c),h=.5*Math.max(0,r-s);return{visibleBoxHeight:r,visibleBoxWidth:o,pageIndex:t,pageHeight:s,pageWidth:a,containerHeight:l,pageTop:c+h,scrollTop:c,pageOffset:h,occupiedHeight:Math.max(r,s)}},n.computeScrollTop=function(t){const e=this.scrollWrap.getHeight(),n=this.docRender.pagesRender.pageRenders;let i=0,r=0;for(let o=0;o<t;o++){let t=n[o].getShowHeight();("number"!=typeof t||isNaN(t))&&(t=o>0?r/o:e),r+=t,i+=Math.max(e,t)}return i},n.computePageIndex=function(t){const e=this.docRender.pagesRender.pageRenders,n=this.scrollWrap.getHeight();let i=0,r=0;for(let o=0;o<e.length;o++){let s=e[o].getShowHeight();this.isPageRendered(o)||(s=o>0?r/o:n);const a=Math.max(s,n);if(t>=i&&t<i+a)return o;r+=s,i+=a}return-1},n.computeContainerHeight=function(t,e){const n=this.scrollWrap.getHeight(),i=this.docRender.pagesRender&&this.docRender.pagesRender.pageRenders;let r=e;if(i)for(let e=t;e<i.length;e++){let t=i[e].getShowHeight();("number"!=typeof t||isNaN(t))&&(t=e>0?r/e:r),r+=Math.max(n,t)}return _.isMobile&&(r+=10),r},n.renderViewMode=function(t){if(t.index===this.currentPageIndex){let e=this.computePageMetadata(t.index);const n=t.getScale();null==this.lastScale?this.isZoomin=!1:this.isZoomin=this.lastScale<n,this.lastScale=n,e.refresh=!0,this.rerenderPage(e),this.renderPagePosition(e)}this.rerenderViewExecutor.exec((()=>{this.renderPageContainer()}))},n.renderPageContainer=function(t=!1){const e=this.computeContainerHeight(0,0);this.docContainer.style.cssText+=`height: ${e}px`,this.keepPagePosition(t)},n.disableScroll=function(t){this.docRender.pdfViewer.eventEmitter.emit(nt.disableScroll,t)},n.enableScroll=function(t){this.docRender.pdfViewer.eventEmitter.emit(nt.enableScroll,t)},n.getFitWidth=function(t){const e=this.scrollWrap,n=getComputedStyle(this.pageDOMs[t]);return e.getWidth()-ho(n.marginLeft)-ho(n.marginRight)},n.getFitHeight=function(t){return this.scrollWrap.getHeight()},n.getVisibleIndexes=function(){return[this.currentPageIndex]},n.getCurrentPageIndex=function(){return this.currentPageIndex},n.getScrollHostElement=function(){const t=this.scrollWrap.getScrollHost();return t===window?document.body:t},n.getCurrentVisibleBoxRect=function(){const t=this.scrollWrap.getScrollHost();if(t===window||t===document.body||t===document.documentElement){const t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;return{x:0,y:0,width:t,height:e,left:0,right:t,top:0,bottom:e}}return t.getBoundingClientRect()},n.generateShortcutEventHandler=function(){return new uo(this)},e}(lo);const yo=_.LoggerFactory.getLogger("PDFPagesRender");let wo=function(t){function e(n,i,r){var o;(o=t.call(this,r)||this).name=e.getDefaultName(),o.$element=n.parent(),o.$ui=n,o.pageDOMs=[],o.doc=i,o.docRender=r;let s=r.viewerRender.ViewMode;return o.viewMode=new s(r),o.viewerRender=r.viewerRender,o.pdfViewer=o.viewerRender.pdfViewer,o.pageRenders=[],o.scale=1,o.rotate=0,o.neverRendered=!0,o.minScale=+o.pdfViewer.config.minScale,o.maxScale=+o.pdfViewer.config.maxScale,o.isPageDOMsLoaded=!1,o.pdfViewer.eventEmitter.on(nt.layerVisibleChange,o.layerVisibleChange=t=>{o.doc===t&&(o.setRenderFlags(2),o.renderVisiblePages().catch((t=>{0})),o.pageRenders.forEach((t=>{t.page&&t.rebuildAnnots(t.scale,t.rotate)})))}),o.pdfViewer.eventEmitter.on(nt.imageAdded,o.imageAdded=t=>{let e=o.viewMode.getVisibleIndexes(),n=t.getIndex();if(-1!==e.indexOf(n)){const t=o.pageRenders[n];t&&t.redrawContent(!0).then((t=>{o.setRenderFlags(2),o.renderVisiblePages()}))}}),o.pdfViewer.eventEmitter.on(nt.watermarkAdded,o.watermarkAdded=o.imageAdded),o.pdfViewer.eventEmitter.on(nt.watermarkRemoved,o.watermarkRemoved=t=>{o.viewMode.getVisibleIndexes().forEach((t=>{const e=o.pageRenders[t];e&&e.redrawContent(!0).then((t=>{o.setRenderFlags(2),o.renderVisiblePages()}))}))}),o.pdfViewer.eventEmitter.on(nt.graphicsUpdated,o.graphicsUpdated=t=>{let e=o.viewMode.getVisibleIndexes(),n=t.getIndex();-1!==e.indexOf(n)&&(o.setRenderFlags(2),o.renderVisiblePages())}),o.pdfViewer.eventEmitter.on(nt.pageAdded,o.pageAdded=t=>{let e=t.getIndex();o.addNewPageByIndex(e)}),o.pdfViewer.eventEmitter.on(nt.pageMoved,o.pageMoved=(t,e)=>{o.movePageRender(t,e)}),o.pdfViewer.eventEmitter.on(nt.pagesMoved,o.pagesMoved=(t,e,n)=>{o.movePagesRender(t,e,n)}),o.pdfViewer.eventEmitter.on(nt.pageRemoved,o.pageRemoved=t=>{o.removePageByIndex(t);const e=o.pageRenders.length,n=o.viewMode.getCurrentPageIndex();if(n===t){const t=Math.min(n,e-1);o.docRender.goToPage(t),o.viewMode.currentPageIndex=t}}),o.pdfViewer.eventEmitter.on(nt.pagesRemoved,o.pagesRemoved=t=>{const e=so(t).sort(((t,e)=>e-t));let n=o.viewMode.getCurrentPageIndex();e.forEach((t=>{const e=o.pageRenders[t];e&&(e.destroy(),o.pageRenders.splice(t,1),t<n&&n--)})),o.pageRenders.forEach(((t,e)=>{t.updateIndex(e)})),o.updatePageDOMs();const i=o.doc.getPageCount();n=Math.max(0,Math.min(n,i-1)),o.docRender.goToPage(n),o.viewMode.currentPageIndex=n}),o.pdfViewer.eventEmitter.on(nt.importPages,o.importPages=t=>{o.importPagesByArray(t)}),o.pdfViewer.eventEmitter.on(nt.pagesReplace,o.pagesReplace=({delPageRange:t,pages:e})=>{t.sort(((t,e)=>e-t)).forEach((t=>{o.removePageByIndex(t)})),o.importPagesByArray(e)}),o.pdfViewer.eventEmitter.on(nt.applyRedaction,o.applyRedaction=t=>{let e=o.pdfViewer;if(!1!==t){let n=e.getPDFDocRender(),i=n.pagesRender;if(!i)return;t.forEach((t=>{let e=t.pageIndex,i=t.removedAnnots,r=n.pagesRender.pageRenders[e];if(r.annotsRender){let t=r.page.annots;for(let e=t.length-1;e>=0;e--){let n=t[e];-1!==i.indexOf(n.objectNumber)&&(n.info.isDeleted=!0,t.splice(e,1))}}})),i.setRenderFlags(10),i.renderVisiblePages(),e.eventEmitter.emit(nt.redactAnnotApplyed,(0,C.Z)(o))}}),o.pdfViewer.eventEmitter.on(nt.flattened,o.flattened=t=>{o.setRenderFlags(10),o.renderVisiblePages()}),o.pdfViewer.eventEmitter.on(nt.headerFooterUpdated,o.headerFooterUpdated=o.flattened),o.pdfViewer.eventEmitter.on(nt.headerFooterAdded,o.headerFooterAdded=o.flattened),o.pdfViewer.eventEmitter.on(nt.updateZoomMode,o.updateZoomMode=t=>o.updatePagesDomSize(t,!0,o.viewMode.pageDOMs)),o}(0,E.Z)(e,t),e.getDefaultName=function(){return"pdfPagesRender"};var n=e.prototype;return n.setViewMode=async function(t){const e=this.viewMode,n=e.getCurrentPageIndex();let i=this.scale;const[r,o]=await this.docRender.getViewBoxCenter(!0,"topLeft");if(e.out(),"fitVisible"==i&&-1!==["facing-page-view-mode"].indexOf(t.getName())&&(this.scale=i=1),this.docRender.isDestroyed)return;this.viewMode=new t(this.docRender),this.viewMode.into(this.$ui.get(0),this.pageDOMs,n),this.setRenderFlags(4);let s=Object.keys(this.doc.getPageSizesSync());try{const t={pageIndex:r?r.getIndex():n,x:o[0],y:o[1]};await Promise.all([this.docRender.zoomTo(this.scale,t),this.loadPageSize(s,0)]),await this.docRender.goToPage(n,{x:0,y:0})}catch(t){0}},n.getViewMode=function(){return this.viewMode},n.render=function(t=this.scale,e=this.rotate){return this.scale=t,this.rotate=e,this.createPagesStructure(),this.viewMode.pageDOMs.length||this.viewMode.into(this.$ui.get(0),this.pageDOMs),this.docRender.rendered(),Promise.resolve().then((t=>this.docRender.move()))},n.getScaleSyncOrNot=function(t,e,n,i){"fitVisible"!==n?t(this.getPageScaleSync(e,n,i)):this.getPageScale(e,n,i).then((e=>{t(e)}))},n.movePageRender=function(t,e){let n=this.pageRenders[t];if(!n)return;let i=n.$ui.parent(),r=this.pageRenders[e];if(!r)return;let o=r.$ui.parent();t<e?i.insertAfter(o):i.insertBefore(o),this.pageRenders.splice(t,1),this.pageRenders.splice(e,0,n);let s=Math.min(t,e),a=Math.max(t,e);for(let t=s;t<=a;t++)this.pageRenders[t].updateIndex(t);this.updatePageDOMs(),this.getScaleRatio().then((t=>this.renderVisiblePages(t).catch((t=>{0}))))},n.movePagesRenderBAK=function(t,e){const n=t.filter((t=>t<e)),i=t.filter((t=>t>=e)),r=this.pageRenders.length,o=e===r,s=(t,e)=>{let n=this.pageRenders[t];if(!n)return;let i=n.$ui.parent(),r=this.pageRenders[e];if(!r)return;let o=r.$ui.parent();i.insertBefore(o)};n.reverse().forEach(((t,n)=>{let i=this.pageRenders[t];s(t,e-n),this.pageRenders.splice(t,1),this.pageRenders.splice(e-n-1,0,i)})),i.forEach(((t,n)=>{let i=this.pageRenders[t];s(t,e+n),this.pageRenders.splice(t,1),this.pageRenders.splice(e+n,0,i)}));const a=o?e-1:e;let c=Math.min(Math.min.apply(null,t),a),l=Math.max(Math.max.apply(null,t),a);for(let t=c;t<=l;t++)this.pageRenders[t].updateIndex(t);this.updatePageDOMs(),this.getScaleRatio().then((t=>this.renderVisiblePages(t).catch((t=>{0}))))},n.movePagesRender=function(t,e,n){const i=this.pageRenders.length;t.reduce(((t,n)=>{const r=this.pageRenders[n].$ui.parent();return t?r.insertAfter(t):""===t&&(e===i?r.insertAfter(this.pageRenders[i-1].$ui.parent()):r.insertBefore(this.pageRenders[e].$ui.parent())),r}),"");let r,o=this.pageRenders;t.map((t=>o[t])).forEach(((t,n)=>{const i=o.indexOf(t);if(o.splice(i,1),0===n)i<e?o.splice(e-1,0,t):o.splice(e,0,t);else{const e=o.indexOf(r);o.splice(e+1,0,t)}r=t})),o.forEach(((t,e)=>{t.updateIndex(e)})),this.updatePageDOMs(),this.getScaleRatio().then((t=>this.renderVisiblePages(t).catch((t=>{0}))))},n._updatePageRenders=function(t,e){let n=D()(F);const i=n.get(0);if(this.pageRenders[t]){if(!e){let e=this.pageRenders[t].$ui.parent();n.insertBefore(e)}this.pageDOMs.splice(t,0,i)}else e||this.$ui.append(n),this.pageDOMs.push(i);let r=n.find(".fv__pdf-page-layout"),o=new oo(r,t,this.doc,this);this.pageRenders.splice(t,0,o);for(let e=t+1;e<this.pageRenders.length;e++)this.pageRenders[e].updateIndex(e)},n.addNewPageByIndex=function(t){const e=this.viewMode instanceof vo;return this._updatePageRenders(t,e),this.updatePageDOMs(),this.getScaleRatio().then((e=>{const n=this.pageRenders[t];if(n)return this.getScaleSyncOrNot((t=>n.updatePageDOMRect(t,this.rotate)),t,e,this.rotate),this.renderVisiblePages(e).catch((t=>{0}))}))},n.importPagesByArray=function(t){let e=(0,_.createDeferred)(),n=this.importPagesByArrayPromises=this.importPagesByArrayPromises||Promise.resolve();return this.importPagesByArrayPromises=n.finally((()=>{const n=this.viewMode instanceof vo;return t.forEach((t=>{const e=t.getIndex();this._updatePageRenders(e,n);const i=this.pageRenders[e];i&&this.getScaleSyncOrNot((t=>i.updatePageDOMRect(t,this.rotate)),e,this.scale,this.rotate)})),this.updatePageDOMs(),this.docRender.loadFormRender(!0).then((t=>(this.setRenderFlags(8),this.renderVisiblePages(this.scale)))).then((()=>e.resolve())).catch((t=>e.reject()))})),e.promise},n.removePageByIndex=function(t){if(this.pageRenders[t]){let e=this.pageRenders.splice(t,1)[0];e.$ui.parent().remove().next(".fv__pdf-view-mode-item-split").remove(),e.destroy();for(let e=t;e<this.pageRenders.length;e++)this.pageRenders[e].updateIndex(e);this.pageDOMs.splice(t,1)}this.updatePageDOMs(),this.renderVisiblePages(this.scale).catch((t=>{0}))},n.updatePageDOMs=function(){this.pageDOMs=this.pageRenders.map((t=>t.$element.get(0))),this.viewMode.updatePageDOMs(this.pageDOMs)},n.setRenderFlags=function(t){let e=this.pageRenders;for(let n=0,i=e.length;n<i;n++)e[n].updateRenderFlags(t)},n.loadPageSize=function(t,e=0){let n,i=0;for(;this.doc.getPageSize(t[i]);)i++;if(i==t.length)n=Promise.resolve();else{let r=t[i];n=this.doc.getPageSizes(r+e,7)}return n},n.renderVisiblePages=function(t=this.docRender.getScale(),e=this.rotate){if(this.isDestroyed)return Promise.resolve();return this.renderingTask=(()=>{let t,e=this.viewMode.getVisibleIndexes();return t=this.loadPageSize(e,-3),t.then((()=>this.adjustRenderVisiblePages(this.scale,this.rotate))).then((()=>{this.viewMode&&(this.viewMode.afterRenderVisiblePages(),this.pdfViewer.eventEmitter.emit(nt.visiblePagesRenderCompleted),this.renderingTask=null)}))})()},n.adjustRenderVisiblePages=function(t=this.docRender.getScale(),e=this.rotate){let n=this.viewMode,i=n.getVisibleIndexes();return this.renderPages(i,t,e).then((()=>{if(!n.docRender||0===n.pageDOMs.length)return;return n.getVisibleIndexes().filter((t=>-1===i.indexOf(t))).length>0?this.adjustRenderVisiblePages(t,e):void 0}))},n.renderPages=function(t=[],e=this.docRender.getScale(),n=this.rotate){if(this.isDestroyed)return Promise.resolve();const i=this.docRender.doc;let r=this.renderPagesSerial;r&&r.end().catch((t=>{0})),r=this.renderPagesSerial=new ot;let o=0;for(;t[o]>=0&&i.getPageSize(t[o]);)o++;let s=[];o<t.length&&s.push((e=>i.getPageSizes(t[o],t.length)));for(let i=0,r=t.length;i<r;i++){const r=t[i];s.push(((t,e)=>()=>this.getPageScale("fitVisible"===e?0:t,e,n).then((e=>{const i=this.pageRenders[t];return i?i.render(e,n).then((t=>{const e=i.$annotsContainer.get(0),n="fv__viewer-annot-container-hide";e.classList.contains(n)&&e.classList.remove(n)})):Promise.resolve()})).catch((t=>Promise.resolve())))(r,e))}return r.serial(s)},n.renderPagesLayout=function(t=[],e=this.scale){if(this.isDestroyed)return Promise.resolve();let n=this.renderPagesSerial;n&&n.end().catch((t=>{0})),n=this.renderPagesSerial=new ot;let i=0;for(;this.doc.getPageSize(t[i++]););let r=[e=>this.doc.getPageSizes(t[i],t.length-i)];for(let n=0,i=t.length;n<i;n++){let i=t[n];r.push(((t,e)=>()=>this.getPageScale(t,e).then((e=>{if(this.pageRenders[t])return this.pageRenders[t].renderLayout(e)})))(i,e))}return n.serial(r)},n.destroy=function(){t.prototype.destroy.call(this);for(let t=this.pageRenders.length;t--;)this.pageRenders[t].destroy();this.pageRenders=[],this.renderPagesSerial&&this.renderPagesSerial.end().catch((t=>{0})),this.viewMode.out(),this.viewMode=null,this.$ui.empty(),this.pageDOMs.length=0;let e=this.pdfViewer.eventEmitter;["actionAdd","actionRemove","layerVisibleChange","imageAdded","watermarkAdded","watermarkRemoved","graphicsUpdated","pageAdded","pagesInserted","pageMoved","pagesMoved","pageRemoved","pagesRemoved","importPages","applyRedaction","flattened","headerFooterUpdated","headerFooterAdded","pagesReplace","articleThreadUpdated","articleBeadAdded","articleBeadUpdated","updateZoomMode"].forEach((t=>{this[t]&&e.off(nt[t],this[t]),this[t]=null})),this.renderPagesSerial&&this.renderPagesSerial.end(),this.renderPagesSerial=null},n.renderViewMode=function(t){this.viewMode.renderViewMode(t)},n.goToPage=function(t,e,n=0,i=0){let r=this.getPDFPageRender(t);if(r)return r.getPDFPage().then((e=>(this.viewMode.jumpToPage(t,{x:n,y:i}),"single-page-view-mode"==this.viewMode.constructor.getName()?(this.renderViewMode(r),this.renderVisiblePages().then((()=>{this.viewMode.jumpToPage(t,{x:n,y:i})})).catch((t=>{yo.debug(t)}))):void 0)))},n.updatePagesDomSize=function(t,e,n,i=!1){if(this.isDestroyed)return Promise.resolve();const r=this.pdfViewer.getScrollWrap(),o=r.getHeight(),s=r.getWidth(),a=[],c=this.doc.isPageSameSize();return this.pageRenders.forEach(((e,n)=>{const i=e.pageContentTiles;e.updateRenderFlags(7),e.page&&(e.page.clearDesignerAssitCache(),i&&i.clearCache());const l=this.getPageScale("fitVisible"===t||c?0:n,t,this.rotate),h=e.annotsRender;a.push(l.then((t=>{const a=4*t/3,c=this.doc;let l=c.getPageSize(n);l||(l=c.getEstimatedPageSize(n));let{width:u,height:d}=l;switch(this.rotate/90){case 1:case 3:let t=u;u=d,d=t}e.scale=t,e.rotate=this.rotate;let f,p=i?i.renderedScale:1,g=a*_.dpr/p;if(f="scale("+g+")",!n&&this.viewMode.fixMargin){const t=c.getPageSizesSync(),e=Object.keys(t).reduce(((e,n)=>(n=t[n],e.height=Math.max(n.height,e.height),e.width=Math.max(n.width,e.width),e)),{width:0,height:0});let n=e.width*a,i=e.height*a;switch(this.rotate/90){case 1:case 3:let t=n;n=i,i=t}this.viewMode.fixMargin(n,i),o==r.getHeight()&&s==r.getWidth()||this.viewMode.fixMargin(u*a,d*a)}e.setShowWidth(u*a),e.setShowHeight(d*a);(n=>{e.$container.parent().css({width:u*a,height:d*a}).find(".fv__pdf-page-content-container").css("transform",f),h&&h.updateSize(t,this.rotate)})()})))})),Promise.all(a).then((a=>{if(i)return a;let c=this.pdfViewer.customs.isFullScreen;return c=c&&c(),!isNaN(t)||o==r.getHeight()&&s==r.getWidth()||c?a:this.updatePagesDomSize(t,e,n,!0)}))},n.zoomTo=function(t,e){if(this.isDestroyed)return Promise.resolve();this.scale=t,this.doc.clearAllDesignerAssistCache();let n,i=[],r=e.pageIndex;if("device"==e.type)n=e;else{this.pageRenders[r];i.push(this.getPageScale("fitVisible"===t?0:r,t,this.rotate).then((async t=>{let i=(await this.doc.getPageByIndex(r)).getDevicePoint([e.x,e.y],t,this.rotate);n={x:i[0],y:i[1]}})))}return this.doc.isPageSameSize()?i.push(this.updatePagesDomSize(t,!1,this.viewMode.pageDOMs)):this.pageRenders.forEach((e=>{e.page?i.push(e.renderLayout(t,this.rotate)):(e.scale=t,e.rotate=this.rotate);const n=e.pageContentTiles;n&&n.clearCache()})),Promise.all(i).then((t=>{if(this.isDestroyed)return;let i=e.pageIndex;const r=this.getPDFPageRender(i);return this.renderViewMode(r),Promise.resolve(this.viewMode.jumpToPage(i,n))}))},n.getScaleRatio=function(t=this.docRender.getScale(),e=this.rotate){let n=this.viewMode.getCurrentPageIndex();return n>=this.docRender.getPDFDoc().getPageCount()&&(n=this.docRender.getPDFDoc().getPageCount()-1),this.getPageScale(n,t,e)},n.rotateTo=function(t){(0,_.assertThat)((0,_.isValidRotationAngle)(t),`Illegal rotation angle: ${t}, it should be 0,90,180 or 270`),this.rotate=(t%360+360)%360;let e=this.viewMode.getVisibleIndexes();return Promise.all(e.map((t=>{let e=this.pageRenders[t];return e.$annotsContainer.addClass("fv__viewer-annot-container-hide"),e.clearCanvasCache(!0),e.renderLayout(void 0,this.rotate)}))).then((t=>{this.setRenderFlags(7)})).then((t=>Promise.all(this.pageRenders.map((t=>{if(-1===e.indexOf(t.index))return t.renderLayout(void 0,this.rotate)}))))).finally((t=>{this.pdfViewer.eventEmitter.emit(nt.fitWidthResizeViewport)}))},n.adjustFitPage=function(t){let e,n,i,r=this.doc.getPageSize(t);return r&&(e=r.height,n=r.width),e||(r=this.doc.getPageSize(0),e=r.height,n=r.width),i=e/n>this.viewMode.getFitHeight(t)/this.viewMode.getFitWidth(t)?"fitHeight":"fitWidth",i},n.getPageScaleSync=function(t,e,n=0){return this._getPageScaleSync(t,e,n)},n._getPageScaleSync=function(t,e,n=0,i=(()=>this.doc.getPageSize(t))){if(n=(n%360+360)%360,"fitHeight"===e&&(e=this.adjustFitPage(t)),+e>this.minScale)return Math.min(+e,this.maxScale);if(+e<=this.minScale)return this.minScale;if("fitWidth"===e){let e=i();if(e||(e=this.doc.getEstimatedPageSize(t)),e){if(!this.viewMode)return this.resolveScaleValue(1);let i=this.viewMode.getFitWidth(t);const r=90===n||270===n?e.height:e.width;return this.resolveScaleValue(i/(r*V(1)))}}else if("fitHeight"===e){let e=i();if(e||(e=this.doc.getEstimatedPageSize(t)),e){const i=90===n||270===n?e.width:e.height;return this.resolveScaleValue(this.viewMode.getFitHeight(t)/(i*V(1)))}}return-1},n.getEstimatedPageScaleSync=function(t,e,n=0){return this._getPageScaleSync(t,e,n,(()=>this.doc.getEstimatedPageSize(t)))},n.getPageScale=function(t,e,n=this.rotate){return this.viewMode&&this.doc?("fitHeight"===e&&(e=this.adjustFitPage(t)),+e>this.minScale?Promise.resolve(Math.min(+e,this.maxScale)):+e<=this.minScale?Promise.resolve(this.minScale):"fitWidth"===e?this.doc.getPageByIndex(t).then((e=>{if(!this.viewMode)return Promise.resolve(1);let i=this.viewMode.getFitWidth(t);const r=90===n||270===n?e.getPxHeight():e.getPxWidth();return this.resolveScaleValue(i/r)})):"fitVisible"===e?this.doc.getPageByIndex(t).then((e=>e.calcPageContentBBox(jt.CalcContentsBox).then((i=>{if(!this.viewMode)return Promise.resolve(1);let r=1,o=e.getRotation(),s=this.viewMode.getFitWidth(t);i&&void 0!==i.left&&i.left!==i.right&&i.top!==i.bottom&&(r=1===o||3===o?e.info.mediaHeight/Math.abs(i.top-i.bottom):e.info.mediaWidth/Math.abs(i.right-i.left),r=r>1.5?1.5:r);const a=90===n||270===n?e.getPxHeight():e.getPxWidth();return this.resolveScaleValue(s*r/a)})))):"fitHeight"===e?Promise.all([this.viewMode.getFitHeight(t),this.pageRenders[t].getPDFPage().then((t=>90===n||270===n?t.getPxWidth():t.getPxHeight()))]).then((([t,e])=>this.resolveScaleValue(t/e))):Promise.resolve(1)):Promise.resolve(1)},n.resolveScaleValue=function(t){if(t=+t,!isFinite(t))throw new Error(`The scale value must be valid number, but actual: ${t}`);return Math.max(this.minScale,Math.min(this.maxScale,t))},n.createPagesStructure=function(){if(this.pageDOMs.length)return;let t=this.doc.getPageCount();const e=(()=>{const t=document.createElement("div");t.innerHTML=F;const e=t.firstElementChild;return t.removeChild(e),e})(),n=Array(t).fill(0).map((t=>e.cloneNode(!0)));n.forEach(((t,e)=>{const n=t.firstElementChild;this.pageRenders[e]||(this.pageRenders[e]=new oo(D()(n),e,this.doc,this))})),this.pageDOMs=n,this.isPageDOMsLoaded=!0},n.getPDFPageRender=function(t){try{return this.pageRenders[t]}catch(t){return null}},n.unActiveAnnotRender=function(){let t=this.pageRenders||[];for(let e=t.length;e--;){t[e].unActiveAnnotRender()}},n.moveTo=function(t){return this.pagesEndRender(t),this.renderPages(t)},n.pagesEndRender=function(t){let e=this.pageRenders||[],n=e.length,i=this.pdfViewer.tileCache,r=t[0]||0,o=r-i;if(--r>-1)for(let t=r;t--;){let n=e[t];n&&n.invisibleRender(t<o)}let s=t[t.length-1]||0,a=s+i;if(++s<n)for(let t=s;t<n;t++){let n=e[t];n&&n.invisibleRender(t>a)}},e}(K);var bo=wo;var Ao=function(){function t(t,e){this.$ui=D()(t),this.docRender=e,this.viewerRender=e.viewerRender,this.pdfViewer=this.viewerRender.pdfViewer}var e=t.prototype;return e.rendering=function(){this.closeLoadingFn=this.pdfViewer.viewerUI.loading(this.$ui.get(0))},e.rendered=function(){this.closeLoadingFn&&this.closeLoadingFn(),this.$ui.empty()},e.destroy=function(){this.$ui=null},t}();let Po=function(){function t(t,e){this.eCustom=t,this.pdfDocRender=e,this.doc=e.doc}var e=t.prototype;return e.render=function(t){},e.destroy=function(){this.pdfDocRender=null,this.doc=null},t}();let So=function(){function t(t=4294967292){this.permissions=t}var e=t.prototype;return e.getValue=function(){return this.permissions},e.checkPrint=function(){return this.permissions&pe.print},e.checkModify=function(){return this.permissions&pe.modify},e.checkExtract=function(){return this.permissions&pe.extract},e.checkAnnotForm=function(){return this.permissions&pe.annotForm},e.checkFillForm=function(){return this.permissions&pe.fillForm},e.checkExtractAccess=function(){return this.permissions&pe.extractAccess},e.checkAssemble=function(){return this.permissions&pe.assemble},e.checkPrintHigh=function(){return this.permissions&pe.printHigh},e.checkCannotModifyAny=function(){return 0==(1323&this.permissions)},e.putCannotModifyAny=function(){return this.or(-1324)},e.checkCannotModifyExcludeAssemble=function(){return 0==(299&this.permissions)},e.putCannotModifyExcludeAssemble=function(){return this.or(-300)},e.and=function(t){return this.permissions=this.permissions&t,this},e.or=function(t){return this.permissions=this.permissions|t,this},t}();var Co=m(4953),Eo=m.n(Co);m(799),m(7821),m(401),m(6741),m(2805),m(969),m(1844),m(6679),m(9088);const xo=["CreatePushButtonStateHandler","CreateCheckBoxStateHandler","CreateRadioButtonStateHandler","CreateComboBoxStateHandler","CreateListBoxStateHandler","CreateTextStateHandler","CreateSignStateHandler","CreateDateStateHandler","CreateImageStateHandler"];let Do=function(t){function e(e,n){var i;(i=t.call(this,n)||this).doc=e,i.docRender=n,i.$docContainer=n.$container,i.isRunningAction=!1;let r=e.getPDFForm();if(!r)return(0,C.Z)(i);r.setActionHandler(((t,e,n,r)=>i.execAction("Field",t,e,n,r)));let o=i.viewerEvents={[nt.switchStateHandler]:(t,e)=>{i.blurControl()},[nt.tapPage]:()=>{i.blurControl(),i.initTabParams()},[nt.tapAnnotation]:()=>{i.blurControl()},[nt.openFileSuccess]:()=>{i.control=null,i.initTabParams()},[nt.renderPageSuccess]:t=>{i.currentDocId!==t.doc.id&&i.initTabParams(),i.currentDocId=t.doc.id,i.afterPageRender&&(i.afterPageRender(),i.afterPageRender=null)},[nt.activeAnnotation]:t=>{const e=t.getAnnot();i.initTabParams(e)},[nt.tapField]:t=>{i.initTabParams(t)},[nt.spawnPageSuccess]:t=>{t.setActionHandler(((t,e,n,r)=>i.execAction("Field",t,e,n,r)))},"change-language-success":t=>{if(i.dt&&i.dt.isOpen){let e=i.switchToFlatpickrLocale(t),n=i.dt.input,r=y(i.dt.config,{locale:e}),o=i.dt.timeContainer.style;i.dt.close(),i.dt&&i.dt.calendarContainer&&i.dt.calendarContainer.remove(),i.dt=y(i.dt,Eo()(n,r)),i.dt.timeContainer.style.cssText=o.cssText,i.dt.redraw(),i.dt.open(null,n),delete n._flatpickr}}};for(let t in o)i.pdfViewer.eventEmitter.on(t,o[t]);return i.runtimeHighlight=!0,i}(0,E.Z)(e,t);var n=e.prototype;return n.usingHTML=function(t){const e={[xe.Unknown]:"",[xe.PushButton]:"pushButton",[xe.CheckBox]:"",[xe.RadioButton]:"radioButton",[xe.Text]:"textField",[xe.ListBox]:"listBox",[xe.ComboBox]:"comboBox",[xe.Sign]:""}[t];return"canvas"===this.pdfViewer.config.annotRenderingMode[e]},n.addTask=function(t,e){return this.doc.getPDFForm()?this.doc.getPDFForm().addTask(t,e):Promise.resolve(t())},n.initJS=function(){let t=this.doc.getJsNameTree(),e="";for(let n in t)"!ADBE::0200_VersChkCode_XFACheck"!==n&&(e+=t[n]+"\n");let n=this.doc.action;n&&n.getScript&&(e+=n.getScript());let i=this.pdfViewer.JSEngine;i.initEvent(13,null,null,"Init",{doc:this.doc}),i.resetClosure(e);let r=this.doc.getPDFForm();if(r&&!r.isEmpty())return r.addTask().then((t=>r.setState("jsInited")));r&&r.setState("jsInited")},n.goPreviousOrNextWidget=function(t){const e=this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName(),n=this.pdfViewer.getPDFPageRender(this.currentPageNumber).page;n&&n.getAnnotIdArrayByOrder().then((e=>{if(this.tabIndex+="previous"===t?-1:1,!(this.tabIndex<0||this.tabIndex>e.length-1)){const t=e[this.tabIndex];return n.getAnnotsByObjectNumArray([t])}this.goToPreviousOrNextPage(t)})).then((n=>{if(!n)return;const i=n[0];if(i&&"widget"===i.getType())if("hand"===e){const e=i.getField();if(!e)return;const n=1===De.isReadOnly(e.getFlags()),r=this.checkWidgetVisibleType(i);n||"hidden"===r||"hiddenButPrintable"===r?this.goPreviousOrNextWidget(t):(i.updateUI&&i.updateUI({type:"focus"}),this.pdfViewer.eventEmitter.emit("tab-active",i))}else"hand"!==e&&this.pdfViewer.eventEmitter.emit("tab-active",i);else this.goPreviousOrNextWidget(t)}))},n.goToPreviousOrNextPage=function(t){const e=this.doc.getPageCount();let n=this.currentPageNumber,i="previous"===t?n-1:n+1;i<0?i=e-1:i>=e&&(i=0),this.doc.getPageByIndex(i).then((t=>t.getAnnotIdArrayByOrder().then((e=>{let n=!1;for(let e of t.annots)if("widget"===e.getType()){n=!0;break}return[e,n]})))).then((([n,r])=>{if(this.currentPageNumber=i,r){if(this.tabIndex="previous"===t?n.length:-1,this.docRender.currentPageNumber===i)return void this.goPreviousOrNextWidget(t);this.docRender.goToPage(i,0,0,!1).then((()=>{1===e?this.goPreviousOrNextWidget(t):this.afterPageRender=()=>this.goPreviousOrNextWidget(t)}))}else this.goToPreviousOrNextPage(t)}))},n.setTabIndexByAnnotId=function(t){},n.initTabParams=function(t){if(this.tabIndex=-1,this.currentPageNumber=this.docRender.currentPageNumber,t){const e=t.objectNumber,n=t.getPage();this.currentPageNumber=n.getIndex(),n.getAnnotIdArrayByOrder().then(((t=[])=>{this.tabIndex=t.indexOf(e)}))}},n.checkWidgetVisibleType=function(t){const e=t.getFlags();let n=`${e&me.hidden}_${e&me.print}_${e&me.noView}`;switch(n){case"0_4_0":n="visible";break;case"2_4_0":n="hidden";break;case"0_0_0":n="visibleButUnprintable";break;case"0_4_32":n="hiddenButPrintable"}return n},n.showWigetInArea=function(t,e){let n=document.getElementsByClassName("fv__ui-pdfviewer")[0],i=t.annotsRender.getAnnotRender(e.getId()).component.$handler[0],r=i.getBoundingClientRect(),o=document.body.clientWidth,s=document.body.clientHeight;(o-r.x<r.width||r.x<r.width)&&(n.scrollLeft=i.offsetLeft),(s-r.y<r.height||r.y<r.height)&&(n.scrollTop=i.offsetTop)},n.getNextStepWidget=function(t,e){let n=this.pageIndex,i={};return i=e?this.getPreviousWidget(t,n):this.getNextWidget(t,n),i},n.getFilterAnnot=function(){let t={},e={},n=this.pdfViewer.currentPDFDoc.getPDFForm().fields,i=[];return n.map((t=>t.controls.map((t=>t.getWidgetAnnot())))).forEach((t=>{i=i.concat(t)})),Promise.all(i).then((n=>((n=n.sort(((t,e)=>t.getPage().getIndex()<e.getPage().getIndex()?-1:1))).forEach(((t,n)=>{null==e[t.getPage().getIndex()]&&(e[t.getPage().getIndex()]=[]),e[t.getPage().getIndex()].push(t)})),Object.keys(e).forEach((n=>{let i=this.filterWidgets(e[n]);i.length>0&&(t[n]=i)})),t)))},n.filterWidgets=function(t){let e=t.filter((t=>"widget"==t.getType()&&261!==t.getField().getFlags()));return e=e.filter((t=>{let e=t.getFlags()&me.hidden,n=t.getFlags()&me.print,i=t.getFlags()&me.noView;return!(De.isReadOnly(t.getField().getFlags())||2==e&&4==n&&0==i||0==e&&4==n&&32==i)})),e=e.sort(((t,e)=>t.info.index<e.info.index?-1:1)),e},n.getPreviousWidget=function(t,e){let n={},i=Object.keys(t),r=t[e].findIndex((t=>{t.getField().getControlById(this.widget.getObjNum());return this.widget.getObjNum()==t.getObjNum()}));if(0==r){let r=i[i.length-1];if(e>0){let t=i.findIndex((t=>t==e));t-=1,e=i[t]}else e=r;n=t[e][t[e].length-1]}else r>0&&r<=t[e].length-1&&--r,n=t[e][r];return n},n.getNextWidget=function(t,e){let n={},i=Object.keys(t),r=t[e].findIndex((t=>this.widget.getObjNum()==t.getObjNum()));if(r==t[e].length-1){let r=i[i.length-1];if(e<r){let t=i.findIndex((t=>t==e));t+=1,e=i[t]}else e=0;n=t[e][0]}else r>=0&&r<t[e].length-1&&++r,n=t[e][r];return n},n.destroy=function(){let t=this.viewerEvents;for(let e in t)this.pdfViewer.eventEmitter.off(e,t[e]),t[e]=null;this.viewerEvents=null,this.msgQueue&&(this.msgQueue.destroy(),delete this.msgQueue)},n.setRuntimeHighlight=function(t){let e=".fv__ui-form-foreground:not(.form-field-readonly)";t&&this.pdfViewer.highlightControlsUI()?this.$docContainer.find(e).show():this.$docContainer.find(e).hide(),this.runtimeHighlight=!1},n.setRuntimeHighlightColor=function(t,e,n,i){[e,i].forEach(((e,i)=>{let r=".fv__ui-form-foreground"+(0==i?":not(.required)":".required");this.$docContainer.find(r).css("background-color",(0,_.colorConvertor)(0==i?t:n,"HTML",e))}))},n.isReadOnly=function(){let t=this.docRender.getUserPermission().getValue();return!(32&t||256&t)},n.isSameTarget=function(t){return this.control==t},n.focusControl=function(t,e){if(this.control==t)return;if(t&&(n=t.$handler[0],i=n.getBoundingClientRect(),r=Math.max(document.documentElement.clientHeight,window.innerHeight),i.bottom<100||i.top>r)){let e=t.annot,n=e.getPage().getIndex(),i=e.getRect();this.pdfViewer.getPDFDocRender().goToPage(n,{x:i.left,y:i.bottom,width:i.right-i.left,height:i.top-i.bottom},!0)}var n,i,r;let o;return o=this.control&&this.control.annot?Promise.resolve(this.blurControl()):Promise.resolve(!1),o.then((n=>{n&&!e||(this.control=t,t&&t.focus(e))}))},n.blurControl=function(t=!1){if(this.isRunningAction||this.control&&this.control.isOnFocus)return;this.dt&&this.dt.close();const e=this.pdfViewer,n=e.getStateHandlerManager().getCurrentStates().getStateName();xo.indexOf(n)>-1?e.setHighlightControlsUI(!1):e.setHighlightControlsUI(e.highlightControls());let i=this.control;return this.control=null,i&&i.annot?(e.unActiveElement(i),i.blur(t,t)):void 0},n.setValue=function(t,e,n=!0){let i=t.getField(),r=i.getValue();i.setValueWithoutAction(e);let o={rc:!0},s=!0;e===r&&(s=!1);let a=!1,c=i.getAction(Er.FieldKeyStroke);if(s&&c){if(o=this.execAction("Field",c,null,i,Er.FieldKeyStroke,{change:e,willCommit:n}),!i.form||!i.doc)return Promise.resolve(!1);o&&-1!==o&&(o.rc?(o.changed||(o.change=e),i.setValueWithoutAction(o.change)):(a=!0,e=r))}if(a)return i.setValue(r).then((()=>Promise.resolve(o.rc)));if(c=i.getAction(Er.FieldValueChanged),s&&c){if(o=this.execAction("Field",c,null,i,Er.FieldValueChanged),!i.form||!i.doc)return Promise.resolve(!1);-1!==o&&(o.rc?(void 0===o.value&&(o.value=e),i.setValueWithoutAction(o.value)):a=!0)}return i.form&&i.doc?a?i.setValue(r).then((()=>Promise.resolve(o.rc))):s?i.syncValue(i.getValue(),this).then((()=>i.form?(i.form.calculate(i),Promise.resolve(o&&o.rc)):Promise.resolve(!1))):(c=i.getAction(Er.FieldWillFormat),i.getValue()&&c&&(o=this.execAction("Field",c,null,i,Er.FieldWillFormat)),i.form?o&&!o.rc?i.setValue(r).then((()=>Promise.resolve(o.rc))):Promise.resolve(o&&o.rc):Promise.resolve(!1)):Promise.resolve(!1)},n.calculate=function(t){this.doc.getPDFForm().calculate(t)},n.execAction=function(t,e,n=null,i=null,r="",o={}){if(!e)return!0;let s=this.pdfViewer.actionManager.get(e,this);switch(s.setSourceTarget(n,i),e.getType()){case"TypeJavaScript":return s.setTypeName(t,r),s.setParam(o),s.active();case"TypeURI":return this.isRunningAction=!0,s.active((t=>{if(this.isRunningAction=!1,this.control){let t=this.control.$textInput;t&&t.focus()}}));default:s.active()}return-1},n.getFormatedData=function(t){let e={},n=this.doc.getPDFForm();return n.enumFields([],0,((i,r,o)=>{let s=n.getField(r),a=s.getAction(Er.FieldWillFormat);if(6==i&&a){let n=o;if("display"==t)if(s.getDisplayValue())e[r]=s.getDisplayValue();else{let t=o.length>0&&a&&this.execAction("Field",a,null,s,Er.FieldWillFormat);!1!==t&&t&&t.rc&&(n=t.value),e[r]=n}else e[r]=n}})),e},n.reshowDTPicker=function(t){this.dt._input||(this.dt._input=this.dt._inputTemp),this.dt.open(null,t)},n.showDateTimePicker=function(t,e,n,i){let r=-1!==e.indexOf("H"),o=-1!==e.indexOf("s")||-1!==e.indexOf("S"),s=this.pdfViewer.getCurrentLanguage();s=this.switchToFlatpickrLocale(s);let a={onOpen:[()=>{this.dt&&(this.dt.isOpen=!0)}],onClose:[i,()=>{this.dt&&(this.dt.isOpen=!1)}],onMonthChange:[(t,n,r)=>{let o=new Date(t[0].getTime());o.setMonth(r.currentMonth),o.setFullYear(r.currentYear);let s=r.formatDate(o,e),a=new Date(s);"Invalid Date"===a.toString()&&(a=o),this.dt.setDate(a,!1,e),i("",s)}],onYearChange:[(t,n,r)=>{if(!e.match(/y|Y/))return;let o=new Date(t[0].getTime());o.setMonth(r.currentMonth),o.setFullYear(r.currentYear);let s=r.formatDate(o,e),a=new Date(s);"Invalid Date"===a.toString()&&(a=o),this.dt.setDate(a,!1,e),i("",s)}],clickOpens:!1,now:new Date,allowInput:!0,dateFormat:e,enableTime:!0,time_24hr:r,enableSeconds:o,locale:s};this.dt&&this.dt.destroy();let c=this.dt=y(this.dt||{},Eo()(n,a));this.dt._input||(this.dt._input=this.dt._inputTemp),D()(c.timeContainer).toggle(!!e.match(/h|H|i/));let l=!!e.match(/m|d|y|F|M|Y/);D()(c.monthNav).toggle(l),D()(c.innerContainer).toggle(l),r?c.amPMTemp||(c.amPMTemp=c.amPM,delete c.amPM):c.amPM||(c.amPM=c.amPMTemp,delete c.amPMTemp),D()(c.amPM||c.amPMTemp).toggle(!r),r?(D()(c.hourElement).attr("min",0),D()(c.hourElement).attr("max",23)):(D()(c.hourElement).attr("min",0),D()(c.hourElement).attr("max",12)),c.element=c.input=n;let h=t,u=e;if(t.length>0&&-1===e.indexOf("d")){let n=new Date,i=t.indexOf("/");h=t.slice(0,i)+"/"+n.getDate()+t.slice(i),i=e.indexOf("/"),u=e.slice(0,i)+"/d"+e.slice(i)}let d=h?new Date(h):new Date;"Invalid Date"===d.toString()&&(d=h),c.setDate(d,!1,u),D()(c).find(".flatpickr-time .flatpickr-time-separator").toggle(!!e.match(/d/));let f=D()(c.timeContainer).find(".flatpickr-second").parent();f.toggle(o),f.prev().toggle(o),setTimeout((()=>{c.close(),c.redraw(),c.open(null,n)}),10),delete n._flatpickr},n.switchToFlatpickrLocale=function(t){let e=flatpickr.l10ns.en;switch(t){case"zh-CN":e=flatpickr.l10ns.zh;break;case"zh-TW":e=flatpickr.l10ns.zh_tw;break;case"en-US":e=flatpickr.l10ns.en;break;case"ja-JP":e=flatpickr.l10ns.ja;break;case"ko-KR":e=flatpickr.l10ns.ko;break;case"de-DE":e=flatpickr.l10ns.de;break;case"fr-FR":e=flatpickr.l10ns.fr;break;case"it-IT":e=flatpickr.l10ns.it;break;case"es-ES":e=flatpickr.l10ns.es;break;case"nl-NL":e=flatpickr.l10ns.nl}return e},n._bindTabEvent=function(t){this.doc.getAnnots().then((e=>{e.some((t=>t.some((t=>"widget"!==t.getType))))&&this.goPreviousOrNextWidget(t)}))},n._stopInterceptor=function(t,e){const n=t.native.target;(!!n.closest(".fv__pdf-form-control-handler-container")||"BODY"===n.nodeName)&&e(t)},e}(K);var Io=Do;function Ro(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let To=function(){function t(t,e){this.pdfviewer=t,this.docRender=e,this.$ui=D()('<canvas class="fv_shapes_ui"></canvas>')}var e=t.prototype;return e.initPageShapes=function(t){if(this.targetPage&&this.targetPage.index==t)return!0;return(this.targetPage=this.docRender.pagesRender.pageRenders[t]).$ui.append(this.$ui.show()),this.drawShape(),!0},e.setOffset=function(t,e){let n=1e6,i=1e6,r=0,o=0,s=this.path={};const a=this.pdfviewer.getAllActiveElements(),c=(a[0].pageRender?a[0].pageRender:a[0].annotsRender.pageRender).$ui[0].getBoundingClientRect();a.forEach((t=>{let e;t.getRect?(e=t.getRect(),e.width=e.right-e.left,e.height=e.bottom-e.top,e.left=c.left+e.left,e.right=c.left+e.right,e.bottom=c.top+e.bottom,e.top=c.top+e.top):e=t.$label[0].getBoundingClientRect(),e.left<n&&(n=e.left),e.top<i&&(i=e.top),e.right>r&&(r=e.right),e.bottom>o&&(o=e.bottom),s[t.annot.getId()]={left:e.left,top:e.top,width:e.width,height:e.height}}));for(let t in this.path){let e=this.path[t];e.left-=n,e.top-=i}this.deltaX=t-n,this.deltaY=e-i;let l={width:r-n+2,height:o-i+2};this.$ui.css(l).attr(l)},e.drawShape=function(){let t=this.$ui[0],e=t.getContext("2d");e.clearRect(0,0,t.offsetWidth,t.offsetHeight),e.save(),e.beginPath(),e.strokeStyle="#5aa",e.lineWidth=2;for(let t in this.path){let n=this.path[t];e.rect(n.left+1,n.top+1,n.width,n.height)}e.stroke(),e.restore()},e.update=function(t,e){if(!this.targetPage)return;let n=this.targetPage.$ui[0].getBoundingClientRect(),i=Math.max(n.left,t-this.deltaX),r=Math.max(n.top,e-this.deltaY),o=this.$ui[0];i+o.offsetWidth>n.right&&(i=n.right-o.offsetWidth),r+o.offsetHeight>n.bottom&&(r=n.bottom-o.offsetHeight),this.$ui.css({left:i-n.left,top:r-n.top})},e.hide=function(){return this.targetPage=null,this.$ui&&this.$ui.hide(),!1},e.destroy=function(){this.pdfviewer=null,this.docRender=null,this.$ui&&(this.$ui.remove(),this.$ui=null)},e.moveAnnot=function(t){let e=t[0].annot.getPDFPage(),n=this.targetPage;if(!n)return Promise.resolve(this.hide());let i=n.page,r=e.getIndex(),o=n.index;if(o==r)return Promise.resolve(this.hide());let s=e.doc;let a=t.reduce(((t,e)=>e.getRelevanceRenders?[].concat(Ro(w.Z,t),Ro(w.Z,e.getRelevanceRenders(!0))):[].concat(Ro(w.Z,t),[e.annot.getId()])),[]).reduce(((t,i)=>{let o=e.annotIdMap[i],s={},a={},c=this.path[i];if(c){let t=this.pdfviewer.getAnnotRender(r,i);t=t.component,s="FreeTextCallout"==o.getIntent()?t.backupProperty.rect:o.getRect();let e=c.left,l=c.top,h=this.$ui[0].getBoundingClientRect(),u=t.getRect();h={width:u.right-u.left,height:u.bottom-u.top,left:h.left+e,top:h.top+l},a=n.getPDFRectFromClientRect(h)}return t[i]={rect:a,oldRect:s},t}),{});return this.pdfviewer.killFocus().then((t=>{const n=Object.keys(a).map((t=>Number(t)));return e.getAnnotsByObjectNumArray(n).then((t=>{const n=t.reduce(((t,e)=>(t[e.getUniqueID()]=a[e.getObjectNumber()],t)),{});return s.moveAnnotsToPage(e,i,a).then((t=>(this.pdfviewer.collaborate(Dr.MOVE_ANNOTS_BETWEEN_PAGES,{fromPageIndex:r,toPageIndex:o,annots:n}),t)))}))})).then((t=>(this.hide(),t)))},t}();var Fo=To;const _o=["movingstart","movingend","movingcancel"],ko=["mousemove"];let Mo=function(){function t(t,e){this.pdfviewer=t,this.docRender=e,this.state=0,this.initHammer(t,e)}var e=t.prototype;return e.initHammer=function(t,e){if("JR"!==t.config.engineMode)return;let n=e.$doc;this.movingstart=({deltaX:i,deltaY:r,srcEvent:o})=>{if(0==this.state){let i=this.shapeManager=new Fo(t,e);this.mousemove=t=>{if(this.state<2)return;let e=(t=>{let e=D()(t).parents(".fv__pdf-page-layout");return e.length?e.attr("data-index"):-1})(t.target);if(-1==e)return;this.state=2;let n=this.getEnableMoveElement();n&&n.length&&(this.toggleShapeControl(n,e)||(i.initPageShapes(e)?(i.update(t.clientX,t.clientY),this.state=3):(this.state=1,this.getEnableMoveElement().forEach((t=>{let e=t.shapeControl;e&&(e.show(),e.enable())})))))},ko.forEach((t=>n.on(t,this[t])))}this.shapeManager&&(this.shapeManager.setOffset(o.clientX,o.clientY),this.state=2)},this.movingend=t=>{this.shapeManager&&(3==this.state&&this.shapeManager&&this.shapeManager.moveAnnot(this.getEnableMoveElement()).then((t=>{this.getEnableMoveElement().forEach((t=>{let e=t.shapeControl;e&&(t instanceof Br?(t._applyShapeChange(),e.show(),e.enable()):t.shapeControlOnEnd())})),this.pdfviewer.initializers[2].selectAllAnnotOrWidget(this.pdfviewer,t.filter((t=>"popup"!==t.getType())))})),this.state=1)},this.movingcancel=t=>{this.shapeManager&&(this.shapeManager.hide(),this.state=1)},_o.forEach((e=>t.eventEmitter.on(e,this[e])))},e.toggleShapeControl=function(t,e){let n=t[0].annot.getPDFPage().getIndex(),i=!1;const r=this.pdfviewer.customs.isCollaborationMode&&this.pdfviewer.customs.isCollaborationMode();return t.forEach((t=>{if(r){if(this.pdfviewer.customs.getAnnotPermissionsSync(t.annot).indexOf("fully")<0)return}let o=t.shapeControl;-1==e||e==n?(o&&(o.show(),o.enable()),t instanceof Br||t.$label.show(),this.shapeManager.hide(),i=!0):(o&&o.hide(),t instanceof Br||t.$label.hide())})),i},e.getActiveElement=function(){return this.pdfviewer.getAllActiveElements()},e.getEnableMoveElement=function(){let t=this.getActiveElement();const e=-1===t.findIndex((t=>t.shapeControl&&t.shapeControl.isDisabled));return e?t:[]},e.destroy=function(){let t=this.pdfviewer;_o.forEach((e=>{t.eventEmitter.off(e,this[e]),this[e]=null}));let e=this.docRender.$doc;ko.forEach((t=>{e.off(t,this[t]),this[t]=null})),this.pdfviewer=null,this.docRender=null,this.shapeManager&&this.shapeManager.destroy()},t}();var Oo=Mo;const Lo=[{background:"#ffffff",foreground:"#000000",componentName:"white"},{background:"#faf9de",foreground:"#1f1f00",componentName:"yellowish"},{background:"#fff2e2",foreground:"#381f00",componentName:"lightOrange"},{background:"#dce2f1",foreground:"#232a3c",componentName:"lightBlue"},{background:"#3b3537",foreground:"#b0afac",componentName:"lightBlack"},{background:"#333333",foreground:"#838383",type:"moon",componentName:"moon"}],No=()=>{let t={background:null,foreground:null};const e=localStorage.getItem("change-color-user-choice");return e&&Lo[Number(e)]&&(t=(t=>{delete(t=JSON.parse(JSON.stringify(t))).type;for(let e in t)t.hasOwnProperty(e)&&(t[e]=Number(t[e].replace("#","0xff")));return t})(Lo[Number(e)])),t};let Bo=function(t=0,e=t,n=t,i=e){this.top=t,this.left=e,this.bottom=n,this.right=i},Vo=function(){function t(t){this.offsetLeft=0,this.offsetTop=0,this.offsetRight=0,this.offsetBottom=0,this.target=t}t.isOverlap=function(t,e,n=!1){let i=Math.max(t.left,e.left),r=Math[n?"min":"max"](t.top,e.top),o=Math[n?"max":"min"](t.bottom,e.bottom),s=Math.min(t.right,e.right);if(i<=s)if(n){if(r>=o)return(s-i)*(r-o)}else if(r<=o)return(s-i)*(o-r);return 0},t.isInRect=function(t,e,n,i=!1){if(t>=n.left&&t<=n.right)if(i){if(e>=n.bottom&&e<=n.top)return!0}else if(e<=n.bottom&&e>=n.top)return!0;return!1},t.rectInRect=function(t,e,n=!1){return!!(t.left>=e.left&&t.right<=e.right)&&(n?t.top<=e.top&&t.bottom>=e.bottom:t.top>=e.top&&t.bottom<=e.bottom)},t.on=function(e){return new t(e)},t.subtract=function(t,e){return new Bo(t.top-e.top,t.left-e.left,t.bottom-e.bottom,t.right-e.right)},t.expandOffset=function(t,e){return new Bo(t.top-e.top,t.left-e.left,e.bottom-t.bottom,e.right-t.right)},t.copyTo=function(t,e){e.left=t.left,e.top=t.top,e.right=t.right,e.bottom=t.bottom};var e=t.prototype;return e.moveLeft=function(t){return this.offsetLeft+=t,this.offsetRight+=t,this},e.moveTop=function(t){return this.offsetTop+=t,this.offsetBottom+=t,this},e.move=function(t,e){return this.moveLeft(t).moveTop(e)},e.moveTo=function(t,e){return this.offsetLeft=this.offsetRight=this.target.left-t,this.offsetTop=this.offsetBottom=this.target.top-e,this},e.shrink=function(t=0,e=t,n=t,i=e){return this.add(new Bo(t,e,-n,-i))},e.expand=function(t=0,e=t,n=t,i=e){return this.add(new Bo(-t,-e,n,i))},e.zoom=function(t=1,e="center",n="center"){const i=this.target.right+this.offsetRight-(this.target.left+this.offsetLeft),r=this.target.bottom+this.offsetBottom-(this.target.top+this.offsetTop),o=i*t-i,s=r*t-r;let a=0,c=0,l=0,h=0;switch(e){case"right":a=-o;break;case"center":a=-o/2,c=o/2;break;default:c=o}switch(n){case"bottom":l=-s;break;case"center":l=-s/2,h=s/2;break;default:h=s}return this.add(new Bo(l,a,h,c))},e.add=function({top:t=0,left:e=t,bottom:n=t,right:i=e}={}){return this.offsetLeft+=e,this.offsetRight+=i,this.offsetBottom+=n,this.offsetTop+=t,this},e.extract=function(){const t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight;return{left:t,top:this.target.top+this.offsetTop,right:e,bottom:this.target.bottom+this.offsetBottom}},e.boundary=function(){const t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight,n=this.target.top+this.offsetTop;return{left:t,top:n,width:e-t,height:this.target.bottom+this.offsetBottom-n}},e.intersect=function(e){e instanceof t||(e=t.on(e));const n=this.toPlainObject(),i=e.toPlainObject(),r={left:Math.max(n.left,i.left),right:Math.min(n.right,i.right),top:Math.max(n.top,i.top),bottom:Math.min(n.bottom,i.bottom)};return t.on(r)},e.toPlainObject=function(){return{left:this.target.left+this.offsetLeft,right:this.target.right+this.offsetRight,top:this.target.top+this.offsetTop,bottom:this.target.bottom+this.offsetBottom}},t}();var Uo=m(1276);function Ho(t,e,n){if(_.isMobile&&_.isSafari){if(new RegExp(/\sversion\/(.*?)\s/i).test(navigator.userAgent.toLowerCase())&&Number(RegExp.$1)<13)return window.pdfui.pdfViewer.viewerUI.alert("alert.browserNotSupportDownload")}void 0===n&&(n="application/octet-stream");const i=t instanceof Blob?t:new Blob(t,{type:n});(0,Uo.saveAs)(i,e)}function jo(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const $o=Ko("hand"),Wo=(Ko("annot"),"fv__hidden"),Yo=_.LoggerFactory.getLogger("PDFDocRender");let Go=function(t){function e(e,n,i){var r;(r=t.call(this,i)||this).name="pdfDocRender",r.$ui=e,r.rotation=0,r.doc=n,r.lastPageNumber=0,r.currentPageNumber=0,r.currentAnnot=null,r.viewerRender=i;let o=i.scrollWrap.getScrollHost();(o instanceof Window||o===document.body||o==document.documentElement)&&(o=document),r.intersectionObserver=new _.BuiltinIntersectionObserver(o),r.visiblePageIndexesStore=new _.ValueStore,r.visiblePageIndexesStore.reduce((t=>t.slice(0))),r.visiblePageIndexesStore.dispatch([0]);let s=r.pdfViewer=i.pdfViewer,a=D()('<div class="fv__pdf-doc-layout"> <div class="fv__pdf-doc-rendering"></div> <div class="fv__pdf-doc-custom-container"></div> <div class="fv__pdf-doc-container"></div> <div class="fv__pdf-doc-handler-container"></div> </div>');a[0].id=n.id,e.append(a),r.$doc=a,r.$rendering=a.find(".fv__pdf-doc-rendering"),r.$container=a.find(".fv__pdf-doc-container"),r.pdfDocRendering=new(s.customs.PDFDocRendering||Ao)(r.$rendering[0],(0,C.Z)(r)),r.docCustomRender=new(s.customs.DocCustomRender||Po)(a.find(".fv__pdf-doc-custom-container")[0],(0,C.Z)(r)),r.zoomToTaskExecutor=new _.DebounceAsyncTaskExecutor,r.bindEvent(),r.controlStateClass=$o,r.$container.addClass($o),r.handlerInit(a.find(".fv__pdf-doc-handler-container")),r.initTransparencyGridChecked(),r.watermarkConfig=s.config.watermarkConfig;let c=r.customPermission_=s.customs.getDocPermissions||function(){return-1};n.setCustomPermission("standard",c),c=s.customs.getAdditionalPerm||function(){return-1},n.setCustomPermission("additional",c),n.setCustomPermission("replaceStandard",s.customs.getStandardPermissions);let l=s.eventEmitter;return l.on(nt.annotationAppearanceUpdated,r.annotationAppearanceUpdatedBind=(t,e)=>{if(e.getPDFDoc()===r.doc)try{const n=t[0];if(7===(n&&n.info.fieldType)){const t=e.getIndex(),i=r.getPDFPageRender(t),o=i.scale,s=i.rotate,a=i.containerVisibleRect,c=n.objectNumber;r.getAnnotRender(t,c).render(o,s,a)}else r.getPDFPageRender(e.getIndex()).redrawAnnotRenders(t)}catch(t){}}),l.on(nt.annotationMovedPosition,r.annotationMovedPositionBind=(t,e,n)=>{if(e.getPDFDoc()===r.doc)try{r.getPDFPageRender(e.getIndex()).movedAnnotRenders(t,n)}catch(t){}}),l.on(nt.annotationRemoved,r.annotationRemovedBind=(t,e)=>{if(e.getPDFDoc()===r.doc)try{r.getPDFPageRender(e.getIndex()).removeAnnotRenders(t)}catch(t){}}),l.on(nt.annotationImported,r.updateImportedAnnotsBind=(t,e)=>{if(t===n&&r.pagesRender)try{r.pagesRender.setRenderFlags(1);const t=e.filter((t=>t.newAnnots.length>0)).map((t=>t.page.getIndex())).reduce(((t,e)=>(-1===t.indexOf(e)&&t.push(e),t)),r.pagesRender.viewMode.getVisibleIndexes());r.setRebuildAnnotsFlag(!1),r.pagesRender.renderPages(t).catch((t=>{0}))}catch(t){Yo.warn(t)}}),l.on(nt.pageRotationChange,r.rotationPageBind=(t,e,n)=>{if(t.getPDFDoc()===r.doc)try{let e=r.pagesRender.pageRenders[t.getIndex()];e.$annotsContainer.addClass("fv__viewer-annot-container-hide"),e.clearCanvasCache(!0),e.renderLayout().then((t=>{r.pagesRender.setRenderFlags(7),r.pagesRender.renderVisiblePages()}))}catch(t){console.error(t)}}),l.on(nt.pagesRotated,r.rotationPagesBind=(t,e,n)=>{t.forEach(((t,i)=>{r.rotationPageBind(t,e,n[i])}))}),l.on(nt.customDataAdd,r.customDataAddBind=(t,e,n)=>{if(r.doc.getId()===n)try{r.getPDFPageRender(e).addCustomRenders(t)}catch(t){}}),l.on(nt.customDataImported,r.customDataImportedBind=t=>{if(r.doc.getId()===t)try{r.pagesRender.setRenderFlags(32),r.pagesRender.renderVisiblePages().catch((t=>{0}))}catch(t){}}),l.on(nt.customDataRemoved,r.customDataRemovedBind=(t,e,n)=>{if(r.doc.getId()===n)try{r.getPDFPageRender(e).removeCustomRenders(t)}catch(t){}}),l.on(nt.customDataUpdated,r.customDataUpdatedBind=(t,e,n)=>{if(r.doc.getId()===n)try{r.getPDFPageRender(e).updateCustomRenders(t)}catch(t){}}),l.on(nt.pagesBoxChange,r.pagesBoxChangeEventListener=t=>{r.pagesRender&&r.pagesRender.setRenderFlags(8),r.pdfViewer.redraw(!0)}),l.on(nt.pageRemoved,r.pageRemovedListener=t=>{const e=r.visiblePageIndexesStore.getCurrentValue([]),n=e.indexOf(t);n>-1&&e.splice(n,1);const i=r.doc.getPageCount();for(let n=0;n<e.length;n++)e[n]>t&&e[n]<=i&&(e[n]-=1);r.visiblePageIndexesStore.dispatch(e)}),l.on(nt.pagesRemoved,r.pagesRemovedListener=t=>{const e=t.reduce(((t,e)=>1===e.length?t.concat(e[0]):e.length>1?t.concat(function(t,e,n){n||(n=t>e?-1:1);const i=[];for(let r=t;r<e;r+=n)i.push(r);return i.push(e),i}(e[0],e[1]-1)):t),[]),n=r.visiblePageIndexesStore.getCurrentValue([]);e.forEach((function(t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}));const i=r.doc.getPageCount();e.forEach((function(t){for(let e=0;e<n.length;e++)n[e]>t&&n[e]<=i&&(n[e]-=1)})),r.visiblePageIndexesStore.dispatch(n)}),r.noInteraction=r.getUserPermission().checkCannotModifyExcludeAssemble()&&!r.doc.hasSignature(),l.on(nt.permissionChanged,r.permissionChangedBind=()=>{let t=r.getUserPermission().checkCannotModifyExcludeAssemble();r.noInteraction=t&&!r.doc.hasSignature();r.getUserPermission();r.loadFormRender().then((t=>{r.pdfViewer.redraw(!0)}))}),l.on(nt.switchStateHandler,r.switchStateHandlerBind=(t,e)=>{t.getStateName()!==Re&&r.resetReadModeData&&r.quitReadMode(!1)}),r.docHandler=new Oo(s,(0,C.Z)(r)),r.allCommentVisible=!0,r.rebuildAnnotsFlag=!0,l.on("annot-filter",r.filterAnnot=t=>{"start"==t&&(r.forceLoadAnnot=1)}),r}(0,E.Z)(e,t);var n=e.prototype;return n.setRebuildAnnotsFlag=function(t){this.rebuildAnnotsFlag=t},n.getRebuildAnnotsFlag=function(){return this.rebuildAnnotsFlag},n._updateVisiblePageIndex=function(t,e){const n=this.visiblePageIndexesStore.getCurrentValue(),i=n.indexOf(t);if(e){if(i>-1)return;n.push(t)}else i>-1&&n.splice(i,1);this.visiblePageIndexesStore.dispatch(n)},n.getVisiblePageIndexes=function(){return this.visiblePageIndexesStore.getCurrentValue().sort(((t,e)=>t-e))},n.initTransparencyGridChecked=function(){let t=localStorage.getItem("PAGE_DISPLAY_DATA");if(t){const e=JSON.parse(t);this.doc.pageDisplayPreferences=e,this.doc.setPageDisplayPreferences(e)}},n.getHandlerDOM=function(){return this.$doc.get(0)},n.getBoundingClientRects=function(){let t=this.$container.find(".fv__pdf-view-mode-item"),e=this.viewerRender.scrollWrap.getScrollHost();e==window&&(e=document.body);let n=e.getBoundingClientRect(),i=[];for(let e=0;e<t.length;e++){let r=t[e],o=D()(r).find(".fv__pdf-page-layout")[0].getBoundingClientRect();if(o.bottom>n.top&&o.top<n.bottom&&o.left<n.right&&o.right>n.left){let t={index:e,scale:this.getPDFPageRender(e).scale,left:Math.max(n.left,o.left)-o.left,right:Math.min(n.right,o.right)-o.left,top:Math.max(n.top,o.top)-o.top,bottom:Math.min(n.bottom,o.bottom)-o.top};t.x=t.left,t.y=t.top,t.height=t.bottom-t.top,t.width=t.right-t.left,i.push(t)}}return i},n.handlerInit=function(t){t.on("click",(()=>{this.unActiveAnnotRender()}))},n.getFormRender=function(){return this.formRender},n.setStateHandler=function(t){if(this.stateHandler){if(this.stateHandler.constructor.getStateName()===t.getStateName())return;this.stateHandler.destroyDocHandler()}(this.stateHandler=new t(this.pdfViewer)).docHandler(this)},n.setViewMode=function(t){return this.pagesRender?this.pagesRender.setViewMode(t):Promise.resolve()},n.getViewMode=function(){return this.pagesRender?this.pagesRender.getViewMode():void 0},n.prevPage=function(){let t=this.getCurrentViewMode().getPrevPageIndex();return this.goToPage(t,{x:0,y:0})},n.nextPage=function(){let t=this.getCurrentViewMode().getNextPageIndex();return this.goToPage(t,{x:0,y:0})},n.goToPage=function(t,{x:e=0,y:n=0}={},i=!1){let r,o,s=arguments[1];s&&(r=s.width,o=s.height),this.isGoto=!0,t>=this.doc.getPageCount()?t=this.doc.getPageCount()-1:t<0&&(t=0);let a=this.pagesRender,c=a.getPDFPageRender(t);if(c)return c.getPDFPage().then((s=>a.getPageScale(t,this.scale).then((t=>{if(i){if(void 0!==r){let i=s.getDeviceRect({left:e,right:e+r,top:n+o,bottom:n},t,this.rotation);e=i.left,n=i.top,i.right<e&&(e=i.right),i.bottom<n&&(n=i.bottom)}else{let[i,r]=s.getDevicePoint([e,n],t,this.rotation),o=s.info.height;(n>o||r<0)&&(r=0),e=i,n=r}return[t,e,n]}return[t,e,n]})))).then((([e,n,i])=>{let r=a.goToPage(t,e,n,i);if("fitVisible"!==this.scale||!r)return r})).catch((function(t){0})).finally((()=>{this.moveDebounce()}));this.isGoto=!1},n.setCurrentPageIndex=function(t){void 0!==t&&this.pageNumberChange(t)},n.getCurrentPageIndex=function(){const t=this.getCurrentViewMode();return t&&"function"==typeof t.getCurrentPageIndex?t.getCurrentPageIndex():0},n.pageNumberChange=function(t){if(t>=0&&this.currentPageNumber!==t){const e=0!=this.pdfViewer.enablePageAction;if(this.lastVIs&&e){let e=this.getPDFPageRender(this.currentPageNumber);e&&e.triggerAction(18),this.getPDFPageRender(t).triggerAction(17)}this.lastPageNumber=this.currentPageNumber,this.currentPageNumber=t}this.pdfViewer.eventEmitter.emit(nt.pageNumberChange,t+1)},n.bindEvent=function(){},n.destroy=function(e){if(this.isDestroyed)return;let n=this.pdfViewer.eventEmitter;this.pagesRender&&this.pagesRender.destroy(),this.visiblePageIndexesStore.destroy(),t.prototype.destroy.call(this),this.$doc.addClass("fv__destroying"),this.stateHandler&&this.stateHandler.destroyDocHandler(),this.docCustomRender.destroy(),this.$doc.remove(),this.zoomToTaskExecutor.destroy(),this.zoomToTaskExecutor=null,n.off(nt.annotationAppearanceUpdated,this.annotationAppearanceUpdatedBind),n.off(nt.annotationMovedPosition,this.annotationMovedPositionBind),n.off(nt.annotationRemoved,this.annotationRemovedBind),n.off(nt.annotationImported,this.updateImportedAnnotsBind),n.off(nt.pageRotationChange,this.rotationPageBind),n.off(nt.pagesRotated,this.rotationPagesBind),n.off(nt.customDataAdd,this.customDataAddBind),n.off(nt.customDataImported,this.customDataImportedBind),n.off(nt.customDataRemoved,this.customDataRemovedBind),n.off(nt.customDataUpdated,this.customDataUpdatedBind),n.off(nt.permissionChanged,this.permissionChangedBind),n.off(nt.pagesBoxChange,this.pagesBoxChangeEventListener),n.off(nt.pageRemoved,this.pageRemovedListener),n.off(nt.pagesRemoved,this.pagesRemovedListener),n.off("annot-filter",this.filterAnnot),n.off(nt.switchStateHandler,this.switchStateHandlerBind),this.formRender&&this.formRender.destroy(),this.formRender=null;let i=null;if(e&&e.destroyCurrentDoc){let t=this.doc.id;this.pdfViewer.getWebPDFJR().then((e=>{e.pdfDocCacheMap.delete(t)})),i=this.doc.destroy()}return this.pdfDocRendering.destroy(),this.pdfDocRendering=null,this.pagesRender=this.docCustomRender=this.stateHandler=null,this.annotationAppearanceUpdatedBind=null,this.annotationMovedPositionBind=null,this.annotationRemovedBind=null,this.updateImportedAnnotsBind=null,this.updateAddAnnotsBind=null,this.rotationPageBind=null,this.rotationPagesBind=null,this.customDataAddBind=null,this.customDataImportedBind=null,this.customDataRemovedBind=null,this.customDataUpdatedBind=null,this.permissionChangedBind=null,this.pagesBoxChangeEventListener=null,this.pageRemovedListener=null,this.pagesRemovedListener=null,this.switchStateHandlerBind=null,this.docHandler.destroy(),i},n.rendering=function(){this.$doc.addClass("fv__doc-rendering"),this.pdfDocRendering.rendering()},n.rendered=function(){this.$doc.removeClass("fv__doc-rendering"),this.pdfDocRendering.rendered()},n.render=function(t="fitWidth",e=this.rotation){return this.scale=t,this.rotation=e,this.rendering(),this.doc&&this.doc.setColors(No()),Promise.resolve(this.docCustomRender.render(t,e)).then((t=>{if(!1===t)return void this.rendered();return this.doc.getPageSizes(0,this.pdfViewer.config.sizeCount).then((t=>this.doc.getRootLayerNodeChildrenCount())).then((t=>{if(!(t>8e3))return this.doc.getLayerNodesJson()})).then((t=>this.doc.getTemplates())).then((t=>{if(!this.doc||this.doc.isDestroyed)return;let n=this.pagesRender=this.pagesRender||new bo(this.$container,this.doc,this),i=this.loadFormRender(),r=Promise.resolve();if(this.pdfViewer.enableOpenAction){let t=localStorage.getItem("PAGE_DISPLAY_DATA");const e=this.doc.getViewerPreference().then((e=>{let n=e.uiLayout;if(t){const e=JSON.parse(t);e.navigation&&"useInitialView"!==e.navigation&&(n=this.transfUiLayoutKey(e.navigation))}this.executeNavigationAction(n),"FullScreen"===n&&(n=e.viewerPreference.NonFullScreenPageMode,this.executeNavigationAction(n))})),i=this.doc.getViewerPreference().then((e=>{const i=t?JSON.parse(t):void 0;this.executeLayeroutAction(e.pageLayout,i);const{pageIndex:r,scale:o}=this.executeScaleAction(this.doc.action,i);if(r>0){n.createPagesStructure();const t=n.viewMode;t.into(n.$ui.get(0),n.pageDOMs),t.jumpToPage(r,{x:0,y:0})}if(null!=o&&(this.scale=o),i){const t=i.customMarginChecked;let e=i.margin;const n=i.customFacingChecked,r=i.facingPages;t||(e=10),this.pdfViewer.setCustomMargin(e);["facing-page-view-mode","multipage-view-mode","facing-continuous-page-view-mode"].forEach((t=>{const e="multipage-"+this.pdfViewer.viewModeManager.ViewModes[t].getName();n?this.pdfViewer.store.dispatch(e,r):this.pdfViewer.store.dispatch(e,2)}))}return Promise.resolve()}));r=e.then((()=>i))}return r.then((t=>n.render(this.scale,e))).then((t=>i)).then((()=>{if(!this.stateHandler){let t=this.pdfViewer;(this.stateHandler=new(t.stateHandlerManager.getCurrentStates())(t)).docHandler(this)}Object.keys(this.doc.metadata).length<2&&this.doc.getMetadata(),"fitWidth"!=this.scale&&this.pdfViewer.eventEmitter.emit(nt.updateZoomMode,this.scale)}))}))}))},n.loadFormRender=function(t=!1){return(t?this.doc.reloadPDFForm():this.doc.loadPDFForm()).then((t=>(this.formRender=new Io(this.doc,this)).initJS()))},n.hidden=function(){this.$doc.addClass(Wo)},n.show=function(){this.$doc.removeClass(Wo)},n.zoomTo=function(t=this.scale,e,n){const i=this.scale;this.scale=t;let r=Promise.resolve(e);return e?"fitVisible"==t&&(r=this.getPDFPageRender(e.pageIndex).getPDFPage().then((t=>t.calcPageContentBBox(0))).then((t=>(e.x=t.left,e)))):r="fitVisible"!==t?this.getViewBoxCenter(!0,"topLeft").then((([t,e])=>{if(t)return{pageIndex:t.getIndex(),x:e[0],y:e[1]}})):this.getViewerStartPosition(),r.then((t=>{if(t)return Promise.all([this.pagesRender.getPageScale(0,i,this.rotation),this.getScaleRatio(1)]).then((([e,r])=>{const o=(t,n,o)=>(n.eventEmitter.emit(nt.beforeZoomTo,t,e),this.pagesRender.zoomTo(this.scale,o).then((()=>(n.eventEmitter.emit(nt.zoomToSuccess,this.scale,i,r,e),t)),(e=>(this.scale=i,n.eventEmitter.emit(nt.zoomToFailed,t,this.scale),Promise.reject(e)))));if(n)return this.zoomToTaskExecutor.exec(o,[r,this.pdfViewer,t],this);o(r,this.pdfViewer,t)}))}))},n.getScaleRatio=function(t){const e=()=>{switch(typeof this.scale){case"number":return this.scale;case"string":return this.pagesRender?this.pagesRender.getScaleRatio(this.scale,this.rotate):1;default:return 1}};return t?Promise.resolve(e()):this.zoomToTaskExecutor.waitForLastTask().then(e,e)},n.getScale=function(){return this.scale},n.getRotation=function(){return this.rotation},n.rotateTo=function(t,e){const n=this.rotation;return this.rotation=(t%360+360)%360,this.applyRotation(n,this.rotation,e)},n.applyRotation=async function(t,e,n={}){if(0===((e-t)%360+360)%360)return;const i=this.pdfViewer.eventEmitter;i.emit(nt.beforeDocumentRotation,e,t);const r=(0,_.isValidNumber)(n.pageIndex)?n.pageIndex:this.getCurrentPageIndex(),o=(0,_.isValidNumber)(n.baseX)?n.baseX:0,s=(0,_.isValidNumber)(n.baseY)?n.baseY:0,a=this.getPDFPageRender(r),c=(await a.transformPoint({point:{x:o,y:s},srcType:to.page,destType:to.viewport}),await a.transformPoint({point:{x:o,y:s},srcType:to.page,destType:to.pdf}));await this.pagesRender.rotateTo(e);const l=await a.transformPoint({point:c,srcType:to.pdf,destType:to.page}),h=this.getValidContainerVisibleRect(),u=l.x-(h.left/2+h.right/2),d=l.y-(h.top/2+h.bottom/2);await this.goToPage(r,{x:Math.max(0,u),y:Math.max(0,d)}),i.emit(nt.afterDocumentRotation,e,t)},n.getPDFDoc=function(){return this.doc},n.getPDFPageRender=function(t){try{return this.pagesRender.getPDFPageRender(t)}catch(t){return null}},n.getCurrentViewMode=function(){try{return this.pagesRender.viewMode}catch(t){return null}},n.getAnnotRender=function(t,e){try{return this.getPDFPageRender(t).getAnnotRender(e)}catch(t){return null}},n.getAllAnnotRender=function(){const t=this.doc.getPageCount();let e=[];for(let n=0;n<t;n++)e=e.concat(this.getPDFPageRender(n).getAllAnnotRender());return e},n.unActiveAnnotRender=function(t){if(t)return t.unActive();try{this.pagesRender.unActiveAnnotRender()}catch(t){}},n.setCurrentAnnotHandler=function(){const t=this.pdfViewer.stateHandlerManager.currentStateHandler.getStateName(),e=this.pdfViewer.getAllActiveElements().reverse();try{e.sort(((t,e)=>t.annot.getId()>e.annot.getId()?1:-1))}catch(t){}"edit-all"!==t&&e.length?(e.forEach((t=>{t.shapeControl&&D()(t.shapeControl.ui).removeClass("current-annot")})),this.pdfViewer.isMultiSelectActive()?this.currentAnnot=e[e.length-1]:this.currentAnnot=e[0],this.currentAnnot.shapeControl&&D()(this.currentAnnot.shapeControl.ui).addClass("current-annot")):this.currentAnnot=null},n.setWatermarkConfig=function(t){this.watermarkConfig=t},n.getWatermarkConfig=function(){return this.watermarkConfig},n.getUserPermission=function(){let t=this.doc,e=this.customPermission_(t),n=t.getPermissionsSync();return new So(e&n)},n.getOffsetInfo=function(){let t,e=0,n=0,i=0,r=this.pagesRender;if(!r)return t=r.getPDFPageRender(e),t.reverseDevicePoint([n,i]).then((function([n,i]){return{index:e,left:n,top:i,scale:t.getScale(),rotate:t.getRotation()}}));let o=this.pdfViewer.$ui,s=o.parent()[0].getBoundingClientRect(),a=r.viewMode.getVisibleIndexes();for(let t=0,r=a.length;t<r;t++){e=a[t];const r=this.getCurrentViewMode().constructor.getName();let c=e;"single-page-view-mode"===r&&(c=0);let l=o.find(".fv__pdf-page-layout").eq(c)[0].getBoundingClientRect();if(!(l.bottom<=s.top)){n=s.left-l.left,n<0&&(n=0),i=s.top-l.top,i<0&&(i=0);break}}return t=r.getPDFPageRender(e),t.reverseDevicePoint([n,i]).then((function([n,i]){return{index:e,left:n,top:i,scale:t.getScale(),rotation:t.getRotation()}}))},n.getViewerStartPosition=function(t){return void 0===t&&(t=this.getCurrentPageIndex()),this.doc.getPageByIndex(t).then((e=>e.calcPageContentBBox(jt.CalcContentsBox).then((n=>{n&&void 0!==n.left&&n.left!==n.right&&n.top!==n.bottom||(n={left:0,right:e.info.mediaWidth,top:e.info.mediaHeight,bottom:0});let i=e.getRotation(),r=[n.left,n.top];switch(i){case 0:r=[n.left,n.top];break;case 1:r=[n.left,n.bottom];break;case 2:r=[n.right,n.bottom];break;case 3:r=[n.right,n.top]}return{pageIndex:t,x:r[0],y:r[1],rotation:i}}))))},n.getViewBoxCenter=function(t=!0,e="center"){const n=this.getCurrentPageIndex();let i,r=this.viewerRender.scrollWrap.getScrollHost();i=r===window?{x:0,y:0,width:window.innerWidth,height:window.innerHeight}:r.getBoundingClientRect();let o=i.x+i.width/2,s=i.y+i.height/2,a={left:o-20,right:o+20,top:s-20,bottom:s+20};const c=e=>{if(!e)return Promise.resolve();let n=e.$ui.get(0).getBoundingClientRect(),i=n.x,r=n.y,c=r+n.height,l=n.right;return Vo.isOverlap(a,{left:i,right:l,bottom:c,top:r},!1)?e.getPDFPage().then((n=>{if(t){let t=Math.max(0,o-i),a=Math.max(0,s-r);return Promise.all([n,n.reverseDevicePoint([t,a],e.getScale(),e.getRotation())])}return Promise.all([n,[o-i,s-r]])})):void 0};if("topLeft"==e){if(!this.pagesRender)return Promise.resolve([0,[0,0]]);let t=this.pagesRender.viewMode.getVisibleIndexes(),e=t.length>0&&(-1===t.indexOf(n)||_.isMobile)?t[0]:n,r=this.getPDFPageRender(e);if(!r)return Promise.resolve([null,[0,0]]);let a=r.page,c=r.$ui.get(0).getBoundingClientRect();o=Math.max(i.x,c.x),s=Math.max(i.y,c.y);let l=Math.max(0,o-c.x),h=Math.max(0,s-c.y);return a?Promise.all([a,a.reverseDevicePoint([l,h],r.getScale(),r.getRotation())]):r.getPDFPage().then((t=>Promise.all([t,t.reverseDevicePoint([l,h],r.getScale(),r.getRotation())])))}for(let t=n;t<this.doc.getPageCount();t++){let e=c(this.getPDFPageRender(t));if(e)return e}for(let t=n-1;t>-1;t--){let e=c(this.getPDFPageRender(t));if(e)return e}return this.doc.getPageByIndex(n).then((t=>Promise.all([t,[0,0]])))},n.renderPages=function(t,e){return this.pagesRender.renderPages(t,e).catch((t=>{0}))},n.moveDebounce=function(){this._moveDebounce||(this._moveDebounce=(0,_.debounce)((()=>{this.move()}),_.isChromiumEdge||_.isChrome||_.isFirefox||_.isSafari?20:50,!1)),this._moveDebounce()},n.move=function(){if(this.isDestroyed||!this.pagesRender)return Promise.resolve();let t=this.getCurrentViewMode();const e=this.pagesRender.pageRenders;let n=this.getCurrentPageIndex();if(n>=e.length)return this.goToPage(n-1);const i=(t=0)=>this.isDestroyed?[]:this.visiblePageIndexesStore.takeWhile().then((e=>0===e.length&&t<10?new Promise((t=>setTimeout(t,0))).then((()=>i(t+1))):e.sort(((t,e)=>t-e))));return i().then((e=>{let r=this.currentPageNumber;r!==n&&this.setCurrentPageIndex(n);return(async t=>{await this.pagesRender.moveTo(t);let e=5;for(;e>=0;){const n=await i(),r=n.filter((e=>-1===t.indexOf(e)));if(!(r.length>0))break;await this.pagesRender.moveTo(jo(w.Z,new Set([].concat(jo(w.Z,t),jo(w.Z,r))))),t=n,e--}})(e).then((()=>{let n=this.currentPageNumber;const i=(t,e=19)=>{t.forEach((t=>{this.getPDFPageRender(t)&&this.getPDFPageRender(t).triggerAction(e)}))};if(this.lastVIs){let t=this.lastVIs.filter((t=>-1==e.indexOf(t)));i(t,20),t=e.filter((t=>-1==this.lastVIs.indexOf(t))),i(t)}else i(e),i(e,17);if(this.lastVIs=e,"fitVisible"!==this.scale||!t||n===r)return;"single-page-view-mode"===t.constructor.getName()&&this.zoomTo("fitVisible")}))}))},n.getContainerOffsetLeftTop=function(){let t=this._offsetTop;if("number"==typeof t)return{left:this._offsetLeft,top:t};t=0;let e=0,n=this.$container[0],i=this.viewerRender.scrollWrap.getScrollHost();for(;n&&(t+=n.offsetTop,e+=n.offsetLeft,n=n.offsetParent,n!==i););return{left:e,top:t}},n.getContainerVisibleRect=function(){let t=document.documentElement,e=t.clientWidth,n=t.clientHeight,i=this.viewerRender.scrollWrap.getScrollHost(),r=0,o=e,s=0,a=n;if(i instanceof HTMLElement){let t=i.getBoundingClientRect();r=Math.max(r,t.left),o=Math.min(o,t.right),s=Math.max(s,t.top),a=Math.min(a,t.bottom)}return{left:r,right:o,top:s,bottom:a}},n.getValidContainerVisibleRect=function(){let t=document.documentElement;t.clientWidth,t.clientHeight;const e=this.viewerRender.scrollWrap.getScrollHost();let n,i,r,o;if((0,_.isHTMLElement)(e)){const t=e.getBoundingClientRect();n=t.left,i=t.left+e.clientWidth,r=t.top,o=t.top+e.clientHeight}else((0,_.isWindowObject)(e)||(0,_.isDocument)(e))&&(n=0,r=0,i=document.body.clientWidth,o=document.body.clientHeight);return n=Math.max(0,n),r=Math.max(0,r),i=Math.min(i,document.body.clientWidth),o=Math.min(o,document.body.clientHeight),{left:n,right:i,top:r,bottom:o}},n.getContainerVisiblePageIndexes=function(){if(!this.viewerRender||!this.getViewMode())return[];switch(this.viewerRender.getViewMode().getName()){case"single-page-view-mode":case"facing-continuous-page-view-mode":case"facing-page-view-mode":case"continuous-view-mode":return this.getViewMode().getVisibleIndexes()}let t,e,n,i,r=this.getCurrentPageIndex(),o=D()(this.pagesRender.pageDOMs),s=o.length,a=r-1,c=r,l=[],h=this.getContainerVisibleRect(),u=h.left,d=h.right,f=h.top,p=h.bottom;for(;;){if(!i&&c<s){let t=o[c],e=D()(t).find(".fv__pdf-page-container"),r=e.length>0?e[0].getBoundingClientRect():t.getBoundingClientRect();r.right>u&&r.left<d&&r.bottom>f&&r.top<p?(l.push(D()(t).index()),n=!0):n&&(i=!0),c++}else!i&&c>=s&&(i=!0);if(!e&&a>-1){let n=o[a],i=D()(n).find(".fv__pdf-page-container"),r=i.length>0?i[0].getBoundingClientRect():n.getBoundingClientRect();r.right>u&&r.left<d&&r.bottom>f&&r.top<p?(l.unshift(D()(n).index()),t=!0):t&&(e=!0),a--}else!e&&a<=-1&&(e=!0);if(i&&e)break}return l},n.downloadFileSpec=function(t,e){this.doc.getFileSpecStream(t).then((t=>{Ho(t,e,"application/octet-stream")}))},n.performAction=function(t){let e=this.doc.getAdditionalAction(t);this.pdfViewer.actionManager.get(e,this).active(!0)},n.setPrintState=function(t){this._isPrinting=t},n.isPrinting=function(){return this._isPrinting},n.transfUiLayoutKey=function(t){let e="";switch(t){case"pageOnly":e="PageOnly";break;case"bookmarksPanelAndPage":e="UseOutlines";break;case"pagesPanelAndPage":e="UseThumbs";break;case"attachmentsPanelAndPage":e="UseAttachments";break;case"layersPanelAndPage":e="UseOC"}return e},n.executeNavigationAction=function(t){this.pdfViewer.customs.executeNavigationAction(t,this.pdfViewer)},n.executeLayeroutAction=function(t,e){if(1==this.doc.getPageCount())return;let n=t;if("Default"===n&&e&&e.defaultPageLayout){switch(e.defaultPageLayout){case"continuous":n="OneColumn";break;case"singlePage":n="SinglePage";break;case"facing":n="TwoPageLeft";break;case"continuous-Facing":n="TwoColumnLeft"}}let i="";switch(n){case"SinglePage":i="single-page-view-mode";break;case"OneColumn":i="continuous-view-mode";break;case"TwoPageLeft":i="facing-page-view-mode";break;case"TwoColumnLeft":i="facing-continuous-page-view-mode"}i&&this.pdfViewer.viewModeManager.set(i)},n.executeScaleAction=function(t,e){let n,i,r={pageIndex:void 0,scale:void 0};if(!(t&&"TypeGoto"===t.getType()||e))return r;if(t&&t.getDestination&&(n=t.getDestination(),i=n.pageIndex),n&&void 0!==n.zoomMode&&"ZoomXYZ"!==n.zoomMode||n&&n.zoomFactor>0){let t=n.zoomFactor;switch(n.zoomMode){case"actualSize":t=1;break;case"ZoomFitPage":case"ZoomFitVert":t="fitHeight";break;case"ZoomFitHorz":t="fitWidth";break;case"ZoomFitBHorz":t="fitVisible"}r={pageIndex:i,scale:t}}else if(e){let t=e.zoom;switch(Number.isNaN(parseFloat(t))||(t/=100),e.zoom){case"autoMatic":case"fitWidth":t="fitWidth";break;case"actualSize":t=1;break;case"fitPage":t="fitHeight";break;case"fitVisible":t="fitVisible"}t&&(r={pageIndex:i,scale:t})}return r},n.isHandReadArticles=function(){const t=window.localStorage.getItem("PREFERENCES-GENNERAL");if(!t)return!0;const{handReadArticles:e}=JSON.parse(t);return e},n.startReadMode=function(t){const e=this.pdfViewer,n=this.$doc,i=n.get(0),r=e.stateHandlerManager,o=r.currentStateHandler.getStateName(),s=this.scale,a=t.children,c=a[0].pageIndex;let l=0;const h=()=>{const{objNum:t,pageIndex:e}=a[l];this.pagesRender.pageRenders[e].articleBeads[t].read(),l+=1};r.switchTo(Re),e.goToPage(c,0,0,!1).then(h),n.get(0).addEventListener("click",this.readArticle=t=>{if(!this.isHandReadArticles())return;D()(t.target).closest(".fv__pdf-page-annots-container").length>0||(l>=a.length?this.quitReadMode():h())},{capture:!0}),this.readArticleCursor&&i.removeEventListener("mouseover",this.readArticleCursor),i.addEventListener("mouseover",this.readArticleCursor=t=>{const e=this.isHandReadArticles(),i=!!this.resetReadModeData;n.toggleClass("fv__cursor-frame",e&&i),n.find(".fv__pdf-page-handler-container").toggleClass("fv__cursor-frame",e&&i)}),this.isHandReadArticles()&&(n.addClass("fv__cursor-frame"),n.find(".fv__pdf-page-handler-container").addClass("fv__cursor-frame")),this.resetReadModeData={pageIndex:c,scale:s,statesName:o,thread:t},e.eventEmitter.emit(nt.articleEnterReadMode,t.objNum)},n.quitReadMode=function(t=!0){const e=this.pdfViewer,n=this.$doc,i=e.getStateHandlerManager();n.get(0).removeEventListener("click",this.readArticle,{capture:!0}),n.get(0).removeEventListener("mouseover",this.readArticleCursor),n.removeClass("fv__cursor-frame"),n.find(".fv__pdf-page-handler-container").removeClass("fv__cursor-frame");const{pageIndex:r,scale:o,statesName:s,thread:a}=this.resetReadModeData;t&&i.switchTo(s),e.goToPage(r,0,0,!1).then((()=>{e.zoomTo(o)})),e.eventEmitter.emit(nt.articleOutReadMode,a.objNum),this.resetReadModeData=null,this.readArticle=null,this.readArticleCursor=null},n.fullscreen=function(){this.pdfViewer.viewerUI.rootComponent.querySelector("float-bar").controller.fullScreen()},n.disableDragToScroll=function(){this.viewerRender.disableDragToScroll()},n.enableDragToScroll=function(){this.viewerRender.enableDragToScroll()},n.hideMarkup=function(t,e=!1){this.hideMarkupFlag=t;const n=this.pagesRender;n.viewMode.getVisibleIndexes();n.pageRenders.forEach((n=>{const i=n.annotsRender;i&&(e?i.render.apply(i,jo(w.Z,i.renderParams)):t?(i.backAnnots=i.showAnnots,i.showAnnots=new Set,i.annotFiltered=1):(Array.from(i.showAnnots).map((t=>i.backAnnots.add(t))),i.showAnnots=i.backAnnots,i.backAnnots=new Set))}))},e}(K);function Ko(t){return"state-"+t}var qo=Go;let zo=function(t){function e(e){var n;return(n=t.call(this)||this).viewerRender=e,n}(0,E.Z)(e,t);var n=e.prototype;return n.getScrollHost=function(){return window},n.scrollBy=function(t,e){this.getScrollHost().scrollBy(t,e)},n.scrollTo=function(t,e){this.getScrollHost().scrollTo(t,e)},n.getScrollOffsetTop=function(){return this.viewerRender.$ui[0].offsetTop},n.getScrollOffsetLeft=function(){return this.viewerRender.$ui[0].offsetLeft},n.getScrollY=function(){return this.getScrollTop()},n.getScrollX=function(){return this.getScrollLeft()},n.getWidth=function(){const t=this.getScrollHost();return Jo(t)?document.documentElement.clientWidth:t.clientWidth},n.getHeight=function(){const t=this.getScrollHost();return Jo(t)?document.documentElement.clientHeight:t.clientHeight},n.getScrollTop=function(){const t=this.getScrollHost();return Jo(t)?document.scrollingElement?document.scrollingElement.scrollTop:t.scrollY||t.pageYOffset||0:t.scrollTop},n.getScrollLeft=function(){const t=this.getScrollHost();return Jo(t)?document.scrollingElement?document.scrollingElement.scrollLeft:window.scrollX||window.pageXOffset||0:t.scrollLeft},n.disable=function(t){this.disabled=t},n.addScrollEventListener=function(t){let e=this.getScrollHost();e===document.body&&(e=document);const n=n=>{this.disabled||t(n,e)};e.addEventListener("scroll",n);let i=ei;const r=()=>{e.removeEventListener("scroll",n),i()};return i=this.addDestroyHook(r),r},n.getOffsetOfPageElement=function(t){const e=this.viewerRender.$ui[0].getBoundingClientRect(),n=t.getBoundingClientRect();return{left:n.left-e.left,top:n.top-e.top}},e}(_.Disposable);function Jo(t){return t instanceof Window||t instanceof Document}var Zo=function(){function t(t){this.pdfViewer=t}t.getStateName=function(){(0,_.notImplemented)()},t.getKeyboardBinderName=function(){return null},t.setParams=function(t,e){};var e=t.prototype;return e.docHandler=function(t){if(!this.pdfViewer)return;const e=this.pdfViewer.getPDFViewerRender();e&&e.disableDragToScroll()},e.destroyDocHandler=function(){},e.pageHandler=function(t){},e.destroyPageHandler=function(){},e.out=function(){this.pdfViewer.keyboard.activeDefaultBinde&&this.pdfViewer.keyboard.activeDefaultBinder()},t}();function Xo(t,e,n){let i=t.getBoundingClientRect();return[e-i.left,n-i.top]}function Qo(t,e,n){let i,r=t[0],o=t[1],s=r+e,a=o+n;return s<r&&(i=r,r=s,s=i),a<o&&(i=o,o=a,a=i),{left:r,right:s,top:o,bottom:a}}const ts="fv__mark-selection-blank",es="."+ts;function ns(t){t.find(es).remove()}function is(t){const e=t[t.length-1];let n,i,r={};switch(e.rotation){case 0:n=e.top-e.bottom,i=2*n/5,r.left=e.right-i,r.right=e.right+i,r.top=(e.top+e.bottom)/2,r.bottom=r.top-n;break;case 3:i=e.right-e.left,n=4*i/5,r.left=(e.right+e.left)/2,r.right=r.left+i,r.top=e.top+n/2,r.bottom=r.top-n;break;case 2:n=e.top-e.bottom,i=2*n/5,r.left=e.left-i,r.right=e.left+i,r.bottom=(e.top+e.bottom)/2,r.top=r.bottom+n;break;case 1:i=e.right-e.left,n=4*i/5,r.right=(e.right+e.left)/2,r.left=r.right-i,r.top=e.bottom+n/2,r.bottom=r.top-n}return{rect:r,rotate:e.rotation*Math.PI/2}}function rs(t,e){(e||t.$handler).find(".fv__mark-text-selection-range").remove()}function os(t,e,n){const i=t.$handler;i.find(".fv__mark-selection-blank.rectangle").remove(),rs(t,i);const r={top:Math.min(e[1],n[1]),left:Math.min(e[0],n[0]),width:Math.abs(e[0]-n[0]),height:Math.abs(e[1]-n[1])};i.append(D()('<div class="fv__mark-text-selection-range"></div>').css(r))}function ss(t){if("clientX"in t)return t.clientX;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientX;case"touchend":case"touchcancel":return t.changedTouches[0].clientX}}function as(t){if("clientY"in t)return t.clientY;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientY;case"touchend":case"touchcancel":return t.changedTouches[0].clientY}}var cs=(t,e)=>{let n=t.getBoundingClientRect(),i=e.srcEvent;const r=ss(i),o=as(i);return{x:r-n.left-e.deltaX,y:o-n.top-e.deltaY}};const ls="update-dbl-click-data";let hs=function(){function t(){this.store=new _.Store}var e=t.prototype;return e.dispatchDblClickData=function(t){this.store.dispatch(ls,t).finally((()=>{this.store.dispatch(ls,null)}))},e.takeWhileDblClickDataReturn=function(t){const e=this.store.subscribe(ls,(n=>{n&&(t(n),e())}))},t}();const us=(ds=(t,e)=>{e&&(Object.values(e).forEach((t=>{const e=t.target;"-1"===e.getAttribute("tabindex")&&e.removeAttribute("tabindex")})),function(t){!t.getAttribute("tabindex")&&t.setAttribute("tabindex",-1)}(t))},fs=500,ps=!0,function(){var t=this,e=arguments,n=ps&&!gs;clearTimeout(gs),gs=setTimeout((function(){gs=null,ps||ds.apply(t,e)}),fs),n&&ds.apply(t,e)});var ds,fs,ps,gs;let ms=function(){function t(){this.eventObject={},this._addKeyEvent()}t.getInstance=function(){return window.Shortcut?window.Shortcut:window.Shortcut=new t};var e=t.prototype;return e.setDebugger=function(t){this.debugger=t},e._cwarn=function(){if(this.debugger)return console.warn.apply(this,arguments)},e._addTabindexEvent=function(t){if(t._hasmousedownevent_)return;const e=t._mousedown_=e=>{us(t,this.eventObject)};t.addEventListener("mousedown",e),t._hasmousedownevent_=!0},e._addEventObject=function(t,e,n){if(!e)throw Error("keys arguments is required.");const i=t._stctid||(r=(new Date).getTime(),window.performance&&"function"==typeof window.performance.now&&(r+=performance.now()),"xxyy-4xxx-yxxx-xx-sc".replace(/[xy]/g,(function(t){var e=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==t?e:3&e|8).toString(16)})));var r;e=(e+"").toLocaleLowerCase().replace(/ /g,""),this._addTabindexEvent(t);let o=this.eventObject[i];o||(o={}),o.target=o.target||t,o[e]&&this._cwarn("重复绑定快捷键：",t,e),o[e]=n,t._stctid=i,this.eventObject[i]=o},e._addKeyEvent=function(){let t=[],e=[];const n=()=>{let t=document.activeElement;if(["INPUT","TEXTAREA"].includes(t.nodeName)||t.hasAttribute("contenteditable")||t.hasAttribute("tabindex"))return t;const e=Object.values(this.eventObject).find((t=>t.target.hasAttribute("tabindex")));return e&&e.target},i=(n,r)=>{const o=r||n.target,s=o._stctid,a=this.eventObject[s];if(r=o.parentNode,s&&a){let i=t.concat([]),r=e.concat([]);do{const o=i.join("+"),s=r.join("+"),c=a[o],l=a[s];if(c||l)return t=i,e=r,void(c||l)(n);i.shift(),r.shift()}while(i.length+r.length)}r&&"HTML"!==r.nodeName&&i(n,r)};document.addEventListener("keydown",(r=>{let{key:o,keyCode:s}=r;if(!o)return;o="Control"===o?"ctrl":"Escape"===o?"esc":o.toLocaleLowerCase();const a=t.indexOf(o),c=e.indexOf(s);a>-1&&t.splice(a,1),c>-1&&e.splice(c,1),t.push(o),e.push(s);const l=n();i(r,l)})),document.addEventListener("keyup",(n=>{let{keyCode:i,altKey:r,ctrlKey:o,metaKey:s,shiftKey:a}=n;if(r||o||s||a){const n=e.indexOf(i);n>-1&&(t.splice(n,1),e.splice(n,1))}else t=[],e=[]}))},e.register=function(t,e,n){if(t||(t=document),!(t instanceof Node))throw Error("first arguments is not a node.");return e instanceof Array?e.forEach((e=>{this._addEventObject(t,e,n)})):this._addEventObject(t,e,n),this},e.unregister=function(t){const e=t._stctid;t.removeEventListener("mousedown",t._mousedown_),delete this.eventObject[e],delete t._stctid,delete t._hasmousedownevent_,delete t._mousedown_},t}();var vs=ms.getInstance();const ys="rectangle",ws=(t,e,n)=>{const i=t.$handler;i.find(".fv__mark-selection-blank:not(.rectangle)").remove();const r=D()(document.createDocumentFragment()),o=i.get(0).getBoundingClientRect();for(let t=0,i=e.length;t<i;t++){const i=e[t],s={top:i.top/o.height*100+"%",left:i.left/o.width*100+"%",width:(i.right-i.left)/o.width*100+"%",height:(i.bottom-i.top)/o.height*100+"%"};r.append(D()('<mark class="fv__mark-selection-blank" type="'+n+'"></mark>').css(s))}i.append(r)},bs=(t,e,n,i)=>{const r=Qo(e,n,i);return t.getTextRectsAtRect(r).then((e=>Promise.all([t.getPDFPage(),e]).then((([e,n])=>{const i=t.transformRectArray(e,n);return ws(t,i,Jt.Text),{page:e,rectArray:n,rectArrayInPixel:i}}))))},As=(t,e,n)=>{const i=t.$handler;i.find(".fv__mark-selection-blank.rectangle").remove();const r=i.get(0).getBoundingClientRect(),o={top:Math.min(e[1],n[1])/r.height*100+"%",left:Math.min(e[0],n[0])/r.width*100+"%",width:Math.abs(e[0]-n[0])/r.width*100+"%",height:Math.abs(e[1]-n[1])/r.height*100+"%"};i.append(D()('<mark class="fv__mark-selection-blank rectangle" type="rectangle"></mark>').css(o))},Ps=({point:t,rectArray:e,isReadSelectText:n=!0,characterIndexStart:i=-1,characterIndexEnd:r=-1,panStartEvent:o,panMoveArr:s,overrideText:a},c,l,h)=>{let u=l.pdfViewer;const d=l.doc;return(e||[])[0]?Promise.all([l.getPDFPage(),e]).then((([e,f])=>{Qo(t,c.deltaX,c.deltaY);return Promise.all(f.map((t=>e.getTextContinuousCharsAtRect(t,!0)))).then((t=>t.join("\n"))).then((t=>{d.addTextSelectedInfo(l,i,r,f,t,c,o,s),u.getStore().dispatch(st.STORE_NAMES.SELECTION_INFO,{page:e,text:a||t,rectArray:f,isReadSelectText:n,e:c,panStartEvent:o,panMoveArr:s}),u.eventEmitter.emit(nt.selectText,{page:e,text:a||t,rectArray:f,e:c,panStartEvent:o,panMoveArr:s});const p=l.transformRectArray(e,f);ws(l,p,Jt.Text);const g=p[0];return!!g&&(h&&h.showAt((g.left+g.right)/2,g.top,t,p),!0)}))})):Promise.resolve(!1)},Ss=t=>{t.currentPDFDoc&&t.currentPDFDoc.setSelectedInfo(null),t.getStore().dispatch(st.STORE_NAMES.SELECTION_INFO,null),t.getPDFDocRender().pagesRender.pageRenders.forEach((t=>{t.$handler.find(".fv__mark-selection-blank").remove()}))};let Cs=function(){function t(t,e,n,i){if(![Re,ln].includes(i))return;let r,o,s,a=-1,c=-1,l="unknown";const h=e.$handler.addClass("fv__select-text-image-state-handler"),u=h[0],d=e.pdfViewer,f=(d.viewerUI,d.eventEmitter);let p=null,g=null,m=[];const v=e.doc;this.pdfDoc=v,this.pdfViewer=d,this.pageRender=e,this.tooltip=n,this.stateName=i,this.altEnter=!1,this.altSwitch=!1,this.disposor=new _.Disposable,this.isEnable=!0,this.addAltEvent(h);let y,w,b,A;let P=!1,S=!1;if(_.isTouchDevice){let i,r,o=null;t.on("press",i=async t=>{if(await e.annotsRender.findAnnot(t.srcEvent))return;Ss(d),n&&n.hide();const i=cs(u,t);e.getTextContinueRectAtDevicePoints([i.x,i.y],[i.x+5,i.y+5],-1,-1).then((t=>{o=t,e.getPDFPage().then((n=>{const i=e.transformRectArray(n,t);ws(e,i,Jt.Text)}));!!(t||[])[0]&&(P=!0,this.setEnable(!0),this.pdfViewer.eventEmitter.emit(nt.togglePageContextMenu,!1))}))}),t.on("hammer.input",r=t=>{if("pointerup"===t.srcEvent.type){if(S)return o=null,void(P=!1);if(P&&o){const i=cs(u,t);Ps({point:[i.x,i.y],rectArray:o,characterIndexStart:a,characterIndexEnd:c,panStartEvent:g,panMoveArr:m},t,e,n)}else Ss(d),n&&n.hide();o=null,P=!1,this.pdfViewer.eventEmitter.emit(nt.togglePageContextMenu,!0)}else"pointerdown"===t.srcEvent.type&&(S=!1)}),this.disposor.addDestroyHook((()=>{t.off("press",i),t.off("hammer.input",r)}))}t.on("doubletap",y=t=>{this.isEnable&&(Ss(d),n&&n.hide(),this.isTextSelectionToolEnabledInHandState()&&((t,e,n,i)=>{let r=cs(e,t),o=[r.x,r.y];n.getDoubleClickTextRectAtPoint(o).then((e=>{const r=n.pdfViewer.getIoC().getInstanceByClass(hs);Ps({point:o,rectArray:e,isReadSelectText:!1},t,n,i).then((t=>{r.dispatchDblClickData({isTextSelected:t})}))}))})(t,u,e,n))}),t.on("panstart",w=t=>{if(!this.isEnable)return;if(i===Re&&_.isTouchDevice&&!P)return;S=!0;let h=cs(u,t);e.getTextContinueRectAtDevicePoints([h.x,h.y],[h.x+5,h.y+5],-1,-1).then((e=>{const u=(e||[])[0];if(l=!u,i===Re){if(l)return;const t=d.customs.isCollaborationMod&&d.customs.isCollaborationMode(),e=d.customs.getCommentPermission&&d.customs.getCommentPermission();if(t&&!e)return;f.emit("can-scroll",!1)}this.pdfDoc.textSelecting=!0,g=t,m=[],a=u&&"string"==typeof u.text?u.start:-1,c=-1,o=void 0,r=[h.x,h.y],s=new rt,v.clearSelectedInfo(d),n&&n.hide(),d.killFocus(),this.altSwitch=this.altEnter}))}),t.on("panmove",b=t=>{if(!this.isEnable)return;if(i===Re){if(_.isTouchDevice&&!P)return;if("unknown"===l||!this.pdfDoc.textSelecting)return}else if("unknown"===l)return;let n=cs(u,t);s||(s=new rt),s.push((()=>{m.push(t);const o=[r[0]+t.deltaX,n.y+t.deltaY];if(i===Re){if(this.altSwitch)return os(e,r,o),bs(e,r,t.deltaX,t.deltaY);if(l)return p={type:ys,pageRender:e},v.setSelectedInfo(p),As(e,r,o),Promise.resolve()}const s=()=>e.getTextContinueRectAtDevicePoints(r,o,a,c).then((n=>{const i=(n||[])[0];if(i&&("string"==typeof i.text&&(a=i.start,c=i.end),-1!==a))return Promise.all([e.getPDFPage(),n]).then((([n,i])=>{const r=e.transformRectArray(n,i);ws(e,r,Jt.Text),this.pdfDoc.addTextSelectedInfo(e,a,c,i,"",t,g,m)}))})),h=(e,n,i,r=!1)=>Promise.all([e.getPDFPage(),n?Promise.resolve(i):e.reverseDevicePoint(i)]).then((([n,i])=>n.getTextIndexAtPoint(i).then((i=>{if(-1==i)return Promise.resolve();const o=r?i:0,s=r?-1:i;return n.getTextRectsByIndexes(o,s).then((i=>{const r=e.transformRectArray(n,i);ws(e,r,Jt.Text),this.pdfDoc.addTextSelectedInfo(e,o,s,i,"",t,g,m)}))}))));return d.convertClientCoordToPDFCoord({clientX:t.srcEvent.clientX,clientY:t.srcEvent.clientY}).then((t=>{const n=t.index;return n!=e.index?h(e,!1,r,n>e.index).then((()=>{c=n>e.index?-1:0;const i=d.getPDFPageRender(n),r=[t.left,t.top];return h(i,!0,r,n<e.index)})):s()}))}))}),t.on("panend",A=t=>{if(!this.isEnable)return;if(i===Re){if(!this.pdfDoc.textSelecting||"unknown"===l)return;this.pdfDoc.textSelecting=!1,this.pdfViewer.eventEmitter.emit("can-scroll",!0)}else if(this.pdfDoc.textSelecting=!1,"unknown"===l)return;s&&(s.end(),s=null);let o=cs(u,t);const a=[r[0]+t.deltaX,o.y+t.deltaY];return this.altSwitch&&i===Re?(this.altSwitch=!1,rs(e),bs(e,r,t.deltaX,t.deltaY).then((({page:i,rectArray:r,rectArrayInPixel:o})=>{const s=r[0].texts||"";v.addTextSelectedInfo(e,0,0,r,s,t,g,m),d.getStore().dispatch(st.STORE_NAMES.SELECTION_INFO,{page:i,text:s,rectArray:r,e:t,panStartEvent:g,panMoveArr:m}),f.emit(nt.selectText,{page:i,text:s,rectArray:r,e:t,panStartEvent:g,panMoveArr:m});const a=o[0];a&&n&&n.showAt((a.left+a.right)/2,a.top,p.getText(),o)}))):l&&i===Re?(p={type:ys,pageRender:e,e:t,panStartEvent:g,panMoveArr:m},v.setSelectedInfo(p),As(e,r,a),void(l="unknown")):this.pdfDoc.updateTextSelectInfo().then((()=>{this.pdfDoc.selectedInfo&&((t,e)=>{const n=t.selectedPages;if(!n.length)return;const i=t.e,r=t.panStartEvent,o=t.panMoveArr,s=n[0].pageRender;let a=s.pdfViewer;s.doc;const c=n[0].rectArray,l=t.getText(),h=l;s.getPDFPage().then((n=>{a.getStore().dispatch(st.STORE_NAMES.SELECTION_INFO,{selectedInfo:t,page:n,text:h||l,rectArray:c,isReadSelectText:!1,e:i,panStartEvent:r,panMoveArr:o}),a.eventEmitter.emit(nt.selectText,{selectedInfo:t,page:n,text:h||l,rectArray:c,e:i,panStartEvent:r,panMoveArr:o});const u=s.transformRectArray(n,c),d=u[0];return!!d&&(e&&e.showAt((d.left+d.right)/2,d.top,l,u),!0)}))})(this.pdfDoc.selectedInfo,n)}))});const C=()=>{n&&n.hide()};f.on(nt.activeElementChanged,C),f.on(nt.switchStateHandler,C),this.disposor.addDestroyHook((()=>{n&&n.destroy(),f.off(nt.activeElementChanged,C),f.off(nt.switchStateHandler,C),t.off("doubletap",y),t.off("panstart",w),t.off("panmove",b),t.off("panend",A)}))}var e=t.prototype;return e.destroy=function(){vs.unregister(this.pageRender.$element.get(0)),this.pdfViewer.viewerUI.loadContextPromise=null,this.disposor.destroy(),this.removeAltEvent()},e.doTextCopy=function(t){const e=t.getText();void 0!==e&&(0,_.copyText)(e).then((t=>{this.pdfViewer.eventEmitter.emit(t?nt.copyTextSuccess:nt.copyTextFailed,e)}))},e.doExportSelectionText=function(t){const e=this.pdfViewer.viewerUI.rootComponent.pdfUI;if(e.customs&&e.customs.isAccountExpired&&e.customs.isAccountExpired(!0,{btnName:"fv--contextmenu-item-exportSelectionAs",tabName:"convert_tab"}))return;const n=[];for(const e of t.selectedPages){const t=e.rectArray.map((t=>({left:t.left,right:t.right,top:t.top,bottom:t.bottom})));n.push({pageIndex:e.pageRender.index,rectArray:t})}e.customs&&e.customs.showSaveAsDialog&&e.customs.showSaveAsDialog("convert-pdf-to-word",JSON.stringify(n))},e.createTextMarkupAnnot=function(t,e){const{selectedPages:n}=e,i=(e,n)=>e.getPDFPage().then((e=>{if("replace"===t){const{rect:t,rotate:i}=is(n);return e.addAnnotGroup([{flags:4,type:"strikeout",rect:{left:0,right:0,top:0,bottom:0},coords:n,noPopup:!0,typeAlias:"Replace",intent:"StrikeOutTextEdit",subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Replace")},{type:"caret",flags:4,rect:t,typeAlias:"Replace",intent:"Replace",rotation:i,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects.Replace")}],1)}return e.addAnnot({type:t,rect:{left:0,right:0,top:0,bottom:0},flags:4,coords:n,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects."+t[0].toUpperCase()+t.substr(1))})})).then((t=>{const n=t[0];this.pdfViewer.eventEmitter.emit(nt.addAnnotSuccess,n),e.annotsRender.activeAnnot(n.getId())}));let r=[];for(const t of n)r.push(i(t.pageRender,t.rectArray));Promise.all(r).then((()=>{Ss(this.pdfViewer),this.tooltip&&this.tooltip.hide()}))},e.doTextSelectAll=function(t,e){const n=this.pdfViewer;Ss(n),this.tooltip&&this.tooltip.hide();const i=[];if(e)for(const t of e.selectedPages)i.push(t.pageRender);else t&&i.push(t);for(const t of i)Promise.all([t.getAllTextRect(),t.getAllTextChar(),t.getPDFPage()]).then((([e,i,r])=>{n.getStore().dispatch(st.STORE_NAMES.SELECTION_INFO,{page:r,text:i,rectArray:e}),n.eventEmitter.emit(nt.selectText,{page:r,text:i,rectArray:e});const o=t.transformRectArray(r,e);ws(t,o,Jt.Text);const s=this.pdfViewer.currentPDFDoc;t.getAllTextChar().then((n=>{s.addTextSelectedInfo(t,0,-1,e,n)}))}))},e.createBookmark=function(t,e){if(!t)for(const n of e.selectedPages){t=n.pageRender;break}const n=this.pdfViewer.viewerUI.rootComponent;if(n.getComponentByName("sidebar-bookmark").active(),!e)return void this.pdfViewer.eventEmitter.emit("bookmark-create-current-view");const{type:i,graphicsObject:r}=e;let o,s;i==Jt.Text&&(o=e.getText(),s=e.selectedPages[0].rectArray),t.getPDFPage().then((t=>{const{left:e,top:a}=i===Jt.Text?s[0]:r.getRect(),c=i===Jt.Text?o:this.pdfViewer.i18n.t("sidebar.bookmark.untitled"),l=t.getIndex(),h=n.getComponentByName("fv-bookmark-sidebar-panel");this.pdfViewer.eventEmitter.emit("bookmark-create-current-view",{bookmarkId:h.currentBookmarkId,left:e,top:a,title:c,relationship:3,pageIndex:l})}))},e.doEditText=function(t){},e.createLink=function(t){let e;for(const n of t.selectedPages){e=n.pageRender;break}if(!e)return;const n=e.doc;e.getPDFPage().then((t=>{let i=0;if(!n.selectedInfo)return void(i=1);const{rectArray:r}=n.selectedInfo.selectedPages[0];let o=Number.MAX_VALUE,s=-Number.MAX_VALUE,a=-Number.MAX_VALUE,c=Number.MAX_VALUE;r.forEach((t=>{o=Math.min(o,t.left),s=Math.max(s,t.right),a=Math.max(a,t.top),c=Math.min(c,t.bottom)})),i&&(n.selectedInfo=null),t.addAnnot({type:"link",rect:{left:o,right:s,top:a,bottom:c},color:"0000FF"}).then((t=>{const n=e.getAnnotRender(t[0].getId()).component;n.showCreateDialog(),_.isMobile&&this.pdfViewer.getStateHandlerManager().switchTo(Re),e.pdfViewer.eventEmitter.emit(nt.addAnnotSuccess,n.annot),Ss(this.pdfViewer),this.tooltip&&this.tooltip.hide()}))}))},e.doWordCount=function(t){},e.getLoopUpText=function(){let t=!1;const e=this.pageRender.doc;if(!e.selectedInfo)return void(t=!0);let n=e.selectedInfo.getText();return n=n.trim(),_.isWindows&&(n=n.substr(n.lastIndexOf(" ")+1)),e.selectedInfo.lookUpText=n,t&&(e.selectedInfo=null),n},e.doLookUp=function(t){const{lookUpText:e}=t;this.dictionaryWindow&&this.dictionaryWindow.close(),this.dictionaryWindow=window.open(`https://www.dictionary.com/browse/${e}?utm_source=foxit&utm_medium=referral&utm_campaign=foxit`)},e.isTextSelectionToolEnabledInHandState=function(){if(this.stateName===Re){const t=this.pdfViewer.getStateHandlerManager().getStateHandlerConfig(Re);if(t&&!t.enableTextSelectionTool)return!1}return!0},e.hasModifyPermissions=function(t){const e=t.doc.getPermissions();return 8&e&&32&e},e.checkPerm=function(t){return this.pageRender.docRender.getUserPermission()[t]()},e.addAltEvent=function(t){this.keydownUpEvent=t=>{"keyup"===t.type&&this.altEnter?(t.stopPropagation(),t.preventDefault(),this.altEnter=!1):t.altKey&&(t.stopPropagation(),t.preventDefault(),this.altEnter=!0)},D()(window).on("keydown keyup",this.keydownUpEvent)},e.removeAltEvent=function(){D()(window).off("keydown keyup",this.keydownUpEvent)},e.isTextSelecting=function(){return!!this.pdfDoc.textSelecting},e.setEnable=function(t){this.isEnable=t},t}(),Es=function(){this.scrollValid=!0};var xs=function(t){function e(e){var n;return(n=t.call(this,e)||this).isDestroyed=!1,n.cursorStyle="fv__cursor-grab",n.isOnText=!1,n.timeStamp=0,n.pdfViewer=e,n.service=e.getIoC().getInstanceByClass(Es),n.throttleTaskExecutor=new _.ThrottleAsyncTaskExecutor(100,!0),n}(0,E.Z)(e,t),e.getStateName=function(){return Re},e.getDefaultContextMenuConfig=function(){let t="hand-state";return{selector:".fv__hand-state-contextmenu-container",items:{zoomin:{name:"zoomin",nameI18nKey:"viewer_:contextmenu.hand.zoomin",callback:function(e,n,i){this.data(t).zoomIn()},visible:function(){return this.data(t).allowZoomIn()}},zoomout:{name:"zoomout",nameI18nKey:"viewer_:contextmenu.hand.zoomout",callback:function(e,n,i){this.data(t).zoomOut()},visible:function(){return this.data(t).allowZoomOut()}}}}};var n=e.prototype;return n.docHandler=function(t){t.viewerRender.enableDragToScroll()},n.pageHandler=function(t){this.pageRender=t;let e=t;t.$ui.addClass("fv__annot-container-zindex-up fv__allow-modify-form-control");let n=e.$handler;n.addClass("fv__hand-state-handler"),n.addClass(this.cursorStyle);let i=n[0],r=t.pdfViewer;const o=r.getCurrentPDFDoc().isDynamicXFA();let s=this.eventEmitter=r.eventEmitter;s.emit("can-scroll",!0);let a=this.hammer=new(Ii().Manager)(i,{recognizers:[[Ii().Pan,{direction:Ii().DIRECTION_ALL}]]});a.add(new(Ii().Tap)({event:"doubletap",taps:2})),a.add(new(Ii().Tap)({event:"singletap"})),a.add(new(Ii().Press)),a.get("doubletap").recognizeWith("singletap"),a.get("singletap").requireFailure("doubletap"),a.on("panstart",(e=>{if(o)return;let n=t.annotsRender;n&&n.panStart(e.srcEvent)}));const c=async e=>{if(Ss(this.pdfViewer),o)return void s.emit(nt.tapPage,e);let n=t.annotsRender;n?await n.tapPage(e.srcEvent)||(e.srcEvent.ctrlKey||n.unActiveAnnot(),s.emit(nt.tapPage,e)):s.emit(nt.tapPage,e)},l=async e=>{if(o)return void s.emit(nt.doubleTapPage,e,t);let n=t.annotsRender;if(n){if(!await n.doubleTapPage(e.srcEvent)){if(n.unActiveAnnot(),_.isTouchDevice){t.pdfViewer.getIoC().getInstanceByClass(hs).dispatchDblClickData({isTextSelected:this.isOnText})}s.emit(nt.doubleTapPage,e,t)}}else s.emit(nt.doubleTapPage,e,t)};if(_.isTouchDevice&&(_.isSafari||_.isChrome||_.isHuaweiBrowser)?this.offDoubleTapEvent=(0,_.onTap)({target:i,onDoubleTap:l,onSingleTap:c}):(a.on("singletap",c),a.on("doubletap",l)),a.on("press",(async e=>{if(o)return void s.emit(nt.pressPage,e);let n=t.annotsRender;if(this.eventEmitter.emit("can-scroll",!0),n){if(n.unActiveAnnot(),await n.pressPage(e.srcEvent))return e.srcEvent.preventDefault(),void e.srcEvent.stopPropagation();s.emit(nt.pressPage,e)}else s.emit(nt.pressPage,e)})),_.isTouchDevice){const e=t.docRender;a.on("press",(n=>{const r=cs(i,n);t.getTextContinueRectAtDevicePoints([r.x,r.y],[r.x+5,r.y+5],-1,-1).then((t=>{!!(t||[])[0]&&e.viewerRender.disableDragToScroll()}))})),a.on("hammer.input",(t=>{"pointerup"===t.srcEvent.type&&e.viewerRender.enableDragToScroll()}))}n.on("mousedown",this.mousedown=t=>{_.isTouchDevice||(this.isOnText?Ss(this.pdfViewer):(this.textSelectionHandler&&this.textSelectionHandler.setEnable(!1),n.removeClass(this.cursorStyle),this.cursorStyle="fv__cursor-grabbing",n.addClass(this.cursorStyle),this.textSelectionHandler&&this.textSelectionHandler.isTextSelecting()&&this.eventEmitter.emit("can-scroll",!1)))}),_.isTouchDevice&&_.isIOS&&_.isChrome||n.on("mousemove",this.mousemove.bind(this)),n.on("mouseup",this.mouseup=e=>{if(this.isOnText)return;if(n.removeClass(this.cursorStyle),this.textSelectionHandler&&!this.textSelectionHandler.isTextSelecting()&&this.emitCanScroll(),this.cursorStyle="fv__cursor-grab",n.addClass(this.cursorStyle),3!==e.which)return;if(o)return void s.emit(nt.rightClickPage,e);let i=t.annotsRender;i?(i.unActiveAnnot(),s.emit(nt.rightClickPage,e)):s.emit(nt.rightClickPage,e)});let h=D()('<div class="fv__hand-state-contextmenu-container fv__contextmenu-container"></div>'),u=n.find(".fv__mark-selection-blank");u&&u.length>0?h.insertBefore(u[0]):n.append(h),h.data("hand-state",this),setTimeout((()=>{if(!this.textSelectionToolEnabled())return;if(this.isDestroyed||t.isDestroyed)return;const e=this.tooltip=r.viewerUI&&r.viewerUI.createTextSelectionTooltip(t);this.textSelectionHandler=new Cs(this.hammer,t,e,Re),e&&e.on("blur",(t=>{!t&&Ss(this.pdfViewer),e.hide()}))}),200)},n.mousemove=function(t){if(this.textSelectionHandler&&this.textSelectionHandler.isTextSelecting())return this.cursorStyle="fv__cursor-text",void this.pageRender.$handler.removeClass("fv__cursor-grab").addClass(this.cursorStyle);clearTimeout(this.timer),this.throttleTaskExecutor.exec((()=>{if(this.pageRender&&this.textSelectionToolEnabled())return this.mousemoveHandler(t)}))},n.textSelectionToolEnabled=function(){if(!this.pdfViewer)return!1;const t=this.pdfViewer.getStateHandlerManager().getStateHandlerConfig(Re);return!t||!!t.enableTextSelectionTool},n.mousemoveHandler=function(t){const e=this.pageRender,n={x:t.originalEvent.layerX,y:t.originalEvent.layerY};return e.getTextContinueRectAtDevicePoints([n.x,n.y],[n.x+5,n.y+5],-1,-1).then((t=>{t[0]?(this.cursorStyle="fv__cursor-text",this.eventEmitter.emit("can-scroll",!1),this.isOnText=!0,this.textSelectionHandler&&this.textSelectionHandler.setEnable(!0),e.$handler.removeClass("fv__cursor-grab").addClass(this.cursorStyle)):(e.$handler.removeClass("fv__cursor-text").addClass("fv__cursor-grab"),this.isOnText=!1)}))},n.emitCanScroll=function(){this.service.scrollValid&&(this.service.scrollValid=!1,this.scrollTimer=setTimeout((()=>{this.eventEmitter.emit("can-scroll",!0),this.service.scrollValid=!0}),30))},n.destroyPageHandler=function(){this.isDestroyed=!0,this.offDoubleTapEvent&&this.offDoubleTapEvent(),this.hammer&&this.hammer.destroy(),this.pageRender.$ui.removeClass("fv__annot-container-zindex-up fv__allow-modify-form-control"),this.pageRender.$handler.off("mousedown",this.mousedown).off("mouseup",this.mouseup).off("mousemove").removeClass("fv__hand-state-handler").removeClass(this.cursorStyle).find(".fv__hand-state-contextmenu-container").remove(),this.pageRender.annotsRender&&this.pageRender.annotsRender.unActiveAnnot(),this.pageRender.$handler.removeClass("fv__cursor-grab").removeClass("fv__cursor-grabbing"),this._destroyTouchScrollEvent&&this._destroyTouchScrollEvent(),this.textSelectionHandler&&this.textSelectionHandler.destroy()},n.out=function(){this.destroyPageHandler(),this.destroyDocHandler(),this.pageRender=null},n.allowZoomIn=function(){let t=this.pageRender,e=t.pdfViewer,n=t.getScale();return n=Math.ceil(4*n+1)/4,n<e.config.maxScale},n.zoomIn=function(){let t=this.pageRender,e=t.getScale();e=Math.ceil(4*e+1)/4,t.pdfViewer.zoomTo(e).catch((function(){}))},n.allowZoomOut=function(){let t=this.pageRender,e=t.pdfViewer,n=t.getScale();return n=Math.floor(4*n-1)/4,n>e.config.minScale},n.zoomOut=function(){let t=this.pageRender,e=t.getScale();e=Math.floor(4*e-1)/4,t.pdfViewer.zoomTo(e).catch((function(){}))},n.clockwiseRoataion=function(){this.pageRender.getPDFPage().then((t=>{let e=(t.getRotation()+1)%4;t.setRotation(e)}))},n.contrarotate=function(){this.pageRender.getPDFPage().then((t=>{let e=(t.getRotation()+3)%4;t.setRotation(e)}))},e}(Zo);let Ds=function(t){function e(e,n){var i;return(i=t.call(this)||this).pdfViewer=e,i.scrollHost=n,i.prepare(),i.canScroll=!0,i.scrollable=!0,i}(0,E.Z)(e,t);var n=e.prototype;return n.disable=function(){this.scrollable=!1},n.enable=function(){this.scrollable=!0},n.addViewerEventListener=function(t,e){this.pdfViewer.eventEmitter.on(t,e),this.addDestroyHook((()=>{this.pdfViewer.eventEmitter.off(t,e)}))},n.prepare=function(){let t,e;this.taskExecutor=new _.DebounceAsyncTaskExecutor(66);let n=!1;const i=this.pdfViewer,r=i.getStateHandlerManager();this.addViewerEventListener("can-scroll",(t=>{this.canScroll=t})),this.addViewerEventListener(nt.updateScrollableStatus,(({disableHorizontal:n,disableVertical:i})=>{t=n,e=i})),this.addViewerEventListener(nt.changeViewModeSuccess,(n=>{n!==vo&&(t=!1,e=!1)}));const o=this.scrollHost,s=(t,e)=>{o.scrollBy?o.scrollBy(t,e):(o.scrollLeft=o.scrollLeft+t,o.scrollTop=o.scrollTop+e)},a=new Hammer.Manager(o);a.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL}));let c=0,l=0,h=0,u=0,d=0;const f=t=>{c=0,l=0,d=0},p=(n,r,o)=>{if(!this.scrollable||"hand"!==i.getStateHandlerManager().currentStateHandler.getStateName())return;let a=n-c,f=r-l;if(t&&(a=0),e){const t=r-d;if(o===Hammer.DIRECTION_UP||o===Hammer.DIRECTION_DOWN)return this.scrollSinglePage(t),void(d=r);f=0}s(-a,-f),i.eventEmitter.emit(nt.scrollingPage,{touched:!0,distanceX:h,distanceY:u}),c=n,l=r,h=n,u=r};let g,m=!1,v=!0,y=!1;const w=t=>{const e=t.clientX;let n,i,r;if(o instanceof Window)n=0,i=0,r=0;else{n=o.getBoundingClientRect().left;const t=getComputedStyle(o);i=parseInt(t.borderLeftWidth)||0,r=parseInt(t.borderRightWidth)||0}const s=i+r,a=o.offsetWidth,c=a-o.clientWidth-s;y=e>=a-c+n},b=()=>{y=!1};o.addEventListener("mousedown",w),o.addEventListener("touchstart",w),o.addEventListener("mouseup",b),o.addEventListener("touchend",b),o.addEventListener("touchcancel",b);const A=t=>{const e=(0,_.eventPath)(t).some((t=>!!t.classList&&t.classList.contains("fv__pdf-page-annots-container")));n=e};window.addEventListener("mousedown",A,!0),window.addEventListener("touchstart",A,!0);const P=["fv__pdf-page-handler-container","fv__hand-state-contextmenu-container","fv__rendering-container"],S=t=>{const e=t.classList;return r.getCurrentStates()===xs||P.some((t=>e.contains(t)))};let C=!1,E=!1;a.on("panstart",(t=>{C=!1,!this.scrollable||n||y||(E?E=!1:(S(t.srcEvent.srcElement)&&(C=!0,i.eventEmitter.emit(nt.startScrollingPage,{})),h=0,u=0,m=!1,v=!0,cancelAnimationFrame(g),t.pointers.length>1||this.canScroll&&p(t.deltaX,t.deltaY,t.direction)))})),a.on("panmove",(t=>{C&&S(t.srcEvent.srcElement)?m||!this.scrollable||n||t.pointers.length>1||this.canScroll&&p(t.deltaX,t.deltaY,t.direction):C=!1})),a.on("panend",(r=>{if(!C||!S(r.srcEvent.srcElement))return void(C=!1);if(r.pointers.length>1||!this.scrollable||n)return;C=!1;let o=r.velocityX*(1e3/60),a=r.velocityY*(1e3/60);t&&(o=0),e&&(a=0),f();let c=.8;const l=o<0?-.8:c,d=a<0?-.8:c;v=!1,g=requestAnimationFrame((function t(){const e=Math.abs(o),n=Math.abs(a);e<c&&n<c||v?i.eventEmitter.emit(nt.endScrollingPage,{distanceX:h,distanceY:u}):(g=requestAnimationFrame(t),s(-o,-a),e>=c&&(o-=l),n>=c&&(a-=d),h+=o,u+=a,i.eventEmitter.emit(nt.scrollingPage,{touched:!1,distanceX:h,distanceY:u}))}))})),a.on("pancancel",f);const x=()=>{m=!0,f()};window.addEventListener("touchend",x),window.addEventListener("touchcancel",x),window.addEventListener("mouseup",x);const D=t=>{const e=window[t];return window[t]=(...t)=>{const n=e.apply(window,t);return E=!0,n},()=>{window[t]=e}};this.addDestroyHook(D("alert"),D("confirm"),D("prompt")),this.addDestroyHook((()=>{a.destroy(),g&&cancelAnimationFrame(g),o.removeEventListener("mousedown",w),o.removeEventListener("touchstart",w),o.removeEventListener("mouseup",b),o.removeEventListener("touchend",b),o.removeEventListener("touchcancel",b),window.removeEventListener("touchend",x),window.removeEventListener("mouseup",x),window.removeEventListener("touchcancel",x),window.removeEventListener("mousedown",A,!0),window.removeEventListener("touchstart",A,!0)}))},n.scrollSinglePage=function(t){0!==t&&this.taskExecutor.exec((()=>Promise.resolve().then((()=>{const e=this.pdfViewer.getPDFDocRender().getViewMode();if(e instanceof vo)return t>0?e.jumpToPrevPage():e.jumpToNextPage()}))))},e}(_.Disposable);function Is(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let Rs=R()();const Ts="scroll",Fs=_.LoggerFactory.getLogger("PDFViewerRender");let _s=function(t){function e(n,i,r){var o,s;(s=t.call(this)||this).name=e.getDefaultName(),s.pdfViewer=r,s.ViewMode=i,s.$ui=n;let a=s.scrollWrap=new(s.pdfViewer.customs.ScrollWrap||zo)((0,C.Z)(s)),c=100;(_.isChromiumEdge||_.isChrome||_.isFirefox||_.isSafari)&&(c=30),s.unBindScrollEvent=a.addScrollEventListener((()=>{s.pdfDocRender&&(s.pdfDocRender.isDestroyed||s.pdfDocRender.moveDebounce())}));let l,h="fv__pdf-view-mode-item";n.on(Ts,"."+h,s._scrollPageBind=t=>{clearTimeout(l);let e,n=t.currentTarget;try{if(e=s.pdfDocRender.pagesRender,!e.length)return}catch(t){return}l=setTimeout((function(){let t=n.previousSibling,i=0;for(;t;)t.classList.contains(h)&&i++,t=t.previousSibling;let r=e[i];if(r)try{r.move()}catch(t){}}),c)});s.addDestroyHook((()=>{clearTimeout(l)})),n.addClass("fv__pdf-viewer").html(Rs),s.$rendering=n.find(".fv__pdf-viewer-rendering"),s.$container=n.find(".fv__pdf-viewer-container"),s.pdfViewerRendering=new(r.customs.PDFViewerRendering||T)(s.$rendering[0],(0,C.Z)(s)),(s.handler=new(r.customs.PDFViewerHandler||Ri)(n.find(".fv__pdf-viewer-handler-container"),(0,C.Z)(s))).active(),s.oldPdfDocRenders=[],s.touchToScrollViewer=new Ds(r,a.getScrollHost());const u=r.getKeyboard();let d;const f=t=>{const e=s.pdfDocRender;if(!e)return;const n=e.getViewMode();if(d=n.getShortcutEventHandler(),!d)return;d.onKeyPressed(t)&&t.native.preventDefault()},p={interceptors:[(t,e)=>{if("input"==t.native.target.tagName.toLowerCase())return;0===r.getAllActiveElements().length&&e(t)}]},g=t=>{if(d){d.onKeyReleased(t)&&t.native.preventDefault(),d=void 0}},m=[Ir.ARROW_UP,Ir.ARROW_DOWN,Ir.JUMP_TO_FIRST_PAGE,Ir.JUMP_TO_LAST_PAGE,Ir.JUMP_TO_NEXT_PAGE,Ir.JUMP_TO_PREVIOUS_PAGE,Ir.SCROLL_TO_NEXT_VISIBLE_AREA,Ir.SCROLL_TO_PREVIOUS_VISIBLE_AREA,Ir.SCROLL_VIEWER_SCROLLBAR_LEFT,Ir.SCROLL_VIEWER_SCROLLBAR_RIGHT,Ir.SCROLL_VIEWER_SCROLLBAR_UP,Ir.SCROLL_VIEWER_SCROLLBAR_DOWN];(o=s).addDestroyHook.apply(o,Is(w.Z,m.map((t=>u.keydown(t,f,p)))).concat(Is(w.Z,m.map((t=>u.keyup(t,g,p)))))),s.allowScrollOnMouseWheel=!0;const v=s.scrollWrap.getScrollHost();v.hasAttribute&&!v.hasAttribute("tabIndex")&&v.setAttribute("tabIndex",-1);const y=t=>{s.allowScrollOnMouseWheel||t.preventDefault()};return v.addEventListener("wheel",y),s.addDestroyHook((()=>{v.removeEventListener("wheel",y)})),s}(0,E.Z)(e,t),e.getDefaultName=function(){return"pdfViewerRender"};var n=e.prototype;return n.setAllowScrollOnMouseWheel=function(t=!0){this.allowScrollOnMouseWheel=t},n.setViewMode=function(t){if(t!==this.ViewMode){let e=this.ViewMode;this.ViewMode=t;const n=this.pdfDocRender;if(n){this.pdfViewer.eventEmitter.emit(nt.startChangeViewMode,t,e);const i=n.getViewMode(),r=i?i.getVisibleIndexes():[];return n.setViewMode(t).then((()=>{if(n.isDestroyed)return;const i=n.getViewMode();this.pdfViewer.eventEmitter.emit(nt.changeViewModeSuccess,t,e,i);let o=n.pagesRender;if(o){const t=i&&i.docRender?i.getVisibleIndexes():[];if(!function(t,e){if(t.length!==e.length)return!1;return!t.some((t=>-1===e.indexOf(t)))}(r,t))return o.renderVisiblePages()}}),(i=>{this.ViewMode=e,this.pdfViewer.eventEmitter.emit(nt.changeViewModeFailed,t,e,n.getViewMode(),i),Fs.warn("change view mode fail",i)}))}}return Promise.resolve()},n.getViewMode=function(){return this.ViewMode},n.rendering=function(){this.$ui.addClass("fv__view-rendering"),this.pdfViewerRendering.rendering()},n.rendered=function(){this.$ui.removeClass("fv__view-rendering"),this.pdfViewerRendering.rendered()},n.renderDoc=function(t,e=this.pdfViewer.config.defaultScale,n=0){let i=new qo(this.$container,t,this);return this.pdfDocRender=i,this.oldPdfDocRenders.push(i),this.rendered(),i.render(e,n)},n.rotateTo=function(t,e={}){return(0,_.assertThat)((0,_.isValidRotationAngle)(t),`Incorrect rotation degree: ${t}`),this.pdfDocRender?this.pdfDocRender.rotateTo(t,e):Promise.reject(new Error("Cannot perform rotation without document opening!"))},n.getRotation=function(){return this.pdfDocRender?this.pdfDocRender.getRotation():0},n.closeOldDocRender=function(t){let e=[],n=this.oldPdfDocRenders;for(let r=n.length;r--;)e[r]=((i=n[r]).hidden(),i.destroy(t)),this.pdfDocRender==n[r]&&(this.pdfDocRender=null),n.splice(r,1);var i;return Promise.all(e)},n.bindEvent=function(){},n.zoomTo=function(t,e){if(!this.pdfDocRender)return Promise.reject(new Error("doc renderer has not been initialized!"));"number"==typeof t&&(t<this.pdfViewer.config.minScale&&(t=this.pdfViewer.config.minScale),t>this.pdfViewer.config.maxScale&&(t=this.pdfViewer.config.maxScale));try{return this.pdfDocRender.zoomTo(t,e)}catch(t){return Promise.reject(t)}},n.goToPage=function(t,e,n=0,i=!0){return this.pdfDocRender.goToPage(t,{x:n,y:e},i)},n.zoomAt=async function(t=this.scale,e={x:0,y:0}){if(!this.pdfDocRender)throw new Error("No PDF files are currently open");if(!e)return this.zoomTo(t);if(!(0,_.isValidNumber)(e.x))throw new TypeError(`fixedPoint.x: ${e.x} is not a valid number`);if(!(0,_.isValidNumber)(e.y))throw new TypeError(`fixedPoint.y: ${e.y} is not a valid number`);let n=this.getPageIndexByClientPosition(e.x,e.y);-1===n&&(n=e.pageIndex);const i=this.pdfDocRender.doc.getPageCount();if(!(0,_.isNumberInRange)(n,0,i,!0,!1))return this.zoomTo(t);const r=this.pdfDocRender.getPDFPageRender(n),o=r.scale,s=this.getViewBoxRect(),a=await r.transformPoint({point:{x:e.x,y:e.y},srcType:to.viewport,destType:to.page}),c=t/o,l=a.x*c,h=a.y*c,u={type:"device",x:l-(e.x-s.left),y:h-(e.y-s.top),pageIndex:n,offsetY:0};return this.zoomTo(t,u)},n.getPageIndexByClientPosition=function(t,e){let n=-1;if(!this.pdfDocRender)return n;return document.elementsFromPoint(t,e).some((t=>{if(t.classList.contains("fv__pdf-page-layout")){const e=+t.getAttribute("data-index"),i=this.pdfDocRender.getPDFPageRender(e);if(i&&i.$ui[0]===t)return n=e,!0}return!1})),n},n.setLayerNodeVisible=function(t,e){return this.pdfDocRender?this.pdfDocRender.setLayerNodeVisible(t,e):Promise.reject(new Error("doc renderer has not been initialized!"))},n.getScaleRatio=function(){return this.pdfDocRender?this.pdfDocRender.getScaleRatio():Promise.reject(new Error("doc renderer has not been initialized!"))},n.disableDragToScroll=function(){this.touchToScrollViewer.disable()},n.enableDragToScroll=function(){this.touchToScrollViewer.enable()},n.getViewBoxRect=function(){const t=this.scrollWrap.getScrollHost();if(t===window)return{left:0,top:0,right:window.innerWidth,height:window.innerHeight};{const e=t.getBoundingClientRect();return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}},n.destroy=function(){t.prototype.destroy.call(this),this.scrollWrap.destroy(),this.touchToScrollViewer.destroy(),this.pdfDocRender&&this.closeOldDocRender(),this.unBindScrollEvent(),this.$ui.off(Ts)},e}(_.Disposable);var ks=_s,Ms=m(1543),Os=m.n(Ms),Ls=m(9903),Ns=m.n(Ls),Bs=m(1821),Vs=m.n(Bs),Us=m(1416),Hs=m.n(Us),js={version:"ad511f15ead4a3bb7760cce236d5d0be",versions:{"de-DE":{ui_:"8614d44c123afab8d4420aa93d8d5660",viewer_:"72fdc3ad3ff989464a9ecfc85ebc1e7a"},"en-US":{ui_:"c112cfbd6c5d92a5a5c6e7805c4ca361",viewer_:"12386b833386a3804af6ff60619d9f72"},"es-419":{ui_:"92d4e336755cddfb5799d3eb43c0598f",viewer_:"c94b7206ef44a2be4bf303585264db60"},"fr-FR":{ui_:"6e53b384e4dd542789a48d695880a2d2",viewer_:"0a0073d1189a4ef4bf2117a70eb25969"},"it-IT":{ui_:"efbd9e8758213baba148e57338ca91c5",viewer_:"255af51f8e8eef27208d559a0fdebbb7"},"ja-JP":{ui_:"d5715b7201795857c6125f6249e6b53b",viewer_:"213eb95637f3c2cff29b2b32d4d1e71c"},"ko-KR":{ui_:"a5af7622dfadf5550f7feace7677f6c6",viewer_:"b4607a5e0b2b475343259f14847c0e0a"},"nl-NL":{ui_:"09f00a3806e17e0ab8bc6c893b931ec7",viewer_:"8a007cd557b2fc367d6433e08f40d7b0"},"zh-CN":{ui_:"5ebe353145ee7630e1b0751f0049967f",viewer_:"094e8f51cb5814191ac40df0443e473f"},"zh-TW":{ui_:"ee2d4fa6da44cb40630534cf5105ead4",viewer_:"e850a305a00f8b4c483660936c45eadb"}},languageVersions:{"de-DE":"3c7268b826ccf79dff603947862299fd","en-US":"203817993e061a52bde1a077cf4385bb","es-419":"3597e4b9a02037688a306ee5e4777bcb","fr-FR":"6688f26b8699dca27800260f52445465","it-IT":"ab1d2f6963b5615302dc5f50ca622207","ja-JP":"2daa28caf6b86c1e67e10c20a6e152e6","ko-KR":"e0c19f3cc1aa9b1d3dd9e3da98c9a3c9","nl-NL":"bc8b37ee08b5a8e882128d059c9f1093","zh-CN":"44cb1071113b614881e750de208f6cab","zh-TW":"f59d530948299b2c0e476ebd6177e871"}};function $s(t,e){let n=Ws(t);return{loadPath:function(t,i){let r;try{r=n.versions[t.join(" ")][i.join(" ")]}catch(t){r=n.version}return e+"/{{lng}}/{{ns}}.json?v="+r}}}function Ws(t={}){return y({},js,t)}var Ys=function(t){var e,n=Os().createInstance();return n.use(Ns()).init(y({},{load:"currentOnly",fallbackLng:"en-US",backend:{backends:[Vs(),Hs()],backendOptions:t.backendOptions||[(e=t.version,{prefix:"foxit_pdf_sdk_for_web_i18next_",expirationTime:6048e6,versions:Ws(e).versions}),$s(t.version,t.absolutePath)]}},t.initOption)),n};function Gs(t){return new Promise((function(e,n){let i=new XMLHttpRequest;i.open("GET",t),i.responseType="arraybuffer",i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300||304===i.status?e(i.response):n(new Error("Could not load image!")))},i.onerror=function(){n(new Error("Could not load image!"))},i.send()}))}let Ks=function(){function t(t){this.pdfViewer=t}return t.prototype.getPassword=function(){let t=(0,_.createDeferred)();return setTimeout((()=>{let e=prompt(this.pdfViewer.i18n.t("viewer_:tip.inputPassword"),"");if(null===e)return t.reject(new Error("User has been cancelled the prompt dialog"));t.resolve(e)}),0),t.promise},t}();var qs=m(8189),zs=m.n(qs);function Js(){if(document.baseURI)return document.baseURI;{const t=document.head.querySelector("base");if(!t)return location.href;const e=t.href,n=location.pathname;return e?/^\w+?:\/+/.test(e)?e:location.origin+na(n,e):location.href}}let Zs="/";function Xs(t){if("string"!=typeof t)throw new Error(`invalid url type: (${typeof t})!`);return 0===(t=t.trim()).indexOf("file:")?new ta(t):new Qs(t)}let Qs=function(){function t(e){const n=t.REGEX.exec(e);if(!n)throw new Error(`Illegal argument: incorrect url: "${e}"`);this.protocol=n[1],this.port=parseInt(n[5]),isNaN(this.port)&&(this.port=""),this.pathname=n[6]||"/",this.pathname=this.pathname.replace(/(\/|\\)+/g,Zs);const[,i]=/(.*[\/\\]+)[^\/\\]+$/.exec(this.pathname)||[this.pathname,this.pathname];this.dirname=i,this.hostname=n[3]||"",this.host=this.hostname+(this.port?":"+this.port:""),this.query=n[7]||"",this.hash=n[8]||""}t.isValid=function(e){return t.REGEX.test(e)};var e=t.prototype;return e.join=function(...e){const n=na.apply(void 0,[this.dirname].concat(e));return new t(`${this.protocol}://${this.host}${n}${this.query}${this.hash}`)},e.absolute=function(t=!0){return t?`${this.protocol}://${this.host}${this.pathname}${this.query}${this.hash}`:`${this.protocol}://${this.host}${this.pathname}`},e.absoluteDir=function(){return`${this.protocol}://${this.host}${this.dirname}`},S(t,null,[{key:"REGEX",get:function(){return/^([a-z]+):\/\/(([\w\-\.:\[\]]+)(:(\d+))?(\/[^?#]*)?(\?[^#]*)?(#.*)?)$/}}]),t}(),ta=function(){function t(e){this.protocol="file";const n=t.REGEX.exec(e);if(!n)throw new Error(`Illegal argument: incorrect URL: "${e}"`);this.path=(n[3]||"").replace(/[\\/]+/g,"/");const[,i]=/(.*[\/\\]+)[^\/\\]+$/.exec(this.path)||[this.path,this.path];this.dir=i,this.disk=n[2],this.disk||("/"===this.path[0]&&(this.path=this.path.slice(1)),this.disk=""),this.hash=n[5]||"",this.query=n[4]||""}t.isValid=function(e){return t.REGEX.test(e)};var e=t.prototype;return e.join=function(...e){const n=na.apply(void 0,[this.dir].concat(e));return new t(`file:///${this.disk}${n}${this.query}${this.hash}`)},e.absolute=function(t=!0){return t?`file:///${this.disk}${this.path}${this.query}${this.hash}`:`file:///${this.disk}${this.path}`},e.absoluteDir=function(){return`file:///${this.disk}${this.dir}`},S(t,null,[{key:"REGEX",get:function(){return/^(file:\/\/\/)([a-z]\:)?(.+?)(\?([^?#]*))?(#([^#]*))?$/i}}]),t}();function ea(t,...e){var n;return(n=Xs(t)).join.apply(n,e).absolute()}function na(...t){const e=t[0];let n;if(e.match(/^\w+?:\/\//)){const i=/^(\w+?:\/\/[^\/]+)(\/?.*)/,r=e.match(i);r&&(n=r[1],t[0]=r[2]||"/")}const i=t.filter((t=>"string"==typeof t&&t.length>0));let r=i.map((t=>t.replace(/[\/\\]+/,"/").split("/").filter(((t,e,n)=>""!==t||0===e)))).reduce(((t,e)=>(e.forEach(((e,n)=>{switch(e){case".":break;case"..":t.pop();break;case"":t=[""];break;default:t.push(e)}})),t)),[]).join("/");return i.length>0&&(/[\/\\\\]/.test(i[0][0])||0===i[0].indexOf(".."))&&"/"!==r[0]&&(r="/"+r),n?n+r:r}function ia(t){return Qs.isValid(t)||ta.isValid(t)}window.createURL=Xs;let ra=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.onKeyPressed=function(t){const e=this.getPDFDocRender(),n=e.viewerRender.scrollWrap,i=n.getWidth(),r=n.getHeight();switch(t.command){case Ir.JUMP_TO_PREVIOUS_PAGE:return this.executor.exec((()=>e.prevPage())),!0;case Ir.JUMP_TO_NEXT_PAGE:return this.executor.exec((()=>e.nextPage())),!0;case Ir.JUMP_TO_LAST_PAGE:const t=this.getPageCount();return e.goToPage(t-1,{x:0,y:0}),!0;case Ir.JUMP_TO_FIRST_PAGE:return e.goToPage(0),!0;case Ir.SCROLL_VIEWER_SCROLLBAR_LEFT:return n.scrollBy(-i,0,"smooth"),!0;case Ir.SCROLL_VIEWER_SCROLLBAR_RIGHT:return n.scrollBy(i,0,"smooth"),!0;case Ir.SCROLL_VIEWER_SCROLLBAR_UP:return n.scrollBy(0,-r,"smooth"),!0;case Ir.SCROLL_VIEWER_SCROLLBAR_DOWN:return n.scrollBy(0,r,"smooth"),!0}return!1},e}(ao),oa=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e}(ra);function sa(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let aa=function(t){function e(e){var n;return(n=t.call(this,e)||this).scrollCurrentPageIntoView_debounced=(0,_.debounce)((()=>{n.docRender&&n.scrollCurrentPageIntoView()}),20),n}(0,E.Z)(e,t),e.getName=function(){return"continuous-view-mode"};var n=e.prototype;return n.into=function(n,i){t.prototype.into.call(this,n,i),this.updatePageDOMs(i),this.docRender.$container.addClass(e.getName());let r=this.docRender.viewerRender.scrollWrap;this._triggerScrollCount=0,this._unwatchScrollEvent=r.addScrollEventListener((t=>{t.isTrusted&&this._triggerScrollCount++,this._triggerScrollCount>2&&delete this.lastJumpPageIndex})),this.onPageNumberChange=()=>{this.scrollCurrentPageIntoView_debounced()},this.docRender.pdfViewer.eventEmitter.on(nt.pageNumberChange,this.onPageNumberChange)},n.updatePageDOMs=function(e){t.prototype.updatePageDOMs.call(this,e),_.Lazy.property(this,"pageElements",(()=>e.map((t=>t.querySelector(".fv__pdf-page-layout")))))},n.getDocLayoutWidth=function(){let{pageCache:t}=this.docRender.doc,e=0;return t.forEach((t=>{e=Math.max(t.getPxWidth(),e)})),e},n.getFitHeight=function(t){return this.docRender.viewerRender.scrollWrap.getHeight()},n.getFitWidth=function(t){let e=this.docRender.viewerRender.scrollWrap;const n=getComputedStyle(this.pageDOMs[t]);return e.getWidth()-ho(n.marginLeft)-ho(n.marginRight)},n.jumpToPage=function(t,{x:e=0,y:n=0}){this.lastJumpPageIndex=t;let i=this.getItems();t>=i.length?t=i.length-1:t<0&&(t=0);let r=i[t];const o=this.docRender.viewerRender.scrollWrap.getOffsetOfPageElement(r);let s=o.left+e,a=o.top+n;if("fitVisible"===this.docRender.scale){const t=r.offsetWidth,e=this.docRender.viewerRender.scrollWrap.getWidth();t>e&&(s=(t-e)/2)}this._triggerScrollCount=0;const c=r.firstElementChild;this.docRender.viewerRender.scrollWrap.scrollTo(s+c.offsetLeft,a)},n.out=function(){this.docRender&&this.docRender.$container.removeClass(e.getName()),this._triggerScrollCount=0,this._unwatchScrollEvent&&this._unwatchScrollEvent(),this.docRender.pdfViewer.eventEmitter.off(nt.pageNumberChange,this.onPageNumberChange),t.prototype.out.call(this)},n.getCurrentPageIndex=function(){if(!isNaN(this.lastJumpPageIndex))return this.lastJumpPageIndex;if(!this.pageDOMs.length)return 0;const t=this.docRender.getContainerVisibleRect(),e=this.getVisibleIndexes();if(e.length){const n=this.pageDOMs,i=e.map((e=>{const i=n[e].getBoundingClientRect();return Math.round(i.right-i.left-Math.max(t.left-i.left,0)-Math.max(i.right-t.right,0))*Math.round(i.bottom-i.top-Math.max(t.top-i.top,0)-Math.max(i.bottom-t.bottom,0))})),r=Math.max.apply(Math,sa(w.Z,i));return e[i.indexOf(r)]}let n,i=this.getItems(),r=this.docRender.viewerRender.scrollWrap.getScrollHost();n=r===window?{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}:r.getBoundingClientRect();const o=n.left+(n.right-n.left)/2,s=n.top+(n.bottom-n.top)/2,a=this.pageElements;let c=this.lastJumpPageIndex;if(void 0!==c){let t=a[c];if(t){let e=t.getBoundingClientRect();if(e.left<o&&e.right>=o){if(this.getVisibleIndexes().length>2&&e.top<n.bottom&&e.bottom>n.top)return c;const i=getComputedStyle(t.parentElement);let r=parseInt(i.marginTop)||0;if(e.top-r<s&&e.bottom>=s)return c;if(e.top>=n.bottom&&e.bottom<=n.top)return c}}}for(let t=0;t<i.length;t++){if(!a[t])continue;let e=a[t].getBoundingClientRect();if(e&&(e.left<o&&e.right>=o)){const i=getComputedStyle(a[t].parentElement);let r=parseInt(i.marginTop)||0;if(e.top-r<s&&e.bottom>=s)return this.lastJumpPageIndex=t,t;if(e.top>=n.bottom&&e.bottom<=n.top)return this.lastJumpPageIndex=t,t}}return 0},n.getNextPageIndex=function(){const t=this.docRender.doc.getPageCount();let e=this.getCurrentPageIndex();return e<t-1&&e++,e},n.getPrevPageIndex=function(){let t=this.getCurrentPageIndex();return t>0&&t--,t},n.generateShortcutEventHandler=function(){return new oa(this)},n.scrollCurrentPageIntoView=function(){if(!this.docRender)return;const t=this.docRender.getCurrentPageIndex(),e=this.docRender.getPDFPageRender(t);e&&!e.pageAreaIsVisible&&e.$ui.get(0).scrollIntoViewIfNeeded(!0)},e}(lo);var ca=aa;var la=function(){function t(t){this.ViewModes={},this.pdfViewer=t,this.register(ca),this.register(vo)}var e=t.prototype;return e.register=function(t){return this.ViewModes[t.getName()]=t},e.get=function(t=ca.getName()){return this.ViewModes[t]||ca},e.set=function(t){const e=this.get(t);let n=this.currentViewMode;this.currentViewMode=e,this.pdfViewer.eventEmitter.emit(nt.startChangeViewMode,e,n);const i=this.pdfViewer.pdfViewerRender;if(i){i.ViewMode=e;const t=i.pdfDocRender;if(t){const i=t.pagesRender;i&&(i.viewMode=new e(t),this.pdfViewer.eventEmitter.emit(nt.changeViewModeSuccess,e,n,i.viewMode))}}},e.switchTo=function(t){let e=this.currentViewMode,n=this.get(t);if(e===n)return;this.currentViewMode=n;let i=this.pdfViewer,r=i.pdfViewerRender;return r?(i.activeElement(null),r.setViewMode(n)):void 0},e.getCurrentViewMode=function(){return this.currentViewMode||ca},e.getAll=function(){return this.ViewModes},t}();let ha="annotComponent",ua={reply:{name:"reply",nameI18nKey:"viewer_:contextmenu.annot.reply",callback:function(){this.data(ha).showReplyDialog("reply")},disabled:function(){return this.data(ha).replyDisabled()}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n,i){this.data(ha).showPropertiesDialog(t,e,n,i)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data(ha).removeAnnot()},disabled:function(){return this.data(ha).deleteDisabled()}}};function da(t=".fv__pdf-page-annot-handler-rect"){return{selector:t,items:ua,events:{show:function(){return this.data(ha).updateDeleteStatus(!0),!0},hide:function(){return this.data(ha).updateDeleteStatus(!1),!0}}}}var fa=m(8717),pa=m.n(fa),ga=m(5100),ma=m.n(ga);let va=function(){function t(t,e,n){this.viewerComponent=t;let i=this.viewerComponent.getModel();n=n||this.viewerComponent.getPropertyOptions();let r=ma()(n);e&&e!==document.body||(r=`<dialog class="fv__dialog fv__annot-properties-dialog">${r}</dialog>`);let o=D()(r);this.$propertiesDialog=o,this.$fillColor=o.find("#fillcolor-input"),this.$txThickness=o.find("#thickness-input-tx"),this.updateBorderInfo(i,n),this.bindChangeEvent();let s=e||document.body;if(o.appendTo(s),!e||e===document.body){let t=o[0];pa().registerDialog(t),t.showModal()}}var e=t.prototype;return e.toggle=function(t=!1){t?this.$propertiesDialog.find("input,select").removeAttr("disabled"):this.$propertiesDialog.find("input,select").attr("disabled","true")},e.updateBorderInfo=function(t,e){let n=this.$propertiesDialog;if(e.lineEndStyle&&n.find("#endstyle-select [value="+t.getEndingStyle()+"]").attr("selected",!0),e.lineStartStyle)if("freetext"===t.getType())n.find("#startstyle-select [value="+t.getCalloutLineEndingStyle()+"]").attr("selected",!0);else n.find("#startstyle-select [value="+t.getStartStyle()+"]").attr("selected",!0);if(void 0!==e.highlightingMode&&n.find("#highlighting-select [value="+t.getHighlightingMode()+"]").attr("selected",!0),void 0!==e.rotation&&n.find("#rotation-select [value="+t.getRotation()+"]").attr("selected",!0),!1===e.borderStyle)return;let i=t.getBorderDashes();if(1==t.getBorderStyle()&&i.length>0){let t=Math.max.apply(Math,i),e=Math.min.apply(Math,i);e==t?e>3?n.find("#borderStyle-select [value=3]").attr("selected",!0):e>2?n.find("#borderStyle-select [value=2]").attr("selected",!0):e<2||2==e?n.find("#borderStyle-select [value=1]").attr("selected",!0):n.find("#borderStyle-select [value=3]").attr("selected",!0):t>8?n.find("#borderStyle-select [value=6]").attr("selected",!0):t>4?n.find("#borderStyle-select [value=5]").attr("selected",!0):n.find("#borderStyle-select [value=4]").attr("selected",!0)}else if(t.getBorderStyle()==st.BORDER_STYLE.CLOUDY){switch(t.getCloudIntensity()){case 1:n.find("#borderStyle-select [value=7]").attr("selected",!0);break;case 2:n.find("#borderStyle-select [value=8]").attr("selected",!0)}}},e.bindChangeEvent=function(){this.$propertiesDialog.on("click",".fv__btn-close",(()=>{this.viewerComponent.hidePropertiesDialog?this.viewerComponent.hidePropertiesDialog():this.close()})).on("change","#color-input",(t=>{let e=t.target;const n=parseInt(e.value.replace("#",""),16);this.viewerComponent.setColor(n)})).on("change","#opacity-input",(t=>{let e=t.target.value;this.viewerComponent.setOpacity(+e)})).on("change","#thickness-input",(t=>n("#thickness-input","#thickness-input-tx"))).on("blur","#thickness-input",(t=>n("#thickness-input","#thickness-input-tx"))).on("blur","#thickness-input-tx",(t=>n("#thickness-input-tx","#thickness-input"))).on("change","#thickness-input-tx",(t=>n("#thickness-input-tx","#thickness-input"))).on("change","#borderStyle-select",(t=>{let e=t.target.value,n=st.BORDER_STYLE.DASHED;switch(e){case"0":e=[],n=st.BORDER_STYLE.SOLID;break;case"1":e=[2,2,2,2];break;case"2":e=[3,3,3,3];break;case"3":e=[4,4,4,4];break;case"4":e=[4,3,2,3];break;case"5":e=[8,4,4,4];break;case"6":e=[4,3,16,3];break;case"7":e=1,n=st.BORDER_STYLE.CLOUDY;break;case"8":e=2,n=st.BORDER_STYLE.CLOUDY}this.viewerComponent.setBorderStyle(n,e)})).on("change","#fillcolor-input",(t=>{let e=t.target;const n=parseInt(e.value.replace("#",""),16);this.viewerComponent.setFillColor(n)})).on("change","#fillColor-transparent-input",(t=>{t.target.checked?(this.$fillColor.val("#ffffff"),this.$fillColor.attr("disabled",!0),this.viewerComponent.setFillColor(0)):this.$fillColor.removeAttr("disabled")})).on("change","#startstyle-select",(t=>{let e=t.target.value;this.viewerComponent.setEndingStyle(!0,e)})).on("change","#endstyle-select",(t=>{let e=t.target.value;this.viewerComponent.setEndingStyle(!1,e)})).on("change","#hasCap-input",(t=>{let e=t.target.checked;this.viewerComponent.enableCaption(e)})).on("change","#highlighting-select",(t=>{let e=t.target.value;this.viewerComponent.setHighlightingMode(e)})).on("change","#rotation-select",(t=>{let e=t.target.value;this.viewerComponent.setRotation(90*+e)}));let t=this,e=!1;function n(n,i){if(e)return;e=!0;let r=t.$propertiesDialog,o=r.find(n).val();t.viewerComponent.getModel().getBorderWidth()!=o?(t.viewerComponent.setBorderWidth(+o),e=!1,r.find(i).val(o)):e=!1}},e.close=function(){let t=this.$propertiesDialog;t&&(t[0].close(),t.remove(),this.$propertiesDialog=null)},t}();var ya=m(6912),wa=m.n(ya),ba=m(4252),Aa=m.n(ba),Pa=m(4210),Sa=m.n(Pa);let Ca=function(){function t(t){this.component=t,this.prepared=!1}var e=t.prototype;return e.prepare=function(){this.prepared||(this.prepared=!0,this.doPrepare())},e.doPrepare=function(){},e.show=function(){this.prepared&&this.doShow()},e.doShow=function(){},e.hide=function(){this.prepared&&this.doHide()},e.doHide=function(){},e.destroy=function(){this.component=null,this.prepared=!1},e.willRender=function(){},e.afterRender=function(){},e.render=function(t,e,n){return this.prepared||this.prepare(),this.doRender(t,e,n)},e.doRender=function(t,e){return Promise.resolve()},e.numberToRGBAString=function(t){const e=(0,_.convertFromNumberToRGBA)(t);return`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`},e.invisibleRender=function(){},t}();function Ea(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let xa=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.prepare=function(){const t=this.component,e=t.annot;this.tileCanvas=this.tileCanvas||new xi(((n,i,r,o,s,a,c,l,h)=>t.isDestroyed?Promise.resolve():t.getPDFPage().getAnnotBitmap(e.getId(),V(a),h,{x:c*a+i*s,y:l*a+n*s,width:r,height:o},!0,t.renderAppearanceType,this.component.getAnnotFlag().flag)),t.$ui)},n.doHide=function(){this.tileCanvas.hideContainer()},n.doShow=function(){this.tileCanvas.showContainer()},n.doRender=function(t,e,n){this.tileCanvas.setVisibleRect(n);let i=!0;if(n){let t=this.component.getRect(),e={left:Math.max(t.left,n.left),top:Math.max(t.top,n.top),right:Math.min(t.right,n.right),bottom:Math.min(t.bottom,n.bottom)};i=e.right>=e.left&&e.bottom>=e.top}const r=this.component.getTileConfig(t,e);var o,s;return i?(o=this.tileCanvas).redraw.apply(o,Ea(w.Z,r)).then((t=>{if(!this.component.isDestroyed)return this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent()?(this.tileCanvas.clearCanvasContent(),Promise.resolve()):Promise.resolve()})):((s=this.tileCanvas).updateDom.apply(s,Ea(w.Z,r)),this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent()?(this.tileCanvas.clearCanvasContent(),Promise.resolve()):Promise.resolve())},n.willRender=function(){this.tileCanvas.$container.get(0).style.willChange="left, top, width, height"},n.afterRender=function(){this.tileCanvas.$container.get(0).style.willChange="auto"},n.destroy=function(){this.prepared&&(t.prototype.destroy.call(this),this.tileCanvas.destroy(),this.tileCanvas=null)},n.clearCache=function(){this.tileCanvas.clearCache()},n.invisibleRender=function(){try{this.tileCanvas.invisibleRender()}catch(t){}},e}(Ca);function Da(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const Ia=ha;let Ra=da(".fv__pdf-page-annot-handler-rect");const Ta="px";let Fa,_a=function(t){function e(e,n,i,r){var o;(o=t.call(this,e,n,i,r)||this).name="markup",o.eUi=n,o.$ui.addClass("pdf-page-markup-annot-container"),o.$handler.addClass("pdf-page-markup-annot-handler-container"),o.apRenderer=o.generateApRenderer();let s=o.pdfViewer.i18n;const a=Ur().i18n=function(t){return s.t(t)};o.addDestroyHook((()=>{Ur().i18n===a&&(Ur().i18n=void 0)})),o.currentRenderDefer=(0,_.createDeferred)(),o.currentRenderDefer.isPending=!0,_.Lazy.property((0,C.Z)(o),"contextMenu",(()=>{if(o.contextMenuIsEnable())return o.pdfViewer.viewerUI.createContextMenu((0,C.Z)(o),i,o.getContextMenuConfig())}));const c=o.pdfViewer.getAnnotAuthorityManager();o.addDestroyHook(c.subscribe(o.annot,(t=>{o.updateOnPermissionChange(t)})));const l=o.pdfViewer.eventEmitter,h=()=>{o.isDestroyed||o.annot.isDestroyed||c.getPermission(o.annot).then((t=>{o.updateOnPermissionChange(t)}))};l.on(nt.permissionChanged,h),o.addDestroyHook((()=>{l.off(nt.permissionChanged,h)}));const u=_.Lazy.onInitialized((0,C.Z)(o),"shapeControl",(t=>{t.ui.addEventListener("click",(t=>{o.isActive&&t.isTrusted&&0===t.button&&!t.shiftKey&&t.ctrlKey&&o.unActive()})),t.ownsTo&&t.ownsTo(o.disposor)}));return o.addDestroyHook(u),o.addDestroyHook(o.pdfViewer.getCustomOptionsUpdater().onGetAnnotComponentConfigUpdated((()=>{if(!_.Lazy.hasProperty((0,C.Z)(o),"shapeControl"))return;if(!_.Lazy.isPropertyIntialized((0,C.Z)(o),"shapeControl"))return;const t=o.shapeControl.isActive,e=o.shapeControl;_.Lazy.reset((0,C.Z)(o),"shapeControl"),t&&o._applyShapeChange(),e.destroy()}))),o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return Ra},e.setContextMenuConfig=function(t){Fa=t};var n=e.prototype;return n.getInnerRect=function(){return{left:0,right:0,top:0,bottom:0}},n.getModifiedRect=function(t,e){const n={left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},i=Vo.on(n).extract();let r=i.left,o=i.top,s=i.right,a=i.bottom;const c=this.scale,l=this.rotate;return this.getPDFPage().reverseDeviceRect({left:r,top:o,right:s,bottom:a},c,l)},n.updateCollabOp=function(t,e=!1){0},n.updateOnPermissionChange=function(t){if(this.isDestroyed)return;if(!_.Lazy.isPropertyIntialized(this,"shapeControl"))return;let e=!1;e=!!this.groupMoveDisabled()||(t.ignorable()?this.moveDisabled():this.moveDisabled()||!t.isAdjustable());const n=this.shapeControl;e?n.disable():n.enable()},n.isHTMLSimulate=function(t){return"canvas"===this.pdfViewer.config.annotRenderingMode[t||this.name]},n.generateApRenderer=function(){return new xa(this)},n.getRenderPromise=function(){return this.currentRenderDefer.promise},n.getTileConfig=function(t,e){let n=this.pdfViewer,i=n.getSmartScale(t),r=n.config.tileSize,o=this.annot,s=o.getDeviceRect(1,e),a=o.getDeviceRect(i,e),c=a.right-a.left,l=a.bottom-a.top;this.getAnnotFlag().checkNoZoom()&&(c=s.right-s.left,l=s.bottom-s.top);let h=Math.ceil(l/r),u=Math.ceil(c/r);return l+=1,c+=1,[h,u,c,l,r,i,t,e,s.left,s.top]},n.render=function(e=this.scale,n=this.rotate){let i=this.annot,r=this.getAnnotFlag();return this.scale=e,this.rotate=n,this.currentRenderDefer.isPending||(this.currentRenderDefer=(0,_.createDeferred)()),r.checkNoView()&&!r.checkToggleNoView()||r.checkHidden()||i.isEmpty()||i.isDeleted()||i.rectIsEmpty()?(this.$ui.addClass("fv__markup-annot-invisible"),this.currentRenderDefer.resolve(),Promise.resolve()):(this.$ui.removeClass(["fv__annot-flags-nozoom","fv__markup-annot-invisible"]),this.apRenderer.render(e,n,this.visibleRect).then((()=>{if(this.isDestroyed)return;if(r.checkNoZoom()||"text"===i.getType()){let t,e;this.$ui.addClass("fv__annot-flags-nozoom"),t=this.annot.getRect(),e=t.top-t.bottom;let n=t.right-t.left,i="px";this.$ui.css({width:n+i,height:e+i}).find(".fv__tiles-canvas").css({width:"auto",height:"auto"})}let t=i.getPopup();t&&t.getOpenStatus&&t.getOpenStatus()?this.showPopup():this.hidePopup()})).finally((()=>{this.currentRenderDefer.resolve(),t.prototype.afterRender.call(this)})))},n.afterRender=function({transformed:t}){t&&this.isActive&&this.active()},n.redraw=function(t){if(this.activeRect(),t&&this.apRenderer)try{this.apRenderer.clearCache()}catch(t){}return this.render()},n.active=function(){t.prototype.active.call(this),this.$handler.addClass("active")},n.activeMore=function(t,e){},n.activeMoreItem=function(){},n.unActive=function(){if(this.isActive){let e=this.pdfViewer;e.unActiveElement(this),t.prototype.unActive.call(this),e.eventEmitter.emit(nt.unActiveAnnotation,this),this.$handler.removeClass("active"),this.getGroupRenders().map((t=>{t.component!=this&&t.component.unActive()}))}},n.unActiveMore=function(){},n.renderDestroy=function(){this.apRenderer.destry(),this.$handler.remove()},n.showReplyDialog=function(t="comment"){this.updateDeleteStatus(!0);let e=this.annot,n={},i=e.getGroupHeader()||e,r=n.content=i.getContent(),o=n.replies=[];this.iterationGetRepliesInfo(i,o);let s=o.length,a=wa()(n),c=D()(a);this.$replyDialog=c;let l=c[0],h=c.find(".fv__btn-reply")[0],u=c.find(".reply-textarea")[0],d=!1;this.replyDisabled()?(c.find(".fv__btn-reply").addClass("fv__btn-replay-disabled"),c.find(".content-textarea").prop({disabled:!0}),c.find(".reply-textarea").prop({disabled:!0})):(c.find(".fv__btn-reply").removeClass("fv__btn-replay-disabled"),c.find(".content-textarea").prop({disabled:!1}),c.find(".reply-textarea").prop({disabled:!1})),c.on("click",".fv__btn-close",(()=>{this.hideReplyDialog()})).on("change",".content-textarea",(t=>{let e=t.target,n=e.value;this.setContent(n).then((t=>{if(t)return r=n;e.value=r}))})).on("input",".reply-textarea",(t=>{h.disabled=!u.value})).on("click",".fv__btn-reply",(t=>{if(this.replyDisabled())return;if(d)return;h.disabled=!0,d=!0;let e=u.value;this.addReply(e).then((t=>{let e={content:t.getContent()},n=e.replies=[];this.iterationGetRepliesInfo(t,n),s?c.find(".fv__replies_list").first().append(Sa()(e)):c.find(".fv__dialog-replies-block").first().html(Aa()([e])),s=!0,u.value="",h.disabled=!1,d=!1}),(()=>{h.disabled=!1}))})),c.appendTo(document.body),pa().registerDialog(l),l.showModal()},n.hideReplyDialog=function(){let t=this.$replyDialog;t&&(t[0].close(),t.remove(),this.$replyDialog=null),this.updateDeleteStatus(!1)},n.addReply=function(t){return this.annot.addReply(t).then((t=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t)))},n.showContextMenu=function(t,e){return!!this.contextMenu&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},n.hideContextMenu=function(){},n.getPropertyOptions=function(){let t=this.annot;return{color:(0,_.colorConvertor)(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderStyle:!1,disabled:this.propertyDisabled(),isLocked:this.isLocked()}},n.showPropertiesDialog=function(){this.$propertiesControl=new va(this),this.updateDeleteStatus(!0)},n.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close(),this.bindEvent(),this.updateDeleteStatus(!1)},n.updateRender=function(){return Promise.resolve()},n.setContent=function(t){return this.annot.setContent(t).then((t=>(t&&this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t)))},n.setColor=function(t){return this.annot.setBorderColor(t)},n.setOpacity=function(t){return t==this.annot.getOpacity()?Promise.resolve(!0):this.annot.setOpacity(t).then((t=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t)))},n.destroy=function(){t.prototype.destroy.call(this),this.hidePopup(),this.hidePropertiesDialog(),this.unBindEvent(),this.$propertiesControl=null,this.hideReplyDialog(),_.Lazy.isPropertyIntialized(this,"contextMenu")&&this.contextMenu&&this.contextMenu.destroy(),this.blankHammar&&this.blankHammar.destroy(),this.pdfViewer.deactivateElement(this),this.unActiveMore(),this.apRenderer.destroy(),this.eUi&&this.eUi.removeEventListener("mouseenter",this.annotTooltipMouseover),this.eUi=null,this.tooltip=null},n.remove=function(){this.destroy()},n.iterationGetRepliesInfo=function(t,e){let n=t.getReplies();for(let t=0,i=n.length;t<i;t++){let i=n[t];if(i.isDeleted())continue;let r={content:i.getContent(),replies:[]};this.iterationGetRepliesInfo(i,r.replies),e.push(r)}},n.removeAnnot=function(){return this.getAppPermission().then((t=>t.ignorable()&&this.deleteDisabled()?Promise.resolve():t.isDeletable()&&!this.deleteDisabled()?this.doRemoveAnnot():void 0)).then((t=>{const e=this.pdfViewer.getCurrentActivatable();return e&&e.remove&&e.remove(this),t}))},n.doRemoveAnnot=function(){let t=this.pdfViewer,e=t.eventEmitter,n=this.annot;return Promise.resolve((t.customs.removeAnnotBefore||_.noop)(this)).then((t=>{if(e.emit(nt.removeActionAnnotationBefore,this),!1!==t)return n.getPDFPage().removeAnnot(n).then((t=>(e.emit(nt[t?"removeActionAnnotationSuccess":"removeActionAnnotationFailed"],this,n),t)),(()=>{e.emit(nt.removeActionAnnotationFailed,this)}))}))},n.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},n.willRedraw=function(){t.prototype.willRedraw.call(this),this.apRenderer.willRender(),(this.$rect=this.$rect||this.rectInit()).get(0).willChange="left, top, width, height"},n.afterRedraw=function(){t.prototype.afterRedraw.call(this),this.apRenderer.afterRender(),(this.$rect=this.$rect||this.rectInit()).get(0).willChange="auto"},n.activeRect=function(t=this.annot){let e=this.$rect=this.$rect||this.rectInit(),n=this.scale,i=this.rotate,r=t.getDeviceRect(n,i);e.css({left:r.left+Ta,top:r.top+Ta,width:r.right-r.left+Ta,height:r.bottom-r.top+Ta})},n._applyShapeChange=function(){},n.rectInit=function(){let t=this.$handler,e=D()(this.createRectDom());return t.append(e),this.contextMenuIsEnable()&&e.data(Ia,this),e},n.rectSingleTap=function(){},n.rectDoubleTap=function(t){this.getAppPermission().then((t=>{t.isEditable()&&this.showReplyDialog("comment")}))},n.createRectDom=function(){return D()('<div class="fv__pdf-page-annot-handler-rect">')},n.doubleTapAnnot=function(){this.getAppPermission().then((t=>{t.isEditable()&&this.showReplyDialog("comment")}))},n.getContextMenuConfig=function(){if(Fa)return Fa;let t=this.constructor.getDefaultContextMenuConfig();for(let e in t)if("items"===e){let n=t[e],i=this.pdfViewer.i18n;for(let t in n){let e=n[t];e.nameI18nKey&&(e.name=i.t(e.nameI18nKey))}}return t},n.getRelevanceRenders=function(t=!1){let e=this.parent("annotsRender");const n=this.annot.getGroupHeader()||this.annot,i=[],r=n.getPopup(),o=[],s=[],a=[];!function(t,e){Ma(t,"getReplies",e)}(n,o),Oa(n,s),La(n,a),r&&i.push(r.getId()),i.push.apply(i,o),i.push.apply(i,s),i.push.apply(i,a);const c=n.isGrouped()?n.getGroupElements():[n];return i.push.apply(i,Da(w.Z,c.map((t=>t.getId())))),t?i:i.map((t=>e.getAnnotRender(t))).filter((t=>!!t))},n.getGroupRenders=function(){let t=this.parent("annotsRender"),e=this.annot;return e=e.getGroupHeader()||e,(e.isGrouped()?e.getGroupElements():[e]).map((e=>t.getAnnotRender(e.getId())))},n.getGroupRect=function(){let t=this.getGroupRenders();if(t.length>1){const e=t.map((t=>t.component.getRect()));return{left:Math.min.apply(Math,Da(w.Z,e.map((t=>t.left)))),right:Math.max.apply(Math,Da(w.Z,e.map((t=>t.right)))),top:Math.min.apply(Math,Da(w.Z,e.map((t=>t.top)))),bottom:Math.max.apply(Math,Da(w.Z,e.map((t=>t.bottom))))}}if(!t[0])return y({},{});return y({},t[0].component.getRect())},n.showPopup=function(){},n.hidePopup=function(){},n.onDoubleTap=function(t){},n.invisibleRender=function(){this.apRenderer.invisibleRender()},n.getRenderingData=function(e=this.scale,n=this.rotate){return y(t.prototype.getRenderingData.call(this,e,n),{opacity:this.annot.getOpacity(),tileConfig:this.getTileConfig(e,n)})},n.processShapeControlPermissionCtrl=function(){if(this.isDestroyed||this.annot.isDestroyed)return;this.pdfViewer.getAnnotAuthorityManager().getPermission(this.annot).then((t=>{this.updateOnPermissionChange(t)}))},e}(Br);var ka=_a;function Ma(t,e,n){let i=t[e](),r=i.length;if(!r)return n;for(let t=0;t<r;t++){let r=i[t];Ma(r,e,n),Oa(r,n),La(r,n),n.push(r.getId())}return n}function Oa(t,e){return Ma(t,"getMarkedStates",e)}function La(t,e){return Ma(t,"getReviewStates",e)}let Na="annotComponent";var Ba=m(5322),Va=m.n(Ba),Ua=m(8012),Ha=m.n(Ua);const ja="north",$a="south",Wa="east",Ya="west",Ga="north-west",Ka="north-east",qa="south-west",za="south-east";m(3279);const Ja="__auxiliary-line";let Za=function(){function t(t,e,n,i){this.x0=t,this.y0=e,this.x1=n,this.y1=i}var e=t.prototype;return e.slope=function(){return this.x1-this.x0!=0?(this.y1-this.y0)/(this.x1-this.x0):1/0},e.isParallel=function(t){return Math.abs(this.slope()-t.slope())<1e-9||this.slope()==t.slope()},e.distanceFromPoint=function(t,e){const n=this.y1-this.y0,i=this.x0-this.x1,r=this.x1*this.y0-this.x0*this.y1;return Math.abs(n*t+i*e+r)/Math.sqrt(n*n+i*i)},t}();function Xa(t,e,n=5,i=document.body){let r=[];const o={top:null,left:null,right:null,bottom:null};e.forEach((e=>{if(Math.abs(e.left-t.left)<=n||Math.abs(e.right-t.left)<=n){const n=Math.abs(e.left-t.left)<Math.abs(e.right-t.left)?e.left:e.right;e.top>t.top?r.push(new Za(n,t.top,n,e.bottom)):r.push(new Za(n,e.top,n,Math.max(e.bottom,t.bottom))),null===o.left?o.left=n:o.left=Math.abs(o.left-t.left)<Math.abs(n-t.left)?o.left:n}if(Math.abs(e.right-t.right)<=n||Math.abs(e.left-t.right)<=n){const n=Math.abs(e.right-t.right)<Math.abs(e.left-t.right)?e.right:e.left;e.top>t.top?r.push(new Za(n,t.top,n,e.bottom)):r.push(new Za(n,e.top,n,Math.max(e.bottom,t.bottom))),null===o.right?o.right=n:o.right=Math.abs(o.right-t.right)<Math.abs(n-t.right)?o.right:n}if(Math.abs(e.top-t.top)<=n||Math.abs(e.bottom-t.top)<=n){const n=Math.abs(e.top-t.top)<Math.abs(e.bottom-t.top)?e.top:e.bottom;e.left>t.left?r.push(new Za(t.left,n,e.right,n)):r.push(new Za(e.left,n,Math.max(t.right,e.right),n)),null===o.top?o.top=n:o.top=Math.abs(o.top-t.top)<Math.abs(n-t.top)?o.top:n}if(Math.abs(e.bottom-t.bottom)<=n||Math.abs(e.top-t.bottom)<=n){const n=Math.abs(e.bottom-t.bottom)<Math.abs(e.top-t.bottom)?e.bottom:e.top;e.left>t.left?r.push(new Za(t.left,n,e.right,n)):r.push(new Za(e.left,n,Math.max(t.right,e.right),n)),null===o.bottom?o.bottom=n:o.bottom=Math.abs(o.bottom-t.bottom)<Math.abs(n-t.bottom)?o.bottom:n}}));let s=function(t,e,n){const i=new Za(t.left,t.top,t.right,t.top),r=new Za(t.left,t.bottom,t.right,t.bottom),o=new Za(t.left,t.top,t.left,t.bottom),s=new Za(t.right,t.top,t.right,t.bottom);let a=null,c=null,l=null,h=null,u=1/0,d=1/0,f=1/0,p=1/0;return e.forEach((e=>{if(i.isParallel(e)){const i=e.distanceFromPoint(t.left,t.top);i<u&&i<=n&&(u=i,a=e)}if(r.isParallel(e)){const i=e.distanceFromPoint(t.left,t.bottom);i<d&&i<=n&&(d=i,c=e)}if(o.isParallel(e)){const i=e.distanceFromPoint(t.left,t.top);i<f&&i<=n&&(f=i,l=e)}if(s.isParallel(e)){const i=e.distanceFromPoint(t.right,t.top);i<p&&i<=n&&(p=i,h=e)}})),{closestTop:a,closestBottom:c,closestLeft:l,closestRight:h}}(t,r,n),a=[s.closestBottom,s.closestLeft,s.closestRight,s.closestTop].filter((t=>t));return function(t,e="#777",n="",i=document.body){const r=Array.from(i.getElementsByClassName(Ja));if(r.length<t.length){let e=t.length-r.length;for(;e-- >0;){const t=document.createElement("div");t.className=Ja+" "+n,r.push(t),i.appendChild(t)}}for(let n=0;n<r.length;n++){const i=r[n];if(n>=t.length){i.style.display="none";continue}i.style.display="";const o=t[n];if(o.y0===o.y1){const t=`\n                width: ${Math.abs(o.x1-o.x0)}px;\n                height: 1px;\n                position: absolute;\n                top: ${o.y0-.5}px;\n                left: ${o.x0}px;\n                z-index: 10;\n                background: linear-gradient(to right, transparent 50%, ${e} 50%);\n                background-size: 5px 5px;`;i.style.cssText+=t}else if(o.x0===o.x1){const t=`\n                width: 1px;\n                height: ${Math.abs(o.y1-o.y0)}px;\n                position: absolute;\n                top: ${o.y0}px;\n                left: ${o.x0-.5}px;\n                z-index: 10;\n                background: linear-gradient(to bottom, transparent 50%, ${e} 50%);\n                background-size: 5px 5px;`;i.style.cssText+=t}}}(a,void 0,"",i),o}function Qa(t=document.body){!function(t=document.body){let e=t.getElementsByClassName(Ja);for(let t=e.length-1;t>=0;t--)e[t].remove()}(t)}let tc=function(){function t({left:t=0,right:e=0,bottom:n=0,top:i=0,box:r,marginBox:o={left:0,top:0,right:0,bottom:0},expansion:s={left:0,top:0,right:0,bottom:0}}={}){this.processing=!1,this.boundary={left:t,right:e,bottom:n,top:i},this.freeBoundary=null,this.marginBox=o,this.shape=this.calculateShape(),this.setBoundaryBox(r),this.tasks=[],this.expansion=s,this.drawAuxiliaryLine=Xa,this.clearAuxiliaryLine=Qa}var e=t.prototype;return e.process=function(){this.tasks=[],this.processing=!0,this.freeBoundary=y({},this.boundary)},e.end=function(){this.tasks=[],this.processing=!1,this.boundary=this.squareBoundary||this.freeBoundary,this.freeBoundary=null,this.squareBoundary=null,this.shape=this.calculateShape()},e.cancel=function(){this.tasks=[],this.processing=!1,this.freeBoundary=null,this.squareBoundary=null},e.setBoundaryBox=function(t){this.box=t,this.boxStrict=t?e=>this._adjustBoundaryByBox(t,e):_.noop},e.undo=function(){const t=this.tasks.pop();"function"==typeof t&&t()},e.addTask=function(t,...e){this.tasks.push((()=>t.apply(void 0,e)))},e.recordFreeBoundary=function(){const t=this.freeBoundary?y({},this.freeBoundary):null;this.addTask((t=>{this.freeBoundary=t}),t)},e.recordSquareBoundary=function(){const t=this.squareBoundary?y({},this.squareBoundary):null;this.addTask((t=>{this.squareBoundary=t}),t)},e.adjustWest=function(e,n=t.ADJUST_MODE_FREE){this.recordFreeBoundary();const i=this.freeBoundary,r=this.freeBoundary.left+e,o=this.freeBoundary.right;switch(i.left=Math.min(r,o),i.right=Math.max(r,o),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareH();case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),o<r?Wa:Ya},e.adjustEast=function(e,n=t.ADJUST_MODE_FREE){this.recordFreeBoundary();const i=this.freeBoundary.right+e,r=this.freeBoundary.left;switch(this.freeBoundary.left=Math.min(r,i),this.freeBoundary.right=Math.max(r,i),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareH();case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),i<r?Ya:Wa},e._adjustToSquareH=function(){const t=this.freeBoundary,e=t.right-t.left,n=t.bottom-t.top,i=t.top+n/2-e/2,r=i+e;t.top=i,t.bottom=r},e.adjustNorth=function(e,n=t.ADJUST_MODE_FREE){this.recordFreeBoundary();const i=this.freeBoundary.top+e,r=this.freeBoundary.bottom;switch(this.freeBoundary.top=Math.min(i,r),this.freeBoundary.bottom=Math.max(i,r),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareV();case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),r<i?$a:ja},e.adjustSouth=function(e,n=t.ADJUST_MODE_FREE){this.recordFreeBoundary();const i=this.freeBoundary.bottom+e,r=this.freeBoundary.top;switch(this.freeBoundary.top=Math.min(r,i),this.freeBoundary.bottom=Math.max(r,i),n){case t.ADJUST_MODE_SQUARE:this._adjustToSquareV();case t.ADJUST_MODE_UNIFORM:}return this.boxStrict(this.freeBoundary),i<r?ja:$a},e._adjustToSquareV=function(){const t=this.freeBoundary,e=t.right-t.left,n=t.bottom-t.top,i=t.left+e/2-n/2,r=i+n;t.left=i,t.right=r},e._adjustToSquare=function(t,e){const n=this.freeBoundary.right-this.freeBoundary.left,i=this.freeBoundary.bottom-this.freeBoundary.top,r=Math.min(n,i);this.squareBoundary=y({},this.freeBoundary),e==Ya?this.squareBoundary.left=this.freeBoundary.right-r:this.squareBoundary.right=this.freeBoundary.left+r,t==$a?this.squareBoundary.bottom=this.freeBoundary.top+r:this.squareBoundary.top=this.freeBoundary.bottom-r},e.adjustNorthWest=function(e,n,i=t.ADJUST_MODE_FREE,r=1){switch(this.recordFreeBoundary(),this.recordSquareBoundary(),this.squareBoundary=null,i){case t.ADJUST_MODE_UNIFORM:return this._adjustNorthWestUniform(e,n,r),this.boxStrict(this.freeBoundary),Ga;case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:const o=this.adjustNorth(n),s=this.adjustWest(e);return i==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(o,s),this.boxStrict(this.squareBoundary)),`${o}-${s}`}},e._adjustNorthWestUniform=function(t,e,n){const{right:i,bottom:r,left:o,top:s}=this.freeBoundary;let a=i-(o+t),c=r-(s+e);const l=i-o,h=r-s,u=Math.min(a,c);u>=n&&(u===a?c=u/l*h:a=u/h*l,this.freeBoundary.left=i-a,this.freeBoundary.top=r-c)},e.adjustNorthEast=function(e,n,i=t.ADJUST_MODE_FREE,r=1){switch(this.recordFreeBoundary(),this.recordSquareBoundary(),i){case t.ADJUST_MODE_UNIFORM:return this._adjustNorthEastUniform(e,n,r),this.boxStrict(this.freeBoundary),Ka;case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:const o=this.adjustNorth(n),s=this.adjustEast(e);return this.squareBoundary=null,i==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(o,s),this.boxStrict(this.squareBoundary)),`${o}-${s}`}},e._adjustNorthEastUniform=function(t,e,n){const{right:i,bottom:r,left:o,top:s}=this.freeBoundary;let a=i+t-o,c=r-(s+e);const l=i-o,h=r-s,u=Math.min(a,c);u>=n&&(u===a?c=u/l*h:a=u/h*l,this.freeBoundary.right=o+a,this.freeBoundary.top=r-c)},e.adjustSouthWest=function(e,n,i=t.ADJUST_MODE_FREE,r=1){switch(this.recordFreeBoundary(),this.recordSquareBoundary(),i){case t.ADJUST_MODE_UNIFORM:return this._adjustSouthWestUniform(e,n,r),this.boxStrict(this.freeBoundary),qa;case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:const o=this.adjustSouth(n),s=this.adjustWest(e);return this.squareBoundary=null,i==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(o,s),this.boxStrict(this.squareBoundary)),`${o}-${s}`}},e._adjustSouthWestUniform=function(t,e,n){const{right:i,bottom:r,left:o,top:s}=this.freeBoundary;let a=i-(o+t),c=r+e-s;const l=i-o,h=r-s,u=Math.min(a,c);u>=n&&(u===a?c=u/l*h:a=u/h*l,this.freeBoundary.left=i-a,this.freeBoundary.bottom=s+c)},e.adjustSouthEast=function(e,n,i=t.ADJUST_MODE_FREE,r=1){switch(this.recordFreeBoundary(),this.recordSquareBoundary(),i){case t.ADJUST_MODE_UNIFORM:return this._adjustSouthEastUniform(e,n,r),this.boxStrict(this.freeBoundary),za;case t.ADJUST_MODE_FREE:case t.ADJUST_MODE_SQUARE:const o=this.adjustSouth(n),s=this.adjustEast(e);return this.squareBoundary=null,i==t.ADJUST_MODE_SQUARE&&(this._adjustToSquare(o,s),this.boxStrict(this.squareBoundary)),`${o}-${s}`}},e._adjustSouthEastUniform=function(t,e,n){const{right:i,bottom:r,left:o,top:s}=this.freeBoundary;let a=i+t-o,c=r+e-s;const l=i-o,h=r-s,u=Math.min(a,c);u>=n&&(u===a?c=u/l*h:a=u/h*l,this.freeBoundary.right=o+a,this.freeBoundary.bottom=s+c)},e.adjustPosition=function(t=0,e=0){this.recordFreeBoundary(),this.freeBoundary&&(this.freeBoundary.left+=t,this.freeBoundary.right+=t,this.freeBoundary.top+=e,this.freeBoundary.bottom+=e,this.boxStrict(this.freeBoundary))},e.adjustPositionTo=function(t=this.freeBoundary.left,e=this.freeBoundary.top){this.adjustPosition(t-this.freeBoundary.left,e-this.freeBoundary.top)},e._adjustMovingBoundaryByBox=function(t,e){const n=e.right-e.left,i=e.bottom-e.top;this.boundary.right>t.right&&(this.boundary.right=t.right,this.boundary.left=t.right-n),this.boundary.bottom>t.bottom&&(this.boundary.bottom=t.bottom,this.boundary.top=t.bottom-i),this.boundary.left<t.left&&(this.boundary.left=t.left,this.boundary.right=t.left+n),this.boundary.top<t.top&&(this.boundary.top=t.top,this.boundary.bottom,t.top)},e._adjustBoundaryByBox=function(t,e){let n=this.marginBox;n||(n={}),n.left=n.left||0,n.top=n.top||0,n.bottom=n.bottom||0,n.right=n.right||0;const i=Vo.on(e).expand(n.top,n.left,n.bottom,n.right).extract(),r=i.right-i.left,o=i.bottom-i.top;i.right>t.right&&(i.right=t.right,i.left=t.right-r),i.bottom>t.bottom&&(i.bottom=t.bottom,i.top=t.bottom-o),i.left<t.left&&(i.left=t.left,i.right=t.left+r),i.top<t.top&&(i.top=t.top,i.bottom=t.top+o);const s=Vo.on(i).shrink(n.top,n.left,n.bottom,n.right).extract();Vo.copyTo(s,e)},e.setMargin=function({left:t=0,top:e=0,right:n=0,bottom:i=0}=this.marginBox){this.marginBox={left:t,top:e,right:n,bottom:i}},e.getAdjustRect=function(){const t=this.squareBoundary||this.freeBoundary;return t?y({},t):null},e.getAdjustShape=function(){const t=this.squareBoundary||this.freeBoundary;return t?{left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top}:null},e.getRect=function(){return y({},this.boundary)},e.getShape=function(){return y({},this.shape)},e.calculateShape=function(){const t=this.boundary;return{left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top}},e.applyToDom=function(t,e){e=e||this.getShape();const n=this.expansion;t.style.cssText+=`\n                left: ${e.left-n.left}px;\n                top: ${e.top-n.top}px;\n                width: ${e.width+(n.left+n.right)}px;\n                height: ${e.height+(n.top+n.bottom)}px;\n                `},e.applyAdjustingToDom=function(t,e){e=e||this.getAdjustShape();const n=this.expansion;t.style.cssText+=`\n                left: ${e.left-n.left}px;\n                top: ${e.top-n.top}px;\n                width: ${e.width+(n.left+n.right)}px;\n                height: ${e.height+(n.top+n.bottom)}px;\n                `},S(t,null,[{key:"ADJUST_MODE_FREE",get:function(){return"free"}},{key:"ADJUST_MODE_UNIFORM",get:function(){return"uniform"}},{key:"ADJUST_MODE_SQUARE",get:function(){return"square"}}]),t}();const ec=Q,nc="move",ic=["square","widget","polygon","line","polyline","circle","stamp","freetext","fileattachment","text"],rc=_.LoggerFactory.getLogger("ShapeControl"),oc={};let sc=function(t){function e({emitter:e,prestart:n=_.noop,start:i=_.noop,update:r=_.noop,interceptor:o=ec,moving:s=_.noop,end:a=_.noop,afterEnd:c=_.noop,rotate:l=_.noop,beforeRotateStart:h=_.noop,rotateStart:u=_.noop,rotateEnd:d=_.noop,afterRotateEnd:f=_.noop,enableDiagonally:p=!1,enableFrame:g=!0,enableSizeBox:m=!1,resizable:v=!0,moveable:y=!0,rotatable:w=!1,previewer:b=!1,enableUniform:A=!1,minUniformSize:P=15,annotRender:S=null,expansion:C={left:1,top:1,right:1,bottom:1},degreeInitVisibility:E=!0,resizeCompanions:x=!1,onStatusChange:D=_.noop,degree:I=0,auxiliaryLine:R=null}={}){var T;return(T=t.call(this)||this).ui=function(t){var e=Object.keys(t).sort().map((e=>t[e]?1:0)).join("");if(e in oc)return oc[e].cloneNode(!0);let n=(new DOMParser).parseFromString(Ha()(t),"text/html").body.firstChild;return oc[e]=n,n.cloneNode(!0)}({enableDiagonally:p,resizable:v,enableFrame:g,rotatable:w,moveable:y,previewer:b,enableSizeBox:m,degreeInitVisibility:E}),T.emitter=e,T.onPrestart=n,T.onStart=i,T.onUpdate=r,T.onMoving=s,T.interceptor=o,T.onEnd=a,T.onAfterEnd=c,T.onBeforeRotateStart=h,T.onAfterRotateEnd=f,T.rotate=l,T.onRotateStart=u,T.onRotateEnd=d,T.enableUniform=A,T.minUniformSize=P,T.rotatable=w,T.moveable=y,T.enablePreviewer=b,T.isDisabled=!1,T.isMoveDisabled=!1,T.enableDiagonally=p,T.enableFrame=g,T.enableSizeBox=m,T.resizable=v,T.annotRender=S,T.rotateCursorStyle="fv__cursor-rotation",T.rotateDegree=I,T.isRotateStarted=!1,T.auxiliaryLine=R,T.expansion=C,T.resizeCompanions=x,T.companions=[],T.degreeInitVisibility=E,T.isActive=!1,T.onStatusChange=D,T}(0,E.Z)(e,t);var n=e.prototype;return n.init=function(){if(this._isInitted)return;this._isInitted=!0;const t=this.ui.querySelector(".fv__shape-control-previewer");this.rotatingRod=this.ui.querySelector(".fv__shape-rotate"),this.shapeSizeBox=this.ui.querySelector(".fv__shape-size"),this.context=t.getContext("2d"),this.companionMargin={left:0,right:0,top:0,bottom:0},this.rotateDegreeBox=this.ui.querySelector(".fv-shape-rotate-degree"),this.updateRotateDegreeBox(this.rotateDegree),this.resizableWrap=this.ui.querySelector(".fv__shape-controller-resizable-wrap"),this.bindEvents()},n.companion=function(t){if(t===this)return _.noop;const e="function"==typeof t.getCompanionObject?t.getCompanionObject():void 0;if(!e)return _.noop;return-1!==this.companions.indexOf(e)||e.companions.indexOf(this)>-1?_.noop:(this.companions.push(e),this.updateMargin(),()=>{const t=this.companions.indexOf(e);t>-1&&this.companions.splice(t,1)})},n.getCompanionObject=function(){return this},n.updateMargin=function(){if(0===this.companions.length)return this.setMargin(this.originMargin),void(this.companionMargin={left:0,right:0,top:0,bottom:0});const t=this.shape.getRect();let{left:e,right:n,top:i,bottom:r}=t;this.companions.forEach((t=>{const o=t.shape.getRect();e=Math.min(o.left,e),i=Math.min(o.top,i),n=Math.max(o.right,n),r=Math.max(o.bottom,r)}));const o=t.left-e,s=n-t.right,a=t.top-i,c=r-t.bottom;this.companionMargin={left:o,right:s,top:a,bottom:c},this.originMargin=this.shape.marginBox;const l={left:Math.max(this.companionMargin.left,this.originMargin.left),right:Math.max(this.companionMargin.right,this.originMargin.right),top:Math.max(this.companionMargin.top,this.originMargin.top),bottom:Math.max(this.companionMargin.bottom,this.originMargin.bottom)};this.setMargin(l)},n.clearCompanions=function(){this.companions.length=0,this.updateMargin()},n.getPreviewerContext=function(){return this.context},n.bindEvents=function(){const t=this.ui.querySelectorAll(".fv__shape-controller");Array.prototype.slice.call(t).forEach((t=>this._bindControllerEvents(t))),this.moveable&&this._bindMoveAreaEvents(),this.rotatable&&this._bindRotateEvents()},n._bindControllerEvents=function(t){var n=new Di.Manager(t);let i,r;n.add(new Di.Pan({direction:Di.DIRECTION_ALL})),n.on("panmove",(({deltaX:e,deltaY:n})=>{if(this.isDisabled||!this.isActive)return;const o=e-i,s=n-r;i=e,r=n,this.resize(t.getAttribute("direction"),o,s),this._resizeSizeBox()})),n.on("panstart",(({deltaX:e,deltaY:n})=>{!this.isDisabled&&this.isActive&&(i=e,r=n,this.start(),this.resizeCompanions||this.setMargin({left:0,right:0,top:0,bottom:0}),this.resize(t.getAttribute("direction"),e,n,!0))})),n.on("panend",(t=>{!this.isDisabled&&this.isActive&&this.end(e.ACTION_RESIZE)})),n.on("pancancel",(t=>{!this.isDisabled&&this.isActive&&this.cancel(e.ACTION_RESIZE)})),this.addDestroyHook((()=>{n.destroy()}))},n._resizeSizeBox=function(){if(!this.shapeSizeBox)return;let t=this.shape.getAdjustShape();t||(t=this.shape.shape);let e=parseInt(t.width),n=parseInt(t.height);this.shapeSizeBox.innerHTML=e<120?e+"px*"+n+"px":e<170?"W: "+e+"px, H: "+n+"px":"Width: "+e+"px, Height: "+n+"px",this.shapeSizeBox.style.top=n>100?"1px":"-22px"},n._bindMoveAreaEvents=function(){const t=this.ui;var n=new Di.Manager(t.querySelector(".fv__shape-control-move-area"),{domEvents:!0});let i,r;n.add(new Di.Pan({direction:Di.DIRECTION_ALL})),n.on("panstart",(({deltaX:t,deltaY:e,center:o,srcEvent:s})=>{if(this.isDisabled||this.isMoveDisabled||!this.isActive)return;const{width:a,height:c}=n.element.getBoundingClientRect();(a||c)&&(i=t,r=e,this.start(),this.trigger("movingstart",{deltaX:o.x+t,deltaY:o.y+e,srcEvent:s}),this.move(i,r,!0))})),n.on("panend",(t=>{if(this.trigger("movingend",t),this.isDisabled||this.isMoveDisabled||!this.isActive)return;const{width:i,height:r}=n.element.getBoundingClientRect();(i||r)&&(this.end(e.ACTION_MOVE),this.auxiliaryLine&&this.shape.clearAuxiliaryLine(this.auxiliaryLine.container))})),n.on("pancancel",(t=>{if(this.trigger("movingcancel"),this.isDisabled||this.isMoveDisabled||!this.isActive)return;const{width:i,height:r}=n.element.getBoundingClientRect();(i||r)&&(this.cancel(e.ACTION_MOVE),this.auxiliaryLine&&this.shape.clearAuxiliaryLine(this.auxiliaryLine.container))})),n.on("panmove",(({deltaX:t,deltaY:e,center:o,direction:s})=>{if(this.isDisabled||this.isMoveDisabled||!this.isActive)return;const{width:a,height:c}=n.element.getBoundingClientRect();if(!a&&!c)return;let l=t-i,h=e-r;i=t,r=e;const u=this.ui.getBoundingClientRect(),{left:d,right:f,top:p,bottom:g}=u;o.x<d&&s&Hammer.DIRECTION_RIGHT&&(l=0),o.x>f&&s&Hammer.DIRECTION_LEFT&&(l=0),o.y<p&&s&Hammer.DIRECTION_DOWN&&(h=0),o.y>g&&s&Hammer.DIRECTION_UP&&(h=0),this.move(l,h,void 0,!0)})),this.addDestroyHook((()=>{n.destroy()}))},n.disable=function(){this.isDisabled=!0,this.ui.classList.add("disabled"),this.onStatusChange()},n.enable=function(){this.isDisabled=!1,this.ui.classList.remove("disabled"),this.onStatusChange()},n.moveDisable=function(){this.isMoveDisabled=!0,this.ui.classList.add("move-disabled"),this.onStatusChange()},n.moveEnable=function(){this.moveable&&(this.isMoveDisabled=!1,this.ui.classList.remove("move-disabled"),this.onStatusChange())},n.start=function(){this.isDisabled||(this.doStart(),this.onPrestart(),this.companions.forEach((t=>t.doStart())))},n.doStart=function(){this.ui.style.willChange="left, top, width, height",this.shape.process()},n.move=function(t,n,i=!1,r=!1){if(this.isDisabled||this.isMoveDisabled)return;const o=this.shape.getAdjustRect();this.shape.adjustPosition(t,n);const s=this.getSnapRect(this.shape.getAdjustRect());if(!s)return;let a=s.left-o.left,c=s.top-o.top;if(this.interceptor(this.shape.getAdjustShape())){if(this.auxiliaryLine&&r){let t=this.auxiliaryLine.getPageAnnots();const e=s,n=this.auxiliaryLine.gap,i=this.auxiliaryLine.container,r=[this.shape.boundary],l={};l[this.shape.boundary.top+this.shape.boundary.left+this.shape.boundary.right+this.shape.boundary.bottom]=!0,this.companions.length&&this.companions.forEach((t=>{const n=t.getSnapRect(t.shape.getAdjustRect());e.left=Math.min(e.left,n.left),e.top=Math.min(e.top,n.top),e.right=Math.max(e.right,n.right),e.bottom=Math.max(e.bottom,n.bottom),r.push(t.shape.boundary),l[t.shape.boundary.top+t.shape.boundary.left+t.shape.boundary.right+t.shape.boundary.bottom]=!0})),t=t.filter((t=>{let e=t.rect;if(ic.indexOf(t.type)<0)return!1;if(!l[e.top+e.left+e.right+e.bottom])return!0;for(let t of r)if(t.top==e.top&&t.left==e.left&&t.right==e.right&&t.bottom==e.bottom)return!1;return!0}));const h=t.map((t=>t.rect)),u=this.shape.drawAuxiliaryLine(e,h,n,i),d=s.right-s.left,f=s.bottom-s.top;!this.companions.length&&u.top&&(s.top=u.top,s.bottom=s.top+f),!this.companions.length&&u.left&&(s.left=u.left,s.right=s.left+d),!this.companions.length&&u.right&&(s.right=u.right,s.left=s.right-d),!this.companions.length&&u.bottom&&(s.bottom=u.bottom,s.top=s.bottom-f),a=s.left-o.left,c=s.top-o.top}const t=this.getShapeFromRect(s);this.shape.applyAdjustingToDom(this.ui,t),i&&this.onStart(t,this.context,e.ACTION_MOVE),this.onMoving(t,this.context,{offsetLeft:a,offsetTop:c}),this.companions.forEach((t=>t.move(a,c,i)))}else this.shape.undo()},n.resize=function(t,n,i,r=!1){if(!this.isDisabled){switch(t){case Wa:case Ya:case ja:case $a:case Ka:case Ga:case za:case qa:break;default:throw new Error(`Incorrect direction: ${t}`)}if(this._resize(t,n,i),this.interceptor(this.shape.getAdjustShape())){const o=this.getShapeFromRect(this.getDirectionSnapRect(this.shape.getAdjustRect(),t));this.shape.applyAdjustingToDom(this.ui,o),this._updatePreviewer(),r&&this.onStart(o,this.context,e.ACTION_RESIZE),this.onUpdate(o,this.context,{offsetLeft:n,offsetTop:i,direction:t}),this.resizeCompanions&&this.companions.forEach((e=>e.resize(t,n,i,r)))}else this.shape.undo()}},n.end=function(t,n=0){if(this.isDisabled)return;if(t===nc&&this.isMoveDisabled)return;n=n==this.companions.length,this.ui.style.willChange="auto";const i=this.shape.getAdjustRect();if(i){let r=this.getShapeFromRect(t===e.ACTION_MOVE?this.getSnapRect(i):this.getDirectionSnapRect(i));this.onEnd(r,this.context,t,n),this.shape.end(),this.shape.applyToDom(this.ui,r),(t!=e.ACTION_RESIZE||this.resizeCompanions)&&this.companions.forEach(((e,n)=>e.end(t,n)))}this.onAfterEnd(t)},n.cancel=function(t){this.isDisabled||(this.shape.cancel(),this.shape.applyToDom(this.ui),this.onEnd(this.shape.getShape(),this.context,t),this.companions.forEach((e=>e.cancel(t))),this.onAfterEnd(t))},n.rotateStart=function(t,e){const n=this.ui.getBoundingClientRect(),i={x:n.left+.5*n.width,y:n.top+.5*n.height};this.rotateStartPoint={x:t,y:e},this.rotationOffsetCenter=i,this.onRotateStart(this.rotateDegree,this.shape,this.context),this.companions.forEach((n=>{n.isRotateStarted=!0,n.rotateStart(t,e)}))},n.rotating=function(t,e){if(!this.isRotateStarted)return;const{x:n,y:i}=this.rotateStartPoint,r=this.offsetDegree=this.getAngle(n,i,t,e);this.ui.style.transform=`rotate(${r}deg)`,this.updateRotateDegreeBox(r),this.rotate(r,this.rotateDegree),this.companions.forEach((t=>{t.ui.style.transform=`rotate(${r}deg)`,t.updateRotateDegreeBox(r),t.rotate(r,t.rotateDegree)}))},n.getAngle=function(t,e,n,i){let r,{x:o,y:s}=this.rotationOffsetCenter,a=180*Math.atan2(e-s,t-o)/Math.PI,c=180*Math.atan2(i-s,n-o)/Math.PI;return a=a<=-90?360+a:a,c=c<=-90?360+c:c,r=Math.floor(c-a),r=r<0?r+360:r,r},n.rotateEnd=function(){this.isRotateStarted&&(this.isRotateStarted=!1,this.rotateDegree+=this.offsetDegree,this.onRotateEnd(this.rotateDegree,this.offsetDegree,this.shape,this.context).then((t=>{this.rotatingRod.style.transform=`rotate(${t}deg)`})),this.companions.forEach((t=>{t.rotateEnd()})))},n.moveDirectly=function(t,e){if(!this.isDisabled){this.start();try{this.move(t,e,!0)}catch(t){throw this.cancel(),t}this.end()}},n.resizeDirectly=function(t,e,n){if(!this.isDisabled){this.start();try{this.resize(t,e,n,!0)}catch(t){throw this.cancel(),t}this.end()}},n._updatePreviewer=function(){if(!this.enablePreviewer)return;const t=this.ui.querySelector(".fv__shape-control-previewer");t.setAttribute("width",this.ui.offsetWidth),t.setAttribute("height",this.ui.offsetHeight)},n.hidePreviewer=function(){},n.showPreviewer=function(){},n.hide=function(){this.ui.style.display="none"},n.show=function(){this.ui.style.display="block"},n._resize=function(t,e,n){const i=this.ui;let r;switch(r=this.enableUniform?tc.ADJUST_MODE_UNIFORM:_.keyboardStatus.isShift?tc.ADJUST_MODE_SQUARE:tc.ADJUST_MODE_FREE,t){case ja:o(t,this.shape.adjustNorth(n,r));break;case $a:o(t,this.shape.adjustSouth(n,r));break;case Wa:o(t,this.shape.adjustEast(e,r));break;case Ya:o(t,this.shape.adjustWest(e,r));break;case Ga:o(t,this.shape.adjustNorthWest(e,n,r,this.minUniformSize));break;case Ka:o(t,this.shape.adjustNorthEast(e,n,r,this.minUniformSize));break;case qa:o(t,this.shape.adjustSouthWest(e,n,r,this.minUniformSize));break;case za:o(t,this.shape.adjustSouthEast(e,n,r,this.minUniformSize));break;default:throw new Error("Incorrect direction: "+t)}function o(t,e){if(t===e)return;const n=i.querySelector(`[direction=${e}]`),r=i.querySelector(`[direction=${t}]`);n.setAttribute("direction",t),r.setAttribute("direction",e)}},n.active=function(t,e,n){if(this.init(),this._applyAnnotBoundary(e),t){const e=t instanceof Element?t:t.get(0);this.ui.parentElement!==e&&e.appendChild(this.ui)}const i=!!this.shape&&this.shape.processing;this.shape=new tc({left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height,box:n,expansion:this.expansion}),i&&this.shape.process(),this.originMargin=this.shape.marginBox,this._updatePreviewer(),this._resizeSizeBox(),this.updateRotateDegreeBox(this.rotateDegree),this.rotatingRod&&(this.rotatingRod.style.transform=`rotate(${this.rotateDegree}deg)`),this.isActive=!0},n.updateRotateDegreeBox=function(t=0){(t=parseInt(t))>180&&(t-=360),t*=-1,this.rotateDegreeBox&&(this.rotateDegreeBox.innerHTML=t+"°",this.rotateDegreeBox.style.transform=`rotate(${t}deg)`)},n.updateBoundary=function(t,e){y(this.shape.boundary,t),this._applyAnnotBoundary(this.shape.boundary),e&&this.updateBoundaryBox(e),this._updatePreviewer()},n.setMargin=function(t){t&&this.shape&&this.shape.setMargin(t)},n.updateBoundaryBox=function(t){this.shape.setBoundaryBox(t)},n.getCurrentShape=function(){return this.shape.getShape()},n.getAdjustingShape=function(){return this.shape.getAdjustShape()},n.getAdjustedOffset=function(){const t=this.getAdjustedRectDiff();return{offsetLeft:t.left,offsetTop:t.top}},n.getAdjustedRectDiff=function(){return Vo.subtract(this.shape.getAdjustRect(),this.shape.getRect())},n.deactive=function(){this.ui.parentNode&&this.ui.parentNode.removeChild(this.ui),this.isActive=!1},n.destroy=function(){t.prototype.destroy.call(this),this.disable(),this.ui.parentNode&&this.ui.parentNode.removeChild(this.ui)},n._applyAnnotBoundary=function({left:t,top:e,width:n,height:i}){const r=this.expansion;this.ui.style.cssText+=`\n            width: ${n+(r.left+r.right)}px;\n            height: ${i+(r.top+r.bottom)}px;\n            left: ${t-r.left}px;\n            top: ${e-r.top}px;\n            `},n._bindRotateEvents=function(){const t=this.ui.querySelector(".fv-shape-rotate-handle");var e=new Di.Manager(t);e.add(new Di.Pan({direction:Di.DIRECTION_ALL}));e.on("panstart",(({center:t})=>{!this.isDisabled&&this.isActive&&(this.onBeforeRotateStart(),this.isRotateStarted=!0,this.companions.forEach((t=>t.isRotateStarted=!0)),this.rotateStart(t.x,t.y))})),e.on("panend",(({deltaX:t,deltaY:e})=>{!this.isDisabled&&this.isRotateStarted&&(this.rotateEnd(),this.onAfterRotateEnd())})),e.on("pancancel",(t=>{rc.debug("rotate c")})),e.on("panmove",(({deltaX:t,deltaY:e,center:n})=>{!this.isDisabled&&this.isRotateStarted&&this.rotating(n.x,n.y)}))},n.trigger=function(t,e){let n=this.emitter;n&&n.emit(t,e)},n.setSnapGrid=function(t){this.snapGrid=t},n.getSnapGrid=function(){return this.snapGrid},n.getSnapMaxRect=function(t){if(!t)return t;let e=this.getSnapGrid();if(!e)return t;let{left:n,right:i,top:r,bottom:o}=t,{offsetLeft:s,offsetTop:a,subLineWidth:c,subLineHeight:l,maxWidth:h,maxHeight:u}=e,d=(n-s)%c,f=Math.abs((i-s)%c-c)%c,p=(r-a)%l,g=Math.abs((o-a)%l-l)%l;return d<0&&(d+=s),n-=d,i+=f,i=Math.min(h,i),p<0&&(p+=a),r-=p,o+=g,o=Math.min(u,o),{left:n,right:i,top:r,bottom:o}},n.getSnapRect=function(t){if(!t)return t;let e=this.getSnapGrid();if(!e)return t;let{maxWidth:n,maxHeight:i}=e,{left:r,right:o,top:s,bottom:a}=t;if(r<=0||s<=0||o>=n||a>=i)return t;let{offsetLeft:c,offsetTop:l,subLineWidth:h,subLineHeight:u}=e,d=(r-c)%h,f=Math.abs(d-h)%h,p=(o-c)%h,g=Math.abs(p-h)%h,m=(s-l)%u,v=Math.abs(m-u)%u,y=(a-l)%u,w=Math.abs(y-u)%u,b=Math.min(d,p),A=Math.min(f,g),P=Math.min(m,y),S=Math.min(v,w);return b<A?(r-=b,o-=b):(r+=A,o+=A),P<S?(s-=P,a-=P):(s+=S,a+=S),{left:r,right:o,top:s,bottom:a}},n.getDirectionSnapRect=function(t,e=this.lastDirection){if(this.lastDirection=e,!t)return t;let n=this.getSnapGrid();if(!n)return t;let{offsetLeft:i,offsetTop:r,subLineWidth:o,subLineHeight:s,maxWidth:a,maxHeight:c}=n,{left:l,right:h,top:u,bottom:d}=t;if(l<=0||u<=0||h>=a||d>=c)return t.left=Math.max(0,l),t.right=Math.min(a,h),t.top=Math.max(0,u),t.bottom=Math.min(c,d),t;let f=(l-i)%o,p=Math.abs((h-i)%o-o)%o,g=(u-r)%s,m=Math.abs((d-r)%s-s)%s;switch(e){case ja:u-=g;break;case $a:d+=m;break;case Wa:h+=p;break;case Ya:l-=f;break;case Ga:l-=f,u-=g;break;case Ka:h+=p,u-=g;break;case qa:l-=f,d+=m;break;case za:h+=p,d+=m;break;default:throw new Error("Incorrect direction: "+e)}return{left:l,right:h,top:u,bottom:d}},n.getShapeFromRect=function(t){if(!t)return;let{left:e,top:n}=t;return{left:e,top:n,width:t.right-e,height:t.bottom-n}},n.updateResizable=function(t){this.resizableWrap.style.visibility=t?"visible":"hidden"},S(e,null,[{key:"ACTION_RESIZE",get:function(){return"resize"}},{key:"ACTION_MOVE",get:function(){return nc}}]),e}(_.Disposable),ac=function(t=Na,e=".fv__pdf-page-annot-handler-rect"){return{selector:e,items:{copy:{name:"copy",nameI18nKey:"viewer_:contextmenu.annot.copy",callback:function(e,n,i){this.data(t).copyText()},visible:function(){let e=this.data(t);if(!e.annot.isArea())return!e.annot.isReplace||!e.annot.isReplace()}},reply:{name:"reply",nameI18nKey:"viewer_:contextmenu.annot.reply",callback:function(){this.data(t).showReplyDialog("reply")},disabled:function(){return this.data(t).replyDisabled()}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(e,n,i){this.data(t).showPropertiesDialog(e,n,i)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data(t).removeAnnot()},disabled:function(){return this.data(Na).deleteDisabled()}}},events:{show:function(){return this.data(Na).updateDeleteStatus(!0),!0},hide:function(){return this.data(Na).updateDeleteStatus(!1),!0}}}}(Na,".fv__pdf-page-annot-handler-rect");const cc=Va()({direction:"left"}),lc=Va()({direction:"right"}),hc="px";let uc=function(t){function e(e,n,i,r){var o;if((o=t.call(this,e,n,i,r)||this).name="textmarkup",o.$ui.addClass("fv__pdf-page-textmarkup-annot-container"),o.$handler.addClass("fv__pdf-page-textmarkup-annot-handler-container"),o.annot.isArea())o.createShapeControl();else{const t=(t,e,n)=>{n===ge.flagsUpdated?o.getAppPermission().then((t=>{let e=!0;e=(t.ignorable()||t.isAdjustable())&&!o.moveDisabled(),e?o.boundaryEnabled():o.boundaryDisabled()})):n===ge.quadPointsUpdated&&o.activeRect(t[0])};o.pdfViewer.eventEmitter.on(nt.annotationUpdated,t),o.addDestroyHook((()=>{o.pdfViewer.eventEmitter.off(nt.annotationUpdated,t)}))}return o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return ac};var n=e.prototype;return n.redraw=function(e){return this.getAppPermission().then((t=>{let e=!0;e=(t.ignorable()||t.isAdjustable())&&!this.moveDisabled(),e?this.boundaryEnabled():this.boundaryDisabled()})),t.prototype.redraw.call(this,e)},n.createShapeControl=function(){_.Lazy.property(this,"shapeControl",(()=>{let t={moveable:!1,resizable:!0,enableDiagonally:!0},e=this.pdfViewer.customs.getAnnotComponentConfig(this,Object.keys(t)),n={start:()=>this.onStartUpdateShape(),update:(t,e)=>this.onShapeUpdating(t,e),moving:(t,e)=>this.onShapeMoving(t,e),end:(t,e,n)=>this.onShapeUpdateEnd(t,e,n),auxiliaryLine:void 0};this.annot.isReplace()&&(n.moveable=!1),this.annot.isArea()&&(n.emitter=this.pdfViewer.eventEmitter,n=y(t,e,n));var i=new sc(n);return this.processShapeControlPermissionCtrl(i),this.addDestroyHook((()=>{i.destroy()})),i}))},n._applyShapeChange=function(){const t=this._getShapeControllerBoundaryBox();this.annot.isArea()&&!this.shapeControl&&this.createShapeControl(),this.shapeControl.active(this.$handler,this.getBoundary(),t)},n.active=function(){t.prototype.active.call(this);let e=this.annot.isArea();this.$rect&&(this.$rect.remove(),this.$rect=null),this.getAppPermission().then((t=>{let n=!0;n=(t.ignorable()||t.isAdjustable())&&!this.moveDisabled(),e?(this.activeRect(),this.$rect.addClass("active"),this._applyShapeChange(),this.boundaryRemove(),n?this.shapeControl.enable():this.shapeControl.disable()):(this.activeTextBoundary(),n?this.boundaryEnabled():this.boundaryDisabled())}))},n.unActive=function(){t.prototype.unActive.call(this),this.annot.isArea()&&this.$rect&&this.$rect.removeClass("active"),this.annot.isGrouped()&&this.annot.groupElements.map((t=>{let e=this.pdfViewer.getAnnotRender(t.getPDFPage().getIndex(),t.getId()),n=e&&e.component;n&&n.isActive&&n.unActive&&n.unActive(),n&&n.deactive&&n.deactive()}))},n.afterRender=function({transformed:t}){if(this.$ui.find("canvas").css({width:"",height:""}),t&&this.isActive){this.annot.isArea()?(this.activeRect(),this._applyShapeChange()):this.activeTextBoundary()}},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.createRectDom=function(){return this.annot.isArea()?(!this.shapeControl&&this.createShapeControl(),this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui):t.prototype.createRectDom.call(this)},n.copyText=function(){let t=this.annot.getContinuousText();return(0,_.copyText)(t).then((e=>(e?this.pdfViewer.eventEmitter.emit(nt.copyTextSuccess,t):this.pdfViewer.eventEmitter.emit(nt.copyTextFailed,t),e)))},n.getBoundaryCss_=function(t,e=0){let n=this.getCharQuadPoints_(t),i=this.getCssTransform_(t),r=V(this.getQuadPointsHeight_(n))/_.dpr,o=this.getPDFPage(),s=this.scale;const a=this.rotate;let c=o.getDeviceMatrix(a);c.scale(s,s);let l=[Math.min,Math.max][e](n[0].x,n[1].x,n[2].x,n[3].x),h=[Math.max,Math.min][e](n[0].y,n[1].y,n[2].y,n[3].y),u=c.transformPoint(l,h);return{transform:i,height:r,left:u[0],top:u[1]}},n.getCssTransform_=function(t){return"rotate("+(90*(t.rotation+this.annot.getPDFPage().getRotation())+this.rotate)+"deg)"},n.getCharQuadPoints_=function(t){return(0,this.annot.engine.getUtils().getQuadPointsFromRect)(t,t.rotation)},n.getQuadPointsHeight_=function(t){return Math.sqrt(Math.pow(t[2].x-t[0].x,2)+Math.pow(t[2].y-t[0].y,2))},n.activeTextBoundary=function(){let t=this.annot,e=t.getStartCharInfo(),n=t.getEndCharInfo();if(e&&n){let t=this.$leftTextBoundary=this.$leftTextBoundary||this.leftTextBoundaryInit(),i=this.$rightTextBoundary=this.$rightTextBoundary||this.rightTextBoundaryInit(),r=this.getBoundaryCss_(e),o=0;1!=e.rotation&&3!=e.rotation||(o=r.height),t.css({height:r.height+hc,transform:r.transform,top:r.top+hc,left:r.left+o+hc});let s=this.getBoundaryCss_(n,1);o=0,1!=n.rotation&&3!=n.rotation||(o=s.height),i.css({height:s.height+hc,transform:s.transform,top:s.top-s.height+hc,left:s.left-o+hc})}this.activeRect(t),this.$rect.on("click.unactive",(t=>{this.isActive&&t.originalEvent.isTrusted&&0===t.button&&!t.shiftKey&&t.ctrlKey&&this.unActive()}))},n.leftTextBoundaryInit=function(){let t,e,n,i,r,o=this.$handler,s=D()(cc),a=s[0],c=new(Ii())(a);c.get("pan").set({direction:Ii().DIRECTION_ALL});const l=()=>{n&&s.css({left:n.left+hc,top:n.top+hc,height:n.height+hc,transform:n.transform})};return c.on("panstart",(e=>{!1!==this.onLeftPanStart(e)&&(i=this.scale,r=this.rotate,t={left:parseFloat(s.css("left")),top:parseFloat(s.css("top")),height:parseFloat(s.css("height")),transform:s.css("transform")},n=t,this.textBoundaryStart())})),c.on("panmove",(o=>{if(!1===this.onLeftPanMove(o))return;let a=o.deltaX,c=o.deltaY;if(!this.pdfViewer.config.highPerformance)return void s.css({left:n.left+a+hc,top:n.top+c+hc});let h=t.height;c+=h/2;let u=this.getPDFPage().reverseDevicePoint([t.left+a,t.top+c],i,r),d=this.annot,f=this.editDebouncePromise=this.editDebouncePromise||new rt;f.push((()=>this.getPDFPage().getCharInfoAtPoint(u,h/2/V(i)).then((t=>{if(!t)return l(),[!1];let n=t.charIndex,i=d.getEndCharIndex();if(n>i)return l(),Promise.resolve([!1]);e=this.getBoundaryCss_(t);let r=0;1!=t.rotation&&3!=t.rotation||(r=e.height);const o={left:e.left+r+hc,top:e.top+hc,height:e.height+hc,transform:e.transform};return Promise.all([d.updateQuadPointsByCharIndex(n,i),t,o])})).then((([t,i,r])=>{if(t)return s.css(r),e&&(n=e),this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),this.onLeftChangeSuccess(i))));l()}),(()=>{l()})))),f.exec()})),c.on("panend",(o=>{if(!1===this.onLeftPanEnd(o))return;let a=o.deltaX,c=o.deltaY,h=t.height;c+=h/2;let u=this.getPDFPage().reverseDevicePoint([t.left+a,t.top+c],i,r),d=this.annot,f=this.editDebouncePromise=this.editDebouncePromise||new rt;f.push((()=>this.getPDFPage().getCharInfoAtPoint(u,h/2/V(i)).then((t=>{if(!t)return l(),[!1];let n=t.charIndex,i=d.getEndCharIndex();if(n>i)return Promise.resolve([!1]);e=this.getBoundaryCss_(t);let r=0;return 1!=t.rotation&&3!=t.rotation||(r=e.height),s.css({left:e.left+r+hc,top:e.top+hc,height:e.height+hc,transform:e.transform}),Promise.all([d.updateQuadPointsByCharIndex(n,i),t])})).then((([t,i])=>{if(t)return e&&(n=e),this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),this.textBoundaryEnd(),this.onLeftChangeSuccess(i))));l()}),(()=>{l()})))),f.exec()})),this.leftHammer=c,o.append(s),this.addDestroyHook((()=>{c.destroy()})),s},n.rightTextBoundaryInit=function(){let t,e,n,i,r,o=this.$handler,s=D()(lc),a=s[0],c=new(Ii())(a);c.get("pan").set({direction:Ii().DIRECTION_ALL});const l=()=>{n&&s.css({left:n.left+hc,top:n.top-e.height+hc,height:n.height+hc,transform:e.transform})};return c.on("panstart",(e=>{!1!==this.onRightPanStart(e)&&(i=this.scale,r=this.rotate,t={left:parseFloat(s.css("left")),top:parseFloat(s.css("top")),height:parseFloat(s.css("height")),transform:s.css("transform")},n=t,this.textBoundaryStart())})),c.on("panmove",(o=>{if(!1===this.onRightPanMove(o))return;let a=o.deltaX,c=o.deltaY;if(this.pdfViewer.config.highPerformance)return void s.css({left:n.left+a+hc,top:n.top+c+hc});let h=t.height;c+=h/2;let u=this.getPDFPage().reverseDevicePoint([t.left+a,t.top+h+c],i,r),d=this.annot,f=this.editDebouncePromise=this.editDebouncePromise||new rt;f.push((()=>this.getPDFPage().getCharInfoAtPoint(u,h/2/V(i)).then((t=>{if(!t)return l(),[!1];let n=d.getStartCharIndex(),i=t.charIndex;if(n>i)return l(),Promise.resolve([!1]);e=this.getBoundaryCss_(t,1);let r=0;return 1!=t.rotation&&3!=t.rotation||(r=e.height),s.css({left:e.left-r+hc,top:e.top-e.height+hc,height:e.height+hc,transform:e.transform}),Promise.all([d.updateQuadPointsByCharIndex(n,i),t])})).then((([t,i])=>{if(t)return e&&(n=e),this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),this.onRightChangeSuccess(i))));l()}),(()=>{l()})))),f.exec()})),c.on("panend",(o=>{if(!1===this.onRightPanEnd(o))return;let a=o.deltaX,c=o.deltaY,h=t.height;c-=h/2;let u=this.getPDFPage().reverseDevicePoint([t.left+a,t.top+h+c],i,r),d=this.annot,f=this.editDebouncePromise=this.editDebouncePromise||new rt;f.push((()=>this.getPDFPage().getCharInfoAtPoint(u,h/2/V(i)).then((t=>{if(!t)return l(),[!1];let n=d.getStartCharIndex(),i=t.charIndex;if(n>i)return l(),Promise.resolve([!1]);e=this.getBoundaryCss_(t,1);let r=0;return 1!=t.rotation&&3!=t.rotation||(r=e.height),s.css({left:e.left-r+hc,top:e.top-e.height+hc,height:e.height+hc,transform:e.transform}),Promise.all([d.updateQuadPointsByCharIndex(n,i),t])})).then((([t,i])=>{if(t)return e&&(n=e),this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),this.textBoundaryEnd(),this.onRightChangeSuccess(i))));l()}),(()=>{l()})))),f.exec()})),this.rightHammer=c,o.append(s),this.addDestroyHook((()=>{c.destroy()})),s},n.textBoundaryStart=function(){},n.textBoundaryEnd=function(){},n.boundaryDisabled=function(){this.toggleBoundary(!1)},n.boundaryEnabled=function(){this.toggleBoundary(!0)},n.toggleBoundary=function(t){this.$leftTextBoundary&&(this.$leftTextBoundary.toggleClass("ban",!t),this.$rightTextBoundary.toggleClass("ban",!t),this.leftHammer.get("pan").set({enable:t}),this.rightHammer.get("pan").set({enable:t}))},n.onStartUpdateShape=function(){this.pdfViewer.config.highPerformance&&this.annot.isArea()&&(this.editAreaDebouncePromise=new _.DebounceAsyncTaskExecutor(10))},n.onShapeUpdating=function(t,e){this.updateCollabOp(t),this.pdfViewer.config.highPerformance&&this.annot.isArea()&&this.editAreaDebouncePromise.exec((()=>this.setRect(t)))},n.onShapeMoving=function(t,e){this.updateCollabOp(t)},n.onShapeUpdateEnd=function(t,e,n){return this.editAreaDebouncePromise?this.editAreaDebouncePromise.waitForLastTask().then((()=>this.setRect(t).then((t=>{"move"==n&&this.pdfViewer.eventEmitter.emit(nt.annotationMovedPosition,[this.annot],this.getPDFPage(),this.annot)})))):this.setRect(t).then((t=>{"move"==n&&this.pdfViewer.eventEmitter.emit(nt.annotationMovedPosition,[this.annot],this.getPDFPage(),this.annot)}))},n.onLeftPanStart=function(t){},n.onLeftPanMove=function(t){},n.onLeftChangeSuccess=function(){this.updateCollabOp()},n.onLeftPanEnd=function(t){},n.onRightPanStart=function(t){},n.onRightPanMove=function(t){},n.updateCollabOp=function(t){0},n.onRightChangeSuccess=function(){return this.updateCollabOp(),Promise.resolve()},n.onRightPanEnd=function(t){},n.getRenderingData=function(e=this.scale,n=this.rotate){return y(t.prototype.getRenderingData.call(this,e,n),{quadPoints:this.annot.getQuadPoints()})},n.boundaryRemove=function(){this.$leftTextBoundary&&(this.$leftTextBoundary.remove(),this.$leftTextBoundary=null,this.leftHammer.destroy(),this.leftHammer=null),this.$rightTextBoundary&&(this.$rightTextBoundary.remove(),this.$rightTextBoundary=null,this.rightHammer.destroy(),this.rightHammer=null)},e}(ka);var dc=uc;let fc=function(t){function e(e){return t.call(this,e)||this}(0,E.Z)(e,t);var n=e.prototype;return n.prepare=function(){this.prepared||(this.canvas=document.createElement("canvas"),this.container=this.component.getContainerElement(),this.container.appendChild(this.canvas),t.prototype.prepare.call(this))},n.destroy=function(){t.prototype.destroy.call(this),this.prepared&&this.canvas.remove()},n.doShow=function(){this.canvas.classList.remove("fv__ui-hide")},n.doHide=function(){this.canvas.classList.add("fv__ui-hide")},n.convertPointToPixel=function(t,e=1){return On.convertTo(t,$n)*e},n.willRender=function(){this.canvas.style.willChange="left, top, width, height",this.container.style.willChange="left; top"},n.afterRender=function(){this.canvas.style.willChange="auto",this.container.style.willChange="auto"},n.render=function(t,e){this.prepared||this.prepare();const n=this.component.getRenderingData(t,e);if(!n)return Promise.resolve();const i=n.annotInfo,r=i.borderInfo||{},o=this.convertPointToPixel(r.width,t),s=n.smartScale;!n.annotFlag.checkNoZoom()||(t=1);const a=n.rect,c=n.outerDeviceRect,l=n.innerDeviceRect;y(l,{width:l.right-l.left,height:l.bottom-l.top}),y(c,{width:c.right-c.left,height:c.bottom-c.top}),this.resetCanvasSize(c.width,c.height),this.container.style.cssText+=`\n            left: ${a.left}px;\n            top: ${a.top}px;\n        `;let h=this.canvas.style;if(0===o&&0===i.borderColor&&!i.fillColor)return h.visibility="hidden",Promise.resolve();if(0===i.opacity)return h.visibility="hidden",Promise.resolve();h.visibility="unset";try{return Promise.resolve(this.doRender({outerRect:c,innerRect:l,deviceRect:a,scale:t,smartScale:s,rotate:e,renderingData:n}))}catch(t){return console.error(t),Promise.resolve()}},n.doRender=function({outerRect:t,innerRect:e,deviceRect:n,scale:i,rotate:r}){},n.resetCanvasSize=function(t,e){this.canvas.width=Math.ceil(t),this.canvas.height=Math.ceil(e),this.canvas.style.width=null,this.canvas.style.height=null},n.invisibleRender=function(){this.canvas&&(this.canvas.width=0)},e}(Ca),pc=function(t){function e(e){var n;return(n=t.call(this,e)||this).lastRenderPromise=Promise.resolve(),n.lastX=0,n.lastY=0,n}(0,E.Z)(e,t);var n=e.prototype;return n.resetCanvasSize=function(){},n.closeTo=function(t,e,n=1e-4){return Math.abs(t-e)<n},n.render=function(e,n){this.prepared||this.prepare();const i=this.component,r=i.getRenderingData(e,n),o=(r.page,this.canvas.getContext("2d",{willReadFrequently:!0}));if(this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent()){const t=this.canvas.getContext("2d");return t.clearRect(0,0,this.canvas.width,this.canvas.height),void t.save()}let[s,a,c,l,h,u,d,f,p,g]=r.tileConfig;r.rect;const m=r.engineRenderingRect,v=r.outerDeviceRect,y=v.right-v.left,w=v.bottom-v.top,b=m.right-m.left,A=m.bottom-m.top;if((!this.closeTo(m.left,this.lastX)||!this.closeTo(m.top,this.lastY))&&this.canvas.width){let e=m.left-this.lastX,n=m.top-this.lastY;const i=o.getImageData(0,0,this.canvas.width,this.canvas.height);t.prototype.resetCanvasSize.call(this,b,A),this.canvas.style.cssText+=`width: ${y}px;height: ${w}px;`,this.container.style.cssText+=`\n                left: ${v.left}px;\n                top: ${v.top}px;\n            `,o.putImageData(i,-e,-n)}return this.lastX=m.left,this.lastY=m.top,i.getPDFPage().getPageAndHighlightBitmap(V(u),n,{x:Math.ceil(p*u),y:Math.ceil(g*u),width:b,height:A}).then((({buffer:e,width:n,height:i,image:r})=>{if(r){let t=new Image;t.onload=function(){o.drawImage(t,0,0,n,i),URL.revokeObjectURL(t.src)},t.src=URL.createObjectURL(r)}else{let r=new(Uint8ClampedArray||Uint8Array)(e),s=o.createImageData(n,i);s.data.set(r),t.prototype.resetCanvasSize.call(this,n,i),this.container.style.cssText+=`\n                    left: ${v.left}px;\n                    top: ${v.top}px;\n                `,this.canvas.style.cssText+=`width: ${y}px;height: ${w}px;`,o.putImageData(s,0,0)}}))},e}(fc);function gc(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let mc=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.convertToCanvasBasedPoint=function(t,e,n,i,r,o){const[s,a]=r.getDevicePoint([t,e],i,o);return{x:s-n.left,y:a-n.top}},n.doRender=function(t){const{scale:e,renderingData:n,rotate:i}=t,r=n.page;let{startCharInfo:o,endCharInfo:s}=n.annotInfo;const a=n.quadPoints,c=n.outerDeviceRect;if(!o){const t=a[0];o={left:t[0].x,top:t[0].y,right:t[1].x,bottom:t[2].y}}if(!s){const t=a[a.length-1];s={left:t[0].x,top:t[0].y,right:t[1].x,bottom:t[2].y}}const l=a.map(((t,n)=>{const o=t.map((t=>this.convertToCanvasBasedPoint(t.x,t.y,c,e,r,i))),s=o.map((t=>t.x)),a=o.map((t=>t.y));let l=Math.min.apply(Math,gc(w.Z,s)),h=Math.max.apply(Math,gc(w.Z,s)),u=Math.max.apply(Math,gc(w.Z,a)),d=Math.min.apply(Math,gc(w.Z,a));return{left:l,right:h,bottom:u,top:d,width:h-l,height:u-d,textBlockHeight:u-d}}));t.quadRects=l},e}(fc),vc=function(t){function e(e){var n;return(n=t.call(this,e)||this).lastX=0,n.lastY=0,n}(0,E.Z)(e,t);var n=e.prototype;return n.prepare=function(){t.prototype.prepare.call(this),_.isChrome||_.isFirefox||_.isSafari||_.isChromiumEdge||(this.canvas.style.cssText+='\n            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n            -ms-filter: alpha(opacity=50);\n            filter: alpha(opacity=50);\n            -moz-opacity: 0.5;\n            -khtml-opacity: 0.5;\n            opacity: 0.5;\n        ')},n.doRender=function(e){const{smartScale:n,scale:i}=e,r=(this.component,e.renderingData),o=r.annotInfo;if(this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent()){const t=this.canvas.getContext("2d");return t.clearRect(0,0,this.canvas.width,this.canvas.height),void t.save()}if(0==o.hasBorderColor)return;const s=this.canvas.getContext("2d"),a=r.outerDeviceRect,c=a.right-a.left,l=a.bottom-a.top;if(this.container.style.cssText+=`\n                left: ${a.left}px;\n                top: ${a.top}px;\n            `,this.canvas.style.cssText+=`width: ${c}px;height: ${l}px;`,s.save(),s.fillStyle=this.numberToRGBAString(o.color),s.globalAlpha=r.opacity,r.isArea)s.fillRect(0,0,this.canvas.width,this.canvas.height);else{t.prototype.doRender.call(this,e);e.quadRects.forEach((t=>{s.fillRect(t.left,t.top,t.width,t.textBlockHeight)}))}s.restore()},e}(mc);var yc=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="highlight",o.$ui.addClass("fv__pdf-page-highlight-annot-container"),o.$handler.addClass("fv__pdf-page-highlight-annot-handler-container"),o}(0,E.Z)(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.checkRenderingModeIs("canvas")?new vc(this):new pc(this)},n.onShapeUpdating=function(e){if(this.checkRenderingModeIs("canvas"))return t.prototype.onShapeUpdating.call(this,e)},n.onShapeMoving=function(e){if(this.checkRenderingModeIs("canvas"))return t.prototype.onShapeMoving.call(this,e)},n.updateRender=function(){return this.redraw()},n.checkRenderingModeIs=function(t){return this.pdfViewer.config.annotRenderingMode.highlight===t},n.getRenderingData=function(e=this.scale,n=this.rotate){return y(t.prototype.getRenderingData.call(this,e,n),{isArea:this.annot.isArea()})},e}(dc);let wc=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.doRender=function(e){t.prototype.doRender.call(this,e);const n=e.renderingData,i=n.annotInfo,r=n.rotate,o=e.quadRects,s=this.canvas.getContext("2d");s.clearRect(0,0,this.canvas.width,this.canvas.height),s.save(),this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent()||(s.globalAlpha=i.opacity,o.forEach((t=>{s.beginPath();const e=90==r||270==r?.12568*t.width:.12568*t.height;0===e||!1===i.hasBorderColor?s.strokeStyle="transparent":s.strokeStyle=this.numberToRGBAString(i.color),s.lineWidth=Math.max(1,e);const n=t.left,o=t.right,a=t.top+t.textBlockHeight/2;switch(r){case 90:s.moveTo(o-t.width/2,0),s.lineTo(o-t.width/2,t.textBlockHeight);break;case 180:s.moveTo(t.right,t.top+t.height/2),s.lineTo(t.left,t.top+t.height/2);break;case 270:s.moveTo(o-t.width/2,t.bottom),s.lineTo(o-t.width/2,t.bottom-t.textBlockHeight);break;default:s.moveTo(n,a),s.lineTo(o,a)}s.stroke()})),s.restore())},e}(mc);var bc=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="strikeout",o.$ui.addClass("fv__pdf-page-strikeout-annot-container"),o.$handler.addClass("fv__pdf-page-strikeout-annot-handler-container"),o}(0,E.Z)(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.checkRenderingModeIs("canvas")?new wc(this):t.prototype.generateApRenderer.call(this)},n.updateRender=function(){let t=this.annot,e=[],n=[],i=this.parent("annotsRender");if(t.isGrouped()){let r=t.getGroupElements();for(let t=r.length;t--;){let o=r[t];n[t]=i.getAnnotRender(o.getId()).component,e[t]=o.update()}}else n=[this],e=[t.update()];return Promise.all(e).then((()=>{let t=[];for(let e=n.length;e--;)t[e]=n[e].render();return Promise.all(t)}))},n.checkRenderingModeIs=function(t){return this.pdfViewer.config.annotRenderingMode.strikeout===t},e}(dc);let Ac=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.doRender=function(e){t.prototype.doRender.call(this,e);const n=e.renderingData,i=n.annotInfo,r=n.rotate,o=e.quadRects,s=this.canvas.getContext("2d");if(s.clearRect(0,0,this.canvas.width,this.canvas.height),s.save(),this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent())return;s.globalAlpha=i.opacity;0===Math.max(1,.12568*o[0].height)||!1===i.hasBorderColor?s.strokeStyle="transparent":s.strokeStyle=this.numberToRGBAString(i.color),o.forEach((t=>{s.beginPath();const e=t.left,n=t.right,i=90==r||270==r?.22568*o[0].width:.12568*o[0].height,a=t.top+t.textBlockHeight-i/2;switch(r){case 90:s.moveTo(e+i/2,t.bottom),s.lineTo(e+i/2,t.top);break;case 180:s.moveTo(t.right,t.top+i/2),s.lineTo(t.left,t.top+i/2);break;case 270:s.moveTo(n,t.bottom),s.lineTo(n,t.bottom-t.textBlockHeight);break;default:s.moveTo(e,a),s.lineTo(n,a)}s.lineWidth=i,s.stroke()})),s.restore()},e}(mc);var Pc=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="Underline",o.$ui.addClass("fv__pdf-page-Underline-annot-container"),o.$handler.addClass("fv__pdf-page-Underline-annot-handler-container"),o}(0,E.Z)(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.checkRenderingModeIs("canvas")?new Ac(this):t.prototype.generateApRenderer.call(this)},n.checkRenderingModeIs=function(t){return this.pdfViewer.config.annotRenderingMode.underline===t},e}(dc);let Sc=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.doRender=function(e){t.prototype.doRender.call(this,e);const n=this.component.annot.info,i=e.renderingData.page.getRotationAngle(),r=e.renderingData.rotate+i,o=e.quadRects,s=this.canvas.getContext("2d");if(s.clearRect(0,0,this.canvas.width,this.canvas.height),s.save(),this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent())return;s.globalAlpha=n.opacity;const a=this.numberToRGBAString(n.color);o.forEach((t=>{let e=r;switch(r){case 0:case 180:2*t.width<t.height&&(e+=90);break;case 90:case 270:2*t.height<t.width&&(e+=90)}e%=360;const i=90==e||270==e?o[0].width:o[0].height;0===i||!1===n.hasBorderColor?s.strokeStyle="transparent":s.strokeStyle=a,s.lineWidth=Math.max(1,.12568*i),s.beginPath();let c=0,l=0,h=0,u=0;switch(e){case 90:c=.2504*t.width,l=Math.ceil(t.height/c),h=t.right-c,u=t.right,s.moveTo(t.left,t.bottom);for(let e=1;e<=l;e++){let n=e%2==0?0:c;s.lineTo(t.left+n,t.bottom-e*c)}break;case 180:c=.2504*t.height,l=Math.ceil(t.width/c),h=t.bottom-c,u=t.bottom,s.moveTo(t.left,t.top);for(let e=1;e<=l;e++){let n=e%2==0?0:c;s.lineTo(t.left+e*c,t.top+n)}break;case 270:c=.2504*t.width,l=Math.ceil(t.height/c),h=t.right-c,u=t.right,s.moveTo(t.right,t.bottom);for(let e=1;e<=l;e++){let n=e%2==0?0:c,i=t.bottom-e*c;i=i<=0?0:i,s.lineTo(t.right-n,i)}break;default:c=.2504*t.height,l=Math.ceil(t.width/c),h=t.bottom-c,u=t.bottom,s.moveTo(t.left,h);for(let e=1;e<=l;e++)s.lineTo(t.left+e*c,e%2==0?h:u)}s.stroke()})),s.restore()},e}(mc);var Cc=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="strikeout",o.$ui.addClass("fv__pdf-page-squiggly-annot-container"),o.$handler.addClass("fv__pdf-page-squiggly-annot-handler-container"),o}(0,E.Z)(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.checkRenderingModeIs("canvas")?new Sc(this):t.prototype.generateApRenderer.call(this)},n.checkRenderingModeIs=function(t){return this.pdfViewer.config.annotRenderingMode.squiggly===t},e}(dc),Ec=m(1160),xc=m.n(Ec);let Dc=function(){function t(t,e){this.x=t,this.y=e}var e=t.prototype;return e.add=function(e,n){return new t(this.x+e,this.y+n)},e.addp=function(e){return new t(this.x+e.x,this.y+e.y)},e.subtractp=function(e){return new t(this.x-e.x,this.y-e.y)},e.subtract=function(e,n){return new t(this.x-e,this.y-n)},e.move=function(e,n){const i=n.x-this.x,r=n.y-this.y,o=e/Math.sqrt(i*i+r*r);return new t(this.x+i*o,this.y+r*o)},e.rotate=function(e,n){const i=this.x-n.x,r=this.y-n.y,o=Math.sqrt(i*i+r*r),s=Math.atan2(r,i)-e,a=o*Math.cos(s),c=o*Math.sin(s);return new t(n.x+a,n.y+c)},e.distanceTo=function(t){const e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},e.slope=function(t){const e=this._dot(t);return Math.acos(e/(this._disp()*t._disp()))},e._dot=function(t){return this.x*t.x+this.y*t.y},e._disp=function(){return Math.sqrt(this._dot(this))},e.equalTo=function(e,n=0){return n=Math.abs(n),e instanceof t&&Math.abs(this.x-e.x)<=n&&Math.abs(this.y-e.y)<=n},e.clone=function(){return new t(this.x,this.y)},t}();const Ic=4.396;let Rc=function(){function t(t){this.component=t}var e=t.prototype;return e.numberToRGBAString=function(t){if("string"==typeof t)return t;const e=(0,_.convertFromNumberToRGBA)(t);return`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`},e.renderLineEnd=function(t,e,n,i,r,o){if(0===i)return;const s=n.renderingData;let a=s.fillColor;"line"===s.annotInfo.type&&(a=s.annotInfo.styleFillColor);const c=n.scale,l=Math.atan2(o.y-r.y,o.x-r.x);switch(t.save(),t.lineJoin="miter",t.beginPath(),i){case st.LineEndingStyle.Square:this.renderSquareEnding(t,o,l,c,e);break;case st.LineEndingStyle.Circle:this.renderCircleEnding(t,o,l,c,e);break;case st.LineEndingStyle.Diamond:this.renderDiamondEnding(t,o,l,c,e);break;case st.LineEndingStyle.OpenArrow:o=o.move(e/2,r),this.renderOpenArrowEnding(t,o,l,c,e);break;case st.LineEndingStyle.ClosedArrow:o=o.move(e/2,r),this.renderClosedArrowEnding(t,o,l,c,e);break;case st.LineEndingStyle.Butt:this.renderButtEnding(t,o,l,c,e);break;case st.LineEndingStyle.ROpenArrow:this.renderROpenArrowEnding(t,o,l,c,e);break;case st.LineEndingStyle.RClosedArrow:this.renderRClosedArrowEnding(t,o,l,c,e);break;case st.LineEndingStyle.Slash:this.renderSlashEnding(t,o,l,c,e)}switch(i){case st.LineEndingStyle.ClosedArrow:case st.LineEndingStyle.RClosedArrow:case st.LineEndingStyle.Diamond:case st.LineEndingStyle.Square:case st.LineEndingStyle.Circle:a&&(t.fillStyle=this.numberToRGBAString(a),t.fill())}t.stroke(),t.restore()},e.renderSquareEnding=function(t,e,n,i,r){const o=Ic*i+3.1*r,s=o/2;t.translate(e.x,e.y),t.rotate(n),t.moveTo(-s,-s),t.rect(-s,-s,o,o)},e.renderCircleEnding=function(t,e,n,i,r){const o=1.75862*i+2*r;t.translate(e.x,e.y),t.rotate(n),t.moveTo(o,0),t.arc(0,0,o,0,2*Math.PI)},e.renderDiamondEnding=function(t,e,n,i,r){const o=Ic*i+3.1*r,s=o/2;t.translate(e.x,e.y),t.rotate(n+Math.PI/4),t.moveTo(-s,-s),t.rect(-s,-s,o,o)},e.renderOpenArrowEnding=function(t,e,n,i,r){const o=30/180*Math.PI;this.renderArrow(t,e,n,i,r,o,!1)},e.renderClosedArrowEnding=function(t,e,n,i,r){const o=30/180*Math.PI;this.renderArrow(t,e,n,i,r,o,!0)},e.renderButtEnding=function(t,e,n,i,r){const o=Math.PI/2,s=Ic*i+3.1*r,a=new Dc(e.x+s/2,e.y).rotate(Math.PI-n+o,e),c=a.rotate(Math.PI,e);t.moveTo(a.x,a.y),t.lineTo(c.x,c.y)},e.renderROpenArrowEnding=function(t,e,n,i,r){const o=150/180*Math.PI;this.renderArrow(t,e,n,i,r,o,!1)},e.renderRClosedArrowEnding=function(t,e,n,i,r){const o=150/180*Math.PI;this.renderArrow(t,e,n,i,r,o,!0)},e.renderArrow=function(t,e,n,i,r,o,s=!1){const a=Ic*i+3.1*r,c=new Dc(e.x+a,e.y),l=c.rotate(Math.PI-n+o,e),h=c.rotate(Math.PI-n-o,e);t.moveTo(l.x,l.y),t.lineTo(e.x,e.y),t.lineTo(h.x,h.y),s&&t.closePath()},e.renderSlashEnding=function(t,e,n,i,r){const o=60/180*Math.PI,s=Ic*i+3.1*r,a=new Dc(e.x+s/2,e.y).rotate(Math.PI-n+o,e),c=a.rotate(Math.PI,e);t.moveTo(a.x,a.y),t.lineTo(c.x,c.y)},t}();const Tc=(t,e,n)=>{const i=t.getRenderingData(e,n);!i.annotFlag.checkNoZoom()||(e=1);const r=i.outerDeviceRect,o=i.innerDeviceRect;return y(o,{width:o.right-o.left,height:o.bottom-o.top}),y(r,{width:r.right-r.left,height:r.bottom-r.top}),{renderingData:i,innerRect:o,outerRect:r,scale:e,rotate:n}},Fc=(t,e)=>{const n=t.canvas,i=n.width,r=n.height;let{x:o,y:s}=e;o-=4,s-=4,o=Math.max(o,2),s=Math.max(s,2),o+8>i&&(o=i-8-2),s+8>r&&(s=r-8-2),t.rotate(0),t.fillStyle="#ffffff",t.rect(o,s,8,8),t.stroke(),t.fill()},_c=Math.log(2);let kc=function(t){function e(e){var n;return(n=t.call(this,e)||this).helper=new Rc(e),n}(0,E.Z)(e,t);var n=e.prototype;return n.doRender=function(t){const e=t.renderingData,n=e.page,i=e.annotInfo,r=i.borderInfo||{},o=t.scale,s=t.rotate,a=this.convertPointToPixel(r.width,o);if(0==a&&-1==i.borderColor&&!i.fillColor)return;const c=this.canvas.getContext("2d");if(c.clearRect(0,0,this.canvas.width,this.canvas.height),c.save(),this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent())return;t.lineWidth=a,c.globalAlpha=i.opacity,c.lineWidth=a,0===a||!1===i.hasBorderColor?c.strokeStyle="transparent":c.strokeStyle=this.numberToRGBAString(i.color);const l=t.outerRect;let h=this.convertToPathPoint(e.startPoint,o,l,n,s),u=this.convertToPathPoint(e.endPoint,o,l,n,s);const d=e.leaderLinePoints;let f=this.convertToPathPoint(d.start,o,l,n,s),p=this.convertToPathPoint(d.end,o,l,n,s);if(e.leaderLineOffset>0){const t=e.annotInfo.leaderLineLength>0?1:-1,n=this.convertPointToPixel(e.leaderLineOffset,o);let i=h.move(n,u).rotate(t*Math.PI/2,h);u=u.move(n,h).rotate(t*-Math.PI/2,u),h=i,i=f.move(n,p).rotate(t*Math.PI/2,f),p=p.move(n,f).rotate(t*-Math.PI/2,p),f=i}const g=e.captionOffset,m=new Dc(this.convertPointToPixel(g.x,o),-this.convertPointToPixel(g.y,o)),v=this.convertPointToPixel(e.leaderLineExtend,o);try{if(r.style===st.BORDER_STYLE.DASHED){const t=r.dashes||[],e=r.dashPhase||0;c.setLineDash&&c.setLineDash(t.map((t=>this.convertPointToPixel(t,o)))),c.lineDashOffset=this.convertPointToPixel(e,o)}c.beginPath(),this.renderLine(c,h,u,f,p,v),c.closePath(),c.stroke(),this.helper.renderLineEnd(c,a,t,e.startStyle,p,f),this.helper.renderLineEnd(c,a,t,e.endingStyle,f,p),this.renderLineCaption(c,t,a,f,p,m)}finally{c.restore()}},n.convertToPathPoint=function(t,e,n,i,r=0){const[o,s]=i.getDevicePoint([t.x,t.y],e,r);return new Dc(o-n.left,s-n.top)},n.renderLine=function(t,e,n,i,r,o){if(t.moveTo(i.x,i.y),t.lineTo(r.x,r.y),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),o>0){const s=i.move(-o,e),a=r.move(-o,n);t.moveTo(i.x,i.y),t.lineTo(s.x,s.y),t.moveTo(r.x,r.y),t.lineTo(a.x,a.y),t.moveTo(a.x,a.y)}},n.renderLineCaption=function(t,e,n,i,r,o){const s=e.renderingData,a=e.scale,c=s.annotInfo;let l=c.content;if("string"!=typeof l)return;if(l=l.trim(),l.length<1)return;let h=Math.atan2(r.y-i.y,r.x-i.x);const u=i.distanceTo(r),d=i.move(.5*u,r),f=16*(p=a+1,Math.log(p)/_c);var p;const g=16777215-(16777215&c.borderColor^10855845);let m;t.save(),t.fillStyle=this.numberToRGBAString(g),t.font=f+"px bold Arial",t.textBaseline="middle",t.textAlign="center";const v=t.measureText(l),y=v.actualBoundingBoxAscent+v.actualBoundingBoxDescent;let w=d.move(o.y,i).rotate(Math.PI/2,d),b=Math.PI/2;switch(b=o.y>0?-Math.PI/2:Math.PI/2,s.captionPos){case st.LINE_CAPTION_POSITION.POS_INLINE:if(0!=o.y&&0!=o.x){m=w.move(o.x,d).rotate(b,w);break}m=w;break;case st.LINE_CAPTION_POSITION.POS_TOP:const t=d.move(.5*(n+y)-o.y,r).rotate(Math.PI/2,d);m=0!=o.x?t.move(o.x,d).rotate(b,w):t}if(s.hasCaption&&(t.translate(m.x,m.y),t.rotate(h),t.fillText(l,0,0),t.restore()),t.beginPath(),Math.abs(o.x)<u/2+v.width/2&&Math.abs(o.y)<y)return;let A=o.x>0?-1:1,P=o.x+A*v.width/2;if(Math.abs(o.x)<=v.width/2){P=0;let t=y/2+4;const e=o.y>0?1:-1;let n=0;Math.abs(o.y)>y&&(n=o.y-e*t),w=d.move(n,i).rotate(Math.PI/2,d)}const S=w.move(P,d).rotate(b,w),C=S.move(Math.abs(P)+n/2,w);t.moveTo(d.x,d.y),t.lineTo(w.x,w.y),t.moveTo(C.x,C.y),t.lineTo(S.x,S.y),t.moveTo(S.x,S.y),t.closePath(),t.stroke()},n.setMarkUp=function(t,e){const n=Tc(this.component,t,e),{renderingData:i,outerRect:r}=n;t=n.scale,e=n.rotate;const o=i.page,s=i.annotInfo,a=s.borderInfo||{},c=this.convertPointToPixel(a.width,t),l=this.canvas.getContext("2d");l.clearRect(0,0,this.canvas.width,this.canvas.height),l.save(),l.lineWidth=c,l.strokeStyle=this.numberToRGBAString(s.color);let h=this.convertToPathPoint(i.startPoint,t,r,o,e),u=this.convertToPathPoint(i.endPoint,t,r,o,e);const d=i.leaderLinePoints;let f=this.convertToPathPoint(d.start,t,r,o,e),p=this.convertToPathPoint(d.end,t,r,o,e);if(i.leaderLineOffset>0){const e=i.annotInfo.leaderLineLength>0?1:-1,n=this.convertPointToPixel(i.leaderLineOffset,t);let r=h.move(n,u).rotate(e*Math.PI/2,h);u=u.move(n,h).rotate(e*-Math.PI/2,u),h=r,r=f.move(n,p).rotate(e*Math.PI/2,f),p=p.move(n,f).rotate(e*-Math.PI/2,p),f=r}const g=this.convertPointToPixel(i.leaderLineExtend,t);l.beginPath(),this.renderLine(l,h,u,f,p,g),l.closePath(),Fc(l,h),Fc(l,u)},e}(fc);var Mc;!function(t){t.EndPoint="end-point",t.MidPoint="mid-point",t.IntersectionPoint="intersection-point",t.NearestPoint="nearest-point"}(Mc||(Mc={}));let Oc=function(){function t(){}return t.prototype.render=function(t){const e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.arc(n/2,n/2,2*Math.PI,0,360),t.stroke()},t}(),Lc=function(){function t(){}return t.prototype.render=function(t){const e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.moveTo(n/2,0),t.lineTo(0,n),t.lineTo(n,n),t.closePath(),t.stroke()},t}(),Nc=function(){function t(){}return t.prototype.render=function(t){const e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.rect(0,0,n,n),t.stroke()},t}(),Bc=function(){function t(){}return t.prototype.render=function(t){const e=t.canvas,n=e.width;e.height=e.height,t.clearRect(0,0,n,n),t.strokeStyle="red",t.moveTo(0,0),t.lineTo(n,n),t.moveTo(0,n),t.lineTo(n,0),t.stroke()},t}(),Vc=function(t){function e(e){var n;return(n=t.call(this)||this).container=e,n.size=16,n.renderer=new Oc,n.canvas=document.createElement("canvas"),n.canvas.classList.add("fv__viewer-snapped-point"),n.addDestroyHook((()=>{n.canvas.parentElement===n.container&&n.container.removeChild(n.canvas)})),n.canvas.width=n.size,n.canvas.height=n.size,n}(0,E.Z)(e,t);var n=e.prototype;return n.setRenderer=function(t){this.renderer=new t,this.redraw()},n.setSize=function(t){this.size=t,this.canvas.width=t,this.canvas.height=t,this.redraw()},n.setPosition=function(t,e){(0,_.cssText)(this.canvas,{left:t+"px",top:e+"px",margin:`${.5*-this.size}px ${.5*-this.size}px`})},n.show=function(t){switch(this.container.appendChild(this.canvas),t){case Mc.MidPoint:this.setRenderer(Lc);break;case Mc.IntersectionPoint:this.setRenderer(Bc);break;case Mc.NearestPoint:this.setRenderer(Nc);break;default:this.setRenderer(Oc)}},n.hide=function(){this.canvas.parentElement===this.container&&this.container.removeChild(this.canvas)},n.redraw=function(){if(!this.renderer)return;const t=this.canvas.getContext("2d");t&&this.renderer.render(t)},e}(_.Disposable);const Uc="px",Hc=Math.log(2);let jc=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="line",_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{var t=new sc({emitter:o.pdfViewer.eventEmitter,start:()=>o.onStartUpdateShape(),update:(t,e)=>o.onShapeUpdating&&o.onShapeUpdating(t,e),moving:(t,e,n)=>o.onShapeMoving(t,e,n),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),resizable:!1,onStatusChange:()=>{o.updateHandlerPointStatus()},auxiliaryLine:void 0});return o.processShapeControlPermissionCtrl(t),t})),o}(0,E.Z)(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.annot.getType()===ti.line&&this.annot.getCaptionOffset()?new kc(this):t.prototype.generateApRenderer.call(this)},n.active=function(){t.prototype.active.call(this),this.activeRect(),this.activeMore();const e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),e),this.setMargin(),this.updateHandlerPosition()},n.movedByOther=function(){if(!this.isActive)return;const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin(),this.updateHandlerPosition()},n.unActive=function(){t.prototype.unActive.call(this),_.Lazy.isPropertyIntialized(this,"shapeControl")&&this.shapeControl.deactive()},n.afterRender=function({transformed:t}){if(t&&this.isActive){this.activeRect(),this.activeMore();const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin(),this.updateHandlerPosition()}},n.activeMore=function(){this.$handler.addClass("fv__annot-line-container");let t=2;0!==this.annot.getLeaderLineLength()&&(t=4),this.hammerInited=this.hammerInited||this.initHammer(t)},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.onStartUpdateShape=function(t,e){this.editDebouncePromise||(this.editDebouncePromise=new _.DebounceAsyncTaskExecutor(0))},n.onShapeUpdating=function(t){this.updateCollabOp(t)},n.onShapeMoving=function(t,e){this.updateCollabOp(t)},n.onShapeUpdateEnd=function(t,e,n){return this.editDebouncePromise?this.editDebouncePromise.waitForLastTask().then((()=>this.moveTo(t.left,t.top,n).then((e=>this._setRect(t,!1))).then((t=>this._applyShapeChange())))):Promise.resolve()},n._applyShapeChange=function(){const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t)},n.getPropertyOptions=function(){let t=this.annot,e=(0,_.colorConvertor)(t.getBorderColor(),"#"),n=t.getOpacity(),i=t.getBorderWidth(),r=t.getStyleFillColor(),o=this.propertyDisabled(),s=this.isLocked();return{color:e,opacity:n,borderWidth:i,lineStartStyle:t.getStartStyle(),lineEndStyle:t.getEndingStyle(),hasCap:t.hasCaption(),fillColor:r,isLocked:s,disabled:o,borderStyle:!0}},n.redraw=function(e){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e).then((()=>{"line"==this.name&&this.annot.calculateLeaderLine(),this.updateHandlerPosition(),this.setMargin()}))},n.updateRender=function(){return this.redraw()},n.initHammer=function(t){let e=this.$handler,n=xc()({anchorCount:t,isLineDimension:this.annot.getIntent()==st.Intents.LINE_DIMENSION,captionText:this.annot.getContent()}),i=D()(n);e.append(i);let r=this.annot.getType(),o=e.find(".fv__pdf-annot-line-point"),s=()=>this.moveDisabled();return this.addDestroyHook(this.pdfViewer.getAnnotAuthorityManager().subscribe(this.annot,(t=>{s=()=>t.ignorable()?this.moveDisabled():!t.isAdjustable()}))),o.each(((t,n)=>{let i,a,c=new Hammer.Manager(n,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});this.addDestroyHook((()=>{c.destroy()}));let l,h=!1;function u(e,n){if("line"!==r||!_.keyboardStatus.isShift)return[e,n];const s=o.eq(1^t),a=parseFloat(s.css("left")),c=parseFloat(s.css("top")),l=i.x+e,h=i.y+n,u=Math.sqrt(Math.pow(l-a,2)+Math.pow(h-c,2)),d=Math.atan2(h-c,l-a),f=.25*Math.PI,p=Math.round(d/f)*f,g=u*Math.cos(p),m=c+u*Math.sin(p);return[a+g-i.x,m-i.y]}c.on("panstart",(t=>{s()?h=!1:(h=!0,a=D()(t.target),"fv__pdf-annot-line-point-item"==a.attr("class")&&(a=a.parent()),i={x:parseFloat(a.css("left")),y:parseFloat(a.css("top"))},this.backupProperty(n),this.boundaryChangeStart(t),this.snappedPointAssistant=new Vc(e.get(0)))})).on("panmove",(e=>{if(!h)return;let[n,r]=u(e.deltaX,e.deltaY);if(this.pdfViewer.config.highPerformance)return void this.updatePoint(n,r,t);a.css({left:i.x+n+Uc,top:i.y+r+Uc});if(this.annot.getIntent()===st.Intents.LINE_DIMENSION&&[2,3].includes(t))return;const o={x:i.x+n,y:i.y+r};this.getSnappedPoint(o).then((t=>{(0,_.isSamePoint)(o,t)?(this.snappedPointAssistant.hide(),l=null):(this.snappedPointAssistant.show(t.type),this.snappedPointAssistant.setPosition(t.x,t.y),l=t)}))})).on("panend",(e=>{if(!h)return;this.snappedPointAssistant&&(this.snappedPointAssistant.destroy(),this.snappedPointAssistant=null);let[n,r]=u(e.deltaX,e.deltaY);l&&(n=l.x-i.x,r=l.y-i.y,a.css({left:i.x+n+Uc,top:i.y+r+Uc}),l=null),this.updatePoint(n,r,t).then((t=>{this.boundaryChangeEnd(e)}))}))})),this.captionHammerHandler(),!0},n.updateCollabPoint=function(t,e,n){if(n>1)return;if(!this.pdfViewer.customs.isCollaborationMode())return;let[i,r]=this.annot.page.reverseDeviceOffset([t,e],this.scale,this.rotate),o=y({},this.annot.getStartPoint()),s=y({},this.annot.getEndPoint());0==n?o={x:o.x+i,y:o.y+r}:1==n&&(s={x:s.x+i,y:s.y+r}),this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this,{points:[o,s],rect:{left:Math.min(o.x-2,s.x-2),right:Math.max(o.x+2,s.x+2),top:Math.max(o.y+2,s.y+2),bottom:Math.min(o.y-2,s.y-2)}})},n.captionHammerHandler=function(){let t=()=>this.moveDisabled();this.addDestroyHook(this.pdfViewer.getAnnotAuthorityManager().subscribe(this.annot,(e=>{t=()=>e.ignorable()?this.moveDisabled():!e.isAdjustable()})));let e=this.$handler.find(".fv__pdf-annot-line-caption");if(!e[0])return;let n=new Hammer.Manager(e[0],{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});this.addDestroyHook((()=>{n.destroy()}));let i,r,o=!1;n.on("panstart",(e=>{t()?o=!1:(o=!0,r=D()(e.target),i={x:parseFloat(r.css("left")),y:parseFloat(r.css("top"))},r.css("border","1px solid #5aa"),this.boundaryChangeStart(e))})).on("panmove",(t=>{o&&(this.pdfViewer.config.highPerformance?this.updatePoint(t.deltaX,t.deltaY,4):r.css({left:i.x+t.deltaX+Uc,top:i.y+t.deltaY+Uc}))})).on("panend",(t=>{o&&(D()(t.target).css("border","none"),this.updatePoint(t.deltaX,t.deltaY,4).then((e=>{this.boundaryChangeEnd(t)})))}))},n.boundaryChangeStart=function(t){},n.boundaryChangeEnd=function(t){},n.updateHandlerPosition=function(t=!1){let e=this.$handler,n=this.scale;const i=this.rotate;let r=[],o=this.annot.getStartPoint();r.push(this.annot.page.getDevicePoint([o.x,o.y],n,i));let s=this.annot.getEndPoint();if(r.push(this.annot.page.getDevicePoint([s.x,s.y],n,i)),0!=this.annot.getLeaderLineLength()){t&&this.annot.calculateLeaderLine();let e=this.annot.getLeaderLinePoints();r.push(this.annot.page.getDevicePoint([e.start.x,e.start.y],n,i)),r.push(this.annot.page.getDevicePoint([e.end.x,e.end.y],n,i))}const a=e.get(0).querySelectorAll("[data-index]");for(let t=0;t<r.length;t++){let e=a[t];e&&(e.style.cssText+=`\n                left: ${r[t][0]}px;\n                top: ${r[t][1]}px;\n            `)}this.updateCaptionPosition()},n.updateCaptionPosition=function(){if(this.annot.hasCaption()){const e=this.$handler.find(".fv__pdf-annot-line-caption"),n=this.scale,i=this.rotate,r=e.width(),o=e.height();let{start:s,end:a}=this.annot.getLeaderLinePoints();const c=this.annot.getCaptionPoint(),l=this.annot.page.getDevicePoint([c.x,c.y],n,i),h=l[0]-r/2,u=l[1]-o/2,d=-Math.atan2(a.y-s.y,a.x-s.x)*(180/Math.PI),f=16*(t=n+1,Math.log(t)/Hc);e.css({left:`${h}${Uc}`,top:`${u}${Uc}`,transform:`rotate(${d}deg)`,"font-size":`${f}${Uc}`})}var t},n.updateHandlerPointStatus=function(){if(!this.$handler)return;const t=this.$handler.get(0).querySelectorAll("[data-index]");if(!t)return;const e=this.shapeControl.isDisabled;t.forEach((t=>{t.style.display=e?"none":"block"}))},n.moved=function(){t.prototype.moved.call(this),this.updateHandlerPosition(),this.setMargin()},n.setContent=function(t){return t===this.annot.getContent()?Promise.resolve(!0):this.annot.setContent(t)},n.setBorderWidth=function(t){return this.annot.setBorderWidth(t).then((t=>t?this.annot.update().then((t=>!0)):t)).then((t=>t?this.updateRender().then((()=>{const e=this._getShapeControllerBoundaryBox();return this.shapeControl.active(this.$handler,this.getBoundary(),e),this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t})):t))},n.setFillColor=function(t){let e=this.annot.setStyleFillColor;return e||(e=this.annot.setFillColor),e.call(this.annot,t).then((t=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t)))},n.setEndingStyle=function(t,e){return this.annot.setEndingStyle(t,e).then((()=>{const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))},n.setMeasureUnit=function(t){return t instanceof Rn&&(t=t.name),this.annot.setMeasureUnit(t).then((()=>this.updateRender())).then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))},n.setMeasureRatio=function({userSpaceValue:t=1,userSpaceUnit:e=_n.name,realValue:n=1,realUnit:i=_n.name}={}){return e instanceof Rn&&(e=e.name),i instanceof Rn&&(i=i.name),this.annot.setMeasureRatio({userSpaceValue:t,userSpaceUnit:e,realValue:n,realUnit:i}).then((()=>this.updateRender())).then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))},n.getMeasureRatio=function(){const t=this.annot.info.measureRatio,[,e,,n,i,,r]=/(\d+(\.\d+)?)(?:\s+)(\w+)(?:\s+\=\s+)(\d+(\.\d+)?)(?:\s+)(\w+)/.exec(t);return{userSpaceValue:Number(e),userSpaceUnit:n,realValue:Number(i),realUnit:r}},n.enableCaption=function(t){return this.annot.enableCaption(t).then((()=>this.redraw().then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))))},n.hasCaption=function(){return this.annot.hasCaption()},n.setBorderStyle=function(t,e){return this.annot.setBorderStyle(t,e).then((()=>this.updateRender())).then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))},n.backupProperty=function(t){switch(t?D()(t).data("index"):""){default:return this.oldRect=y({},this.annot.getRect());case 1:return this.oldEndPoint=y({},this.annot.getEndPoint());case 0:return this.oldStartPoint=y({},this.annot.getStartPoint());case 3:case 2:return this.oldLeaderEndPoint=y({},this.annot.leaderEndPoint)}},n.updateLeaderLineLength=function(t,e,n){let i=this.oldLeaderEndPoint,r=this.annot.getEndPoint(),o=this.annot.getStartPoint(),s=this.annot.Eb;const a=this.annot.k;n&&(i=this.oldLeaderEndPoint,r=this.annot.getEndPoint(),o=this.annot.getStartPoint(),s=this.annot.Eb);let c,l,h=i.x+t,u=i.y+e,d=!0;if((r.x-o.x)*(u-r.y)-(h-r.x)*(r.y-o.y)>0&&(d=!1),isFinite(a)){let t=(a*(u-s)+h)/(a*a+1),e={x:t,y:a*t+s};c=e.x-r.x,l=e.y-r.y}else c=0,l=u-r.y;let f=Math.sqrt(c*c+l*l);return d&&(f=-f),this.annot.setLeaderLineLength(f)},n.updatePoint=function(t,e,n){let i,[r,o]=this.annot.page.reverseDeviceOffset([t,e],this.scale,this.rotate);switch(n){case 1:i=this.annot.setEndPoint({x:this.oldEndPoint.x+r,y:this.oldEndPoint.y+o});break;case 0:i=this.annot.setStartPoint({x:this.oldStartPoint.x+r,y:this.oldStartPoint.y+o});break;case 2:i=this.updateLeaderLineLength(r,o,!1);break;case 3:i=this.updateLeaderLineLength(r,o,!0);break;case 4:i=this.updateCaptionOffset(r,o)}return i.then((()=>{const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.updateHandlerPosition(),this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))},n.updateCaptionOffset=function(t,e){const n=this.annot,i=n.getCaptionPoint();let{start:r,end:o}=n.getLeaderLinePoints(),s=new Dc(r.x,r.y),a=new Dc(o.x,o.y);const c=n.getLeaderLineOffset();if(c>0){let t=s.move(c,a),e=a.move(c,s);s=t.rotate(-Math.PI/2,s),a=e.rotate(Math.PI/2,a)}const l=s.distanceTo(a),h=s.move(l/2,a),u=i.x+t,d=i.y+e;let f,p,g=d-h.y,m=u-h.x;const v=Math.sqrt(Math.pow(m,2)+Math.pow(g,2)),y=this.annot.k;if(isFinite(y)){let t=d-y*u,e=1,n=1;const i=-1/y;if(isFinite(i)){const t=i*u+(s.y-i*s.x)<=d,r=y*u+(h.y-y*h.x)<=d;s.x<=a.x?(n=t?1:-1,e=i>0?r?1:-1:r?-1:1):(n=t?-1:1,e=i>0?r?-1:1:r?1:-1)}else s.y>=a.y?(e=g>0?-1:1,n=m>0?1:-1):(e=g>0?1:-1,n=m>0?-1:1);f=e*Math.abs(y*h.x-h.y+t)/Math.sqrt(Math.pow(y,2)+1),p=n*Math.sqrt(Math.pow(v,2)-Math.pow(f,2))}else{const t=s.x>a.x?-1:1;f=t*m,p=t*g}return n.setCaptionOffset(f,p)},n.setMargin=function(){let t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(Vo.expandOffset(e,t))},n.getRenderingData=function(e=this.scale,n=this.rotate){const i=t.prototype.getRenderingData.call(this,e,n),r=this.annot;return y(i,{leaderLineExtend:r.getLeaderLineExtend?r.getLeaderLineExtend():void 0,startPoint:r.getStartPoint?r.getStartPoint():void 0,endPoint:r.getEndPoint?r.getEndPoint():void 0,leaderLinePoints:r.getLeaderLinePoints?r.getLeaderLinePoints():void 0,leaderLineOffset:r.getLeaderLineOffset?r.getLeaderLineOffset():void 0,captionOffset:r.getCaptionOffset?r.getCaptionOffset():void 0,startStyle:r.getStartStyle?r.getStartStyle():void 0,endingStyle:r.getEndingStyle?r.getEndingStyle():void 0,hasCaption:r.hasCaption?r.hasCaption():void 0,captionPos:r.getCaptionPos?r.getCaptionPos():void 0,fillColor:r.getFillColor()||(r.getStyleFillColor?r.getStyleFillColor():void 0),content:r.info.content})},n.getSnappedPoint=function(t){const e=this.annot.getIntent(),n={[st.Intents.LINE_DIMENSION]:je,[st.Intents.POLYLINE_DIMENSION]:$e,[st.Intents.POLYGON_DIMENSION]:We,[st.Intents.CIRCLE_DIMENSION]:Ye}[e],i=this.pdfViewer.getSnapMode(n),r=this.getPDFPage();if(i&&i.length>0){const[e,n]=r.reverseDevicePoint([t.x,t.y],this.scale,this.rotate);return r.getSnappedPoint({x:e,y:n},i).then((t=>{const[e,n]=r.getDevicePoint([t.x,t.y],this.scale,this.rotate);return{x:e,y:n,type:t.type}}))}return Promise.resolve(t)},e}(ka);var $c=jc;let Wc=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="lineMeasurement",o}(0,E.Z)(e,t);var n=e.prototype;return n.getLengthInInchUnit=function(){const{width:t,height:e}=this.getDimension();return this._getLengthInInchUnit(t,e)},n._getLengthInInchUnit=function(t,e){const n=$n.convertTo(t,_n),i=Wn.convertTo(e,_n);return Math.round(100*Math.sqrt(n*n+i*i))/100},e}($c),Yc=function(){function t(){this.segments=[]}var e=t.prototype;return e.addSegment=function(t){t instanceof Gc&&this.segments.push(t)},e.render=function(t){t.beginPath(),this.segments.forEach((e=>{e.render(t)})),t.closePath()},t}(),Gc=function(){function t(t,e){this.from=t,this.to=e}var e=t.prototype;return e.render=function(t){(0,_.notImplemented)()},e.isJoinedBefore=function(t){return this.to.equalTo(t.from)},e.isJoinedAfter=function(t){return t.to.equalTo(this.from)},e.isJoinedWith=function(t){return this.isJoinedBefore(t)||this.isJoinedAfter(t)},t}(),Kc=function(){function t(){}return t.prototype.generate=function(){(0,_.notImplemented)()},t}(),qc=function(t){function e(e,n=!1){var i;return(i=t.call(this)||this).closing=n,e.length>1&&e.reduce(((t,e,n)=>(i.addSegment(new zc(t,e,1===n)),e))),i}return(0,E.Z)(e,t),e.prototype.render=function(t){t.beginPath(),this.segments.forEach((e=>{e.render(t)})),this.closing&&t.closePath()},e}(Yc),zc=function(t){function e(e,n,i=!1){var r;return(r=t.call(this,e,n)||this).atTheStart=i,r}return(0,E.Z)(e,t),e.prototype.render=function(t){this.atTheStart&&t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y)},e}(Gc);function Jc(t,e,n=5){t.fillStyle="#fff",e.forEach((e=>{t.beginPath(),t.arc(e.x,e.y,n,0,360),t.stroke(),t.fill()}))}function Zc(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let Xc=function(t){function e(e){var n;return(n=t.call(this,e)||this).helper=new Rc(e),n}(0,E.Z)(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polyline")},n.doRender=function(t){const e=t.renderingData,n=e.annotInfo,i=n.borderInfo||{},r=t.scale,o=t.rotate,s=this.canvas.getContext("2d"),a=this.convertPointToPixel(0==i.width?.5:i.width,r);if(0==a&&-1==n.borderColor&&!n.fillColor)return;if(s.clearRect(0,0,this.canvas.width,this.canvas.height),this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent())return;const c=e.page,l=t.innerRect,h=e.vertexes.map((t=>{const[e,n]=c.getDevicePoint([t.x,t.y],r,o);return new Dc(e-l.left,n-l.top)}));t.vertexes=h,s.save(),t.lineWidth=a,s.globalAlpha=n.opacity,s.lineWidth=a,0===a||!1===n.hasBorderColor?s.strokeStyle="transparent":s.strokeStyle=this.numberToRGBAString(n.color);try{switch(i.style){case st.BORDER_STYLE.DASHED:case st.BORDER_STYLE.SOLID:this.renderSolid(s,n,t);case st.BORDER_STYLE.BEVELED:}const r=h[h.length-1],o=h[h.length-2],c=h[0],l=h[1];this.helper.renderLineEnd(s,a,t,e.startStyle,l,c),this.helper.renderLineEnd(s,a,t,e.endingStyle,o,r),this.setContents(s,n.contents,h)}finally{s.restore()}},n.renderSolid=function(t,e,n){const i=n.scale,r=e.borderInfo,o=r.dashes||[],s=r.dashPhase||0;r.style===st.BORDER_STYLE.DASHED&&(t.setLineDash&&t.setLineDash(o.map((t=>this.convertPointToPixel(t,i)))),t.lineDashOffset=this.convertPointToPixel(s,i));new qc(n.vertexes,!1,5).render(t),t.stroke();try{if(!_.isTouchDevice)return;void 0===n.renderingData.annotInfo.id&&Jc(t,n.vertexes)}catch(t){}},n.setMarkUp=function(t,e){const n=Tc(this.component,t,e),{renderingData:i,innerRect:r}=n;t=n.scale,e=n.rotate;const o=i.annotInfo,s=this.canvas.getContext("2d"),a=i.page;s.strokeStyle=this.numberToRGBAString(o.color);i.vertexes.map((n=>{const[i,o]=a.getDevicePoint([n.x,n.y],t,e);return new Dc(i-r.left,o-r.top)})).forEach((t=>Fc(s,t))),s.restore()},n.setContents=function(t,e,n){if(void 0===e)return;if(!n||n.length<3)return;const i=n[n.length-1],r=t;r.beginPath(),r.font="14px Verdana",r.textAlign="left",r.textBaseline="top",r.direction="ltr";var o=r.measureText(e).width;r.fillStyle="#AF6B6B";const s=n.map((t=>t.x)),a=Math.min.apply(Math,Zc(w.Z,s));Math.max.apply(Math,Zc(w.Z,s));Math.abs(i.x-a)>=o&&i.x>a?r.fillText(e,i.x-o,i.y,o):r.fillText(e,i.x,i.y,o),r.closePath()},e}(fc);let Qc=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="polyline",o}(0,E.Z)(e,t);var n=e.prototype;return n.generateApRenderer=function(){return new Xc(this)},n.activeMore=function(){let t=this.annot.getVertexes();const e=this.annot.getPathVertexes();this.$handler.addClass("fv__pdf-annot-polyLine-container");let n=t.length;e.length>0&&(n=e.length),this.hammerInited=this.hammerInited||this.initHammer(n)},n.getPropertyOptions=function(){let t=this.annot,e=(0,_.colorConvertor)(t.getBorderColor(),"#"),n=t.getOpacity(),i=t.getBorderWidth(),r=t.getStyleFillColor(),o=this.propertyDisabled(),s=this.isLocked();return{color:e,opacity:n,fillColor:r,borderWidth:i,lineStartStyle:t.getStartStyle(),lineEndStyle:t.getEndingStyle(),disabled:o,borderStyle:!0,isLocked:s}},n.backupProperty=function(t){if(!t)return this.oldRect=y({},this.annot.getRect());this.oldVertex=y({},this.annot.getVertexes())},n.updatePoint=function(t,e,n){return this.movePointAt(n,{offsetX:t,offsetY:e}).then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))},n.movePointAt=function(t,{offsetX:e=0,offsetY:n=0}={}){const i=this.annot.getPathVertexes();let r;if(i.length>0){const o=i[t],s=this.resolveMovedPoint(o,e,n);r=this.annot.updatePathVertex(t,s)}else{const i=(this.oldVertex||this.annot.getVertexes())[t],o=this.resolveMovedPoint(i,e,n);r=this.annot.updateVertexes(t,o)}return r.then((()=>{this.shapeControl.active(this.$handler,this.getBoundary(),this._getShapeControllerBoundaryBox())}))},n.resolveMovedPoint=function(t,e,n){const[i,r]=this.annot.page.reverseDeviceOffset([e,n],this.scale,this.rotate),o={x:t.x+i,y:t.y+r},s=this.getPDFPage();let a=s.getWidth(),c=s.getHeight();const l=s.getRotationAngle(),h=0==(l/90&1)?a:c,u=0==(l/90&1)?c:a;return o.x=Math.max(o.x,0),o.y=Math.max(o.y,0),o.x=Math.min(o.x,h),o.y=Math.min(o.y,u),o},n.setLastPoint=function(t,e){const n=this.rotate,i=this.scale,r=this.annot.getVertexes().slice(0),o=r[r.length-1],[s,a]=this.annot.page.getDevicePoint([o.x,o.y],i,n);t="number"==typeof t?t:s,e="number"==typeof e?e:a;const[c,l]=this.annot.page.reverseDevicePoint([t,e],i,n);return o.x=c,o.y=l,this.setVertexes(r)},n.addPoint=function(t=0,e=0){const[n,i]=this.annot.page.reverseDevicePoint([t,e],this.scale,this.rotate),r=this.annot.getVertexes().concat({x:n,y:i});return this.setVertexes(r)},n.setVertexes=function(t=this.annot.getVertexes()){return this.annot.setVertexes(t).then((()=>this.updateRender())).then((()=>{this.shapeControl.active(this.$handler,this.getBoundary(),this._getShapeControllerBoundaryBox())}))},n.getVertexes=function(){return this.annot.getVertexes()},n.getPathVertexes=function(){return this.annot.getPathVertexes()},n.deleteVertex=function(t=this.annot.getVertexes().length-1){const e=this.annot.getVertexes().filter(((e,n)=>n!==t));return this.setVertexes(e)},n.updateHandlerPosition=function(){const t=this.$handler,e=this.scale,n=this.rotate;let i=this.annot.getVertexes();const r=this.annot.getPathVertexes();r.length>0&&(i=r);for(let r=0;r<i.length;r++){let o=t.find(`[data-index=${r}]`),s=i[r];s=this.annot.page.getDevicePoint([s.x,s.y],e,n),o.css({left:s[0]+"px",top:s[1]+"px",display:this.shapeControl.isDisabled?"none":"block"})}},n.getRenderingData=function(e=this.scale,n=this.rotate){const i=t.prototype.getRenderingData.call(this,e,n),r=this.getVertexes(),o=this.getPathVertexes();return y(i,{vertexes:o.length>0?o:r})},n.updateCollabPoint=function(t,e,n){if(!this.pdfViewer.customs.isCollaborationMode())return;let[i,r]=this.annot.page.reverseDeviceOffset([t,e],this.scale,this.rotate),o=y({},this.getVertexes());o[n]={x:o[n].x+i,y:o[n].y+r};const s=this.annot.getRect();this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this,{points:Object.values(o),rect:{left:Math.min(s.left,o[n].x-2),right:Math.max(s.right,o[n].x+2),top:Math.max(s.top,o[n].y+2),bottom:Math.min(s.bottom,o[n].y+2)}})},e}($c);var tl=Qc;function el(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let nl=function(t){function e(e,n,i){var r;return(r=t.call(this,null,i)||this).controlPoint1=e,r.controlPoint2=n,r}return(0,E.Z)(e,t),e.prototype.render=function(t){t.bezierCurveTo(this.controlPoint1.x,this.controlPoint1.y,this.controlPoint2.x,this.controlPoint2.y,this.to.x,this.to.y)},e}(Gc),il=function(t){function e(e){return t.call(this,e)||this}return(0,E.Z)(e,t),e.prototype.render=function(t){t.moveTo(this.from.x,this.from.y)},e}(Gc);const rl=.5522847498308,ol=3.14159265358979;let sl=function(t){function e(e,n,i){var r;return(r=t.call(this)||this).points=e,r.innerRect=n,r.outerRect=i,r}return(0,E.Z)(e,t),e.prototype.generate=function(t=4,e,n){const i=new Yc,r=this.points.map((t=>{const e=this.innerRect.height-t.y;return new Dc(t.x,e)})),o=r.length;n||(n=o*t);const s=r.map(((t,e)=>t.distanceTo(r[(e+1)%o]))).reduce(((t,e)=>t+e));let a={left:r[0].x,right:r[0].x,top:r[0].y,bottom:r[0].y},c=s/n;if(0==c)return i;const l=[];let h=0,u=r[0],d=r[1],f=u.distanceTo(d);for(let t=0,e=1;t<n;t++){for(;h>f;)h-=f,e++,u=d,d=r[e%o],f=u.distanceTo(d);l.push(u.move(h,d)),h+=c}const p=l.length;let g=!0,m=5*c/8;return l.forEach(((t,e)=>{const n=function(t,e,n){const i=t.subtractp(e),r=n.subtractp(e),o=[];let s=Math.atan2(i.y,i.x),a=Math.atan2(r.y,r.x);s+=Math.acos(t.distanceTo(e)/(2*m))-ol/9,a-=Math.acos(n.distanceTo(e)/(2*m)),a<s&&(a+=2*ol);let c={left:e.x-m,right:e.x+m,bottom:e.y-m,top:e.y+m},l=al(c,s,a,g);o.push.apply(o,el(w.Z,l.arrAp)),g=!1;const h=e.subtractp(n);return s=Math.atan2(h.y,h.x),s+=Math.acos(n.distanceTo(e)/(2*m)),a=s-ol/9,c={left:n.x-m,right:n.x+m,bottom:n.y-m,top:n.y+m},l=al(c,s,a,g),o.push.apply(o,el(w.Z,l.arrAp)),o}(l[0==e?p-1:e-1],t,l[(e+1)%p]);n.forEach((t=>{const e=t=>{if(t)return new Dc(t.x+this.innerRect.left-this.outerRect.left,this.innerRect.height-t.y+(this.innerRect.top-this.outerRect.top))};t.from=e(t.from),t.to=e(t.to),t.controlPoint1=e(t.controlPoint1),t.controlPoint2=e(t.controlPoint2),i.addSegment(t)}))})),i.rect=a,i},e}(Kc);function al(t,e,n,i){var r,o,s,a,c,l,h,u,d,f,p,g,m,v,y,w,b,A,P,S,C,E,x,D,I={};if(t.left>=t.right||t.bottom>=t.top)return{arrAp:[],pdfRect:I};if(Math.abs(n-e)<=1e-4)return{arrAp:[],pdfRect:I};var R=[];r=(t.right+t.left)/2,o=(t.top+t.bottom)/2,s=Math.abs(t.right-t.left)/2,a=Math.abs(t.top-t.bottom)/2,x=e,C=r+(p=s*Math.cos(x)),E=o+(g=a*Math.sin(x)),I.left=I.right=C,I.bottom=I.top=E,i&&R.push(new il(new Dc(C,E)));var T=1;n<e&&(T=-1);var F=Math.floor(2*e/ol);T>0&&(F+=1),F*=ol/2;for(var _=!1;D=F,T>0?n<=F&&(D=n,_=!0):n>=F&&(D=n,_=!0),p=s*Math.cos(x),g=a*Math.sin(x),b=s*Math.cos(D),d=f=-s*s*a*a,m=p+(C=(P=((h=s*s*g)*f-(u=s*s*(A=a*Math.sin(D)))*d)/((c=a*a*p)*u-(l=a*a*b)*h))-p)*rl,v=g+(E=(S=(l*d-c*f)/(c*u-l*h))-g)*rl,y=b+(C=P-b)*rl,w=A+(E=S-A)*rl,m=C=r+m,v=E=o+v,I.left>m&&(I.left=m),I.bottom>v&&(I.bottom=v),I.right<m&&(I.right=m),I.top<v&&(I.top=v),y=C=r+y,w=E=o+w,I.left>y&&(I.left=y),I.bottom>w&&(I.bottom=w),I.right<y&&(I.right=y),I.top<w&&(I.top=w),b=C=r+b,A=E=o+A,I.left>b&&(I.left=b),I.bottom>A&&(I.bottom=A),I.right<b&&(I.right=b),I.top<A&&(I.top=A),R.push(new nl(new Dc(m,v),new Dc(y,w),new Dc(b,A))),!_;)x=D,F+=T*ol/2;return{arrAp:R,pdfRect:I}}function cl(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let ll=function(t){function e(e,n=!0){var i;return(i=t.call(this,e)||this).closing=n,i.showText=!0,i}(0,E.Z)(e,t);var n=e.prototype;return n.setFlag=function(t,e){this.closing=t,this.showText=e},n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polygon")},n.doRender=function(t){const e=t.renderingData,n=e.annotInfo,i=n.borderInfo||{},r=t.scale,o=t.rotate,s=this.convertPointToPixel(0==i.width?.5:i.width,r);if(0==s&&-1==n.borderColor&&!n.fillColor)return;const a=this.canvas.getContext("2d");if(a.clearRect(0,0,this.canvas.width,this.canvas.height),this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent())return;const c=e.page,{innerRect:l,outerRect:h}=t,u=e.vertexes.map((t=>{const[e,n]=c.getDevicePoint([t.x,t.y],r,o);return new Dc(e-l.left,n-l.top)})),d=e.vertexes.map((t=>{const[e,n]=c.getDevicePoint([t.x,t.y],r,o);return new Dc(e-h.left,n-h.top)}));t.vertexes=u,a.save(),t.lineWidth=s,a.globalAlpha=n.opacity,0===s||!1===n.hasBorderColor?a.strokeStyle="transparent":a.strokeStyle=this.numberToRGBAString(n.color),a.lineWidth=s;try{switch(i.style){case st.BORDER_STYLE.DASHED:case st.BORDER_STYLE.SOLID:case st.BORDER_STYLE.UNDERLINE:case st.BORDER_STYLE.BEVELED:this.renderSolid(a,n,t),this.setContents(a,n.contents,u);break;case st.BORDER_STYLE.CLOUDY:0==s?this.renderSolid(a,n,t):this.renderCloud(a,n,t),this.setContents(a,n.contents,d)}}finally{a.restore()}},n.renderCloud=function(t,e,n){const i=e.fillColor,r=e.borderInfo.cloudIntensity,o=n.innerRect,s=n.outerRect,a=new sl(n.vertexes,o,s);let c=n.renderingData.vertexes,l=c.length;if(l=l*=2==r?8:16,c.length>=2){l=function(t,e){let n=2,i=Math.abs(t.right-t.left),r=Math.abs(t.bottom-t.top);n=1===e?parseInt((i+r)/4):parseInt((i+r)/6);return n<2&&(n=2),n%2!=0&&(n+=1),n}(this.calculateRect(c),r)}a.generate(16/r,t,l).render(t),i&&(t.fillStyle=this.numberToRGBAString(i),t.fill()),t.stroke();try{if(!_.isTouchDevice)return;const e=[],i=o.left-s.left,r=o.top-s.top;n.vertexes.forEach((t=>{e.push({x:t.x+i,y:o.height-t.y+r})})),void 0===n.renderingData.annotInfo.id&&Jc(t,e)}catch(t){}},n.renderSolid=function(t,e,n){const i=n.scale,r=e.borderInfo,o=r.dashes||[],s=r.dashPhase||0,a=e.fillColor;r.style===st.BORDER_STYLE.DASHED&&(t.setLineDash&&t.setLineDash(o.map((t=>this.convertPointToPixel(t,i)))),t.lineDashOffset=this.convertPointToPixel(s,i));new qc(n.vertexes,this.closing).render(t),a&&(t.fillStyle=this.numberToRGBAString(a),t.fill()),t.stroke();try{if(!_.isTouchDevice)return;void 0===n.renderingData.annotInfo.id&&Jc(t,n.vertexes)}catch(t){}},n.setMarkUp=function(t,e){const n=Tc(this.component,t,e),{renderingData:i,innerRect:r}=n;t=n.scale,e=n.rotate;const o=i.annotInfo,s=o.borderInfo||{},a=this.convertPointToPixel(s.width,t),c=this.canvas.getContext("2d");c.clearRect(0,0,this.canvas.width,this.canvas.height);const l=i.page,h=i.vertexes.map((n=>{const[i,o]=l.getDevicePoint([n.x,n.y],t,e);return new Dc(i-r.left,o-r.top)}));c.save(),c.strokeStyle=this.numberToRGBAString(o.color),c.lineWidth=a;const u=this.closing;this.closing=!0,this.renderSolid(c,o,{vertexes:h}),c.beginPath(),h.forEach((t=>Fc(c,t))),this.closing=u},n.setContents=function(t,e,n){if(void 0===e)return;if(!n||n.length<3||!this.showText)return;const i=n[n.length-1],r=t;r.beginPath(),r.font="14px Verdana",r.textAlign="left",r.textBaseline="top",r.direction="ltr";var o=r.measureText(e).width;r.fillStyle="#AF6B6B";const s=n.map((t=>t.x)),a=Math.min.apply(Math,cl(w.Z,s));Math.abs(i.x-a)>=o&&i.x>a?r.fillText(e,i.x-o,i.y,o):r.fillText(e,i.x,i.y,o),r.closePath()},n.calculateRect=function(t){let e={},n={x:0,y:0};e.left=e.right=t[0].x,e.bottom=e.top=t[0].y;let i=t.length;for(let r=1;r<=i;r++)n=t[r%i],e.left>n.x&&(e.left=n.x),e.bottom>n.y&&(e.bottom=n.y),e.right<n.x&&(e.right=n.x),e.top<n.y&&(e.top=n.y);return e},e}(fc);var hl=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="polygon",o}(0,E.Z)(e,t);var n=e.prototype;return n.generateApRenderer=function(){return new ll(this,!0)},n.activeMore=function(){let t=this.annot.getVertexes();const e=this.annot.getPathVertexes();this.$handler.addClass("fv__pdf-annot-polygon-container");let n=t.length;e.length>0&&(n=e.length),this.hammerInited=this.hammerInited||this.initHammer(n)},n.updateRender=function(){return this.annot.update().then((()=>{const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t)})).then((e=>t.prototype.updateRender.call(this)))},n.getPropertyOptions=function(){let t=this.annot;return{color:(0,_.colorConvertor)(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),cloudy:!0,fillColor:t.getFillColor(),disabled:this.propertyDisabled(),borderStyle:!0,isLocked:this.isLocked()}},n.updateBorderProperty=function(t){switch(this.annot.getCloudIntensity()){case 1:t.find("#borderStyle-select [value=6]").attr("selected",!0);break;case 2:t.find("#borderStyle-select [value=7]").attr("selected",!0)}},n.backupProperty=function(t){if(!t)return this.oldRect=y({},this.annot.getRect());this.oldVertex=y({},this.annot.getVertexes())},n.setCloudyIntensity=function(t){this.annot.setBorderStyle(st.BORDER_STYLE.CLOUDY,t).then((()=>this.updateRender().then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))))},n.getRenderingData=function(e=this.scale,n=this.rotate){return y(t.prototype.getRenderingData.call(this,e,n),{})},e}(tl);let ul="annotComponent",dl={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data(ul).showPropertiesDialog(t,e,n)}},actions:{name:"actions",nameI18nKey:"viewer_:contextmenu.annot.actions",callback:function(){this.data(ul).showActionsDialog()},disabled:function(){return this.data(ul).actionsDisabled()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data(ul).removeAnnot()},disabled:function(){return this.data(ul).deleteDisabled()}}};var fl=m(9059),pl=m.n(fl);let gl=function(){function t(t,e,n){this.annotRender=t,this.annot=this.annotRender.annot,this.pdfViewer=this.annotRender.pdfViewer;let i={};if(n)switch(i.type=n.getType(),i.type){case"TypeURI":i.uri=n.getURI();break;case"TypeGoto":i.destination=n.getDestination()}let r=pl()(i);e||(r=`<dialog class="fv__dialog fv__annot-properties-dialog">${r}</dialog>`);let o=D()(r);this.$actionsDialog=o;let s=e||document.body;if(o.appendTo(s),this.bindChangeEvent(),this.update(i),!e||e===document.body){let t=o[0];pa().registerDialog(t),t.showModal()}this.$gotoInput=o.find("#goto-input"),this.$gotoLeftValue=o.find(".fv__action-dialog-goto-left-value"),this.$gotoTopValue=o.find(".fv__action-dialog-goto-top-value"),this.$urlInput=o.find("#url-input");let a=this.pdfViewer.getPDFDocRender().getPDFDoc().getPageCount();if(this.$gotoInput.attr({max:a}),i&&i.type)switch(i.type){case"TypeURI":this.$urlInput.val(i.uri);break;case"TypeGoto":this.$gotoInput.val(i.destination.pageIndex+1);let t=this.pdfViewer.getPDFPageRender(i.destination.pageIndex);t&&t.getPDFPage().then((e=>{let[n,r]=e.getDevicePoint([i.destination.left,i.destination.top],t.getScale(),t.getRotation());this.$gotoLeftValue.html(n.toFixed(2)),this.$gotoTopValue.html(r.toFixed(2))}))}}var e=t.prototype;return e.update=function(t){let e=this.$actionsDialog;t&&t.type&&(e.find("#select-action [value="+t.type+"]").attr("selected",!0),e.find(".fv__action-dialog-box").css("display","none"),e.find("[data-type="+t.type+"]").css("display","block"))},e.bindChangeEvent=function(){let t=this.$actionsDialog,e=this.pdfViewer.getPDFDocRender(),n=e.viewerRender.scrollWrap;this.pdfViewer.eventEmitter.on(nt.zoomToSuccess,((t,e)=>{r()})),this._unwatchScrollEvent=n.addScrollEventListener(r);let i=this;function r(){let t=function(t){let e=t.$container.find(".fv__pdf-view-mode-item"),n=t.viewerRender.scrollWrap,i=n.getScrollTop(),r=(n.getHeight(),n.getScrollLeft()),o=(n.getWidth(),0),s=0,a=0;for(let t=0;t<e.length;t++){let n=e[t],c=D()(n).width(),l=D()(n).height(),h=n.offsetTop,u=h+l,d=n.offsetLeft;if(u>i&&d+c>r){o=t,a=i-h,s=r-d;break}}return{pageIndex:o,left:s,top:a}}(e);i.$gotoInput.val(t.pageIndex+1),i.$gotoLeftValue.html(t.left.toFixed(2)),i.$gotoTopValue.html(t.top.toFixed(2))}t.on("click",".fv__action-btn-cancel",(()=>{this.annotRender.hideActionsDialog()})).on("click",".fv__action-dialog-close-icon",(()=>{this.annotRender.hideActionsDialog()})).on("change","#select-action",(e=>{let n=e.target.value;t.find(".fv__action-dialog-box").css("display","none"),t.find("[data-type="+n+"]").css("display","block")})).on("click",".fv__action-btn-ok",(e=>{let n=t.find("#select-action").val();if("TypeURI"===n){let e=t.find("#url-input").val(),n=new Ji;this.annot.setAction(-1,n).then((()=>{let t=this.annot.getAction();this.annot.setActionData(t,{uri:e}).then((()=>{this.annotRender.hideActionsDialog()}))}))}else if("TypeGoto"===n){let t=this.pdfViewer.getPDFDocRender().getScale(),e=new ur;this.annot.setAction(-1,e).then((()=>{let e={};e.pageIndex=this.$gotoInput.val()-1;let n=i.pdfViewer.getPDFPageRender(e.pageIndex),r=n.getScale();n.getPDFPage().then((i=>{let[o,s]=i.reverseDevicePoint([Number(this.$gotoLeftValue.html()),Number(this.$gotoTopValue.html())],r,n.getRotation());e.left=o,e.top=s,"fitWidth"===t?e.type="ZoomFitHorz":"fitHeight"===t?e.type="ZoomFitPage":(e.type="ZoomXYZ",e.zoomFactor=r);let a=this.annot.getAction();this.annot.setActionData(a,e).then((()=>{this.annotRender.hideActionsDialog()}))}))}))}})).on("input","#goto-input",(t=>{let e=t.target.value;this.pdfViewer.getPDFDocRender().goToPage(e-1,{x:0,y:0})}))},e.close=function(){let t=this.$actionsDialog;this._unwatchScrollEvent&&this._unwatchScrollEvent(),t&&(t[0].close(),t.remove(),this.$actionsDialog=null)},t}();let ml=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-square-canvas")},n.doRender=function(t,e=!0){const n=t.renderingData.annotInfo,i=n.borderInfo||{},r=this.convertPointToPixel(i.width||1,t.scale),o=this.canvas.getContext("2d");if(o.clearRect(0,0,this.canvas.width,this.canvas.height),o.save(),!this.component.needToggleView||!this.component.needToggleView()||this.component.shouldRenderByMouseEvent()){t.lineWidth=r,e&&(o.globalAlpha=n.opacity),0===r||!1===n.hasBorderColor?o.strokeStyle="transparent":o.strokeStyle=this.numberToRGBAString(n.color),o.lineWidth=r;try{switch(i.style){case st.BORDER_STYLE.BEVELED:case st.BORDER_STYLE.UNDERLINE:case st.BORDER_STYLE.SOLID:this.renderSolid(o,n,t);break;case st.BORDER_STYLE.DASHED:this.renderDashed(o,n,t);break;case st.BORDER_STYLE.CLOUDY:this.renderCloud(o,n,t)}const e=n.fillColor;e&&(o.fillStyle=this.numberToRGBAString(e),o.fill()),o.stroke()}finally{o.restore()}}},n.shrinkRect=function(t,e){const n=Vo.on(t).shrink(e).extract();return y(n,{width:n.right-n.left,height:n.bottom-n.top})},n.renderCloud=function(t,e,n){e.fillColor;const i=e.borderInfo.cloudIntensity,r=this.shrinkRect(n.innerRect,0),o=this.shrinkRect(n.outerRect,0),s=r.width,a=r.height;new sl([new Dc(0,a),new Dc(s,a),new Dc(s,0),new Dc(0,0)],r,o).generate(32/3/i).render(t)},n.renderDashed=function(t,e,n){const i=e.borderInfo,r=i.dashes||[],o=i.dashPhase||0,s=n.scale;t.save(),t.setLineDash&&t.setLineDash(r.map((t=>this.convertPointToPixel(t,s)))),t.lineDashOffset=this.convertPointToPixel(o,s),this.renderSolid(t,e,n)},n.renderSolid=function(t,e,n){const i=n.lineWidth,r=n.innerRect,o=n.outerRect,s=r.width,a=r.height,c=.5*i,l=r.left-o.left,h=r.top-o.top;t.beginPath(),t.rect(c+l,c+h,s-i,a-i),t.closePath()},e}(fc),vl=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.style.cssText+="box-sizing: content-box;"},n.doRender=function(t){const e=t.renderingData;if(this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent()){const t=this.canvas.getContext("2d");return t.clearRect(0,0,this.canvas.width,this.canvas.height),void t.save()}return e.highlightModeIsActive?this.doRenderHighlightMode(t):(e.highlightingMode===st.HIGHLIGHTING_MODE.PUSH&&(this.canvas.style.cssText+="border: none; border-color: none;"),this.doRenderNormal(t))},n.doRenderHighlightMode=function(t){switch(t.renderingData.highlightingMode){case st.HIGHLIGHTING_MODE.NONE:return this.doRenderNormal(t);case st.HIGHLIGHTING_MODE.OUTLINE:return this.renderOutline(t);case st.HIGHLIGHTING_MODE.INVERT:return this.renderInvert(t);case st.HIGHLIGHTING_MODE.PUSH:return this.renderPush(t);case st.HIGHLIGHTING_MODE.TOGGLE:return this.renderToggle(t)}},n.doRenderNormal=function(t){this.renderSquare(t)},n.getLineWidth=function(t,e){return this.convertPointToPixel(t,e)/2},n.renderSquare=function(t){const e=t.renderingData.annotInfo,n=e.borderInfo,i=this.getLineWidth(n.width,t.scale);if(0==i&&-1==e.borderColor&&!e.fillColor)return;const r=this.canvas.getContext("2d");if(r.clearRect(0,0,this.canvas.width,this.canvas.height),r.save(),t.lineWidth=i,r.globalAlpha=e.opacity,0===i||!1===e.hasBorderColor?r.strokeStyle="transparent":r.strokeStyle=this.numberToRGBAString(e.color),r.lineWidth=i,n.style===st.BORDER_STYLE.DASHED)this.renderDashed(r,e,t);else this.renderSolid(r,e,t);r.stroke()},n.renderInvert=function(t){const e=this.canvas.getContext("2d"),n=t.renderingData,i=n.page,r=n.annotInfo.borderInfo||{},o=(this.getLineWidth(r.width||0,t.scale),t.outerRect),s={x:o.left,y:o.top,width:o.width,height:o.height};i.getPageBitmap(4*t.scale/3,t.rotate,s,["page","annot"]).then((({width:t,height:n,buffer:i})=>{e.clearRect(0,0,this.canvas.width,this.canvas.height);let r=new(Uint8ClampedArray||Uint8Array)(i);const o=e.createImageData(t,n);o.data.set(r),e.save();const s=o.data;for(let t=0;t<s.length;t+=4)s[t]^=255,s[t+1]^=255,s[t+2]^=0;e.putImageData(o,0,0),e.restore()}))},n.renderToggle=function(t){},n.renderPush=function(t){const e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height),this.canvas.style.cssText+="\n            border: 1px solid;\n            border-color: black #aaa #aaa black;\n        ";const n=t.renderingData.page,i=t.outerRect,r={x:i.left,y:i.top,width:i.width,height:i.height};n.getPageBitmap(4*t.scale/3,t.rotate,r,["page","annot"]).then((({width:n,height:i,buffer:r})=>{e.clearRect(0,0,this.canvas.width,this.canvas.height);let o=new(Uint8ClampedArray||Uint8Array)(r);const s=e.createImageData(n,i);s.data.set(o),e.putImageData(s,0,0),this.renderSquare(t)}))},n.renderOutline=function(t){const e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height);const n=t.renderingData.annotInfo.borderInfo||{};this.renderSquare(t);const i=5*this.getLineWidth(n.width||0,t.scale)/6,r=.5*i,o=t.outerRect;e.save(),e.lineWidth=i,e.strokeStyle="black",e.strokeRect(r,r,o.width-i,o.height-i),e.restore()},e}(ml);const yl=ul;let wl=function(t=".fv__pdf-page-annot-handler-rect"){return{selector:t,items:dl,events:{show:function(){return this.data(ul).updateDeleteStatus(!0),!0},hide:function(){return this.data(ul).updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect");const bl="px";let Al,Pl=function(t){function e(e,n,i,r){var o;o=t.call(this,e,n,i,r)||this,_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{let t={moveable:!0,resizable:!0,enableDiagonally:!0},e=o.pdfViewer.customs.getAnnotComponentConfig((0,C.Z)(o),Object.keys(t));const n=new sc(y(t,e,{emitter:o.pdfViewer.eventEmitter,start:(t,e,n)=>o.onStartUpdateShape(t,e,n),update:(t,e)=>o.onShapeUpdating(t,e),moving:(t,e)=>o.onShapeMoving(t,e),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),rotatable:!1,auxiliaryLine:void 0}));o.moveDisabled()&&n.disable(),n.ownsTo(o.disposor);const i=o.pdfViewer.getAnnotAuthorityManager();o.addDestroyHook(i.subscribe(o.annot,(t=>{o.updateOnPermissionChange(t)})));const r=o.pdfViewer.eventEmitter,s=()=>{o.isDestroyed||o.annot.isDestroyed||i.getPermission(o.annot).then((t=>{o.updateOnPermissionChange(t)}))};return r.on(nt.permissionChanged,s),o.addDestroyHook((()=>{r.off(nt.permissionChanged,s)})),n})),o.addDestroyHook(o.pdfViewer.getCustomOptionsUpdater().onGetAnnotComponentConfigUpdated((()=>{if(!_.Lazy.hasProperty((0,C.Z)(o),"shapeControl"))return;if(!_.Lazy.isPropertyIntialized((0,C.Z)(o),"shapeControl"))return;const t=o.shapeControl.isActive,e=o.shapeControl;_.Lazy.reset((0,C.Z)(o),"shapeControl"),t&&o._applyShapeChange(),e.destroy()}))),o.apRenderer=o.generateApRenderer(),o.name="link",o.highlightModeIsActive=!1,o.$ui.addClass("pdf-page-link-annot-container"),o.$handler.addClass("pdf-page-link-annot-handler-container");let s=o.pdfViewer.i18n;const a=Ur().i18n=function(t){return s.t(t)};o.addDestroyHook((()=>{Ur().i18n===a&&(Ur().i18n=void 0)}));const c=_.isTouchDevice?"touchstart":"mousedown";return o.$ui.on(c,(t=>{o.highlightModeIsActive=!0,o.render();let e=_.isTouchDevice?"touchend":"mouseup";window.addEventListener(e,(()=>{o.highlightModeIsActive=!1,o.render()}),{capture:!0,once:!0})})),o.pdfViewer.eventEmitter.on(nt.pageRemoved,o.pageRemoved=t=>{let e=o.annot&&"TypeGoto"==o.annot.action.info.type&&o.annot.action.info.destination&&o.annot.action.info.destination.pageIndex;if(o.annot&&"number"==typeof e&&e==t){const t=o.annot;t.hasPA().then((e=>{e&&t.resetAByPA()}))}}),o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return wl},e.setContextMenuConfig=function(t){Al=t};var n=e.prototype;return n.actionsDisabled=function(){return!(32&this.docRender.getUserPermission().getValue())},n.onStartUpdateShape=function(t,e,n){},n.onShapeUpdating=function(t){t.width<1||t.height<1||this.setRect(t)},n.onShapeMoving=function(t,e){this.$ui.css({left:t.left,top:t.top})},n.onShapeUpdateEnd=function(t,e,n){switch(n){case sc.ACTION_MOVE:return this.moveTo(t.left,t.top,n);case sc.ACTION_RESIZE:return t.width<1||t.height<1?Promise.resolve():this.setRect(t)}},n.getTileConfig=function(t,e){let n=this.pdfViewer,i=n.getSmartScale(t),r=n.config.tileSize,o=this.annot,s=o.getDeviceRect(1,e),a=o.getDeviceRect(i,e),c=a.right-a.left,l=a.bottom-a.top;return[Math.ceil(l/r),Math.ceil(c/r),c,l,r,i,t,e,s.left,s.top]},n.generateApRenderer=function(){return new vl(this)},n.render=function(t=this.scale,e=this.rotate){let n=this.annot;return this.scale=t,this.rotate=e,n.isEmpty()||n.isDeleted()||n.rectIsEmpty()?(this.renderDestroy(),Promise.resolve()):(this.getAnnotFlag().checkHidden()||this.$ui.removeClass(["fv__markup-annot-invisible"]),this.apRenderer.render(t,e,this.visibleRect))},n.movedByOther=function(){this.isActive&&(this.activeRect(),this.shapeControl.updateBoundary(this.getBoundary()))},n.doAction=function(){this.pdfViewer.actionManager.get(this.annot.action,this).active()},n.afterRender=function({transformed:t}){if(t&&this.isActive){this.activeRect();const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t)}},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.activeMore=function(t,e){},n.activeMoreItem=function(){},n.unActive=function(){t.prototype.unActive.call(this),this.$handler.removeClass("active"),this.shapeControl.deactive()},n.unActiveMore=function(){},n.renderDestroy=function(){this.tileCanvas&&this.tileCanvas.destroy(),this.$handler.remove()},n.updateBorderProperty=function(){},n.getPropertyOptions=function(){let t=this.annot;return{color:(0,_.colorConvertor)(t.getBorderColor(),"#"),borderWidth:t.getBorderWidth(),highlightingMode:t.getHighlightingMode(),actionType:this.$action&&this.$action.getType(),disabled:this.propertyDisabled(),minBorderWidth:0,borderStyle:!0,isLocked:this.isLocked()}},n.showPropertiesDialog=function(){this.$propertiesControl=new va(this,document.body),this.updateDeleteStatus(!0)},n.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close(),this.updateDeleteStatus(!1)},n.showActionsDialog=function(){this.$actionsControl=new gl(this,document.body,this.annot.action),this.updateDeleteStatus(!0)},n.hideActionsDialog=function(){this.$actionsControl.close(),this.updateDeleteStatus(!1)},n.setColor=function(t){return this.annot.setBorderColor(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setBorderWidth=function(t){return this.annot.setBorderWidth(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setBorderStyle=function(t,e){return this.annot.setBorderStyle(t,e).then((()=>this.updateRender().then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))))},n.setHighlightingMode=function(t){return this.annot.setHighlightingMode(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.redraw=function(){return this.activeRect(),this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),this.render()},n.updateRender=function(){return Promise.resolve()},n.destroy=function(){this.$propertiesControl=null,this.contextMenu&&this.contextMenu.destroy(),this.pageRemoved&&this.pdfViewer.eventEmitter.off(nt.pageRemoved,this.pageRemoved),this.pageRemoved=null,t.prototype.destroy.call(this)},n.showContextMenu=function(t,e){if(this.contextMenu){if(_.isDesktop&&this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()===Re)return;return this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e)}return!1},n.removeAnnot=function(){return this.getAppPermission().then((t=>t.ignorable()&&this.deleteDisabled()?Promise.resolve():t.isDeletable()?this.doRemoveAnnot():void 0)).then((t=>{const e=this.pdfViewer.getCurrentActivatable();return e&&e.remove&&e.remove(this),t}))},n.doRemoveAnnot=function(){let t=this.pdfViewer,e=t.eventEmitter,n=this.annot;return Promise.resolve((t.customs.removeAnnotBefore||_.noop)(this)).then((t=>{if(e.emit(nt.removeActionAnnotationBefore,this),!1!==t)return n.getPDFPage().removeAnnot(n).then((t=>(e.emit(nt[t?"removeActionAnnotationSuccess":"removeActionAnnotationFailed"],this,n),t)),(()=>{e.emit(nt.removeActionAnnotationFailed,this)}))}))},n.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},n.activeRect=function(t=this.annot){let e=this.$rect=this.$rect||this.rectInit(),n=this.scale,i=this.rotate,r=t.getDeviceRect(n,i);e.css({left:r.left+bl,top:r.top+bl,width:r.right-r.left+bl,height:r.bottom-r.top+bl})},n.rectInit=function(){let t=this.$handler,e=D()(this.createRectDom());t.append(e);let n=e[0],i=this.rectHammer=new Hammer.Manager(n,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});return i.add(new Hammer.Tap({event:"doubletap",taps:2})),i.add(new Hammer.Tap({event:"singletap"})),i.get("doubletap").recognizeWith("singletap"),i.get("singletap").requireFailure("doubletap"),this.contextMenuIsEnable()&&(t.on("contextmenu",(function(t){t.preventDefault()})),t.on("mouseup",(function(t){t.stopPropagation()})),this.contextMenu=this.pdfViewer.viewerUI.createContextMenu(this,t.get(0),this.getContextMenuConfig()),e.data(yl,this)),this.addDestroyHook((()=>{i.destroy()})),e},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.getContextMenuConfig=function(){if(Al)return Al;let t=this.constructor.getDefaultContextMenuConfig();this.updateContextMenuConfig(t);for(let e in t)if("items"===e){let n=t[e],i=this.pdfViewer.i18n;for(let t in n){let e=n[t];e.nameI18nKey&&(e.name=i.t(e.nameI18nKey))}}return t},n.doubleTapAnnot=function(){},n.updateContextMenuConfig=function(t){},n.active=function(e){t.prototype.active.call(this),this.$handler.addClass("active"),this.activeRect(),this._applyShapeChange()},n._applyShapeChange=function(){const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t)},n.tapAnnot=function(e){if(this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()!==Re)return t.prototype.tapAnnot.call(this,e);e&&0==e.button&&this.doAction()},n.invisibleRender=function(){this.apRenderer.invisibleRender()},n.getRenderingData=function(e=this.scale,n=this.rotate){return y(t.prototype.getRenderingData.call(this,e,n),{highlightingMode:this.annot.getHighlightingMode(),highlightModeIsActive:this.highlightModeIsActive})},e}(Br);var Sl=Pl;const Cl=2*Math.PI;let El=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.doRender=function(t){const e=t.renderingData.annotInfo,n=e.borderInfo||{},i=this.convertPointToPixel(n.width||1,t.scale);if(0==i&&-1==e.borderColor&&!e.fillColor)return;const r=this.canvas.getContext("2d");if(r.clearRect(0,0,this.canvas.width,this.canvas.height),r.save(),!this.component.needToggleView||!this.component.needToggleView()||this.component.shouldRenderByMouseEvent()){t.lineWidth=i,r.globalAlpha=e.opacity,0===i||!1===e.hasBorderColor?r.strokeStyle="transparent":r.strokeStyle=this.numberToRGBAString(e.color),r.lineWidth=i;try{switch(n.style){case st.BORDER_STYLE.SOLID:this.renderSolid(r,e,t);break;case st.BORDER_STYLE.BEVELED:break;case st.BORDER_STYLE.DASHED:this.renderDashed(r,e,t);break;case st.BORDER_STYLE.CLOUDY:0==n.cloudIntensity?this.renderSolid(r,e,t):this.renderCloud(r,e,t)}const i=e.fillColor;i&&(r.fillStyle=this.numberToRGBAString(i),r.fill()),r.stroke(),this.setContents(r,e.contents,t)}finally{r.restore()}}},n.renderSolid=function(t,e,n){this.renderDashed(t,e,n)},n.renderDashed=function(t,e,n){const i=e.borderInfo,r=n.lineWidth,o=n.innerRect,s=n.outerRect,a=i.dashes||[],c=i.dashPhase||0,l=.5*r,h=new Dc(.5*(o.left+o.right)-s.left,.5*(o.top+o.bottom)-s.top),u=Math.abs(.5*o.height-l),d=Math.abs(.5*o.width-l);t.lineDashOffset=c,t.setLineDash&&t.setLineDash(a),t.beginPath(),function(t,e,n,i,r,o=0,s=0,a=2*Math.PI,c=!0){t.ellipse?t.ellipse(e,n,i,r,o,s,a,c):(t.save(),t.translate(e,n),t.rotate(o),t.scale(i,r),t.arc(0,0,1,s,a,c),t.restore())}(t,h.x,h.y,d,u),t.closePath()},n.renderCloud=function(t,e,n){const i=e.borderInfo.cloudIntensity,r=.5*n.lineWidth,o=this.shrinkRect(n.innerRect,r),s=this.shrinkRect(n.outerRect,r),a=new Dc(.5*(s.right-s.left)-(o.left-s.left),.5*(s.bottom-s.top)-(o.top-s.top)),c=.5*o.height-r,l=.5*o.width-r,h=16/i,u=Math.PI/h,d=2*Math.PI,f=Array(Math.floor(d/u)-1).fill(0).map(((t,e)=>e*u%d)).map((t=>{const e=l*Math.cos(d-t),n=c*Math.sin(d-t);return a.add(e,n)}));new sl(f,o,s).generate(1,t).render(t)},n.shrinkRect=function(t,e){const n=Vo.on(t).shrink(e).extract();return y(n,{width:n.right-n.left,height:n.bottom-n.top})},n.setContents=function(t,e,n){if(void 0===e)return;const{innerRect:i,outerRect:r}=n,o=.5*(i.left+i.right)-r.left,s=.5*(i.top+i.bottom)-r.top,a=t;a.beginPath(),a.font="14px Verdana",a.textAlign="left",a.textBaseline="top",a.direction="ltr";var c=a.measureText(e).width;a.fillStyle="#AF6B6B",a.fillText(e,o-c/2,s-7,c),a.closePath()},e}(fc);const xl=function(t=".fv__pdf-page-annot-handler-rect"){return da(t)}();let Dl=function(t){function e(e,n,i,r){var o;return o=t.call(this,e,n,i,r)||this,_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{let t={moveable:!0,resizable:!0},e=o.pdfViewer.customs.getAnnotComponentConfig((0,C.Z)(o),Object.keys(t));const n=new sc(y(t,e,{emitter:o.pdfViewer.eventEmitter,start:()=>o.onStartUpdateShape(),update:(t,e)=>o.onShapeUpdating(t,e),moving:(t,e)=>o.onShapeMoving(t,e),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),rotatable:!1,auxiliaryLine:void 0}));return o.processShapeControlPermissionCtrl(n),n})),o.$ui.addClass("circle-ui"),o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return xl};var n=e.prototype;return n.generateApRenderer=function(){return new El(this)},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n._applyShapeChange=function(){const t=this._getShapeControllerBoundaryBox(),e=this.getInnerBoundary();this.shapeControl.active(this.$handler,e,t),this._updateShapeControlMargin()},n.active=function(){t.prototype.active.call(this),this.activeRect(this.annot),this._applyShapeChange();const e=this.shapeControl.getPreviewerContext();this._previewUpdatedShape(this.shapeControl.getCurrentShape(),e)},n.activeRect=function(t=this.annot){const e=this.$rect=this.$rect||this.rectInit(),n=this.scale,i=this.rotate,r=t.getDeviceInnerRect(n,i),o="px";e.css({left:r.left+o,top:r.top+o,width:r.right-r.left+o,height:r.bottom-r.top+o})},n._updateShapeControllerBoundaryBox=function(){this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox()),this._updateShapeControlMargin()},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),i=this.getInnerRect(),r=this.getRect(),o=Vo.subtract(i,r);return Vo.on({left:0,top:0,right:e,bottom:n}).add(o).extract()},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},n.onStartUpdateShape=function(t,e){this.editDebouncePromise||(this.editDebouncePromise=new _.DebounceAsyncTaskExecutor(0))},n.onShapeUpdating=function(t,e){this.updateCollabOp(t),this.pdfViewer.config.highPerformance&&(this._previewUpdatedShape(t,e),this.editDebouncePromise&&this.editDebouncePromise.exec((()=>this.setRect(this._transformShapeOfInnerRectToOuterRect(t)).then((t=>{this._updateShapeControllerBoundaryBox()})))))},n.onShapeMoving=function(t,e){this.updateCollabOp(t),this.justMoved=!0,this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((()=>{const e=this.getRect(),n=this.getInnerRect(),i=e.left-n.left,r=e.top-n.top;return this.moveTo(t.left+i,t.top+r).then((t=>{this._updateShapeControllerBoundaryBox()}))}))},n.onShapeUpdateEnd=function(t,e,n){this._previewUpdatedShape(t,e);const i=this.getRect(),r=this.getInnerRect(),o=i.left-r.left,s=i.top-r.top;return this.editDebouncePromise?this.editDebouncePromise.waitForLastTask().then((()=>{let e=!!this.justMoved;return this.moveTo(t.left+o,t.top+s,n,!0,!1,e).then((e=>{!this.justMoved&&this._setRect(this._transformShapeOfInnerRectToOuterRect(t),!0),this.justMoved=!1})).then((t=>{this._updateShapeControllerBoundaryBox()}))})):Promise.resolve()},n._transformShapeOfInnerRectToOuterRect=function(t){const e={left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},n=Vo.subtract(this.getRect(),this.getInnerRect()),i=Vo.on(e).add(n).extract();return{left:i.left,top:i.top,width:i.right-i.left,height:i.bottom-i.top}},n._previewUpdatedShape=function(t,e){e.clearRect(0,0,t.width,t.height);const n=t.width/2,i=t.height/2,r=n,o=i;e.strokeStyle="#759DB8",e.lineWidth=1,function(t,e,n,i,r){const o=Math.max(i,r),s=i/o,a=r/o;t.save(),t.scale(s,a),t.beginPath(),t.arc(e/s,n/a,o,0,Cl,!1),t.closePath(),t.restore()}(e,n,i,r,o),e.stroke()},n.getPropertyOptions=function(){let t=this.annot;return{color:(0,_.colorConvertor)(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),cloudy:!0,fillColor:t.getFillColor(),disabled:this.propertyDisabled(),borderStyle:!0,isLocked:this.isLocked()}},n.render=function(e=this.scale,n=this.rotate){return t.prototype.render.call(this,e,n)},n.setBorderWidth=function(t){return this.annot.setBorderWidth(t).then((t=>this._handlerRerender(t)))},n.setBorderStyle=function(t,e){return this.annot.setBorderStyle(t,e).then((t=>this._handlerRerender(t)))},n.setCloudIntencity=function(t){return this.setBorderStyle(st.BORDER_STYLE.CLOUDY,t)},n.setFillColor=function(t){return this.annot.setFillColor(t).then((t=>this._handlerRerender(t)))},n.getInnerRect=function(t=this.scale,e=this.rotate){const n=this.getPDFPage(),i=this.annot.getInnerRect(),r=n.getDeviceRect(i,t,e);return{left:r.left,top:r.top,right:r.right,bottom:r.bottom}},n.getInnerBoundary=function(){const t=this.getPDFPage(),e=this.annot.getInnerRect(),n=t.getDeviceRect(e,this.scale,this.rotate);return{left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top}},n._handlerRerender=function(t){return t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t},n._updateShapeControlMargin=function(){const t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(Vo.expandOffset(e,t))},e}(ka);var Il=m(3110),Rl=m.n(Il),Tl=m(7308),Fl=m.n(Tl),_l=m(3856),kl=m.n(_l),Ml=m(4814),Ol=m.n(Ml),Ll=m(9797),Nl=m.n(Ll),Bl=m(4739),Vl=m.n(Bl),Ul=m(1158),Hl=m.n(Ul),jl=m(2186),$l=m.n(jl),Wl=m(927),Yl=m.n(Wl),Gl=m(5984),Kl=m.n(Gl),ql=m(1490),zl=m.n(ql),Jl=m(9856),Zl=m.n(Jl),Xl=m(7156),Ql=m.n(Xl),th=m(9649),eh=m.n(th),nh=m(7283),ih=m.n(nh),rh={Check:Rl(),Circle:Fl(),Comment:kl(),Cross:Ol(),Help:Nl(),Insert:Vl(),Key:Hl(),NewParagraph:$l(),Note:Yl(),Paragraph:Kl(),RightArrow:zl(),RightPointer:Zl(),Star:Ql(),UpArrow:eh(),UpLeftArrow:ih()},oh=m(1583),sh=m.n(oh),ah=m(6283),ch=m.n(ah),lh=m(6852),hh=m.n(lh),uh=m(8807),dh=m.n(uh),fh={Graph:sh(),Paperclip:ch(),PushPin:hh(),Tag:dh()},ph=m(8998),gh=m.n(ph),mh=m(2314),vh=m.n(mh),yh=m(9291),wh=m.n(yh),bh={Ear:gh(),Mic:vh(),Speaker:wh()};const Ah={};let Ph=function(t){function e(e){var n;return(n=t.call(this,e)||this).annot=e.annot,n}(0,E.Z)(e,t);var n=e.prototype;return n.render=function(t,e){let n=this.annot,i=n.getFlags(),r=n.getDeviceRect(t,e);r.width=r.right-r.left,r.height=r.bottom-r.top,8&i&&(r.width/=4*t/3,r.height/=4*t/3);let o=function(t,e,n){if(!t||!e)return"";let i,r=t+e+n;if(r in Ah)return Ah[r];if("text"===t?i=rh:"fileattachment"===t?i=fh:"sound"===t&&(i=bh),!i)return"";let o=i[e]({fillColor:n});return Ah[r]=o}(n.getType(),n.getIconName(),(0,_.colorConvertor)(n.getBorderColor(),"#")),s="unset";return this.component.needToggleView&&this.component.needToggleView()&&(this.component.shouldRenderByMouseEvent()||(s="hidden")),this.component.$ui.css({left:r.left,top:r.top,width:r.width,height:r.height,opacity:n.getOpacity(),visibility:s}).empty().html(o),Promise.resolve()},n.destroy=function(){t.prototype.destroy.call(this),this.annot=null},e}(Ca);var Sh;!function(t){t.fully="fully",t.playable="playable",t.adjustable="adjustable",t.deletable="deletable",t.modifiable="modifiable",t.attachmentDownloadable="attachmentDownloadable",t.replyable="replyable",t.editable="editable"}(Sh||(Sh={}));let Ch=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="note",o.$ui.addClass("fv__pdf-page-note-annot-container"),o.$handler.addClass("fv__pdf-page-note-annot-handler-container"),_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{var t=new sc({emitter:o.pdfViewer.eventEmitter,start:()=>o.onStartUpdateShape(),moving:(t,e,n)=>o.onShapeMoving(t,e,n),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),resizable:!1,rotatable:!1,auxiliaryLine:void 0});return t.ui.classList.add("fv__pdf-page-annot-handler-rect"),o.processShapeControlPermissionCtrl(t),t})),o}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){t.prototype.active.call(this),this.activeRect(),this._applyShapeChange()},n._applyShapeChange=function(){const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin()},n.activeRect=function(t=this.annot){let e,n,i=this.$rect=this.$rect||this.rectInit(),r=this.scale,o=this.rotate,s=t.getDeviceRect(r,o);if(8&this.annot.getFlags()){const t=this.annot.getRect();e=t.right-t.left,n=t.top-t.bottom}else{const t=this.annot.getDeviceRect(1,o);e=t.right-t.left,n=t.bottom-t.top}i.css({left:s.left,top:s.top,width:e,height:n})},n.movedByOther=function(){this.isActive&&(this.activeRect(),this._applyShapeChange())},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},n.setIconName=function(t){return this.annot.setIconName(t).then((t=>t))},n.createRectDom=function(){return this.shapeControl.ui},n.onStartUpdateShape=function(){this.editDebouncePromiseQueue||(this.editDebouncePromiseQueue=new _.DebounceAsyncTaskExecutor(0))},n.onShapeMoving=function(t,e,n){if(this.updateCollabOp(t,!0),this.pdfViewer.config.highPerformance)this.editDebouncePromiseQueue.exec((()=>this.moveTo(t.left,t.top).then((t=>{this.setMargin(),this._applyShapeChange()}))));else{let t=this._moveOffset||{},e=t.offsetLeft||0,i=t.offsetTop||0;this._moveOffset={offsetLeft:e+n.offsetLeft,offsetTop:i+n.offsetTop}}},n.onShapeUpdateEnd=function(t,e){return this.editDebouncePromiseQueue.waitForLastTask().then((()=>this.moveTo(t.left,t.top,"move").then((t=>{this.setMargin(),this._applyShapeChange()}))))},n.setMargin=function(){let t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(Vo.expandOffset(e,t))},n.redraw=function(e){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.generateApRenderer=function(){return this.isHTMLSimulate("note")?new Ph(this):t.prototype.generateApRenderer.call(this)},n.render=function(e=this.scale,n=this.rotate){let i=this.annot.info;if("R"==i.RT&&(0!=i.IRT||null!=i.RT))return Promise.resolve();if(t.prototype.render.call(this,e,n),1!=_.dpr&&this.tileCanvas){let t=this.getTileConfig(e,n),i=Math.max(.5,e*_.dpr/t[5]);this.tileCanvas.$container.css({transform:"scale("+i+")"})}},e}(ka);var Eh=Ch;let xh=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.doRender=function(e,n,i){return t.prototype.doRender.call(this,e,n,i).then((()=>{this.tileCanvas.$container.get(0).style.cssText+=`\n                transform-origin: center;\n                transform: rotate(-${n}deg);\n            `}))},e}(xa),Dh=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="file",o.$ui.addClass("fv__pdf-page-file-annot-container"),o.$handler.addClass("fv__pdf-page-file-annot-handler-container"),_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{var t=new sc({emitter:o.pdfViewer.eventEmitter,start:()=>o.onStartUpdateShape(),moving:(t,e,n)=>o.onShapeMoving(t,e,n),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),resizable:!1,auxiliaryLine:void 0});return t.ui.classList.add("fv__pdf-page-annot-handler-rect"),(o.groupMoveDisabled()||o.moveDisabled())&&t.disable(),o.getAppPermission().then((e=>{e.isAdjustable()||e.isEditable()||t.disable()})),t})),o}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){t.prototype.active.call(this),this.activeRect(),this._applyShapeChange()},n.activeRect=function(t=this.annot){let e=this.$rect=this.$rect||this.rectInit(),n=this.scale,i=this.rotate,r=this.getRect(n,i);e.css({left:r.left,top:r.top,width:r.right-r.left,height:r.bottom-r.top})},n._applyShapeChange=function(){const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin()},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},n.setIconName=function(t){return this.annot.setIconName(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.createRectDom=function(){return this.shapeControl.ui},n.onStartUpdateShape=function(t,e){this.editDebouncePromise||(this.editDebouncePromise=new _.DebounceAsyncTaskExecutor(0))},n.onShapeMoving=function(t,e,n){this.updateCollabOp(t),this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((()=>this.moveTo(t.left,t.top).then((t=>{this.setMargin(),this._applyShapeChange()}))))},n.onShapeUpdateEnd=function(t,e){return this.editDebouncePromise?this.editDebouncePromise.waitForLastTask().then((()=>this.moveTo(t.left,t.top,"move").then((t=>{this.setMargin(),this._applyShapeChange()})))):Promise.resolve()},n.setMargin=function(){let t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(Vo.expandOffset(e,t))},n.onDoubleTap=function(){return!1},n.doubleTapAnnot=function(t){if("comment"===t)return this.getAppPermission().then((t=>{t.isEditable()&&this.showReplyDialog("comment")}));this.rectDoubleTap()},n.rectDoubleTap=function(){this.download()},n.download=function(){this.getAppPermission().then((t=>{t.isAttachmentDownloadable()&&this.doDownload()}))},n.doDownload=function(){let t=this.pdfViewer;if(!this.annot.getFileSpec())return t.viewerUI.alert({message:"sidebar.attachment.emptyFile",level:"warning"});let e=Promise.resolve();t.getSafeReadingMode()&&(e=t.viewerUI.confirm({message:"sidebar.attachment.safeModeDownload",level:"warning"})),e.then((()=>{this.annot.getFileattachmentStream().then((t=>{Ho(t,this.annot.getFileSpec().getFileName(),"application/octet-stream")}))}),ei)},n.redraw=function(e){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.generateApRenderer=function(){return this.isHTMLSimulate("fileAttachment")?new Ph(this):new xh(this)},n.getRect=function(t=this.scale,e=this.rotate){const n=this.getPDFPage(),i=this.annot.getRect(),r=n.getDeviceRect(i,t,e),o=n.getDeviceRect(i,t,0);let s=o.right-o.left,a=o.bottom-o.top;return 8&this.annot.getFlags()&&(s=i.right-i.left,a=i.top-i.bottom),{left:r.left,top:r.top,right:r.left+s,bottom:r.top+a}},n.getBoundary=function(){const t=this.annot.getDeviceRect(this.scale,this.rotate),e=this.annot.getDeviceRect(this.scale,0);let n=this.annot.getRect(),i=e.right-e.left,r=e.bottom-e.top;return 8&this.annot.getFlags()&&(i=n.right-n.left,r=n.top-n.bottom),{left:t.left,top:t.top,width:i,height:r}},e}(ka);var Ih=Dh;let Rh=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.doRender=function(t){const e=this.component.annot.info,n=t.outerRect,i=(t.rotate%360+360)%360;if(-1==e.borderColor)return;const r=this.canvas.getContext("2d");if(r.clearRect(0,0,this.canvas.width,this.canvas.height),this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent())return;r.save(),r.globalAlpha=e.opacity;const o=.2*n.width;0===o||!1===e.hasBorderColor?r.strokeStyle="transparent":r.strokeStyle=this.numberToRGBAString(e.color);const s=.5*o,a=s,c=n.width-s,l=n.height-2*s/3,h=Math.atan2(l,n.width/2),u=o/Math.sin(h)+.3*s,d=new qc([new Dc(a,l),new Dc(n.width/2,u),new Dc(c,l)],!1);r.lineWidth=o;const f=i/180*Math.PI;let p=0,g=0;switch(i){case 90:p=-a,g=-(l+u);break;case 270:p=-c;break;case 180:p=-(a+c),g=-l}r.rotate(f),r.translate(p,g),d.render(r),r.stroke(),r.restore()},e}(fc),Th=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="caret",o.$ui.addClass("fv__pdf-page-caret-annot-container"),o.$handler.addClass("fv__pdf-page-caret-annot-handler-container"),o}(0,E.Z)(e,t);var n=e.prototype;return n.updateOnPermissionChange=function(t){if(this.isDestroyed)return;let e=!1;e=!!this.readOnlyDisabled()||!t.ignorable()&&!t.isModifiable(),e?this.$handler.addClass("disabled"):this.$handler.removeClass("disabled")},n.generateApRenderer=function(){return this.checkRenderingModeIs("canvas")?new Rh(this):t.prototype.generateApRenderer.call(this)},n.checkRenderingModeIs=function(t){return this.pdfViewer.config.annotRenderingMode.caret===t},n.active=function(){t.prototype.active.call(this),this.activeRect(),this.$rect.addClass("active")},n.afterRender=function({transformed:t}){t&&this.isActive&&this.activeRect()},n.unActive=function(){t.prototype.unActive.call(this);let e=this.$rect;e&&e.removeClass("active")},n.isReplace=function(){return this.annot.isGrouped()&&"replace"===(this.annot.getIntent()||"").toLowerCase()},n.showUI=function(){if(this.isReplace()){const e=this.annot.getGroupElements().filter((t=>t!==this.annot))[0];if(e&&e.isDeleted())return t.prototype.showUI.call(this);const n=this.parent("annotsRender").getAnnotRender(e.getId());return t.prototype.showUI.call(this).then((()=>n.component.showUI()))}return t.prototype.showUI.call(this)},n.hideUI=function(){if(this.isReplace()){const e=this.annot.getGroupElements().filter((t=>t!==this.annot))[0];if(e&&e.isDeleted())return t.prototype.hideUI.call(this);const n=this.parent("annotsRender").getAnnotRender(e.getId());return t.prototype.hideUI.call(this).then((()=>n.component.hideUI()))}return t.prototype.hideUI.call(this)},e}(ka);var Fh=Th;const _h=da();let kh=function(t){function e(e,n,i,r){var o;return o=t.call(this,e,n,i,r)||this,_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{let t={moveable:!0,resizable:!0,enableDiagonally:!0},e=o.pdfViewer.customs.getAnnotComponentConfig((0,C.Z)(o),Object.keys(t));const n=new sc(y(t,e,{emitter:o.pdfViewer.eventEmitter,start:(t,e,n)=>o.onStartUpdateShape(t,e,n),moving:(t,e)=>o.onShapeMoving(t,e),update:(t,e)=>o.onShapeUpdating(t,e),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),rotatable:!1,auxiliaryLine:void 0}));return o.processShapeControlPermissionCtrl(n),n})),o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return _h};var n=e.prototype;return n.generateApRenderer=function(){return this.isHTMLSimulate("square")?new ml(this):t.prototype.generateApRenderer.call(this)},n.onStartUpdateShape=function(t,e,n){this.editDebouncePromise||(this.editDebouncePromise=new _.DebounceAsyncTaskExecutor(0))},n.onShapeMoving=function(t,e){this.updateCollabOp(t),this.pdfViewer.config.highPerformance},n.onShapeUpdating=function(t,e){this.updateCollabOp(t),this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((()=>this.setRect(this._transformShapeOfInnerRectToOuterRect(t)).then((t=>{this._updateShapeControlMargin(),this._updateShapeControllerBoundaryBox()}))))},n.onShapeUpdateEnd=function(t,e,n){return this.editDebouncePromise?this.editDebouncePromise.exec((()=>{const e=this.getRect(),i=this.getInnerRect(),r=e.left-i.left,o=e.top-i.top;return this.moveTo(t.left+r,t.top+o,n,!0,!1,!1).then((e=>this._setRect(this._transformShapeOfInnerRectToOuterRect(t),!0))).then((t=>{this._updateShapeControlMargin(),this._updateShapeControllerBoundaryBox()}))})):Promise.resolve()},n._transformShapeOfInnerRectToOuterRect=function(t){const e={left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},n=Vo.subtract(this.getRect(),this.getInnerRect()),i=Vo.on(e).add(n).extract();return{left:i.left,top:i.top,width:i.right-i.left,height:i.bottom-i.top}},n.active=function(){t.prototype.active.call(this),this.activeRect(this.annot),this._applyShapeChange();const e=this.shapeControl.getPreviewerContext();this._previewUpdatedShape(this.shapeControl.getCurrentShape(),e)},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n._applyShapeChange=function(){const t=this.getInnerBoundary(),e=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,t,e),this._updateShapeControlMargin()},n.activeRect=function(t=this.annot){const e=this.$rect=this.$rect||this.rectInit(),n=this.scale,i=this.rotate,r=t.getDeviceInnerRect(n,i),o="px";e.css({left:r.left+o,top:r.top+o,width:r.right-r.left+o,height:r.bottom-r.top+o})},n._updateShapeControllerBoundaryBox=function(){this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox())},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate),i=this.getInnerRect(),r=this.getRect(),o=Vo.subtract(i,r);return Vo.on({left:0,top:0,right:e,bottom:n}).add(o).extract()},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.getPropertyOptions=function(){let t=this.annot;return{color:(0,_.colorConvertor)(t.getBorderColor(),"#"),opacity:t.getOpacity(),borderWidth:t.getBorderWidth(),cloudy:!0,fillColor:t.getFillColor(),disabled:this.propertyDisabled(),borderStyle:!0,isLocked:this.isLocked()}},n._previewUpdatedShape=function(t,e){e.clearRect(0,0,t.width,t.height),e.strokeStyle="#759DB8",e.lineWidth=1,function(t,e=0,n=0,i,r){t.save(),t.beginPath(),t.rect(e,n,i,r),t.closePath(),t.restore()}(e,0,0,t.width,t.height),e.stroke()},n.setBorderWidth=function(t){return this.annot.setBorderWidth(t).then((t=>this._handlerRerender(t)))},n.setBorderStyle=function(t,e){return this.annot.setBorderStyle(t,e).then((t=>this._handlerRerender(t)))},n.setFillColor=function(t){return this.annot.setFillColor(t).then((t=>this._handlerRerender(t)))},n.getInnerRect=function(t=this.scale,e=this.rotate){const n=this.getPDFPage(),i=this.annot.getInnerRect(),r=n.getDeviceRect(i,t,e);return{left:r.left,top:r.top,right:r.right,bottom:r.bottom}},n.getInnerBoundary=function(){const t=this.getPDFPage(),e=this.annot.getInnerRect(),n=t.getDeviceRect(e,this.scale,this.rotate);return{left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top}},n._handlerRerender=function(t){return t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t},n._updateShapeControlMargin=function(){const t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(Vo.expandOffset(e,t))},e}(ka),Mh=function(t){function e(e,n,i,r){var o;return o=t.call(this,e,n,i,r)||this,_.Lazy.release((0,C.Z)(o),"shapeControl"),_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{let t={moveable:!0,resizable:!0,rotatable:!0,enableFrame:!1},n=o.pdfViewer.customs.getAnnotComponentConfig((0,C.Z)(o),Object.keys(t));var i=new sc(y(t,n,{emitter:o.pdfViewer.eventEmitter,start:(t,e,n)=>o.onStartUpdateShape(t,e,n),moving:(t,e)=>o.onShapeMoving(t,e),update:(t,e)=>o.onShapeUpdating(t,e),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),rotateEnd:(t,e,n,i)=>o.onRotateEnd(e),afterRotateEnd:()=>o.onAfterRotateEnd(),rotateStart:()=>o.onRotateStart(),degree:e.info.rotation,enableDiagonally:!0,previewer:!1,enableUniform:!0,degreeInitVisibility:!1,auxiliaryLine:void 0}));o.processShapeControlPermissionCtrl(i);const r=(t,n,r)=>{if(i&&r===ge.rotationUpdated){const t=o.getInnerBoundary(),n=o._getShapeControllerBoundaryBox();o.shapeControl.rotateDegree=e.getRotation(),i.active(o.$handler,t,n)}};return i.addDestroyHook((()=>{o.pdfViewer.eventEmitter.off(nt.annotationUpdated,r)})),o.pdfViewer.eventEmitter.on(nt.annotationUpdated,r),i})),o}(0,E.Z)(e,t);var n=e.prototype;return n.generateApRenderer=function(){return new xa(this)},n.getInnerRect=function(t=this.scale,e=this.rotate){return this.getRect(t,e)},n.getPropertyOptions=function(){let t=this.annot;(0,_.colorConvertor)(t.getBorderColor(),"#");return{opacity:t.getOpacity(),borderStyle:!1,disabled:this.propertyDisabled(),rotationFree:(this.annot.getRotation()+360)%360,isLocked:this.isLocked()}},n.setBitmap=function(t,e){return this.annot.setBitmap(t,e).then((t=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),this.render(this.scale,this.rotate))))},n.updateRender=function(){return this.render()},n.redraw=function(e){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.onRotateStart=function(){this.shapeControl.rotateDegreeBox.style.visibility="visible"},n.onRotateEnd=function(t){t=this.getStandardizedRotation(t);let e=this.annot.getRotation();return e=this.getStandardizedRotation(e),t+=Math.abs(e),t=this.getStandardizedRotation(t),this.setRotation(t).then((e=>(this.updateShapeControl(t),t)))},n.onAfterRotateEnd=function(){this.shapeControl.clearCompanions(),this.shapeControl.rotateDegreeBox.style.visibility="hidden"},n.setRotation=function(t){return this.annot.setRotation(t).then((t=>t?this.updateRender().then((()=>{const e=this.getInnerBoundary(),n=this._getShapeControllerBoundaryBox();return this.shapeControl.active(this.$handler,e,n),this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t})):t))},n.updateShapeControl=function(t){this.shapeControl.ui.style.transform=""},n.getStandardizedRotation=function(t){return(t=parseInt(t))<0?t=360-Math.abs(t):t>360&&(t-=360),t},n.onShapeUpdateEnd=async function(e,n,i){t.prototype.onShapeUpdateEnd.call(this,e,n,i)},n._esignCnMultiMove=function(t,e){0},n.destroy=function(){t.prototype.destroy.call(this),this.shapeControl&&this.shapeControl.destroy()},n.showContextMenu=async function(e,n){return t.prototype.showContextMenu.call(this,e,n)},e}(kh);var Oh=Mh;let Lh=function(t){function e(e){var n;return(n=t.call(this,e)||this).executor=new _.DebounceAsyncTaskExecutor(260),n}(0,E.Z)(e,t);var n=e.prototype;return n.resetCanvasSize=function(t,e){this.canvas.style.cssText+=`\n            width: ${Math.floor(t)}px;\n            height: ${Math.floor(e)}px;\n        `},n.doRender=function(t){const e=t.renderingData;if(this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent()){const t=this.canvas.getContext("2d");return t.clearRect(0,0,this.canvas.width,this.canvas.height),void t.save()}e.inkList.length>1e3?this.executor.exec((()=>{this.component.isDestroyed||this.executeRender(t)})):this.executeRender(t)},n.getMinDistance=function(){return 1.13136},n.executeRender=function(e){const n=e.renderingData,i=n.page,r=n.annotInfo,o=r.borderInfo||{},s=e.scale,a=e.rotate,c=this.convertPointToPixel(o.width,s);if(0==c&&-1==r.borderColor&&!r.fillColor)return;const l=e.outerRect;t.prototype.resetCanvasSize.call(this,l.width,l.height);const h=this.canvas.getContext("2d");h.clearRect(0,0,this.canvas.width,this.canvas.height),h.beginPath(),h.save(),e.lineWidth=c,h.lineCap="round",h.lineJoin="round",h.imageSmoothingEnabled=!0,h.imageSmoothingQuality="high",h.globalAlpha=r.opacity,h.lineWidth=c,0===c||!1===r.hasBorderColor?h.strokeStyle="transparent":h.strokeStyle=this.numberToRGBAString(r.color);const u=this.getMinDistance();n.inkList.map((({x:t,y:e,type:n})=>{const[r,o]=i.getDevicePoint([t,e],s,a);return{x:r-l.left,y:o-l.top,type:n}})).reduce(((t,e,n)=>{if(0===n||1===e.type)t.push(e);else{const n=t[t.length-1];Math.abs(e.x-n.x)+Math.abs(e.y-n.y)>=u&&t.push(e)}return t}),[]).forEach((({x:t,y:e,type:n},i,r)=>{1===n?(h.stroke(),h.beginPath(),h.moveTo(t,e)):h.lineTo(t,e)})),h.stroke(),h.restore()},e}(fc),Nh=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="ink",o.$ui.addClass("pdf-page-ink-annot-container"),o.$handler.addClass("pdf-page-ink-annot-handler-container"),_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{let t={moveable:!0,resizable:!0,enableDiagonally:!0},e=o.pdfViewer.customs.getAnnotComponentConfig((0,C.Z)(o),Object.keys(t));const n=new sc(y(t,e,{emitter:o.pdfViewer.eventEmitter,interceptor:t=>o.checkSize(t),start:()=>o.onStartUpdateShape(),update:(t,e)=>o.onShapeUpdating(t,e),moving:(t,e,n)=>o.onShapeMoving(t,e,n),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),auxiliaryLine:void 0}));return o.processShapeControlPermissionCtrl(n),o.addDestroyHook((()=>{n.destroy()})),n})),o}(0,E.Z)(e,t);var n=e.prototype;return n.checkSize=function(t){return!(t.width<10||t.height<10)},n.generateApRenderer=function(){let t=this.getInkList();return t&&t.length<1e3?new Lh(this):new xa(this)},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.active=function(){t.prototype.active.call(this),this.activeRect(),this._applyShapeChange()},n._applyShapeChange=function(){const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin()},n.movedByOther=function(){this.isActive&&(this.activeRect(),this.shapeControl.updateBoundary(this.getBoundary()),this.setMargin())},n.afterRender=function({transformed:t}){if(t&&this.isActive){this.activeRect();const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t),this.setMargin()}},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.onStartUpdateShape=function(){this.editDebouncePromise||(this.editDebouncePromise=new _.DebounceAsyncTaskExecutor(0))},n.onShapeUpdating=function(t,e){this.pdfViewer.config.highPerformance&&(t.width<10&&(t.width=10),this.setRect(t),this.setMargin())},n.onShapeMoving=function(t,e,n){this.updateCollabOp(t),this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((()=>this.moveTo(t.left,t.top).then((()=>{this.setMargin()}))))},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return Vo.on({left:0,top:0,right:e,bottom:n}).extract()},n.onShapeUpdateEnd=function(t,e,n){return t.width<10&&(t.width=10),"resize"!==n||this.pdfViewer.config.highPerformance?this.editDebouncePromise?this.editDebouncePromise.waitForLastTask().then((()=>this.moveTo(t.left,t.top,n).then((t=>{this.setMargin()})))):Promise.resolve():this.editDebouncePromise?this.editDebouncePromise.waitForLastTask().then((()=>this.setRect(t))).then((t=>{this.setMargin()})):Promise.resolve()},n.getPropertyOptions=function(){let t=this.annot,e=(0,_.colorConvertor)(t.getBorderColor(),"#"),n=t.getOpacity(),i=t.getBorderWidth(),r=this.propertyDisabled();return{color:e,opacity:n,borderWidth:i,borderStyle:!1,isLocked:this.isLocked(),disabled:r}},n.setBorderWidth=function(t){return this.annot.setBorderWidth(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.getInkList=function(){return this.annot.getInkList()},n.setMargin=function(){let t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(Vo.expandOffset(e,t)),this.shapeControl.updateBoundaryBox(this._getShapeControllerBoundaryBox())},n.redraw=function(e){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.getRenderingData=function(e=this.scale,n=this.rotate){return y(t.prototype.getRenderingData.call(this,e,n),{inkList:this.getInkList()})},n.unActive=function(){t.prototype.unActive.call(this),_.Lazy.get(this,"shapeControl",(t=>{t.deactive()}))},e}(ka);var Bh=Nh,Vh=m(875),Uh=m.n(Vh);let Hh=function(){function t(t,e,n){this.viewerComponent=t,this.docPageCount=n;let i="max page: "+n,r=Uh()(i);e||(r=`<dialog class="fv__dialog fv__annot-properties-dialog">${r}</dialog>`);let o=this.$dialog=D()(r);this.bindChangeEvent();let s=e||document.body;if(o.appendTo(s),!e){let t=o[0];pa().registerDialog(t),t.showModal()}}var e=t.prototype;return e.bindChangeEvent=function(){let t=this.$dialog;t.on("click",".fv__redaction-cancel",(()=>{this.close()})).on("click",".fv__place-redaction-dialog-close-icon",(()=>{this.close()})).on("click",".fv__redaction-btn",(t=>{this.submit()})).on("change",".redaction-page-radio",(e=>{e.target.checked&&(this.hideError(),"1"==e.target.value?t.find(".fv__redaction-page-range").attr("disabled",""):t.find(".fv__redaction-page-range").removeAttr("disabled"))})).on("keydown",".fv__redaction-page-range",(t=>{this.hideError()}))},e.submit=function(){let t=this.docPageCount,e=[];if("1"==this.$dialog.find(".redaction-page-radio:checked").val())for(let n=0;n<t;n++)e.push(n);else{let n=this.$dialog.find(".fv__redaction-page-range").val();if(new RegExp(/[^\d\-,]/).test(n))return void this.showError();let i=n.split(",");for(let n=0;n<i.length;n++){let r=i[n];if(r.indexOf("-")>-1){let n=r.split("-");if(n.length>2)return void this.showError();if(n[0]<1||n[0]>t||n[1]<1||n[1]>t)return void this.showError();{let t=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);for(let n=t;n<=i;n++)-1===e.indexOf(n)&&e.push(n-1)}}else{if(r<1||r>t)return void this.showError();-1===e.indexOf(e)&&e.push(r-1)}}}this.viewerComponent.placeRedact(e).then((t=>{this.close()}))},e.reset=function(){this.hideError(),this.element.querySelector(".redaction-page-radio").checked=!0,this.element.querySelector(".fv__redaction-page-range").value=""},e.showError=function(){this.$dialog[0].querySelector(".fv__redaction-page-range").classList.add("fv__redaction-error")},e.hideError=function(){this.$dialog[0].querySelector(".fv__redaction-page-range").classList.remove("fv__redaction-error")},e.close=function(){let t=this.$dialog;t&&(t[0].close(),t.remove(),this.$dialog=null)},t}(),jh="annotComponent",$h={reply:{name:"reply",nameI18nKey:"viewer_:contextmenu.annot.reply",callback:function(){this.data(jh).showReplyDialog("reply")},disabled:function(){return this.data(jh).replyDisabled()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data(jh).removeAnnot()},disabled:function(){return this.data(jh).deleteDisabled()}},apply:{name:"apply",nameI18nKey:"viewer_:contextmenu.annot.apply",callback:function(){return this.data(jh).apply()},disabled:function(){return this.data(jh).assembleDocDisabled()}},applyAll:{name:"applyAll",nameI18nKey:"viewer_:contextmenu.annot.applyAll",callback:function(){return this.data(jh).applyAll()},disabled:function(){return this.data(jh).assembleDocDisabled()}},place:{name:"place",nameI18nKey:"viewer_:contextmenu.annot.place",callback:function(t,e,n){this.data(jh).showPlaceMarkDialog(t,e,n)},disabled:function(){return this.data(jh).moveDisabled()}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data(jh).showPropertiesDialog(t,e,n)}}};let Wh=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.doRender=function(e,n=!0){const i=this.component.renderAppearanceType;if(this.component.needToggleView&&this.component.needToggleView()&&!this.component.shouldRenderByMouseEvent()){const t=this.canvas.getContext("2d");return t.clearRect(0,0,this.canvas.width,this.canvas.height),void t.save()}if("rollover"!==i)return t.prototype.doRender.call(this,e,n);{const t=this.canvas.getContext("2d");t.save(),t.fillStyle="black",t.fillRect(0,0,this.canvas.width,this.canvas.height),t.restore()}},e}(ml);const Yh=[{name:"U.S. FOIA",children:["(b) (1) (A)","(b) (1) (B)","(b) (2)","(b) (3) (A)","(b) (3) (B)","(b) (4)","(b) (5)","(b) (6)","(b) (7)(A)","(b) (7)(B)","(b) (7)(C)","(b) (7)(D)","(b) (7)(E)","(b) (7)(F)","(b) (8)","(b) (9)"]},{name:"U.S. Privacy Act",children:["(b)","(d)(5)","(j)(1)","(j)(2)","(k)(1)","(k)(2)","(k)(3)","(k)(4)","(k)(5)","(k)(6)","(k)(7)"]}];let Gh=function(t=".fv__pdf-page-annot-handler-rect"){return{selector:t,items:$h,events:{show:function(){return this.data(jh).updateDeleteStatus(!0),!0},hide:function(){return this.data(jh).updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect");const Kh=function(){};let qh=function(t){function e(e,n,i,r){var o;let s;return(o=t.call(this,e,n,i,r)||this).name="redact",o.$ui.addClass("fv__pdf-page-redact-annot-container"),o.$handler.addClass("fv__pdf-page-redact-annot-handler-container"),o.$ui.css("z-index",99),o.$handler.css("z-index",99),s=!!e.isArea(),_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{let t={moveable:!0,resizable:s,enableDiagonally:!0},n=o.pdfViewer.customs.getAnnotComponentConfig((0,C.Z)(o),Object.keys(t));const i=new sc(y(t,n,{emitter:o.pdfViewer.eventEmitter,start:(t,e,n)=>o.onStartUpdateShape(t,e,n),update:(t,e)=>o.onShapeUpdating(t,e),moving:(t,e)=>o.onShapeMoving(t,e),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),rotatable:!1}));return e.isArea()?o.processShapeControlPermissionCtrl(i):i.disable(),i})),o.apRenderer=o.generateApRenderer(),o}(0,E.Z)(e,t);var n=e.prototype;return n.generateApRenderer=function(){return this.isHTMLSimulate("redact")?new Wh(this):t.prototype.generateApRenderer.call(this)},e.getDefaultContextMenuConfig=function(){return Gh},n.assembleDocDisabled=function(){return 40!=(40&this.docRender.getUserPermission().getValue())},n.onStartUpdateShape=function(t,e,n){this.editDebouncePromise||(this.editDebouncePromise=new _.DebounceAsyncTaskExecutor(0))},n.onShapeUpdating=function(t,e){},n.onShapeMoving=function(t,e){},n.onShapeUpdateEnd=function(t,e,n){return this.editDebouncePromise?this.editDebouncePromise.exec((()=>this.setRect(t))):Promise.resolve()},n.active=function(){const e=this.annot,n=e.info.overlayCode;if(n.length){const t=function(){const t=localStorage.getItem("modifiedUSCodes");return t?JSON.parse(t):[].concat(Yh)}();let i,r="";n.forEach(((e,n)=>{n%2?r+=1!=n?","+i[e]:i[e]:i=t[e].children})),r!=e.info.overlayText&&e.setRedactAppearance({overlayText:e.info.overlayText,redactionCode:[]})}t.prototype.active.call(this),this.activeRect(),this.$handler.addClass("active"),this._applyShapeChange()},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n._applyShapeChange=function(){const t=this._getShapeControllerBoundaryBox(),e={left:t.left,top:t.top,width:t.width+2,height:t.height+2};this.shapeControl.active(this.$handler,this.getBoundary(),e)},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.redraw=function(t){if(t&&this.apRenderer)try{this.apRenderer.clearCache()}catch(t){}return this.render()},n.updateRender=function(){return Promise.resolve()},n.showPlaceMarkDialog=function(){if(this.$placeRedactionControl&&this.$placeRedactionControl.$dialog);else{let t=this.pdfViewer.currentPDFDoc.info.pageCount;this.$placeRedactionControl=new Hh(this,document.body,t)}},n.hidePlaceMarkDialog=function(){this.$actionsControl.close()},n.placeRedact=function(t){const e=e=>{let n=e.getRects();const i=t.map((t=>this.pdfViewer.currentPDFDoc.getPageByIndex(t).then((t=>{if(t.isVirtual())return;const i=y({color:e.getBorderColor()},e.getRedactAppearance());return t.markRedactAnnot(n,i).then((t=>{let n=[];return e.replies.map((e=>{n.push(t[0].addReply(e.info))})),Promise.all(n).then((()=>t))}))}))));return Promise.all(i).then((t=>t.filter(Boolean)))},n=this.pdfViewer.getAllActiveElements();return n.every((t=>"redact"===t.annot.getType()))?Promise.all(n.map((t=>e(t.annot)))):e(this.annot)},n.apply=function(){let t=this.pdfViewer;if(t)return t.viewerUI.confirm({message:"viewer_:contextmenu.annot.applyConfirm",level:"warning"}).then((()=>this.annot.apply()),Kh)},n.applyAll=function(){let t=this.pdfViewer;if(t)return t.viewerUI.confirm({message:"viewer_:contextmenu.annot.applyConfirm",level:"warning"}).then((()=>{const e=t.getCurrentPDFDoc();return e.redacted=!0,e.applyRedaction()}),Kh)},n.getPropertyOptions=function(){let t=this.annot,e=(0,_.colorConvertor)(t.getBorderColor(),"#"),n=t.getApplyFillColor()||4278190080,i=this.propertyDisabled(),r=this.isLocked();const{overlayText:o,fontName:s,isAutoFontSize:a,justification:c,isRepeat:l,isOverlayCode:h,defaultAppearance:{textSize:u,textColor:d},overlayCode:f}=t.info;return{color:e,applyFillColor:n,borderStyle:!1,disabled:i,isLocked:r,overlayText:o,fontName:s,isAutoFontSize:a,justification:c,isRepeat:l,isOverlayCode:h,textSize:u,textColor:d,overlayCode:f}},n.setApplyFillColor=function(t){return this.annot.setRedactApplyFillColor(t)},n.getTileConfig=function(t,e){let n=this.pdfViewer,i=n.getSmartScale(t),r=n.config.tileSize,o=this.annot,s=o.getDeviceRect(1,e),a=o.getDeviceRect(i,e),c=a.right-a.left,l=a.bottom-a.top;this.getAnnotFlag().checkNoZoom()&&(c=s.right-s.left,l=s.bottom-s.top);let h=Math.ceil(l/r),u=Math.ceil(c/r);const d=V(1)*t*2;return l+=d,c+=d,[h,u,c,l,r,i,t,e,s.left,s.top]},n.mouseEnter=function(){this.renderAppearanceType=st.ANNOT_APPEARANCE_TYPE.ROLLOVER,this.redraw(!0)},n.mouseLeave=function(){this.renderAppearanceType=st.ANNOT_APPEARANCE_TYPE.NORMAL,this.redraw(!0)},e}(ka);var zh=qh;const Jh=da();let Zh,Xh,Qh=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="polygonCloud",o}return(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return Jh},e}(hl),tu={};"function"==typeof FontFace?(Zh=function(t,e){return tu[t]?tu[t]:tu[t]=new Promise((function(n,i){e().then((function(e){if(!e)return i(),void tu[t];var r=new FontFace(t,e.buffer||e.url);r.load().then((()=>{document.fonts.add(r),n(r)}),(function(){i(),delete tu[t]}))}),(function(){i(),delete tu[t]}))}))},Xh=function(t){tu[t]&&tu[t].then((function(e){delete tu[t],document.fonts.delete(e)}))}):(Zh=function(t,e){return tu[t]?tu[t]:tu[t]=new Promise((function(n,i){e().then((function(e){return e?e.buffer?URL.createObjectURL(new Blob([e.buffer],"application/x-font-woff")):e.url:(i("woff is invalid"),void delete tu[t])})).then((function(e){if(!e)return i();let r=document.createElement("style");r.innerHTML='@font-face{font-family:"'+t+'"; src:url("'+e+'");}',document.head.appendChild(r),n(r)}))}))},Xh=function(t){tu[t]&&tu[t].then((function(e){delete tu[t],e.parentNode.removeChild(e)}))});let eu="annotComponent",nu={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data(eu).showPropertiesDialog(t,e,n)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data(eu).removeAnnot()},disabled:function(){return this.data(eu).deleteDisabled()}}};function iu(t,e){t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?function(t,e){const n=t instanceof HTMLInputElement?t.value.length:t.textLength;ru(t,{startOffset:n,endOffset:n},e)}(t,e):"inherit"!==t.contentEditable&&ou(t,e)}function ru(t,e,n){t.focus(n),setTimeout((()=>{t.focus(n),t.setSelectionRange(e.startOffset,e.endOffset)})),t.setSelectionRange(e.startOffset,e.endOffset)}function ou(t,e,n){var i,r;t.focus(e),setTimeout((()=>t.focus(e)));const o=document.createRange();if(o.selectNodeContents(t),n){const e=t.childNodes[n.startNodeIndex||0];e&&o.setStart(e,Math.min(n.startOffset,(null===(i=e.textContent)||void 0===i?void 0:i.length)||0));const s=t.childNodes[n.endNodeIndex||0];s&&o.setStart(s,Math.min(n.endOffset,(null===(r=e.textContent)||void 0===r?void 0:r.length)||0))}o.collapse(!0);const s=window.getSelection();s&&(s.removeAllRanges(),s.addRange(o))}const su="editDiv";let au=function(){function t(){}return t.formatHtmlStr=function(t){let e=t;const n={split:"split",remove:"remove",removeSelf:"removeTag"};[{startStr:"\x3c!--StartFragment--\x3e",endStr:"\x3c!--EndFragment--\x3e",operate:n.split},{startStr:"\x3c!--[if",endStr:"<![endif]--\x3e",operate:n.remove},{startStr:"<![if",endStr:"<![endif]>",operate:n.remove},{startStr:"<o:p>",endStr:"</o:p>",operate:n.remove},{startStr:"<w:Sdt",endStr:"</w:Sdt>",operate:n.removeTag},{startStr:"<w:sdtPr>",endStr:"</w:sdtPr>",operate:n.remove}].forEach((t=>{let i=e.indexOf(t.startStr);for(;i>-1;){switch(t.operate){case n.split:{let n=e.indexOf(t.endStr);e=e.slice(i+t.startStr.length,n>-1?n:e.length)}break;case n.remove:{let n=e.indexOf(t.endStr),r=e.substring(0,i),o=e.substring(n+t.endStr.length);e=r+o}break;case n.removeTag:{let n=e.substring(i),r=n.indexOf(">");e=e.substring(0,i)+n.substring(r+1),e=e.split(t.endStr).join("")}}i=e.indexOf(t.startStr)}}));const i=document.createElement("div");i.contentEditable=!0,i.id=su,i.style.display="none",document.body.appendChild(i),i.innerHTML=e.replaceAll("\n","").replaceAll("\r","");return this.addTagClassName(i)},t.getFont=function(t){let e=t[0];const n=new RegExp(`^\\s*${e}\\b`),i=["-apple-system","system-ui"," BlinkMacSystemFont"," Segoe UI"," Roboto"," Oxygen"," Ubuntu"," Fira Sans"," Droid Sans"," Helvetica Neue"," sans-serif"].some((t=>n.test(t)));return i?(_.DeviceInfo.isWindows?e="DengXian Light":_.DeviceInfo.isMacOS||_.DeviceInfo.isIOS?e="PingFangSC":_.DeviceInfo.isAndroid?e="Roboto":_.DeviceInfo.isLinux&&(e="Noto Sans"),e):e},t.formatRichText=function(t){const e=this.formatHtmlStr(t),n=document.getElementById(`${su}`);let i=e.map((t=>{let e=n.getElementsByClassName(`${t}`)[0],i=getComputedStyle(e),r=i.fontFamily.replaceAll('"',"").split(","),o=this.getFont(r);return{content:e.textContent,richTextStyle:{font:{name:o},textSize:parseInt(i.fontSize),textAlignment:wt[i.textAlign],textColor:(0,_.colorConvertor)(i.color,"int"),isBold:(()=>{let t=i.fontWeight,e=parseFloat(t);return isNaN(e)?t.includes("bold"):e>400})(),isItalic:(()=>{let t=i.fontStyle;return t.includes("italic")||t.includes("oblique")})(),isUnderline:i.textDecoration.includes("underline"),isStrikethrough:i.textDecoration.includes("line-through"),cornerMarkStyle:(()=>{let t=i.verticalAlign;return{sub:ee.subscript,super:ee.superscript}[t]||ee.none})()}}}));return n.remove(),i},t.addTagClassName=function(t,e=[],n={}){let i=e,r=t.childNodes.length;if(["block","flex"].includes(getComputedStyle(t).display)&&t.nextElementSibling&&(t.innerHTML+="\n"),r>0){Array.from(t.childNodes).forEach((e=>{if("#text"===e.nodeName){const r=document.createElement("span");r.innerHTML=`${e.textContent}`,r.style.textDecoration=`${n.underline?"underline":""} ${n.lineThrough?"line-through":""}`,r.style.verticalAlign=n.verticalAlign;const o=`foxitwebsdk-${Date.now()}-${parseInt(1e3*Math.random())}`;i.push(o),r.classList.add(o),t.replaceChild(r,e)}else{let t=getComputedStyle(e).textDecoration,r={};t.includes("underline")&&(r.underline=!0),t.includes("line-through")&&(r.lineThrough=!0);let o=getComputedStyle(e).verticalAlign;["sub","super"].includes(o)&&(r.verticalAlign=o),this.addTagClassName(e,i,y({},n,r))}}))}return i},t}(),cu=function(t=".fv__pdf-page-annot-handler-rect"){return{selector:t,items:nu,events:{show:function(){return this.data(eu).updateDeleteStatus(!0),!0},hide:function(){return this.data(eu).updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),lu=function(t){function e(e,n,i,r){var o;let s;return(o=t.call(this,e,n,i,r)||this).name="freetext",o.removeAllEventsUsedByEditingMode=_.noop,o.$ui.addClass("fv__pdf-page-freetext-annot-container"),o.$handler.addClass("fv__pdf-page-freetext-annot-handler-container"),o.$textInput=D()(`<textarea class='fv__ui-freetext-editor ${o.annot.getIntent()}'></textarea>`),s=o.$textInput,o.$handler.append(s),o.bindTextInputEvent(s),o.resizeTaskExecutor=new _.QueuedAsyncTaskExecutor,o.addDestroyHook((()=>{o.removeAllEventsUsedByEditingMode()})),o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return cu};var n=e.prototype;return n.active=function(){t.prototype.active.call(this),this.activeRect(),this.$rect&&this.$rect.show()},n.setContent=function(t){return this.annot.setContent(t).then((t=>(this.collaborate(),t)))},n.getInnerBoundary=function(t=!1,e=this.rotate){const n=this.getPDFPage(),i=this.annot.getInnerRect(),r=this.annot.getRect(),o=i.right-i.left,s=r.right-r.left,a=this.annot.getBorderWidth();let c;this.annot.getIntent()===st.Intents.FREETEXT_CALLOUT?(c=i,t&&(c={left:i.left+a,right:i.right-a,top:i.top-a,bottom:i.bottom+a})):this.annot.getIntent()===st.Intents.FREETEXT_TYPEWRITER?c=r:s-o>=a?c=i:t&&(c={left:r.left+a,right:r.right-a,top:r.top-a,bottom:r.bottom+a});const l=n.getDeviceRect(c,this.scale,e);return{left:l.left,top:l.top,width:l.right-l.left,height:l.bottom-l.top}},n.setInnerRect=function(t){return this.annot.setInnerRectNoAction(t)},n.setCalloutLinePoints=function(t){return this.annot.setCalloutLinePoints(t)},n.showReplyDialog=function(){let t=this.getAnnotFlag();try{return this.annot.checkModidyPerm(),!(t.checkLockedContents()||t.checkReadOnly()||t.checkLocked())&&(this.backup(),this.enableEditMode(),!0)}catch(t){return!1}},n.backup=function(){this.backupProperty={rect:y({},this.annot.getRect()),innerRect:y({},this.annot.getInnerRect())}},n.computeFontSizePx=function(){const t=this.annot.getDefaultAppearance();return Math.max(4*t.textSize/3*this.scale,9.5)},n.computeFontSizeScale=function(t=this.computeFontSizePx()){const e=t/12;return Math.min(e,1)},n.computeLineHeight=function(t=this.computeFontSizePx(),e=this.computeFontSizeScale(t)){return 1.1*t/e},n.computeCurrentMinMaxHeight=function({inputRect:t=this.$textInput[0].getBoundingClientRect(),pageRect:e=this.parent("pdfPageRender").$ui[0].getBoundingClientRect(),rotate:n=this.getFinalRotateAngle(),padding:i=this.getPadding()}={}){const r=this.pdfViewer.getSmartScale(this.scale),o=t.height;return{minHeight:Math.min(20*r*2/3*2,o),maxHeight:(()=>{switch(n){case 90:return t.right-e.left;case 180:return t.bottom-e.top;case 270:return e.right-t.left;default:return e.bottom-t.top}})()-i}},n.getStyle=function(t=!0,e=!1){const n=this.annot.getRotation(),i=this.annot.page.getRotationAngle(),r=this.getRect();let o=this.getRect(this.scale,n+i);const s=o.right-o.left,a=o.bottom-o.top;let c=this.annot,l=c.getFillColor(),h=c.getDefaultAppearance(),u=h.textColor;const d=this.computeFontSizePx();let f=this.fontSizeScale=d/12;f>1&&(f=this.fontSizeScale=1);let p=this.computeLineHeight(d,f),g=(0,_.colorConvertor)(16777215&l,"#");0==l&&(g=e?"white":"transparent");let m=(0,_.colorConvertor)(16777215&u,"#");0==u&&(m="black");let v=h.font||{},w=this.annot.getAlignment();switch(w){case 0:w="left";break;case 1:w="center";break;case 2:w="right"}let b="center";switch((this.rotate+n+i)%360){case 0:case 180:b="center";break;case 90:b=a/2+"px center";break;case 270:b=`${s/2}px ${s/2}px`}return p=Math.min(p,a)+"px",y({"text-align":w,color:m,background:g,display:"block","font-size":d,fontFamily:'"'+[v.baseName,v.familyName,v.nameKey,v.name,"FoxitPDFSDKForWeb"].join('","')+'"',lineHeight:p},t?{left:r.left,top:r.top,width:s,height:a,"transform-origin":b,transform:`rotate(${n+this.rotate+i}deg)`}:{})},n.setDomRect=function(t){let e=this.annot.getRotation()+this.annot.page.getRotationAngle()+this.rotate,n=!0;if(this.isCallout()||this.isTextBox()){this.annot.getBorderStyle()===st.BORDER_STYLE.CLOUDY&&(n=!1)}let{left:i,top:r,width:o,height:s}=this.getInnerBoundary(n),a=new M,c=o,l=s,h=i,u=r;switch(e%360){case 90:c=-o,h=i+o;break;case 180:c=-o,h=i+o,l=-s,u=r+s;break;case 270:l=-s,u=r+s}a.rotate((360-e)*Math.PI/180);let d=a.transformRect(0,0,c,l);t.left=d[0]+h,t.top=d[1]+u,t.width=d[2]-d[0],t.height=d[3]-d[1],t["max-height"]="initial",t["max-width"]="initial",t["min-width"]="initial",t["min-height"]="initial",t["transform-origin"]="0 0",t.transform=`rotate(${e}deg)`},n.showContextMenu=function(e,n){return"editing"!==this.status&&t.prototype.showContextMenu.call(this,e,n)},n.enableEditMode=function(){if("editing"===this.status)return;this.shapeControl&&this.shapeControl.deactive();const[t,e,n]=this.docRender.pdfViewer.getGroupCount();if(this.annot.isGrouped()){const t=this.annot.getGroupHeader().getId(),e=n[t];delete n[t],n[-1].forEach((t=>this.docRender.pdfViewer.unActiveElement(t)));for(let t in n)n[t].forEach((t=>this.docRender.pdfViewer.unActiveElement(t)));e.forEach((t=>{t.getId()!=this.getId()&&this.docRender.pdfViewer.unActiveElement(t)}))}else for(let t in n)n[t].forEach((t=>{t.getId()!=this.getId()&&this.docRender.pdfViewer.unActiveElement(t)}));this.status="editing";let i=this.annot;this.$handler.addClass("active"),this.updateTextInputStyle();const r=i.getContent();this.$textInput.val(r);const o=this.$textInput.get(0);if(i.getIntent()===st.Intents.FREETEXT_TYPEWRITER)this.setHeight(this.$textInput);iu(o,{preventScroll:!0}),this.pdfViewer.eventEmitter.emit("editingFreeText",this);const s=t=>{this.annotsRender&&t===this.annotsRender.pageRender&&"editing"===this.status&&this.updateTextInputStyle()};this.pdfViewer.eventEmitter.on(nt.renderPageSuccess,s),this.removeAllEventsUsedByEditingMode=()=>{this.pdfViewer.eventEmitter.off(nt.renderPageSuccess,s)}},n.updateTextInputStyle=function(){const t=this.getStyle(!1,!0);this.setDomRect(t);let e=t.transform||"";this.fontSizeScale>=1?e+=" scale(1)":(e+=`scale(${this.fontSizeScale})`,t.width/=this.fontSizeScale,t.height/=this.fontSizeScale,t.lineHeight="12px"),t.transform=e,this.$textInput.css(t)},n.bindEvent=function(){t.prototype.bindEvent.call(this);const e=t=>{(0,_.match)(t).when(_.matchers.Escape,(()=>{t.preventDefault(),this.$textInput.blur()}))};this.$textInput.on("keyup",e).on("keydown",e),this.$textInput.on("mousemove",(t=>{t.stopPropagation()}))},n.unActive=function(){this.$textInput.trigger("blur"),this.$textInput.css("display","none"),t.prototype.unActive.call(this),this.shapeControl&&this.shapeControl.deactive(),this.$rect&&this.$rect.hide(),clearInterval(this.pressInterval)},n.getInnerRect=function(t=this.scale,e=this.rotate){const n=this.getPDFPage(),i=this.annot.getInnerRect();return n.getDeviceRect(i,t,e)},n.bindTextInputEvent=function(t){let e,n,i=!1;t.on("focus",(t=>{this.oldInnerRect=this.annot.getInnerRect(),this.oldRect=this.annot.getRect(),this.oldCalloutLinePoints=this.annot.getCalloutLinePoints&&this.annot.getCalloutLinePoints()})).on("paste",(t=>{n=null;let e=t.originalEvent.clipboardData.getData("text/html");if(0===e.length)return;let i=au.formatRichText(e);0!==i.length&&(n=i[0].richTextStyle.font)})).on("input",(t=>{i=!0,this.handleInputEvent(t)})).on("keydown",(t=>{e=this.$textInput.val(),27!==t.keyCode&&t.ctrlKey&&65===t.keyCode&&this.$textInput.trigger("select")})).on("keyup",(t=>{e!==this.$textInput.val()&&(i=!0)})).on("blur",(t=>{const e=i;if(i=!1,"editing"!=this.status)return void this.updateTextInputScale(1);const r=this.parent("pdfPageRender");this.removeAllEventsUsedByEditingMode();let o=this.$textInput;const s=(()=>{const t=o[0].getBoundingClientRect();return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}})();let a=!1;switch(this.annot.getIntent()){case st.Intents.FREETEXT_TEXTBOX:case st.Intents.FREETEXT_TYPEWRITER:const t=this.getRect(),e=this.getInnerRect(),n=(t.bottom-t.top-(e.bottom-e.top))/2,i=this.getFinalRotateAngle(),c=o[0].scrollHeight,l=this.computeLineHeight(),h=r.$ui[0].getBoundingClientRect();if(c-s.height>=l){a=!0;const t=h.height-2*n,e=h.width-2*n;switch(i){case 0:s.height=Math.min(c,t),s.top=s.bottom-s.height;break;case 90:s.width=Math.min(c,e),s.right=s.left+s.height;break;case 180:s.height=Math.min(c,t),s.bottom=s.top+s.height;break;case 270:s.width=Math.min(c,e),s.left=s.right-s.height}}case st.Intents.FREETEXT_CALLOUT:}this.$textInput.css("display","none"),this.updateTextInputScale(1),this.status="viewing";let c=this.parent("pdfPageRender").getPDFRectFromClientRect(s);if(this.beforeBlur(t,c))return;let l=Promise.resolve();if(e)switch(this.annot.getIntent()){case st.Intents.FREETEXT_TYPEWRITER:a&&(l=this.setRectInPDF(c,!1));break;case st.Intents.FREETEXT_TEXTBOX:a&&(l=this.setInnerRectHeight(c));break;default:l=this.setInnerRectHeight(c)}l.then((e=>{const i=this.annot.getContent();if(t.target.value!==i)return n?this.setDefaultAppearance("font",n).then((e=>this.setContent(t.target.value))):this.setContent(t.target.value)})).then((e=>{this.pdfViewer.activeElement(),D()(t.target).css({display:"none"}).removeAttr("contenteditable")})).then((t=>(this.$textInput.css("display","none"),this.oldInnerRect=null,this.oldRect=null,this.oldCalloutLinePoints=null,this.updateTextInputScale(1),this.postBlur()))).then((t=>this.redraw()))}))},n.isTypeWriter=function(){var t;return(null==(t=this.annot)?void 0:t.getIntent())===st.Intents.FREETEXT_TYPEWRITER},n.isCallout=function(){var t;return(null==(t=this.annot)?void 0:t.getIntent())===st.Intents.FREETEXT_CALLOUT},n.isTextBox=function(){var t;return(null==(t=this.annot)?void 0:t.getIntent())===st.Intents.FREETEXT_TEXTBOX},n.handleInputEvent=function(){this.resizeTaskExecutor.exec((()=>{const t=this.$textInput[0],e=t.scrollHeight,n=t.scrollWidth,i=t.clientHeight,r=t.clientWidth;if(e>i||n>r)return this.setHeight(this.$textInput)}))},n.updateCalloutFigure=function(t,e,n){return this.annot.updateCalloutFigure(t,e,n).then((()=>this.updateRender().then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))))},n.updateTextInputScale=function(t=1){const e=this.$textInput[0].style.transform||"";this.$textInput[0].style.transform=e.replace(/scale\(\d+(\.\d+)?\)/,`scale(${t})`)},n.beforeBlur=function(){return!1},n.postBlur=function(){0},n.setHeight=function(t,e,n){0},n.getPadding=function(){let t=this.annot,e=t.getRect(),n=t.getBorderInfo(),i=0;if(5!=n.style){let t=n.width||1;i=1.5*t,this.isHTMLSimulate("freetext")?i=2*t:e.top-e.bottom<2*i&&(i=t)}else i=t.getInnerRect().left-e.left;return i},n.setDefaultAppearance=function(t,e){"textColor"==t&&(e=(0,_.colorConvertor)(e,"int",1));let n,i=this.annot.getDefaultAppearance();return y(i,{[t]:e}),n=["textSize","textColor"].includes(t)?this.annot.setAppearanceWithoutFontFamily(i):this.annot.setDefaultAppearance(i),n.then((t=>{this.activeRect(),this.shapeControl.adjustPointControl&&this.shapeControl.adjustPointControl(),this._applyShapeChange&&this._applyShapeChange(),this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))},n.getFinalRotateAngle=function(){const t=this.annot.page.getRotationAngle();return((this.annot.getRotation()+t+this.rotate)%360+360)%360},n.getMaxSize=function(t){this.getPDFPage();const e=this.getFinalRotateAngle(),n=this.parent("pdfPageRender").$ui[0].getBoundingClientRect(),i=t.getBoundingClientRect(),r=n.bottom-i.top,o=n.right-i.left,s=this.annot.getInnerRect(),a=this.annot.getRect(),c=(a.top-a.bottom-(s.top-s.bottom))/2,l=(a.right-a.left-(s.right-s.left))/2,h=this.pdfViewer.getSmartScale(this.scale),u=4*c/3*h,d=4*l/3*h;switch(e){case 0:return{width:o-d,height:r-u};case 180:return{width:o-d,height:i.bottom-n.top-u};case 90:return{width:r-d,height:i.right-n.left-u};case 270:return{width:r-d,height:n.right-i.left-u}}},e}(ka);var hu=lu;function uu(t,e){const n=getComputedStyle(t),i=n.overflow,r=n.whiteSpace,o=t.clientWidth;t.style.cssText+=`\n        min-width: ${e.minWidth}px;\n        min-height: ${e.minHeight}px;\n        max-width: ${e.maxWidth}px;\n        max-height: ${e.maxHeight}px;\n        overflow: hidden;\n        white-space: ${o>=e.maxWidth?"pre-line":"nowrap"};\n        word-break: break-word;\n    `;const s=t.scrollWidth,a=Math.max(Math.min(s,e.maxWidth),e.minWidth);t.style.cssText+=`\n        width: ${a}px;\n    `;const c=t.scrollHeight,l=Math.max(Math.min(c,e.maxHeight),e.minHeight);t.style.cssText+=`\n        overflow: ${i};\n        width: ${a}px;\n        height: ${l}px;\n        white-space: ${r};\n    `,delete t.style.whiteSpace}let du=function(t){function e(e,n,i,r){var o;(o=t.call(this,e,n,i,r)||this).name="typewritter",_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{var t=new sc({...o.getShapeOptions(),auxiliaryLine:void 0});return o.processShapeControlPermissionCtrl(t),t})),o.$ui.addClass("fv__pdf-page-typewritter-annot-container"),o.$handler.addClass("fv__pdf-page-typewritter-annot-handler-container");let s=D()("<div class='fv__ftui-container'><pre class='fv__typewriter_ui'></pre></div>");return o.$pre=s.find("pre"),o.$ui.append(s),o}(0,E.Z)(e,t);var n=e.prototype;return n.computeLineHeight=function(t=this.computeFontSizePx(),e=this.computeFontSizeScale(t)){return 1.158*t/e},n.handleInputEvent=function(){this.resizeTaskExecutor.exec((async()=>{const t=this.getFinalRotateAngle(),e=this.$textInput[0],n=e.getBoundingClientRect(),i=this.parent("pdfPageRender").$ui[0].getBoundingClientRect(),r=this.getPadding(),{width:o}=this.getMaxSize(e),{minHeight:s,maxHeight:a}=this.computeCurrentMinMaxHeight({inputRect:n,padding:r,rotate:t,pageRect:i}),c=e.clientHeight;uu(e,{maxWidth:o,maxHeight:a,minHeight:s,minWidth:1});let l;if(e.getBoundingClientRect().height>a?(e.style.height=a+"px",l=!0):l=e.clientHeight!==c,l)return this.setHeight(this.$textInput)}))},n.getShapeOptions=function(){return{emitter:this.pdfViewer.eventEmitter,resizable:!1,start:()=>this.onStartUpdateShape(),update:(t,e)=>this.onShapeUpdating(t,e),moving:(t,e,n)=>this.onShapeMoving(t,e,n),end:(t,e,n)=>this.onShapeUpdateEnd(t,e,n),enableDiagonally:!0}},n.afterRender=function({transformed:t}){t&&this.isActive&&(this.activeRect(),this.$rect&&this.$rect.show())},n.onStartUpdateShape=function(t,e,n){},n.onShapeUpdating=function(t,e){this.updateCollabOp(t)},n.onShapeMoving=function(t,e,n){this.updateCollabOp(t),this.annot.isGrouped()&&this.pdfViewer.eventEmitter.emit("freetextGroupMoving")},n.onShapeUpdateEnd=function(t,e,n){let i=Promise.resolve();switch(n){case"move":i=this.moveTo(t.left,t.top,n);break;case"resize":i=this.setRect(t),this.render()}return this.annot.isGrouped()&&this.pdfViewer.eventEmitter.emit("freetextGroupMovingEnd"),i.then((()=>this.updateToobarPostion()))},n.updateToobarPostion=function(t=null){if(!this.$toolbar)return;const e=this.$toolbar,n=this.annot.getRect(),i=this.annotsRender.pageRender,r=i.page;let o=r.getDeviceRect(n,i.getScale(),i.getRotation());if(e.css({top:o.top+"px",left:o.left-5+"px"}),o.top<30){const t=o.bottom-o.top;e.css({transform:`translatey(${t+5}px)`})}const s=i.getScale(),a=r.getPxWidth()*s,c=D()(".fv__ui-sidebar")[0].getBoundingClientRect(),l=e[0].getBoundingClientRect();if(l.right-c.right>a){const n=l.right-c.right-a;t?e.css({left:-5-n-5+"px"}):e.css({left:o.left-n-5+"px"})}},n.showToolbar=function(t){this.$toolbar&&this.$toolbar.remove();const e=D()('<div class="fv__text-fill-sign-toolbar">\n                                            <div class="fv__text-fill-sign-toolbar-base">\n                                                <div class="fv__text-fill-sign-toolbar-icon fv__text-fill-sign-toolbar-decrease"></div>\n                                                <div class="fv__text-fill-sign-toolbar-icon fv__text-fill-sign-toolbar-increase"></div>\n                                            </div>\n                                        </div>');t.after(e),this.$toolbar=e,this.updateToobarPostion();this.$toolbar.find(".fv__text-fill-sign-toolbar-decrease").on("click",(t=>{const e=this.annot.getDefaultAppearance().textSize;e<7||this.annot.setDefaultAppearance({textSize:e-1})}));this.$toolbar.find(".fv__text-fill-sign-toolbar-increase").on("click",(t=>{const e=this.annot.getDefaultAppearance().textSize;e>20||this.annot.setDefaultAppearance({textSize:e+1})}))},n.hideToolbar=function(){this.$toolbar&&this.$toolbar.remove()},n.active=function(){t.prototype.active.call(this),this._applyShapeChange()},n._applyShapeChange=function(){const t=this._getShapeControllerBoundaryBox();let e;e=this.getBoundary(),this.getAppPermission().then((n=>{if(this.isDestroyed)return;let i=!1;i=!!this.groupMoveDisabled()||(n.ignorable()?this.moveDisabled():!n.isAdjustable()||this.moveDisabled()),i?this.shapeControl.disable():this.shapeControl.enable(),this.shapeControl.active(this.$handler,e,t),this.setMargin()}))},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n.getPropertyOptions=function(){t.prototype.getPropertyOptions.call(this);let e=this.annot,n=e.getOpacity(),i=this.propertyDisabled(),r=this.isLocked();return{opacity:n,borderStyle:!1,disabled:i,fontColor:e.getFontColor(),fontSize:e.getDefaultAppearance().textSize,font:e.getDefaultAppearance().font,isLocked:r}},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive(),this.hideToolbar()},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.setMargin=function(){let t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(Vo.expandOffset(e,t))},n.redraw=function(e){return this.moveDisabled()||this.groupMoveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.setHeight=function(e,n){const i=this.annot.page.getRotationAngle();let r=((this.annot.getRotation()+i+this.rotate)%360+360)%360,o=this.parent("pdfPageRender").$ui[0].getBoundingClientRect();const s=e[0];let a,c=s.getBoundingClientRect(),{left:l,top:h,bottom:u,right:d,width:f,height:p}=c;switch((_.isMobile||_.isMiPad||_.isIPAD||_.isTablet)&&(f=e.width(),p=e.height()),r){case 0:a=1.2*f,l+a>o.right&&(a=o.right-l);break;case 90:a=1.2*p,h+a>o.bottom&&(a=o.bottom-h);break;case 270:a=1.2*p,u-a<o.top&&(a=u-o.top);break;case 180:a=1.2*f,d-a<o.left&&(a=d-o.left)}this.isTypeWriter()&&(e.width(a),e.height(s.scrollHeight)),c=s.getBoundingClientRect();let{rotate:g,scale:m}=this.annotsRender.pageRender,v={left:c.left-o.left,right:c.right-o.left,top:c.top-o.top,bottom:c.bottom-o.top};v=this.annot.page.reverseDeviceRect(v,m,g),t.prototype.setHeight.call(this,e,v,v)},n.beforeBlur=function(t,e){if(this.$textInput.val().length<1)return this.$ui.hide(),this.removeAnnot(),!0;let n=this.annot,i=this.annot.getContent();if(!this.isHTMLSimulate("freetext"))return this.$ui.show(),!1;{if(i==t.target.value)return this.$pre.html(i).show(),!0;i=t.target.value,n.info.content=i,n.info.RC="",n.info.rect=e;let r=this.getInnerBoundary(!1);this.$ui.css(r),this.$pre.html(i).show();let o=this.$ui.get(0).style,s=parseFloat(o.left)*this.fontSizeScale,a=parseFloat(o.top)*this.fontSizeScale;const c=this.$ui.get(0).getBoundingClientRect();let l={left:s,top:a,right:s+c.width*this.fontSizeScale,bottom:a+c.height*this.fontSizeScale};e=this.annot.page.reverseDeviceRect(l,this.scale,this.rotate),n._setRect(e),n._setContent(i)}return!0},n.render=function(e=this.scale,n=this.rotate){if(this.scale=e,this.rotate=n,!this.isHTMLSimulate("freetext")||"typewritter"!=this.name)return this.isHTMLSimulate("freetext")&&"textbox"==this.name?(this.$ui.css({overflow:"hidden"}),t.prototype.render.call(this,e,n)):t.prototype.render.call(this,e,n);{let t=this.getStyle();t["word-break"]="keep-all",t["white-space"]="nowrap",t.opacity=this.annot.getOpacity();let e=this.$ui.find(".fv__ftui-container"),n=this.fontSizeScale;e.css({transform:`scale(${n})`,width:100/n+"%"}),this.$ui.css(t),this.$pre.text(this.annot.getContent())}},n.updateSize=function(e=this.scale,n=this.rotate){return this.isHTMLSimulate("freetext")?this.render(e,n):t.prototype.updateSize.call(this,e,n)},n.enableEditMode=function(){"editing"!==this.status&&(this.isHTMLSimulate("freetext")?this.$pre.hide():"typewritter"==this.name&&this.$ui.hide(),t.prototype.enableEditMode.call(this))},e}(hu);var fu=du,pu=m(1885),gu=m.n(pu);let mu=function(){function t(){this.drawAuxiliaryLine=Xa,this.clearAuxiliaryLine=Qa}var e=t.prototype;return e.init=function(t,e){this.calloutRender=t,this.$ui=D()(e),this.$ui.hide()},e.draw=function(t,e,n){let i=this.$ui[0];i.width=e.right-e.left,i.height=e.bottom-e.top;let r=i.getContext("2d");r.save(),r.clearRect(0,0,this.$ui.width(),this.$ui.height()),r.beginPath(),t.length>1&&(r.moveTo(t[0][0]-e.left,t[0][1]-e.top),r.lineTo(t[1][0]-e.left,t[1][1]-e.top)),t.length>2&&r.lineTo(t[2][0]-e.left,t[2][1]-e.top),r.strokeStyle="#5aa",r.lineWidth=2,r.stroke(),r.save();let o=n.width||n.right-n.left,s=n.height||Math.abs(n.top-n.bottom);r.rect(n.left-e.left,n.top-e.top,o,s),r.fillStyle="rgba(88, 176, 176, 0.5)",r.stroke(),r.fillRect(n.left-e.left,n.top-e.top,o,s),r.restore()},e.show=function(t,e,n){t&&this.draw(t,e,n),this.$ui.show()},e.hide=function(){this.$ui&&this.$ui.hide()},t}();var vu=mu;const yu="resize",wu="area",bu="text";let Au=function(){function t(t){this.control=t,this.annot=t.annot,this.companions=[],this.shape={getRect:()=>this.annot.getRect()},this.deltaX=0,this.deltaY=0,this.companionMargin={left:0,top:0,bottom:0,right:0}}var e=t.prototype;return e.companion=function(t){if(this===t)return;this.companions.indexOf(t)>-1||(this.companions.push(t),this.updateMargin())},e.updateMargin=function(){if(0===this.companions.length)return void(this.companionMargin={left:0,top:0,bottom:0,right:0});const t=this.shape.getRect();let{left:e,right:n,top:i,bottom:r}=t;this.companions.forEach((t=>{const o=t.shape.getRect();e=Math.min(o.left,e),i=Math.min(o.top,i),n=Math.max(o.right,n),r=Math.max(o.bottom,r)}));const o=t.left-e,s=n-t.right,a=t.top-i,c=r-t.bottom;this.companionMargin={left:o,right:s,top:a,bottom:c}},e.doStart=function(){this.deltaX=0,this.deltaY=0,this.control.showShape(),this.control.start(wu)},e.move=function(t,e,n){this.deltaX+=t,this.deltaY+=e,this.control.move(wu,-1,this.deltaX,this.deltaY).then((t=>{if(!t)return;const{rect:e,innerRect:n,points:i}=t;D()(this.control.calloutController).css(this.annot.getBoundary()),this.control.showShape(i,e,n)}))},e.resize=function(t,e,n,i){},e.end=function(t,e){this.control.calloutShape.hide(),"move"===t&&this.control.end(wu)},e.cancel=function(t){},e.rotateStart=function(){},e.updateRotateDegreeBox=function(t){},e.rotate=function(t,e){},e.rotateEnd=function(){},e.clearCompanions=function(){this.companions.length=0,this.companionMargin={left:0,top:0,bottom:0,right:0}},t}();const Pu=Q;let Su=function(){function t(t){const e=new DOMParser;this.whole=e.parseFromString(gu()({}),"text/html").body.firstChild,this.calloutController=this.ui=this.whole.querySelector(".fv__shape-control"),this.moveable=!0,this.isMoveDisabled=!1,this.bindMovingEvent(),this.calloutShape=new vu,this.emitter=t}var e=t.prototype;return e.init=function({start:t=_.noop,update:e=_.noop,interceptor:n=Pu,moving:i=_.noop,end:r=_.noop,cancel:o=_.noop,auxiliaryLine:s=null}={},a){this.start=t,this.update=e,this.move=i,this.interceptor=n,this.end=r,this.cancel=o,this.annot=a,this.isActive=!1,this.calloutShape.init(a,this.calloutController.querySelector(".fv__shape-control-previewer")),this.companionObject=new Au(this),this.isActive=!1,this.auxiliaryLine=s},e.getCompanionObject=function(){return this.companionObject},e.companion=function(t){"function"==typeof t.getCompanionObject&&this.companionObject.companion(t.getCompanionObject())},e.clearCompanions=function(){this.companionObject.clearCompanions()},e.getMargin=function(){return this.companionObject.companionMargin},e.active=function(t,e=this.annot.getBoundary(),n){this.isActive=!0,t.append(this.calloutController),D()(this.calloutController).css(e),this.box=n,this.adjustPointControl(),this.calloutController.style.display="block"},e.show=function(){D()(this.calloutController).show()},e.hide=function(){D()(this.calloutController).hide()},e.disable=function(){this.isDisabled=!0,this.calloutController.classList.add("disabled")},e.enable=function(){this.isDisabled=!1,this.calloutController.classList.remove("disabled")},e.moveDisable=function(){this.isMoveDisabled=!0,this.calloutController.classList.add("move-disabled")},e.moveEnable=function(){this.isMoveDisabled=!1,this.calloutController.classList.remove("move-disabled")},e.deactive=function(){this.calloutController.style.display="none",this.isActive=!1},e.destroy=function(){this.calloutController.parentNode&&this.calloutController.parentNode.removeChild(this.calloutController)},e.bindMovingEvent=function(){this._bindMoveAreaEvents(wu),this._bindMoveAreaEvents(bu);const t=this.ui.querySelectorAll(".fv__shape-controller");Array.prototype.slice.call(t).forEach((t=>this._bindMovePointEvents(t))),(0,_.attachContextMenuEvent)(this.calloutController,(t=>{this.annot.showContextMenu(t.clientX,t.clientY),t.preventDefault()}));this.ui},e.isEditHandle=function(t){let e=D()(t.element).parent().prev().find("textarea");e.length||(e=D()(t.element).parent().prev());let n=!1;return e&&(n=e.is(":visible")),D()(".fv__groupAnnotBorder").is(":visible")&&(n=!1),n},e._bindMoveAreaEvents=function(t){const e=this.ui;let n=".fv__shape-control-move-area";t==bu&&(n=".fv__shape-control-text-area");var i=new Di.Manager(e.querySelector(n));let r,o;i.add(new Di.Pan({direction:Di.DIRECTION_ALL}));let s=!1;i.on("panstart",(({deltaX:e,deltaY:n,srcEvent:a,center:c})=>{s=this.isEditHandle(i),this.isDisabled||!this.isActive||t==wu&&this.isMoveDisabled||s||(r=e,o=n,t===wu&&(this.onPrestart&&this.onPrestart(),this.companionObject.companions.forEach((t=>{t.doStart(),t.move(e,n,!0)}))),this.showShape(),this.start(t),t==wu&&this.trigger("movingstart",{deltaX:c.x+e,deltaY:c.y+n,srcEvent:a}))})),i.on("panend",(e=>{t==wu&&this.trigger("movingend"),this.isDisabled||!this.isActive||t==wu&&this.isMoveDisabled||s?s=!1:(t===wu&&this.companionObject.companions.forEach((t=>{t.end("move")})),this.calloutShape.hide(),this.end(t),t===wu&&this.onAfterEnd&&this.onAfterEnd("move"),this.auxiliaryLine&&this.calloutShape.clearAuxiliaryLine(this.auxiliaryLine.container))})),i.on("pancancel",(e=>{t==wu&&this.trigger("movingcancel"),this.isDisabled||!this.isActive||t==wu&&this.isMoveDisabled||s?s=!1:(this.cancel(t),t===wu&&this.onAfterEnd&&this.onAfterEnd("move"),this.auxiliaryLine&&this.calloutShape.clearAuxiliaryLine(this.auxiliaryLine.container))})),i.on("panmove",(({deltaX:e,deltaY:n,center:i,direction:a})=>{if(this.isDisabled||!this.isActive||t==wu&&this.isMoveDisabled||s)return;let c=e-r,l=n-o;const h=this.annot.getRect();this.move(t,-1,c,l).then(((e={})=>{if(!e)return;const n=this.annot.getRect();if(t===wu){const t=n.left-h.left,e=n.top-h.top;this.companionObject.companions.forEach((n=>{n.move(t,e)}))}D()(this.calloutController).css(this.annot.getBoundary());let{rect:i,innerRect:r,points:o}=e;if(t==bu&&this.adjustPointControl(o,i,r),this.showShape(o,i,r),t===wu&&this.auxiliaryLine){let t=this.auxiliaryLine.getPageAnnots();const e=n,i=this.auxiliaryLine.gap,r=this.auxiliaryLine.container,o=this.annot.getBoundary(),s=[o],a={};o.right=o.left+o.width,o.bottom=o.top+o.height,a[o.top+o.left+o.right+o.bottom]=!0,this.companionObject.companions.length&&this.companionObject.companions.forEach((t=>{const n=t.shape.getRect();e.left=Math.min(e.left,n.left),e.top=Math.min(e.top,n.top),e.right=Math.max(e.right,n.right),e.bottom=Math.max(e.bottom,n.bottom),s.push(n),a[n.top+n.left+n.right+n.bottom]=!0})),t=t.filter((t=>{let e=t.rect;if(ic.indexOf(t.type)<0)return!1;if(!a[e.top+e.left+e.right+e.bottom])return!0;for(let t of s)if(t.top==e.top&&t.left==e.left&&t.right==e.right&&t.bottom==e.bottom)return!1;return!0}));const c=t.map((t=>t.rect));this.calloutShape.drawAuxiliaryLine(e,c,i,r)}}))}))},e._bindMovePointEvents=function(t){let e,n,i=new Di.Manager(t);i.add(new Di.Pan({direction:Di.DIRECTION_ALL})),i.on("panmove",(({deltaX:i,deltaY:r,center:o,direction:s,target:a})=>{if(this.isDisabled||!this.isActive)return;let c=i-e,l=r-n;return this.move(yu,t.classList[2],c,l).then((t=>{if(!t)return;D()(this.calloutController).css(this.annot.getBoundary());let{rect:e,innerRect:n,points:i}=t;this.adjustPointControl(i,e,n),this.showShape(i,e,n)})),!1})),i.on("panstart",(({deltaX:t,deltaY:i,center:r})=>{if(!this.isDisabled&&this.isActive)return e=t,n=i,this.showShape(),this.start(yu),!1})),i.on("pancancel",(t=>{if(!this.isDisabled&&this.isActive)return this.cancel(yu),!1})),i.on("panend",(t=>{if(!this.isDisabled&&this.isActive)return this.calloutShape.hide(),this.end(yu),!1}))},e.showShape=function(t=this.annot.getCalloutPointers(),e=this.annot.getRect(),n=this.annot.getInnerBoundary()){this.calloutShape.show(t,e,n)},e.adjustPointControl=function(t=this.annot.getCalloutPointers(),e=this.annot.getRect(),n=this.annot.getInnerBoundary()){const i=this.ui;let r={left:n.left-e.left,top:n.top-e.top,width:n.width,height:n.height},o=i.querySelector(".fv__shape-control-text-area");D()(o).css(r);let s=i.querySelector(".fv__shape-control-inner-area");if(D()(s).css(r),t.length>1){let n=i.querySelector(".fv__shape-controller.calloutStart");D()(n).css({display:"block",left:t[0][0]-e.left-4,top:t[0][1]-e.top-4}),n=i.querySelector(".fv__shape-controller.calloutKnee"),D()(n).css({display:"block",left:t[1][0]-e.left-4,top:t[1][1]-e.top-4})}else{let t=i.querySelector(".fv__shape-controller.calloutStart");D()(t).css({display:"none"}),t=i.querySelector(".fv__shape-controller.calloutKnee"),D()(t).css({display:"none"})}},e.trigger=function(t,e){let n=this.emitter;n&&n.emit(t,e)},e.setSnapGrid=function(t){this.snapGrid=t},t}();const Cu=15;let Eu=function(){function t(){}return t.calcCalloutPosition=function({start:e,end:n,page:i,width:r=n[0]+110,height:o=n[1]+30,borderStyle:s,endingStyle:a,scale:c,rotate:l}={}){n[0]=Math.max(n[0],2),n[1]=Math.max(n[1],12);let h=100*c*4/3,u=20*c*2/3;const d=i.getOriginX(),f=i.getOriginY();let p=i.reverseDeviceRect({left:n[0],right:n[0]+h,top:n[1]-u,bottom:n[1]+u},c,l);e=i.reverseDevicePoint(e,c,l),n=i.reverseDevicePoint(n,c,l),p.left<d&&(p.left=d),p.bottom<f&&(p.bottom=f);let g=[{x:e[0],y:e[1]},{x:p.left-Cu,y:p.top+10},{x:p.left-.1,y:p.top+10}];if(g=t.checkKneePoint(0,g,p),!g||xu(g[0],g[1])<Cu||xu(g[2],g[1])<Cu)return{invalid:!0};let m=t.recalculateRect({points:g,innerRect:p,width:r,height:o,borderStyle:s,endingStyle:a});return m.left<d+5||m.right>r||m.bottom<f+5||m.top>o?{invalid:!0}:{calloutLinePoints:g,rect:m,innerRect:p}},t.checkKneePoint=function(e,n,i){if(e>3||n.length<2)return null;let r=JSON.parse(JSON.stringify(n));switch(e){case 0:r[2]={x:i.left-.1,y:(i.top+i.bottom)/2-.1},r[1]={x:r[2].x-Cu,y:r[2].y};break;case 1:r[1]={x:(i.left+i.right)/2,y:i.bottom-Cu},r[2]={x:r[1].x-.1,y:i.bottom-.1};break;case 2:r[1]={x:i.right+Cu,y:(i.top+i.bottom)/2},r[2]={x:i.right-.1,y:r[1].y-.1};break;case 3:r[1]={x:(i.left+i.right)/2,y:i.top+Cu},r[2]={x:r[1].x-.1,y:i.top-.1}}let o=xu(r[2],r[0]);if(o<20)return r;let s=xu(r[2],r[1]),a=xu(r[1],r[0]),c=Math.acos((o-s-a)/(2*Math.sqrt(s)*Math.sqrt(a)));return Math.PI>c&&c>Math.PI/2?t.checkKneePoint(e+1,n,i):r},t.recalculateRect=function({points:t,innerRect:e,width:n=1e4,height:i=1e4,rotate:r,borderInfo:o,endingStyle:s}={}){let a=1/0,c=a,l=-1/0,h=-1/0,u=a;for(let e=0;e<3;e++)t[e].x<c&&(c=t[e].x),t[e].x>l&&(l=t[e].x),t[e].y>h&&(h=t[e].y),t[e].y<u&&(u=t[e].y);r%2&&(n^=i,n^=i^=n);let d=0;o&&5==o.style&&(d=1==o.cloudIntensity?6:9);let f={left:Math.max(Math.min(c,e.left)-1,0),top:Math.max(h,e.top)+1,right:Math.min(Math.max(l,e.right)+1,n),bottom:Math.min(u,e.bottom)-1};0!==d&&(Math.abs(f.left-e.left)<2&&(f.left-=d),Math.abs(f.right-e.right)<2&&(f.right+=d),Math.abs(f.top-e.top)<2&&(f.top+=d),Math.abs(f.bottom-e.bottom)<2&&(f.bottom-=d));let p=0;switch(s){case 7:case 8:p=8;break;case 2:case 1:case 3:case 6:case 9:p=6}return 0!=p&&(f.left-=p,f.right+=p,f.top+=p,f.bottom-=p),e.left<f.left&&(e.left=f.left+1),e.right>f.right&&(e.right=f.right-1),e.top>f.top&&(e.top=f.top-1),e.bottom<f.bottom&&(e.bottom=f.bottom+1),f},t}();const xu=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)};var Du=Eu;let Iu=function(t){function e(e){var n;return(n=t.call(this,e)||this).helper=new Rc(e),n}(0,E.Z)(e,t);var n=e.prototype;return n.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-square-canvas")},n.doRender=function(t){t.renderingData;let e=this.component.annot;const n=e.info,i=n.borderInfo||{},r=t.scale,o=t.rotate,s=this.convertPointToPixel(i.width||1,r),a=e.page;let c=t.outerRect;const l=e.getCalloutLinePoints().map((t=>{let e=a.getDevicePoint([t.x,t.y],r,o);return[e[0]-c.left,e[1]-c.top]})),h=this.canvas.getContext("2d");if(h.clearRect(0,0,this.canvas.width,this.canvas.height),!this.component.needToggleView||!this.component.needToggleView()||this.component.shouldRenderByMouseEvent()){h.save(),t.lineWidth=s,0===s||!1===n.hasBorderColor?h.strokeStyle="transparent":h.strokeStyle=this.numberToRGBAString(n.color),h.lineWidth=s;try{switch(i.style){case st.BORDER_STYLE.BEVELED:case st.BORDER_STYLE.UNDERLINE:case st.BORDER_STYLE.SOLID:this.renderSolid(h,n,t);break;case st.BORDER_STYLE.DASHED:this.renderDashed(h,n,t);break;case st.BORDER_STYLE.CLOUDY:this.renderCloud(h,n,t)}let r=n.fillColor;r?(r=this.numberToRGBAString(r),h.fillStyle=r,h.fill()):r="transparent",t.renderingData.fillColor=r,this.renderCallout(h,t,n.borderColor,e.getCalloutLineEndingStyle(),l,s),this.component.$pre.css({height:t.innerRect.height,overflow:"hidden"}),h.stroke()}finally{h.restore()}this.afterRender(t)}},n.convertToPathPoint=function(t,e,n,i){const[r,o]=i.getDevicePoint([t.x,t.y],e);return new Dc(r-n.left,o-n.top)},n.shrinkRect=function(t,e){const n=Vo.on(t).shrink(e).extract();return y(n,{width:n.right-n.left,height:n.bottom-n.top})},n.renderCloud=function(t,e,n){e.fillColor;const i=e.borderInfo.cloudIntensity,r=this.shrinkRect(n.innerRect,0),o=this.shrinkRect(n.outerRect,0),s=r.width,a=r.height;new sl([new Dc(0,a),new Dc(s,a),new Dc(s,0),new Dc(0,0)],r,o).generate(32/3/i).render(t)},n.renderDashed=function(t,e,n){const i=e.borderInfo,r=i.dashes||[],o=i.dashPhase||0,s=n.scale;t.save(),t.setLineDash&&t.setLineDash(r.map((t=>this.convertPointToPixel(t,s)))),t.lineDashOffset=this.convertPointToPixel(o,s),this.renderSolid(t,e,n)},n.renderSolid=function(t,e,n){let{outerRect:i,innerRect:r}=n;const o=n.lineWidth,s=r.width,a=r.height;let c=r.left-i.left,l=r.top-i.top;const h=.5*o;t.beginPath(),t.rect(c+h,l+h,s-o,a-o),t.closePath()},n.renderCallout=function(t,e,n,i,r,o){t.save();t.lineWidth=o,t.strokeStyle=this.numberToRGBAString(n),t.moveTo(r[0][0],r[0][1]),r.map((e=>{t.lineTo(e[0],e[1])})),t.stroke();const s=new Dc(r[1][0],r[1][1]),a=new Dc(r[0][0],r[0][1]);this.helper.renderLineEnd(t,o,e,i,s,a),t.restore()},n.afterRender=function(e){let{outerRect:n,innerRect:i}=e;t.prototype.afterRender.call(this);let r=this.component,o=r.annot,s=r.$pre;s.html(o.getContent());let a=r.getStyle(!1);delete a.background;let c=4*o.getBorderWidth()/3*r.scale;5===o.getBorderInfo().style&&(c=0);let l=r.fontSizeScale;a.margin=[(i.top-n.top+c)/l,(n.right-i.right+c)/l,(n.bottom-i.bottom+c)/l,(i.left-n.left+c)/l].join("px ")+"px",r.$ui.find(".fv__ftui-container").css({transform:`scale(${l})`,width:100/l+"%"}),s.css(a),r.$ui.css("opacity",o.getOpacity())},e}(fc);const Ru=["left","bottom","right","top"];let Tu=function(t){function e(e,n,i,r){var o;(o=t.call(this,e,n,i,r)||this).annot=e,o.name="callout",o.$ui.removeClass("fv__pdf-page-textbox-annot-container"),o.$handler.removeClass("fv__pdf-page-textbox-annot-handler-container"),o.$ui.addClass("fv__pdf-page-callout-annot-container"),o.$handler.addClass("fv__pdf-page-callout-annot-handler-container"),_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{var t=new Su(o.pdfViewer.eventEmitter);return o.processShapeControlPermissionCtrl(t),t})),o.editDebouncePromiseQueue=new rt;let s=D()("<div class='fv__ftui-container'><pre class='fv__textbox_ui'></pre></div>");return o.$pre=s.find("pre"),o.$ui.append(s),o}(0,E.Z)(e,t);var n=e.prototype;return n.getPadding=function(){return this.annot.getBorderWidth()*this.pdfViewer.getSmartScale(this.scale)},n.computeLineHeight=function(t=this.computeFontSizePx(),e=this.computeFontSizeScale(t)){return 1.18*t/e},n.handleInputEvent=function(){this.resizeTaskExecutor.exec((async()=>{const t=this.getFinalRotateAngle(),e=this.$textInput[0],n=e.getBoundingClientRect(),i=this.parent("pdfPageRender").$ui[0].getBoundingClientRect(),r=this.getPadding(),{minHeight:o,maxHeight:s}=this.computeCurrentMinMaxHeight({inputRect:n,padding:r,rotate:t,pageRect:i}),a=e.clientHeight;switch(t){case 0:case 180:uu(e,{maxWidth:e.clientWidth,minWidth:e.clientWidth,maxHeight:i.height-2*r,minHeight:o});break;case 90:case 270:uu(e,{maxWidth:e.clientWidth,minWidth:e.clientWidth,maxHeight:i.width-2*r,minHeight:o})}let c;const l=e.clientHeight;if(l>s){const n=(()=>{switch(t){case 0:return i.bottom-l-i.top-2*r;case 90:case 180:return l+2*r;case 270:return i.right-l-i.left-2*r}})();switch(t){case 90:case 270:e.style.left=n+"px";break;default:e.style.top=n+"px"}c=!0}else c=e.clientHeight!==a;if(c)return this.setHeight(this.$textInput)}))},n.updateOnPermissionChange=function(t){if(this.isDestroyed)return;if(!_.Lazy.isPropertyIntialized(this,"shapeControl"))return;if(this.isDestroyed)return;let e=!1;e=!!this.groupMoveDisabled()||(t.ignorable()?this.moveDisabled():!t.isAdjustable()||this.moveDisabled());const n=this.shapeControl;e?n.disable():n.enable()},n.unActive=function(){t.prototype.unActive.call(this),this.shapeControl.deactive()},n.generateApRenderer=function(){return this.isHTMLSimulate("freetext")?new Iu(this):t.prototype.generateApRenderer.call(this)},n.active=function(){t.prototype.active.call(this),this.shapeControl.init({start:t=>this.onStartUpdateShape(t),moving:(t,e,n,i)=>this.onShapeMoving(t,e,n,i),end:t=>this.onShapeUpdateEnd(null,null,t),auxiliaryLine:void 0},this),this.rerenderShapeControl()},n.rerenderShapeControl=function(){const t=this._getShapeControllerBoundaryBox(),e=this.getBoundary();this.getAppPermission().then((n=>{let i=!1;i=!!this.groupMoveDisabled()||(n.ignorable()?this.moveDisabled():!n.isAdjustable()||this.moveDisabled()),i?this.shapeControl.disable():this.shapeControl.enable(),this.shapeControl.active(this.$handler,e,t)}))},n.movedByOther=function(){if(!this.isActive)return;this.activeRect();const t=this._getShapeControllerBoundaryBox(),e=this.getBoundary();this.shapeControl.active(this.$handler,e,t),this.shapeControl.adjustPointControl()},n.afterRender=function({transformed:t}){t&&this.isActive&&this.movedByOther()},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.backup=function(){let t=this.annot.getCalloutLinePoints();if(this.backupProperty={points:JSON.parse(JSON.stringify(t)),rect:y({},this.annot.getRect()),innerRect:y({},this.annot.getInnerRect())},t.length<3){let t=this.annot.getBorderStyle(),e=Du.calcCalloutPosition({start:[0,0],end:[this.backupProperty.innerRect.left,(this.backupProperty.innerRect.top+this.backupProperty.innerRect.bottom)/2],width:this.getPDFPage().getWidth(),height:this.getPDFPage().getHeight(),rotate:this.getPDFPage().getRotation()-this.rotate,borderStyle:t,endingStyle:this.annot.getCalloutLineEndingStyle()});this.setCalloutLinePoints(e.calloutLinePoints).then((t=>{const e=this._getShapeControllerBoundaryBox();let n;n=this.getBoundary(),this.shapeControl.active(this.$rect,n,e)}))}},n.onStartUpdateShape=function(t){this.backup()},n.onShapeMoving=function(t,e,n,i){let[r,o]=this.annot.page.reverseDeviceOffset([n,i],this.scale,this.rotate);return this.updatePromise=this.updatePromise||Promise.resolve(),this.updatePromise=this.updatePromise.then((()=>{switch(t){case bu:return this.updateTextRect(r,o);case wu:return this.updateRect(r,o);case yu:return this.updatePoint(e,r,o)}})).then((t=>(this.annot.isGrouped(),t)))},n.onShapeUpdateEnd=function(t,e,n){const i=this.annot.info.rect,r=this.annot.info.innerRect,o=this.annot.info.calloutLinePoints;return this._flushEdit(i,r,o).then((t=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),n==wu&&this.pdfViewer.eventEmitter.emit(nt.annotationMovedPosition,[this.annot],this.annot.page,this.annot)})).then((t=>(this.rerenderShapeControl(),t)))},n._flushEdit=function(t,e,n){let i=Promise.resolve();return this.annot.isGrouped()&&(i=this.annot.moveTo({left:t.left,top:t.top})),i.then((()=>this.updateCalloutFigure(t,e,n))).then((()=>(this.annot.oldRect=this.backupProperty.rect,this.redraw()))).then((()=>{this.isActive&&this.rerenderShapeControl()}))},n.updateRect=function(t,e){let n=y({},this.backupProperty.rect);if(n.left+=t,n.right+=t,n.bottom+=e,n.top+=e,!this.checkRect(n,!0))return Promise.resolve(!1);if(t=n.left-this.backupProperty.rect.left,e=n.top-this.backupProperty.rect.top,0==t&&0==e)return Promise.resolve();let i=y({},this.backupProperty.innerRect);i.left+=t,i.right+=t,i.top+=e,i.bottom+=e;let r=JSON.parse(JSON.stringify(this.backupProperty.points));return r[0].x+=t,r[0].y+=e,r[1].x+=t,r[1].y+=e,r[2].x+=t,r[2].y+=e,this.annot.info.rect=n,this.annot.info.innerRect=i,this.annot.info.calloutLinePoints=r,Promise.resolve({rect:this.getRect(),innerRect:this.getInnerBoundary(),points:this.getCalloutPointers()})},n.updateTextRect=function(t,e){let n=y({},this.backupProperty.innerRect),i=this.annot.getCalloutLinePoints();if(n.left+=t,n.right+=t,n.top+=e,n.bottom+=e,!this.checkRect(n,!0))return Promise.resolve(!1);if(i=Du.checkKneePoint(0,i,n),!i)return Promise.resolve(!1);const r=this.getPDFPage();let o=Du.recalculateRect({points:i,innerRect:n,width:r.getWidth(),height:r.getHeight(),rotate:r.getRotation(),borderInfo:this.annot.getBorderInfo(),endingStyle:this.annot.getCalloutLineEndingStyle()});return this.annot.info.rect=o,this.annot.info.innerRect=n,this.annot.info.calloutLinePoints=i,Promise.resolve({rect:this.getRect(),innerRect:this.getInnerBoundary(),points:this.getCalloutPointers()})},n.updatePoint=function(t,e,n){let i=this.annot.page;const r=i.getWidth(),o=i.getHeight(),s=this.annot.getBorderWidth();let a=this.backupProperty.points,c=JSON.parse(JSON.stringify(this.annot.getCalloutLinePoints())),l=!0,h=y({},this.backupProperty.innerRect);switch(t){case"calloutStart":c[0].x=a[0].x+e,c[0].y=a[0].y+n;let i=20;if(h.left-i<c[0].x&&c[0].x<h.right+i&&h.bottom-i<c[0].y&&c[0].y<h.top+i)return Promise.resolve();break;case"calloutKnee":if(c[1].x==c[2].x){if(e=0,a[1].y<a[2].y&&a[1].y+n>=a[2].y)return Promise.resolve();if(a[1].y>a[2].y&&a[1].y+n<=a[2].y)return Promise.resolve()}else if(c[1].y==c[2].y){if(n=0,a[1].x<a[2].x&&a[1].x+e>=a[2].x)return Promise.resolve();if(a[1].x>a[2].x&&a[1].x+e<=a[2].x)return Promise.resolve()}if(a[1].x+e<0||a[1].y+n<0)return Promise.resolve();l=!1,c[1].x=a[1].x+e,c[1].y=a[1].y+n;break;default:{let i=[].concat(Ru);for(let t=0;t<this.rotate/90+this.annot.page.getRotation();t++){let t=i.shift();i.push(t)}switch(t){case"left":h[i[0]]+=Fu(i[0],e,n);break;case"bottom":h[i[1]]+=Fu(i[1],e,n);break;case"right":h[i[2]]+=Fu(i[2],e,n);break;case"top":h[i[3]]+=Fu(i[3],e,n)}}}if(h.bottom<s&&(h.bottom=s),h.left<s&&(h.left=s),h.top>o-s&&(h.top=o-s),h.right>r-s&&(h.right=r-s),l&&(c=Du.checkKneePoint(0,c,h),!c))return Promise.resolve(!1);var u=Du.recalculateRect({points:c,innerRect:h,width:i.getWidth(),height:i.getHeight(),rotate:i.getRotation(),borderStyle:this.annot.getBorderInfo(),endingStyle:this.annot.getCalloutLineEndingStyle()});return this.checkRect(u)?(this.annot.info.rect=u,this.annot.info.innerRect=h,this.annot.info.calloutLinePoints=c,Promise.resolve({rect:this.getRect(),innerRect:this.getInnerBoundary(),points:this.getCalloutPointers()})):Promise.resolve()},n.setEndingStyle=function(t,e){return this.annot.setCalloutLineEndingStyle(+e).then((()=>this.annot.update())).then((()=>{this.activeRect(),this.redraw(),this.rerenderShapeControl()}))},n.setColor=function(t){return this.annot.setBorderColor(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setFillColor=function(t){return this.annot.setFillColor(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setBorderWidth=function(t){return this.annot.setBorderWidth(t).then((t=>t?this.updateRender().then((()=>(this.rerenderShapeControl(),this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setBorderStyle=function(t,e){return this.annot.setBorderStyle(t,e).then((()=>this.updateRender().then((()=>{this.rerenderShapeControl(),this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)}))))},n.getPropertyOptions=function(){t.prototype.getPropertyOptions.call(this);let e=this.annot,n=(0,_.colorConvertor)(e.getBorderColor(),"#"),i=e.getOpacity(),r=this.annot.getFillColor(),o=e.getBorderWidth(),s=this.propertyDisabled(),a=e.getFontColor(),c=e.getDefaultAppearance().textSize,l=e.getDefaultAppearance().font,h=this.isLocked();return{color:n,opacity:i,fillColor:r,lineStartStyle:e.getCalloutLineEndingStyle(),borderWidth:o,cloudy:!0,disabled:s,fontColor:a,fontSize:c,borderStyle:!0,font:l,isLocked:h}},n.getCalloutPointers=function(t=this.annot.getCalloutLinePoints()){let e=[];for(let n=0;n<t.length;n++){let i=this.annot.page.getDevicePoint([t[n].x,t[n].y],this.scale,this.rotate);e.push(i)}return e},n.setInnerRectHeight=function(t){let e=y({},this.backupProperty.innerRect),n=this.annot.getBorderWidth();5===this.annot.getBorderInfo().style&&(n=0);let i={left:t.left-e.left-n,right:t.right-e.right+n,top:t.top-e.top+n,bottom:t.bottom-e.bottom-n},r=0;if(Math.abs(i.left)<3&&(r++,i.left=0),Math.abs(i.right)<3&&(r++,i.right=0),Math.abs(i.top)<3&&(r++,i.top=0),Math.abs(i.bottom)<3&&(r++,i.bottom=0),4==r)return Promise.resolve(!1);let o=e.left+i.left,s=e.bottom+i.bottom,a=e.top+i.top,c=e.right+i.right;if(o>=c||a<=s)return Promise.resolve(!1);const l=this.annot.getBorderWidth(),h=this.annot.page.getHeight(),u=this.annot.page.getWidth();return o=Math.max(l,o),s=Math.max(l,s),a=Math.min(a,h-l),c=Math.min(c,u-l),this.setInnerRectProperty({left:o,bottom:s,top:a,right:c})},n.setInnerRectProperty=function(t){let e=JSON.parse(JSON.stringify(this.backupProperty.points));if(e=Du.checkKneePoint(0,e,t),!e)return Promise.resolve(!1);let n=this.annot.page,i=Du.recalculateRect({points:e,innerRect:t,width:n.getWidth(),height:n.getHeight(),rotate:n.getRotation(),borderStyle:this.annot.getBorderInfo(),endingStyle:this.annot.getCalloutLineEndingStyle()});Promise.resolve(),this.annot.getRect();return this.updateCalloutFigure(i,t,e)},n.checkRect=function(t,e){let n=this.annot.page;const i=this.shapeControl.getMargin(),[r,o]=n.reverseDeviceOffset([i.left,i.top],this.scale,this.rotate),[s,a]=n.reverseDeviceOffset([i.right,i.bottom],this.scale,this.rotate),c=Math.abs(r),l=Math.abs(a),h=Math.abs(s),u=Math.abs(o),d=n.getOriginX()+c,f=n.getOriginX()+n.getMediaWidth()-h,p=n.getOriginY()+l,g=n.getOriginY()+n.getMediaHeight()-u;if(e){if(t.left<d+2){const e=c+2-t.left;t.left+=e,t.right+=e}else if(t.right>f-1){const e=f-1-t.right;t.left+=e,t.right+=e}if(t.bottom<p+2){const e=l+2-t.bottom;t.bottom+=e,t.top+=e}else if(t.top>g-2){const e=g-2-t.top;t.bottom+=e,t.top+=e}return!0}return!(t.left<d||t.bottom<p||t.top>g||t.right>f)},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n.redraw=function(e){return this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t.prototype.redraw.call(this,e)},n.setHeight=function(e,n){this.annot.page.getRotationAngle(),this.annot.getRotation();let i=this.getStyle(!1,!0);this.setDomRect(i);const r=e[0].getBoundingClientRect();let o=this.parent("pdfPageRender").getPDFRectFromClientRect(r);const s=this.annotsRender,a=s.getRerenderMode();return s.setRerenderMode(Xn.debounce),this.setInnerRectHeight(o).then((n=>t.prototype.setHeight.call(this,e))).finally((()=>{this.setDomRect(i),e.css(i),s.setRerenderMode(a)}))},e}(hu);const Fu=(t,e,n)=>"left"===t||"right"==t?e:n;var _u=Tu;let ku=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.doRender=function(e){isNaN(e.innerRect.left)||(t.prototype.doRender.call(this,e,!1),this.afterRender())},n.afterRender=function(){t.prototype.afterRender.call(this);let e=this.component,n=e.annot,i=e.$pre;i.html(n.getContent());let r=e.getStyle(!0);delete r.background,delete r.left,delete r.top,r.padding=4*e.getPadding()/3*e.scale,i.css(r);let o=e.$ui.find(".fv__ftui-container"),s=e.fontSizeScale;o.css({transform:`scale(${s})`,width:100/s+"%"}),e.$ui.css("opacity",n.getOpacity())},e}(ml),Mu=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).name="textbox",o.$ui.removeClass("fv__pdf-page-typewritter-annot-container"),o.$handler.removeClass("fv__pdf-page-typewritter-annot-handler-container"),o.$ui.addClass("fv__pdf-page-textbox-annot-container"),o.$handler.addClass("fv__pdf-page-textbox-annot-handler-container"),o.$pre.addClass("fv__textbox_ui"),o}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){t.prototype.active.call(this),this.fontSizeScale<1&&this.$handler.css("transform","scale(1)")},n.getShapeOptions=function(){let e=t.prototype.getShapeOptions.call(this);return e.resizable=!0,e},n.generateApRenderer=function(){return this.isHTMLSimulate("freetext")?new ku(this):t.prototype.generateApRenderer.call(this)},n.getPropertyOptions=function(){t.prototype.getPropertyOptions.call(this);let e=this.annot,n=(0,_.colorConvertor)(e.getBorderColor(),"#"),i=e.getOpacity(),r=e.getBorderWidth();return{color:n,opacity:i,fillColor:e.getFillColor(),borderWidth:r,cloudy:!0,disabled:this.propertyDisabled(),fontColor:e.getFontColor(),fontSize:e.getDefaultAppearance().textSize,borderStyle:!0,font:e.getDefaultAppearance().font,isLocked:this.isLocked()}},n.setHeight=function(t,e){const n=this.parent("pdfPageRender");if(n.isDestroyed||!n.$ui)return;const{height:i}=this.getMaxSize(t[0]);t[0].style.cssText+=`\n            max-height: ${i}px;\n            height: ${Math.min(t[0].scrollTop+t[0].scrollHeight,i)}px;\n        `;const r=t[0].getBoundingClientRect(),o=this.parent("pdfPageRender").getPDFRectFromClientRect(r);return this.setInnerRectHeight(o)},n.setBorderWidth=function(t){return this.annot.setBorderWidth(t).then((t=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t)))},n.setColor=function(t){return this.annot.setBorderColor(t).then((t=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t)))},n.setFillColor=function(t){return this.annot.setFillColor(t).then((t=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t)))},n.setBorderStyle=function(t,e){return this.annot.setBorderStyle(t,e).then((t=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t)))},n.setInnerRectHeight=function(t){let e,n=this.annot.getBorderInfo(),i=y({},this.backupProperty.rect);e=n.style===st.BORDER_STYLE.CLOUDY?y({},this.backupProperty.innerRect):y({},i);let r={left:t.left-e.left,right:t.right-e.right,top:t.top-e.top,bottom:t.bottom-e.bottom},o=0;return Math.abs(r.left)<3&&(o++,r.left=0),Math.abs(r.right)<3&&(o++,r.right=0),Math.abs(r.top)<3&&(o++,r.top=0),Math.abs(r.bottom)<3&&(o++,r.bottom=0),4===o?Promise.resolve():(i={left:i.left+r.left,right:i.right+r.right,top:i.top+r.top,bottom:i.bottom+r.bottom},this.updateRectFigure(i,t).then((()=>{this.backup()})))},n.setInnerRect=function(e){return t.prototype.setInnerRect.call(this,e).then((()=>this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),!0)))))},n.updateRectFigure=function(t,e){return this.annot.updateRectFigure(t,e).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.backup=function(){this.backupProperty={rect:y({},this.annot.getRect()),innerRect:y({},this.annot.getInnerRect())}},n.onStartUpdateShape=function(t,e,n){this.backup()},n.onShapeUpdateEnd=function(t,e,n){let i=Promise.resolve();switch(n){case"move":i=this.moveTo(t.left,t.top,n);break;case"resize":let e=this.backupProperty.rect,r=this.backupProperty.innerRect,o={left:r.left-e.left,right:e.right-r.right,bottom:r.bottom-e.bottom,top:e.top-r.top};const s=this.getPDFPage().reverseDeviceRect({left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height},this.scale,this.rotate),a={left:s.left-o.left,right:s.right+o.right,bottom:s.bottom-o.bottom,top:s.top+o.top};i=this.setRectInPDF(a,!1).then((t=>(this.activeRect(),this.setInnerRect(s)))).finally((()=>{this.pdfViewer.eventEmitter.emit(nt.annotationUpdated,[this.annot])}))}return this.annot.isGrouped()&&this.pdfViewer.eventEmitter.emit("freetextGroupMovingEnd"),i},n.activeRect=function(t=this.annot){let e=this.$rect=this.$rect||this.rectInit(),n=this.scale,i=this.rotate,r=t.getDeviceInnerRect(n,i);const o="px";e.css({left:r.left+o,top:r.top+o,width:r.right-r.left+o,height:r.bottom-r.top+o}),"editing"===this.status&&this.updateTextInputStyle()},n.getBoundary=function(){const t=this.annot.getDeviceInnerRect(this.scale,this.rotate);let e=this.annot.getInnerRect(),n=t.right-t.left,i=t.bottom-t.top;return 8&this.annot.getFlags()&&(n=e.right-e.left,i=e.top-e.bottom),{left:t.left,top:t.top,width:n,height:i}},n.beforeBlur=function(){return!1},n.handleInputEvent=function(){hu.prototype.handleInputEvent.call(this)},e}(fu);var Ou=Mu,Lu=m(9194),Nu=m.n(Lu);let Bu="object"==typeof window?window:"function"==typeof importScripts?self:{},Vu=Bu.indexedDB||Bu.mozIndexedDB||Bu.webkitIndexedDB||Bu.msIndexedDB,Uu=Bu.IDBTransaction||Bu.webkitIDBTransaction||Bu.msIDBTransaction,Hu={},ju=function(){function t(t,e,n=1,i=[]){this.dbName=e,this.storeName=t,this.keyPath="id",this.version=n,this.indexArr=i}var e=t.prototype;return e._getDB=function(){let t=this.dbName,e=Hu[t];if(e)return e;let n=(0,_.createDeferred)(),i=Hu[t]=n.promise,r=Vu.open(t,this.version),o=this.keyPath;return r.onerror=t=>{n.reject(t)},r.onupgradeneeded=t=>{var e=t.target.result;if(!e.objectStoreNames.contains(this.storeName)){let t=e.createObjectStore(this.storeName,{keyPath:o});this.indexArr.length&&this.indexArr.forEach((({indexKey:e,unique:n=!1})=>{t.createIndex(e,e,{unique:n})}))}},r.onsuccess=t=>{n.resolve(t.target.result)},i},e.set=function(t,e){return Vu?this._getDB().then((n=>{let i=this.storeName,r=this.keyPath,o=n.transaction([i],Uu.READ_WRITE||"readwrite").objectStore(i),s={value:e};s[r]=t.toString();let a=o.put(s),c=(0,_.createDeferred)();return a.onsuccess=t=>{c.resolve()},a.onerror=t=>{c.reject(t)},c.promise})):Promise.resolve()},e.get=function(t){return Vu?this._getDB().then((e=>{let n=(0,_.createDeferred)(),i=this.storeName;if(!e.objectStoreNames.contains(i))return n.resolve();let r=e.transaction([i]).objectStore(i).get(t);return r.onsuccess=t=>{let e=t.target.result;if(!e)return n.resolve();n.resolve(e.value)},r.onerror=t=>{n.reject(t)},r.oncomplete=t=>{},n.promise})):Promise.resolve(null)},e.getByIndex=function(t,e,n=!1){return Vu&&this.indexArr.some((e=>e.indexKey===t))?this._getDB().then((i=>{let r=(0,_.createDeferred)(),o=this.storeName;if(!i.objectStoreNames.contains(o))return r.resolve();let s=i.transaction([o]).objectStore(o).index(t).openCursor(null,"next"),a=[];return s.onsuccess=i=>{let o=i.target.result;if(o){let i=o.value[t];return n?i.toLowerCase().indexOf(e.toLowerCase())>-1&&a.push(o.value):i===e&&a.push(o.value),void o.continue()}r.resolve(a)},s.onerror=t=>{r.reject(t)},s.oncomplete=t=>{},r.promise})):Promise.resolve(null)},e.remove=function(t){return Vu?this._getDB().then((e=>{let n=this.storeName;if(!e.objectStoreNames.contains(n))return;let i=e.transaction([n],Uu.READ_WRITE||"readwrite").objectStore(n).delete(t),r=(0,_.createDeferred)();return i.onsuccess=t=>{r.resolve()},i.onerror=t=>{r.reject()},r.promise})):Promise.resolve()},e.clear=function(){return Vu?this._getDB().then((t=>{let e=this.storeName;if(!t.objectStoreNames.contains(e))return;let n=t.transaction([e],Uu.READ_WRITE||"readwrite").objectStore(e).clear(),i=(0,_.createDeferred)();return n.onsuccess=t=>{i.resolve()},n.onerror=t=>{i.reject()},i.promise})):Promise.resolve()},e.destroy=function(){let t=this.dbName;delete Hu[t],Vu&&Vu.deleteDatabase(t)},t}(),$u=function(t){function e(e,n,i=1,r="id",o=[]){var s;return(s=t.call(this,e,n,i,o)||this).keyPath=r,s}(0,E.Z)(e,t);var n=e.prototype;return n.set=function(){throw new Error('This method is duplicated, please use "add" instead.')},n.add=function(t){return Vu?this._getDB().then((e=>{let n=this.storeName,i=(this.keyPath,e.transaction([n],Uu.READ_WRITE||"readwrite").objectStore(n).put(t)),r=(0,_.createDeferred)();return i.onsuccess=t=>{r.resolve()},i.onerror=t=>{r.reject(t)},r.promise})):Promise.resolve()},n.addItems=function(t=[]){return Array.isArray(t)&&t.length&&Vu?this._getDB().then((e=>{let n=this.storeName,i=(this.keyPath,e.transaction([n],Uu.READ_WRITE||"readwrite").objectStore(n)),r=t.length,o=[];for(let e=0;e<r;e++){let n=t[e],r=i.put(n),s=(0,_.createDeferred)();r.onsuccess=t=>{s.resolve()},r.onerror=t=>{s.reject(t)},o.push(s.promise)}return Promise.all(o)})):Promise.resolve()},n.update=function(t,e,n){return Vu?this.get(t).then((t=>(t[e]=n,this.add(t)))):Promise.resolve()},n.get=function(t){return Vu?this._getDB().then((e=>{let n=(0,_.createDeferred)(),i=this.storeName;if(!e.objectStoreNames.contains(i))return n.resolve();let r=e.transaction([i]).objectStore(i).get(t);return r.onsuccess=t=>{let e=t.target.result;if(!e)return n.resolve();n.resolve(e)},r.onerror=t=>{n.reject(t)},r.oncomplete=t=>{},n.promise})):Promise.resolve(null)},n.getAll=function(t=null,e){return Vu?this._getDB().then((n=>{let i=(0,_.createDeferred)(),r=this.storeName;if(!n.objectStoreNames.contains(r))return i.resolve();let o=n.transaction([r]).objectStore(r);if(IDBObjectStore.prototype.getAll){let n=o.getAll(t,e);return n.onsuccess=t=>{let e=t.target.result;if(!e)return i.resolve();i.resolve(e)},n.onerror=t=>{i.reject(t)},i.promise}{let n=o.openCursor(t),r=[];return n.onsuccess=t=>{let n=t.target.result;n&&(r.push(n.value),void 0===e||r.length<e)?n.continue():i.resolve(r)},n.onerror=t=>{i.reject(t)},i.promise}})):Promise.resolve(null)},n.getAllKeys=function(t){return Vu?this._getDB().then((e=>{let n=(0,_.createDeferred)(),i=this.storeName;if(!e.objectStoreNames.contains(i))return n.resolve();let r=e.transaction([i]).objectStore(i);if(IDBObjectStore.prototype.getAllKeys){let e=r.getAllKeys(null,t);return e.onsuccess=t=>{let e=t.target.result;if(!e)return n.resolve();n.resolve(e)},e.onerror=t=>{n.reject(t)},n.promise}{let e=r.openCursor(key),i=[];return e.onsuccess=e=>{let r=e.target.result;r&&(i.push(r.key),void 0===t||i.length<t)?r.continue():n.resolve(i)},e.onerror=t=>{n.reject(t)},n.promise}})):Promise.resolve(null)},e}(ju);function Wu(t){return/^[\d\(\)\.\-\s]*\d+[\d\(\)\.\-\s]*$/.test(t)}function Yu(t){const e=t.getFlags();return t.getType()===xe.Text&&!De.isPassword(e)&&!De.isHidden(e)&&!De.isReadOnly(e)}function Gu(t){return{text:t}}let Ku=function(){function t(t=null){const e=this.dbName="autocomplete",n=this.primaryName="text";this.db=new $u(e,st.DB_PREFIX+e,1,n),this.pdfViewer=t}var e=t.prototype;return e.getFormEntries=function(){return this.pdfViewer?this.pdfViewer.getCurrentPDFDoc().loadPDFForm().then((t=>{const e=[],n=t.fields,i=this.pdfViewer.getAutoCompleteSetting().rememberNumericalData;for(let t of n)if(Yu(t)){const n=t.getValue();if(!i&&Wu(n))continue;e.push(Gu(t.getValue()))}return e})):Promise.resolve([])},e.getDbEntries=function(){return this.db.getAll()},e.getAllEntries=function(){return Promise.all([this.getFormEntries(),this.getDbEntries()]).then((([t,e])=>{t=t||[],e=e||[];const n={};for(let e of t)n[e[this.primaryName]]=e;for(let t of e)n[t[this.primaryName]]=t;return Object.values(n)}))},e.saveDbEntry=function(t){!this.pdfViewer.getAutoCompleteSetting().rememberNumericalData&&Wu(t)||this.db.add(Gu(t))},e.clearDbEntries=function(){return this.db.clear()},e.deleteEntry=function(t){return this.db.remove(t)},t}();const qu="fv__autocomp-li",zu="fv__autocomp-open",Ju="fv__autocomp-close";let Zu=function(t){function e(n,{bindInputEvent:i=!0,entryGetter:r,entryMatcher:o=e.defaultMatcher,entrySorter:s=e.defaultSorter,parent:a="body"}){var c;return(c=t.call(this)||this).bindInputEvent=i,c.entryGetter=r,c.entryMatcher=o,c.entrySorter=s,c.isOpen=!1,c.focusIndex=0,c.$input="string"==typeof n?D()(n):n,c.parent="string"==typeof a?D()(a):a,c._initData(),c._initUI(),c._initEvent(),c}(0,E.Z)(e,t);var n=e.prototype;return n._initData=function(){this.entries=this.entryGetter()},n._initUI=function(){const{top:t,left:e}=this.$input.offset(),{top:n,left:i}=this.parent.offset();let r=`top: ${t-n+this.$input.outerHeight()}px; left: ${e-i}px`;this.$ul=D()(`\n            <ul class="fv__autocomp-ul ${Ju}" style="${r}"></ul>\n        `),this.parent.append(this.$ul)},n._initEvent=function(){this.bindInputEvent&&(this._unbindInputEvent=this._bindInputEvent()),this._unbindUlEvent=this._bindUlEvent()},n._bindInputEvent=function(){},n._bindUlEvent=function(){const t=t=>{this.$input.val(D()(t.target).data("text")),this.emit("select"),this.close()};return this.$ul.on("click","li",t),()=>this.$ul.off("click","li",t)},n.evaluate=function(){this.$ul.empty(),this.focusIndex=0;let t=this.entries;t instanceof Promise?t.then((t=>{this.entries=t,this._displayEntries(t)})):this._displayEntries(t)},n._displayEntries=function(t){if((t=this.entrySorter(this.entryMatcher(t,this.$input.val()))).length>0){const e=[];for(let n in t){let i=t[n],r=this.focusIndex==n?"active":"";e.push(D()(`<li class="${qu} ${r}" data-text="${i.text}">${i.text}</li>`))}this.$ul.append(e),this.open()}else this.close()},n.open=function(){this.$ul.removeClass(Ju),this.$ul.addClass(zu),this.isOpen=!0},n.close=function(){this.$ul.removeClass(zu),this.$ul.addClass(Ju),this.focusIndex=0,this.isOpen=!1},n.goto=function(t){if(!this.isOpen)return;this.$ul.children().eq(this.focusIndex).removeClass("active");const e=this.$ul.children().eq(t);e.addClass("active"),this.focusIndex=t;const n=this.$ul,i=n.height(),r=n.scrollTop(),o=e.outerHeight(),s=e.position().top-n.children().first().position().top;s+o>i+r&&n.scrollTop(s+o-i),s<r&&n.scrollTop(s)},n.next=function(){const t=this.$ul.find(`li.${qu}`).length;if(!this.isOpen||!this.entries||0===t)return;const e=(this.focusIndex+1)%t;this.goto(e)},n.previous=function(){const t=this.$ul.find(`li.${qu}`).length;if(!this.isOpen||!this.entries||0===t)return;let e=(this.focusIndex-1)%t;e<0&&(e=t-1),this.goto(e)},n.select=function(t=this.focusIndex){this.$input.val(this.$ul.children().eq(t).data("text"))},n.destroy=function(){this._unbindInputEvent&&this._unbindInputEvent(),this._unbindUlEvent&&this._unbindUlEvent(),this.$ul.remove()},n.setMatcher=function(t){this.entryMatcher=t},e.defaultMatcher=function(t,e){return t.filter((t=>t.text.startsWith(e)&&e!==t.text))},e.defaultSorter=function(t){return t},e}(zs());const Xu=["Jan","Feb","Mar","Apr","May","Jun","Ju","Aug","Sep","Oct","Nov","Dec"],Qu=["January","February","March","April","May","June","July","August","September","October","November","December"];let td=function(){function t(){}return t.MakeFixed=function(t,e){return(Array(e).join("0")+t).slice(-e)},t.FormatDateTimeString=function(e,n,i=n){let r=t.GetDate(e,i);n&&""!=n||(r=new Date),"Invalid Date"==r.toString()&&(r=new Date);let o="",s="",a=r.getFullYear(),c=r.getMonth()+1,l=r.getDate(),h=r.getHours(),u=r.getMinutes(),d=r.getSeconds(),f=0,p=0;for(;f<n.length;){switch(p=n[f],s="",p){case"y":case"m":case"d":case"H":case"h":case"M":case"s":case"t":if(n[f+1]!=p){switch(p){case"y":s+=p;break;case"m":s=c;break;case"d":s=l;break;case"H":s=h;break;case"h":s=h>12?h-12:h;break;case"M":s=u;break;case"s":s=d;break;case"t":s+=h>=12?"p":"a"}f++}else if(n[f+1]==p&&n[f+2]!=p){switch(p){case"y":s=this.MakeFixed(a-100*parseInt(a/100),2);break;case"m":s=this.MakeFixed(c,2);break;case"d":s=this.MakeFixed(l,2);break;case"H":s=this.MakeFixed(h,2);break;case"h":s=this.MakeFixed(h>12?h-12:h,2);break;case"M":s=this.MakeFixed(u,2);break;case"s":s=this.MakeFixed(d,2);break;case"t":s=h>=12?"pm":"am"}f+=2}else if(n[f+1]==p&&n[f+2]==p&&n[f+3]!=p)if("m"===p)f+=3,s+=Xu[c-1];else f+=3,s+=p,s+=p,s+=p;else if(n[f+1]==p&&n[f+2]==p&&n[f+3]==p&&n[f+4]!=p)switch(p){case"y":s=a,f+=4;break;case"m":f+=4,s+=Qu[c-1];break;default:f+=4,s+=p,s+=p,s+=p,s+=p}else f++,s+=p;break;default:f++,s+=p}o+=s}return o},t.GetDate=function(t,e,n){e=(e=(e=e.replace("MM","ii")).replace("M","i")).toLowerCase();let i=new Date(t),r=new Date,o=r.getFullYear(),s=r.getMonth(),a=r.getDate(),c=0;for(let n=0;n<e.length&&c<t.length;){switch(e[n]){case"y":let i="";for(;"0"<=t[c]&&t[c]<="9";)i+=t[c],c++;for(;"y"==e[n];)n++;if(2===i.length)i="20"+i;o=parseInt(i);break;case"m":let l="";if("A"<=t[c]&&t[c]<="Z")for(;c<t.length&&t[c].match(/[a-zA-Z]/);)l+=t[c],c++;else for(;"0"<=t[c]&&t[c]<="9";)l+=t[c],c++;for(;"m"==e[n];)n++;switch(l.length){case 1:case 2:s=parseInt(l)-1;break;case 3:s=Xu.indexOf(l);break;case 4:s=Qu.indexOf(l)}break;case"d":let h="";for(;"0"<=t[c]&&t[c]<="9";)h+=t[c],c++;for(;"d"==e[n];)n++;a=parseInt(h);break;case"i":let u="";for(;"0"<=t[c]&&t[c]<="9";)u+=t[c],c++;for(;"i"==e[n];)n++;r.setMinutes(parseInt(u));break;case"h":let d="";for(;"0"<=t[c]&&t[c]<="9";)d+=t[c],c++;for(;"h"==e[n];)n++;r.setHours(parseInt(d));break;case"s":let f="";for(;"0"<=t[c]&&t[c]<="9";)f+=t[c],c++;for(;"s"==e[n];)n++;r.setSeconds(parseInt(f));break;case"t":let p="";for(;t[c]&&t[c].match(/[AaPpMm]/);)p+=t[c],c++;for(;"t"==e[n];)n++;if("pm"==p.toLowerCase()){let t=r.getHours();t<12&&(t+=12),r.setHours(t)}else{12==r.getHours()&&r.setHours(0)}break;default:c++,n++}}1==s&&29==a&&o%4!=0&&(o&=4294967292),r.setFullYear(o),r.setMonth(s),r.setDate(a);let l=new Date;return Math.abs(i.getFullYear()-l.getFullYear())<Math.abs(r.getFullYear()-l.getFullYear())||Math.abs(i.getMonth()-l.getMonth())<Math.abs(r.getMonth()-l.getMonth())||Math.abs(i.getDate()-l.getDate())<Math.abs(r.getDate()-l.getDate())?i:r},t.getMonth=function(t,e){switch(e){case"m":return t;case"F":return Qu[t];case"M":return Xu[t]}},t.switchFormat=function(t,e){return"toLib"==e?t.replace("yyyy","Y").replace("yy","y").replace("dd","d").replace("HH","H").replace("hh","h").replace("MM","i").replace("M","i").replace("mmmm","F").replace("mmm","M").replace("mm","m").replace("ss","S").replace("tt","K"):t.replace("Y","yyyy").replace("y","yy").replace("d","dd").replace("H","HH").replace("h","hh").replace("i","MM").replace("F","mmmm").replace("M","mmm").replace("m","mm").replace("S","ss").replace("K","tt")},t}();var ed=m(5143),nd=m.n(ed);m(7187);const id="100%",rd="transparent";let od=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).engineForm=o.parent("pdfDocRender").doc.getPDFForm(),o.$ui.addClass("form_text_field"),e.setRenderNotifier((t=>o.updateUI(t))),o.defaultEvnet=!1,o.mousewheel(),o.generateHandler(1)&&o.bindInputEvent(),o.isOnFocus=!1,o}(0,E.Z)(e,t);var n=e.prototype;return n.genLabelUI=function(t=1,e=this.rotate){if(!this.annot.getField())return!1;const n=nd()();return this.$foreground.after(D()(n)),!0},n.mousewheel=function(){const t=this.parent("pdfViewerRender");this.disposor.addDestroyHook(t.scrollWrap.addScrollEventListener((()=>{const t=this.formRender.dt;t&&t._positionCalendar&&this.isActive&&t.isOpen&&t._positionCalendar(this.$handler.get(0))})))},n.updateOnPermissionChange=function(){if(!this.$textInput)return;t.prototype.updateOnPermissionChange.call(this);const e=this.checkReadOnly();this.$textInput[0].readOnly=e},n.destroy=function(){this.$textInput.off("change keydown keyup blur dblclick input"),this.$input.remove(),this.$input=null,this.$textInput=null,t.prototype.destroy.call(this),this.engineForm=null,this.destroyAutocomplete()},n.generateHandler=function(t){let e=this.annot,n=e.getField();if(!n)return!1;let i=90*(4-this.annot.getRotation()+e.getPage().getRotation()),r=id,o=id,s=this.checkReadOnly(),a=4*e.getBorderWidth()/3*t,c=(0,_.getTransparentOrColor)(e.getMKProperty("borderColor"));_.isSafari&&"transparent"===c&&(c="rgba(255,255,255,0.01)");let l=(0,_.getTransparentOrColor)(e.getMKProperty("fillColor"));this.$handler.css("background-color",l);let h=e.getAlignment(),u=De.isMultiline(n.getFlags()),d=De.isPassword(n.getFlags()),f=De.isNoScroll(n.getFlags()),p=De.isNoSpellCheck(n.getFlags()),g=De.isComb(n.getFlags())&&n.getMaxLength()>0,m=!this.checkInvisible(),v=(0,_.colorConvertor)(16777215&e.getDAFontColor(),"#"),y=this.getFontSize(n,e);y?y+="px":y=u?"16px":"xx-large";let w=n.getValue(),b=Nu()({borderWidth:a,borderColor:c,background:rd,isSafari:_.isSafari,isMultiline:u,isPassword:d,isNoScroll:f,isNoSpellCheck:p,comb:g,readonly:s,align:h,value:w,maxLength:n.getMaxLength(),visible:m,color:v,fontSize:y,rotation:i+this.rotate,left:"0",top:"0",width:r,height:o}),A=this.$input=D()(b),P=this.$textInput=A.find("input");if(this.isTextarea=0==P.length,this.isTextarea&&(P=this.$textInput=A.find("textarea")),this.$foreground.before(A),g&&P.hide(),this.formRender.usingHTML(6)){this.$input.hide();const t=this.annotsRender.pageRender;this.render(t.getScale(),t.getRotation())}else this.$input.css("visibility","hidden");return!0},n.getFontSize=function(t,e){let n=e.getDefaultAppearance(),i=t.getDAFontSize();return n&&n.textSize&&(i=n.textSize),4*i/3},n.updateSize=function(t=this.scale,e=this.rotate,n=!1){this.render(t,e,n)},n.render=function(e=this.scale,n=this.rotate,i=!1){if(!this.annot)return Promise.resolve();let r=this.annot,o=r.getField();this.scale=e,this.rotate=n;let s=this.updateForgroundAndHandler(e,n);if(o&&this.formRender.usingHTML(6)){let t=this.getFontSize(o,r)*e;if(t)t+="px";else if(De.isMultiline(o.getFlags()))t=16*e+"px";else{clearTimeout(this.autoFontSizeTimeout);let t=this;this.autoFontSizeTimeout=setTimeout((()=>{t.annot&&t.formRender&&(t.autoFontSize(),t.formRender.usingHTML(6)&&t.$input.show())}),20)}const i=((this.getPDFPage().getRotationAngle()+n-90*r.getRotation())%360+360)%360;let a,c,l="center";switch(i){case 90:case 270:a=s.height,c=s.width,l=270===i?`${a/2}px ${a/2}px`:c/2+"px";break;default:a=s.width,c=s.height}De.isComb(o.getFlags())&&o.getMaxLength()>0&&this.$input.find(".textComb").css({width:s.width/o.getMaxLength(),height:s.height,"line-height":s.height+"px",fontSize:t});let h=4*r.getBorderWidth()/3*e,u={"font-size":t,"border-width":h+"px",transform:`rotate(${i}deg)`,"transform-origin":l,width:a+"px",height:c+"px","line-height":De.isMultiline(o.getFlags())?"1":c-2*h+"px"};this.$input.show(),this.$textInput.css(u)}return this.formRender.usingHTML(6)?Promise.resolve():t.prototype.render.call(this,e,n,i)},n.focus=function(t){this.autoFontSize(),this.hasFocus=!0,this.$handler.find("canvas").hide(),this.$input.css("visibility","visible");const e=this.annot.getDefaultAppearance();this.$input.find("input").css("fontFamily",e.fontName||e.fullName);let n=this.annot.getField(),i=this.$textInput;t||(this.lastAvailableValue=n.getValue()),this.isOnFocus=!0,setTimeout((()=>{this.$foreground.hide(),this.isOnFocus=!1,_.isIOS||document.activeElement!=i[0]&&i[0].focus()}),50),this.$input.find(".textCombContainer").hide(),i.show();let r=n.getAction(Er.FieldWillFormat),o=this.getDateTimeFormat();if(o&&(o=td.switchFormat(o,"toLib"),0==o.length&&(o="m-d-y"),this.isTextarea&&Object.defineProperty(i[0],"type",{value:"text",writable:!0}),this.formRender.showDateTimePicker(i.val(),o,i[0],((t,e,n)=>{i.val(e),this.valueChanged=!0}))),"basic"===this.pdfViewer.getAutoCompleteSetting().level&&Yu(n)&&!this.isDate){const t=new Ku(this.pdfViewer),e=n.getMaxLength(),i=this.$autocomplete=new Zu(this.$textInput,{entryGetter:t.getAllEntries.bind(t),parent:this.parent("pdfPageRender").$annotsContainer});e&&i.setMatcher((s=e,function(t,e){return t.filter((t=>{const n=t.text;return n.startsWith(e)&&n!==e&&n.length<=s}))})),i.on("select",(()=>{this.valueChanged=!0,this.formRender.blurControl()}))}var s;n&&i.val(n.getValue()||""),r=this.annot.getAdditionalAction(Er.AnnotReceiveInputFocus);try{return r&&this.formRender.execAction("Field",r,null,n)}finally{this.isActive=!0,this.pdfViewer.eventEmitter.emit(nt.focusOnControl,this)}},n.handleEvent=function(t,e){if(this.$ui.hasClass("selected")||this.$ui.hasClass("editing"))return;let n=this.formRender;if(this.checkReadOnly()||this.checkInvisible())t!=Er.AnnotMouseButtonReleased&&t!=Er.AnnotReceiveInputFocus||n.blurControl();else{switch(t){case Er.AnnotMouseButtonPressed:if(n.control==this)return this.performAction(t),2;n.focusControl(this);break;case Er.AnnotMouseButtonReleased:if(!n.isSameTarget(this))return;let e=this.annot.action;e&&n.execAction("Field",e,null,this.annot.getField());let i=this.$textInput;_.isIOS||(setTimeout((()=>{document.activeElement!=i[0]&&i.focus()}),50),this.$input.find(".textCombContainer").hide(),i.show()),this.getDateTimeFormat()&&this.formRender.reshowDTPicker(i[0])}this.performAction(t)}},n.bindInputEvent=function(){this.$textInput.on("keydown",(t=>{this.valueChanged=!0,27==t.keyCode&&t.preventDefault();const e=this.$autocomplete;e&&(38===t.keyCode&&e.isOpen&&(e.previous(),t.preventDefault()),40===t.keyCode&&(e.isOpen?e.next():e.evaluate(),t.preventDefault()),13===t.keyCode&&e.isOpen&&(e.select(),t.preventDefault(),t.stopPropagation()))})).on("keyup",(t=>{if((0,_.isMatch)(t,_.matchers.Escape)&&t.preventDefault(),this.checkReadOnly())return;if(setTimeout((()=>{this.autoFontSize(this.$textInput.val())}),0),(0,_.isMatch)(t,_.matchers.Enter)){const t=this.annot.getField();return void(!De.isMultiline(t.getFlags())&&this.blur())}if((0,_.isMatch)(t,_.matchers.Tab))return;let e=this.formRender.dt;e&&(e._inputTemp||(e._inputTemp=e._input),e._input=e._input.cloneNode(),e.close())})).on("dblclick",(t=>{this.$autocomplete&&this.$autocomplete.evaluate()})).on("paste",(t=>{this.pasteFont=null;let e=t.originalEvent.clipboardData.getData("text/html");if(0===e.length)return;let n=au.formatRichText(e);0!==n.length&&(this.pasteFont=n[0].richTextStyle.font)})).on("input",(t=>{this.$autocomplete&&(t.target.value.length>0?this.$autocomplete.evaluate():this.$autocomplete.close())})).on("blur",(t=>{this.getDateTimeFormat()||this.$autocomplete||this.formRender.blurControl()}))},n.updateUIMore=function({type:e,value:n}){let i=this.annot,r=this.$input,o=this.$textInput,s=i.getField();if(!s)return;let a=Promise.resolve();switch(e){case"value":let t=s.getAction(Er.FieldWillFormat),e=s.getAction(Er.FieldValueChanged);if(s.NeedExecuteValidateAction&&0!=s.getValue().length&&e){if(!this.formRender.execAction("Field",e,null,s,Er.FieldValueChanged).rc){s.setValue(this.lastAvailableValue,this.annot),this.valueChange(!1,s);break}}a.then((e=>{if(0!=s.getValue().length&&t&&this.formRender){let e=this.formRender.execAction("Field",t,null,s,Er.FieldWillFormat);e&&-1!==e&&!e.rc&&(s.setValue(this.lastAvailableValue,this.annot),this.valueChange(!1,s))}0===s.getValue().length&&s.setDisplayValue(n)}));break;case"displayValue":if(De.isComb(s.getFlags())&&s.getMaxLength()>0){let t=s.getMaxLength();if(2===s.getAlignment()){let t=r.find(".textComb").length,e=n.length,i=t-n.length-1,o=0;i<-1&&(i=-1),n.length>t&&(o=n.length-t);for(let s=t-1;s>i;s--)r.find(`.textComb[data-index=${s}]`).html(n[s-t+e-o]);for(let t=i;t>-1;t--)r.find(`.textComb[data-index=${t}]`).html("")}else{for(let t=0;t<n.length;t++)r.find(`.textComb[data-index=${t}]`).html(n[t]);for(let e=n.length;e<t;e++)r.find(`.textComb[data-index=${e}]`).html("")}}a=s.setDisplayValue(n),o.val(n);break;case"align":o.css("text-align",n);break;case"borderStyle":o.css("border-style",n);break;case"borderColor":n=(0,_.getTransparentOrColor)(n),r.find(".textComb").css("border-color",n),o.css("border-color",n);break;case"maxLength":void 0===n?o.removeAttr("maxlength"):(o.attr("maxlength",n),o.val(o.val().substr(0,n)));break;case"noSpellCheck":o.prop("spellcheck",!n);break;case"noScroll":case"comb":case"multiline":case"lineSpace":r.remove(),this.generateHandler(this.scale),this.bindInputEvent(),this.isActive&&this.focus(),this.render(this.scale,this.rotate,!0);break;case"fillColor":this.$handler.css("background-color",(0,_.getTransparentOrColor)(n));break;case"password":o.attr("type",n?"password":"text");break;case"readonly":n?(this.$foreground.addClass("form-field-readonly").css("visibility","hidden"),o.attr("readonly",!0)):(this.checkReadOnly()||this.checkInvisible()||this.$foreground.removeClass("form-field-readonly").css("visibility","visible"),o.removeAttr("readonly"));let c=(0,_.getTransparentOrColor)(i.getMKProperty("fillColor"));n&&(c=rd),o.css("background-color",c);break;case"hidden":let l=this.$handler;n?l.hide():l.show();break;case"textColor":o.css("color",n)}this.formRender.usingHTML(6)||a.then((e=>this.annot&&t.prototype.render.call(this,this.scale,this.rotate,!0)))},n.blur=function(t=!1){this.hasFocus=!1;let e=this.$textInput;setTimeout((()=>{this.destroyAutocomplete()}),0),this.isActive=!1,this.formRender.usingHTML(6)||this.$input.css("visibility","hidden"),this.$handler.find("canvas").show();try{let n=[];if(this.pasteFont){this.annot.getField().controls.forEach((t=>{n.push(t.setDefaultAppearance({fontName:this.pasteFont.name}))})),this.pasteFont=null}return Promise.all(n).then((n=>this.setValue(e.val(),t)))}finally{this.pdfViewer.eventEmitter.emit(nt.blurFromObject,this,t)}},n.setValue=function(t,e=!1){let n,i=this.annot.getField();i.setValueWithoutAction(t),t===this.lastAvailableValue&&(this.valueChanged=!1);let r=!1,o=i.getAction(Er.FieldKeyStroke);return this.valueChanged&&o&&(n=this.formRender.execAction("Field",o,null,i,Er.FieldKeyStroke,{change:t,willCommit:!0}),-1!==n&&(n.rc?(void 0!==n.change&&null!==n.change||(n.change=t),i.setValueWithoutAction(n.change)):(r=!0,t=this.lastAvailableValue))),r?(i.setValue(this.lastAvailableValue,this.annot),this.valueChange(r,i,e)):(o=i.getAction(Er.FieldValueChanged),this.valueChanged&&o&&(n=this.formRender.execAction("Field",o,null,i,Er.FieldValueChanged),-1!==n&&(n.rc?(void 0===n.value&&(n.value=t),i.setValueWithoutAction(n.value)):r=!0)),r?i.setValue(this.lastAvailableValue,this.annot):this.valueChanged?i.syncValue(i.getValue()):(o=i.getAction(Er.FieldWillFormat),n=i.getValue()&&o&&this.formRender.execAction("Field",o,null,i,Er.FieldWillFormat),n&&!n.rc?(i.setValue(this.lastAvailableValue,this.annot),this.valueChange(!1,i,e)):this.valueChanged&&i.syncValue(i.getValue())),this.valueChange(r,i,e))},n.valueChange=function(e,n,i){return this.valueChanged&&!e&&this.formRender.calculate(n),this.valueChanged=!1,!e&&"basic"===this.pdfViewer.getAutoCompleteSetting().level&&Yu(n)&&new Ku(this.pdfViewer).saveDbEntry(n.getValue()),n&&De.isComb(n.getFlags())&&n.getMaxLength()>0&&(this.$textInput.hide(),this.$input.find(".textCombContainer").show()),t.prototype.blur.call(this,i),e},n.isComb=function(){let t=this.annot.getField();return De.isComb(t.getFlags())&&t.getMaxLength()>0},n.destroyAutocomplete=function(){this.$autocomplete&&this.$autocomplete.destroy(),this.$autocomplete=null},n.getDateTimeFormat=function(){let t=this.annot.getField().getAction(Er.FieldWillFormat);if(t&&t.getScript){let e,n=t.getScript();if(-1!==n.indexOf("AFDate_Format")){e=/AFDate_Format(?:Ex)?\("([\s\S]*?)"\)/;let t=n.match(e);if(t&&2==t.length)return t[1].trim()}else if(-1!==n.indexOf("AFTime_Format")){e=/AFTime_Format(?:Ex)?\(([\s\S]*?)\)/;let t=n.match(e);if(t&&2==t.length)return sd[t[1]]||t[1].replace(/"/g,"")}}},e}(Jr);const sd=["HH:MM","h:MM tt","HH:MM:ss","h:MM:ss tt"];var ad=od,cd=m(6892),ld=m.n(cd);const hd=t=>String(t).replace(/[<>&"]/g,(function(t){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[t]})),ud=t=>String(t).replace(/[<>&"\s]/g,(t=>({" ":"&nbsp;","<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[t]))),dd=t=>String(t).replace(/([!\"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1");let fd=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).engineForm=o.parent("pdfDocRender").doc.getPDFForm(),o.$ui.addClass("form_listbox_field"),e.setRenderNotifier((t=>o.updateUI(t))),o.generateHandler(1),o}(0,E.Z)(e,t);var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.$input.remove(),this.engineForm=null},n.render=function(t=this.scale,e=this.rotate){this.scale=t,this.rotate=e,this.updateForgroundAndHandler(t,e);this.annot.getField();let n=this.getDAFontSize(),i=this.getDAFontName(),r=this.getFontStyle(i),o=this.getFontWeight(i),s=this.getFontFamily(i),a=4*this.annot.getBorderWidth()/3*t;"underline"=={0:"solid",1:"dashed",2:"underline",3:"beveled",4:"inset"}[this.annot.getBorderStyle()||0]?this.$input.css({"border-style":"solid","border-width":"0","border-bottom-width":a+"px"}):this.$input.css({"border-width":a+"px"}),this.$input.css({"font-size":n,"font-weight":o,"font-style":r,"font-family":s}),this.$input.find(".form-field-option").css({"font-size":n,"font-weight":o,"font-style":r,"font-family":s+", sans-serif"});const c=this.getRect(t,e),l=c.right-c.left,h=c.bottom-c.top,u=((this.getPDFPage().getRotationAngle()+e-90*this.annot.getRotation())%360+360)%360;let d,f,p="center";switch(u){case 90:case 270:d=h,f=l,p=270===u?`${d/2}px ${d/2}px`:f/2+"px";break;default:d=l,f=h}this.$input.css({width:d-1,height:f,transform:`rotate(${u}deg)`,"transform-origin":p});let g=this.$input.find(".selected");!this.scrollSet&&g.length>0&&(this.scrollSet=!0,this.$input[0].scrollTop=g[0].offsetTop)},n.generateHandler=function(t){let e=this.annot.getField();if(!e)return;let n=this.checkReadOnly(),i=4*this.annot.getBorderWidth()/3*t,r=this.annot.getMKProperty("borderColor"),o=(0,_.getTransparentOrColor)(r),s=this.annot.getMKProperty("fillColor"),a=(0,_.getTransparentOrColor)(s),c=e.getAlignment(),l=e.getOptions(),h=e.getOptions(),u=e.getValue();h.map((t=>{"object"==typeof t&&u===t.value&&(u=t.label)}));const d=this.annot.getDefaultAppearance()||{};let f=(0,_.colorConvertor)(16777215&d.textColor,"#"),p=this.getDAFontSize(),g={0:"solid",1:"dashed",2:"underline",3:"beveled",4:"inset"}[this.annot.getBorderStyle()||0];"beveled"==g&&(g="outset");let m=ld()({borderWidth:i,borderColor:o,background:a,options:l,align:c,readonly:n,value:u,color:f,fontSize:p,borderStyle:g});this.checkInvisible()&&this.$handler.hide();let v=this.$input=D()(m);this.$handler.append(v)},n.focus=function(){t.prototype.focus.call(this),this.lastAvailableValue=this.annot.getField().getValue()},n.handleEvent=function(t,e){let n=this.formRender,i=this.annot;if(this.checkReadOnly())return void(t!=Er.AnnotMouseButtonReleased&&t!=Er.AnnotReceiveInputFocus||n.blurControl());let r=i.getField();if(!r)return;let o=Promise.resolve();switch(t){case Er.AnnotMouseButtonPressed:if(n.focusControl(this),D()(e.target).hasClass("form-field-option"))this._pressedTarget=e.target;else if(D()(e.target).hasClass("fv__ui-form-foreground")){let t=e.clientX,n=e.clientY;D()(e.target).next(".form-field-options").find(".form-field-option").each(((e,i)=>{let r=i.getBoundingClientRect();if(t>=r.left&&t<=r.right&&n>=r.top&&n<=r.bottom)return this._pressedTarget=i,!1}))}break;case Er.AnnotMouseButtonReleased:let t=e.target,s=!1;if(D()(e.target).hasClass("form-field-option")?s=!0:this._pressedTarget&&D()(this._pressedTarget).hasClass("form-field-option")&&(s=!0,t=this._pressedTarget),delete this._pressedTarget,s){let e=D()(t).index(),s=De.isChoiceMultiSelect(r.getFlags())&&(_.isMac?_.keyboardStatus.isWinDown:_.keyboardStatus.isCtrlDown),a=r.getOptions(),c=a[e];s?c.selected?c.selected=!1:c.selected=!0:(a.forEach((t=>t.selected=!1)),c.selected=!0);let l=a.reduce(((t,e)=>(e.selected&&t.push(e.value),t)),[]);s||(l=l[0]),r.setValueWithoutAction(""),o=n.setValue(i,l).then((t=>{r.setOptions(a,!0),this.lastAvailableValue=l}))}setTimeout((()=>{let t=i.action;n.execAction("Field",t,null,i.getField())}),0)}o.then((e=>{this.performAction(t)}))},n.updateUIMore=function({type:t,value:e}){let n=this.$input,i=this.annot.getField(),r=Promise.resolve(),o=!1;switch(t){case"value":{i.setValueEx(e,null,!1);let t=n.find(".form-field-option");if(!t.length)return;let r=n[0],o=r.getBoundingClientRect();i.getOptions().forEach(((e,n)=>{if(t.get(n)&&(D()(t.get(n)).toggleClass("selected",e.selected),e.selected)){let e=t.get(n).getBoundingClientRect();r.scrollTop=r.scrollTop+e.top-o.top}}))}break;case"align":n.css("text-align",e);break;case"borderStyle":let t=4*this.annot.getBorderWidth()/3*this.scale;if(n.css("border-width",t),"underline"==e){n.css({"border-style":"solid","border-width":"0","border-bottom-width":t+"px"});break}"beveled"==e&&(e="outset"),n.css("border-style",e);break;case"clearItems":this.updateUIMore({type:"value",value:i.getValue()}),n.find(".form-field-option").remove(),o=!0;break;case"deleteItems":this.updateUIMore({type:"value",value:i.getValue()}),n.find(".form-field-option:nth-child("+(e+1)+")").remove(),this.updateUIMore({type:"value",value:i.getValue()}),o=!0;break;case"insertItemAt":let r=this.annot.getField().getOptions()[e],s=`<div class="form-field-option" data-val="${r.value}" data-index="${e}" style="white-space: nowrap; overflow-x: hidden;">${hd(r.label||"")}</div>`;n.children().length<=e?n.append(s):n.find(".form-field-option:nth-child("+(e+1)+")").before(s),this.updateUIMore({type:"value",value:i.getValue()}),o=!0;break;case"borderColor":n.css("border-color",(0,_.getTransparentOrColor)(e));break;case"fillColor":n.css("background-color",(0,_.getTransparentOrColor)(e));break;case"setItems":let a=this.getDAFontSize(),c=this.annot.getField().getOptions().map((t=>`<div class="form-field-option ${t.selected?"selected":""}" data-val="${t.value}" data-index="${e}" style="white-space: nowrap; overflow-x: hidden; font-size: ${a}; ">${hd(t.label||"")}</div>`));n.find(".form-field-option").remove(),n.append(c.join("")),o=!0;break;case"textColor":n.find(".form-field-option").css("color",(0,_.getTransparentOrColor)(e));break;case"choiceMultiSelect":break;case"DA":{let t=e.fontName.toLowerCase()||"",n=this.getFontStyle(t),i=this.getFontWeight(t),r=this.getFontFamily(t),o=this.getDAFontSize();this.$input.find(".form-field-option").css({"font-size":o,"font-weight":i,"font-style":n,"font-family":r+", sans-serif"})}}if(o){let t=this.$input.find(".selected");t.length>0&&(this.scrollSet=!0,this.$input[0].scrollTop=t[0].offsetTop)}this.formRender.usingHTML(xe.ListBox)||r.then((t=>this.annot&&this.render(this.scale,this.rotate,!0)))},n.getDAFontSize=function(){const t=this.scale;let e=this.annot.getControl().getDefaultAppearance().textSize*t*4/3;return e||(e=12*t),e+="px",e},n.getDAFontName=function(){return this.annot.getControl().getDefaultAppearance().fontName||""},n.getFontWeight=function(t){let e="normal";return e=t.includes("bold")?"bold":"normal",e},n.getFontStyle=function(t){let e="normal";return e=t.includes("italic")||t.includes("oblique")?"italic":"normal",e},n.getFontFamily=function(t){let e=t,n=t.indexOf("-");return n>0&&(e="times-roman"===t.toLowerCase()?"Times Roman":t.substring(0,n)),e},e}(Jr);var pd=fd,gd=m(1771),md=m.n(gd),vd=m(7416),yd=m.n(vd);let wd,bd=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).engineForm=o.parent("pdfDocRender").doc.getPDFForm(),o.$handler.addClass("fv_combobox_field"),o.available=!0,o.genDropDownUI(1),o.genLabelUI(),o.bindDropDownUIEvent(),o}(0,E.Z)(e,t);var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this.$optionsList&&(this.$optionsList.off("click"),this.$optionsList.remove()),this.engineForm=null,this.$optionsList=null},n.render=function(e=this.scale,n=this.rotate,i){if(!this.annot)return;if(this.scale=e,this.rotate=n,!this.available)return;let r=this.updateForgroundAndHandler(e,n),o=(r.width,r.height);r.left<1&&(r.left=1);let s=this.annotsRender.pageRender.getShowHeight(),a=this.annotsRender.pageRender.getShowWidth(),c=1===this.annot.getDirectionRTL()?"right":"left";this.$optionsList.css({"text-align":c,"font-size":"16px","overflow-y":"auto"});let l=4*this.annot.getBorderWidth()/3*e,h=this.annot.getField();if(!h)return!1;const u=this.getRect(e,n),d=u.right-u.left,f=u.bottom-u.top;let p,g,m,v,y,w,b=200;const A=((this.getPDFPage().getRotationAngle()+n-90*this.annot.getRotation())%360+360)%360;switch(A){case 270:g=f,p=d,m=`${g/2}px ${g/2}px`,v=m,w=u.left+p,y=u.top,b+w>=a&&(b=a-w-1);break;case 90:g=f,p=d,m=p/2+"px",v=`${p/2}px -${p/2}px`,w=u.left,y=u.top+p,w-b<=0&&(b=w-1);break;case 180:g=d,p=f,m="center",v="center top",w=u.left,y=u.top,y-b<=0&&(b=y-1);break;default:g=d,p=f,m="center",v="center",y=u.top+p,w=u.left,b+y>=s&&(b=s-y)}let P=4*h.getDAFontSize()/3;P=(P?2*P:.7*p)+"px";let S={"text-align":c,"font-size":P,"border-width":l+"px",padding:l+"px",height:p+"px",width:g+"px",transform:`rotate(${A}deg)`,"transform-origin":m},C=.3*o>20?20:.3*o;r.width<C+10?S.opacity=0:S.opacity=1,this.$textInput.css(S),this.formRender.usingHTML(xe.ComboBox)&&this.$handler.css({left:u.left,top:u.top,width:g,height:p,transform:`rotate(${A}deg)`,"transform-origin":m}),this.$optionsList.css({top:y,left:w,width:g,maxHeight:b,transform:`rotate(${A}deg)`,"transform-origin":v}),this.$handler.find(".fwr__ui-combo-dropdown").css({"border-width":`${C}px ${.6*C}px 0`,top:(p-C)/2+"px"}),this.arrowRender(l,g,p,A),!P&&this.formRender.usingHTML(xe.ComboBox)?(clearTimeout(this.autoFontSizeTimeout),this.autoFontSizeTimeout=setTimeout((()=>{this.autoFontSize(this.$textInput.val(),2*C)}),200)):P+="px",this.formRender.usingHTML(xe.ComboBox)||t.prototype.render.call(this,e,n)},n.arrowRender=function(t,e,n,i){let r,o,s,a,c=this.annot.getDirectionRTL();switch(i){case 90:s=n-3*t,r=1===c?-(20-t):s+t,o=e-n+t,a="100% 100%";break;case 180:s=n-2*t,r=1===c?t:e-t-20,o=t,a="50% 50%";break;case 270:s=n-2*t,r=1===c?s+t:-(20-t),o=-(n+2*t-30),a="0 100%";break;default:s=n-2*t,r=1===c?e-t-20:t,o=t,a="0 0"}this.$arrow.css({right:r,top:o,height:s,width:20*this.scale,"max-width":20,transform:`rotate(${i}deg)`,"transform-origin":a}),this.$arrow.find(">span").css({transform:`scale(${Math.min(this.scale,1)})`,"transform-origin":"-36% 0"})},n.handleEvent=function(t,e){if(this.checkReadOnly())t!=Er.AnnotMouseButtonReleased&&t!=Er.AnnotReceiveInputFocus||this.formRender.blurControl();else{switch(t){case Er.AnnotMouseButtonPressed:this.optionsMounted=this.optionsMounted||this.$handler.after(this.$optionsList),this.$optionsList.show(),this.formRender.focusControl(this);break;case Er.AnnotMouseButtonReleased:D()(e.target).hasClass("form-field-option")&&(e.stopPropagation(),this.$optionsList.hide())}this.performAction(t)}},n.genDropDownUI=function(t){let e=this.annot,n=this.annot.getField();if(!n)return void(this.available=!1);let i=4*e.getBorderWidth()/3*t,r=e.getMKProperty("borderColor"),o=(0,_.colorConvertor)(r,"#");0===r&&(o="gray");let s=e.getMKProperty("fillColor"),a=(0,_.colorConvertor)(s,"#");0===s&&(a="white");let c=n.getOptions(),l=n.getValue(),h=md()({borderWidth:i,borderColorHex:o,fillColorHex:a,background:"white",options:c,value:l});this.$optionsList=D()(h),this.$optionsList.hide()},n.bindDropDownUIEvent=function(){if(!this.available)return;let t=this.formRender,e=this.annot;this.$optionsList.on("click",(n=>{let i=e.getField(),r=i.getOptions();if(D()(n.target).hasClass("form-field-option")){let o=D()(n.target).data("val")+"";if(n.stopPropagation(),this.$optionsList.hide(),this.$optionsList.find(".selected").removeClass("selected"),D()(n.target).addClass("selected"),!i)return;r.forEach((t=>{t.selected=!1}));let s=D()(n.target).index();if(r[s].selected=!0,i.getFlags()&De.CommitOnSelChange){if(i.getValue()===o)return;t.setValue(e,o,!1)}else this.$textInput.css("visibility","visible"),this.$handler.find("#pdfcanvas").hide(),s<r.length&&(o=r[s].label),this.$textInput.val(o),this.$textInput.focus()}setTimeout((()=>{let n=e.action;t.execAction("Field",n,null,e.getField())}),150)}))},n.blur=function(){this.hasFocus=!1;let e=()=>{this.formRender.usingHTML(xe.ComboBox)||this.$input.css("visibility","hidden"),this.$arrow.css("visibility","visible")},n=this.formRender,i=this.annot;this.$optionsList.hide();const r=(0,_.createDeferred)();if(this.$textInput.length>0){let t=this.$textInput.val();setTimeout((()=>{let o=i.getField();if(!o)return void r.resolve();let s=t,a=o.getFlags();if(!(De.ComboEdit&a)){o.getOptions().forEach((e=>{e.label==t&&(s=e.value)}))}n.setValue(i,s).then((()=>{e(),this.$handler.find("#pdfcanvas").show(),r.resolve(!1)}),r.reject)}),0)}else e(),r.resolve();return r.promise.finally((()=>{t.prototype.blur.call(this)}))},n.focus=function(){t.prototype.focus.call(this);let e=this.annot.getField();if(!e)return;let n=e.getValue(),i=n;e.getOptions().forEach((t=>{n==t.value+""&&(i=t.label)})),this.$textInput.val(i),setTimeout((()=>{De.isComboEdit(e.getFlags())?(this.$textInput.css("visibility","visible").prop("readonly",!1),this.$handler.find("#pdfcanvas").hide(),this.$textInput.focus()):(this.$textInput.css("visibility","hidden").prop("readonly",!0),this.$handler.find("#pdfcanvas").show())}),10)},n.genLabelUI=function(t=1,e=this.rotate){if(!this.annot.getField())return!1;let n=yd()(this.getStyle(t,e)),i=this.$input=D()(n);return this.$foreground.after(i),this.$textInput=this.$handler.find("input"),this.formRender.usingHTML(xe.ComboBox)||this.$input.css("visibility","hidden"),this.$arrow=this.$handler.find(".fwr__ui-combo-arrow"),this.$arrow.css("visibility","visible"),!0},n.updateUIMore=function({type:e,value:n}){let i=this.$textInput,r=this.$optionsList,o=this.annot.getField();if(!o||2==(2&this.annot.info.flag))return;let s=1===this.annot.getDirectionRTL()?"right":"left",a=Promise.resolve();switch(e){case"value":a.then((t=>{let e=o.getAction(Er.FieldWillFormat);if(0!=o.getValue().length&&e){this.formRender.execAction("Field",e,null,o,Er.FieldWillFormat)}0===o.getValue().length&&o.setDisplayValue(n)})),i.val(n),r.find(".selected").removeClass("selected"),r.find(".form-field-option").each(((t,e)=>{D()(e).css("text-align",s);D()(e).attr("data-val")===n&&D()(e).addClass("selected")}));break;case"displayValue":a=o.setDisplayValue(n),i.val(n);break;case"align":i.css("text-align",n),r.css("text-align",n),this.render(this.scale,this.rotate,!0);break;case"borderStyle":i.css("border-style",n);break;case"borderColor":i.css("border-color",(0,_.getTransparentOrColor)(n));break;case"borderWidth":case"orientation":case"rect":this.render(this.scale,this.rotate,!0);break;case"fillColor":this.$input.find(".textCombContainer").css("background-color",(0,_.getTransparentOrColor)(n)),i.css("background-color",(0,_.getTransparentOrColor)(n));break;case"readonly":n?(this.$foreground.hide().addClass("form-field-readonly").css("visibility","hidden"),i.attr("readonly",!0)):(this.$foreground.show().removeClass("form-field-readonly").css("visibility","visible"),i.removeAttr("readonly"));break;case"clearItems":r.find(".form-field-option").remove(),this.updateUIMore({type:"value",value:o.getValue()});break;case"deleteItems":r.find(".form-field-option:nth-child("+(n+1)+")").remove(),this.updateUIMore({type:"value",value:o.getValue()});break;case"insertItemAt":let t=this.annot.getField().getOptions(),e="";t.forEach(((t,n)=>{e+=`<div class="form-field-option ${t.selected?"selected":""}" data-val="${t.value}" data-index="${n}" style="white-space: nowrap; overflow-x: hidden;">${hd(t.label||"")}</div>`})),r.empty().append(e),this.updateUIMore({type:"value",value:o.getValue()});break;case"setItems":let c=this.annot.getField().getOptions().map((t=>`<div class="form-field-option ${t.selected?"selected":""}" data-val="${t.value}" data-index="${n}" style="white-space: nowrap; overflow-x: hidden;">${hd(t.label||"")}</div>`));r.find(".form-field-option").remove(),r.append(c.join(""));break;case"comboEdit":break;case"textColor":i.css("color",n)}this.formRender.usingHTML(xe.ComboBox)||a.then((e=>t.prototype.render.call(this,this.scale,this.rotate,!0)))},n.getStyle=function(t,e){let n=this.annot,i=n.getField();if(!i)return!1;let r=this.checkReadOnly(),o=4*n.getBorderWidth()/3*t,s=n.getMKProperty("borderColor"),a=(0,_.getTransparentOrColor)(s),c=n.getMKProperty("fillColor"),l=(0,_.getTransparentOrColor)(c),h=i.getAlignment(),u=!this.checkInvisible(),d=(0,_.colorConvertor)(16777215&i.getDAFontColor(),"#"),f=4*i.getDAFontSize()/3;f=(f?2*f:16)+"px";let p=De.isComboEdit(i.getFlags()),g=i.getOptions(),m=i.getValue();return g.map((t=>{"object"==typeof t&&m===t.value&&(m=t.label)})),{comboEditable:p,borderWidth:o,borderColor:a,background:l,readonly:r,align:h,value:m,maxLength:i.getMaxLength(),visible:u,color:d,fontSize:f,width:"100%",height:"100%"}},n.updateSize=function(t=this.scale,e=this.rotate){return this.render(t,e)},e}(Jr),Ad="annotComponent",Pd={sign:{name:"Sign",nameI18nKey:"viewer_:contextmenu.annot.sign",callback:function(t,e,n,i){this.data(Ad).sign(t,e,n,i)},show:function(){return this.data(Ad).updateDeleteStatus(!0),!0},hide:function(){return this.data(Ad).updateDeleteStatus(!1),!0}},properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n,i){this.data(Ad).showPropertiesDialog(t,e,n,i)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data(Ad).removeAnnot()},disabled:function(){return this.data(Ad).deleteDisabled()}}};let Sd=function(t=".fv__pdf-page-annot-handler-rect"){return{selector:t,items:Pd,events:{show:function(){return this.data(Ad).updateDeleteStatus(!0),!0},hide:function(){return this.data(Ad).updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),Cd=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).$esignChinaContainer=null,o.genLabelUI(),o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return Sd},e.setContextMenuConfig=function(t){wd=t},e.getContextMenuConfig=function(){return wd};var n=e.prototype;return n.genLabelUI=function(t=1,e=this.rotate){if(!this.annot.getField())return!1;const n=nd()();return this.$foreground.after(D()(n)),!0},n.getControlContext=function(){return this.contextMenu?this.contextMenu:this.contextMenu=this.pdfViewer.viewerUI.createContextMenu(this,this.$ui.get(0),this.getContextMenuConfig())},n.getContextMenuConfig=function(){let t=this.constructor,e=t.getContextMenuConfig();if(e)return e;let n=t.getDefaultContextMenuConfig();for(let t in n)if("items"===t){let e=n[t],i=this.pdfViewer.i18n;for(let t in e){let n=e[t];n.nameI18nKey&&(n.name=i.t(n.nameI18nKey))}}return t.setContextMenuConfig(n),n},n.showContextMenu=function(t,e){let n;(n=this.contextMenu)&&(n.setCurrentTarget(this),n.showAt(t,e))},n.getContextMenuComponentName=function(){return"fv--field-signature-contextmenu"},n.handleEvent=function(e,n){let i=t.prototype.handleEvent.call(this,e,n);if(i)return i;switch(e){case"contextmenu":if(n.preventDefault(),this.checkReadOnly())return;let t;return this.contextMenu||(this.contextMenu=this.getControlContext(this)),(t=this.contextMenu)&&(t.setCurrentTarget(this),this.handleContextMenu(t),t.showAt(n.clientX,n.clientY)),!1;case Er.AnnotMouseButtonPressed:0==n.button&&this.pdfViewer.eventEmitter.emit(nt.signatureFieldMouseLButtonDown,this.annot);break;case Er.AnnotMouseButtonReleased:0==n.button&&this.pdfViewer.eventEmitter.emit(nt.signatureFieldMouseLButtonUp,this.annot,!1,this.$esignChinaContainer,this,n);break;case Er.AnnotCursorEnter:this.pdfViewer.eventEmitter.emit(nt.signatureFieldMouseEnter,this.annot);break;case Er.AnnotCursorExit:this.pdfViewer.eventEmitter.emit(nt.signatureFieldMouseExit,this.annot)}},n.render=function(e=this.scale,n=this.rotate,i=!1){return t.prototype.render.call(this,e,n,i)},n.blur=function(){return setTimeout((()=>{this.$esignChinaContainer&&(this.$esignChinaContainer.parent().css({zIndex:""}),this.$esignChinaContainer.hide())}),50),t.prototype.blur.call(this)},n.focus=function(){this.hasFocus=!0,setTimeout((()=>{this.$handler.addClass("fv__control_focus")}),50);let t=this.annot.getField(),e=this.annot.getAdditionalAction(Er.AnnotReceiveInputFocus);try{e&&this.formRender.execAction("Field",e,null,t)}finally{this.pdfViewer.eventEmitter.emit(nt.focusOnControl,this)}},n.handleContextMenu=function(t){if(!t||!t.contextMenuComponent)return;const e=this.annot.getField().isSigned(),n=t.contextMenuComponent.$container.$children;e?n.forEach((t=>D()(t.element).show())):n.forEach((t=>{const e=D()(t.element);"fv--contextmenu-item-form-sign"==e.attr("name")?e.show():e.hide()}))},e}(Jr);const Ed="normalCaption",xd="rolloverCaption";let Dd,Id=function(t){function e(e,n,i,r){return t.call(this,e,n,i,r)||this}(0,E.Z)(e,t);var n=e.prototype;return n.generateUI=function(){let t=this.$input=D()("<div></div>"),e=this.annot,n=e.getDefaultAppearance(),i=(0,_.colorConvertor)(n.textColor||4278190080,"#"),r=e.getMKProperty(Ed),o=(0,_.getTransparentOrColor)(e.getMKProperty("fillColor")),s=(0,_.getTransparentOrColor)(this.annot.getMKProperty("borderColor")),a=0===this.annot.getBorderStyle()?"solid":"dashed";t.css({color:i,fontSize:5,"background-color":o,borderWidth:1,borderColor:s,textAlign:"center",borderStyle:a}).html(r),this.$foreground.before(t),t.hide()},n.updateSize=function(t=this.scale,e=this.rotate){this.render(t,e)},n.updateUIMore=function({type:e,value:n}){let i=this.$input;if(!i)return t.prototype.updateUIMore.call(this,{type:e,value:n});switch(e){case"borderStyle":i.css("border-style",n);break;case"borderColor":n=(0,_.getTransparentOrColor)(n),i.css("border-color",n);break;case"fillColor":i.css("background-color",(0,_.getTransparentOrColor)(n));break;case Ed:i.html(n);break;case"rect":let t=this.updateForgroundAndHandler(this.scale||this.parent("annotsRender").scale,this.rotate);i.css(t)}},n.render=function(e=this.scale,n=this.rotate,i=!1){if(!i&&e==this.scale&&n==this.rotate)return Promise.resolve();if(this.scale=e,this.rotate=n,!this.formRender.usingHTML(xe.PushButton))return t.prototype.render.call(this,e,n,i);this.$input||this.generateUI();let r=this.annot,o=this.updateForgroundAndHandler(e,n);o.borderWidth=4*r.getBorderWidth()/3*e,o.width="100%",o.height="100%",o.lineHeight="100%";let s=r.getDefaultAppearance();return s.textSize?(o.fontSize=4*s.textSize/3*e,this.$input.css(o).show()):setTimeout((()=>{this.annot&&this.autoFontSize(this.annot.getMKProperty(Ed)+"pend"),this.$input&&this.$input.css(o).show()}),0),Promise.resolve()},n.handleEvent=function(e,n){if(!this.checkReadOnly()){let t;switch(e){case Er.AnnotCursorEnter:t=this.annot.getMKProperty(xd),0==t.length&&(t=this.annot.getMKProperty(Ed));break;case Er.AnnotMouseButtonPressed:t=this.annot.getMKProperty("downCaption"),0==t.length&&(t=this.annot.getMKProperty(xd)),0==t.length&&(t=this.annot.getMKProperty(Ed));break;case Er.AnnotMouseButtonReleased:t=this.pdfViewer.getCurrentActivatable()==this?this.annot.getMKProperty(xd):this.annot.getMKProperty(Ed),0==t.length&&(t=this.annot.getMKProperty(Ed));break;case Er.AnnotCursorExit:t=this.annot.getMKProperty(Ed)}this.$input&&this.$input.html(t)}return t.prototype.handleEvent.call(this,e,n)},e}(Jr),Rd="annotComponent",Td={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n,i){this.data(Rd).showPropertiesDialog(t,e,n,i)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data(Rd).removeAnnot()},disabled:function(){return this.data(Rd).deleteDisabled()}}};function Fd(t=".fv__pdf-page-annot-handler-rect"){return{selector:t,items:Td,events:{show:function(){return this.data(Rd).updateDeleteStatus(!0),!0},hide:function(){return this.data(Rd).updateDeleteStatus(!1),!0}}}}const _d=Fd(".fv__pdf-page-annot-handler-rect"),kd="normalCaption",Md="rolloverCaption";let Od,Ld=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).generateUI(),o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return _d},e.setContextMenuConfig=function(t){Dd=t},e.getContextMenuConfig=function(){return Dd};var n=e.prototype;return n.generateUI=function(){let t=this.$input=D()("<div></div>"),e=this.annot,n=e.getDefaultAppearance();if(""==e.getMKProperty("normalCaption").trim()){let t=e.getField();2==t.getType()?t.setMKProperty("normalCaption","4"):t.setMKProperty("normalCaption","l")}let i=(0,_.colorConvertor)(n.textColor||4278190080,"#"),r=e.getMKProperty(kd),o=(0,_.getTransparentOrColor)(e.getMKProperty("fillColor")),s=(0,_.getTransparentOrColor)(this.annot.getMKProperty("borderColor")),a=0===this.annot.getBorderStyle()?"solid":"dashed";t.css({color:i,fontSize:5,"background-color":o,borderWidth:1,borderColor:s,textAlign:"center",borderStyle:a}).html(r),this.$foreground.before(t),t.hide()},n.updateSize=function(t=this.scale,e=this.rotate){this.render(t,e)},n.updateUIMore=function({type:e,value:n}){t.prototype.render.call(this,this.scale,this.rotate,!0)},n.render=function(e=this.scale,n=this.rotate,i=!1){this.annot;return this.scale=e,this.rotate=n,this.formRender.usingHTML(xe.PushButton)?Promise.resolve():t.prototype.render.call(this,e,n)},n.handleEvent=function(e,n){if(!this.checkReadOnly()){let t;switch(e){case Er.AnnotCursorEnter:t=this.annot.getMKProperty(Md),0==t.length&&(t=this.annot.getMKProperty(kd));break;case Er.AnnotMouseButtonPressed:t=this.annot.getMKProperty("downCaption"),0==t.length&&(t=this.annot.getMKProperty(Md)),0==t.length&&(t=this.annot.getMKProperty(kd));break;case Er.AnnotMouseButtonReleased:t=this.pdfViewer.getCurrentActivatable()==this?this.annot.getMKProperty(Md):this.annot.getMKProperty(kd),0==t.length&&(t=this.annot.getMKProperty(kd));break;case Er.AnnotCursorExit:t=this.annot.getMKProperty(kd)}}return t.prototype.handleEvent.call(this,e,n)},e}(Jr),Nd=Fd(".fv__pdf-page-annot-handler-rect");const Bd="normalCaption",Vd="rolloverCaption",Ud=document.createElement("div");let Hd=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).generateUI(),o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return Nd},e.setContextMenuConfig=function(t){Od=t},e.getContextMenuConfig=function(){return Od};var n=e.prototype;return n.generateUI=function(){let t=this.$input=D()(Ud.cloneNode()),e=this.annot,n=e.getDefaultAppearance();if(""==e.getMKProperty("normalCaption").trim()){let t=e.getField();2==t.getType()?t.setMKProperty("normalCaption","4"):t.setMKProperty("normalCaption","l")}let i=(0,_.colorConvertor)(n&&n.textColor||4278190080,"#"),r=e.getMKProperty(Bd),o=(0,_.getTransparentOrColor)(e.getMKProperty("fillColor")),s=(0,_.getTransparentOrColor)(this.annot.getMKProperty("borderColor")),a=0===this.annot.getBorderStyle()?"solid":"dashed";return t.css({color:i,fontSize:5,"background-color":o,borderWidth:1,borderColor:s,textAlign:"center",borderStyle:a}).html(r),t.hide(),this.$foreground.before(t),!0},n.updateSize=function(t=this.scale,e=this.rotate){this.render(t,e)},n.updateUIMore=function({type:e,value:n}){t.prototype.render.call(this,this.scale,this.rotate,!0)},n.render=function(e=this.scale,n=this.rotate,i=!1){this.annot;return this.scale=e,this.rotate=n,this.formRender.usingHTML(xe.PushButton)?Promise.resolve():t.prototype.render.call(this,e,n)},n.handleEvent=function(e,n){if(!this.checkReadOnly()){let t;switch(e){case Er.AnnotCursorEnter:t=this.annot.getMKProperty(Vd),0==t.length&&(t=this.annot.getMKProperty(Bd));break;case Er.AnnotMouseButtonPressed:t=this.annot.getMKProperty("downCaption"),0==t.length&&(t=this.annot.getMKProperty(Vd)),0==t.length&&(t=this.annot.getMKProperty(Bd));break;case Er.AnnotMouseButtonReleased:t=this.pdfViewer.getCurrentActivatable()==this?this.annot.getMKProperty(Vd):this.annot.getMKProperty(Bd),0==t.length&&(t=this.annot.getMKProperty(Bd));break;case Er.AnnotCursorExit:t=this.annot.getMKProperty(Bd)}}return t.prototype.handleEvent.call(this,e,n)},e}(Jr);m(2565),m(2911),m(5617),m(781),m(5115),m(5133),m(8752);var jd=function(t,e){let n,i=e.page.doc.getPDFForm();if(!i||i.isEmpty()||!(n=e.getField()))return Jr;switch(n.getType()){case xe.Text:case xe.File:return ad;case xe.ListBox:return pd;case xe.ComboBox:return bd;case xe.Sign:return t.config.enableSignature?Cd:Br;case xe.PushButton:return"canvas"==t.config.annotRenderingMode.pushButton?Id:Jr;case xe.CheckBox:return Hd;case xe.RadioButton:return Ld;default:return Jr}};let $d="annotComponent",Wd={properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,e,n){this.data($d).showPropertiesDialog(t,e,n)}},actions:{name:"actions",nameI18nKey:"viewer_:contextmenu.annot.actions",callback:function(){this.data($d).showActionsDialog()},disabled:function(){return this.data($d).readOnlyDisabled()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data($d).removeAnnot()},disabled:function(){return this.data($d).deleteDisabled()}}},Yd={properties:Wd.properties,download:{name:"download",nameI18nKey:"viewer_:contextmenu.annot.download",callback:function(){this.data($d).download()},disabled:function(){return this.data($d).readOnlyDisabled()}},remove:Wd.remove};var Gd={PDF_VIEWER_ALIVE:"PDF-VIEWER-ALIVE",PDF_DOCUMENT_CLOSING:"PDF-DOCUMENT-CLOSING",BROWSER_RELOAD:"BROWSER-RELOAD"};var Kd={OBJECT_URL:"object-url-creation"};m(7539),m(4637);let qd,zd;const Jd="px";let Zd=function(t=".fv__pdf-page-annot-handler-rect"){return{selector:t,items:Wd,events:{show:function(){return this.data($d).updateDeleteStatus(!0),!0},hide:function(){return this.data($d).updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),Xd=function(t=".fv__pdf-page-annot-handler-rect"){return{selector:t,items:Yd,events:{show:function(){return this.data($d).updateDeleteStatus(!0),!0},hide:function(){return this.data($d).updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),Qd=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype._resize=function(e,n,i){this.enableUniform=e!=ja&&e!=$a&&e!=Wa&&e!=Ya,t.prototype._resize.call(this,e,n,i)},e}(sc),tf=function(t){function e(e,n,i,r){var o;(o=t.call(this,e,n,i,r)||this).name="screen",o.$ui.addClass("fv__pdf-page-screen-annot-container"),o.$handler.addClass("fv__pdf-page-screen-annot-handler-container"),o.fileExt="",o.isVideoAudio=e.info.isAudioVideo,o.$Dialog=null,_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{let t={moveable:!0,resizable:!0,enableDiagonally:!0},e=o.pdfViewer.customs.getAnnotComponentConfig((0,C.Z)(o),Object.keys(t));const n=new Qd(y(t,e,{start:(t,e,n)=>o.onStartUpdateShape(t,e,n),update:(t,e)=>o.onShapeUpdating(t,e),moving:(t,e,n)=>o.onShapeMoving(t,e,n),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),rotatable:!1,annotRender:r}));return o.processShapeControlPermissionCtrl(n),n.ownsTo(o.disposor),n})),o.addDestroyHook(o.pdfViewer.getCustomOptionsUpdater().onGetAnnotComponentConfigUpdated((()=>{if(!_.Lazy.hasProperty((0,C.Z)(o),"shapeControl"))return;if(!_.Lazy.isPropertyIntialized((0,C.Z)(o),"shapeControl"))return;const t=o.shapeControl.isActive,e=o.shapeControl;_.Lazy.reset((0,C.Z)(o),"shapeControl"),t&&o._applyShapeChange(),e.destroy()}))),_.Lazy.property((0,C.Z)(o),"contextMenu",(()=>{if(o.contextMenuIsEnable())return o.pdfViewer.viewerUI.createContextMenu((0,C.Z)(o),i,o.getContextMenuConfig())}));let s=o.pdfViewer.i18n;const a=Ur().i18n=function(t){return s.t(t)};o.addDestroyHook((()=>{Ur().i18n===a&&(Ur().i18n=void 0)}));const c=o.pdfViewer.getAnnotAuthorityManager();o.addDestroyHook(c.subscribe(o.annot,(t=>{o.updateOnPermissionChange(t)})));const l=o.pdfViewer.eventEmitter,h=()=>{o.isDestroyed||e.isDestroyed||c.getPermission(e).then((t=>{o.updateOnPermissionChange(t)}))},u=([t])=>{if(!t||!t.getId)return;const e=`fv__screen-decorator-${t.getId()}`;let n=o.annotsRender.$ui.find("."+e);n&&n.remove()};l.on(nt.permissionChanged,h),l.on(nt.annotationRemoved,u),o.addDestroyHook((()=>{l.off(nt.permissionChanged,h),l.off(nt.annotationRemoved,u)}));const d=`fv__screen-decorator-${o.getId()}`;return!(o.iconContainer=o.annotsRender.$ui.find("."+d)).length&&o.isVideoAudio&&(o.annotsRender.genScreenIcon(o.annotsRender.pageRender,o.annot.info),o.iconContainer=o.annotsRender.$ui.find("."+d)),o.render(),o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return Zd},e.getMultiMediaContextMenuConfig=function(){return Xd},e.setContextMenuConfig=function(t){qd=t},e.setMultiMediaContextMenuConfig=function(t){zd=t};var n=e.prototype;return n.updateOnPermissionChange=function(t){if(this.isDestroyed)return;if(this.isMultiMedia()&&this.iconContainer){this.pdfViewer.getPDFDocRender().noInteraction?this.iconContainer.hide():this.iconContainer.show()}if(!_.Lazy.isPropertyIntialized(this,"shapeControl"))return;let e=!1;e=!!this.groupMoveDisabled()||(t.ignorable()?this.moveDisabled():!t.isAdjustable());const n=this.shapeControl;e?n.disable():n.enable()},n.processShapeControlPermissionCtrl=function(t){this.pdfViewer.getAnnotAuthorityManager().getPermission(this.annot).then((t=>{this.updateOnPermissionChange(t)}))},n.isMultiMedia=function(){return this.isVideoAudio},n.redraw=function(t){return this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()!==Re&&this.activeRect(),this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),t&&this.tileCanvas&&this.tileCanvas.clearCache(),this.render()},n.getTileConfig=function(t,e){let n=this.pdfViewer,i=n.getSmartScale(t),r=n.config.tileSize,o=this.annot,s=o.getDeviceRect(1,e),a=o.getDeviceRect(i,e),c=a.right-a.left,l=a.bottom-a.top;return[Math.ceil(l/r),Math.ceil(c/r),c,l,r,i,t,e,s.left,s.top]},n.render=function(t=this.scale,e=this.rotate){if(this.isMultiMedia()){const e=4*this.annot.getBorderWidth()/3*_.dpr*t;this.iconContainer.css({padding:e})}},n.afterRender=function({transformed:t}){if(t&&(this.isActive&&(this.activeRect(),this._applyShapeChange()),this.isMultiMedia()&&this.$player&&this.$player.is(":visible"))){let t=this.annot.getDeviceRect(this.scale,this.rotate);this.$player.css({left:t.left+Jd,top:t.top+Jd,width:t.right-t.left+Jd,height:t.bottom-t.top+Jd})}},n.onShapeRotated=function(t){t<0&&(t+=360),t<=45||t>315?t=0:t>45&&t<=135?t=270:t>135&&t<=225?t=180:t>225&&t<=315||t>-135&&t<=-45?t=90:console.warn("degree error: "+t);let e=this.annot.getRotation();return e+=t,e>=360&&(e-=360),this.setRotation(e)},n.onStartUpdateShape=function(t,e,n){this.editDebouncePromise||(this.editDebouncePromise=new _.DebounceAsyncTaskExecutor(0))},n.onShapeUpdating=function(t,e){if(this.pdfViewer.config.highPerformance)return this.editDebouncePromise?this.editDebouncePromise.exec((()=>this.setRect(t))):Promise.resolve()},n.onShapeMoving=function(t,e){if(this.pdfViewer.config.highPerformance)return this.editDebouncePromise?this.editDebouncePromise.exec((()=>this.moveTo(t.left,t.top))):Promise.resolve()},n.onShapeUpdateEnd=function(t,e,n){return this.editDebouncePromise.exec((()=>this.setRect(t).then((t=>{"move"==n&&this.pdfViewer.eventEmitter.emit(nt.annotationMovedPosition,[this.annot],this.getPDFPage(),this.annot)}))))},n.activeHandleFuc=function(e){t.prototype.active.call(this),this.activeRect(),this.$handler.addClass("active"),this._applyShapeChange(),e&&this.play(),this.closeConfirmDia()},n.closeConfirmDia=function(){this.$Dialog&&(this.$Dialog[0].close(),this.$Dialog.remove())},n.active=function(t){const e=this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName(),{info:{annotScreenDetailType:n}}=this.annot;["create-multi-media-state","select-annotation","createImage"].includes(e)||n&&"screen_img"===n?this.activeHandleFuc(!1):this.activeHandleFuc(!(t&&"doubletap"===t.type))},n._applyShapeChange=function(){const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t)},n.movedByOther=function(){this.isActive&&this._applyShapeChange()},n.getMultiMediaUrl=function(){const t=this.pdfViewer.resourceGenerator(Gd.PDF_DOCUMENT_CLOSING,Kd.OBJECT_URL),{URL:e}=t.expose();return this.annot.getActionPromise().then((t=>{let n=t.info;if(this.multiMediaUrl)return this.multiMediaUrl;if(n&&"TypeRendition"==n.type)for(let t=0;t<n.renditions.length;t++){let r=n.renditions[t].fileName,o=n.renditions[t].contentType;if(!r)continue;let s=r.substr(r.lastIndexOf(".")).toLowerCase();if(this.fileExt=s,[".mp4",".mp3",".wav",".ogg",".m4a",".mov",".avi"].indexOf(s)>-1){this.isMultiMediaAnnot=!0;let s=n.renditions[t].buffer;var i=new Blob([s.buffer],{type:o});let a=e.createObjectURL(i);this.multiMediaUrl=a,this.multiMediaFilename=r,this.actionBlob=i;break}}return this.multiMediaUrl}))},n.play=function(){const t=this.pdfViewer.getPDFDocRender();t&&!t.noInteraction&&this.getAppPermission().then((t=>{this.isPaused()?t.isPlayable()&&this.doAction():this.pause()}))},n.pause=function(){this.player&&this.player.pause()},n.isPaused=function(){return!this.player||this.player.paused},n.updatePayerRect=function(){let t=this.annot.getDeviceRect(this.scale,this.rotate);return this.$player?(this.$player.css({left:t.left+Jd,top:t.top+Jd,width:t.right-t.left+Jd,height:t.bottom-t.top+Jd}),t):t},n.doAction=function(){this.isMultiMedia()?this.getMultiMediaUrl().then((t=>{if(t){if(this.$handler.addClass("active"),this.$player)this.$player.show();else{if([".mp3",".wav",".ogg"].indexOf(this.fileExt)>-1){const e=_.isMobile||_.isSafari?"":"fv__hide";this.$handler.append('<div class="fv__pdf-player '+e+'" style="position:absolute;" ><audio class="player" src="'+t+'" poster="#" width="100%" height="100%" controls="controls" controlsList="nodownload" style="width: 100%; height: 100%;">Your browser does not support the video tag.</audio><button><i class="fv__close-video"></i></button></div>')}else this.$handler.append('<div class="fv__pdf-player" style="position:absolute;" ><video class="player" src="'+t+'" poster="#" width="100%" height="100%" controls="controls" controlsList="nodownload">Your browser does not support the video tag.</video><button><i class="fv__close-video"></i></button></div>');this.$player=this.$handler.find(".fv__pdf-player"),this.player=this.$handler[0].querySelector(".fv__pdf-player .player"),(_.isIE||_.isEdge)&&this.player.addClass("IE-player");const e=this.$handler[0].querySelector(".fv__close-video").parentNode;e.addEventListener("click",(t=>{this.player&&this.player.pause&&this.player.pause(),this.$player.hide(),t.stopPropagation()})),e.addEventListener("mousedown",(t=>{t.stopPropagation()})),e.addEventListener("pointerdown",(t=>{t.stopPropagation()})),e.addEventListener("touchstart",(t=>{t.stopPropagation()}));const n=t=>{this.iconContainer.find(".icon").removeClass("play pause").addClass("pause")},i=t=>{this.iconContainer.find(".icon").removeClass("play pause").addClass("play")},r=t=>{this.iconContainer.find(".icon").removeClass("play pause").addClass("play")},o=t=>{t.preventDefault()};this.player.addEventListener("play",n),this.player.addEventListener("pause",i),this.player.addEventListener("ended",r),this.player.addEventListener("click",o),this.addDestroyHook((()=>{this.player.removeEventListener("play",n),this.player.removeEventListener("pause",i),this.player.removeEventListener("ended",r),this.player.removeEventListener("click",o)}))}if(this.updatePayerRect(),this.$rect&&this.$rect.css({left:"-100px",top:"-100px",width:0,height:0}),this.player)if(this.player.paused){let t=this.player.play();void 0!==t&&t.then((()=>{_.isSafari&&this.player.play()})).catch((t=>{if(_.isSafari)return;let e=this.pdfViewer.i18n.t("viewer_:contextmenu.annot.noSptPlayPlsDownload");this.$player.remove(),this.pdfViewer.viewerUI.alert({message:e,level:"warning",isHTML:!0})}))}else this.player.pause()}})):this.pdfViewer.actionManager.get(this.annot.action,this).active()},n.download=function(){this.getAppPermission().then((t=>{t.isAttachmentDownloadable()&&this.isMultiMedia()&&this.getMultiMediaUrl().then((t=>{Ho(this.actionBlob,this.multiMediaFilename,this.actionBlob.type)}))}))},n.activeRect=function(t=this.annot){let e=this.$rect=this.$rect||this.rectInit(),n=this.scale,i=this.rotate,r=t.getDeviceRect(n,i);e.css({left:r.left+Jd,top:r.top+Jd,width:r.right-r.left+Jd,height:r.bottom-r.top+Jd})},n.rectInit=function(){let t=this.$handler,e=D()(this.createRectDom());t.append(e);let n=e[0],i=this.rectHammer=new Hammer.Manager(n,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});return i.add(new Hammer.Tap({event:"doubletap",taps:2})),i.add(new Hammer.Tap({event:"singletap"})),i.get("doubletap").recognizeWith("singletap"),i.get("singletap").requireFailure("doubletap"),i.on("singletap",(t=>{this.rectSingleTap(t)})),t.on("contextmenu",(function(t){t.preventDefault()})),t.on("mouseup",(function(t){t.stopPropagation()})),e.data($d,this),this.addDestroyHook((()=>{i.destroy()})),e},n.showContextMenu=function(t,e){return!!this.contextMenu&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.getContextMenuConfig=function(){let t;if(this.isMultiMedia()){if(zd)return zd;t=this.constructor.getMultiMediaContextMenuConfig()}else{if(qd)return qd;t=this.constructor.getDefaultContextMenuConfig()}for(let e in t)if("items"===e){let n=t[e],i=this.pdfViewer.i18n;for(let t in n){let e=n[t];e.nameI18nKey&&(e.name=i.t(e.nameI18nKey))}}return this.isMultiMedia()?this.constructor.setMultiMediaContextMenuConfig(t):this.constructor.setContextMenuConfig(t),t},n.updateRender=function(){return this.updateSize(),Promise.resolve()},n.unActive=function(){t.prototype.unActive.call(this),this.$handler&&this.$handler.removeClass("active")},n.unActiveMore=function(){},n.rectSingleTap=function(t){},n.removeAnnot=function(){return this.getAppPermission().then((t=>t.ignorable()&&this.deleteDisabled()?Promise.resolve():t.isDeletable()?this.doRemoveAnnot():void 0)).then((t=>{const e=this.pdfViewer.getCurrentActivatable();return e&&e.remove&&e.remove(this),t}))},n.doRemoveAnnot=function(){let t=this.pdfViewer,e=t.eventEmitter,n=this.annot;return Promise.resolve((t.customs.removeAnnotBefore||_.noop)(this)).then((t=>{if(e.emit(nt.removeActionAnnotationBefore,this),!1!==t)return n.getPDFPage().removeAnnot(n).then((t=>(this.isMultiMedia()&&this.iconContainer&&this.iconContainer.remove(),e.emit(nt[t?"removeActionAnnotationSuccess":"removeActionAnnotationFailed"],this,n),t)),(()=>{e.emit(nt.removeActionAnnotationFailed,this)}))}))},n.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},n.getPropertyOptions=function(){let t=this.annot,e=(0,_.colorConvertor)(t.getBorderColor(),"#");-1==e&&(e=0);let n=t.getBorderWidth(),i=360-t.getRotation();return{color:e,opacity:t.getOpacity(),borderWidth:n,borderStyle:!0,disabled:this.propertyDisabled(),rotation:i,isLocked:this.isLocked()}},n.updateContextMenu=function(){let t=this.getContextMenuConfig();this.isMultiMedia()&&(this.player.paused?delete t.items.pause:delete t.items.play),this.$handler.contextMenu(t)},n.showPropertiesDialog=function(){this.$propertiesControl=new va(this,document.body),this.updateDeleteStatus(!0)},n.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close(),this.updateDeleteStatus(!1)},n.showActionsDialog=function(){this.$actionsControl=new gl(this,document.body,this.annot.action),this.updateDeleteStatus(!0)},n.hideActionsDialog=function(){this.$actionsControl.close(),this.updateDeleteStatus(!1)},n.setBorderWidth=function(t){return this.annot.setBorderWidth(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setColor=function(t){return this.annot.setBorderColor(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setBorderStyle=function(t,e){return this.annot.setBorderStyle(t,e).then((t=>t?this.updateRender().then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)})):t))},n.setOpacity=function(t){return t==this.annot.getOpacity()?Promise.resolve(!0):this.annot.setOpacity(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setRotation=function(t){let e=this.annot.getRotation(),n=Math.abs(t-e);if(0==n)return!0;let i=this.annot.getRect(),r=i.right-i.left,o=i.top-i.bottom;if(90==n||270==n){let t=(r-o)/2;i.left+=t,i.right-=t,i.top+=t,i.bottom-=t}return this.annot.setRect(i).then((e=>e?this.annot.setRotation(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t)):e))},n.renderDestroy=function(){this.tileCanvas&&this.tileCanvas.destroy(),this.tileCanvas&&this.$handler.remove()},n.doubleTapAnnot=function(){return!1},n.tapAnnot=function(e){if(!this.shapeControl.isActive)return this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()===Re?this.play():t.prototype.tapAnnot.call(this,e)},n.destroy=function(){t.prototype.destroy.call(this),_.Lazy.isPropertyIntialized(this,"contextMenu")&&this.contextMenu&&this.contextMenu.destroy()},e}(Br),ef=function(t){function e(e,n,i,r){var o;o=t.call(this,e,n,i,r)||this;let s=e.getGroupHeader();return s&&"Replace"===s.getIntent()&&(o.isReplace=!0,o.caretAnnot=s),o}return(0,E.Z)(e,t),e.prototype.onRightChangeSuccess=function(t){if(this.isReplace)return this.caretAnnot.moveRectByCharIndex(t.charIndex)},e}(bc);function nf(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let rf,of=function(t){function e(e,n,i,r){var o;return(o=t.call(this,e,n,i,r)||this).$ui.addClass("fv__pdf-page-watermark-annot-container"),o}(0,E.Z)(e,t);var n=e.prototype;return n.getTileConfig=function(t,e){let n=this.pdfViewer,i=n.getSmartScale(t),r=n.config.tileSize,o=this.annot,s=o.getDeviceRect(1,e),a=o.getDeviceRect(i,e),c=a.right-a.left,l=a.bottom-a.top;return[Math.ceil(l/r),Math.ceil(c/r),c,l,r,i,t,e,s.left,s.top]},n.render=function(t=this.scale,e=this.rotate,n){var i;let r=this.annot;if(this.scale=t,this.rotate=e,r.isEmpty()||r.isDeleted()||r.rectIsEmpty())return this.renderDestroy(),Promise.resolve();let o=this.tileCanvas;if(!r.getBorderWidth())return o&&o.hideContainer(),Promise.resolve();let s=this.getTileConfig(t,e);return o||(o=this.tileCanvas=new xi(((t,e,n,i,o,s,a,c)=>this.getPDFPage().getAnnotBitmap(r.getId(),V(s),this.rotate,{x:a*s+e*o,y:c*s+t*o,width:n,height:i},!0)),this.$ui)),o.setVisibleRect(n),o.showContainer(),(i=o).redraw.apply(i,nf(w.Z,s))},e}(Br),sf="annotComponent",af={play:{name:"play",nameI18nKey:"viewer_:contextmenu.annot.play",callback:function(){this.data(sf)},disabled:function(){return this.data(sf).readOnlyDisabled()}},pause:{name:"pause",nameI18nKey:"viewer_:contextmenu.annot.pause",callback:function(){this.data(sf)},disabled:function(){return this.data(sf).readOnlyDisabled()}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){this.data(sf).removeAnnot()},disabled:function(){return this.data(sf).deleteDisabled()}}};function cf(t,e,n){for(let i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}function lf(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const hf="px";let uf=function(t=".fv__pdf-page-annot-handler-rect"){return{selector:t,items:af,events:{show:function(){return this.data(sf).updateDeleteStatus(!0),!0},hide:function(){return this.data(sf).updateDeleteStatus(!1),!0}}}}(".fv__pdf-page-annot-handler-rect"),df=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype._resize=function(e,n,i){this.enableUniform=e!=ja&&e!=$a&&e!=Wa&&e!=Ya,t.prototype._resize.call(this,e,n,i)},e}(sc),ff=function(t){function e(e,n,i,r){var o;(o=t.call(this,e,n,i,r)||this).name="sound",o.$ui.addClass("fv__pdf-page-sound-annot-container"),o.$handler.addClass("fv__pdf-page-sound-annot-handler-container"),e.action&&(o.actionViewer=o.pdfViewer.actionManager.get(e.action,(0,C.Z)(o))),o.isVideoAudio=e.info.isAudioVideo,o.audioUrl="",o.audioBlobData=null,o.multiMediaFilename="",_.Lazy.property((0,C.Z)(o),"shapeControl",(()=>{var t=new df({emitter:o.pdfViewer.eventEmitter,start:(t,e,n)=>o.onStartUpdateShape(t,e,n),update:(t,e)=>o.onShapeUpdating(t,e),moving:(t,e,n)=>o.onShapeMoving(t,e,n),end:(t,e,n)=>o.onShapeUpdateEnd(t,e,n),resizable:!1,enableDiagonally:!0,moveable:!1,rotatable:!1,annotRender:r,enableSizeBox:!o.isMultiMedia()});return o.processShapeControlPermissionCtrl(t),t})),_.Lazy.property((0,C.Z)(o),"contextMenu",(()=>{if(o.contextMenuIsEnable())return o.pdfViewer.viewerUI.createContextMenu((0,C.Z)(o),i,o.getContextMenuConfig())}));let s=o.pdfViewer.i18n;Ur().i18n=function(t){return s.t(t)};const a=Ur().i18n=function(t){return s.t(t)};return o.addDestroyHook((()=>{Ur().i18n===a&&(Ur().i18n=void 0)})),o.apRenderer=new Ph((0,C.Z)(o)),o}(0,E.Z)(e,t),e.getDefaultContextMenuConfig=function(){return uf},e.setContextMenuConfig=function(t){rf=t};var n=e.prototype;return n.isMultiMedia=function(){return this.isVideoAudio},n.redraw=function(){return this.groupMoveDisabled()||this.moveDisabled()?this.shapeControl&&this.shapeControl.disable():this.shapeControl&&this.shapeControl.enable(),this.render()},n.getTileConfig=function(t,e){let n=this.pdfViewer,i=n.getSmartScale(t),r=n.config.tileSize,o=this.annot,s=o.getDeviceRect(1,e),a=o.getDeviceRect(i,e),c=a.right-a.left,l=a.bottom-a.top;return[Math.ceil(l/r),Math.ceil(c/r),c,l,r,i,t,e,s.left,s.top]},n.swapLowHighBit=function(t){let e=new Int8Array(t).length,n=new DataView(t),i=new Int8Array(e);for(let t=0;t<e;t+=2)i[t]=t+1==e?0:n.getInt8(t+1),i[t+1]=n.getInt8(t);return i},n.getMultiMediaUrl=function(){let t=this.annot;if(!this.audioBlobData){let e=t.info.soundObj,n=e.data;this.multiMediaFilename=t.info.title;let i=e.sampleRate,r=e.sampleBits,o=e.channel,s=this.swapLowHighBit(n),a=(s.length,function(t,e=1,n,i){let r=new ArrayBuffer(44+t.length),o=new DataView(r);return cf(o,0,"RIFF"),o.setUint32(4,36+t.length,!0),cf(o,8,"WAVE"),cf(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,e,!0),o.setUint32(24,n,!0),o.setUint32(28,n*e,!0),o.setUint16(32,e,!0),o.setUint16(34,i,!0),cf(o,36,"data"),o.setUint32(40,t.length,!0),function(t,e,n){for(let i=0;i<n.length;i++,e++){let r=n[i];t.setInt8(e,r)}}(o,44,t),o}(s,o,i,r)),c=new Blob([new Int8Array(a.buffer)],{type:"audio/wav"});this.audioBlobData=c}const e=this.pdfViewer.resourceGenerator(Gd.PDF_DOCUMENT_CLOSING,Kd.OBJECT_URL),{URL:n}=e.expose();return this.audioUrl=n.createObjectURL(this.audioBlobData,{type:"audio/wav"}),this.audioUrl},n.render=function(t=this.scale,e=this.rotate,n){let i=this.annot;this.scale=t,this.rotate=e;let r=this.getTileConfig(t,e),o=this.tileCanvas;return this.getAnnotFlag().checkHidden()||i.isEmpty()||i.isDeleted()||i.rectIsEmpty()?(o&&o.hideContainer(),Promise.resolve()):(o&&o.showContainer(),this.isHTMLSimulate()?this.apRenderer.render(t,e):o?(o.setVisibleRect(n),(s=o).redraw.apply(s,lf(w.Z,r))):(o=this.tileCanvas=new xi(((t,e,n,r,o,s,a,c)=>this.getPDFPage().getAnnotBitmap(i.getId(),V(s),this.rotate,{x:a*s+e*o,y:c*s+t*o,width:n,height:r},!0)),this.$ui),this.isMultiMedia()&&this.$ui.append('<div class="fv__pdf-page-sound-annot-container"></div>'),o.setVisibleRect(n),(a=o).redraw.apply(a,lf(w.Z,r))));var s,a},n.afterRender=function({transformed:t}){if(t){if(this.isActive){this.activeRect();const t=this._getShapeControllerBoundaryBox();this.shapeControl.active(this.$handler,this.getBoundary(),t)}if(this.isMultiMedia()&&this.$player&&this.$player.is(":visible")){let t=this.annot.getDeviceRect(this.scale,this.rotate);this.$player.css({left:t.left+hf,top:t.top+hf,width:t.right-t.left+hf,height:t.bottom-t.top+hf})}}},n.activeRect=function(t=this.annot){let e=this.$rect=this.$rect||this.rectInit(),n=this.scale,i=this.rotate,r=t.getDeviceRect(n,i);e.css({left:r.left+hf,top:r.top+hf,width:r.right-r.left+hf,height:r.bottom-r.top+hf})},n.rectInit=function(){let t=this.$handler,e=D()(this.createRectDom());t.append(e);let n=e[0],i=this.rectHammer=new Hammer.Manager(n,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});return i.add(new Hammer.Tap({event:"doubletap",taps:2})),i.add(new Hammer.Tap({event:"singletap"})),i.get("doubletap").recognizeWith("singletap"),i.get("singletap").requireFailure("doubletap"),i.on("doubletap",(t=>{!1!==this.onDoubleTap(t)&&this.rectDoubleTap()})),this.contextMenuIsEnable()&&e.data(sf,this),this.addDestroyHook((()=>{i.destroy()})),e},n.getContextMenuConfig=function(){if(rf)return rf;let t=this.constructor.getDefaultContextMenuConfig();for(let e in t)if("items"===e){let n=t[e],i=this.pdfViewer.i18n;for(let t in n){let e=n[t];e.nameI18nKey&&(e.name=i.t(e.nameI18nKey))}}return this.constructor.setContextMenuConfig(t),t},n.onShapeRotated=function(t){t<0&&(t+=360),t<=45||t>315?t=0:t>45&&t<=135?t=270:t>135&&t<=225?t=180:t>225&&t<=315||t>-135&&t<=-45?t=90:console.warn("degree error: "+t);let e=this.annot.getRotation();return e+=t,e>=360&&(e-=360),this.setRotation(e)},n.onStartUpdateShape=function(t,e,n){this.editDebouncePromise||(this.editDebouncePromise=new _.DebounceAsyncTaskExecutor(0))},n.onShapeUpdating=function(t,e){this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((()=>this.setRect(t)))},n.onShapeMoving=function(t,e){this.pdfViewer.config.highPerformance&&this.editDebouncePromise&&this.editDebouncePromise.exec((()=>this.moveTo(t.left,t.top).then((t=>{this.setMargin()}))))},n.onShapeUpdateEnd=function(t,e,n){return this.editDebouncePromise?this.editDebouncePromise.exec((()=>this.moveTo(t.left,t.top,n,!1).then((e=>this.setRect(t))).then((t=>{this.setMargin()})))):Promise.resolve()},n.setMargin=function(){let t=this.getGroupRect(),e=this.getRect();this.shapeControl.setMargin(Vo.expandOffset(e,t))},n.active=function(){t.prototype.active.call(this),this.activeRect(),this.$handler.addClass("active")},n.play=function(){this.getAppPermission().then((t=>{this.isPaused()?t.isPlayable()&&this.doAction():this.pause()}))},n.pause=function(){this.player&&this.player.pause()},n.isPaused=function(){return!this.player||this.player.paused},n.doAction=function(){if(this.isMultiMedia()){let t=this.getMultiMediaUrl();if(!t)return;if(this.$handler.addClass("active"),this.$player)this.$player.show();else{if(_.isIE&&!_.isEdge){let t=this.pdfViewer.i18n.t("viewer_:contextmenu.annot.noSptPlayPlsDownload");return this.pdfViewer.viewerUI.alert({message:t,level:"warning"}),!1}this.$handler.append('<div class="fv__pdf-player fv__hide" style="position:absolute;" ><audio style="width: 200px" src="'+t+'" poster="#" width="100px" height="100%" controls="controls" controlsList="nodownload">Your browser does not support the video tag.</audio><button><i class="fv__close-video"></i></button></div>'),this.$player=this.$handler.find(".fv__pdf-player"),this.player=this.$handler[0].querySelector(".fv__pdf-player audio"),(_.isIE||_.isEdge)&&this.player.addClass("IE-player"),(_.isMobile||_.isTablet)&&this.player.removeAttribute("controls"),this.$handler[0].querySelector(".fv__close-video").addEventListener("click",(t=>{URL.revokeObjectURL(this.audioUrl),this.player&&this.player.pause&&this.player.pause(),this.$player.hide()}))}let e=this.annot.getDeviceRect(this.scale,this.rotate);if(this.$player.css({left:e.left+hf,top:e.top+hf,width:e.right-e.left+hf,height:e.bottom-e.top+hf}),this.$rect&&this.$rect.css({left:"-100px",top:"-100px",width:0,height:0}),!this.player)return;this.player.paused?this.player.play&&this.player.play():this.player.pause&&this.player.pause()}else this.actionViewer&&this.actionViewer.active()},n.download=function(){this.getAppPermission().then((t=>{if(t.isAttachmentDownloadable()){let t=this.audioBlobData;_.isIE&&!_.isEdge&&(this.multiMediaFilename=this.multiMediaFilename+".wav"),Ho(t,this.multiMediaFilename,{type:"audio/wav"})}}))},n.addAction=function(t){this.actionViewer=this.pdfViewer.actionManager.get(t,this)},n.showContextMenu=function(t,e){return!!this.contextMenu&&(this.contextMenu.setCurrentTarget(this),this.contextMenu.showAt(t,e))},n.createRectDom=function(){return this.shapeControl.ui.classList.add("fv__pdf-page-annot-handler-rect"),this.shapeControl.ui},n._getShapeControllerBoundaryBox=function(){const t=this.getPDFPage(),[e,n]=U(t.getPxWidth(),t.getPxHeight(),this.scale,this.rotate);return{left:0,top:0,right:e,bottom:n}},n.updateRender=function(){return Promise.resolve()},n.unActive=function(){t.prototype.unActive.call(this),this.$handler.removeClass("active")},n.removeAnnot=function(){return this.getAppPermission().then((t=>t.ignorable()&&("function"==typeof this.deleteDisabled&&this.deleteDisabled()||!this.deleteDisabled)?Promise.resolve():t.isDeletable()?this.doRemoveAnnot():void 0)).then((t=>{const e=this.pdfViewer.getCurrentActivatable();return e&&e.remove&&e.remove(this),t}))},n.doRemoveAnnot=function(){let t=this.pdfViewer,e=t.eventEmitter,n=this.annot;return Promise.resolve((t.customs.removeAnnotBefore||_.noop)(this)).then((t=>{if(e.emit(nt.removeActionAnnotationBefore,this),!1!==t)return n.getPDFPage().removeAnnot(n).then((t=>{if(t)return e.emit(nt.removeActionAnnotationSuccess,this,n);e.emit(nt.removeActionAnnotationFailed,this)}),(()=>{e.emit(nt.removeActionAnnotationFailed,this)}))}))},n.removeAnnotRender=function(){this.renderDestroy(),this.parent().remove()},n.removeAction=function(){this.actionViewer=null},n.getPropertyOptions=function(){let t=this.annot,e=(0,_.colorConvertor)(t.getBorderColor(),"#");-1==e&&(e=0);let n=t.getBorderWidth(),i=t.getBorderStyle();return{color:e,opacity:t.getOpacity(),borderWidth:n,borderStyle:i,disabled:this.propertyDisabled(),isLocked:this.isLocked()}},n.updateContextMenu=function(){let t=this.getContextMenuConfig();this.isMultiMedia()&&(this.player.paused?delete t.items.pause:delete t.items.play),this.$handler.contextMenu(t)},n.showPropertiesDialog=function(){this.$propertiesControl=new va(this,document.body),this.updateDeleteStatus(!0)},n.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close(),this.updateDeleteStatus(!1)},n.showActionsDialog=function(){this.$actionsControl=new gl(this,document.body,this.annot.action),this.updateDeleteStatus(!0)},n.hideActionsDialog=function(){this.$actionsControl.close(),this.updateDeleteStatus(!1)},n.setBorderWidth=function(t){return this.annot.setBorderWidth(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setColor=function(t){return this.annot.setBorderColor(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setBorderStyle=function(t,e){return this.annot.setBorderStyle(t,e).then((t=>t?this.updateRender().then((()=>{this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this)})):t))},n.setOpacity=function(t){return t==this.annot.getOpacity()?Promise.resolve(!0):this.annot.setOpacity(t).then((t=>t?this.updateRender().then((()=>(this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t))},n.setRotation=function(t){let e=this.annot.getRotation(),n=Math.abs(t-e);if(0==n)return!0;let i=this.annot.getRect(),r=i.right-i.left,o=i.top-i.bottom;if(90==n||270==n){let t=(r-o)/2;i.left+=t,i.right-=t,i.top+=t,i.bottom-=t}return this.annot.setRect(i).then((e=>e?this.annot.setRotation(t).then((t=>t?this.updateRender().then((()=>(this.active(),this.pdfViewer.eventEmitter.emit(nt.updateActionAnnotation,this),t))):t)):e))},n.renderDestroy=function(){this.tileCanvas&&this.tileCanvas.destroy(),this.tileCanvas&&this.$handler.remove()},n.doubleTapAnnot=function(){return!1},n.tapAnnot=function(e){if(!this.shapeControl.isActive)return this.pdfViewer.getStateHandlerManager().getCurrentStates().getStateName()===Re?this.play():t.prototype.tapAnnot.call(this,e)},n.destroy=function(){t.prototype.destroy.call(this),_.Lazy.isPropertyIntialized(this,"contextMenu")&&this.contextMenu&&this.contextMenu.destroy()},e}(ka);var pf=function(){function t(t){this.pdfViewer=t,this.matchRules=[]}var e=t.prototype;return e.registerMatchRule=function(t){return this.matchRules.push(t),t},e.unRegisterMatchRule=function(t){let e=this.matchRules.indexOf(t);-1!==e&&this.matchRules.splice(e,1)},e.get=function(t){let e,n=this.matchRules,i=this.getDefault(t);for(let r=0,o=n.length;r<o;r++){let o=n[r];if("function"!=typeof o)continue;let s=o(t,i);s&&(e=s,i=s)}return e||i},e.getDefault=function(t){switch(t.getType()){case"highlight":return yc;case"squiggly":return Cc;case"strikeout":return t.getIntent()===st.Intents.STRIKEOUT_TEXTEDIT?ef:bc;case"underline":return Pc;case"line":return t.getIntent()===st.Intents.LINE_DIMENSION?Wc:$c;case"polyline":return tl;case"fileattachment":return Ih;case"text":return Eh;case"circle":return Dl;case"caret":return Fh;case"freetext":switch(t.getIntent()){case st.Intents.FREETEXT_TYPEWRITER:return fu;case st.Intents.FREETEXT_CALLOUT:return _u;default:return Ou}case"ink":return Bh;case"polygon":switch(t.getIntent()){case st.Intents.POLYGON_CLOUD:return Qh;case st.Intents.POLYGON_DIMENSION:default:return hl}case"square":return kh;case"sound":return ff;case"stamp":return Oh;case"link":return Sl;case"widget":return jd(this.pdfViewer,t);case"screen":return tf;case"redact":return zh;case"watermark":return of;default:return Br}},e.getAnnotFlag=function(t){let e=new Tr(t.getFlags());return this.getAnnotFlag_&&e.or(this.getAnnotFlag_(t)),e},e.setViewerAnnotFlag=function(t){this.getAnnotFlag_=t,this.pdfViewer.eventEmitter.emit(nt.globalAnnotFlagChanged)},t}();let gf=function(t){function e(e,n){var i;return(i=t.call(this)||this).action=e,i.annot=n,i.pdfViewer=n.pdfViewer,i.initSubAction(),i}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){this.subAction.forEach((t=>{t.active()}))},n.setSourceTarget=function(t,e){this.source=t,this.target=e,this.action&&this.subAction.forEach((t=>{t.setSourceTarget(this.source,this.target)}))},n.initSubAction=function(){this.subAction=[],this.action&&this.action.subAction.forEach((t=>{this.subAction.push(this.pdfViewer.actionManager.get(t,this.annot))}))},n.updateAction=function(t){this.action=t,this.initSubAction()},n.destroy=function(){t.prototype.destroy.call(this),this.action=null,this.subAction.length=0,this.source=null,this.target=null},e}(_.Disposable);function mf(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const vf=2147483647,yf=36,wf=/^xn--/,bf=/[^\0-\x7F]/,Af=/[\x2E\u3002\uFF0E\uFF61]/g,Pf={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Sf=Math.floor,Cf=String.fromCharCode;function Ef(t){throw new RangeError(Pf[t])}function xf(t,e){const n=t.split("@");let i="";n.length>1&&(i=n[0]+"@",t=n[1]);const r=function(t,e){const n=[];let i=t.length;for(;i--;)n[i]=e(t[i]);return n}((t=t.replace(Af,".")).split("."),e).join(".");return i+r}function Df(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const i=t.charCodeAt(n++);56320==(64512&i)?e.push(((1023&r)<<10)+(1023&i)+65536):(e.push(r),n--)}else e.push(r)}return e}const If=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},Rf=function(t,e,n){let i=0;for(t=n?Sf(t/700):t>>1,t+=Sf(t/e);t>455;i+=yf)t=Sf(t/35);return Sf(i+36*t/(t+38))},Tf=function(t){const e=[],n=t.length;let i=0,r=128,o=72,s=t.lastIndexOf("-");s<0&&(s=0);for(let n=0;n<s;++n)t.charCodeAt(n)>=128&&Ef("not-basic"),e.push(t.charCodeAt(n));for(let c=s>0?s+1:0;c<n;){const s=i;for(let e=1,r=yf;;r+=yf){c>=n&&Ef("invalid-input");const s=(a=t.charCodeAt(c++))>=48&&a<58?a-48+26:a>=65&&a<91?a-65:a>=97&&a<123?a-97:yf;s>=yf&&Ef("invalid-input"),s>Sf((vf-i)/e)&&Ef("overflow"),i+=s*e;const l=r<=o?1:r>=o+26?26:r-o;if(s<l)break;const h=yf-l;e>Sf(vf/h)&&Ef("overflow"),e*=h}const l=e.length+1;o=Rf(i-s,l,0==s),Sf(i/l)>vf-r&&Ef("overflow"),r+=Sf(i/l),i%=l,e.splice(i++,0,r)}var a;return String.fromCodePoint.apply(String,e)},Ff=function(t){const e=[],n=(t=Df(t)).length;let i=128,r=0,o=72;for(const n of t)n<128&&e.push(Cf(n));const s=e.length;let a=s;for(s&&e.push("-");a<n;){let n=vf;for(const e of t)e>=i&&e<n&&(n=e);const c=a+1;n-i>Sf((vf-r)/c)&&Ef("overflow"),r+=(n-i)*c,i=n;for(const n of t)if(n<i&&++r>vf&&Ef("overflow"),n===i){let t=r;for(let n=yf;;n+=yf){const i=n<=o?1:n>=o+26?26:n-o;if(t<i)break;const r=t-i,s=yf-i;e.push(Cf(If(i+r%s,0))),t=Sf(r/s)}e.push(Cf(If(t,0))),o=Rf(r,c,a===s),r=0,++a}++r,++i}return e.join("")};var _f={version:"2.3.1",ucs2:{decode:Df,encode:t=>String.fromCodePoint.apply(String,mf(w.Z,t))},decode:Tf,encode:Ff,toASCII:function(t){return xf(t,(function(t){return bf.test(t)?"xn--"+Ff(t):t}))},toUnicode:function(t){return xf(t,(function(t){return wf.test(t)?Tf(t.slice(4).toLowerCase()):t}))}};let kf=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(e=ei){const n=this.annot.pdfViewer;let i=n.customs;Promise.resolve((i.URIActionCallback||ei)(this.getURI())).then((t=>{if(!1===t)return;let i=this.getURI(),r=!1;if(/\w*:\/\/[\s\S]*/.test(i)){if("file"===i.match(/(\w*):\/+[\s\S]*/)[0])return}else(r=i.toLowerCase().startsWith("mailto:"))||(i="http://"+i);if(!n.getSafeReadingMode())return void window.open(i);let o=i.lastIndexOf("@"),s=i;if(-1!=o&&!r){s=i.substr(o+1);let t=i.indexOf("//");-1!=t&&(s=i.substr(0,t+2)+s)}{let t=n.i18n.t("viewer_:pdfjs.launchURLHint");return n.viewerUI.confirm(t+"\n"+_f.toASCII(s)).then((()=>{window.open(i),e(!0)}),(()=>e(!1)))}})),t.prototype.active.call(this)},n.getURI=function(){return this.action.getURI()},n.setURI=function(t){return this.action.setURI(t)},e}(gf),Mf=function(){function t(t){this.fileSpec=t}var e=t.prototype;return e.getChecksum=function(){return this.fileSpec.getChecksum()},e.getCreationDateTime=function(){return this.fileSpec.getCreationDateTime()},e.getDescription=function(){return this.fileSpec.getDescription()},e.getDict=function(){return this.fileSpec.dict},e.getFileData=function(){return this.fileSpec.fileData},e.getFileName=function(){return this.fileSpec.getFileName()},e.getFileSize=function(){return this.fileSpec.fileSize},e.getModifiedDateTime=function(){return this.fileSpec.modifiedDateTime},e.getSubtype=function(){return this.fileSpec.subtype},e.isEmbedded=function(){return this.fileSpec.isEmbedded},t}(),Of=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).fileSpec=i.getFileSpec()&&new Mf(i.getFileSpec())||null,i}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){{this.annot.pdfViewer.customs;const t=this.annot.pdfViewer.i18n.t("ui_:dialog.actionDialog.selectAction.file"),e=this.annot.pdfViewer.i18n.t("alert.browserRestriction-actionTriggered-websdk");this.annot.pdfViewer.viewerUI.alert({message:`"${t}" ${e}`,level:"warning"})}t.prototype.active.call(this)},n.getFileSpec=function(){return this.action.getFileSpec()},e}(gf);const Lf={HandMenuItem:"[icon-class=fv__icon-toolbar-hand]",Print:"[icon-class=fv__icon-toolbar-print]",FirstPage:"[icon-class=fv__icon-float-bar-first-page]",PrevPage:"[icon-class=fv__icon-float-bar-previous-page]",NextPage:"[icon-class=fv__icon-float-bar-next-page]",LastPage:"[icon-class=fv__icon-float-bar-last-page]",PrevView:"[icon-class=fv__icon-float-bar-previous-view]",NextView:"[icon-class=fv__icon-float-bar-next-view]",ZoomViewIn:"[icon-class=fv__icon-float-bar-zoom-in]",ZoomViewOut:"[icon-class=fv__icon-float-bar-zoom-out]",ActualSize:".float-bar .fv__ui-editable_zoom_dropdown .fv__ui-dropdown-list li:nth-child(7)",FitPage:".float-bar .fv__ui-editable_zoom_dropdown .fv__ui-dropdown-list li:nth-child(1)",FitVisible:".float-bar .fv__ui-editable_zoom_dropdown .fv__ui-dropdown-list li:nth-child(3)",FitWidth:".float-bar .fv__ui-editable_zoom_dropdown .fv__ui-dropdown-list li:nth-child(2)",SinglePage:"[icon-class=fv__icon-toolbar-single-page]",OneColumn:"[icon-class=fv__icon-toolbar-continuous-page]",TwoPages:"[icon-class=fv__icon-toolbar-double-page]",TwoColumns:"[icon-class=fv__icon-toolbar-facing-continuous-page]",GeneralInfo:"[icon-class=fv__icon-properties]",GeneralPrefs:"[icon-class=fv__icon-toolbar-preferences]",AddFileAttachment:"[icon-class=fv__icon-toolbar-doc-attachment]",ExtractPages:"[icon-class=fv__icon-toolbar-extract-pages]",ReplacePages:"[icon-class=fv__icon-toolbar-replace-pages]",DeletePages:"[icon-class=fv__icon-toolbar-delete-pages]",CropPages:"[icon-class=fv__icon-toolbar-crop-pages]",RotatePages:"[icon-class=fv__icon-toolbar-rotate-multiple]","Annots:Tool:InkMenuItem":"[icon-class=fv__icon-toolbar-pencil]",SaveAs:"[icon-class=fv__icon-toolbar-download]",FullScreen:"[icon-class=fv__icon-float-bar-full-screen]"},Nf={ShowHideBookmarks:1,ShowHideThumbnailss:2,ShowHideAnnotManager:3,ShowHideOptCont:4,ShowHideFileAttachment:5},Bf={GoToPage:".fv__ui-grouplist-item [name=gotopage-input]",ZoomViewTo:'[name="editable-zoom-dropdown"] .fv__ui-dropdown-editor'},Vf={Find:function(){let t=D()("[name=fv--search-choose-type-advanced]"),e=D()("[name=fv--search-bar-type-list-button]");if(t.length)t[0].click();else{const n=document.createElement("style");n.innerHTML='[component-name="fv--search-choose-search-type"] { opacity: 0; }',document.head.appendChild(n),e.length&&e[0].click(),setTimeout((()=>{document.head.removeChild(n),t=D()("[name=fv--search-choose-type-advanced]"),t.length&&t[0].click()}),0)}}};function Uf(t){if(Lf[t]){const e=D()(Lf[t]);if(e.hasClass("active")||e.hasClass("disabled"))return;const n=e[0];setTimeout((()=>{n&&n.click()}),200)}if(Bf[t]){D()(Bf[t]).each((function(){D()(this).hasClass("disabled")||D()(this)[0].focus()}))}if(Nf[t]){const e=D()(".fv__ui-sidebar-nav a").eq(Nf[t]-1);if(e.hasClass("active"))return;const n=e[0];n&&n.click()}Vf[t]&&Vf[t]instanceof Function&&Vf[t].apply(this,[])}let Hf=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){let e=this.annot.pdfViewer.customs;Promise.resolve((e.namedActionCallback||ei)(this.getName())).then((t=>{!1!==t&&Uf.apply(this,[this.getName()])})),t.prototype.active.call(this)},n.setActionData=function(t){return this.action.setActionData(t)},n.getName=function(){return this.action.getName()},e}(gf);var jf=["exportToXFDF","exportAsFDF","activeDocs","persistentData","curDoc","execMenuItem","mailMsg","browseForDoc","newDoc","newConnection","csFuntionName","importAnFDF","importAnXFDF","removeDataObject","removeTemplate","importDataObject","importTextData","mailForm","print","saveAs","mailDoc","createDataObject","createIcon","createTemplate","getPageNthWord","extractPages","exportDataObject","newPage","insertPages","replacePages","addWatermarkFromFile","fileSelect","setLock","signatureSetSeedValue","signatureSign","query","addIndex","removeIndex","appearances","digitalIDs","isLoggedIn","loginName","loginPath","name","uiName","signAuthor","signVisible","signInvisible","signValidate","login","logout","newUser","getHandler","importFromFile"];let $f=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).$Dialog=null,i.JsMap=jf,i}(0,E.Z)(e,t);var n=e.prototype;return n.activeHandleFuc=function(e=!1){let n,i=this.annot.pdfViewer.JSEngine,r=this.annot.pdfViewer.customs;return i.getEnableJS()?e?Promise.resolve((r.javascriptActionCallback||ei)(this.getScript())).then((t=>{if(!1===t)return;i.initEvent(this.getType(),this.source,this.target,this.name);const e=this.getScript();n=i.exec(e)})):(n=(r.javascriptActionCallback||ei)(this.getScript()),!1!==n&&(i.initEvent(this.getType(),this.source,this.target,this.name,this.param),n=i.exec(this.getScript()))):((r.javascriptDisabledActionCallback||ei)(),n={rc:!0}),t.prototype.active.call(this),this.closeConfirmDia(),n},n.closeConfirmDia=function(){this.$Dialog&&(this.$Dialog[0].close(),this.$Dialog.remove())},n.active=function(e=!1){{let n,i=this.annot.pdfViewer.JSEngine,r=this.annot.pdfViewer.customs;return i.getEnableJS()?e?Promise.resolve((r.javascriptActionCallback||ei)(this.getScript())).then((t=>{if(!1===t)return;i.initEvent(this.getType(),this.source,this.target,this.name);const e=this.getScript();n=i.exec(e)})):(n=(r.javascriptActionCallback||ei)(this.getScript()),!1!==n&&(i.initEvent(this.getType(),this.source,this.target,this.name,this.param),n=i.exec(this.getScript()))):((r.javascriptDisabledActionCallback||ei)(),n={rc:!0}),t.prototype.active.call(this),n}},n.setTypeName=function(t="",e=""){this.type=t,this.name=e},n.getType=function(){return this.type},n.executeScript=function(){const t=this.annot.pdfViewer.JSEngine,e=this.getScript();if("string"==typeof e&&e.trim().length>0)return t.exec(e)},n.getScript=function(){return this.action.getScript()},n.setScript=function(t){return this.action.setScript(t)},n.setParam=function(t){this.param=t},e}(gf),Wf=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){{const e=()=>{const t=this.getURL();if(!!t&&["mailto:","ftp","file://"].some((e=>t.startsWith(e)))){const t=this.annot.pdfViewer.i18n.t("ui_:dialog.actionDialog.selectAction.submit"),e=this.annot.pdfViewer.i18n.t("alert.browserRestriction-actionTriggered-websdk");return this.annot.pdfViewer.viewerUI.alert({message:`"${t}" ${e}`,level:"warning"}),Promise.resolve()}if(this.annot.pdfViewer.getSafeReadingMode()){let t=this.pdfViewer.i18n.t("viewer_:pdfjs.safeModeSubmit",{URL:this.getURL(),interpolation:{escapeValue:!1}});if(!confirm(t))return Promise.resolve()}return this.pdfViewer.getCurrentPDFDoc().getPDFForm().submitForm(this.getURL(),this.getFieldNames(),this.getFlags())},n=this.annot.pdfViewer.getActionCallbackManager();let i;i=n.getCallback(At.submitForm)?n.getCallback(At.submitForm)(this.action,e):e(),i.then((e=>{t.prototype.active.call(this)}))}},n.setActionData=function(t){return this.action.setActionData(t)},n.getFlags=function(){return this.action.getFlags()},n.getURL=function(){return this.action.getURL()},n.getFieldNames=function(){return this.action.getFieldNames()},e}(gf),Yf=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){let e=this.annot.pdfViewer.customs;Promise.resolve((e.resetFormActionCallback||ei)(this.getFlags(),this.getFieldNames())).then((t=>{!1!==t&&this.annot.pdfViewer.pdfViewerRender.pdfDocRender.doc.getPDFForm().resetForm(this.getFieldNames(),this.getFlags(),this.source)})),t.prototype.active.call(this)},n.setActionData=function(t){return this.action.setActionData(t)},n.getFlags=function(){return this.action.getFlags()},n.getFieldNames=function(){return this.action.getFieldNames()},e}(gf),Gf=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){{const t=this.annot.pdfViewer.i18n.t("ui_:dialog.actionDialog.selectAction.import"),e=this.annot.pdfViewer.i18n.t("alert.browserRestriction-actionTriggered-websdk");this.annot.pdfViewer.viewerUI.alert({message:`"${t}" ${e}`,level:"warning"})}t.prototype.active.call(this)},n.getFileSpec=function(){return this.action.getFileSpec()},e}(gf),Kf=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){let e=this.annot.pdfViewer.customs;Promise.resolve((e.gotoActionCallback||ei)(this.getDestination())).then((t=>{if(!1===t)return;return function(t,e){let n=e.getPDFDocRender();if(!t||t.pageIndex<0)return;return n.getPDFDoc().getPageByIndex(t.pageIndex).then((n=>{let i=t.zoomFactor,r=n.getWidth(),o=n.getHeight(),s=t.left>r?r:t.left,a=t.top>o?o:t.top;switch(t.zoomMode){case"ZoomFitHorz":return e.zoomTo("fitWidth",{x:s,y:a,pageIndex:t.pageIndex});case"ZoomFitPage":return e.zoomTo("fitHeight",{x:0,y:0,pageIndex:t.pageIndex,type:"device"});case"ZoomFitRect":let n=e.getPDFViewerRender().scrollWrap.getScrollHost(),r=n.clientWidth,o=n.clientHeight;const c=e.getPDFPageRender(t.pageIndex);return c.getPDFPage().then((n=>{let l=n.getDeviceRect({left:t.left,top:t.top,bottom:t.bottom,right:t.right},1,c.getRotation()),h=l.right-l.left,u=l.bottom-l.top;return i=Math.min(r/h,o/u),e.zoomTo(i,{x:s,y:a,pageIndex:t.pageIndex})}));case"ZoomFitBHorz":return e.zoomTo("fitVisible",{x:s,y:a,pageIndex:t.pageIndex});default:return 0===i?e.getPDFDocRender().goToPage(t.pageIndex,{x:s,y:a},0!==a):e.zoomTo(i,{x:s,y:a,pageIndex:t.pageIndex})}}))}(this.getDestination(),this.pdfViewer)})).then((()=>{t.prototype.active.call(this)}))},n.getDestination=function(){return this.action.getDestination()},n.setActionData=function(t){return this.action.setActionData(t)},e}(gf);let qf=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){let e=this.annot.pdfViewer.getPDFDocRender().getPDFDoc();this.getFieldNames().forEach((t=>{let n=e.getPDFForm().getField(t);n&&n.setHidden(this.getHideState())})),t.prototype.active.call(this)},n.getFieldNames=function(){return this.action.getFieldNames()},n.getHideState=function(){return this.action.getHideState()},n.setActionData=function(t){return this.action.setActionData(t)},e}(gf),zf=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){const e=this.annot.pdfViewer,n=e.resourceGenerator(Gd.PDF_DOCUMENT_CLOSING,Kd.OBJECT_URL),{URL:i}=n.expose();let r=this.annot.pdfViewer.customs,o=this;Promise.resolve((r.remoteGotoActionCallback||ei)(this.getDestination())).then((t=>{if(!1===t)return;let n=this.action.getFileSpec();if(n.isEmbedded()){let t=this.getDestination();this.action.getFileSpecStream().then((e=>{let n=new Blob(e,{type:"application/pdf"});const r=i.createObjectURL(n);window.open(tt("href",location)+"#FOXITPDFREMOTE");function s(e){e.source!==window&&e.data.isReady&&e.source.postMessage(y({foxitSdkActionType:o.action.getType(),foxitSdkActionUrl:r,foxitSdkActionFileName:o.action.getFileSpec().getFileName()},t),window.location.origin)}window.addEventListener("message",s,!1),this.addDestroyHook((()=>{window.removeEventListener("message",s,!1)}))}))}else{let t=e.i18n.t("viewer_:dialog.action.remoteGoto.message");e.viewerUI.alert({message:t+"("+n.getFileName()+")",level:"warning"})}})),t.prototype.active.call(this)},n.getDestination=function(){return this.action.getDestination()},e}(gf),Jf=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){t.prototype.active.call(this),this._doAction()},n._doAction=async function(){const t=this.annot.pdfViewer.currentPDFDoc,{hideLayerIds:e,visibleLayerIds:n}=this.action.info,i=await t.getLayerNodesJson(),r=this._objNumsToIds(i.children,{hideLayerObjNums:e,visibleLayerObjNums:n});Object.keys(r).forEach((e=>{let n="visibleLayerIds"===e;r[e].map((e=>{e&&(t.setLayerNodeVisible(e,n),this.annot.pdfViewer.eventEmitter.emit("layer-action-actived",{id:e,visible:n}))}))}))},n._objNumsToIds=function(t,{hideLayerObjNums:e,visibleLayerObjNums:n}){const i={};return function t(e){for(let n=0;n<e.length;n++){const r=e[n];r.children.length>0&&t(r.children);const o=r.objNum,s=r.id;o&&(i[o]=s)}}(t),{hideLayerIds:e?e.map((t=>i[t])):[],visibleLayerIds:n?n.map((t=>i[t])):[]}},e}(gf),Zf=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=async function(){const t=this.action.info.dest_thread_index,e=await this.getArticleThread(t);if(!e)return;this.pdfViewer.getPDFDocRender().startReadMode(e)},n.collapseSidebar=function(){this.pdfViewer.viewerUI.rootComponent.getComponentByName("sidebar").collapse()},n.getArTicleByIndex=async function(t){const e=this.pdfViewer.currentPDFDoc.getPdfArticle();return(await e.getArticleList())[t].children[0]},n.getArticleThread=async function(t){const e=this.pdfViewer.currentPDFDoc.getPdfArticle();return(await e.getArticleList())[t]},e}(gf),Xf=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.active=function(){this.annot.pdfViewer.customs;let e=this.annot.pdfViewer.getActionCallbackManager(),n=Promise.resolve();e.getCallback(At.gotoE)&&(n=e.getCallback(At.gotoE)(this.action)),n.then((e=>{t.prototype.active.call(this)}))},n.getDestination=function(){return this.action.getDestination()},e}(gf),Qf=function(){function t(t){this.pdfViewer=t,this.actionOptions=t.actionOptions;const{remoteGotoActionInit:e}=this.actionOptions;e&&e()}return t.prototype.get=function(t,e){switch(t&&t.getType()||null){case"TypeURI":return new kf(t,e);case"TypeLaunch":return new Of(t,e);case"TypeNamed":return new Hf(t,e);case"TypeJavaScript":return new $f(t,e);case"TypeSubmitForm":return new Wf(t,e);case"TypeResetForm":return new Yf(t,e);case"TypeImportData":return new Gf(t,e);case"TypeHide":return new qf(t,e);case"TypeGoto":return new Kf(t,e);case"TypeGoToR":return new zf(t,e);case"TypeGoToE":return new Xf(t,e);case"TypeSetOCGState":return new Jf(t,e);case"TypeThread":return new Zf(t,e);default:return new gf(t,e)}},t}();var tp={error:"data:audio/mp3;base64,SUQzBAAAAAAAJ1RTU0UAAAATAAADVVBZVU4gVHJhbnNjb2RpbmcAAAAAAAAAAAAAAP/zwMAAAAAAAAAAAABJbmZvAAAADwAAAA4AABh8ACIiIiIiIiIzMzMzMzMzRERERERERFVVVVVVVVVmZmZmZmZmd3d3d3d3d4iIiIiIiIiZmZmZmZmZmaqqqqqqqqq7u7u7u7u7zMzMzMzMzN3d3d3d3d3u7u7u7u7u/////////wAAAABMYXZjNTguMzUAAAAAAAAAAAAAAAAkAuAAAAAAAAAYfNJCphkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/zwMQAUHwOTAdawAEmXGgLFAkxKU3Mk6dc6s04bESZmMQHJlnHdmnKhwOmpVby2ZccsgYQUY4kZIcAiDNS3ZhQoGDlrEAiRDEIpdfdh6p0AhdwtgWULIFmEADTKFYQv4WUMAAEBAAwSldtdiwipExEVEVFNISw8tgAAGARkIZiGQRdhkJjWfvH7RyUGAfUuuWTL5w0X/RTdeu6aX6Adf6NhrWaRo5y5yHcsV7fPwqRh2HcnJW1hYRQBIRIhYjXJ1212MQZZLOZ/hSRu/KIxYm3bh+1Dcbt/Xlcbn5Q1tr8Py/uGGG6TD+6lEYsStyHIhyWYfnTxt/IcpOf/1425DuP5GJZSWMMKent9lD+OQ7ksl+eqljn1H8Ym1+H6enjb/w/L+aqUlJYwqRhy4fn9UljCpSP+/7tuW5blv/fiDO2vw/flEMP5GLHf/CpSUgGAAZMWhiMZldMDSOMgUPABaGRbgnPqSmaoJnuYgms5DHh4SmrooGFwTFAImIADAYPDBQCRgIjRRg1g+OGRjM2gyxCOUKzJVA2lEMrQwgqMuAjAf/zwsRSbOQWeUGd2AAJMnIjSA8AAQUCBKCCqMa+YhcUHkwyMHNJBzBSk18QNKLTdAAwwtMDCACTmCghpQwr8UFCZEMoFTgx0FHAgLx0QMTHTC0ImUzDyUILSJOAwgYIJmjppiZ6JHQ8RG6EgWK14GzFxhDUY+BGKiBoIqAAEyozNFWzA1My0oLhg0XBIYBTQORC38lfZZbpmCCxjpwAScwYmIids6uyANMRATCyMwUqNcBjBykmBn+0MgVKYSEtqt1PRCgSD42iorG7bwS6XiqKWAuDUxwYAhAEGCcsZXSohN1xAgAJETkFUJJQkaDC4sPKTa2ls6z/xuKNYguWSGXxFnb9vxJZfAk9Xv0jxvbFlJS+H3NiEXjtDHIy9Lk3HYbu3yg8XiTuO5F4xBU3XiNSV2oHr34foJZar5Z4apO7vd4zClmH2fqSN1f2TWX8lcPPz8/R5Uk9pxJC9blTVO772xjCVReVU7y0NmtnScoAAFxgMgBGya0Gigx3CwsODHM9AoiMj105eUjQYmNvloyuEjVLUMagIBCIwGOjJoLMNir/88LEM2YsEpInnNAAHjOEBdACGejmgjKAzRgTfiDDHzBIQwalCRbkAaJpEVEC8LAQN4QACxwUCApqAhw9WCo4aJGQJBi8RhQ41NAUkZoOq0CA1jAwQRapoLiSySUpnBSUapGsGYKBQO4xpgxiCwcCLyGBGpymEFmZImFLgkE0kEjAQPSjNYGMsGCBwcER9hgwAxMF0tQwwpIhS5R0cIl9luRWlZ6+wwDAgcDBC4aZsmqrAl4xESWVVWysHIV5yuN33SpfMCIKAicW2dpcW1Y3vkawVPIgShUNlyTiSzNVaI/FI0vqG5uQOsxZyUe2JOomIw1O1AIwaGmJyqJNHymyUA3N2H0pWVtfo4+1l53YZRFXmVNJ5svDKm4sqZk48teliGLxXVKEPUQGGK2Kna8y1kTIl8yBEZ/WCzrKJe2lxrLLVZUTGPtYYm4sQhl9ZI56jL3uPm5fJmRI9tbeFdD2syVlhDYIMa4xZerFnOgqMSal7QAACYAQoNjKPfMFhwzHyTCQUMu6MwqvAULDVDOM2B85YrjKRDEiWYBBaCcYE5hQ//PCxC9fZA6J45zQAUxiQkmOMnWCgvgASR0kAS5MmcMEYMOdQBEQkcRGJJGjGoEysMBmQqbHugANgqiaUyEVBQQgBAx0InCM4a8EPIUhzaGxYaWYNWWEA8jbu8YUgGETAnTHEkmwoUDgRjEI4JL6mdbmPXmDELtK35gAoQPN0kM8WByIWWGYFiMCp8GnRCVRAV6FxRgDJpQ4AFPzCm5NUXGIxIIEiEaAiTK4feZVYKAhEISFMyiMABVroIBeNiKkUWlwNiT0QvWM2N1IKeJj8vCiRJaDVg21X8n9FHYmo889pAcPAFnLJUPgGCWgPZHJc06/Q15tu1IzidoZulppRUqTcTuT0alz8P7Vzk0hlGolK5uU3ex+OUUO0fY5QcmZu3SV6CmoKstksrr1LHfp4VP3Mr9/+xDKPR37duP1KWclMpl9/f2//T+ZvVdkEKkteWU0rwi9TDOtYtCFIABMP0Bs1BIVQCAghGTAngoBE4Dl4zD5HCXgzIwKQETA7AlMMkRUxuh90Uk3QcAmycxxT45FxY8/yJgLZlzL8TnXuYlEGf/zwsRGaTwOLAue6ACTSBmwTstKi9gFA2KAAHAAZbKmaFDeY2HaZ2tBVrQDSgYGBUAQ4AwcDYKkYx+Hsw6IUw2HQzPMatAMM0kdBgGBAKGEQGJSojmW6pAqCzS50wuKpnknZn0MJiUOcZj0fiMCuk4S/03wgCxIE2gJhhgBmEwtGeq3GSRwmGhDGPoRGFgkmFALmDgSiAN5e9UNV4Khq3U0lohQHAI7dSpVi+jJ40zLAgTAkDiULzJ5BzDUZjE0MDD8WjAUHjB0BBgAzA4NzDgI6aIwzSR2U83vn75Vl7lw04i1I/P09axIL4KBlHlghgiFw6BhheHBhaDBf0Kg4YZhoDQKDAeMFBFBIDGAoBA4AssvrZd//xx+rjzdJLP/+/3WFjPD8PMAwYDgaUWAAKmCgJmCgImAANmEgOlmFSp7MHLmkABAoEkvnmWBUyk8R/mv+tl3LXf/8cf3jz8cqSc7hf5nP8zv7zn+W7agYDSZHEcDgcDgZGJNsx9TDzafmvkAXAvhoKgUn8a7ybFSKBgBAEIWmA4AAJAEmGwMGYt4OKL/88LENmiD9sJfnvIDISAMmAsACAADzO8UMNxqCY3JDmC8RgCABAYBlKpRZSRlIh3mB6F+Yyoms2py3OlgaCTtUi6Nzpxo28kEDVzKXj8SvuQ0+G3zrGWWsebmaQ5kQBEmBkR0ZwhIUmcaeppDWW58M0Zx6ugmm+TOYYguBoelUmSiPaYLIVhlYiOQRk7TawmVW3Vhqdaky65TGWcTUYGAe5wVJRGEcL2YcoCphyA3GCuG+YWIGJmGmiy+OwXHL36uZy2GYpP4/3KoZAo9Zi0hEmHsGYYKAKZhnhJmDQEWYfYdphAgEmEaB+BQGzBVA3MNAHIwHABU5XfhEAO5D/ZHbr7orDMLm78k7LMedrY+WvSgScBwCBgXgShwD8ohpxIm5Lvv2AgBFLIEuY6r5y/9bu4freOf7s8ztawyyt/97vFTuO/6VjKGmLvZfU44cjQBsvtILqb0c01h+Kmdi3e7T5/jVynrNT9/v+0GpqJ53ebzv5Y2ZgUCAVAgMFIICEzHBkwUC0xYXU+0NYCBKYiGqa0D2AidIhBMbASSMRSL0uyF//PCxClfZAZ0Ad3YAUEDA4RDAkJK5lGBQXApHkyJJIZCgaA0EkLDBwBNMCwcTFBqm6kKloBogWgzJQIqh5ADgZQMMVyJjYgBDwWOjBilYUISjExswlsN6BwYCiEACCxlYhDBUPMaIzAREBBBWCMVOFCRgqfAwgMAJoHBhmomQlCIZyg474OCwdumFlCV5c4VIC8gVDWdP8ASYaDBI4QSI2jVkYmQAJhS4BAuEIwGL3ZkTSqaRuQz2wpg2NLgGiq2FmrjCpIMDrXYaDhtPSHqezChoRgJewJE2fKEOIm8lgrVDjQWmwLBzPMYQ0iflRICVZVAeFqkuyqgotTMYd7ll08FP3HhZ1I4FsbpatiWP9DMVci3Aj1XbV2HMoo/sc3Zcegn6fuo1K4s9N2vM5Uz72rzgcn8e7huTTkQqwfGY3KsJbDFyjrzNHepqSVRmMVKK9KaSWT2r1i7Lbuu16aeuLwKC04vkIzkPMk4zQrA9KDUw6CUwVNE/d8w5YGKDRDRwFKkY2xKbmkOtyFhJ/hyRDBD+ZyEcVggoMUyKBxn4BewiP/zwsRAVgQWfALfdCBLutIbiBeiQIQ0UsTSMUHMMCJpTzkMBq5mQyihEnGDxYmDYiGCoAIiDYGfFDMdYLQIogULFg+BUSYyCgyDTiBxUwBYVIA4Md9Wl8W+OqGLBomDJujo4eOFrIsx8KoU9FeqLCAYMDBlaVgk5S4AsbLUSi0/M18bbHJnHdNQguwvpoa5VZg7u97+rmaVGMnglQ0LhqbJAz9LMkaqTQFiw1ZVWi3wuWXoalmC0mhyaW26LVSilWNDjZgG/jCZVLqePt49N/PVNT09iEx/GV5RWVx2mrflM7k03N0tNS7lMbhOdqGt0VnOXw5U+L3a9PO5yimkUNcwuXZVvVDLsKty3G6T3hlb8VJe/Ev5Ny2SZVqSXzOfK+Wt473aEKGy6IVGEHHEYBgmYaPMcCEaYPBYBBLNVwDAwFkIIGKYBsHcVRZsEMiw9ICxIADF8P13IkmPYsCoKIklm3WRLJBRUcka+l9JrGEYRiQcA4ISAApgmnlSQGDlxjLQiGGeArAEQ4VUlioRXXbIAmTU1tjxoxYkGAhABR/V0Jz/88LEfVS0FnwE7pk8ERD2IlrguZKBphjr4Bhc4EJGwoRHAIkAgmVFUIsooirDR1iwYJTOFk7/vYHbQY7L5oREBoMBEgWHLzTrkHwxBsIhL4MdLPPwRC0piUSYMM3bSoXfbNSvRTlvIAlw6HgBTiGWMSFZUGU605VC2w9nobnLDlreder2XZUVNcpal6BXQlVd0oAZpGYahl2YftuZuD8XamESATLuLdcbgdctF3IulfVGVZn25V4uJOuHh9x080kdOVx0zqq3I4nF7+GpNJw2KZahYMC02nNzo8SMtNTmJJYhfkxBTUUzLjEwMKqqqqqqqqqqqqoluQ+g0VSaDiUIguK3g0KXwwRGDCkaHEymoJAYGIS27a3YAZAYUACSqqphIYS1iBlISjAEU8gpDaURkQL6Tji77xoAdrOFk22UxQSCsiAyqKiDyhNOsExccIJOChSUJtNCrqJusBCXaJmxUEgOC4qHF30gBxFfYOmWuXiM+dRJk4HWR2KClzthKyFVXjnB0x6UsnrHQQgNERC9khKc+SSUu3AtS1L5uQxZ8J1J//PCxKxQTBaIBuZe/NaPA0DNHIsJNBj/tju7Yj8E/SS+Fqbi0choMQ73i0arWtJy7tEy0Db1JSNT6cYGobVEV+HJPw0DiRBpBycFfN4bsrC62UauWEG1vXF+4zrhpcG5mT7ZGXTCulQpynZ/M3zk1gxUwwYzd+0vpCrQyO3Ipl20oTBc19/cuS8eJxHswahubA/mMNDmGDRzrHcJIMNitBs5VUxP0qAIiIQEwHQHDAaADMIUpw01Q3zAnBVBgnx2pUGJAEAR+Z6EA8DBYDAYDwGMg0CEskFIXAhiRaumGBw4OaiEbCwNBR2QgYcDGwm40GkS+pik6nSZ1MA5fMtBhCOs4NGCRYXNaAlLwSFkVAaINCAkKCsgVQDQDTioyKhQ0pgICEAmBkQKMyCcBKwAEkmSl2EYkEERCJgQZBy+bAECAtHisA1hgQ8Y6BnDDoVEg6LBAQSCossig5HB4MMFNQAImNAy2IbNtCjAXQqAgEBQKECzIRJj6Tia8NV2sQCjCX9TKfEGES2y7AwEpLGoCKtsNiw0pqrXcj7aGBhS8H5MIP/zwsT+ZMwWbAD3NlBVrhEIMRHQJHMcBKRbxe5ddAzp8oYaJF6dHkaAGCwFSx+7UkUAXIhEoFa4/cLchrb1y+IqxMyfiK9tRa9p22ZwtwNPZUm5yPbkER058pxh61C4egLNyYap3Esyycymm+g+jbDTbiee3RgqzEX7jkPWKO7WrNvWiE3Nv5ledl9oGf6kzq2KDCNQ7AM1I5RbnrNzeFnt/qoOkozAdDZAQXCoTAvA7NMcEwwhQKTBlAcMfAF9cZgZAMGDMBOOgGF8wCAIxwDAMGCqBkKANmBOBKYPITRgGALGBsBAYdAPIGA2L1gIpMJDUGjUkcx8dAwUOACPCKhm8cBlg0QEAQaTA5pIeYyugaQMIAjDzcDRhjYeABoSLzBkwwaUMrGRYDTLIlJAGyAygLCDoSPTOAQwIuBpGa4kGHFzQzBRAIABJvNHIQCVgYCC1KlWZWImxsgCGCh6Gh4VFzGQkiIwwAeUwYrQqMWCUcmeGsBAwpDRADgZSZEykREyCCVq1nOfOGEmVFFsCwUYCDBgIHDq7U+ha/c9h40AOIr/88LE/2b0FnADXtgATf+LKaAAR62UQjjxI0vtkRDaA5tY0hPaFArptpFWiW6j8kQK154L8Qnp2I/AvYYkbCs5Io5WV12KJmwO3sxSdkv5vw7cQpIAlboU83TxyRy/CET8teSYkV6YlbKs67XpZYq3Y6tnKYeGG6PdHYlL2UEhe+NRhtb0RiNufo7MnpXifqD5x06CbiF2LT85fnr0a07NeNz+Nmlpbcut6gEYQ43poHJHggGIw9wwIarm/+UcZKgPZhVDPiEFRmStxh4g5mCoHsYNoFhgRgsPfSGNxunCipAtMzCIKTCkbgwj8u6MLSiNWwMMfSWBIIDQJmAwF5d4aFI+YsDSaIDgabFGYDgwkOYChgYSid/47NHR8NgSeMXSiMNT1MQhdMLwDMQhRfwdAUwyF/lbK1VMZjnEkEMHBHMm26MymJMWTJBIlmBYVGF4XGHIjAUMDGMYDA8O3dx5r/35g2exlOLZiQbpkYboYUgYI4FA4wCGoIGwGgQCgKQZMFAlMKApZinyYAgwMgR+v////DjkMsQ9MOQUMBBaMWSH//PCxPhnw7ZQA57oATDMGy8piQGZgYFYVBwLBkTDKUAuYShQBgPUxSOFARQZMBgFSRoXVCoEJpL+///f////+FwCYACgTJAEGQIAIKlyQCBRVB0Kgk5ZYAQtegssoLgfDMNSuHXShTAX2kTAd7fWU0r6//////////+IQBL8l0QcDrzFQCCYEEvkx1yhQAVFIuRACs9SoCAWtjj+RtwXlYE0plymS8kimXTVO7OMqnppypFFTEFNRTMuMTAwqqqqqqqqqqqqqqqqAlZVvVpAgyZUZmWDoYCGKlBmZgZKJItAQdNXgjnaQ5lyMhAzQGc3h1NcMxAPGhrxoyaaEcmXD4QCGUohqKcZ6OEoqZcgmbMGPDA4E1sCBTEBwgC3AGggAFMIFBQFtC3RgwRfJ4y6pd5AMmFC1yoqrpljSlMUxVNYwgmLTIpOMxkCijJljJiE6zCEzMFzHA1WAUsZxmb6GbpSEFDOtDgvjYmC65lFpqWxu3Rs0QYPMwxN05NURHAxnVRnD5mCJiga6DBjjJkAUSSdMMNAQJ+qbcZf2W3I1GaWl//zwsTZW6P9CZXb0AEfyy3jVjMtwlT/S67GY1TU1reONa1NO0/1uGXJh25DUZjMts1qamy3Ko1Ls5S/strRqzrLL8asMxVuKQqYMUUyQeWtBqmK7nejVeGXdis0/0t53//VNaiTWmvUcMuTDtA/0trU3caWlpb0Ray12ifZyn6vxF2mdONTuCzl+Zp2pbzLv/ulszLku7YdpyoeoXZjVr4ooKpMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=",warning:"data:audio/mp3;base64,SUQzBAAAAAADBVRDT04AAAAHAAADT3RoZXIAVElUMgAAACEAAAPDlcK+wrPCpMOLw5jCssOEKHNjLmNoaW5hei5jb20pAFRYWFgAAAApAAADY29tbWVudADDlcK+wrPCpMOLw5jCssOEKHNjLmNoaW5hei5jb20pAFRBTEIAAAAhAAADw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUWFhYAAAAJgAAA1RZRVIAw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUWFhYAAAALAAAA2x5cmljcy1jaGkAw5XCvsKzwqTDi8OYwrLDhChzYy5jaGluYXouY29tKQBUUEUxAAAAIQAAA8OVwr7Cs8Kkw4vDmMKyw4Qoc2MuY2hpbmF6LmNvbSkAUFJJVgAAABEAAEF2ZXJhZ2VMZXZlbAB7DAAAUFJJVgAAAA4AAFBlYWtWYWx1ZQAhewAAVFNTRQAAABMAAANVUFlVTiBUcmFuc2NvZGluZwAAAAAAAAAAAAAA//uQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAARAAAdYgAcHBwcHCoqKioqKjg4ODg4OEdHR0dHR1VVVVVVVWNjY2NjY3FxcXFxcX9/f39/f46Ojo6OnJycnJycqqqqqqqquLi4uLi4x8fHx8fH1dXV1dXV4+Pj4+Pj8fHx8fHx//////8AAAAATGF2YzU4LjM1AAAAAAAAAAAAAAAAJAJAAAAAAAAAHWJUiMoVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQZAAI81BSOKmGTTAAAA0gAAABD/09FhTGAAAAADSCgAAEAJAVbVtVpKZFAPBHOIWq2r/9/TOMqjc8XwGpRbVm9nOIhwsIPKmlLVlTqk4uIts2C6zjCOE6TWIRcTihGldXJzE6/9Xu5ue5Re2xf91F72NzYLpMubYnC/8zc3JRacSI1Llm5v+5ubjbcKr218Dh21VYSCYlBMD5PfzU4Cw/o2wXxLBoTIvqSxHecmxIdX/S7B+dk+BkzXnZPilOZiWjcbucKDs/YZEMRyeeVX4weOQ2P70c6862s67FJ9juO4zisY4Fi9X0kV5zfXktX0ziwwP2N9gSCYeV5iI7fmWKHZPfYcxYspkJmSy2/Hz3Do0EgdDgjCIRAQTrYEsCm0aRgGMVvUeViS3EjDGkRylySjhmxgdxXG/fuMiSRxdNidBmjkuuwE9DCzgACh524Etu/qKQKGCGWCgu/cTj0zSTkIrLFQBQplk465sKGgVI5TIeySkfyWUsDwmlS4MgQxBERJGtCvGsqtyilD8zEtp6LO+rhOtx77bvBFKSekMd//uSZEmABw1hTG5nIAAAAA0gwAAAGIVhVfmcAAAAADSDAAAA7XlGrFB9i3Us8zl0sYApoXbfNphjil83vpu6jd7tLe7Uln2Kt3VJR7uWtloyy6a7E0v2TwI4brq4pf//////////5+HP//////tssjF2wzkyiYAQAQBRngYBAUAwGkHUoYnESIx7LX2ulnAECj5bFhUPhACWAlaFlstL1KXQU6SkQcdGWRRZdkAR9lTeO+XrcJbwQJgEu3FJFYpZ5dKpUJKwxfHH+x+KQPKKK/J00XwjrVWYSScfnt6iksUpLkowuyuT3KatfiMQy53/ktNUm7+GqXCT09qNWsKaNSXnLef4Ycp62X0EooOXr04+1FJqCdlupmzbsW6etup+dr62W7n4b+r/43c8f//////+1ij6yyI8AAAAAJmuneg/VEzFQEeKTqBQDEqDqVrgJqhUMARsYFhmLYpnAWLGKKRhIUQhxiIgYaNmhG5sAjByWEPJjRJ+nKW2NBa73HpZTP7lqMwoBF7GGN2et/KRhqsIkOlz0vlFmLwxDDwoBQEGlv/7kmQ1hvYzStNPb2ACAAANIOAAARVdOU3OYZVAAAA0gAAABO1xrBLPgiPRNMVlLS4Bp2TTWD/OnA09RQLbtcvRvLnMr9itTUkZkeql7dqpL4blj+UWGu00WlU5Kae5LK9PKrmFPT50dWlraxzq4U9vDD8+6u5Uk0iMZdj/2/+E8qAAGnjg/chdiKQM8RZcw2jU4pDbiDnQ4lWIBmYJpAVA5MAJibUeYe3JgJgkhGbxXF37ncu4y1hICCLbyv7q1pdOonAprrWIdoLMaXkhKOPAlFPHtyO+zqRMoCNyu/Fo3yasOCiByW52t8vRJVNpEm/9bxxjMFQdK8Zl2+uror6tqfPFMRN33LLmoDYDiy9v8xQiUHcc1eZd7vZv/w12uTMp2gVO4C4AFgaqLJMAYAACAAADkWKMvaXbdpCe8CW4YABk5It4snXkYGALxqoDwuJIsAj3G2mt9SQ+2r8rHMQBRZ8st6q1Y02BNQOB1atjr/rtLMGgJ87tacwyyX2ikWta64N+9N+9aEtUi3Gfuo1qn+MJykxGnjYVhoCGrN9Rb1//+5JkO4D1UFfTe49HEgAADSAAAAEVIT9HjeF1QAAANIAAAAQrutoSjEIkUB0TFXLFi4hiFbMtiyi4YepW4MQQgUqan1KE+pMTc39CCIj/enAs73/qMfMfIAAAAAASrePMwSwuxw0bBYXOSQR4MgeO3mxMDUgZaVmVnQEGEV1gViMoeGqmOF00MYYMjbu35XjNI7AqTfYT2Vj5XEW4SudrWq9FA0uR9UFdWb+3WjyYggKzVtbvZzGcgtB8WTKZjG/nT226M/X7Oa1lW+5N1LPP2fYeBIMS2nq1uG8fScfW10RvTDEhTJLcXSwxLzptZxhyp1WVzLUuPuuO1En4qc4lSmQAEAAAAAAmIwa6Cy3jhuUPiSESbmmbOQNdjLxRsyR03Ng0ClSxY0jguUL2MIXMKeMEDmrTdS/+zmbYFY2cVkg2lit0kHTKvryy5awsq0fQ4jNgB/FubTQuLpNQySrrgSsVvn831ONlVVn6wrcn+7++K8JIg02W6GCsYNTis+LnSDvhMlikI33fwWMvR9gbE87DK10pXL9l8Nvw+7I0njDi//uSZFED9FRD0nNPTTIAAA0gAAABEUEvPgykdcgAADSAAAAEPKkUAVdLk62bufGkvmDLmgaGRfzJVW2rmclNrREBRdk1iA6kWsmPxFCwhD6ECASPoCoqZVILApphps+nLEBV9IVftNybfGJk2qik2cVDyN0KqPGJB/Wj5nZTUeirQ99kilXPilC1JvX1MkFgW9M9uS9WijVIAAAoTqNmBhM+noBoC7lwS9A2kfNpCfDqtqDvjzYS0lhTTr6bRZJ4MBDWpfKSRW+tNZ0JdR9FoESoS5ZNBUoEEItQojmGniTQQ+UEl2jbC0q0rXXh3y3h6ddciVZ2TBckcziirgehSNAZ//BC9VFvbbD+cdzXwGIUtXJkggAJRl0QUGadflbKnPS9fCGpVFokuZp8OkA4nWgEGTxCKh4gEIZMo3QPQuQZSclrRBOhIVkwfNVbmVlRMyqowXWXZRY487H3C4MAjCh934SVB4MMiU7pzLTUxkJIdkTZZNuLmDTXU1EBKdsxfyYRNaZebMNoNoF76p5CoAAAADFBRYyxmsMXkErZDFXWev/7kmSFg/PjStBDDDSQAAANIAAAAQ81GT0MJNFAAAA0gAAABKHn1dKYo6WMhkGwZlZh+IjEkaFIhx1RImTWSm5pemaqa0tganV45rygnCp5BOcqu2JrRqSubsN6cJM0rOC87KpQIunHIKrtIUqe+ElJtKu9xtIi9MqHIehJgdJn8l/+1v/oACwIIGAAC0nnp44a4wsCsLQO5BxkypGIg9lMw3htzpmzrSXtgSuahaJc2lQ1AdiWU4OOHFZgRtBD7SNht6kx0CmgsKMsGLlujJo1SXYYoZ+kj4ACGCAmbBlqBADoNWqt2My+extwucHgQXCIapaFvhkDAFBGozLIaq137qX5flgnokmY0KhISPHi4OERN5WdSK7EpZA8Ay3CM0taWO5PwwkwOAlWp4GAKFwRZi3QLgZa+jty1wW4QVA7k8yfi3J5Rbmrkss0/QSJac6NE0FDdnSqq11Nl0TP1qb///////7n////////8YZP2mdWhoiFhWdkRrvNrbI2gADIQYqAaiJaD0cpgMDy+YABJhMIigBQFGAwUYQF5UIZlSP/+5JkyYADtUFP5WEgAgAADSCgAAEdXYEbGa0AAAAANIMAAADhAiMHDsws9M7Ozt3A0sHkb1Gok5sRwBA00x3MxRjVR5f0NNeBwuRAjS1vNCYe87oz8qcJQZWUu3GlrwwmVRgQAFgkvbEZxpTYlBntSbhxpj0PA6q5SIMWQ+S5XK1T9Xkps7DQ4Ga5AjXWT4NxdiBlV5BFrUq07NyNP85MBuBDTbvi6kMZwbDM1DbrZulp6u1ZTr62NWq4rfNbcedrUMzF5dduXcKWcs6q1Q0HcjKf3EhxONwOCQ2GMJAkAgAE8beG31SsmvGwQ+6YODjQhowECDB2nZaYkZCILMeNzBAd+XVP9kxb1FIPf9y6wFINAgAXKxLveliiYEArHAB5csYlMUovzDCwyLwGPJQAYAZASaaeZisGQWuUHSq4gRTGLNPVqRTZgrSLAMLRmR4KBkeR0FWiXtJjluWw1Rw/DExFJu+4S2H6aarbDK3oddqEtu0d/KK3UwvZ9tZVXCtQdBeDrvhH5ZFm3jzWmCv+0yIOhz//n7//905JG4KpalLT//uSZNeABwdJUP5zYAAAAA0gwAAAHFU/M7m8gBAAADSDAAAAZ0e4W/dE883Uikows2v6hifgqH76IEAAAD8FUBYq/bwTjiukyyMx19JK6anbhOyygIye4gBRn4QQuJLlWaQ9Tef5TWgn6n3BVPXZxqZXKlgWHiPY1avFwWE8ag9nZQHyfrCXJDDMsb4sK2rH1mKp2TotdFGfbaquiJ1sqjnmkcZsMZ0p85k64rCAqfieZXNYcF0ha4MhUSsU1G1WlmkzGaCamUYch9phFLgv6BPYvk6TRxmKM+TXSa4VzabsiPUDcwttUQ8guLdElhv82vSPOS0CQ5oiAIAGFjEQKjURYEqbyJjN6jkUDS3wF2sOiUs2Ss0SwIIChzo5Dxql4JQp2qT9qMmoq+mZoGGkNtrh31CCKDCVP1aMTRUlOYZL7EMgdtLhR0tVvWnmYx6xlBrLMkyxsDF0laVDE00KNMUg9G5M71O8LjkL5XTVO6ABEQAAAAMEoxh4VBpHvglBugQB4LtD0PUQtitHcL8I4Ogv51nGJIdI/znW106HyDiAg//7kmS0gvXhVEzHZeACAAANIOAAAQ8BNUXHpM/AAAA0gAAABBBml4QPYmd4wHOZpTjUBRbgOosqTjBpkqeYy3aT3p3aO0Z3b/2zd2aHxHTKxHi3cvEgM9OxTkSzdc2bgwhDpvSRQQKg9bFSKuhe4pUAQRhlVdUkCp7GKB8YWahkQLpyiQNMCAFW4woNBATQ1vnpngbnOJqsJJoATUcPDoi5A6RtPjpiGoUKTHWeZhg6GpgklOgYNAO/bXHbgB3l6M0bG762mku0tEuuGDsPa2/S4Ef33X0vFW9myPaDSChbB7V0WH7ijW1lo5y+XOxSx5+AKGMY5vQCeW1pYb1vVk5+Oo1hMQlNqLFjeMPOwXfbYpNkKpy5SzeWZWa26savjyd5O4kGhOFAA0IW8tYqS0NAAgAAAAMWBFdRF9YKWWMk43AHTEgQBQAZPAbpF7jHdJNumUw8CJIw9iA0DzCxWBIRBAEQrljV0nkGjLQDX40F7qGVU6TJEfZnN8lCuhaRm8Yk0GRmXHMchgny5D6v4tkEVKqK4Ze9LyVwagPoF2Ii7z7/+5Jk2QHz6EnS8e8xcAAADSAAAAEYBSVJbmWPwAAANIAAAATx9eZuJLkb1rcdc7QXPT4axL5hucuYCkHDcgo79PVXvhf8/XHIMwaOEMte0ZlQsOYsfgtE2v/IBWJaljkbR6fq2FTLDJ2vpt61bX5T8v1/cnOlgd1gxLvyZSwCAAAA2bjLHDrrLU6MYgYmCjcHApq60jAhNONlEDCNqDtMfiAJDBlUxGVAdDMjwtvgZZHeqsfzOMrfYudBtbnMZ2XIIlLKLd+kT2QvCKOvTaxbkXeJDtkhNNOwIpkqMoAweXY4u0xJEFRxmlm/H2VOu0Fl8j+/DMJay+j8WMasM2FnwkShUMiA+QPihyElG/7gzKEHLkTXlresUDToQRfMdybFBZF/u/8OVWtQAgAAAAAAAUiGr5l2UCDAVDFZwslw4Bw/m6k67AUGJ0iSDwEg2o3idKd4MARq4VsOma16bwFCR66rvleZgoQmSmz3CUWoALhzmtyuFXhGEaQF3tqzUgsxEziKX9DsxlecICiNfyqRu9thooO396pjQYTitzyZ1rkz//uSZPkD9mNRU3OZZVAAAA0gAAABFVkPVc5hM4gAADSAAAAE9M7tH+vdQfSUdiFnF4ZFnCh5hUIMde5K3DcLSOfTt1Gwe7uXUpZqt9bbufq3rt/+WO//LjtPv4TPAhP85rPyVoABEwExWNuxI3ySvMTBHAyBhcDUGV9w6pUYCAecXreYBAKqZT5cYwPARyTAQQhKFmfQ6+rrUccHGwMQ7saxg+346lM0/34rTVAo2wfHN+J+y+4umyyVXH/qx0YMNjuFwzBjrzUpTQH04HlDpy3T/Er6/71aG7tLOA1VUMeudnpVgX+tYfn8xcIgYpGtXu8iVz692lxwjbQs6ZmJgOgQRSPixW0rAyqtt4Nx2xFOerBdEV7SFu/b0Qv/+frV8tTyykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqfQCAAAAAABqtFdpCy482NFwwspgMLodYa1SDWqAwIHdFQBgvzBeiCrgA0IhE4NBbnc76h4s2z2zf7ivKtf+bsbmE9IVV3J9Q+/gsmM45xq7BQP/7kmT8BvXLWlR7mVzgAAANIAAAARgBW0ku5XPAAAA0gAAABMUA9RWTxCesLAGIiFWeUZ+gUoKEyfH6mUslBMHP8bXx932S0VrDsCGDbeJthQPjronGBwEo8fEPCALB8qQ9JDVC2/VVd1Uul89s8/+9f/lSjNvsABKA5FGIsndVq6QoCwYsYE0BUGK7Y0IQeYaoxoOKmBhAWrVjKAIRApXZVtBzsE24lKaebMRNXuNPTWvxQpnO/qVVET0odVbExWQbMlBpuqSVZx4wlD3CXteh6H50ZBA2yENarf3gXsLttpFn9fa88K3jMDajZlGdRrAiBdWU/PcwCgVY3Fl0ZSZ+p2qcCcK6TUXAGNarvZUK5BOLmZpTuWfHbaCCYVI1I49MQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpJUAEAAB9AABeJgJp1kTHLWAUPMiFsOCbponvxAzeGGSQc1Co0H2WQA+r4x8QJX5znb9WmRyT5VUcOCIrI3oTNo6O/y22J2a/f/83ZREn/+5Jk6Ab1HVbT65hEcAAADSAAAAEVbSdHbmUxwAAANIAAAAR/MKnI4FWUmdSU7vLAjxb28a3aiqzN93M7X0KQsD/ju9uAmn26mvz0b3iKg7KjTbZWDwkMV1qKmJqMHmQ2FAXDxBTJcBNl0fmjAAAwAAAAQJTsGQHHl9jgaMA4oRgZrhEGYkIwCKAoxnNzoswMPhEIAiJi8xYMlzTApvDAu5Fi7SZ3DEPSraRk28ZfFsUX+M25VYm2GK+7fxkdVsZwqtChiT1JywIIkI2hxrOHo2wsCjMSpppypVEY2GLX4znuUQY+Is1LLFJH6FYAaEfOGKs5RXc8refb05XaPB0/rCtnYvfvLHCRABnF4K05G76zZG/ba2/nXjuuSKuFT+pFTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUpAAAAACoAAF4oEZWsKxqZboxkzdtVDEljSiKppGDKZ8AghC/z9xpyHZBQaRBdNnzW5tPpjzeTL301Z//uSZOYA9LREVHuYLHAAAA0gAAABFoUtQ05lM8AAADSAAAAEmE9/3tVppxtfz8tI7qmleGGV2UEgNEI/3uGZ+I11WucZPdLdqxukMkUe2fhyMBH7gw83oBV/1fd/rtUXMyx8XEzViqX7w+381u81qg64FJqx3D47AGAAEgSnHKLk32YpvGdRUIxvGBgBc9pjxGCgkHDwYlACOs/LJk0k7iAUAwFovPSm1SEqR4ER1MyibvNSpfvXLOmqKEUm5dWjESMUWAyuxPyGNjhBg7THehcXkbcQaRmt14cJiVpppDN/HZdTzDZQLMiDKc4ei/IZYNIreNDK62IAETmxRhITMecU9KFVG2Wji0C7PwgQio8VG8BEkM6qnEy1vOfuM3/mVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVSmAYAAACAAABUoAKqun9yWLLzjUtoalKg0plLuGGhx+wG51SihxmEKQ/j2OO98IQurKIjWmZDUg7HX//twluVnerLxojSfCYxp6q//7kmTchPRvTVR7b0cQAAANIAAAARUtNUWO4ROAAAA0gAAABAT3WMqeesugLNnJmkqZ6T13c7dsyhfbmZa7q/K1g7W7V7LUTfliZsgYlHJCwqkaXpFeHPIjjCxKLh4+ULDDt7nDq/UmAAJCGITwoAmsAgAFgcm9nYnDAwOFqhphkTmPzSbR8Z7QdGSBcDAOYLHZAMEakgb7KoOjedE4RgWX7n8bnv+1hrNq5Z3Mu2kE887B0tvsHKhSizsx5riuIRNDhWDSqal7GmWp1DeKCRPtDkpec8mgx9Yu69I6gp+OuBIofuwtP8u9Tuo5HJmWihZqKagy9MZ/fr27FSxFf1fy1OUE/nf/l3Kkzsdyps7NvOraxoLdb7/eVdVcbrERthVMQU1FMy4xMDBVVVWUgAAABJpLQABGcoWEIyBAUMB0BmDgYYmJRmNamJggZOXBicFiqzGjYYNsoZNQriTGgBMJV0wgFHBB5nDRDOM1Q5iRIAPLPuMEIEwc2ALBQCG1vP0i++jsXFO3sTTXfmsR0wEo8bNGoRItzWLADNJQjUx9rzv/+5Jk5IT0cUPTe3gccAAADSAAAAEXJS9AlcwACAAANIKAAARYltbRATG41Cih6eXKx9tW6oAHMZ8s9nCimlH2KS9kTWhYGq4Fm21FgduULyc6NR9472U7ParU3c9WcblWvLKsYgSYf+V08CTFLQV5+H6TWM3b7qtZqS+vSYz93H3HgvF5HUkz/wHNu5GP/////////+5c7///////4S+X25ZSWJfT26SksU9P////4EDGraAAABARclN0elZN4txOjSUTeT4gw9RClUiRbQcoGUAIRj5cuXLjIyWrQUFBQYKCgoKN/wUG/+BQKCisjgoKfF+KCgov//IFFfFBv/4X//Tf/gUK//v/+FX/+kv/8gUV0FBgr4QUCiugoMFPCgoFTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//uSZPmACBVmUmZzIAAAAA0gwAAADew7Vbz2AAgAADSDgAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ=="};function ep(t,e,n=[]){const i=document.createElement(t);if(e)for(let t in e)null!==e[t]&&i.setAttribute(t,e[t]);return n&&n.forEach((t=>{if(t)if("string"==typeof t){const e=document.createElement("span");e.innerText=t,i.appendChild(e)}else"string"==typeof t.html?i.innerHTML+=t.html:i.appendChild(t)})),i}let np=function(){function t(){this.storeMap={},this.itemMap={}}var e=t.prototype;return e.setStore=function(t,e){this.storeMap=t,this.itemMap=e},e.updateStoreByElements=function(t,e){t.map((t=>{if(t.type&&"gap"!==t.type&&"ok"!==t.type&&"ok_cancel"!==t.type&&"ok_cancel_other"!==t.type)if("cluster"!==t.type&&"view"!==t.type){if(t.item_id)switch(t.type){case"check_box":case"radio":let n=e.find("#"+t.item_id).is(":checked");this.storeMap[t.item_id].value=n;break;case"static_text":case"button":{let n=e.find("#"+t.item_id).text();this.storeMap[t.item_id].value=n;break}case"edit_text":{let n=e.find("#"+t.item_id).val();this.storeMap[t.item_id].value=n;break}}}else this.updateStoreByElements(t.elements,e)}))},e.getAlignStyle=function(t){var e="";switch(t){case"align_left":e+="text-align:left;";break;case"align_center":e+="text-align:center;";break;case"align_right":e+="text-align:right;"}return e},e.getElementStyle=function(t){let e,n="";if(t.width&&!_.isMobile&&(n+="width:"+t.width+"px;"),t.height&&(_.isMobile?n+="min-height:200px;":n+="height:"+t.height+"px;"),t.char_width&&!_.isMobile&&(n+="width:"+10*t.char_width+"px;"),t.char_height&&(n+="height:"+10*t.char_height+"px;"),"edit_text"===t.type){let e="resize:none;";t.width||t.char_width||(e+="width:100%;"),n+=e}else"check_box"===t.type||t.type;return t.align_children&&(n+=this.getAlignStyle(t.align_children)),t.alignment&&(n+=this.getAlignStyle(t.alignment)),t.multiline||"static_text"!==t.type&&"edit_text"!==t.type||(n+="white-space: nowrap;"),(e=t.whiteSpace)&&(n+=`white-space: ${e};`),t.bold&&(n+="font-weight:600;"),t.italic&&(n+="font-style:italic;"),t.border&&(n+="border:"+t.border),n},e.buildWithWrapper=function(t,e){let n="js-item-wrapper";return e&&"button"===e.type&&(n+=" btn-wrapper"),ep("div",{class:n},[t])},e.buildCheckBox=function(t,e){let n=t.name,i=this.storeMap[t.item_id];const r=document.createDocumentFragment();return r.appendChild(ep("input",{type:"checkbox",checked:i&&!0===i.value?i.value:null,id:t.item_id,style:e})),r.appendChild(ep("span",{},[n])),this.buildWithWrapper()},e.buildRadio=function(t,e){let n=t.name,i=t.group_id,r=this.storeMap[t.item_id];const o=document.createDocumentFragment();return o.appendChild(ep("input",{type:"radio",checked:r&&!0===r.value?r.value:null,name:i,id:t.item_id,style:e})),o.appendChild(ep("span",{},[n])),this.buildWithWrapper(o)},e.buildStaticText=function(t,e){let n=t.name?t.name:"";if(n=unescape(n.replace(/\\/g,"%")),t.item_id){let e=this.storeMap[t.item_id];e&&e.value&&(n=e.value+"")}return this.buildWithWrapper(ep("div",{id:t.item_id,style:e},[n]))},e.buildButton=function(t,e,n){if(!n){n=t.name?t.name:"",n=unescape(n.replace(/\\/g,"%"));let e=this.storeMap[t.item_id];e&&e.value&&(n=e.value+"")}return n||(n=ep("span",{style:"color: transparent"},["A"])),this.buildWithWrapper(ep("button",{style:e,type:"submit",id:t.item_id,class:"pdf_js_btn btn btn-outline btn-xs btn-circle"},[n]))},e.buildEditText=function(t,e){t.readonly;let n,i=this.storeMap[t.item_id],r="";return i&&i.value&&(r=i.value),0==r.length&&(r=t.value),n=t.multiline?t.readonly?ep("div",{style:e+";height:unset",name:"",id:t.item_id,readonly:"true"},[ep("pre",{style:"white-space:pre-line"},[r])]):ep("textarea",{style:e,name:"",id:t.item_id},[r]):t.password?ep("input",{style:e,type:"password",value:r,name:"",id:t.item_id,readonly:t.readonly?"true":null}):t.SpinEdit?ep("input",{style:e,type:"number",value:r,name:"",id:t.item_id,readonly:t.readonly?"true":null}):ep("input",{style:e,type:"text",value:r,name:"",id:t.item_id,readonly:t.readonly?"true":null}),this.buildWithWrapper(n||document.createDocumentFragment())},e.buildListBox=function(t,e){},e.buildView=function(t,e){var n=[];for(let e in t.elements)n.push(this.JSWindowToHTML(t.elements[e]));let i="js-view-component";return"align_row"===t.align_children&&(i+=" children-in-row"),ep("div",{class:i,style:e},n)},e.buildCluster=function(t,e){var n=[];for(let e in t.elements)n.push(this.JSWindowToHTML(t.elements[e]));let i="js-cluster-component";"align_row"===t.align_children&&(i+=" children-in-row");let r=t.name?t.name:"";return r=unescape(r.replace(/\\/g,"%")),ep("div",{class:i,style:e+"position:relative;"},[ep("fieldset",{style:"text-align: left; border-color: gray; border-style: solid; border-width: 1px;"},[ep("legend",{style:"background:white"},[ep("span",{},[r])]),ep("div",{},n)])])},e.buildOkCancelOther=function(t,e){let n=document.createDocumentFragment(),i=this.buildButton({item_id:"jscancle",type:"button"},"",t.cancel_name?t.cancel_name:"Cancel"),r=this.buildButton({item_id:"jsok",type:"button"},"",t.ok_name?t.ok_name:"Ok"),o=this.buildButton({item_id:"jsother",type:"button"},"",t.other_name?t.other_name:"Other");if("ok"===t.type)n.appendChild(r);else if("ok_cancel"===t.type)n.appendChild(r),n.appendChild(i);else{if("ok_cancel_other"!==t.type)return n;n.appendChild(r),n.appendChild(o),n.appendChild(i)}return ep("div",{class:"js-buttons",style:e},[n])},e.JSWindowToHTML=function(t){t&&t.item_id&&t.type&&(this.itemMap[t.item_id]||(this.itemMap[t.item_id]={}),this.storeMap[t.item_id]||(this.storeMap[t.item_id]={}),this.storeMap[t.item_id].type=t.type,this.itemMap[t.item_id].type=t.type);let e,n=this.getElementStyle(t);switch(t.type){case"button":e=this.buildButton(t,n);break;case"check_box":e=this.buildCheckBox(t,n);break;case"radio":e=this.buildRadio(t,n);break;case"list_box":case"hier_list_box":case"popup":case"gap":break;case"static_text":e=this.buildStaticText(t,n);break;case"edit_text":e=this.buildEditText(t,n);break;case"ok":case"ok_cancel":case"ok_cancel_other":e=this.buildOkCancelOther(t,n);break;case"view":e=this.buildView(t,n);break;case"cluster":e=this.buildCluster(t,n)}return e||document.createDocumentFragment()},e.buildDialogWrapper=function(t,e,n){return'<div id="'+t+'" class="js-window-modal modal fade bs" ><div class="js-modal-dialog modal-dialog " style="'+e+'" ><div class="modal-content "><div class="modal-header" ><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><div class="modal-title">'+n.i18n.t("viewer_:pdfjs.windowTitle")+'</div></div><div class="modal-body" ></div><div class="js-warning-footer" ><div class="js-warning" ><span >'+n.i18n.t("viewer_:pdfjs.windowWarning")+"</span></div></div></div></div></div>"},t}();var ip=function(){function t(t,e){this.componentUtils=new np,this.callback=e,this.dialogId="jsWindow",this.monitor=t,this.width=void 0,this.height=void 0,this.storeMap={},this.itemMap={},this.componentUtils.setStore(this.storeMap,this.itemMap)}var e=t.prototype;return e.updateComponents=function(){if(this.$dialog)for(const t in this.itemMap){this.itemMap[t].disabled?this.$dialog.find("#"+t).addClass("disabled"):this.$dialog.find("#"+t).removeClass("disabled")}},e.enable=function(t){for(const e in t){const n=t[e];this.itemMap[e]||(this.itemMap[e]={}),this.itemMap[e].disabled=!n}this.updateComponents()},e.end=function(t){this.callback&&this.callback(t),this.$dialog&&this.$dialog.remove()},e.load=function(t){for(const e in t){const n=t[e];this.updateStoreItem(e,n)}},e.store=function(){if(!this.$dialog)return{};this.componentUtils.updateStoreByElements(this.monitor.description.elements,this.$dialog);let t={};for(const e in this.storeMap){const n=this.storeMap[e];t[e]=n.value}return t},e.updateStoreItem=function(t,e){this.storeMap[t]={value:e}},e.getStore=function(){return this.storeMap},e.getCallbacks=function(t){let e="";for(const n in t){if("description"===n||"initialize"===n||"validate"===n||"commit"===n||"destroy"===n)continue;const i=t[n];"function"==typeof i&&(this.itemMap[n]||(this.itemMap[n]={}),""!==e&&(e+=","),e+="#"+n,this.itemMap[n].callback=i)}return e},e.initialize=function(t){let e="";void 0!==this.monitor.description.width&&(this.width=this.monitor.description.width,e+="width:"+this.width+"px;"),void 0!==this.monitor.description.height&&(this.height=this.monitor.description.height,e+="min-height:"+this.height+"px;"),this.monitor.initialize(this);let n=document.createDocumentFragment();for(let t in this.monitor.description.elements)n.appendChild(this.componentUtils.JSWindowToHTML(this.monitor.description.elements[t]));const i=this.dialogId;let r=this.componentUtils.buildDialogWrapper(i,e,t),o=this.getCallbacks(this.monitor);const s=D()(r);return s.find(".modal-body").append(n),this.containerPromise=t.viewerUI.getRootElement().then((t=>{D()(t);return D()(document.body).append(s),D()(document.body)})),this.$dialog=s,this.updateComponents(),s.find("#jsok").off("click").on("click",(t=>{this.monitor.validate&&this.monitor.validate(this),this.monitor.commit&&this.monitor.commit(this),this.monitor.ok&&this.monitor.ok(this),this.monitor.destroy&&this.monitor.destroy(this),this.end("ok")})),s.find("#jscancle,.close").off("click").on("click",(t=>{this.monitor.cancel&&this.monitor.cancel(this),this.monitor.destroy&&this.monitor.destroy(this),this.end("cancel")})),s.find("#jsother").off("click").on("click",(t=>{this.monitor.other&&this.monitor.other(this),this.monitor.destroy&&this.monitor.destroy(this),this.end("other")})),s.find(".modal-dialog").off("click",o).on("click",o,(t=>{let e=t.target;for(;!e.id;)e=e.parentElement;let n=e.id;this.itemMap[n].callback&&this.itemMap[n].callback(this)})),!0},e.doModal=function(){this.containerPromise&&this.containerPromise.then((t=>{t.append(this.$dialog),this.$dialog&&this.$dialog.show()}))},t}();let rp=function(){function t(){for(let t in this)"function"==typeof this[t]&&(this[t].toString=()=>"function(){[native code]}")}return t.prototype.toString=function(){return"[object "+this.constructor.name+"]"},S(t,null,[{key:"name",get:function(){return"Object"}}]),t}(),op=function(t){function e(){var e;e=t.call(this)||this;let n=arguments[0];return e.change="",e.changeEx="",e.events=[],e.init(n),e}(0,E.Z)(e,t);var n=e.prototype;return n.init=function(t){for(let e in t){let n={};n[e]=t[e],this.add(n)}},n.add=function(t){for(let e in t)this.events[e]||(this.events[e]=[]),this.events[e]=t[e]},n.dispatch=function(){},n.remove=function(t){},S(e,null,[{key:"name",get:function(){return"event"}}]),e}(rp);var sp=op;let ap=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.addStockEvent=function(){},n.alertFileNotFount=function(){},n.alertSelectFailed=function(){},n.argsDWIM=function(){},n.canPlayOrAlert=function(){},n.computerFloatWinRect=function(){},n.constrainRectToScreen=function(){},n.createPlayer=function(){},n.Events=function(t){return new sp(t)},n.getAltTextData=function(){},n.getAltTextSettings=function(){},n.getAnnotStockEvents=function(){},n.getAnnotTraceEvents=function(){},n.getPlayers=function(){},n.getPlayerStockEvents=function(){},n.getPlayerTraceEvents=function(){},n.getURLData=function(){},n.getURLSettings=function(){},n.getWindowBorderSize=function(){},n.openPlayer=function(){},n.removeStockEvents=function(){},n.startPlayer=function(){},S(e,[{key:"align",get:function(){}},{key:"canResize",get:function(){}},{key:"closeReason",get:function(){}},{key:"ifOffScreen",get:function(){}},{key:"layout",get:function(){}},{key:"monitorType",get:function(){}},{key:"openCode",get:function(){}},{key:"over",get:function(){}},{key:"pageEventNames",get:function(){}},{key:"raiseCode",get:function(){}},{key:"raiseSystem",get:function(){}},{key:"renditionType",get:function(){}},{key:"stauts",get:function(){}},{key:"trace",get:function(){}},{key:"version",get:function(){}},{key:"windowType",get:function(){}}],[{key:"name",get:function(){return"AppMedia"}}]),e}(rp);var cp=ap,lp={yellow:["CMYK",0,0,1,0],white:["G",1],transparent:["T"],red:["RGB",1,0,0],magenta:["CMYK",0,1,0,0],ltGray:["G",.75],green:["RGB",0,1,0],gray:["G",.5],dkGray:["G",.25],cyan:["CMYK",1,0,0,0],blue:["RGB",0,0,1],black:["G",0],equal:function(t,e){},convert:function(t,e){var n,i,r;if(e==t[0])return[].concat(t);switch(t[0]){case"T":n=-1,i=-1,r=-1;break;case"G":n=i=r=t[1];break;case"RGB":n=t[1],i=t[2],r=t[3];break;case"CMYK":n=(1-t[4])*(1-t[1]),i=(1-t[4])*(1-t[2]),r=(1-t[4])*(1-t[3])}switch(e){case"T":return;case"G":return["G",(n+r+i)/3];case"RGB":return["RGB",n,i,r];case"CMYK":let t,e,o,s,a=1-n,c=1-i,l=1-r,h=Math.min(Math.min(a,c),l);return 0!=h?(temp2=Math.round(rep_v/100*h),s=Math.round(100*temp2),t=Math.round(100*(a-temp2)),e=Math.round(100*(c-temp2)),o=Math.round(100*(l-temp2))):(t=Math.round(100*a),e=Math.round(100*c),o=Math.round(100*l),s=0),["CMYK",n,i,r]}}},hp=lp;const up=2;var dp=function(t){function e(e,n,i){var r;return(r=t.call(this)||this)._backgroudColor=hp.yellow,r._clickAdvances=!1,r._isFullScreen=!0,r._cursor=up,r._defaultTransition="",r._escapeExits=!1,r._loop=!1,r._timedelay=3,r._transitions="",r._usePageTiming=!1,r._useTimer=!1,r}return(0,E.Z)(e,t),S(e,[{key:"backgroudColor",get:function(){return this._backgroudColor},set:function(t){}},{key:"clickAdvances",get:function(){return this._clickAdvances},set:function(t){}},{key:"cursor",get:function(){return this._cursor},set:function(t){}},{key:"defaultTransition",get:function(){return this._defaultTransition},set:function(t){}},{key:"escapeExits",get:function(){return this._escapeExits},set:function(t){}},{key:"isFullScreen",get:function(){return this._isFullScreen},set:function(t){this._isFullScreen=t}},{key:"loop",get:function(){return this._loop},set:function(t){}},{key:"timedelay",get:function(){return this._timedelay},set:function(t){}},{key:"transitions",get:function(){return this._transitions},set:function(t){}},{key:"usePageTiming",get:function(){return this._usePageTiming},set:function(t){}},{key:"useTimer",get:function(){return this._useTimer},set:function(t){}}]),e}(rp);let fp=function(t){function e(e,n){var i;return(i=t.call(this)||this).jsEngine=e,i.viewerApp=n,i._calculate=!0,i._fullscreen=!0,i._fs=new dp,i.dialogQueue=Promise.resolve(),i.viewerApp.eventEmitter.on("will-close-document",(()=>{i.modalDialog&&i.modalDialog.end("cancel")})),i}(0,E.Z)(e,t);var n=e.prototype;return n.popUpMenu=function(...t){let e=this.viewerApp.i18n.t("viewer_:pdfjs.popupMenu"),n={},i=t=>{let r=1;return o=>{let s=Object.prototype.toString.call(o);if(s.indexOf("String")>-1&&"-"!==o){let i;i=void 0!==t?`${t}-${r}`:String(r),e+=`${i}. ${o} \n`,n[i.trim()]=o,r++}else if(s.indexOf("Array")>-1){let s;s=t?`${t}-${r}`:String(r),e+=`${s}. ${o[0]} \n`,n[s.trim()]=o[0],void 0!==t?o.slice(1).forEach(i(`  ${t}-${r}`)):o.slice(1).forEach(i(`  ${r}`)),r++}}};t.forEach(i());let r=prompt(e,"");if(null===r)return null;for(const t in n)if(n.hasOwnProperty(t)&&r.trim()===t)return n[t]},n.response=function(t){let{cQuestion:e,cTitle:n,cDefault:i,bPassword:r,cLabel:o}=t;return window.prompt(e,i||"")},n.beep=function(t){let e;switch(t){case 0:default:e="error";break;case 1:e="warning"}var n=new Audio(tp[e]);n.addEventListener("load",(function(){n.play()}),!0),n.autoplay=!0},n.alert=function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n=0,i){if(this.jsEngine.getEvent().isSensitiveCheck||this.jsEngine.getEvent().isLoading)return;let r=this.jsEngine.getEvent();if(!r.isSensitiveCheck&&!r.isLoading){var o,s;t&&t.nType;switch(o=n,t&&void 0!==t.nType&&(o=t.nType),s=null==t?"undefined":function(t){if("object"!=typeof t||null===t)return!1;let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t)?t.cMsg+"":t+"",o){default:case 0:return alert(s),0;case 1:return confirm(s)?1:2;case 2:case 3:return confirm(s)?4:3}}})),n.alertAsync=function(...t){return this.alert.apply(this,t)},n.clearInterval=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){clearInterval(t)})),n.clearTimerOut=function(t){clearTimeout(t)},n.launchURL=function(t){if(this.jsEngine.getEvent().isSensitiveCheck||this.jsEngine.getEvent().isLoading)return void(this.jsEngine.sensitiveOp=!0);if(/\w*:\/\/[\s\S]*/.test(t)){if("file"===t.match(/(\w*):\/+[\s\S]*/)[0])return}else t="http://"+t;let e=t.lastIndexOf("@"),n=t;if(-1!=e){n=t.substr(e+1);let i=t.indexOf("//");-1!=i&&(n=t.substr(0,i+2)+n)}const i=this.viewerApp,{siteList:r=[],siteRight:o="always",type:s="custom"}=JSON.parse(localStorage.getItem("TRUST_SITE_SET"))||{},a=i.i18n.t("viewer_:pdfjs.launchURLHint"),c=i.i18n.t("viewer_:pdfjs.blockTip");if("custom"===s){const e=r.find((t=>n.includes(t.url)));if(e){return"allow"===(""+e.access.split(" ")[1]).toLowerCase()?window.open(n):i.viewerUI.alert({message:`${c}\n${_f.toASCII(n)}`,level:"warning"})}if("always"===o)return i.viewerUI.confirm(a+"\n"+_f.toASCII(n)).then((()=>{window.open(t)}),(()=>{}));if("allow"===o)return window.open(n);if("block"===o)return i.viewerUI.alert({message:`${c}\n${_f.toASCII(n)}`,level:"warning"})}else{if("allow"===s)return window.open(n);if("block"===s)return i.viewerUI.alert({message:`${c}\n${_f.toASCII(n)}`,level:"warning"})}},n._execDialog=function(t){return new Promise(((e,n)=>{let i=new ip(t,(t=>{e(t)}));this.modalDialog=i,i.initialize(this.jsEngine.PDFViewer),i.doModal()}))},n.execDialog=function(t,e,n){return this._execDialog(t,e,n)},n.execMenuItem=function(){},n.setInterval=function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){return setInterval(window.eval(t),e)})),n.setTimeOut=function(t,e){return setTimeout((e=>this.jsEngine.exec(t)),e)},S(e,[{key:"activeDocs",get:function(){return[this.jsEngine.cacheJSDoc]}},{key:"calculate",get:function(){let t=this.jsEngine.getPDFForm();return!t||t.calculationEnabled},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._calculate=t,this.viewerApp.setAutoCalculateFieldsFlag(t)}},{key:"constants",get:function(){return{algin:{left:0,center:1,right:2,top:3,bottom:4}}}},{key:"focusRect",get:function(){return this._focusRect},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._focusRect=t}},{key:"formsVersion",get:function(){return 7}},{key:"fullscreen",get:function(){return this._fullscreen},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._fullscreen=t}},{key:"fs",get:function(){return this._fs}},{key:"runtimeHighlight",get:function(){return this.viewerApp.highlightControls()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this.viewerApp.highlightForm(t)}},{key:"runtimeHighlightColor",get:function(){return this.viewerApp.getDisplayHighlightColor(this.viewerApp._runtimeColor,this.viewerApp._runtimeColorOpacity,"RGB")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this.viewerApp.setFormHighlightColor(t)}},{key:"viewerVersion",get:function(){return 7}},{key:"viewerType",get:function(){return"Exchange-Pro"}},{key:"viewerVariation",get:function(){return"Business Tools"}},{key:"printerNames",get:function(){return["Web Printer"]}},{key:"platform",get:function(){var t=window.navigator.platform,e=null;return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?e="MAC":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?e="WIN":!e&&/Linux/.test(t)&&(e="UNIX"),e}},{key:"language",get:function(){let t,e=navigator.language||navigator.userLanguage;return[{language:"zh-CN",code:"CHS"},{language:"zh-HK",code:"CHT"},{language:"zh-TW",code:"CHT"},{language:"da",code:"DAN"},{language:"de",code:"DEU"},{language:"en",code:"ENU"},{language:"es",code:"ESP"},{language:"fr",code:"FRA"},{language:"it",code:"ITA"},{language:"ko",code:"KOR"},{language:"ja",code:"JPN"},{language:"nl",code:"NLD"},{language:"nb",code:"NOR"},{language:"pt-BR",code:"PTB"},{language:"fi",code:"SUO"},{language:"sv",code:"SVE"}].some((n=>{e.indexOf(n.language)>-1&&(t=n.code)})),t}},{key:"numPlugIns",get:function(){return 2}},{key:"plugIns",get:function(){return[{name:"Annots",certified:!0,loaded:!0,path:"",version:7},{name:"Forms",certified:!0,loaded:!0,path:"",version:7}]}},{key:"media",get:function(){return new cp(this.jsEngine)}}],[{key:"name",get:function(){return"app"}}]),e}(rp);const pp=new _.QueuedAsyncTaskExecutor;var gp=(t,e=!1)=>{if("function"!=typeof t)return Promise.resolve();if(e)return Promise.resolve(t());const n=pp.exec(t);return n.catch((t=>console.error(t))),n},mp={always:0,never:1,tooBig:2,tooSmall:3};function vp(t){var e;if(t)for(let n=0;n<t.getControlsCount();n++)if(e=t.getControlByIndex(n).getWidget())return e;return e}function yp(t,e,n,i){if(t)return t[n].apply(t,i);e&&e.length>0&&e.forEach((t=>t[n].apply(t,i)))}let wp=function(t){function e(e,n,i){var r;return(r=t.call(this)||this).jsEngine=e,r.field=n,r.fields=i,r.targetField=r.field||r.fields[0],r._readonly="",r._required="",r._value="",r}(0,E.Z)(e,t);var n=e.prototype;return n.destroy=function(){this.fields=null,this.field=null,this.targetField=null,this.jsEngine=null},n._update=function(t,e){this.field=t,this.fields=e,this.targetField=this.field||this.fields[0]},n.setItems=function(t){if(Array.isArray(t))return yp(this.field,this.fields,"setItems",[t]),t},n.buttonGetIcon=function(t=0){let e=vp(this.targetField)&&vp(this.targetField).getIconObjNum(t);return"number"==typeof e?{_objNum:e}:e},n.buttonSetIcon=function(t,e=0){yp(this.field,this.fields,"setIconObj",[t,e])},n.browseForFileToSubmit=function(){},n.buttonGetCaption=function(t){switch(t||(t=0),t){case 0:t="normalCaption";break;case 1:t="downCaption";break;case 2:t="rolloverCaption"}return vp(this.targetField).getMKProperty(t)},n.buttonImportIcon=function(t,e){var n=this;return new Promise((t=>{this.$jsBrowserFile&&this.$jsBrowserFile.remove(),this.$jsBrowserFile=D()('<input id="jsBrowserFile" type="file" style="display: block;visibility:hidden" accept="image/jpg,image/jpeg,image/bmp,image/png"/>'),D()("body").append(this.$jsBrowserFile),this.$jsBrowserFile.off("change").on("change",(e=>{let i=e.target.files[0];if(!i)return-2;let r=new FileReader;r.readAsArrayBuffer(i),r.onload=()=>{let e=new Uint8Array(r.result);n.buttonSetIcon(e,0),t(0)}})),this.$jsBrowserFile.click()}))},n.buttonSetCaption=function(t,e){if(!this.jsEngine.getEvent().isSensitiveCheck){switch(e||(e=0),Array.isArray(t)&&1===t.length&&(t=t[0]),"string"!=typeof t&&(t+=""),e){case 0:e="normalCaption";break;case 1:e="downCaption";break;case 2:e="rolloverCaption"}vp(this.targetField)._setMKProperty(e,t),yp(this.field,this.fields,"setMKProperty",[e,t])}},n.checkThisBox=function(t,e=!0){if(!this.jsEngine.getEvent().isSensitiveCheck){var n=this.field;if(n.getType()===xe.RadioButton||n.getType()===xe.CheckBox){var i=n.getWidget(t);if(!i){return n.getControlByIndex(t).getWidgetAnnot().then((t=>r(t)))}r(i)}}function r(t){let i=t.getOnAS();e?(t._setAS(i,t.info.objectNumber),n.setValue(i,t)):n.getValue()===i&&(t._setAS("off",t.controls[0].info.objectNumber),n.setValue("Off",null,!0))}},n.clearItems=function(){this.jsEngine.getEvent().isSensitiveCheck||yp(this.field,this.fields,"clearItems",[])},n.defaultIsChecked=function(t,e=!0){if(!this.jsEngine.getEvent().isSensitiveCheck&&this.targetField&&(this.targetField.getType()===xe.RadioButton||this.targetField.getType()===xe.CheckBox)){var n=function(t,e=0){return t&&t.getControlByIndex(e).getWidget()}(this.targetField,t);let i="Off";e&&(i=n?n.getOnAS():"Yes"),yp(this.field,this.fields,"setDefaultValue",[i]),yp(this.field,this.fields,"setValue",[i])}},n.deleteItemAt=function(t=this.field.getValueIndex()){if(!this.jsEngine.getEvent().isSensitiveCheck){if("number"!=typeof t&&(t=parseInt(t)),void 0===t)throw new Error("invalid parameter, expected integer.");yp(this.field,this.fields,"deleteItems",[t])}},n.getArray=function(){},n.getItemAt=function(t,e=!0){if("number"!=typeof t&&(t=parseInt(t)),void 0===t)throw new Error("invalid parameter, expected integer.");var n=this.targetField;if(n.getType()===xe.ListBox||n.getType()===xe.ComboBox){var i=n.getOptions();-1===t&&(t=i.length-1);var r=i[t];return e?r.value:r.label}return""},n.insertItemAt=function(t,e,n){if(!this.jsEngine.getEvent().isSensitiveCheck&&this.targetField){var i=this.targetField;i.getType()!==xe.ListBox&&i.getType()!==xe.ComboBox||yp(this.field,this.fields,"insertItemAt",[t,e,n])}},n.isBoxChecked=function(t){if(!this.targetField)return!1;var e=this.targetField;if(e.getType()===xe.RadioButton||e.getType()===xe.CheckBox){let n=e.getWidget(t);if(n)return"Off"!=n.getAS()}return!1},n.isDefaultChecked=function(t){if(!this.targetField)return!1;var e=this.targetField;if(e.getType()===xe.RadioButton||e.getType()===xe.CheckBox){let n=e.getWidget(t);if(n){const t=n.getOnAS();return t===e.getDefaultValue()||"1"===t}if(n=e.getControlByIndex(t),n)return n.info.isDefaultChecked}return!1},n.setAction=function(t,e){yp(this.field,this.fields,"setAction",[-1,e])},n.setFocus=function(){if(this.targetField){let t=this.targetField,e=this.jsEngine.PDFViewer.getEventEmitter(),n=this.jsEngine;function i(i){let r=i.page.info.index,o=function(n){n.page.getIndex()==r&&(t.focus(),e.off(nt.renderPageSuccess,o))};e.on(nt.renderPageSuccess,o),n.PDFViewer.goToPage(r)}let r=this.targetField.controls[0].getWidget();if(r){this.jsEngine.PDFViewer.getPDFDocRender().getCurrentPageIndex()==r.getPage().getIndex()?this.targetField.focus():i(r)}else gp((t=>this.targetField.controls[0].getWidgetAnnot().then((t=>{t&&i(t)}))))}},S(e,[{key:"alignment",get:function(){if(!this.targetField)return"";switch(this.targetField.getAlignment()){case 0:return"left";case 1:return"center";case 2:return"right"}},set:function(t){if(this.jsEngine.getEvent().isSensitiveCheck)return;let e=0;switch(t){case"left":e=0;break;case"center":e=1;break;case"right":e=2}return yp(this.field,this.fields,"setAlignmentWithString",[e,t]),t}},{key:"borderStyle",get:function(){return this.targetField&&this.targetField.getBorderStyle()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setBorderStyle",[t]),t}},{key:"charLimit",get:function(){return this.targetField&&this.targetField.getMaxLength()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setMaxLength",[t]),t}},{key:"comb",get:function(){return!!De.isComb(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setComb",[t]),t}},{key:"currentValueIndices",get:function(){return this.targetField&&this.targetField.getValueIndex()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setValueByIndex",[t]),t}},{key:"defaultValue",get:function(){return this.targetField&&this.targetField.getDefaultValue()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setDefaultValue",[t]),t}},{key:"display",get:function(){let t=vp(this.targetField).getFlags();return 2&t?1:4&t?32&t?3:0:2},set:function(t){return yp(this.field,this.fields,"setWidgetDisplay",[t]),t}},{key:"exportValues",get:function(){return this.targetField&&this.targetField.getExportValues()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck){if(this.field.getType()===xe.RadioButton||this.field.getType()===xe.CheckBox){const e=this.field.getControlsCount();for(let n=0;n<e;n++){t[n];gp((e=>yp(this.field,this.fields,"setExportValue",[n,t[n]])))}return this.field.getExportValues()}throw"invalid field type: only radio buttons and check boxes available."}}},{key:"fillColor",get:function(){let t=vp(this.targetField).getMKProperty("fillColor");return["RGB",t>>16&1,t>>8&1,1&t]},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setFillColor",[t]),t}},{key:"hidden",get:function(){let t=vp(this.targetField).getFlags();return!!(2&t||1&t)},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setHidden",[t]),t}},{key:"highlight",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"lineWidth",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"multiline",get:function(){return!!De.isMultiline(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setMultiline",[t]),t}},{key:"name",get:function(){return this.targetField&&this.targetField.getName()}},{key:"numItems",get:function(){if(!this.targetField)return 0;if(this.targetField.getType()===xe.ListBox||this.targetField.getType()===xe.ComboBox)return this.targetField.getOptions().length;throw new Error("invalid field type: only list box and combo box available.")}},{key:"password",get:function(){return!!De.isPassword(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setPassword",[t]),t}},{key:"print",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"radiosInUnison",get:function(){},set:function(t){this.jsEngine.getEvent().isSensitiveCheck}},{key:"readonly",get:function(){return!!De.isReadOnly(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setReadonly",[t]),t}},{key:"required",get:function(){return!!De.isRequired(this.targetField&&this.targetField.getFlags())},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setRequired",[t]),t}},{key:"type",get:function(){if(!this.targetField)return"unknown";switch(this.targetField.getType()){default:case 0:return"unknown";case 1:return"button";case 2:return"checkbox";case 4:return"combobox";case 5:return"listbox";case 3:return"radiobutton";case 7:return"signature";case 6:return"text"}}},{key:"value",get:function(){if(this.targetField){let t=this.targetField.getValue();return""==t?"":isNaN(t)?t:+t}},set:function(t){if(this.jsEngine.getEvent().isSensitiveCheck||!this.targetField)return;let e,n=this.jsEngine.PDFViewer.getPDFDocRender().formRender.control,i=this.targetField.getType();if(Array.isArray(t)&&i!=xe.ListBox&&(t=t.join(",")),i===xe.ListBox||i===xe.ComboBox){let e=this.field.getOptions();e.forEach((e=>{e.selected=e.value==t,Array.isArray(t)&&-1!=t.indexOf(e.value)&&(e.selected=!0)})),this.field.setOptions(e)}if(!n||!(e=n.annot.getField())||this.field.getName()!==e.getName()){yp(this.field,this.fields,"setValue",[t]);const e=this.field.form;e.tempTimer&&(clearTimeout(e.tempTimer),delete e.tempTimer),e.tempTimer=setTimeout((()=>{e.calculate(this.field),clearTimeout(e.tempTimer),delete e.tempTimer}),0)}return i!==xe.RadioButton&&i!==xe.CheckBox||this.jsEngine.setStatus("calculate",this.targetField),t}},{key:"valueAsString",get:function(){return this.targetField?this.targetField.getValue().toString():""}},{key:"strokeColor",get:function(){let t=this.targetField.getBorderColor();return["RGB",t>>16&1,t>>8&1,1&t]},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return yp(this.field,this.fields,"setBorderColor",[t]),t}},{key:"textColor",get:function(){let t=this.targetField&&this.targetField.getDAFontColor();return["RGB",t>>16&1,t>>8&1,1&t]},set:function(t){return yp(this.field,this.fields,"setDAFontColor",[t]),t}},{key:"userName",get:function(){return this.PDFFieldgetAlternateName()},set:function(t){if(this.field)return this.field.update("alternateName",t);this.fields.forEach((e=>{e.update("alternateName",t)}))}},{key:"rect",get:function(){let t,e=vp(this.targetField);return t=e?e.getRect():this.targetField.rect,[t.left,t.top,t.right,t.bottom]},set:function(t){if(Array.isArray(t)&&!(t.length<4)){if(t[0]>t[2]){let e=t[0];t[0]=t[2],t[2]=e}if(t[3]>t[1]){let e=t[3];t[3]=t[1],t[1]=e}yp(this.field,this.fields,"setRect",[{left:t[0],top:t[1],right:t[2],bottom:t[3]}])}}},{key:"style",get:function(){return vp(this.targetField).getMKProperty("normalCaption")},set:function(t){switch(t){case"check":t="4";break;case"cross":t="8";break;case"diamond":t="u";break;case"circle":t="l";break;case"star":t="H";break;case"square":t="n"}return yp(this.field,this.fields,"setMKProperty",["normalCaption",t])}},{key:"buttonScaleWhen",get:function(){if(this.targetField&&this.targetField.getType()===xe.PushButton){let t=0;switch(vp(this.targetField).info.iconFit.scaleWayType){case 1:t=0;break;case 4:t=1;break;case 2:t=2;break;case 3:t=3}return t}},set:function(t){if(this.targetField&&this.targetField.getType()===xe.PushButton){let e,n=vp(this.targetField),i=n.info.iconFit;switch(t){case mp.always:e="e_ScaleWayAlways",i.scaleWayType=1;break;case mp.never:e="e_ScaleWayNever",i.scaleWayType=4;break;case mp.tooBig:e="e_ScaleWayBigger",i.scaleWayType=2;break;case mp.tooSmall:e="e_ScaleWaySmaller",i.scaleWayType=3;break;default:e="e_ScaleWayAlways",i.scaleWayType=1}let r={scale_way_type:e,is_proportional_scaling:i.isProportionalScaling+"",fit_bounds:i.fitBounds,horizontal_fraction:(100*i.horizontalFraction).toFixed(0),vertical_fraction:(100*i.verticalFraction).toFixed(0)};gp((t=>{n.setWidgetIconFitOption(r)}))}}}],[{key:"name",get:function(){return"Field"}}]),e}(rp);var bp=wp;var Ap=function(){function t(t,e){this.jsEngine=t,this.doc=e,this.params={}}return S(t,[{key:"printerName",get:function(){return"Web Printer"},set:function(t){}},{key:"firstPage",get:function(){return void 0!==this.params.firstPage?this.params.firstPage:0},set:function(t){this.params.firstPage=t}},{key:"lastPage",get:function(){return void 0!==this.params.lastPage?this.params.lastPage:this.doc.numPages},set:function(t){this.params.lastPage=t}},{key:"pageHandling",get:function(){return void 0!==this.params.pageHandling?this.params.pageHandling:3},set:function(t){this.params.pageHandling=t}},{key:"constants",get:function(){return{interactionLevel:{automatic:1,full:0,silent:2},handling:{none:1,fit:2,shrink:3,tileAll:4,tileLarge:5,nUp:6,booklet:7},flagValues:{applyOverPrint:131072,applySoftProofSettings:2097152,applyWorkingColorSpaces:262144,emitHalftones:1,emitPostScriptXObjects:524288,emitFormsAsPSForms:4194304,maxJP2KRes:8388608,setPageSize:1024,suppressBG:16,suppressCenter:256,suppressCJKFontSubst:64,suppressCropClip:4,suppressRotate:128,suppressTransfer:8,suppressUCR:32,useTrapAnnots:16777216,usePrintersMarks:33554432},bookletBindings:{Left:0,Right:1,LeftTall:2,RightTall:3},bookletDuplexMode:{BothSides:0,FrontSideOnly:1,BackSideOnly:2},colorOverrides:{auto:0,gray:1,mono:2},fontPolicies:{everyPage:2,jobStart:0,pageRange:1},nUpPageOrders:{Horizontal:0,HorizontalReversed:1,Vertical:2},printContents:{doc:0,docAndComments:1,formFieldsOnly:3},rasterFlagValues:{textToOutline:1,strokesToOutline:2,allowComplexClip:4,preserveOverprint:8},subsets:{all:-3,even:-5,odd:-4},tileMarks:{none:0,west:1,east:2},usages:{auto:0,use:1,noUse:2},duplexTypes:{Simplex:0,DuplexFlipLongEdge:1,DuplexFlipShortEdge:2}}}},{key:"flags",get:function(){return void 0!==this.params.flags?this.params.flags:0},set:function(t){this.params.flags=t}},{key:"interactive",get:function(){return void 0!==this.params.interactive?this.params.interactive:0},set:function(t){this.params.interactive=t}},{key:"fileName",get:function(){return void 0!==this.params.fileName?this.params.fileName:""},set:function(t){this.params.fileName=t}}]),t}();let Pp=function(){function t(t,e,n){this.templateObject=t,this.templateHidden=e,this.pdfDoc=n}return t.prototype.spawn=function(t,e,n,i){if(this.pdfDoc){if("object"==typeof t){let r=t;t=r.nPage,e=r.bRename,n=r.bOverlay,i=r.oXObject}return i&&"object"==typeof i&&(this.pdfDoc=i.pdfDoc,this.templateObject=i.templateObject,this.templateHidden=i.templateHidden),null==t&&(t=-1),e=!1!==e,n=!0,this.pdfDoc.spawnPage(this.templateObject,t,e,n),this}},S(t,[{key:"hidden",get:function(){return this.templateHidden},set:function(t){if(t!==this.templateHidden)return this.pdfDoc?this.pdfDoc.hideTemplate(this.templateObject,t):void 0}},{key:"name",get:function(){return this.templateObject.name}}]),t}();function Sp(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let Cp={};const Ep=t=>{t?delete Cp[t]:Cp={}},xp=t=>Cp[t]||[],Dp="R",Ip="Group";let Rp=function(){function t(t,e,n){this.delayValue=!1,this.annot=t,this.annotData=e,this.app=n}var e=t.prototype;return e._delayOrExec=function(t){if(!this.delay)return t();((t,e)=>{let n=xp(t);n.push(e),Cp[t]=n})(this.annot.getId(),t)},e.destroy=function(){this.annot&&this.annot.getPage().removeAnnotByObjectNumber(this.annot.getId()).then((()=>{Ep(this.annot.getId()),this.annot=null}))},e.getProps=function(){let t={},e=[],n=Object.getOwnPropertyNames(this.constructor.prototype),i=this;return n.map((t=>{let n=Object.getOwnPropertyDescriptor(this.constructor.prototype,t);n&&!n.get||e.push(t)})),Object.getOwnPropertyNames(this.constructor.prototype.__proto__.__proto__).map((t=>{let n=Object.getOwnPropertyDescriptor(this.constructor.prototype.__proto__.__proto__,t);n&&!n.get||e.push(t)})),console.log("key:",e),e.map((e=>{let n=i[e];void 0!==n?(t[e]=n,console.log("this."+e+"=",t[e])):console.log("this."+e+'="undefined"')})),t},e.setProps=function(t){let e=[],n=this;Object.getOwnPropertyNames(this.constructor.prototype).map((t=>{let n=Object.getOwnPropertyDescriptor(this.constructor.prototype,t);n&&!n.set||e.push(t)}));let i=Object.getOwnPropertyNames(this.constructor.prototype.__proto__.__proto__);for(var r in i.map((t=>{let n=Object.getOwnPropertyDescriptor(this.constructor.prototype.__proto__.__proto__,t);n&&!n.set||e.push(t)})),n.delay=!0,t)n[r]=t[r],console.log("this."+r+"=",t[r]);n.delay=!1},e.getStateInModel=function(t){if(this.annot&&"text"===this.annot.info.type)return"Marked"===t?[this.annot.getMarkedState(0)]:"Review"===t?[this.annot.getReviewState(0)]:void 0},e.moveAnnot=function(t,e,n){let i=e.getIndex(),r=n.getIndex(),o=e.doc;let s=t.reduce(((t,e)=>e.getRelevanceRenders?[].concat(Sp(w.Z,t),Sp(w.Z,e.getRelevanceRenders(!0))):[].concat(Sp(w.Z,t),[e.annot.getId()])),[]).reduce(((t,n)=>{let i=e.annotIdMap[n],r={},o={};return"popup"!==i.getType()&&(r="FreeTextCallout"==i.getIntent()?annotRender.backupProperty.rect:i.getRect(),o=r),t[n]={rect:o,oldRect:r},t}),{});const a=Object.keys(s).map((t=>Number(t)));return e.getAnnotsByObjectNumArray(a).then((t=>{const a=t.reduce(((t,e)=>(t[e.getUniqueID()]=s[e.getObjectNumber()],t)),{});return o.moveAnnotsToPage(e,n,s).then((t=>(this.app.viewerApp.collaborate(Dr.MOVE_ANNOTS_BETWEEN_PAGES,{fromPageIndex:i,toPageIndex:r,annots:a}),t)))}))},S(t,[{key:"type",get:function(){return"Annotation"}},{key:"component",get:function(){return this.app.viewerApp.getPDFPageRender(this.annotData.page).annotsRender.getAnnotRender(this.name).component}},{key:"author",get:function(){return this.annot?this.annot.getTitle():this.annotData.author},set:function(t){gp((e=>this._delayOrExec((()=>this.annot.setTitle(t)))))}},{key:"borderEffectIntensity",get:function(){return this.annot?this.annot.getCloudIntensity():this.annotData.borderEffectIntensity},set:function(t){this.annot&&(this.annot.info.borderInfo.cloudIntensity=t),gp((e=>this._delayOrExec((()=>this.annot.setBorderStyle(5,t)))))}},{key:"borderEffectStyle",get:function(){return this.annot?5===this.annot.getBorderStyle()?"C":"":this.annotData.borderEffectStyle},set:function(t){if(""!==t&&"C"!==t)throw new TypeError('effectStyle either empty string or "C"');this.annot&&(this.annot.info.borderInfo.style="C"===t?5:0),gp((e=>this._delayOrExec((()=>"C"===t?this.annot.setBorderStyle(5,1):this.annot.setBorderStyle(0,[])))))}},{key:"contents",get:function(){return this.annot?this.annot.getContent():this.annotData.contents},set:function(t){gp((e=>this._delayOrExec((()=>this.annot.setContent(t)))))}},{key:"creationDate",get:function(){return this.annot?this.annot.getCreateDateTime():this.annotData.creationDate}},{key:"delay",get:function(){return this.delayValue},set:function(t){if(!1===t){this.delayValue=!1;const t=this.annot.getId();xp(t).forEach((t=>{t&&t()})),Ep(t)}else!0===t&&(this.delayValue=!0)}},{key:"doc",get:function(){return this.app.jsEngine.cacheJSDoc}},{key:"hidden",get:function(){return this.annot?2==(2&this.annot.getFlags()):this.annotData.hidden||!1},set:function(t){gp((e=>this._delayOrExec((()=>{let e=this.annot.getFlags();return t?e|=2:e&=-3,this.annot.setFlags(e)}))))}},{key:"inReplyTo",get:function(){if(!this.annot)return this.annotData.inReplyTo;let t=this.annot.info.IRT;if(t&&"R"===this.annot.info.RT){const e=this.annot.page.annots.find((e=>e.getId()==t));e&&(t=e.getName())}else t="";return t},set:function(t){gp((e=>{this._delayOrExec((()=>{this.annot.info.IRT=t}))}))}},{key:"intent",get:function(){return this.annot?this.annot.getIntent():this.annotData.intent},set:function(t){this.annot&&(this.annot.info.intent=t),gp((e=>this._delayOrExec((()=>this.annot.setIntent(t)))))}},{key:"lock",get:function(){return this.annot?128==(128&this.annot.getFlags()):this.annotData.lock||!1},set:function(t){gp((e=>this._delayOrExec((()=>{let e=this.annot.getFlags();return t?e|=128:e&=-129,this.annot.setFlags(e)}))))}},{key:"modDate",get:function(){return this.annot?this.annot.getModifiedDateTime():this.annotData.modDate},set:function(t){gp((e=>this._delayOrExec((()=>this.annot.setModifiedDateTime(t)))))}},{key:"name",get:function(){return this.annot?this.annot.getName():this.annotData.name},set:function(t){gp((e=>this._delayOrExec((()=>this.annot.setUniqueID(t)))))}},{key:"noView",get:function(){return this.annot?32==(32&this.annot.getFlags()):this.annotData.noView||!1},set:function(t){gp((e=>this._delayOrExec((()=>{let e=this.annot.getFlags();return t?e|=32:e&=-33,this.annot.setFlags(e)}))))}},{key:"opacity",get:function(){return this.annot?this.annot.getOpacity():this.annotData.opacity||1},set:function(t){gp((e=>this._delayOrExec((()=>{if(Object.prototype.toString.call(t).indexOf("Number")<0)throw new Error("only accept Number");if(t<0||t>1)throw new Error("opacity range: 0 - 1");return this.annot.setOpacity(t)}))))}},{key:"page",get:function(){return this.annot?this.annot.getPage().getIndex():this.annotData.page},set:function(t){gp((e=>this._delayOrExec((()=>{let e=this.annot.getPage().getIndex();if(t!=e){const n=this.app.viewerApp.getPDFPageRender(e).annotsRender.getAnnotRender(this.name).component;this.app.viewerApp.getPDFPageRender(t).getPDFPage().then((t=>this.moveAnnot([n],this.annot.getPage(),t)))}}))))}},{key:"print",get:function(){return this.annot?4==(4&this.annot.getFlags()):this.annotData.print||!1},set:function(t){gp((e=>this._delayOrExec((()=>{let e=this.annot.getFlags();return t?e|=4:e&=-5,this.annot.setFlags(e)}))))}},{key:"rect",get:function(){if(!this.annot)return this.annotData.rect;const{left:t,right:e,top:n,bottom:i}=this.annot.getRect();return[t,i,e,n]},set:function(t){gp((e=>this._delayOrExec((()=>{if(!Array.isArray(t))throw new Error("only accept Array");return this.annot.setRect({left:t[0],right:t[2],top:t[3],bottom:t[1]})}))))}},{key:"readOnly",get:function(){return this.annot?64==(64&this.annot.getFlags()):this.annotData.readOnly||!1},set:function(t){gp((e=>this._delayOrExec((()=>{let e=this.annot.getFlags();return t?e|=64:e&=-65,this.annot.setFlags(e)}))))}},{key:"refType",get:function(){if(!this.annot)return this.annotData.refType;this.annot.info.RT},set:function(t){gp((e=>{this._delayOrExec((()=>{if(t!==Dp&&t!==Ip)throw new TypeError('refType should be "R" or "Group"');this.annot.info.RT=t}))}))}},{key:"richContents",get:function(){},set:function(t){}},{key:"seqNum",get:function(){return this.annot?this.annot.info.index:0}},{key:"strokeColor",get:function(){return this.annot?this.annot.info.hasBorderColor?(0,_.convertFromNumberToJSColor)(this.annot.info.borderColor):["T"]:this.annotData.strokeColor},set:function(t){gp((e=>this._delayOrExec((()=>{let e=(0,_.colorConvertor)(t,"int",this.annot.getOpacity());return this.annot.setBorderColor(e)}))))}},{key:"style",get:function(){return this.annot?this.annot.getBorderStyle():this.annotData.style},set:function(t){gp((e=>this._delayOrExec((()=>{let e=0,n=0;return"D"==t&&(e=1,n=[3]),this.annot.setBorderStyle(e,n)}))))}},{key:"subject",get:function(){return this.annot?this.annot.getSubject():this.annotData.subject},set:function(t){gp((e=>this._delayOrExec((()=>this.annot.setSubject(t)))))}},{key:"toggleNoView",get:function(){return this.annot?256==(256&this.annot.getFlags()):this.annotData.toggleNoView},set:function(t){gp((e=>this._delayOrExec((()=>{let e=this.annot.getFlags();return t?e|=256:e&=-257,this.annot.setFlags(e)}))))}},{key:"popupOpen",get:function(){if("freetext"===this.type||"sound"===this.type||"fileattachment"===this.type)return;if(!this.annot)return this.annotData.popupOpen;return this.annot.getPopup().getOpenStatus()},set:function(t){"freetext"!==this.type&&"sound"!==this.type&&"fileattachment"!==this.type&&gp((e=>this._delayOrExec((()=>this.annot.getPopup().setOpenStatus(t).then((()=>{t&&this.component.showReplyDialog("comment")}))))))}},{key:"popupRect",get:function(){if("freetext"===this.type||"sound"===this.type||"fileattachment"===this.type)return;if(!this.annot)return this.annotData.popupRect;let t=this.annot.getPopup();const{left:e,right:n,top:i,bottom:r}=t.getRect();return[e,r,n,i]},set:function(t){"freetext"!==this.type&&"sound"!==this.type&&"fileattachment"!==this.type&&gp((e=>this._delayOrExec((()=>{if(!Array.isArray(t))throw new Error("only accept Array");return this.annot.getPopup().setRect({left:t[0],right:t[2],top:t[3],bottom:t[1]})}))))}}]),t}(),Tp=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return(0,E.Z)(e,t),e}(Rp);var Fp=Tp;let _p=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Caret"}},{key:"caretSymbol",get:function(){},set:function(t){}}]),e}(Fp);var kp=_p;let Mp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Circle"}},{key:"dash",get:function(){if(!this.annot)return this.annotData.dash;let t=this.annot.getBorderInfo();const{dashes:e}=t;return e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if(Array.isArray(e))return this.annot.setBorderStyle(1,e)}))))}},{key:"fillColor",get:function(){if(!this.annot)return this.annotData.fillColor;let t=this.annot.getFillColor();return(0,_.convertFromNumberToJSColor)(t)},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=(0,_.colorConvertor)(e,"int",0);return this.annot.setFillColor(t)}))))}},{key:"width",get:function(){if(!this.annot)return this.annotData.width;return this.annot.getBorderWidth()},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>this.annot.setBorderWidth(e)))))}}]),e}(Fp);const Op={Paperclip:"Paperclip",PushPin:"PushPin",Graph:"Graph",Tag:"Tag"};let Lp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"FileAttachment"}},{key:"attachIcon",get:function(){if(!this.annot)return this.annotData.attachIcon;return this.annot.getIconName()},set:function(e){Op[e]&&gp((n=>t.prototype._delayOrExec.call(this,(()=>this.annot.setIconName(e)))))}},{key:"point",get:function(){if(!this.annot)return this.annotData.point;const{left:t,top:e}=this.annot.getRect();return[t,e]},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if(e&&Array.isArray(e)&&!(e.length<2))return this.annot.moveTo({left:e[0],top:e[1],action:"move"})}))))}}]),e}(Fp),Np=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"FreeText"}},{key:"alignment",get:function(){if(!this.annot)return this.annotData.alignment;return this.annot.getInfo().justification},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>this.annot.setAlignment(e)))))}},{key:"callout",get:function(){if(!this.annot)return this.annotData.callout;let t=this.annot.getCalloutLinePoints(),e=[];return t.map((t=>{e.push(t.x,t.y)})),e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=xg(e);return this.annot.setCalloutLinePoints(t)}))))}},{key:"dash",get:function(){if(!this.annot)return this.annotData.dash;let t=this.annot.getBorderInfo();const{dashes:e}=t;return e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if(Array.isArray(e))return this.annot.setBorderStyle(1,e)}))))}},{key:"fillColor",get:function(){if(!this.annot)return this.annotData.fillColor;let t=this.annot.getFillColor();return(0,_.convertFromNumberToJSColor)(t)},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=(0,_.colorConvertor)(e,"int",0);return this.annot.setFillColor(t)}))))}},{key:"lineEnding",get:function(){if(!this.annot)return this.annotData.lineEnding;let t=this.annot.getCalloutLineEndingStyle();return st.LineEndingName[t]},set:function(e){e||(e="None"),gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=st.LineEndingStyle[e];return this.annot.setCalloutLineEndingStyle(t)}))))}},{key:"richDefaults",get:function(){},set:function(t){}},{key:"rotate",get:function(){if(!this.annot)return this.annotData.rotate;let t=360-this.annot.getRotation();return 360===t&&(t=0),t},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=0;return 0!==e&&(t=360-e),this.annot.setRotation(t)}))))}},{key:"textFont",get:function(){},set:function(t){}},{key:"textSize",get:function(){if(!this.annot)return this.annotData.textSize;return this.annot.getDefaultAppearance().textSize},set:function(e){return gp((n=>{t.prototype._delayOrExec.call(this,(()=>{let t=this.annot.getDefaultAppearance();return t.textSize=e,this.annot.setDefaultAppearance(t).then((t=>{}))}))}))}},{key:"width",get:function(){if(!this.annot)return this.annotData.width||1;return this.annot.getBorderWidth()},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>this.annot.setBorderWidth(e)))))}}]),e}(Fp),Bp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Highlight"}},{key:"quads",get:function(){if(!this.annot)return this.annotData.quads;let t=this.annot.getQuadPoints(),e=[];return t.map((t=>{t.map((t=>{e.push(t.x,t.y)}))})),e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=Eg(e);return this.annot.setRect(t)}))))}}]),e}(Fp),Vp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Ink"}},{key:"dash",get:function(){if(!this.annot)return this.annotData.dash;let t=this.annot.getBorderInfo();const{dashes:e}=t;return e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if(Array.isArray(e))return this.annot.setBorderStyle(1,e)}))))}},{key:"gestures",get:function(){if(!this.annot)return this.annotData.gestures;let t,e=this.annot.getInkList(),n=[];return e.map((e=>{1===e.type&&(t=[],n.push(t)),t.push([e.x,e.y])})),n},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=Cg(e);return this.annot.setInkList(t)}))))}},{key:"width",get:function(){if(!this.annot)return annotData.width||0;return this.annot.getBorderWidth()},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>this.annot.setBorderWidth(e)))))}}]),e}(Fp),Up=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Line"}},{key:"arrowBegin",get:function(){if(!this.annot)return this.annotData.arrowBegin;let t=this.annot.getStartStyle();return st.LineEndingName[t]},set:function(e){e||(e="None"),gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=st.LineEndingStyle[e];return this.annot.setEndingStyle(!0,t)}))))}},{key:"arrowEnd",get:function(){if(!this.annot)return this.annotData.arrowEnd;let t=this.annot.getEndingStyle();return st.LineEndingName[t]},set:function(e){e||(e="None"),gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=st.LineEndingStyle[e];return this.annot.setEndingStyle(!1,t)}))))}},{key:"dash",get:function(){if(!this.annot)return this.annotData.dash;let t=this.annot.getBorderInfo();const{dashes:e}=t;return e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if(Array.isArray(e))return this.annot.setBorderStyle(1,e)}))))}},{key:"doCaption",get:function(){if(!this.annot)return this.annotData.doCaption;return this.annot.hasCaption()},set:function(t){gp((e=>this.annot.enableCaption(t)))}},{key:"fillColor",get:function(){if(!this.annot)return this.annotData.fillColor;let t=this.annot.getStyleFillColor();return(0,_.convertFromNumberToJSColor)(t)},set:function(t){gp((e=>this._delayOrExec((()=>{let e=(0,_.colorConvertor)(t,"int",0);return this.annot.setStyleFillColor(e)}))))}},{key:"leaderExtend",get:function(){if(!this.annot)return this.annotData.leaderExtend;return this.annot.getLeaderLineExtend()},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>this.annot.setLeaderLineExtend(e)))))}},{key:"leaderLength",get:function(){if(!this.annot)return this.annotData.leaderLength;return this.annot.getLeaderLineLength()},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>this.annot.setLeaderLineLength(e)))))}},{key:"width",get:function(){if(!this.annot)return this.annotData.width;return this.annot.getBorderWidth()},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>this.annot.setBorderWidth(e)))))}}]),e}(Fp);var Hp=Up;let jp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"PolyLine"}},{key:"arrowBegin",get:function(){if(!this.annot)return this.annotData.arrowBegin;let t=this.annot.getStartStyle();return st.LineEndingName[t]},set:function(e){e||(e="None"),gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=st.LineEndingStyle[e];return this.annot.setEndingStyle(!0,t)}))))}},{key:"arrowEnd",get:function(){if(!this.annot)return this.annotData.arrowEnd;let t=this.annot.getEndingStyle();return st.LineEndingName[t]},set:function(e){e||(e="None"),gp((n=>t.prototype._delayOrExec.call(this,(t=>{let n=st.LineEndingStyle[e];return this.annot.setEndingStyle(!1,n)}))))}},{key:"dash",get:function(){if(!this.annot)return this.annotData.dash;let t=this.annot.getBorderInfo();const{dashes:e}=t;return e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if(Array.isArray(e))return this.annot.setBorderStyle(1,e)}))))}},{key:"fillColor",get:function(){if(!this.annot)return this.annotData.fillColor;let t=this.annot.getFillColor();return(0,_.convertFromNumberToJSColor)(t)},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=(0,_.colorConvertor)(e,"int",0);return this.annot.setFillColor(t)}))))}},{key:"vertices",get:function(){if(!this.annot)return this.annotData.vertices;let t=this.annot.getVertexes(),e=[];return t.map((t=>{e.push(t.x,t.y)})),e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=xg(e);return this.annot.setVertexes(t)}))))}}]),e}(Fp),$p=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Polygon"}},{key:"dash",get:function(){if(!this.annot)return this.annotData.dash;let t=this.annot.getBorderInfo();const{dashes:e}=t;return e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if(Array.isArray(e))return this.annot.setBorderStyle(1,e)}))))}},{key:"fillColor",get:function(){if(!this.annot)return this.annotData.fillColor;let t=this.annot.getFillColor();return(0,_.convertFromNumberToJSColor)(t)},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=(0,_.colorConvertor)(e,"int",0);return this.annot.setFillColor(t)}))))}},{key:"vertices",get:function(){if(!this.annot)return this.annotData.vertices;let t=this.annot.getVertexes(),e=[];return t.map((t=>{e.push(t.x,t.y)})),e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=xg(e);return this.annot.setVertexes(t)}))))}}]),e}(Fp),Wp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Sound"}},{key:"point",get:function(){if(!this.annot)return this.annotData.point;const{left:t,top:e}=this.annot.getRect();return[t,e]},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if(e&&Array.isArray(e)&&!(e.length<2))return this.annot.moveTo({left:e[0],top:e[1],action:"move"})}))))}},{key:"soundIcon",get:function(){},set:function(t){}}]),e}(Fp),Yp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Square"}},{key:"dash",get:function(){if(!this.annot)return this.annotData.dash;let t=this.annot.getBorderInfo();const{dashes:e}=t;return e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if(Array.isArray(e))return this.annot.setBorderStyle(1,e)}))))}},{key:"fillColor",get:function(){if(!this.annot)return this.annotData.fillColor;let t=this.annot.getFillColor();return(0,_.convertFromNumberToJSColor)(t)},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=(0,_.colorConvertor)(e,"int",0);return this.annot.setFillColor(t)}))))}},{key:"width",get:function(){return this.annot,this.annot.getBorderWidth()},set:function(e){return gp((n=>{t.prototype._delayOrExec.call(this,(()=>this.annot.setBorderWidth(e)))}))}}]),e}(Fp),Gp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Squiggly"}},{key:"quads",get:function(){if(!this.annot)return this.annotData.quads;let t=this.annot.getQuadPoints(),e=[];return t.map((t=>{t.map((t=>{e.push(t.x,t.y)}))})),e},set:function(e){return gp((n=>{t.prototype._delayOrExec.call(this,(()=>{let t=Eg(e);return this.annot.setRect(t)}))}))}}]),e}(Fp);const Kp={Approved:"Approved",AsIs:"AsIs",Confidential:"Confidential",Departmental:"Departmental",Draft:"Draft",Experimental:"Experimental",Expired:"Expired",Final:"Final",ForComment:"ForComment",ForPublicRelease:"ForPublicRelease",NotApproved:"NotApproved",NotForPublicRelease:"NotForPublicRelease",Sold:"Sold",TopSecret:"TopSecret"};let qp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Stamp"}},{key:"AP",get:function(){if(!this.annot)return this.annotData.AP;let t=this.annot.getIconName();if(t&&"#"===t[0]){let e=t.substr(1);e=Kp[e],e&&(t=e)}return t},set:function(t){}}]),e}(Fp),zp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"StrikeOut"}},{key:"quads",get:function(){if(!this.annot)return this.annotData.quads;let t=this.annot.getQuadPoints(),e=[];return t.map((t=>{t.map((t=>{e.push(t.x,t.y)}))})),e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=Eg(e);return this.annot.setRect(t)}))))}}]),e}(Fp),Jp=function(t){function e(e,n,i){var r;return(r=t.call(this,e,n,i)||this).stateModelValue="Review",r}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Text"}},{key:"noteIcon",get:function(){return this.annot?this.annot.getIconName():this.annotData.noteIcon||"Note"},set:function(e){e||(e="Note"),gp((n=>t.prototype._delayOrExec.call(this,(()=>this.annot.setIconName(e).then((t=>{}))))))}},{key:"point",get:function(){if(!this.annot)return this.annotData.point;const{left:t,top:e}=this.annot.getRect();return[t,e]},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if(e&&Array.isArray(e)&&!(e.length<2))return this.annot.moveTo({left:e[0],top:e[1],action:"move"})}))))}},{key:"state",get:function(){return this.annot?"Marked"===this.stateModel?this.annot.getMarkedState(0):this.annot.getReviewState(0):this.annotData.state},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{if("Review"===this.stateModelValue){switch(e){case"accepted":case"rejected":case"cancelled":case"completed":case"none":break;default:e="none"}return this.annot.addReviewState(e)}if("Marked"===this.stateModelValue)return"marked"!==e&&"unmarked"!==e&&(e="unmarked"),this.annot.addMarkedState(e)}))))}},{key:"stateModel",get:function(){return this.stateModelValue},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>("Marked"!==e&&"Review"!==e&&(e="Review"),this.stateModelValue=e)))))}}]),e}(Fp),Zp=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),S(e,[{key:"type",get:function(){return"Underline"}},{key:"quads",get:function(){if(!this.annot)return this.annotData.quads;let t=this.annot.getQuadPoints(),e=[];return t.map((t=>{t.map((t=>{e.push(t.x,t.y)}))})),e},set:function(e){gp((n=>t.prototype._delayOrExec.call(this,(()=>{let t=Eg(e);return this.annot.setRect(t)}))))}}]),e}(Fp);m(3255);let Xp=function(t,e,n){var i=t.getEvent();if(i.isSensitiveCheck)return;var r=i.target.valueAsString;if(i.param.value&&(r=i.param.value),""==r)return;let o=sg(r,n);if(!r||!o){i.rc=!1;let r=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return r+=` "${n}" `,void e.alertAsync(r)}var s=og(r,n);if(!s){i.rc=!1;let r=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return r+=` "${n}" `,void e.alert(r)}i.value=rg(n,s),i.rc=!0},Qp=function(t,e,n,i,r,o,s,a){var c=t.getEvent();let l=i;if((l<0||l>3)&&(l=0),!c.value)return void(c.rc=!0);let h=c.value;if(!/^[0-9\.\-]+$/.test(h))
//!(IsNumber(wstrChange) &&
{c.rc=!1;let n=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return n+=' "Number" ',void e.alertAsync(n)}let u=c.change,d=h;if(c.willCommit){let n=d.trimLeft();if(0==n.length){c.rc=!0;let n=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return n+=' "Number" ',void e.alertAsync(n)}let i=n;if(i=i.replace(/,/g,"."),!/^[0-9\.\-]+$/.test(i))
//!(IsNumber(wstrChange) &&
{let n=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return n+=' "Number" ',e.alert(n),void(c.rc=!1)}return void(c.rc=!0)}let f=d,p=u||"",g=".";switch(l){case 0:case 1:g=".";break;case 2:case 3:g=","}let m=-1!=f.indexOf(g);for(let n=0;n<p.length;n++)if(p[n]!=g)if("-"!=p[n]){if(!/[0-9\.]/.test(p[n]))return void(c.rc=!1)}else{if(bHasSign)return void(c.rc=!1);if(0!=n)return void(c.rc=!1);if(0!=c.selStart)return void(c.rc=!1);bHasSign=!0}else{if(m){c.rc=!1;let n=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return n+=' "Number" ',void e.alertAsync(n)}m=!0}let v,y=f.substr(0,c.selStart);c.selEnd<f.length&&(v=f.substr(c.selEnd)||""),f=y+p+v,d=f,h=d,c.rc=!0};function tg(t,e,n,i){var r=".",o=",",s="";switch(n){case 0:break;case 1:o="";break;case 2:r=",",o=".";break;case 3:r=",",o="";break;case 4:r=",",o=" "}var a=t.length%3;s=t.substr(0,a);for(var c=a;c<t.length;c+=3)0!==s.length&&(s+=o),s+=t.substr(c,3);if(i>0){for(e=e.substring(0,i);e.length<i;)e+="0";s=s+r+e}return s}function eg(t){var e=t.toString().split(".",2);return null==e||e.length<2?(e=null,0):e[1].length}var ng="January[1]February[2]March[3]April[4]May[5]June[6]July[7]August[8]September[9]October[10]November[11]December[12]Jan[1]Feb[2]Mar[3]Apr[4]Jun[6]Jul[7]Aug[8]Sep[9]Oct[10]Nov[11]Dec[12]";function ig(t){var e=new RegExp("(\\w+)\\["+t+"\\]").exec(ng);return e?e[1]:null}let rg=function(t,e){t=t.replace(/%/g,"%69");var n=[],i=e.getFullYear().toString();i="0000"+i,t=(t=t.replace(/([^y])y{4}(?!y)|(^)y{4}(?!y)/g,"$1"+i.substr(i.length-4,4))).replace(/([^y])y{2}(?!y)|(^)y{2}(?!y)/g,"$1"+i.substr(i.length-2,2)),i=ig(e.getMonth()+1),n["%mmmm"]=i,t=t.replace(/([^m])m{4}(?!m)|(^)m{4}(?!m)/g,"$1%mmmm"),n["%mmm"]=i.substr(0,3),t=(t=t.replace(/([^m])m{3}(?!m)|(^)m{3}(?!m)/g,"$1%mmm")).replace(/([^m])m{1}(?!m)|(^)m{1}(?!m)/g,"$1"+(e.getMonth()+1)),1===(i=(e.getMonth()+1).toString()).length&&(i="0"+i),t=t.replace(/([^m])m{2}(?!m)|(^)m{2}(?!m)/g,"$1"+i),i=function(t){var e=new RegExp("(\\w+)\\["+t+"\\]").exec("Sunday[0]Monday[1]Tuesday[2]Wednesday[3]Thursday[4]Friday[5]Saturday[6]");return e?e[1]:null}(e.getDay()),n["%dddd"]=i,t=t.replace(/([^d])d{4}(?!d)|(^)d{4}(?!d)/g,"$1%dddd"),n["%ddd"]=i.substr(0,3),t=(t=t.replace(/([^d])d{3}(?!d)|(^)d{3}(?!d)/g,"$1%ddd")).replace(/([^d])d{1}(?!d)|(^)d{1}(?!d)/g,"$1"+e.getDate()),1===(i=e.getDate().toString()).length&&(i="0"+i),t=(t=t.replace(/([^d])d{2}(?!d)|(^)d{2}(?!d)/g,"$1"+i)).replace(/([^H])H{1}(?!H)|(^)H{1}(?!H)/g,"$1"+e.getHours()),1===(i=e.getHours().toString()).length&&(i="0"+i),t=t.replace(/([^H])H{2}(?!H)|(^)H{2}(?!H)/g,"$1"+i);let r=e.getHours()>12?e.getHours()-12:e.getHours();return 0==r&&(r=12),t=t.replace(/([^h])h{1}(?!h)|(^)h{1}(?!h)/g,"$1"+r),1===(i=r.toString()).length&&(i="0"+i),t=(t=t.replace(/([^h])h{2}(?!h)|(^)h{2}(?!h)/g,"$1"+i)).replace(/([^M])M{1}(?!M)|(^)M{1}(?!M)/g,"$1"+e.getMinutes()),1===(i=e.getMinutes().toString()).length&&(i="0"+i),t=(t=t.replace(/([^M])M{2}(?!M)|(^)M{2}(?!M)/g,"$1"+i)).replace(/([^s])s{1}(?!s)|(^)s{1}(?!s)/g,"$1"+e.getSeconds()),1===(i=e.getSeconds().toString()).length&&(i="0"+i),t=t.replace(/([^s])s{2}(?!s)|(^)s{2}(?!s)/g,"$1"+i),i=function(t){return t>11?"PM":"AM"}(e.getHours()),t=t.replace(/([^t])t{2}(?!t)|(^)t{2}(?!t)/g,"$1"+i),1===i.length&&(i=i.charAt(0)),t=(t=(t=(t=(t=t.replace(/([^t])t{1}(?!t)|(^)t{1}(?!t)/g,"$1"+i)).replace(/%mmmm/g,n["%mmmm"])).replace(/%mmm/g,n["%mmm"])).replace(/%dddd/g,n["%dddd"])).replace(/%ddd/g,n["%ddd"]),n=null,t=t.replace(/%69/g,"%")},og=function(t,e){return sg(t,e)};function sg(t,e){var n=function(t,e){var n=new Date,i=n.getFullYear(),r=n.getMonth()+1,o=n.getDate(),s=0,a=0,c=0,l=99,h="",u=!1,d=!1;let f=["/","-",",","."],p=["/","-",",","."],g=(t,e)=>{for(let n=0,i=t.length;n<i;n++){let i=t.charAt(n);if(e){if(void 0!==p.find((t=>t==i)))return!0}else{if(void 0!==f.find((t=>t==i)))return!0}}return!1},m=(t,e)=>{let n=t;if(e)for(let t of p){var i=new RegExp("\\"+t,"g");n=n.replace(i,"")}else for(let t of f){i=new RegExp("\\"+t,"g");n=n.replace(i,"")}return n},v=g(e,!1),y=g(t,!0);v&&!y?e=m(e,!1):!v&&y&&(t=m(t,!0));var w=0,b=0;for(;w<e.length&&!u;){var A=e.charAt(w);switch(A){case"y":case"m":case"d":case"H":case"h":case"M":case"s":case"t":var P=b,S=0,C=null;if(e.charAt(w+1)!==A)switch(A){case"y":w++,b++;break;case"m":r=(C=cg(t,b,2)).nRet,w++,b+=S=C.nSkip;break;case"d":o=(C=cg(t,b,2)).nRet,w++,b+=S=C.nSkip;break;case"H":case"h":s=(C=cg(t,b,2)).nRet,w++,b+=S=C.nSkip;break;case"M":a=(C=cg(t,b,2)).nRet,w++,b+=S=C.nSkip;break;case"s":c=(C=cg(t,b,2)).nRet,w++,b+=S=C.nSkip;break;case"t":h="p"===t.charAt(w)||"P"==t.charAt(w),w++,b++}else if(e.charAt(w+1)===A&&e.charAt(w+2)!==A)switch(A){case"y":i=(C=cg(t,b,4)).nRet,w+=2,b+=S=C.nSkip;break;case"m":C=cg(t,b,2),0!=s?a=C.nRet:r=C.nRet,w+=2,b+=S=C.nSkip;break;case"d":C=cg(t,b,2),(w+=2)>=e.length&&(C=cg(t,b,4)),o=C.nRet,b+=S=C.nSkip;break;case"H":case"h":s=(C=cg(t,b,2)).nRet,w+=2,b+=S=C.nSkip;break;case"M":a=(C=cg(t,b,2)).nRet,w+=2,b+=S=C.nSkip;break;case"s":c=(C=cg(t,b,2)).nRet,w+=2,b+=S=C.nSkip;break;case"t":h=!("p"!==t.charAt(b)&&"P"!=t.charAt(b)||"m"!==t.charAt(b+1)&&"M"!==t.charAt(b+1)),w+=2,b+=2}else if(e.charAt(w+1)===A&&e.charAt(w+2)===A&&e.charAt(w+3)!==A)switch(A){case"m":S=(C=lg(t,b)).nSkip;for(var E=C.swRet,x=!1,D=0;D<12;D++)if(E.toLowerCase()===ig(D+1).substr(0,3).toLowerCase()){r=D+1,w+=3,b+=S,x=!0;break}x||(r=(C=cg(t,b,3)).nRet,w+=3,b+=S=C.nSkip);break;case"y":break;default:w+=3,b+=3}else if(e.charAt(w+1)===A&&e.charAt(w+2)===A&&e.charAt(w+3)===A&&e.charAt(w+4)!==A)switch(A){case"y":i=(C=cg(t,b,4)).nRet,b+=S=C.nSkip,w+=4,i<100&&(i=-1,d=!0);break;case"m":x=!1;S=(C=lg(t,b)).nSkip,E=(E=C.swRet).toLowerCase();for(D=0;D<12;D++){var I=ig(D+1);if((I=I.toLowerCase()).indexOf(E,0)>=0){r=D+1,w+=4,b+=S,x=!0;break}}x||(r=(C=cg(t,b,4)).nRet,w+=4,b+=S=C.nSkip);break;default:w+=4,b+=4}else e.charAt(w)!==t.charAt(b)&&(d=!0,u=!0),w++,b++;P===b&&(d=!0,u=!0);break;default:if(t.length<=b)u=!0;else{let n=ag(e.charAt(w)),i=ag(t.charAt(b));(n&&!i||!n&&i)&&(d=!0,u=!0)}w++,b++}}h&&s<12&&(s+=12);!1===h&&12==s&&(s=0);i>=0&&i<=l&&(i+=2e3);(r<1||r>12)&&(d=!0);(o<1||o>31)&&(d=!0);(s<0||s>23)&&(d=!0);(a<0||a>60)&&(d=!0);(c<0||c>60)&&(d=!0);if(!d)return 2!=r||29!=o||e.match(/y/)||(i&=1048572),new Date(i,r-1,o,s,a,c);return null}(t,e);return null==n&&(n=function(t){for(var e=new Date,n=e.getFullYear(),i=e.getMonth()+1,r=e.getDate(),o=e.getHours(),s=e.getMinutes(),a=e.getSeconds(),c=[],l=0;l<6;l++)c[l]=0;var h=!1,u=0,d=0,f=t.length;for(;d<f&&!(u>5);){var p=t.charAt(d);if(ag(p)){var g=cg(t,d,4);c[u++]=g.nRet,d+=g.nSkip}else":"===p&&(h=!0),d++}var m=!0;if(h){if(u<=3)(v=ug(u,c[0],c[1],c[2],o,s,a))&&(o=v.h,s=v.M,a=v.s,m=!1);else if(4===u){(v=hg(2,c[0],c[1],0,n,i,r))&&(n=v.y,i=v.m,r=v.d,(v=ug(2,c[2],c[3],0,o,s,a))&&(o=v.h,s=v.M,a=v.s,m=!1))}else if(5===u){if((v=hg(3,c[0],c[1],c[2],n,i,r))&&(n=v.y,i=v.m,r=v.d,(v=ug(2,c[3],c[4],0,o,s,a))&&(o=v.h,s=v.M,a=v.s,m=!1)),m)(v=hg(2,c[0],c[1],0,n,i,r))&&(n=v.y,i=v.m,r=v.d,(v=ug(3,c[2],c[3],c[4],o,s,a))&&(o=v.h,s=v.M,a=v.s,m=!1))}else if(6===u){(v=hg(3,c[0],c[1],c[2],n,i,r))&&(n=v.y,i=v.m,r=v.d,(v=ug(3,c[3],c[4],c[5],o,s,a))&&(o=v.h,s=v.M,a=v.s,m=!1))}}if(m){var v;(v=hg(u,c[0],c[1],c[2],n,i,r))&&(n=v.y,i=v.m,r=v.d,m=u>3)}if(m)return null;return new Date(n,i-1,r,o,s,a)}(t)),n}function ag(t){return t>="0"&&t<="9"}function cg(t,e,n){var i=[];i.nRet=0,i.nSkip=0;for(var r=e,o=t.length;r<o&&!(r-e>10);r++){var s=t.charAt(r);if(!ag(s))break;if(i.nRet=10*i.nRet+(s-"0"),i.nSkip=r-e+1,i.nSkip>=n)break}return i}function lg(t,e){var n=[];n.swRet="",n.nSkip=0;for(var i=e,r=t.length;i<r;i++){var o=t.charAt(i);if(!(o>="a"&&o<="z"||o>="A"&&o<="Z"))break;n.swRet+=o,n.nSkip=i-e+1}return n}function hg(t,e,n,i,r,o,s){var a=[];if(a.y=r,a.m=o,a.d=s,2===t){if(e>=1&&e<=12&&n>=1&&n<=31)return a.m=e,a.d=n,a;if(e>=1&&e<=31&&n>=1&&n<=12)return a.m=n,a.d=e,a}else if(t>=3){if(e>12&&n>=1&&n<=12&&i>=1&&i<=31)return a.y=e,a.m=n,a.d=i,a;if(e>=1&&e<=12&&n>=1&&n<=31&&i>31)return a.y=i,a.m=e,a.d=n,a;if(e>=1&&e<=31&&n>=1&&n<=12&&i>31)return a.y=i,a.m=n,a.d=e,a}return null}function ug(t,e,n,i,r,o,s){var a=[];if(a.h=r,a.M=o,a.s=s,2===t){if(e>=0&&e<=23&&n>=0&&n<=59)return a.h=e,a.M=n,a.s=0,a}else if(3===t&&e>=0&&e<=23&&n>=0&&n<=59&&i>=0&&i<=59)return a.h=e,a.M=n,a.s=i,a;return null}const dg=(t,e,n)=>{let i="",r=0;for(let o=0;o<e.length;o++)switch(e[o]){case"9":for(;r<t.length;){let e=r;if(r++,t[e]>="0"&&t[e]<="9"){i+=t[e];break}}if(r>=t.length&&n)return i;break;case"A":if(!(r<t.length))return i;i+=t[r++];break;case"O":let s=r;if(r++,t[s].match(/[0-9a-zA-Z]/)&&(i+=t[s]),r>=t.length&&n)return i;break;case"X":i+=t[r++];break;default:i+=e[o],e[o]==t[r]&&r++}return i},fg=(t,e)=>{switch(e){case"9":let n=parseInt(t);return 0<=n&&n<=9;case"A":return/[a-zA-Z]/.test(t);case"O":let i=parseInt(t);return 0<=i&&i<=9||/[a-zA-Z]/.test(t);case"X":case" ":return!0;default:return t===e}},pg=(t,e,n)=>{var i=t.getEvent();let r=i.value;if(0==r.length)return void(i.rc=!0);let o=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");if(o+=' "'+n+'" ',i.willCommit){if(r.length>n.length)return i.rc=!1,void e.alertAsync(o);let t=0;if(r=dg(r,n,!0),r.length==n.length)for(let e=0;e<r.length&&fg(r[e],n[t]);e++)t++;return t!=n.length||t!=r.length&&n.length>0?(i.rc=!1,void e.alertAsync(o)):(i.change=r,r)}let s=i.change;if(!s||0==s.length)return void(i.rc=!0);let a;i.selStart;if(a=i.selStart<i.selEnd?r.replace(r.substr(i.selStart,i.selEnd),s):r.substr(0,i.selStart)+s+r.substr(i.selEnd),a.length>n.length){let r=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return r+=' "'+n+'" ',e.alert(r),void(i.rc=!1)}let c=dg(a,n);if(c.length>n.length){i.rc=!1;let r=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return r+=' "'+n+'" ',void e.alertAsync(r)}return i.rc=!0,c};var gg={AFSimple_Calculate:function(t,e,n){var i=t.getEvent();if(!i.isSensitiveCheck){var r="",o=0,s=NaN;switch(e){case"AVG":for(var a=0;a<n.length;a++){var c=parseFloat(t.getFieldValue(n[a]));if(!isNaN(c)){var l=eg(c);o=o>l?o:l,isNaN(s)&&(s=0),s+=c}}r=isNaN(s)?"0":s/n.length;break;case"SUM":for(var h=0;h<n.length;h++){var u=parseFloat(t.getFieldValue(n[h]));if(!isNaN(u)){var d=eg(u);o=o>d?o:d,isNaN(s)&&(s=0),s+=u}}r=isNaN(s)?"0":s;break;case"PRD":for(var f=NaN,p=0;p<n.length;p++){var g=parseFloat(t.getFieldValue(n[p]));isNaN(g)&&(g=0);var m=eg(g);o=o>m?o:m,isNaN(f)&&(f=1),f*=g}r=isNaN(f)?"0":f;break;case"MIN":for(var v=NaN,y=0;y<n.length;y++){var w=parseFloat(t.getFieldValue(n[y]));if(!isNaN(w)){var b=eg(w);o=o>b?o:b,isNaN(v)&&(v=w),v>w&&(v=w)}}r=isNaN(v)?"0":v;break;case"MAX":for(var A=NaN,P=0;P<n.length;P++){var S=parseFloat(t.getFieldValue(n[P]));if(!isNaN(S)){var C=eg(S);o=o>C?o:C,isNaN(A)&&(A=S),A<S&&(A=S)}}r=isNaN(A)?"0":A}i.valueSetted=!0,i.value=r,i.rc=!0}},AFRange_Validate:function(t,e,n,i,r,o){var s=t.getEvent();if(!s.isSensitiveCheck){var a,c=s.target,l="",h=s.value;a=parseFloat(h),isNaN(a)?s.value=c.value:(n&&r?(a<i||a>o)&&(l="Value should be greater than "+i+" and less than "+o+"."):n?a<i&&(l="Value should be greater than "+i+"."):r&&a>o&&(l="Value should be less than "+o+"."),""!==l?(e.alert(l),s.value=c.value,s.rc=!1):s.rc=!0)}},AFNumber_Format:function(t,e,n,i,r,o,s,a){var c=t.getEvent();if(!c.isSensitiveCheck){var l=c.value;if((c.param.value||0===c.param.value)&&(l=c.param.value),""!==l){if(isNaN(l)){c.value="",c.rc=!1;let n=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return n+=' "Number" ',void e.alertAsync(n)}var h=(l=parseFloat(l))<0?-1:1;if(isNaN(l)){c.value=l,c.rc=!1;let n=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return n+=' "Number" ',void e.alertAsync(n)}var u="";u=(2===r||3===r)&&h<0?"(":"",a&&(u+=s);var d=(l*=h).toString().split(".",2),f=d[0],p="";d.length>1&&(p=d[1]),u+=tg(f,p,i,n),a||(u+=s),(2===r||3===r)&&h<0&&(u+=")"),(0!==r||a)&&(l=Math.abs(l)),1!==r&&3!==r||(h<0?c.engineTarget.setDAFontColor(["RGB",1,0,0]):c.engineTarget.setDAFontColor(["RGB",0,0,0])),h<0&&0===r&&(u="-"+u),c.value=u,c.rc=!0}else c.value=""}},AFTime_Format:function(t,e,n){if("number"==typeof(n=["HH:MM","h:MM tt","HH:MM:ss","h:MM:ss tt"][n])){let t=n;n=t>=0&&t<cFormat.length?cFormat[t]:""}Xp(t,e,n)},AFTime_FormatEx:Xp,AFDate_FormatEx:function(t,e,n){var i=t.getEvent();if(i.format=n,!i.isSensitiveCheck){n&&0!=n.length||(n="mm/dd/yyyy");var r=i.target.valueAsString;if(i.param.value&&(r=i.param.value),""!=r){if(!r){i.rc=!1;let r=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return r+=` "${n}" `,void e.alertAsync(r)}var o=og(r,n);if(!o){i.rc=!1;let r=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return r+=` "${n}" `,void e.alert(r)}i.value=rg(n,o),i.rc=!0}}},AFPercent_Format:function(t,e,n,i){var r=t.getEvent();if(!r.isSensitiveCheck){var o=r.target.value;if(o&&""!=o){if(o=parseFloat(100*o),isNaN(o)){r.value=r.target.value,r.rc=!0;let n=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return n+=' "Percentage" ',void e.alertAsync(n)}var s=o.toString().split(".",2),a=s[0],c="";s.length>1&&(c=s[1]);var l=tg(a,c,i,n)+"%";r.value=l,r.rc=!0}}},AFMergeChange:function(t){var e,n,i=t.value;return t.willCommit?t.value:(e=t.selStart>=0?i.substring(0,t.selStart):"",n=t.selEnd>=0&&t.selEnd<=i.length?i.substring(t.selEnd,i.length):"",e+t.change+n)},AFNumber_Keystroke:Qp,AFParseDateEx:og,AFMakeNumber:function(t){return parseFloat(t)||0},AFDate_KeystrokeEx:(t,e,n)=>{var i=t.getEvent();if(!i.isSensitiveCheck){var r=i.target.valueAsString;if(r){var o=og(r,n);if(!o){i.rc=!1;let r=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return r+=` "${n}" `,void e.alertAsync(r)}i.value=rg(n,o),i.rc=!0}else i.rc=!0}},AFSpecial_Format:(t,e,n)=>{var i=t.getEvent();let r,o=i.value;if(!o||o.length<1)return void(i.rc=!0);switch(o=""+o,n){case 0:r="99999";break;case 1:r="99999-9999";break;case 2:r=o.length>=10?"(999) 999-9999":"999-9999";break;case 3:r="999-99-9999"}let s=dg(o,r);if(s.length!=r.length){i.rc=!1;let n=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");return n+=` "${r}" `,void e.alertAsync(n)}i.value=s,i.rc=!0},FXFormatDate:rg,AFSpecial_Keystroke:(t,e,n)=>{var i=t.getEvent();let r=i.value;if(r.length<1)return void(i.rc=!0);let o,s=i.change;switch(n){case 0:o="99999";break;case 1:case 3:o="999999999";break;case 2:{let n=r;if(0==n.length&&0==s.length)return void(i.rc=!0);if(i.willCommit){let r=/^(\(\d{3}\)\s?)?\d{3}-?\d{4}$|^(\d{3}\s?)?\d{3}-?\d{4}$/,o=n.match(r);if(i.rc=!!o,!o){let n=t.PDFViewer.i18n.t("viewer_:pdfjs.valueChangedError");n+=' "/^((d{3})s?)?d{3}-?d{4}$|^(d{3}s?)?d{3}-?d{4}$/" ',e.alert(n)}return}{let t=i.selStart,e=i.selEnd;if(e<0&&(e=strSrc.length-1),n=n.substr(0,t)+s+n.substr(e),n.length-14>0)return void(i.rc=!1);let r=/^\(?\d*\)?\s?\d*-?\d*$/,o=n.match(r);return void(i.rc=!!o)}}}return pg(t,e,o)},AFPercent_Keystroke:(...t)=>Qp.apply(void 0,t),AFSpecial_KeystrokeEx:(t,e,n)=>{var i=t.getEvent();let r=pg(t,e,n);void 0!==r&&(i.target.value=r)},ANSB_None:0,ANSB_Page:1,ANSB_Author:2,ANSB_ModDate:3,ANSB_Type:4,ANFB_ShouldNone:7,ANFB_ShouldPrint:0,ANFB_ShouldView:1,ANFB_ShouldEdit:2,ANFB_ShouldAppearInPanel:3,ANFB_ShouldSummarize:4,ANFB_ShouldExport:5};function mg(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const{ANSB_Author:vg,ANSB_ModDate:yg,ANSB_Type:wg,ANFB_ShouldPrint:bg,ANFB_ShouldView:Ag,ANFB_ShouldEdit:Pg}=gg;let Sg={line:Hp,circle:Mp,square:Yp,highlight:Bp,squiggly:Gp,underline:Zp,strikeout:zp,freetext:Np,caret:kp,ink:Vp,stamp:qp,polyline:jp,polygon:$p,text:Jp,fileattachment:Lp,sound:Wp};const Cg=t=>{let e=[];return t.map((t=>{let n=t[0];if(Array.isArray(n))return void t.map(((t,n)=>{let i={};i.type=0===n?1:2,i.x=t[0],i.y=t[1],e.push(i)}));let i=Math.floor(t.length/2),r=t;for(let t=0;t<i;t++){let n=r.slice(2*t,2*t+2),i={};i.type=0===t?1:2,i.x=n[0],i.y=n[1],e.push(i)}})),e},Eg=t=>{let e=Math.floor(t.length/2),n=[],i=[],r=t;for(let t=0;t<2*e;t++)[t]%2==0?i.push(r[t]):n.push(r[t]);return{left:Math.min.apply(Math,i),bottom:Math.min.apply(Math,n),right:Math.max.apply(Math,i),top:Math.max.apply(Math,n)}},xg=t=>{let e=[],n=Math.floor(t.length/2),i=t;for(let t=0;t<n;t++){let n=i.slice(2*t,2*t+2);e.push({x:n[0],y:n[1]})}return e};let Dg=function(){function t(t){this.pdfViewer=t}var e=t.prototype;return e.getAnnotClass=function(t){let e=Sg[t];return e||Rp},e.getAnnots=function(t,e,n,i){let r;return r=e===bg?t.filter((t=>t.print)):e===Ag?t.filter((t=>!t.noView)):e===Pg?t.filter((t=>!t.readOnly)):mg(w.Z,t),n===vg?r.sort(((t,e)=>{let n=t.author,i=e.author;return n.localeCompare(i)})):n===yg&&r.sort(((t,e)=>{let n=t.modDate,i=e.modDate;if(null===n&&null===i)return 0;if(null!==n&&null===i)return 1;if(null===n&&null!==i)return-1;{let t=n.getTime(),e=i.getTime();return t>e?1:t<e?-1:0}})),n===wg&&r.sort(((t,e)=>{let n=t.type,i=e.type;return n.localeCompare(i)})),i?r.reverse():r},e.getAnnot=function(t,e,n){let i=t.getType(),r=this.getAnnotClass(i);return r===Rp?null:new r(t,e,n)},e.addAnnot=function(t){let e=t.type=t.type.toLowerCase(),n=null;switch(e){case"line":n=this.buildLineJson(t);break;case"stamp":n=this.buildStampJson(t);break;case"fileattachment":case"text":n=this.buildIconShapeJson(t);break;case"freetext":n=this.buildFreeTextJson(t);break;case"circle":case"square":case"caret":n=this.buildSimpleShapeJson(t),"square"!==e&&"circle"!==e||!t.dash||(n.borderStyle=1,n.borderStyleParam=t.dash);break;case"polyline":case"polygon":case"ink":case"highlight":case"underline":case"strikeout":case"squiggly":n={type:t.type,date:new Date},"polygon"===e&&"PolygonCloud"===t.intent&&(n.intent="PolygonCloud"),"polyline"!==e&&"polygon"!==e&&"ink"!==e||!t.dash||(n.borderStyle=1,n.borderStyleParam=t.dash);break;case"sound":n=this.buildScreenShapeJson(t)}if(!n)return null;n=this.buildJsonKeyValue(t,n);let i=this.getAnnotClass(e);t.creationDate=n.date,t.modDate||(t.modDate=n.date);let r=new i(null,t),o=this.pdfViewer;return gp((()=>o.currentPDFDoc.addAnnot(t.page,n).then((e=>[o.getPDFPageRender(t.page),e])).then((t=>{const e=t[0];if(e.isRendered)return t;const n=e.pagesRender;return n.getPageScale(e.index,n.scale).then((i=>e.render(i,n.rotate).then((()=>t))))})).then((([e,i])=>{const o=i[0],s=e.annotsRender.getAnnotRender(o.getId()).component,a=s.annot;a.info.author=n.author,this.doUpdatePropsAfterAdd(a,t,(e=>{e&&s.redraw(),t.open&&s.showReplyDialog("comment"),r.annot=a}))})))),r},e.showFileDialog=function(t){return new Promise((e=>{this.$jsFileAttachment&&this.$jsFileAttachment.remove(),this.$jsFileAttachment=D()('<input id="jsFileAttachment" type="file" style="display: none;"/>'),D()("body").append(this.$jsFileAttachment),this.$jsFileAttachment.off("change").on("change",(n=>{let i=n.target.files[0];if(!i)return;let r=new FileReader;r.readAsArrayBuffer(i),r.onload=()=>{let n=new Uint8Array(r.result);t.contentType=i.type,t.buffer=n,t.fileName=i.name;let o=this.addAnnot(t);e(o)}})),this.$jsFileAttachment.click()}))},e.doUpdatePropsAfterAdd=function(t,e,n){n&&n()},e.buildRectByPoint=function(t){const e=t[0],n=t[1];return{left:e,bottom:n-20,right:e+20,top:n}},e.buildSimpleShapeJson=function(t){const{left:e,bottom:n,right:i,top:r}=Eg(t.rect);return{type:t.type,date:new Date,rect:{left:e,bottom:n,right:i,top:r}}},e.buildIconShapeJson=function(t){let e;e=t.point?this.buildRectByPoint(t.point):Eg(t.rect);let{AttachIcon:n,noteIcon:i,type:r}=t,o="";switch(r){case"fileattachment":o=n;break;case"text":o=i}return{type:t.type,date:new Date,rect:e,icon:o}},e.buildScreenShapeJson=function(t){let e;return e=t.point?this.buildRectByPoint(t.point):Eg(t.rect),{type:"screen",date:new Date,rect:e}},e.buildStampJson=function(t){const{left:e,bottom:n,right:i,top:r}=Eg(t.rect);let o=.3*(i-e);return{type:t.type,date:new Date,rect:{left:e,bottom:n,right:i,top:n+o}}},e.buildFreeTextJson=function(t){let e={type:t.type,date:new Date};"FreeTextCallout"===t.intent&&t.callout&&(e.calloutLinePoints=xg(t.callout)),e.defaultAppearance={textColor:0,textSize:0},t.textSize&&(t.textSize>=4||t.textSize<=144)&&(e.defaultAppearance.textSize=t.textSize),t.dash&&(e.borderStyle=1,e.borderStyleParam=t.dash),e.intent=t.intent;let n=mg(w.Z,t.rect);return e.calloutLinePoints&&n.push.apply(n,mg(w.Z,t.callout)),e.rect=Eg(n),e.innerRect=Eg(t.rect),e},e.buildLineJson=function(t){let e,n;if(t.points&&2===t.points.length){let n=t.points[0],i=t.points[1];const r=n[0],o=n[1],s=i[0];e={left:r,bottom:i[1],right:s,top:o}}else e=Eg(t.rect);t.doCaption&&(n=t.doCaption);let i={type:"line",date:new Date,rect:e,startStyle:st.LineEndingStyle.None,endStyle:st.LineEndingStyle.None};return t.intent&&(i.intent=t.intent),t.arrowBegin&&(i.startStyle=st.LineEndingStyle[t.arrowBegin]),t.arrowEnd&&(i.endStyle=st.LineEndingStyle[t.arrowEnd]),t.leaderLength&&(i.leaderLineLength=t.leaderLength),t.leaderExtend&&(i.leaderLineExtend=t.leaderExtend),t.dash&&(i.borderStyle=1,i.borderStyleParam=t.dash),i},e.buildFlags=function(t,e){return t.hidden?e.flags=2|e.flags:e.flags=-3&e.flags,t.print||void 0===t.print?e.flags=4|e.flags:e.flags=-5&e.flags,t.noView?e.flags=32|e.flags:e.flags=-33&e.flags,t.readOnly?e.flags=64|e.flags:e.flags=-65&e.flags,t.lock?e.flags=128|e.flags:e.flags=-129&e.flags,t.toggleNoView?e.flags=256|e.flags:e.flags=-257&e.flags,e},e.buildCoords=function(t,e){let n=[];if(t.quads){let e=Math.floor(t.quads.length/8),i=t.quads;for(let t=0;t<e;t++){let e=i.slice(8*t,8*t+8),r=Math.min.apply(Math,[e[0],e[2],e[4],e[6]]),o=Math.max.apply(Math,[e[1],e[3],e[5],e[7]]),s=Math.max.apply(Math,[e[0],e[2],e[4],e[6]]),a=Math.min.apply(Math,[e[1],e[3],e[5],e[7]]);n.push({left:r,top:o,right:s,bottom:a,rotation:0})}}else{const{left:e,bottom:i,right:r,top:o}=Eg(t.rect);n.push({left:e,top:o,right:r,bottom:i,rotation:0})}return e.coords=n,e},e.calcRectByVertices=function(t){let e={},n=0,i=0,r=0,o=0;return t.map(((t,e)=>{const{x:s,y:a}=t;0===e?(n=s,i=s,r=a,o=a):(n=s<n?s:n,i=s>i?s:i,r=a<r?a:r,o=a>o?a:o)})),e.left=n,e.right=i,e.bottom=r,e.top=o,e},e.buildVertices=function(t,e){if(!t.vertices)return e;if("polygon"===t.type||"polyline"===t.type){let n=[],i=Math.floor(t.vertices.length/2),r=t.vertices;for(let t=0;t<i;t++){let e=r.slice(2*t,2*t+2);n.push({x:e[0],y:e[1]})}e.vertexes=n,e.rect=this.calcRectByVertices(n)}return e},e.buildFillColor=function(t,e){return t.fillColor?("circle"!==t.type&&"square"!==t.type&&"line"!==t.type&&"polygon"!==t.type&&"polyline"!==t.type&&"freetext"!==t.type||(e["interior-color"]=(0,_.colorConvertor)(t.fillColor,"int",0),e.interiorColor=e["interior-color"]),e):e},e.buildGestures=function(t,e){if("ink"!==t.type||!t.gestures)return t.rect&&(e.rect=Eg(t.rect)),e;let n=Cg(t.gestures);return e.inkList=n,e.rect={left:0,right:0,top:0,bottom:0},e},e.buildStampAP=function(t,e){if("stamp"!==t.type)return e;const n=this.pdfViewer;let i,r="approved";switch(t.AP&&(r=t.AP.toLowerCase()),r){case"approved":default:i="Approved";break;case"confidential":i="Confidential";break;case"draft":i="Draft";break;case"expired":i="Expired";break;case"final":i="Final"}e.icon=i,e.iconCategory="Static",e.url=ea(n.libPath,"stamps/",n.getCurrentLanguage(),"StandardStamps",e.icon+".pdf");let o={annotType:"stamp",category:e.iconCategory,name:e.icon,fileType:"pdf",url:e.url};return e.iconInfo=o,e},e.buildJsonKeyValue=function(t,e){return t.strokeColor&&(e.color=(0,_.colorConvertor)(t.strokeColor,"int",0),"freetext"===t.type&&(e.defaultAppearance.textColor=e.color)),t.popupOpen&&"freetext"!==t.type&&"sound"!==t.type&&"fileattachment"!==t.type&&(e.open="yes"),t.contents&&(e.contents=t.contents),t.name&&(e.name=t.name),t.author&&(e.title=t.author),t.opacity&&(e.opacity=t.opacity),t.width&&(e.borderWidth=t.width),"C"===t.borderEffectStyle&&(e.borderStyle=5,e.borderStyleParam=0,t.borderEffectIntensity&&(e.borderStyleParam=t.borderEffectIntensity)),e=this.buildFlags(t,e),"highlight"!==t.type&&"strikeout"!==t.type&&"underline"!==t.type&&"squiggly"!==t.type||((e=this.buildCoords(t,e)).rect={left:0,right:0,top:0,bottom:0}),"fileattachment"===t.type?(t.buffer&&(e.buffer=t.buffer,e.fileName=t.fileName),t.attachIcon&&(e.icon=t.attachIcon)):"sound"===t.type&&t.buffer&&(e.multiBuffer=t.buffer,e.fileName=t.fileName,e.contentType=t.contentType),e=this.buildFillColor(t,e),e=this.buildGestures(t,e),e=this.buildStampAP(t,e),e=this.buildVertices(t,e)},t}(),Ig=function(){function t(t,e,n){this.id=t,this.info=e,this.doc=n}return S(t,[{key:"state",get:function(){return this.info.visible},set:function(t){return this.doc.setLayerNodeVisible(this.id,t),this.info.visible=t}},{key:"name",get:function(){return this.info.name}}]),t}();function Rg(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const{ANSB_None:Tg,ANFB_ShouldNone:Fg}=gg,_g=t=>t.jsEngine.getPDFDoc(),kg=t=>t.jsEngine.getPDFForm();let Mg={};const Og=()=>{for(let t in Mg){Mg[t].destroy(),delete Mg[t]}Mg={}};let Lg=function(t){function e(e,n){var i;return(i=t.call(this)||this).jsEngine=e,i.jsApp=n,i._dirty=!1,i._layout="",i._arrTemplate=new Array,i.printParams=new Ap(i.jsEngine,(0,C.Z)(i)),i.annotManage=new Dg(n.viewerApp),i}(0,E.Z)(e,t);var n=e.prototype;return n.addField=function(t,e,n,i){switch(e){case"text":e=6;break;case"button":e=1;break;case"combobox":e=4;break;case"listbox":e=5;break;case"checkbox":e=2;break;case"radiobutton":e=3;break;case"signature":return null}if(i[2]<i[0]){let t=i[0];i[0]=i[2],i[2]=t}if(i[3]>i[1]){let t=i[1];i[1]=i[3],i[3]=t}const r=kg(this).addControl(n,t,e,{left:i[0],top:i[1],right:i[2],bottom:i[3]});return gp((()=>r)),this.getField(t)},n.getOCGs=function(){let t=[],e=_g(this).ocgs;for(let n in e.children)Ng(e.children[n],t,_g(this));return t},n.getPrintParams=function(){return this.printParams},n.getTemplate=function(t){if(!t||""===t)return null;if(this._arrTemplate.length<=0){let e=_g(this).visibleTemplates;if(e&&e.length>0)for(let n=0;n<e.length;n++)if(t===e[n].name){return new Pp(e[n],!1,_g(this))}if(e=_g(this).invisibleTemplates,e&&e.length>0)for(let n=0;n<e.length;n++)if(t===e[n].name){return new Pp(e[n],!0,_g(this))}return null}for(let e=0;e<this._arrTemplate.length;e++){let n=this._arrTemplate[e];if(n.name===t)return n}return null},n.removeTemplate=function(t){if(!t||""===t)return!1;if(_g(this)){var e=this;_g(this).removeTemplate(t).then((n=>{for(let n=0;n<e._arrTemplate.length;n++){if(e._arrTemplate[n].name===t){e._arrTemplate.splice(n,1);break}}}))}},n.print=function(t,e,n,i,r,o,s,a,c){if(this.jsEngine.PDFViewer.webPDFSRPromise)return;if(this.jsEngine.getEvent().isSensitiveCheck)return;let l;l="object"==typeof t?{startIndex:t.firstPage,endIndex:t.lastPage,silent:t.interactive,printType:["page","annot"]}:c?{startIndex:c.firstPage,endIndex:c.lastPage+1,silent:c.interactive,printType:["page","annot"]}:{ui:t,startIndex:e,endIndex:n,silent:i,shrinkToFit:r,asImage:o,reverse:s,printType:["page","annot"]};const h=this.jsEngine.PDFViewer.getPDFDocRender();h&&h.isPrinting()||kg(this).addTask((t=>this.jsEngine.PDFViewer.printPDFDocumentEx(l)),!0)},n.addAnnot=function(t){return"FileAttachment"!==t.type&&"Sound"!==t.type?this.annotManage.addAnnot(t):this.annotManage.showFileDialog(t)},n.syncAnnotScan=function(){return _g(this).getAnnots()},n.getAnnots=function(t){let e=-1,n=Fg,i=Tg,r=!1;t&&(t.nPage>=0&&(e=t.nPage),t.nSortBy>=0&&(i=t.nSortBy),t.nFilterBy>=0&&(n=t.nFilterBy),t.bReverse&&(r=t.bReverse));let o=this.numPages,s=_g(this).pageCache,a=0,c=[];if(-1!==e&&(a=e),a>=o)return null;do{let t=s[a];if(!t){a++;continue}const n=Object.keys(t.annotIdMap);if(!n.length){a++;continue}let i=n.map((e=>({pageIndex:a,annot:t.annotIdMap[e]})));if(c.push.apply(c,Rg(w.Z,i)),-1!==e)break;a++}while(a<o);let l=[];return c.map((t=>{const{pageIndex:e,annot:n}=t;let i=this.annotManage.getAnnot(n,e);i&&l.push(i)})),this.annotManage.getAnnots(l,n,i,r)},n.getAnnot=function(t,e){let n,i=_g(this).pageCache;if(n=i[t],!n)return null;const r=Object.keys(n.annotIdMap);if(!r.length)return null;let o=r.map((t=>n.annotIdMap[t])).find((t=>t.getName()==e));return o?this.annotManage.getAnnot(o,t,this.jsApp):null},n.calculateNow=function(){},n.closeDoc=function(){this.jsEngine.getEvent().isSensitiveCheck||this.jsEngine.closeDoc()},n.deletePages=function({nStart:t,nEnd:e}){return void 0===t&&(t=0),void 0===e&&(e=0),t===e?_g(this).removePages([[t]]):_g(this).removePages([[t,e],[e]])},n.exportAsFDF=function(t={}){const{aFields:e,bAnnotations:n=!1}=t,i=_g(this),r=this.documentFileName.replace(/.pdf$/i,".fdf");let o=1;n&&(o=3);let s=Promise.resolve();const a=[];e&&(s=i.getAnnots().then((t=>{t.forEach((t=>{t.forEach((t=>{const n=t.objectNumber,i=t.getPage().getId();if(e.indexOf(n)>-1){const t=a[i]||[];t.push(n),a[i]=t}}))}))}))),s.then((()=>i.api.exportToFDF(i.id,0,o,a))).then((t=>{Ho(t,r,"application/vnd.fdf")}))},n.getField=function(t){if(!t)return null;let e,n=_g(this).getPDFForm().getField(t);return n||(e=_g(this).getPDFForm().getField(t,!0),e)?Mg[t]?(Mg[t]._update(n,e),Mg[t]):Mg[t]=new bp(this.jsEngine,n,e):null},n.getNthFieldName=function(t){if("number"!=typeof t&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid index number: "+t);return _g(this).getPDFForm().getFieldByIndex(t).getName()},n.getPageBox=function(t,e){return[0,0,612,792]},n.getPageRotation=function(t=0){return 90*_g(this).pageCache[t].getRotation()},n.getURL=function(){},n.importAnFDF=function(){const t="import-an-fdf",e=document.querySelector("."+t);e&&e.remove();const n=document.createElement("label");n.setAttribute("class",t),n.style.display="none";const i=document.createElement("input");i.type="file",i.accept=".fdf",n.addEventListener("change",(t=>{const e=t.target.files[0];_g(this).importFormFromFile(e,0),n.remove()})),n.appendChild(i),document.body.append(n),setTimeout((()=>{n.click()}),100)},n.removeField=function(t){delete Mg[t],kg(this).removeField(t)},n.resetForm=function(t){if(this.jsEngine.getEvent().isSensitiveCheck)return;let e;const n=this.jsEngine.PDFViewer.getCurrentActivatable();n&&n.annot&&(e=n.annot.getField()),kg(this).resetForm(t,0,e)},n.submitForm=function(t,e,n,i,r,o,s,a,c,l,h,u,d,f,p,g,m,v,y,w,b,A,P,S){let C=this.jsEngine.PDFViewer;if(this.jsEngine.getEvent().isSensitiveCheck)return;let E=0;switch(1===arguments.length&&"object"==typeof arguments[0]&&(t=arguments[0].cURL,e=arguments[0].bFDF,n=arguments[0].bEmpty,i=arguments[0].aFields,r=arguments[0].bGet,o=arguments[0].bAnnotations,s=arguments[0].bXML,a=arguments[0].bIncrChanges,c=arguments[0].bPDF,l=arguments[0].bCanonical,h=arguments[0].bExclNonUserAnnots,u=arguments[0].bExclFKey,d=arguments[0].cPassword,f=arguments[0].bEmbedForm,p=arguments[0].oJavaScript,g=arguments[0].cSubmitAs,m=arguments[0].bInclNMKey,v=arguments[0].aPackets,y=arguments[0].cCharset,w=arguments[0].oXML,b=arguments[0].cPermID,A=arguments[0].cInstID,P=arguments[0].cUsageRights,S=arguments[0].bHTMLForm),r&&(E|=Ee.FlagGetMethod),(c||"PDF"==g)&&(E|=Ee.FlagSubmitAsPDF),(u||"EXCL"==g)&&(E|=Ee.FlagExclFKey),S&&(E|=Ee.FlagExportFormat),g){case"FDF":break;case"XFDF":E|=Ee.FlagAsXFDF;break;case"HTML":E|=Ee.FlagExportFormat;break;case"XDP":case"XML":case"XFD":return void console.error("not support submition format")}let x=C.i18n.t("viewer_:pdfjs.safeModeSubmit",{URL:t,interpolation:{escapeValue:!1}});confirm(x)&&kg(this).submitForm(t,i,E).catch((t=>{this.jsApp.alert(C.i18n.t("viewer_:error.c-1"))}))},n.cleanFields=function(){Mg={}},n.createIcon=function(t,e,n){return{name:"",stream:t,width:e,height:n}},S(e,[{key:"author",get:function(){return _g(this).getMetadataValue("Author")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return _g(this).setMetadataValue("Author",t)}},{key:"calculate",get:function(){return kg(this).calculationEnabled},set:function(t){return kg(this).calculationEnabled=t}},{key:"creationDate",get:function(){return _g(this).getMetadataValue("CreationDate")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return _g(this).setMetadataValue("CreationDate",t)}},{key:"dirty",get:function(){return this._dirty},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return this._dirty=t}},{key:"docID",get:function(){return _g(this).info.fileID.slice(0,2)}},{key:"creator",get:function(){return _g(this).getMetadataValue("Creator")},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return _g(this).setMetadataValue("Creator",t)}},{key:"documentFileName",get:function(){return _g(this).info.fileName}},{key:"external",get:function(){return!1}},{key:"filesize",get:function(){return _g(this).info.fileSize}},{key:"info",get:function(){return _g(this).metadata}},{key:"icons",get:function(){return _g(this).getNameTreeIcons()}},{key:"keywords",get:function(){return _g(this).getMetadataValue("Keywords")}},{key:"layout",get:function(){switch(this.jsEngine.PDFViewer.getPDFDocRender().getViewMode().constructor.getName()){case"single-page-view-mode":return"SinglePage";case"continuous-view-mode":return"OneColumn";case"facing-page-view-mode":return"TwoPageLeft";case"facing-continuous-page-view-mode":return"TwoColumnLeft";case"h-continuous-view-mode":return"OneRow"}}},{key:"modDate",get:function(){return _g(this).getMetadataValue("ModDate")}},{key:"numFields",get:function(){return _g(this).getPDFForm().getFieldCount()}},{key:"numPages",get:function(){return _g(this).getPageCount()}},{key:"path",get:function(){return"c:/fakepath/"+_g(this).info.fileName}},{key:"pageNum",get:function(){let t=this.jsEngine.PDFViewer;const e=t.getCurrentActivatable();return e&&e.annot?e.annot.getPage().getIndex():t.getPDFDocRender().getCurrentViewMode().getCurrentPageIndex()},set:function(t){if(!this.jsEngine.getEvent().isSensitiveCheck)return t>=this.numPages&&(t=this.numPages-1),this.jsEngine.PDFViewer.goToPage(t,0,0,!1),t}},{key:"templates",get:function(){}}],[{key:"name",get:function(){return"Doc"}}]),e}(rp);const Ng=function(t,e,n){t.hasLayer&&e.push(new Ig(t.id,t,n));for(let i in t.children)Ng(t.children[i],e,n)},Bg=function(t){switch(Object.prototype.toString.call(t)){case"[object String]":return["true","t","yes","y","on","1"].includes(t.trim().toLowerCase());case"[object Number]":return 1===t.valueOf();case"[object Boolean]":return t.valueOf();default:return!1}};var Vg=m(9611);function Ug(){Ug=function(t,e){return new n(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function n(t,i,r){var o=new RegExp(t,i);return e.set(o,r||e.get(t)),(0,Vg.Z)(o,n.prototype)}function i(t,n){var i=e.get(n);return Object.keys(i).reduce((function(e,n){var r=i[n];if("number"==typeof r)e[n]=t[r];else{for(var o=0;void 0===t[r[o]]&&o+1<r.length;)o++;e[n]=t[r[o]]}return e}),Object.create(null))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&(0,Vg.Z)(t,e)}(n,RegExp),n.prototype.exec=function(e){var n=t.exec.call(this,e);if(n){n.groups=i(n,this);var r=n.indices;r&&(r.groups=i(r,this))}return n},n.prototype[Symbol.replace]=function(n,r){if("string"==typeof r){var o=e.get(this);return t[Symbol.replace].call(this,n,r.replace(/\$<([^>]+)>/g,(function(t,e){var n=o[e];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof r){var s=this;return t[Symbol.replace].call(this,n,(function(){var t=arguments;return"object"!=typeof t[t.length-1]&&(t=[].slice.call(t)).push(i(t,s)),r.apply(this,t)}))}return t[Symbol.replace].call(this,n,r)},Ug.apply(this,arguments)}const Hg=Ug(/(?:%(([+0-]|\x2D\+))?(\d+)?(\d+\$)?(\.\d+)?([%BCESb-iosux]))|(\\%)/g,{flag:1,width:3,position:4,precision:5,conversion:6}),jg=(t,e)=>e.placeholder,$g=(t=>{var e;const n=(t,e,n)=>"-"===n?t.padEnd(e," "):"-+"===n?((Number(t)>=0?"+":"")+t).padEnd(e," "):"+"===n?((Number(t)>=0?"+":"")+t).padStart(e," "):"0"===n?t.padStart(e,"0"):t.padStart(e," "),i=null!==(e=null==t?void 0:t.formatUnboundExpression)&&void 0!==e?e:jg,r={};return(t,...e)=>{let o=r[t];o||(o=r[t]=(t=>{let e;const n=[];let i=0,r=0,o=null;for(;null!==(e=Hg.exec(t));){e.index>r&&(o={literal:t.slice(r,e.index),type:"literal"},n.push(o));const s=e[0];r=e.index+s.length,"\\%"===s||"%%"===s?o&&"literal"===o.type?o.literal+="%":(o={literal:"%",type:"literal"},n.push(o)):e.groups&&(o={conversion:e.groups.conversion,flag:e.groups.flag||null,placeholder:s,position:e.groups.position?Number.parseInt(e.groups.position,10)-1:i++,precision:e.groups.precision?Number.parseInt(e.groups.precision.slice(1),10):null,type:"placeholder",width:e.groups.width?Number.parseInt(e.groups.width,10):null},n.push(o))}return r<=t.length-1&&(o&&"literal"===o.type?o.literal+=t.slice(r):n.push({literal:t.slice(r),type:"literal"})),n})(t));let s="";for(const r of o)if("literal"===r.type)s+=r.literal;else{let o=e[r.position];if(void 0===o)s+=i(t,r,e);else if("b"===r.conversion)s+=Bg(o)?"true":"false";else if("B"===r.conversion)s+=Bg(o)?"TRUE":"FALSE";else if("c"===r.conversion)s+=o;else if("C"===r.conversion)s+=String(o).toUpperCase();else if("i"===r.conversion||"d"===r.conversion)o=String(Math.trunc(o)),null!==r.width&&(o=n(o,r.width,r.flag)),s+=o;else if("e"===r.conversion)s+=Number(o).toExponential();else if("E"===r.conversion)s+=Number(o).toExponential().toUpperCase();else if("f"===r.conversion)null!==r.precision&&(o=Number(o).toFixed(r.precision)),null!==r.width&&(o=n(String(o),r.width,r.flag)),s+=o;else if("o"===r.conversion)s+=(Number.parseInt(String(o),10)>>>0).toString(8);else if("s"===r.conversion)null!==r.width&&(o=n(String(o),r.width,r.flag)),s+=o;else if("S"===r.conversion)null!==r.width&&(o=n(String(o),r.width,r.flag)),s+=String(o).toUpperCase();else if("u"===r.conversion)s+=Number.parseInt(String(o),10)>>>0;else{if("x"!==r.conversion)throw new Error("Unknown format specifier.");o=(Number.parseInt(String(o),10)>>>0).toString(16),null!==r.width&&(o=n(String(o),r.width,r.flag)),s+=o}}return s}})();let Wg=function(){function t(t){this.jsGlobalAPI=t}var e=t.prototype;return e.isDigit=function(t){return t>="0"&&t<="9"},e.parstDataType=function(t){let e=!1;for(let n=0;n<t.length;n++){let i=t.substr(n,1);if("%"!==i){if(e){if("c"==i||"C"==i||"d"==i||"i"==i||"o"==i||"u"==i||"x"==i||"X"==i)return 0;if("e"==i||"E"==i||"f"==i||"g"==i||"G"==i)return 1;if("s"==i||"S"==i)return 2;if("."==i||"+"==i||"-"==i||"#"==i||" "==i||"l"==i||this.isDigit(i))continue;break}}else e=!0}return-1},e.printd=function(t,e,n){if(!e||!e instanceof Date||isNaN(e.getTime()))return"";if(t){if("string"==typeof t)return this.jsGlobalAPI.FXFormatDate(t,e);if("number"==typeof t)switch(t){case 0:var i="D:";return i+=e.getFullYear(),i+=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,i+=e.getDate()<10?"0"+e.getDate():e.getDate(),i+=e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours(),i+=e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes(),i+=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();case 1:i="";return i+=e.getFullYear()+".",i+=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,i+=".",i+=e.getDate()<10?"0"+e.getDate():e.getDate(),i+=" ",i+=e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours(),i+=":",i+=e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes(),i+=":",i+=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();case 2:i="";return i+=e.getFullYear()+"/",i+=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,i+="/",i+=e.getDate()<10?"0"+e.getDate():e.getDate(),i+=" ",i+=e.getUTCHours()<10?"0"+e.getUTCHours():e.getUTCHours(),i+=":",i+=e.getUTCMinutes()<10?"0"+e.getUTCMinutes():e.getUTCMinutes(),i+=":",i+=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();default:return""}return""}return""},e.printf=function(t,e){if(!t||!e)return"";e instanceof Array||(e=[e]);var n=arguments.length;if(n<1)return"";var i=t,r=(t=t.replace("%+d","%+1d")).indexOf("%,"),o=!1,s=",";if(-1!=r){var a=parseInt(t.substr(r+2,1));if(a>4)return"";switch(a){case 0:o=!0,s=",",".";break;case 1:".";break;case 2:o=!0,s=".",",";break;case 3:","}var c="0",l=t.substr(r+3,1);"0"===l?c="0":"+"===l&&(c="+");var h=0,u=t.indexOf(".",r+4);h=u>r+3?parseInt(t.substr(r+4,u-r-4)):parseInt(t.substr(r+4,1));var d=t.length;if(u>-1&&r+u<d){var f=t.substr(r+1,u-1);t=t.replace(f,"")}else if("."===l&&-1===u){u=r+3;f=t.substr(r+1,u-1);t=t.replace(f,"")}else{var p=d-2;if(!(r+1+p<d&&p>=0))return e;f=t.substr(r+1,p);t=t.replace(f,"")}}var g=0,m=0,v=t;v="S"+v;for(var y=new Array,w=!1;-1!=g;){var b="";b=-1===(m=v.indexOf("%",g+1))?v.substr(g):v.substr(g,m-g),y.push(b),g=m}for(var A="",P="",S=0;S<y.length;S++){if(P=A,P+=y[S],0===S){A=P;continue}if(S>=n)break;let t;switch(this.parstDataType(P)){case 0:{let n=parseInt(e[S-1]);if(isNaN(n)&&(n=0),P.indexOf("%x")>-1){let e=P.split("%x"),i=$g("%x",n).toLocaleUpperCase();e.splice(1,0,i),t=e.join("")}else t=$g(P,n);w=!0}break;case 1:{let n=parseFloat(e[S-1]);isNaN(n)&&(n=0),t=$g(P,n),w=!0}break;case 2:{let n=parseFloat(e[S-1]);isNaN(n)&&(n=""),t=$g(P,n)}}A=t}""===A&&(i.replace("%,","%"),A=i);var C=(A=A.substr(1)).indexOf(".");if(C<0)C=A.length;else{f=(A=A.slice(0,C)+"."+A.slice(C)).substr(C+1,1);A=A.replace(f,"")}if(o&&w)for(var E=C-3;E>0;E-=3)A=A.slice(0,E)+s+A.slice(E);var x=A.length;if(h>x)for(E=0;E<h-x;E++)A=c+A;return A},e.printx=function(t,e){if(!t||!e)return"";for(var n=e.length,i=t.length,r="",o=0,s=0;s<i;s++){var a=t[s];switch(a){case"?":r+=e[o],o++;break;case"X":for(;o<n;){if(e[o]>="0"&&e[o]<="9"||e[o]>="a"&&e[o]<="z"||e[o]>="A"&&e[o]<="Z"){r+=e[o],o++;break}o++}break;case"A":for(;o<n;){if(e[o]>="a"&&e[o]<="z"||e[o]>="A"&&e[o]<="Z"){r+=e[o],o++;break}o++}break;case"9":for(;o<n;){if(e[o]>="0"&&e[o]<="9"){r+=e[o],o++;break}o++}break;case"*":r+=e.substring(o),o=n-1;break;case"\\":case"=":break;case">":e=e.toLocaleUpperCase();break;case"<":e=e.toLocaleLowerCase();break;default:r+=a}}return r},e.scand=function(t,e){return new Date(e)},t}();var Yg=m(4563),Gg=m.n(Yg);var Kg={Times:"Times-Roman",TimesB:"Times-Bold",TimesI:"Times-Italic",TimesBI:"Times-BoldItalic",Helv:"Helvetica",HelvB:"Helvetica-Bold",HelvI:"Helvetica-Oblique",HelvBI:"Helvetica-BoldOblique",Cour:"Courier",CourB:"Courier-Bold",CourI:"Courier-Oblique",CourBI:"Courier-BoldOblique",Symbol:"Symbol",ZapfD:"ZapfDingbats"};let qg=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.setHandler=function(t){this.handler=t},n.clear=function(){this.impl?this.impl.clear():window.console.clear()},n.show=function(){return this.handler("show"),!0},n.hide=function(){return!0},n.println=function(t){t instanceof Object&&(t=t.toString()),window.console.log(t)},e}(rp);const zg={border:{s:"solid",b:"beveled",d:"dashed",i:"inset",u:"underline"},style:{ch:"check",cr:"cross",di:"diamond",ci:"circle",st:"star",sq:"square"},display:{visible:0,hidden:1,noPrint:2,noView:3},global:{setPersistent:()=>{}},console:new qg,color:hp,font:Kg,scaleWhen:mp};for(const kC in zg){function MC(){}MC.prototype=Object.freeze(zg[kC]),zg[kC]=new MC}let Jg=function(){function t(t,e){this._JSEngine=t,this._app=e}var e=t.prototype;return e.__destroy__=function(){this._app=null,this._JSEngine=null},e.setJSEvent=function(t){window.jsEvent=t,this.jsEvent=t},e.AFSimple_Calculate=function(t,e){return gg.AFSimple_Calculate(this.JSEngine,t,e)},e.AFRange_Validate=function(t,e,n,i){return gg.AFRange_Validate(this.JSEngine,this.app,t,e,n,i)},e.AFNumber_Format=function(t,e,n,i,r,o){return gg.AFNumber_Format(this.JSEngine,this._app,t,e,n,i,r,o)},e.AFTime_Format=function(t){return gg.AFTime_Format(this.JSEngine,this._app,t)},e.AFTime_FormatEx=function(t){return gg.AFTime_FormatEx(this.JSEngine,this._app,t)},e.AFTime_Keystroke=function(t){return gg.AFDate_KeystrokeEx(this.JSEngine,this._app,t)},e.AFTime_KeystrokeEx=function(t){return gg.AFDate_KeystrokeEx(this.JSEngine,this._app,t)},e.AFDate_FormatEx=function(t){return gg.AFDate_FormatEx(this.JSEngine,this._app,t)},e.AFPercent_Format=function(t,e){return gg.AFPercent_Format(this.JSEngine,this._app,t,e)},e.AFMergeChange=function(t){return gg.AFMergeChange(t)},e.AFNumber_Keystroke=function(t,e,n,i,r,o){return gg.AFNumber_Keystroke(this.JSEngine,this._app,t,e,n,i,r,o)},e.AFParseDateEx=function(t,e){return gg.AFParseDateEx(t,e)},e.AFMakeNumber=function(t){return gg.AFMakeNumber(t)},e.AFDate_KeystrokeEx=function(t){return gg.AFDate_KeystrokeEx(this.JSEngine,this._app,t)},e.AFSpecial_Format=function(t){return gg.AFSpecial_Format(this.JSEngine,this.app,t)},e.FXFormatDate=function(t,e){return gg.FXFormatDate(t,e)},e.AFSpecial_Keystroke=function(t){return gg.AFSpecial_Keystroke(this.JSEngine,this._app,t)},e.AFPercent_Keystroke=function(t){return gg.AFPercent_Keystroke(this.JSEngine,this._app,{...t})},e.AFSpecial_KeystrokeEx=function(t){return gg.AFSpecial_KeystrokeEx(this.JSEngine,this._app,t)},S(t,[{key:"JSEngine",get:function(){if(!this._JSEngine)throw new Error("JSEngine is not initialized or destroyed!");return this._JSEngine}},{key:"app",get:function(){if(!this._app)throw new Error("JSEngine is not initialized or destroyed!");return this._app}}]),t}();Object.keys(gg).forEach((t=>{"function"!=typeof gg[t]&&(Jg[t]=gg[t])})),y(Jg.prototype,zg);let Zg=URL.createObjectURL(new Blob([Gg()({})],{type:"text/html"})),Xg="ActiveXObject"in self||navigator.userAgent.toLowerCase().match(/msie [\d\.]+/)||navigator.userAgent.toLowerCase().match(/MicroMessenger/i)||navigator.userAgent.toLowerCase().match(/mibrowser/i)||navigator.userAgent.toLowerCase().match(/Html5Plus/i);let Qg=function(){function t(t,e,n,i){this.JSEngine=t;let r=function(i){function r(){var r;return(r=i.call(this,t,e)||this).util=new Wg((0,C.Z)(r)),r.doc=n,r.this=n,r.getEvent=e=>t.getEvent(e),r.postRunScripts=e=>t.postRunScripts(e),r}return(0,E.Z)(r,i),r}(Jg);this.globalVariables=new r,this.noFrame=Xg||i}var e=t.prototype;return e.init=function(){if(!this.noFrame)return this.preFrame=document.createElement("iframe"),this.preFrame.style.display="none",this.preFrame.style.position="absolute",this.preFrame.style.top=0,this.enable=!1,new Promise(((t,e)=>{this.preFrame.onload=t,this.preFrame.onerror=e,this.preFrame.src=Zg,document.body.appendChild(this.preFrame)})).then((t=>{this.enable=!0,this.preFrame.contentWindow.initJS(this.globalVariables)}));!function(t){const e=new function(){const t=Object.getOwnPropertyDescriptors(window);delete t.self,delete t.top,delete t.parent,delete t.globalThis,delete t.global;for(const e in t)e[0].toLowerCase()===e[0]&&Object.defineProperty(this,e,{get:()=>window[e],set:t=>{window[e]=t}});this.top=this,this.parent=window,this.self=this,this.globalThis=this,this.global=this},n=function(){var n=["jsEngine","_calculate","_dirty","_layout","_arrTemplate","printParams","annotManage","timeStamp","cleanFields"];let i=t.doc;for(var r in i)-1==n.indexOf(r)&&function(t){"function"==typeof i[t]?e[t]=function(){return i[t].apply(i,arguments)}:Object.defineProperty(e,t,{get:function(){return i[t]},set:function(e){i[t]=e}})}(r);return{docClosure:function(n){return new Function("f","globals","window","with(globals){with(globals.doc){eval(f);return function(f){eval(f);}}}")(n,t,e)}}}();e.appClosure=t.appClosure=n,e.runJS=t.runJS=(e,i)=>{var r=t.doc;t.event=i,r.timeStamp=i&&i.timeStamp;const o=()=>{try{r.exec=n.docClosure.call(r,e.code)}catch(t){r.exec=n.docClosure(e.code),console.error(t)}};switch("string"==typeof e.code&&(e.code=e.code.replace(/window\.open/g,"")),e.action){case"execute":r.exec(e.code,e,i);break;case"reset":o();break;default:e.global&&o()}}}(this.globalVariables),this.enable=!0},e.exec=function(t,e,n,i){let r={action:"execute",code:t,global:e,event:n.event};this.enable||console.error("js env is not ready!!");var o=this.JSEngine.events[r.event];return this.noFrame?this.globalVariables.runJS(r,o):this.preFrame.contentWindow.runJS&&this.preFrame.contentWindow.runJS(r,o),o&&o.rc},e.resetClosure=function(t,e=""){let n={action:"reset",code:e,event:t.event};this.enable||console.error("js env is not ready!!");var i=this.JSEngine.events[n.event];return this.noFrame?this.globalVariables.runJS(n,i):this.preFrame.contentWindow.runJS&&this.preFrame.contentWindow.runJS(n,i),i.rc},e.destroy=function(){this.globalVariables&&(this.globalVariables.__destroy__(),this.globalVariables=null),this.JSEngine=null,!this.noFrame&&this.preFrame&&(document.body.removeChild(this.preFrame),this.preFrame=null)},t}();var tm=Qg;var em=function(t){function e(){var e;return(e=t.call(this)||this).change="",e.changeEx="",e.commitKey="",e.fieldFull="",e.keyDown="",e.modifier="",e.name="",e.rc="",e.richChange="",e.richChangeEx="",e.richValue="",e.selEnd="",e.selStart="",e.shift="",e.source="",e.target="",e.targetName="",e.type="",e.willCommit="",e.bExtractDenpends=!1,e.depends=[],e.isLoading=!1,e.isSensitiveCheck=!1,e}return(0,E.Z)(e,t),S(e,[{key:"value",get:function(){return this.v},set:function(t){this.v=t,this.valueSetted=!0}}],[{key:"name",get:function(){return"event"}}]),e}(rp);let nm=function(t){function e(e){var n;(n=t.call(this)||this).app=e;for(let t in e)t in(0,C.Z)(n)||Object.defineProperty((0,C.Z)(n),t,{get:()=>e[t],set:n=>{e[t]=n}});return n}(0,E.Z)(e,t);var n=e.prototype;return n.setActionCallback=function(t){this.actionCallback=t},n.alert=function(t,e,n=0,i){return this.actionCallback&&"function"==typeof this.actionCallback.alert?"object"!=typeof t||Array.isArray(t)||1!==arguments.length?this.actionCallback.alert({cMsg:t,nIcon:e,nType:n,cTitle:i}):this.actionCallback.alert(t):this.app.alert.apply(this.app,arguments)},n.alertAsync=function(t){return this.actionCallback&&this.actionCallback.alertAsync?this.actionCallback.alertAsync(t):this.app.alertAsync.apply(this.app,arguments)},e}(_.Proxy.getProxyClass(fp,((t,e,n,i,r)=>{const o=t.actionCallback;switch(r){case"method":return o&&"function"==typeof o[i]?o[i].apply(o,n):e.apply(t.app,n);case"getter":return t.app[i];case"setter":t.app[i]=n[0]}}),null));function im(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let rm=function(){function t(t){this.events={},this.tasks=[],this.curEvent=null,this.PDFViewer=t,this.hasInitAnnots=!1;let e=t.config.enableJS;this.enableJS=null==e||e;const n=new fp(this,t);let i=new nm(n);this.originJSApp=n,this.app=i;let r=new Lg(this,i),o=t.config.noJSFrame;this.jsEnv=new tm(this,i,r,o),setTimeout((()=>{this.jsEnv.init()}),0),this.cacheJSDoc=r,this.PDFViewer.eventEmitter.on("open-file-success",(t=>{this.cacheJSDoc.dirty=!1,Og(),Ep()})),this.PDFViewer.eventEmitter.on("will-close-document",(t=>{this.cacheJSDoc.dirty=!1,this.events={},this.curEvent=null,Og(),Ep()})),this.jsEnv.globalVariables.console.setHandler((t=>{"show"==t&&this.PDFViewer.eventEmitter.emit("show-js-console")})),this.PDFViewer.eventEmitter.on("doc-modified",(()=>{this.cacheJSDoc.dirty=!0}))}var e=t.prototype;return e.setConsoleImpl=function(t){this.jsEnv.globalVariables.console=t},e.setActionCallback=function(t){if(!t)return void this.app.setActionCallback(null);const e=new t(this.originJSApp);e.app||(e.app=this.originJSApp),this.app.setActionCallback(e)},e.setStatus=function(t,e){this.status=t,this.eventSource=e},e.getEvent=function(t){return t?this.events[t]:this.events[this.cacheJSDoc.timeStamp||this.curEvent]||{}},e.getEnableJS=function(){return this.enableJS},e.setEnableJS=function(t,e){let n=this.enableJS;if(this.enableJS=t,!n&&t&&e){let t=e.getJsNameTree(),n="";for(let e in t)n+=t[e]+"\n";let i=e.action;i&&i.getScript&&(n+=i.getScript()),this.initEvent(13,null,null,"Init"),this.resetClosure(n)}},e.resetClosure=function(t=""){this.enableJS&&this.jsEnv.resetClosure({event:this.curEvent},t)},e.getPDFDoc=function(){return this.PDFViewer.currentPDFDoc},e.getFieldValue=function(t){let e=this.getPDFForm().getField(t);return e&&e.getValue()},e.getPDFForm=function(){return this.getPDFDoc().getPDFForm()},e.destroyEvent=function(t){t.target=null,t.engineTarget=null,t.source=null,t.doc=null},e.initEvent=function(t,e,n,i,r={}){"Init"==i&&(this.events={},this.cacheJSDoc.cleanFields());let o=new em;o.engineTarget=n,o.name=i;let s=(new Date).valueOf()+""+i+"yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*mi()|0;return("x"==t?e:3&e|8).toString(16)}));for(e&&(s+=e.getName()+"_"),this.cacheJSDoc!==n?(o.target=this.cacheJSDoc.getField(n&&n.getName()),o.source=this.cacheJSDoc.getField(e&&e.getName()),n&&(s+=n.getName())):o.target=n,o.type=t,o.rc=!0,o.v="";this.events[s];)s+="p";let a;o.timeStamp=this.curEvent=s,this.events[s]=o,o.changed=!1,Object.defineProperty(o,"change",{get:()=>a,set:t=>{a=t,o.changed=!0}}),o.param=r;for(let t in r)o[t]=r[t];switch(i){case Er.FieldKeyStroke:o.v=n.getValue(),o.changeEx=n.getValue();break;case Er.FieldRecalculateValue:case Er.FieldValueChanged:o.v=n.getValue();break;case"WillPrint":break;case"Focus":case Er.AnnotReceiveInputFocus:o.v=n.getValue();break;case"DidPrint":break;case"Blur":case Er.AnnotLoseInputFocus:o.v=n.getValue();break;case"WillSave":break;case"Format":case Er.FieldWillFormat:o.rc=!0,o.v=n.getValue()}return s},e.closeDoc=function(){this.PDFViewer.close()},e.postRunScripts=function(t){let e="";switch(t.name){case Er.FieldRecalculateValue:if(e=t.rc,void 0!==t.value&&t.valueSetted){let e=t.engineTarget,n=e.getType();if(4===n||5===n){let n=e.getOptions();n.forEach((e=>{e.value==t.value?e.selected=!0:e.selected=!1})),e.setOptions(n,!0),e.updateWidgetsUI(e.form,e.info.name,"setItems")}e.setValue(t.value)}break;case Er.FieldWillFormat:t.rc&&t.engineTarget.showDisplayValue(t.value),e={rc:t.rc,format:t.format,value:t.value};break;case Er.FieldKeyStroke:e=t.change,e={rc:t.rc,format:t.format,change:e};break;case Er.FieldValueChanged:e={rc:t.rc,format:t.format,value:t.value}}return"calculate"==this.status&&(this.getPDFForm().calculate(this.eventSource),this.status=""),this.destroyEvent(t),delete this.events[t.timeStamp],t=null,e},e.handleJavaScripts=function(t,e,n){let i,r=this.events[n.event]||{};try{if(this.isBusy=!0,i=this.jsEnv.exec(t,!!e,n),this.isBusy=!1,"boolean"==typeof i)return this.postRunScripts(r)}catch(t){return this.isBusy=!1,r.rc=!0,this.postRunScripts(r),i=-1,{ret:i,errorInfo:t}}return i},e.delayHandle=function(){const t=this.tasks;setTimeout((()=>{if(this.isBusy)this.delayHandle();else{let e=t.pop();for(;e;)this.exec.apply(this,im(w.Z,e)),e=t.pop()}}),10)},e.exec=function(t,e,n={}){return t&&0!==t.trim().length&&this.enableJS?(n.event=n.event||this.curEvent,this.handleJavaScripts(t,e,n)):{rc:!0}},e.waitForExecutionTask=async function(){try{await pp.waitForCurrentRunningTasks()}catch(t){}try{await pp.waitUntilQuiet(10)}catch(t){_.LoggerFactory.getLogger("PDFJS",t)}},e.destroy=async function(){await this.waitForExecutionTask(),this.PDFViewer=null,this.jsEnv.destroy()},t}();var om=rm;var sm=function(){function t(t){this.pdfViewer=t,this.stateHandlers={},this.currentStateHandler=xs,this.register(xs),this.config=t.config.stateHandlerConfig||{[Ie.STATE_HANDLER_HAND]:{enableTextSelectionTool:!0}}}var e=t.prototype;return e.getStateHandlerConfig=function(t){return this.config[t]},e.setStateHandlerConfig=function(t,e){this.config[t]=e},e.mergeStateHandlerConfig=function(t,e){this.config[t]=(0,_.extendOptions)(this.config[t]||{},e)},e.pushStateHandlerConfig=function(t,e){let n=this.config[t]||{};this.config[t]=y(n,e)},e.register=function(t){this.stateHandlers[t.getStateName()]=t},e.unregister=function(t){const e=this.stateHandlers[t];this.currentStateHandler===e&&this.switchTo(xs.getStateName()),delete this.stateHandlers[t]},e.get=function(t){return this.stateHandlers[t]||xs},e.switchTo=function(t,e){const n=this.pdfViewer.eventEmitter;let i=this.currentStateHandler,r=this.get(t);if(n.emit(nt.beforeSwitchStateHandler,r,i),e&&r.setParams(e,this.pdfViewer),i===r)return;this.currentStateHandler=r,t&&this.pdfViewer.activeElement(null),n.emit(nt.deactiveStateHandler,i),n.emit(nt.switchStateHandler,r,i,e);let o=this.pdfViewer.pdfViewerRender;if(!o)return;let s=o.pdfDocRender;if(!s)return;s.setStateHandler(r);let a=s.pagesRender;if(!a)return;let c=a.pageRenders;if(c)for(let t=0,e=c.length;t<e;t++){c[t].stateHandler&&c[t].setStateHandler(r)}},e.getCurrentStates=function(){return this.currentStateHandler},t}();let am=function(){function t(){this.password=null,this.dataURL=null,this.encipherment=null,this.isEncryption=!1}var e=t.prototype;return e.getPassword=function(){return this.password},e.setPassword=function(t){let e=this.encipherment;this.password=e?e(t):t,this.isEncryption=!!e},e.setEncryptionAlgorithm=function(t){this.encipherment=t},e.verify=function(t){let e;if(this.isEncryption){e=this.encipherment(t)===this.password}else e=t===this.password;return e},e.getDataURL=function(){return this.dataURL},e.setDataURL=function(t){this.dataURL=t},e.export=function(){return{password:this.password,dataURL:this.dataURL,encipherment:this.encipherment,isEncryption:this.isEncryption}},e.import=function(t){this.password=t.password,this.dataURL=t.dataURL,this.encipherment=t.encipherment,this.isEncryption=t.isEncryption},e.base64ToArrayBuffer=function(t){let e=window.atob(t),n=e.length,i=new Uint8Array(n);for(;n--;)i[n]=e.charCodeAt(n);return i},e.arrayBufferToBase64=function(t){let e="",n=new Uint8Array(t);for(let t=n.byteLength,i=0;i<t;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)},t}(),cm=function(){function t(t){this.pdfViewer=t,this.inkSignList=[],this.currentInkSign=null}var e=t.prototype;return e.getList=function(){return this.inkSignList},e.push=function(t){let e=this.inkSignList.length;return this.inkSignList.push(t),this.pdfViewer.eventEmitter.emit(nt.inkSignAdded,this.inkSignList),e},e.delete=function(t){this.inkSignList.splice(t,1),this.pdfViewer.eventEmitter.emit(nt.inkSignDeleted,this.inkSignList)},e.get=function(t){return this.inkSignList[t]},e.addInkSign=function(){return new am},e.setCurrentInkSign=function(t){this.currentInkSign=this.inkSignList[t]},e.getCurrentInkSign=function(){return this.currentInkSign},e.setCurrentInkSignByImg=function(t){const e=this.addInkSign();e.setDataURL(t);const n=this.push(e);this.setCurrentInkSign(n)},t}(),lm=function(){function t(){this.password=null,this.dataURL=null,this.encipherment=null,this.isEncryption=!1,this.id="",this.styleId="",this.signType="",this.groupId="",this.moveHammer=null,this.resizeHammer=null,this.fieldType="",this.pageIndex=0}var e=t.prototype;return e.setProperty=function(t,e){this[t]=e},e.getProperty=function(t){return this[t]},e.setMulProperty=function(t){for(let e in t)this[e]=t[e]},e.getId=function(){return this.id},e.setStyleId=function(t){this.styleId=t},e.getStyleId=function(){return this.styleId},e.setSignType=function(t){this.signType=t},e.getGroupId=function(){return this.groupId},e.setGroupId=function(t){this.groupId=t},e.getSignType=function(){return this.signType},e.getPassword=function(){return this.password},e.setPassword=function(t){let e=this.encipherment;this.password=e?e(t):t,this.isEncryption=!!e},e.setEncryptionAlgorithm=function(t){this.encipherment=t},e.verify=function(t){let e;if(this.isEncryption){e=this.encipherment(t)===this.password}else e=t===this.password;return e},e.getDataURL=function(){return this.dataURL},e.setDataURL=function(t){this.dataURL=t},e.export=function(){return{password:this.password,dataURL:this.dataURL,encipherment:this.encipherment,isEncryption:this.isEncryption}},e.import=function(t){this.password=t.password,this.dataURL=t.dataURL,this.encipherment=t.encipherment,this.isEncryption=t.isEncryption},e.base64ToArrayBuffer=function(t){let e=window.atob(t),n=e.length,i=new Uint8Array(n);for(;n--;)i[n]=e.charCodeAt(n);return i},e.arrayBufferToBase64=function(t){let e="",n=new Uint8Array(t);for(let t=n.byteLength,i=0;i<t;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)},t}(),hm=function(){function t(t){this.pdfViewer=t,this.onlineSignList=[],this.currentOnlineSign=null}var e=t.prototype;return e.getList=function(){return this.onlineSignList},e.push=function(t){let e=this.onlineSignList.length;return this.onlineSignList.push(t),this.pdfViewer.eventEmitter.emit(nt.onlineSignAdded,this.onlineSignList),e},e.delete=function(t){this.onlineSignList.splice(t,1),this.pdfViewer.eventEmitter.emit(nt.onlineSignDeleted,this.onlineSignList)},e.get=function(t){return this.onlineSignList[t]},e.getSignatureById=function(t){return this.onlineSignList.find((e=>e.getId()===t))},e.addOnlineSign=function(){return new lm},e.addOnlineSignWithData=function(t){let e=new lm;e.setMulProperty(t);const n=this.push(e);return this.setCurrentOnlineSign(n),{sign:e,index:n}},e.setCurrentOnlineSign=function(t){this.currentOnlineSign=this.onlineSignList[t]},e.getCurrentOnlineSign=function(){return this.currentOnlineSign},e.setCurrentOnlineSignByImg=function(t){const e=this.addOnlineSign();e.setDataURL(t);const n=this.push(e);return this.setCurrentOnlineSign(n),{sign:e,index:n}},e.clear=function(){this.onlineSignList=[]},t}(),um=function(){function t(){this._keyCodeToStr=[],this._strToKeyCode={}}var e=t.prototype;return e.define=function(t,e){this._keyCodeToStr[t]=e,this._strToKeyCode[e.toLowerCase()]=t},e.keyCodeToStr=function(t){return this._keyCodeToStr[t]},e.strToKeyCode=function(t){return this._strToKeyCode[t.toLowerCase()]||_.KeyCodes.Unknown},t}(),dm=function(){function t(){}return t.toString=function(t){return fm.keyCodeToStr(t)},t.fromString=function(t){return fm.strToKeyCode(t)},t}();const fm=new um,pm=new um;(()=>{const t=(t,...e)=>{e.forEach((e=>{fm.define(t,e),pm.define(t,e)}))};t(_.KeyCodes.Unknown,"unknown"),t(_.KeyCodes.Backspace,"Backspace"),t(_.KeyCodes.Tab,"Tab"),t(_.KeyCodes.Enter,"Enter"),t(_.KeyCodes.Shift,"Shift"),t(_.KeyCodes.Ctrl,"Ctrl"),t(_.KeyCodes.Alt,"Alt"),t(_.KeyCodes.PauseBreak,"PauseBreak"),t(_.KeyCodes.CapsLock,"CapsLock"),t(_.KeyCodes.Escape,"Escape"),t(_.KeyCodes.Space,"Space"),t(_.KeyCodes.PageUp,"PageUp"),t(_.KeyCodes.PageDown,"PageDown"),t(_.KeyCodes.End,"End"),t(_.KeyCodes.Home,"Home"),t(_.KeyCodes.LeftArrow,"LeftArrow","Left"),t(_.KeyCodes.UpArrow,"UpArrow","Up"),t(_.KeyCodes.RightArrow,"RightArrow","Right"),t(_.KeyCodes.DownArrow,"DownArrow","Down"),t(_.KeyCodes.Insert,"Insert"),t(_.KeyCodes.Delete,"Delete"),t(_.KeyCodes.KEY_0,"0"),t(_.KeyCodes.KEY_1,"1"),t(_.KeyCodes.KEY_2,"2"),t(_.KeyCodes.KEY_3,"3"),t(_.KeyCodes.KEY_4,"4"),t(_.KeyCodes.KEY_5,"5"),t(_.KeyCodes.KEY_6,"6"),t(_.KeyCodes.KEY_7,"7"),t(_.KeyCodes.KEY_8,"8"),t(_.KeyCodes.KEY_9,"9"),t(_.KeyCodes.KEY_A,"A"),t(_.KeyCodes.KEY_B,"B"),t(_.KeyCodes.KEY_C,"C"),t(_.KeyCodes.KEY_D,"D"),t(_.KeyCodes.KEY_E,"E"),t(_.KeyCodes.KEY_F,"F"),t(_.KeyCodes.KEY_G,"G"),t(_.KeyCodes.KEY_H,"H"),t(_.KeyCodes.KEY_I,"I"),t(_.KeyCodes.KEY_J,"J"),t(_.KeyCodes.KEY_K,"K"),t(_.KeyCodes.KEY_L,"L"),t(_.KeyCodes.KEY_M,"M"),t(_.KeyCodes.KEY_N,"N"),t(_.KeyCodes.KEY_O,"O"),t(_.KeyCodes.KEY_P,"P"),t(_.KeyCodes.KEY_Q,"Q"),t(_.KeyCodes.KEY_R,"R"),t(_.KeyCodes.KEY_S,"S"),t(_.KeyCodes.KEY_T,"T"),t(_.KeyCodes.KEY_U,"U"),t(_.KeyCodes.KEY_V,"V"),t(_.KeyCodes.KEY_W,"W"),t(_.KeyCodes.KEY_X,"X"),t(_.KeyCodes.KEY_Y,"Y"),t(_.KeyCodes.KEY_Z,"Z"),t(_.KeyCodes.Meta,"Meta"),t(_.KeyCodes.ContextMenu,"ContextMenu"),t(_.KeyCodes.F1,"F1"),t(_.KeyCodes.F2,"F2"),t(_.KeyCodes.F3,"F3"),t(_.KeyCodes.F4,"F4"),t(_.KeyCodes.F5,"F5"),t(_.KeyCodes.F6,"F6"),t(_.KeyCodes.F7,"F7"),t(_.KeyCodes.F8,"F8"),t(_.KeyCodes.F9,"F9"),t(_.KeyCodes.F10,"F10"),t(_.KeyCodes.F11,"F11"),t(_.KeyCodes.F12,"F12"),t(_.KeyCodes.F13,"F13"),t(_.KeyCodes.F14,"F14"),t(_.KeyCodes.F15,"F15"),t(_.KeyCodes.F16,"F16"),t(_.KeyCodes.F17,"F17"),t(_.KeyCodes.F18,"F18"),t(_.KeyCodes.F19,"F19"),t(_.KeyCodes.NumLock,"NumLock"),t(_.KeyCodes.ScrollLock,"ScrollLock"),t(_.KeyCodes.US_SEMICOLON,";",";","OEM_1"),t(_.KeyCodes.US_EQUAL,"=","=","OEM_PLUS"),t(_.KeyCodes.US_COMMA,",",",","OEM_COMMA"),t(_.KeyCodes.US_MINUS,"-","-","OEM_MINUS"),t(_.KeyCodes.US_DOT,".",".","OEM_PERIOD"),t(_.KeyCodes.US_SLASH,"/","/","OEM_2"),t(_.KeyCodes.US_BACKTICK,"`","`","OEM_3"),t(_.KeyCodes.ABNT_C1,"ABNT_C1"),t(_.KeyCodes.ABNT_C2,"ABNT_C2"),t(_.KeyCodes.US_OPEN_SQUARE_BRACKET,"[","[","OEM_4"),t(_.KeyCodes.US_BACKSLASH,"\\","\\","OEM_5"),t(_.KeyCodes.US_CLOSE_SQUARE_BRACKET,"]","]","OEM_6"),t(_.KeyCodes.US_QUOTE,"'","'","OEM_7"),t(_.KeyCodes.OEM_8,"OEM_8"),t(_.KeyCodes.OEM_102,"OEM_102"),t(_.KeyCodes.NUMPAD_0,"NumPad0"),t(_.KeyCodes.NUMPAD_1,"NumPad1"),t(_.KeyCodes.NUMPAD_2,"NumPad2"),t(_.KeyCodes.NUMPAD_3,"NumPad3"),t(_.KeyCodes.NUMPAD_4,"NumPad4"),t(_.KeyCodes.NUMPAD_5,"NumPad5"),t(_.KeyCodes.NUMPAD_6,"NumPad6"),t(_.KeyCodes.NUMPAD_7,"NumPad7"),t(_.KeyCodes.NUMPAD_8,"NumPad8"),t(_.KeyCodes.NUMPAD_9,"NumPad9"),t(_.KeyCodes.NUMPAD_MULTIPLY,"NumPad_Multiply"),t(_.KeyCodes.NUMPAD_ADD,"NumPad_Add"),t(_.KeyCodes.NUMPAD_SEPARATOR,"NumPad_Separator"),t(_.KeyCodes.NUMPAD_SUBTRACT,"NumPad_Subtract"),t(_.KeyCodes.NUMPAD_DECIMAL,"NumPad_Decimal"),t(_.KeyCodes.NUMPAD_DIVIDE,"NumPad_Divide")})();let gm=function(){function t(t,e,n,i,r){this.ctrlKey=t,this.shiftKey=e,this.altKey=n,this.metaKey=i,this.keyCode=r}var e=t.prototype;return e.equals=function(t){return this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode},e.isError=function(){return this.keyCode===_.KeyCodes.Unknown},e.toString=function(){const t=[];return this.ctrlKey&&t.push("ctrl"),this.shiftKey&&t.push("shift"),this.altKey&&t.push("alt"),this.metaKey&&t.push("meta"),t.join("+")+"+"+dm.toString(this.keyCode)},t}(),mm=function(){function t(t,e,n=0){this.command=t,this.keybinding=e,this.priority=n}return t.prototype.equals=function(t){return this.keybinding.equals(t.keybinding)},t}(),vm=function(){function t(){this._keybindingRules=[]}var e=t.prototype;return e.registerKeyBindingRule=function(t){const e=this._keybindingRules.filter((e=>e.equals(t)));if(e.length>0)for(const n of e)if(n.equals(t)){if(n.command===t.command)return void(n.priority=t.priority);throw new Error(`shortcut conflict: ${n.command} and ${t.command} has the same keybindings: ${t.keybinding.toString()}`)}this._keybindingRules.push(t)},e.unRegisterKeyBindingRule=function(t){const e=this._keybindingRules.findIndex((e=>e.equals(t)));-1!==e&&this._keybindingRules.splice(e,1)},e.getKeyBindings=function(t){return this._keybindingRules.filter((e=>e.command===t)).sort(((t,e)=>t.priority>e.priority?-1:1)).reduce(((t,e)=>{for(let n of t)if(n.equals(e))return;return t.push(e),t}),[]).map((t=>t.keybinding))},e.getCommandOfKeybinding=function(t){const e=this._keybindingRules.filter((e=>t.equals(e.keybinding)));if(e.length>0)return e[0].command},t}(),ym=function(){function t(){}return t._readModifiers=function(t){t=t.trim().toLowerCase();let e,n,i=!1,r=!1,o=!1,s=!1;do{e=!1,/^ctrl[\+\-]/.test(t)&&(i=!0,t=t.substring(5),e=!0),/^shift[\+\-]/.test(t)&&(r=!0,t=t.substring(6),e=!0),/^alt[\+\-]/.test(t)&&(o=!0,t=t.substring(4),e=!0),/^meta[\+\-]/.test(t)&&(s=!0,t=t.substring(5),e=!0),/^win[\+\-]/.test(t)&&(s=!0,t=t.substring(4),e=!0),/^cmd[\+\-]/.test(t)&&(s=!0,t=t.substring(4),e=!0)}while(e);const a=t.indexOf(" ");return a>0?(n=t.substring(0,a),t=t.substring(a)):(n=t,t=""),{remains:t,ctrl:i,shift:r,alt:o,meta:s,key:n}},t.parseKeybinding=function(t){const e=this._readModifiers(t),n=dm.fromString(e.key);return new gm(e.ctrl,e.shift,e.alt,e.meta,n)},t}(),wm=function(){function t(t,e,n=0){this.registry=new vm,this.name=e,this.target=t,this.priority=n,this.isActive=!0,this.nextBinders=[],this.emitter=new(zs()),this.beforeEventEmitter=new(zs())}var e=t.prototype;return e.setKeyboard=function(t){this.keyboard=t},e.registerKeybinding=function(t,e){const n=ym.parseKeybinding(e);this.registry.registerKeyBindingRule(new mm(t,n,0))},e.unRegisterKeybinding=function(t,e){const n=ym.parseKeybinding(e);this.registry.unRegisterKeyBindingRule(new mm(t,n,0))},e.getCommandOfKeybinding=function(t){return this.registry.getCommandOfKeybinding(t)},e.hasKeybinding=function(t){return!!this.getCommandOfKeybinding(t)},e.attach=function(t){this.nextBinders.push(t)},e.before=function(t,e){return this.beforeEventEmitter.on(t,e),()=>{this.offBefore(t,e)}},e.offBefore=function(t,e){this.beforeEventEmitter.off(t,e)},e.on=function(t,e,n=(()=>!1)){let i;return n&&(i=this.before(t,(t=>{("boolean"==typeof n&&n||n(t))&&t.preventDefault()}))),this.emitter.on(t,e),()=>{i&&i(),this.off(t,e)}},e.off=function(t,e){this.emitter.off(t,e)},e.emit=function(t,e){this.emitter.emit(t,e)},e.acceptElement=function(t){return t===this.target},e.handleKeydownEvent=function(t,e){const n=this.getCommandOfKeybinding(t);return n?(this.beforeEventEmitter.emit(n,e),!0):this.nextBinders.some((n=>n.handleKeydownEvent(t,e)))},e.handleEvent=function(t,e){const n=this.getCommandOfKeybinding(t);return n?(this.emit(n,e),!0):this.nextBinders.some((n=>n.handleEvent(t,e)))},t}();_.isMac,_.isMac,_.isMac;var bm=function(){function t({render:t=(t=>t),payloadFieldName:e="file",origin:n="",uploadSnapshotAPIPath:i,method:r="POST"}={}){this.render=t,this.payloadFieldName=e,this.origin=n,this.uploadSnapshotAPIPath=i,this.method=r}return t.prototype.uploadImage=function(t){const e=new XMLHttpRequest,n=(0,_.createDeferred)();return e.addEventListener("readystatechange",(t=>{if(4==e.readyState)if(e.status>=200&&e.status<300||304==e.status){if(0===e.responseText.indexOf("/snapshot"))return void n.resolve(`${this.origin}${e.responseText}`);n.resolve(e.responseText)}else n.reject(e)})),e.open(this.method,`${this.origin}/${this.uploadSnapshotAPIPath}?filefield=${this.payloadFieldName}`,!0),e.setRequestHeader("Content-Type","image/png"),e.setRequestHeader("X-File-Name","snapshot.png"),e.send(t),n.promise},t}();let Am=function(t){function e(e,n,i,r){var o;return(o=t.call(this,r)||this).name="customRender",o.data=e,o.eUi=n,o.eHandler=i,o.customsRender=r,o}(0,E.Z)(e,t);var n=e.prototype;return n.init=function(){},n.redraw=function(){},n.active=function(){},n.unActive=function(){},n.destroy=function(){},e}(K),Pm=function(){function t(t){this.pdfViewer=t,this.matchRules=[],this.getPageCustomData=function(){return[]},this.getCustomDataId=function(){}}var e=t.prototype;return e.registerMatchRule=function(t){return this.matchRules.push(t),t},e.unRegisterMatchRule=function(t){let e=this.matchRules.indexOf(t);-1!==e&&this.matchRules.splice(e,1)},e.get=function(t){let e=this.matchRules,n=Am;for(let i=e.length;i--;){let r=e[i];if("function"!=typeof r)continue;let o=r(t,n);if(o)return o}return n},t}(),Sm=function(){function t(){this.stackArray=[]}var e=t.prototype;return e.push=function(t){this.stackArray.push(t)},e.pop=function(){return this.stackArray.pop()},e.size=function(){return this.stackArray.length},e.clear=function(){this.stackArray=[]},e.filter=function(t){this.stackArray=this.stackArray.filter(t)},t}(),Cm=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).groupElements=[],i.replies=[],i.markedStates=[],i.reviewStates=[],i}(0,E.Z)(e,t);var n=e.prototype;return n.getFlags=function(){return-2&t.prototype.getFlags.call(this)},n.reviseSummary=function(t){let e=this.info,n=[];this.groupHeader=""._;const i=e.groupElementsSummary.map((e=>Promise.resolve(t(e.objectNumber)))),r=Promise.all(i).then((t=>{this.groupElements=t}));n.push(r);let o=e.groupHeaderSummary;o&&n.push(Promise.resolve(t(o.objectNumber)).then((t=>{this.groupHeader=t})));const s=e.repliesSummary.map((e=>Promise.resolve(t(e.objectNumber)))),a=Promise.all(s).then((t=>{this.replies=t}));n.push(a);const c=e.markedStatesSummary.map((e=>Promise.resolve(t(e.objectNumber))));let l=Promise.all(c).then((t=>{this.markedStates=t}));n.push(l);const h=e.reviewStatesSummary.map((e=>Promise.resolve(t(e.objectNumber)))),u=Promise.all(h).then((t=>{this.reviewStates=t}));n.push(u);let d=e.popupSummary;return d&&n.push(Promise.resolve(t(d.objectNumber)).then((t=>{this.popup=t}))),Promise.all(n).then((()=>(this.reviseSummaryIsOK=!0,this)))},n.getBitmap=function(t,e,n){let i=this.getPDFPage(),r=i.getPDFDoc();return this.page.doc.api.getAnnotBitmap(r.getId(),i.getId(),this.getId(),t,e,n,!0)},n.getOpacity=function(){return this.info.opacity},n.setOpacity=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return t=+t,this.page.doc.api.setAnnotOpacity(n.getId(),e.getId(),this.getId(),t).then((t=>e.getAnnotsByObjectNumArray(t))).then((t=>Promise.all(t.map((t=>t._update()))))).then((t=>(this.eventEmitter.emit(et.annotationUpdated,t,e,ge.opacityUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,t,e),t)))},n.getSubject=function(){return this.info.subject},n.setSubject=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setSubject(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.subjectUpdated)))},n.getTitle=function(){return this.info.title},n.setTitle=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setTitle(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.titleUpdated)))},n.isGrouped=function(){return this.info.isGrouped},n.isGroupHeader=function(){return this.info.isGroupHeader},n.getGroupElements=function(){return this.groupElements},n.getGroupHeader=function(){return this.groupHeader},n.getReplyCount=function(){return this.replies.length},n.getReply=function(t){return this.replies[t]},n.getReplies=function(){return this.replies},n.addReply=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc(),i=this.getGroupHeader()||this;return this.page.doc.api.annotAddReply(n.getId(),e.getId(),this.getId(),t).then((t=>{i.info.repliesSummary.push({objectNumber:t.objectNumber,id:t.objectNumber,index:t.index});let n=this.page.doc.engine.annotManager.get(t,e);return e.addReplyAnnot(n)})).then((t=>(i.replies.push(t),this.page.doc.engine.eventEmitter.emit(et.annotationReplyAdd,t,i),this.page.doc.engine.eventEmitter.emit(et.annotationUpdated,[this],e,ge.replyAdded),t)))},n.removeRepliesByIdLocaly=function(t){if(!Array.isArray(t)||t.length<1||this.replies.length<1)return t||[];const e=t.slice(0);this.replies=this.replies.filter((t=>{const n=e.indexOf(t.getId());return n>-1&&e.splice(n,1),-1==n}));const n=t.slice(0);return this.info.repliesSummary=this.info.repliesSummary.filter((t=>{const e=n.indexOf(t.objectNumber);return e>-1&&n.splice(e,1),-1==e})),e},n.getMarkedStateCount=function(){return this.markedStates.length},n.getMarkedState=function(t){return this.markedStates[t]},n.getMarkedStates=function(){return this.markedStates},n.getReviewStateCount=function(){return this.reviewStates.length},n.getReviewState=function(t){return this.reviewStates[t]},n.getReviewStates=function(){return this.reviewStates},n.addReviewState=function(t){const e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.addAnnotReviewState(n.getId(),e.getId(),this.getId(),t).then((t=>{this.info.reviewStatesSummary.push({objectNumber:t.objectNumber,id:t.objectNumber,index:t.index});let n=this.page.doc.engine.annotManager.get(t,e);return e.addAddonAnnot(n)})).then((t=>(this.reviewStates.push(t),this.page.doc.engine.eventEmitter.emit(et.annotationReviewStateAnnotAdd,t,this),this.page.doc.engine.eventEmitter.emit(et.annotationUpdated,[this],e,ge.reviewStateUpdated),t)))},n.removeReviewState=function(){const t=this.page;let e=this.getReviewStates(),n=e[e.length-1];return t.removeAnnot(n).then((()=>{if(this.reviewStates.pop(),this.info.reviewStatesSummary.pop(),this.reviewStates.length>0){let t=e[this.reviewStates.length-1];t&&(t.reviewStates.pop(),t.info.reviewStatesSummary.pop())}this.page.doc.engine.eventEmitter.emit(et.removeReviewState,this),this.page.doc.engine.eventEmitter.emit(et.annotationUpdated,[this],t,ge.reviewStateUpdated)}))},n.addMarkedState=function(t){const e=arguments[1],n=this.getPDFPage(),i=n.getPDFDoc(),r=this.getGroupHeader()||this;return this.page.doc.api.addAnnotMarkedState(i.getId(),n.getId(),this.getId(),t).then((t=>{if(r.info.markedStatesSummary.length){let e=n.annotIdMap[t.objectNumber];return e.info=t,e}r.info.markedStatesSummary.push({objectNumber:t.objectNumber,id:t.objectNumber,index:t.index});let e=n.doc.engine.annotManager.get(t,n);return n.addAddonAnnot(e)})).then((t=>(r.markedStates.push(t),this.page.doc.engine.eventEmitter.emit(et.annotationMarkedStateAnnotAdd,t,r,e),this.page.doc.engine.eventEmitter.emit(et.annotationUpdated,[this],n,ge.markedStateUpdated),t)))},n.removeMarkedState=function(){const t=this.getPDFPage(),e=t.getPDFDoc(),n=this.getGroupHeader()||this;let i=n.markedStates.pop();return i?(n.info.markedStatesSummary.pop(),t.removeAnnot(i).then((()=>{e.engine.eventEmitter.emit(et.removeMarkedState,this),e.engine.eventEmitter.emit(et.annotationUpdated,[this],t,ge.markedStateUpdated)}))):Promise.resolve()},n.removeAllStateAnnots=function(){this.checkModidyPerm();const t=this.getPDFPage(),e=t.getPDFDoc(),n=this.getGroupHeader()||this;return this.page.doc.api.removeAllStateAnnots(e.getId(),t.getId(),this.getId()).then((e=>!!e&&(n.info.markedStatesSummary.forEach((({id:e})=>{t.removeAddonAnnotById(e)})),n.info.reviewStatesSummary.forEach((({id:e})=>{t.removeAddonAnnotById(e)})),n.info.markedStatesSummary=[],n.info.reviewStatesSummary=[],n.reviewStates=[],n.markedStates=[],this.page.doc.engine.eventEmitter.emit(et.annotationStatesCleared,n),this.page.doc.engine.eventEmitter.emit(et.annotationUpdated,[this],t,ge.statesCleared),e)))},n.getPopup=function(){return this.popup},n.getCreateDateTime=function(){const t=this.info.creationTimestamp;return t>0?new Date(t):new Date},n.setCreateDateTime=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setCreateDateTime(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.createDateTimeUpdated)))},n.getIntent=function(){return this.info.intent},n.setIntent=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotIntent(n.getId(),e.getId(),this.getId(),t).then((t=>e.getAnnotsByObjectNumArray(t))).then((e=>{for(let n=0;n<e.length;n++)e[n].info.intent=t;return e})).then((t=>(this.eventEmitter.emit(et.annotationUpdated,t,e,ge.intentUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,t,e),t)))},n.getFillColor=function(){return this.info.fillColor},n.setFillColor=function(t){t=0===t?0:(0,_.colorConvertor)(t,"int");let e=this.getPDFPage(),n=e.getPDFDoc();return n.api.setAnnotFillColor(n.getId(),e.getId(),this.getId(),t).then((t=>t?this.update(ge.fillColorUpdated).then((()=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e),t))):t))},n.update=function(t,e=!0){let n=this.getGroupElements();0==n.length&&(n=[this]);let i=[];for(let t=0,e=n.length;t<e;t++){let e=n[t];i[t]=e._update()}return Promise.all(i).then((n=>(t&&e&&this.eventEmitter.emit(et.annotationUpdated,n,this.getPDFPage(),t),n)))},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this),n=this.info.opacity,i=ht(new Date(this.info.creationTimestamp)),r=this.info.intent,o=this.info.subject,s=this.info.title,a=this.info.IRT,c=this.info.RT;r=r&&r.length>0?{IT:r,intent:r}:{};let l=y({},e,{opacity:n,creationdate:i,subject:o,title:s,bm:this.info.bm,ca:this.info.ca},r);if(a&&c){let t=this.page.annotIdMap[a];t&&(a=t.getName(),l.inreplyto=a),l.replyType=c.toLowerCase()}return this.popup&&(l.popup=this.popup.exportToJSON()),this.info.rotation&&(l.rotation=360-this.info.rotation),this.info.measureRatio&&(l.measureConversionFactor=this.info.measureConversionFactor,l.measureRatio=this.info.measureRatio,l.measureUnit=this.info.measureUnit),l},n.setContent=function(t){return this.checkModidyPerm(),(this.getGroupHeader()||this)._setContent(t).then((t=>this.getPDFPage().getAnnotsByObjectNumArray([t]))).then((e=>{let n=e[0];if(n&&(n.info.content=t,n.info.modifiedTimestamp=(new Date).getTime()),this.eventEmitter.emit(et.annotationUpdated,e,this.getPDFPage(),ge.contentUpdated),n){let t=n.info.type,i=n.info.intent;("polyline"===t&&"PolyLineDimension"===i||"polygon"===t&&"PolygonDimension"===i||"circle"===t&&"CircleDimension"===i)&&(this.eventEmitter.emit(et.annotationAppearanceUpdated,e,this.getPDFPage()),this.updateInfo(n.info))}return e}))},n.getRichText=function(){if("freetext"!=this.info.type)return Promise.resolve();let t=this.getPDFPage(),e=t.getPDFDoc();return e.api.getRichText(e.getId(),t.getId(),this.getId())},n.setRichText=function(t){if("freetext"!=this.info.type)return Promise.resolve();let e=this.getPDFPage(),n=e.getPDFDoc();return n.api.setRichText(n.getId(),e.getId(),this.getId(),t).then((t=>this.update(ge.richTextUpdated).then((t=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,t,this.getPDFPage())}))))},n.addRichText=function(t){if("freetext"!=this.info.type)return Promise.resolve();let e=this.getPDFPage(),n=e.getPDFDoc();return n.api.addRichText(n.getId(),e.getId(),this.getId(),t).then((t=>this.update(ge.richTextUpdated).then((t=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,t,this.getPDFPage())}))))},n.insertRichText=function(t){if("freetext"!=this.info.type)return Promise.resolve();let e=this.getPDFPage(),n=e.getPDFDoc();return n.api.insertRichText(n.getId(),e.getId(),this.getId(),t).then((t=>this.update(ge.richTextUpdated).then((t=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,t,this.getPDFPage())}))))},n.removeRichText=function(t){if("freetext"!=this.info.type)return Promise.resolve();let e=this.getPDFPage(),n=e.getPDFDoc();return n.api.removeRichText(n.getId(),e.getId(),this.getId(),t).then((t=>this.update(ge.richTextRemoved).then((t=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,t,this.getPDFPage())}))))},e}(Se);var Em=Cm;var xm=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getQuadPoints=function(){return this.info.quadPoints||[]},n.isReplace=function(){return!1},n.getDeviceQuadPoints=function(){let t=this.getPDFPage(),e=(t.getHeight(),t.getWidth()),n=this.getQuadPoints(),i=[];for(let t=n.length;t--;){let r=n[t];i[t]=[{x:r[0].x,y:e-r[0].y},{x:r[1].x,y:e-r[1].y},{x:r[2].x,y:e-r[2].y},{x:r[3].x,y:e-r[3].y}]}return i},n.getStartCharIndex=function(){return this.info.startCharIndex},n.getStartCharInfo=function(){return this.info.startCharInfo},n.getEndCharIndex=function(){return this.info.endCharIndex},n.getEndCharInfo=function(){return this.info.endCharInfo},n.canAccess=function(){return!!this.page.doc.checkPermission(pe.extract||pe.extractAccess)},n.getText=function(){if(!this.page.doc.checkPermission(pe.extract||pe.extractAccess))throw new Error("Permission error");return this.info.text||""},n.getContinuousText=function(){if(!this.page.doc.checkPermission(pe.extract||pe.extractAccess))throw new Error("Permission error");return this.info.text||""},n.updateQuadPointsByCharIndex=function(t,e){this.checkModidyPerm();let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.updateAnnotQuadPointsByCharIndex(i.getId(),n.getId(),this.getId(),t,e).then((t=>{if(t)return this.update(ge.quadPointsUpdated).then((e=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,e,this.getPDFPage()),t)))}))},n.isArea=function(){return this.info.isArea},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this),n=this.getQuadPoints(),i="";for(let t=0;t<n.length;t++){let e=n[t];i+=e[0].x+","+e[0].y+",",i+=e[1].x+","+e[1].y+",",i+=e[2].x+","+e[2].y+",",i+=e[3].x+","+e[3].y+","}return i=i.substr(0,i.length-1),y({},e,{coords:i})},e}(Em);const Dm={setContent:function(t){let e=t.method;return function(){t.host[e](t.content)}},setBorderColor:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){const n=e.getAnnotRender(o,r).component;n.annot[i](t.color).then((()=>{n.updateRender()}))}},setOpacity:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){const n=e.getAnnotRender(o,r).component;n.annot[i](t.opacity).then((()=>{n.updateRender()}))}},updateQuadPointsByCharIndex:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){const n=e.getAnnotRender(o,r).component;n.annot[i](t.start,t.end).then((()=>{n.isReplace?n.caretAnnot.moveRectByCharIndex(t.end).then((()=>{n.getGroupRenders().map((t=>{t.active()}))})):n.active()}))}},setStyleFillColor:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,r).component.annot[i](t.fillColor)}},setFillColor:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,r).component.annot[i](t.fillColor)}},setBorderWidth:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,r).component.annot[i](t.borderWidth)}},setBorderStyle:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,r).component.annot[i](t.borderStyle.style,t.borderStyle.param)}},setCalloutLineEndingStyle:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){const n=e.getAnnotRender(o,r).component;n.annot[i](+t.style).then((()=>{n.activeRect(),n.redraw()}))}},setEndingStyle:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){const n=e.getAnnotRender(o,r).component;n.annot[i](t.isBeginning,+t.style).then((()=>{n.activeRect(),n.redraw()}))}},enableCaption:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,r).component.annot[i](t.enableCaption)}},setRotation:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,r).component.annot[i]((t.rotation+360)%360)}},setHighlightingMode:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){e.getAnnotRender(o,r).component.annot[i](t.mode)}},setRect:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();return function(){const n=e.getAnnotRender(o,r).component;n.annot[i](t.rect).then((()=>{n.active()}))}},eraseInk:function(t){t.host.pdfViewer;const e=t.host.annot;e.getObjectNumber(),e.getPDFPage().getIndex()},updateLinePoints:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=(t.method,n.getObjectNumber()),r=n.getPDFPage().getIndex();let o=[];return function(){const n=e.getAnnotRender(r,i).component;o.push(n.annot.setStartPoint(t.startPoint)),o.push(n.annot.setEndPoint(t.endPoint)),Promise.all(o).then((()=>{n.active()}))}},setLeaderLineLength(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();let{leaderLinePoints:s,startPoint:a,endPoint:c}=t,{start:l,end:h}=s,u=Math.sqrt(Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2)),d=!0;return(c.x-a.x)*(l.y-c.y)-(l.x-c.x)*(c.y-a.y)>0&&(d=!1),d&&(u=-u),function(){const t=e.getAnnotRender(o,r).component;t.annot[i](u).then((()=>{t.active()}))}},updateVertexes(t){const e=t.host.pdfViewer,n=t.host.annot,i=t.method,r=n.getObjectNumber(),o=n.getPDFPage().getIndex();let{vertexes:s,index:a}=t;return function(){const t=e.getAnnotRender(o,r).component;t.annot[i](a,s[a]).then((()=>{t.active()}))}},removeAnnot:function(t,e){const n=t.host.pdfViewer,i=t.host.annot,r=i.getObjectNumber(),o=i.getPDFPage(),s=o.getIndex();let a,c,l=i.getReplies&&i.getReplies()||[],h=[];return l.map((t=>{h.push({id:t.getId(),content:t.getContent(),createTime:new Date(t.getCreateDateTime()).getTime(),modifiedTime:new Date(t.getModifiedDateTime()).getTime()})})),i.isGrouped&&i.isGrouped()?(a=[],i.groupElements.map(((t,e)=>{a.push(new Rm(t).getJson()),t.isGroupHeader()&&(c=e)}))):a=new Rm(i).getJson(),"before"===e?"redact"===i.getType()?function(){o.markRedactAnnot(a.rects,a.name)}:i.isGrouped&&i.isGrouped()?function(){o.addAnnotGroup(a,c).then((()=>{const t=n.getAnnotRender(s,r).component;h.length>0?u(t.annot).then((()=>{t.getGroupRenders().map((t=>{t.active()}))})):t.active()}))}:function(){o.addAnnot(a).then((()=>{const t=n.getAnnotRender(s,r).component;h.length>0?u(t.annot).then((()=>{t.active()})):t.active()}))}:function(){const t=n.getAnnotRender(s,r).component;o.removeAnnot(t.annot)};function u(t){let e=[];return h.map((n=>{e.push(t.addReply(n.content).then((t=>{t.setUniqueID(n.id).then((()=>{t.setCreateDateTime(n.createTime).then((()=>{t.setModifiedDateTime(n.modifiedTime)}))}))})))})),Promise.all(e)}},addAnnot:function(t,e){const n=t.host.pdfViewer,i=t.host.annot,r=i.getObjectNumber(),o=i.getPDFPage(),s=o.getIndex();let a,c;return i.isGrouped&&i.isGrouped()?(a=[],i.groupElements.map(((t,e)=>{a.push(new Rm(t).getJson()),t.isGroupHeader()&&(c=e)}))):a=new Rm(i).getJson(),"before"===e?function(){o.removeAnnot(i)}:i.isGrouped&&i.isGrouped()?function(){o.addAnnotGroup(a,c).then((()=>{n.getAnnotRender(s,r).component.getGroupRenders().map((t=>{t.active()}))}))}:function(){o.addAnnot(a).then((()=>{n.getAnnotRender(s,r).component.active()}))}},markRedactAnnot:function(t,e){const n=t.host.pdfViewer,i=t.host.annot,r=i.getObjectNumber(),o=i.getPDFPage(),s=o.getIndex();return"before"===e?function(){o.removeAnnot(i)}:function(){let t=new Rm(i).getJson();o.markRedactAnnot(t.rects,t.name).then((()=>{n.getAnnotRender(s,r).component.active()}))}},makeRedactByPages:function(t,e){let n=t.host;return"before"===e?function(){n.map((t=>{t.getPDFPage().removeAnnot(t)}))}:function(){n.map((t=>{t.getPDFPage().markRedactAnnot([t.info.rect],t.id)}))}},placeRedact:function(t,e){let n=t.host;return"before"===e?function(){n.map((t=>{t.getPDFPage().removeAnnot(t)}))}:function(){n.map((t=>{t.getPDFPage().markRedactAnnot([t.info.rect],t.id)}))}},eraser:function(t,e){let{inkArray:n,host:i}=t;return function(){n.map((t=>{i.getAnnotRender(t.annot.getId()).component.annot.setInkList(t.inkList)}))}},updateCalloutPoints:function(t){const e=t.host.pdfViewer,n=t.host.annot,i=(t.method,n.getObjectNumber()),r=n.getPDFPage().getIndex();return function(){const n=e.getAnnotRender(r,i).component;n.annot._setRect(t.rect,!1).then((()=>{n.annot.setInnerRectNoAction(t.innerRect).then((()=>{n.annot.setCalloutLinePoints(t.calloutLinePoints).then((()=>{n.annot.update().then((()=>{n.redraw(),n.active()}))}))}))}))}},addReply:function(t,e){const{host:n,replyAnnot:i,component:r,pdfViewer:o}=t,s=n.getPDFPage(),a=s.getIndex();let c=n.getId(),l=i.getId();const h=i.getCreateDateTime(),u=i.getModifiedDateTime();return"before"===e?function(){s.removeAnnot(i)}:function(){o.getAnnotRender(a,c).component.annot.addReply(i.getContent()).then((t=>{t.setUniqueID(l).then((()=>{t.setCreateDateTime(new Date(h).getTime()).then((()=>{t.setModifiedDateTime(new Date(u).getTime())}))}))}))}},deleteReply:function(t,e){const{host:n,replyAnnot:i,pdfViewer:r}=t,o=n.getPDFPage(),s=o.getIndex();let a=i.getId(),c=n.getId();const l=i.getCreateDateTime(),h=i.getModifiedDateTime();return"before"===e?function(){r.getAnnotRender(s,c).component.annot.addReply(i.getContent()).then((t=>{t.setUniqueID(a).then((()=>{t.setCreateDateTime(new Date(l).getTime()).then((()=>{t.setModifiedDateTime(new Date(h).getTime())}))}))}))}:function(){o.removeAnnotById(a)}},addAction:function(t,e){const n=t.host.pdfViewer,i=t.host.annot,r=i.getObjectNumber(),o=i.getPDFPage().getIndex();let s=i.getAction();return"before"===e?function(){i.removeAction()}:function(){!function(t,e){t.setAction(e.type).then((()=>{let n=new Fm(e).toJson();return t.setActionData(n).then((()=>Tm(t.getAction(),e)))}))}(n.getAnnotRender(o,r).component.annot,s.info)}}};var Im=Dm;let Rm=function(){function t(t){let e=(0,_.colorConvertor)(t.getBorderColor(),"#");switch(this.json={objectNumber:t.info.objectNumber,name:t.getUniqueID(),rect:t.getRect(),color:e,style:t.getBorderStyle(),contents:t.getContent(),date:new Date(t.getModifiedDateTime()).getTime(),type:t.getType(),flags:t.getFlags()},t instanceof Em&&this.markup(t),t instanceof xm&&this.textMarkup(t),t.getType()){case"ink":this.ink(t);break;case"fileattachment":this.fileattachment(t);break;case"polygon":this.polygon(t);break;case"polyline":this.polyline(t);break;case"stamp":this.stamp(t);break;case"freetext":this.freetext(t);break;case"screen":this.screen(t);break;case"line":this.line(t);break;case"redact":this.redact(t);break;case"highlight":this.highlight(t);break;case"link":this.link(t);break;case"square":this.square(t);break;case"circle":this.circle(t)}}var e=t.prototype;return e.markup=function(t){this.json=y({intent:t.getIntent(),opacity:t.getOpacity(),subject:t.getSubject(),title:t.getTitle(),creationTimestamp:new Date(t.getCreateDateTime()).getTime()},this.json)},e.textMarkup=function(t){this.json=y({startCharIndex:t.getStartCharIndex(),endCharIndex:t.getEndCharIndex(),coords:t.getQuadPoints()},this.json)},e.ink=function(t){this.json=y({inkList:t.getInkList(),borderWidth:t.getBorderWidth()},this.json)},e.fileattachment=function(t){this.json=y({fObjNum:t.info.fObjNum},this.json)},e.polygon=function(t){this.json=y(this.json,{vertexes:t.getVertexes(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,fillColor:t.info.fillColor,style:void 0,borderWidth:t.getBorderWidth()})},e.polyline=function(t){this.json=y(this.json,{vertexes:t.getVertexes(),fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0,startStyle:t.getStartStyle(),endStyle:t.getEndingStyle()})},e.stamp=function(t){this.json=y({icon:t.info.icon,rotate:(t.getRotation()+360)%360,apObjeNum:t.info.apObjeNum},this.json)},e.freetext=function(t){this.json=y(this.json,{calloutLinePoints:t.getCalloutLinePoints(),innerRect:t.getInnerRect(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0,"interior-color":t.getFillColor(),interiorColor:t.getFillColor(),borderWidth:t.getBorderWidth(),calloutLineEndingStyle:t.getCalloutLineEndingStyle()})},e.line=function(t){let e=t.getMeasureRatio(),n=t.getMeasureUnit(),i=null;e&&n&&(i={unit:n,ratio:e});let r=t.getStartPoint(),o=t.getEndPoint();this.json=y(this.json,{startStyle:t.getStartStyle(),endStyle:t.getEndingStyle(),enableCaption:t.hasCaption(),startPoint:{x:r.x,y:r.y},endPoint:{x:o.x,y:o.y},measure:i,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0})},e.screen=function(t){this.json=y({apObjNum:t.info.apObjNum,opacity:t.getOpacity(),rotate:{0:0,90:1,180:2,270:3}[t.getRotation()],iObjNum:t.info.iObjNum,aObjNum:t.info.aObjNum,borderWidth:t.getBorderWidth()},this.json)},e.redact=function(t){let e=t.info.quadPoints,n=[];e.length>0?e.map((t=>{n.push({left:t[0].x,right:t[3].x,top:t[0].y,bottom:t[3].y})})):n.push(t.info.rect),this.json=y({rects:n},this.json)},e.highlight=function(t){t.info.isArea&&(this.json=y(this.json,{coords:[t.getRect()],dicts:{AreaHi:"AreaHi"}}),delete this.json.startCharIndex,delete this.json.endCharIndex)},e.link=function(t){this.json=y(this.json,{aObjNum:t.info.aObjNum,borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0,borderWidth:t.getBorderWidth()})},e.circle=function(t){this.json=y(this.json,{fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0})},e.square=function(t){this.json=y(this.json,{fillColor:t.info.fillColor,borderWidth:t.getBorderWidth(),borderStyle:t.getBorderStyleWithParam().style,borderStyleParam:t.getBorderStyleWithParam().param,style:void 0})},e.getJson=function(){return this.json},t}();function Tm(t,e){let n=e.subActionCount,i=[];for(let r=0;r<n;r++)i.push(t.insertSubAction(r,e.subAction[r].type).then((()=>{let n=new Fm(e.subAction[r]).toJson(),i=t.getSubAction(r);return i.setActionData(n).then((()=>Tm(i,e.subAction[r])))})));return Promise.all(i)}let Fm=function(){function t(t){this.action=t,this.json={};let{type:e}=t;this[e]()}var e=t.prototype;return e.TypeGoto=function(){let{destination:t}=this.action;this.json=y(t,{type:t.zoomMode})},e.TypeURI=function(){let{uri:t}=this.action;this.json=y({},{uri:t})},e.TypeJavaScript=function(){let{javascript:t}=this.action;this.json=y({},{script:t})},e.TypeNamed=function(){let{name:t}=this.action;this.json=y({},{name:t})},e.TypeHide=function(){let{fieldNames:t,hideState:e}=this.action;this.json=y({},{fieldNames:t,hideState:e})},e.TypeSubmitForm=function(){let{flags:t,url:e,fieldNames:n}=this.action;this.json=y({},{flags:t,url:e,fieldNames:n})},e.TypeResetForm=function(){let{flags:t,fieldNames:e}=this.action;this.json=y({},{flags:t,fieldNames:e})},e.TypeGoToR=function(){let{destinationName:t,destination:e}=this.action;this.json=y({},{destinationName:t,destination:e})},e.toJson=function(){return this.json},t}();let _m=function(){function t(){}return t.undo=function(t){t.before()},t.redo=function(t){t.after()},t.createRecord=function(t,e){let n=t.method;return Im[n](t,e)},t.getUniqueId=function(t){return t.host&&t.host.annot?t.host.annot.getId():null},t}(),km=function(){function t(t){this.pdfViewer=t,this.undoStack=new Sm,this.redoStack=new Sm,this.beforeFn=null,this.afterFn=null,this.pdfViewer.eventEmitter.on(nt.willCloseDocument,(()=>{this.clear()})),this.addEventListener()}var e=t.prototype;return e.addEventListener=function(){},e.removeEventListener=function(){},e.before=function(t){this.beforeFn=_m.createRecord(t,"before")},e.after=function(t){this.afterFn=_m.createRecord(t,"after"),this.remember(_m.getUniqueId(t))},e.remember=function(t){this.beforeFn&&this.afterFn&&this.undoStack.push({before:this.beforeFn,after:this.afterFn,uniqueId:t})},e.removeById=function(t){this.undoStack.filter((e=>t!==e.uniqueId)),this.redoStack.filter((e=>t!==e.uniqueId))},e.undo=function(){let t=this.undoStack.pop();t&&(this.redoStack.push(t),_m.undo(t))},e.redo=function(){let t=this.redoStack.pop();t&&(this.undoStack.push(t),_m.redo(t))},e.clear=function(){this.undoStack.clear(),this.redoStack.clear()},e.getUndoStack=function(){return this.undoStack},e.getRedoStack=function(){return this.redoStack},t}(),Mm=function(){function t(){this.hiddenCallbacks=[],this.shownCallbacks=[],this.isDisabled=!1}var e=t.prototype;return e.setCurrentTarget=function(t){this.currentTarget=t},e.getCurrentTarget=function(){return this.currentTarget},e.showAt=function(t,e){return this.shownCallbacks.forEach((t=>t.call(this))),!0},e.disable=function(){this.isDisabled=!0},e.enable=function(){this.isDisabled=!1},e.destroy=function(){(0,_.notImplemented)()},e.getItem=function(){(0,_.notImplemented)()},e.onHidden=function(t){"function"==typeof t&&this.hiddenCallbacks.push(t)},e.onShown=function(t){"function"==typeof t&&this.shownCallbacks.push(t)},t}(),Om=function(){function t(){}var e=t.prototype;return e.prepare=function(t){this.pdfViewer=t},e.getRootElement=function(){return Promise.resolve(this.pdfViewer.element.parentElement)},e.showReply=function(t){(0,_.notImplemented)()},e.showPropertiesInfo=function(t){(0,_.notImplemented)()},e.createContextMenu=function(t,e,n){(0,_.notImplemented)()},e.alert=function(t){},e.confirm=function(t){},e.prompt=function(t,e,n){},e.promptPassword=function(t,e,n){},e.loading=function(t){return()=>{}},e.createFreeTextTooltip=function(t){},e.createTextSelectionTooltip=function(t){},e.getPortfolioPreviewer=function(t){(0,_.notImplemented)()},e.destroy=function(){},e.openDialog=function(t){return Promise.resolve()},t}(),Lm=function(t){function e(e,n){var i;return(i=t.call(this)||this).pdfViewer=e,i.pageRender=n,i.isDisabled=!1,i.eventEmitter=new(zs()),i}(0,E.Z)(e,t);var n=e.prototype;return n.on=function(t,e){return this.eventEmitter.on(t,e),()=>this.eventEmitter.off(t,e)},n.showAt=function(t,e,n,i){this.eventEmitter.emit("show")},n.hide=function(){this.eventEmitter.emit("hide")},n.disable=function(){this.isDisabled=!0},n.enable=function(){this.isDisabled=!1},n.destroy=function(){this.eventEmitter.emit("destroy"),t.prototype.destroy.call(this)},e}(_.Disposable);var Nm=m(3013),Bm=m.n(Nm);let Vm=function(t){function e(e,n){var i;return(i=t.call(this)||this).pdfViewer=e,i.pageRender=n,i.topEditBar=null,i}(0,E.Z)(e,t);var n=e.prototype;return n.getSelectionInfo=function(){const t=(0,_.createDeferred)(),e=this.pdfViewer.getStore().subscribe(st.STORE_NAMES.SELECTION_INFO,(n=>{e(),t.resolve(n)}));return this.addDestroyHook(e),t.promise},n.copy=function(){return this.getSelectionInfo().then((async t=>{await(0,_.copyText)(t.text)?this.pdfViewer.eventEmitter.emit(nt.copyTextSuccess,t.text):this.pdfViewer.eventEmitter.emit(nt.copyTextFailed,t.text)}))},n.createTextHighlight=function(){return this.createTextMarkupAnnot("highlight")},n.createStrikeout=function(){return this.createTextMarkupAnnot("strikeout")},n.createUnderline=function(){return this.createTextMarkupAnnot("underline")},n.createBookmark=function(){const t=this.pdfViewer.getCurrentPDFDoc();return this.hasModifyPermissions(t)?this.getSelectionInfo().then((t=>{if(!t)return;t.page.getPDFDoc();const e=t.page.getIndex(),n=t.text,{left:i,top:r}=t.rectArray[0];this.pdfViewer.eventEmitter.emit("bookmark-create-current-view",{left:i,top:r,title:n,relationship:3,pageIndex:e}),this.pdfViewer.eventEmitter.emit("text-tooltip-click",{type:"createBookmark"})})):Promise.resolve()},n.createTextMarkupAnnot=function(t){return this.pageRender.getPDFPage().then((e=>this.getSelectionInfo().then((n=>e.addAnnot({type:t,rect:{left:0,right:0,top:0,bottom:0},flags:4,coords:n.rectArray,subject:this.pdfViewer.i18n.t("viewer_:annotSubjects."+t[0].toUpperCase()+t.substr(1))}).then((e=>{const n=e[0];this.pdfViewer.eventEmitter.emit(nt.addAnnotSuccess,n),this.pdfViewer.eventEmitter.emit("text-tooltip-click",{type:t}),this.pageRender.annotsRender.activeAnnot(n.getId())}))))))},n.getBookmarkById=function(t,e){let n="";for(const i of e){if(n)break;if(i.id==t){n=i;break}i.children&&i.children.length>0&&(n=this.getBookmarkById(t,i.children))}return n},n.hasModifyPermissions=function(t){const e=t.getPermissions();return 8&e&&32&e},n.getTopEditBar=async function(){if(!this.topEditBar){const t=this.pdfViewer.viewerUI.rootComponent.pdfUI;this.topEditBar=await t.getComponentByName("edit-text")}return this.topEditBar},n.createEditText=async function(){0},n.clearSelectionInfo=function(){this.pdfViewer.getCurrentPDFDoc().clearSelectedInfo(this.pdfViewer)},e}(_.Disposable);const Um="copy_selected_text",Hm="create-text-highlight",jm="create-strikeout",$m="create-underline",Wm=[{iconClass:"fv__icon-popup-copy",name:Um},{iconClass:"fv__icon-toolbar-text-highlight",name:Hm},{iconClass:"fv__icon-toolbar-strikeout",name:jm},{iconClass:"fv__icon-toolbar-underline",name:$m}].concat([]),Ym=Bm()({actions:Wm}),Gm=(new DOMParser).parseFromString(Ym,"text/html").body.firstElementChild;let Km=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).selectionTool=new Vm(e,n),i.init(),i}(0,E.Z)(e,t);var n=e.prototype;return n.init=function(){this.dom=Gm.cloneNode(!0);this.pageRender.$ui.get(0).appendChild(this.dom),this.dom.addEventListener("click",(t=>{if(t.target.classList.contains("disabled")||t.target.parentNode.classList.contains("disabled"))return;const e=t.target.getAttribute("action");e&&this[e]&&this[e]().then((()=>{this.hide()}))}));const t=t=>t===document.activeElement||t.contains(document.activeElement);let e=t(this.dom);const n=()=>{const n=t(this.dom);e===n||n||this.eventEmitter.emit("blur"),e=n};document.addEventListener("focus",n,{capture:!0}),document.addEventListener("pointerup",n,{capture:!0}),this.addDestroyHook((()=>{document.removeEventListener("focus",n,{capture:!0}),document.removeEventListener("pointerup",n,{capture:!0})}))},n[Um]=function(){return this.selectionTool.copy()},n[Hm]=function(){return this.selectionTool.createTextHighlight()},n[jm]=function(){return this.selectionTool.createStrikeout()},n[$m]=function(){return this.selectionTool.createUnderline()},n["create-edit-text"]=function(){return this.selectionTool.createEditText()},n.showAt=function(e,n){t.prototype.showAt.call(this,e,n),this.dom.style.cssText+=`\n            left: ${e}px;\n            top: ${n}px;\n        `,Promise.resolve(this.pageRender.docRender.getUserPermission().getValue()).then((t=>{32&t?this.dom.querySelector("div>div:not(.fv__icon-popup-copy)").classList.remove("disabled"):this.dom.querySelector("div>div:not(.fv__icon-popup-copy)").classList.add("disabled"),16&t?this.dom.querySelector("div>div.fv__icon-popup-copy").classList.remove("disabled"):this.dom.querySelector("div>div.fv__icon-popup-copy").classList.add("disabled"),this.dom.classList.add("fv__active"),this.dom.focus()}))},n.hide=function(){t.prototype.hide.call(this),this.dom.classList.remove("fv__active")},n.destroy=function(){t.prototype.destroy.call(this),this.dom.remove(),this.selectionTool.destroy()},e}(Lm);var qm=m(564),zm=m.n(qm);let Jm=function(t){function e(e,n){var i;return(i=t.call(this)||this).uniqueClassName=n.uniqueClassName,i.disabledClassName="context-menu-disabled",i.name=e,i}(0,E.Z)(e,t);var n=e.prototype;return n.disable=function(){if(!this.isEnabled())return;const t=this.getDOM();t&&t.classList.add(this.disabledClassName)},n.enable=function(){if(this.isEnabled())return;const t=this.getDOM();t&&t.classList.remove(this.disabledClassName)},n.getDOM=function(){return document.querySelector(this.uniqueClassName)},n.isEnabled=function(){const t=this.getDOM();return!!t&&t.classList.contains(this.disabledClassName)},e}(function(){function t(){}var e=t.prototype;return e.disable=function(){(0,_.notImplemented)("disable")},e.enable=function(){(0,_.notImplemented)("enable")},e.isEnabled=function(){return(0,_.notImplemented)("isEnabled"),!1},t}());var Zm,Xm=m(4528),Qm=m.n(Xm);!function(t){t.PROGRESSING="Progressing",t.SUCCESS="Success",t.FAIL="Fail"}(Zm||(Zm={}));const tv=(new DOMParser).parseFromString(Qm()(),"text/html").body.firstElementChild;let ev=function(t){function e(e=0,n){var i;return(i=t.call(this)||this).coverOn=n,i.dom=tv.cloneNode(!0),i.textElement=i.dom.querySelector(".fv__ui-progress-text"),i.updateProgress(e),i}(0,E.Z)(e,t);var n=e.prototype;return n.show=function(t=this.coverOn){this.coverOn=t,this.updateProgress(0),t.appendChild(this.dom),this.dom.style.display="block"},n.hide=function(){this.dom.style.display="none",this.updateProgress(0)},n.updateProgress=function(t,e){let n="";n=e===Zm.FAIL||e===Zm.SUCCESS?e:"number"==typeof t?`${t}%`:`${t.current} / ${t.total}`,this.textElement.innerText=n,e!==Zm.FAIL&&e!=Zm.SUCCESS||setTimeout((()=>{this.hide()}),800)},e}(_.Disposable);const nv=new(function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.destroy=function(){},e}(Mm)),iv=[],rv=(()=>{let t=zm()({isIE:_.isIE});const e=document.createElement("div");e.innerHTML=t;const n=e.firstElementChild;return e.removeChild(n),n})();let ov=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.prepare=function(e){t.prototype.prepare.call(this,e);let n={},i={};const r=(t,r)=>{if(r){const t=r.getStateName(),e=i[t];e&&e.destroy()}const o=t.getStateName();let s=n[o]||(t.getDefaultContextMenuConfig?t.getDefaultContextMenuConfig():void 0);i[o]=this.createContextMenu(o,e.$ui.get(0),s)};this.menus=i,e.eventEmitter.on(nt.switchStateHandler,r),e.eventEmitter.once(nt.renderFileSuccess,(()=>{setTimeout((()=>{e.isDestroyed||r(e.getStateHandlerManager().currentStateHandler)}),200)})),e.addDestroyHook((()=>{this.menus={}}))},n.createContextMenu=function(t,e,n){if(!n||!n.items)return nv;let i=n.items,r=this.pdfViewer.i18n;for(let t in i){let e=i[t];e.nameI18nKey&&(e.name=r.t(e.nameI18nKey));const n=(0,_.getUniqueId)(t);e.className=e.className?e.className+" "+n:n,e.uniqueClassName=n}let o=D()(e);const s=new(function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var r=e.prototype;return r.destroy=function(){this._destroyContextMenu()},r._destroyContextMenu=function(){const t=PDFViewCtrl.vendors.jQuery.contextMenu.menus;Object.keys(t).forEach((e=>{const n=t[e];n.context===o[0]&&(n.$menu.remove(),delete t[e],D()(n.context).off(n.ns))}))},r.showAt=function(t,e){let n=D().Event("contextmenu",{data:{events:{preShow:function(){}}},pageX:t,pageY:e});n.target=o.find(".fv__pdf-page-annot-handler-rect")[0],o.trigger(n)},r.disable=function(){t.prototype.disable.call(this),this._destroyContextMenu()},r.enable=function(){t.prototype.enable.call(this),this._destroyContextMenu(),this.createRealContextmenu()},r.createRealContextmenu=function(){const t=n.zIndex;switch(typeof t){case"number":n.zIndex=()=>t;case"function":break;default:n.zIndex=()=>30}o.contextMenu(n)},r.getItem=function(t){if(t in i)return new Jm(t,i[t])},e}(Mm));return o.on("contextmenu:hide",(()=>{s.hiddenCallbacks.forEach((t=>t.call(s)))})),s.createRealContextmenu(),this.pdfViewer.addDestroyHook((()=>{s.destroy()})),s},n.alert=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&(t=t.message),t=this.pdfViewer.i18n.t(t)||t,window.alert(t),Promise.resolve()},n.confirm=function(t){"[object Object]"===Object.prototype.toString.call(t)&&(t=t.message),t=this.pdfViewer.i18n.t(t)||t;const e=window.confirm(t);return e?Promise.resolve(e):Promise.reject("confirm dialog has been cancelled by user!")},n.prompt=function(t,e){"[object Object]"===Object.prototype.toString.call(e)&&(e=e.message),e=this.pdfViewer.i18n.t(e)||e;const n=window.prompt(e,t||"");return n?Promise.resolve(n):Promise.reject("prompt dialog has been cancelled by user!")},n.promptPassword=function(t,e){e=this.pdfViewer.i18n.t(e)||e;const n=window.prompt(e,t||"");return n?Promise.resolve(n):Promise.reject("prompt dialog has been cancelled by user!")},n.loading=function(t){return this.renderingDOM=(0===iv.length&&iv.push(rv.cloneNode(!0)),iv.pop()),t.appendChild(this.renderingDOM),()=>{this.renderingDOM.parentElement===t&&t.removeChild(this.renderingDOM),iv.push(this.renderingDOM)}},n.progress=function(t,e){return!this.progressTool&&(this.progressTool=new ev(t,e)),this.progressTool.show(e),this.progressTool},n.createFreeTextTooltip=function(t){},n.createAnnotTooltip=function(t){},n.createTextSelectionTooltip=function(t){const e=new Km(this.pdfViewer,t);return this.pdfViewer.addDestroyHook((()=>{e.destroy()})),e},n.destroy=function(){Object.values(this.menus).forEach((t=>t&&t.destroy()))},e}(Om);var sv="83906f72@hotfix/9_2_0";function av(t){const e=document.createElement("img");return new Promise((n=>{e.onload=()=>{n(e)},e.src=URL.createObjectURL(t)}))}function cv(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");return uv(t).then(av).then((t=>(n.drawImage(t,0,0),e)))}function lv(t){return uv(t).then(av)}function hv(t){return uv(t).then((t=>{const e=new FileReader;return new Promise((n=>{e.onloadend=()=>{n(e.result)},e.readAsArrayBuffer(t)}))}))}function uv(t){if(t.buffer){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");let i=new(Uint8ClampedArray||Uint8Array)(t.buffer),r=n.createImageData(t.width,t.height);return r.data.set(i),n.putImageData(r,0,0),new Promise((t=>{e.toBlob(t)}))}return t.image?Promise.resolve(t.image):Promise.reject(t)}window.toImage=lv;let dv=function(){function t(t,e,n){this.page=e,this.doc=e.doc,this.engine=n,this.info=t}var e=t.prototype;return e.destroy=function(){this.page=null,this.doc=null,this.engine=null,this.info=null},e.getId=function(){return this.info.id},e.getPDFPage=function(){return this.page},e.getBitmap=function(t,e=0,n="canvas"){let i=this.getPDFPage();return i.doc.api.getGraphicsObjectBitmap(i.getPDFDoc().getId(),i.getId(),this.getId(),t*(0,_.getPtPxRatio)(),e).then((t=>{if(!t.width||!t.height)return null;switch(n||"canvas"){case"canvas":return cv(t);case"image":return lv(t);case"buffer":return hv(t);default:throw new Error(`Invalid options.type: ${n}`)}}))},e.getRect=function(){return this.info.rect},e.setRect=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");let e=this.getPDFPage();this.info.rect=t;let n=arguments[1];return e.doc.api.setGraphicsObjectRect(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>{this.afterUpdated(t,n)}))},e.setMatrix=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");let e=this.getPDFPage();return this.info.matrix=t,e.doc.api.setGraphicsObjectMatrix(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>{this.afterUpdated(t)}))},e.getMatrix=function(){let t=this.info.matrix;return new M(t.a,t.b,t.c,t.d,t.e,t.f)},e.getDeviceMatrix=function(){let t=this.getMatrix();t.translate(0,-this.getPDFPage().getHeight());let e=V(1);return t.scale(e,-e),t},e.getType=function(){return this.info.type},e.getBorderDashes=function(){return fv(this.getType()),this.info.graphState.dashes},e.getBorderStyle=function(){return fv(this.getType()),this.info.graphState.dashes.length>0?1:0},e.setBorderStyle=function(t,e){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");fv(this.getType());let n=this.getPDFPage();return this.info.graphState.dashes=e,n.doc.api.setGraphicsObjectBorderStyle(n.getPDFDoc().getId(),n.getId(),this.getId(),t,e).then((t=>{this.afterUpdated(t)}))},e.getBorderWidth=function(){return fv(this.getType()),this.info.graphState.lineWidth},e.setBorderWidth=function(t){if(fv(this.getType()),!this.doc.checkPermission(pe.modify))throw new Error("Permission error");let e=this.getPDFPage();return this.info.graphState.lineWidth=t,e.doc.api.setGraphicsObjectBorderWidth(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>{this.afterUpdated(t)}))},e.getBorderColor=function(){return fv(this.getType()),(4278190080|this.info.strokeColor)>>>0},e.setBorderColor=function(t){if(fv(this.getType()),!this.doc.checkPermission(pe.modify))throw new Error("Permission error");let e=this.getPDFPage();return e.doc.api.setGraphicsObjectBorderColor(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>{this.afterUpdated(t)}))},e.getFillColor=function(){return fv(this.getType()),(4278190080|this.info.fillColor)>>>0},e.setFillColor=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");fv(this.getType());let e=this.getPDFPage();return e.doc.api.setGraphicsObjectFillColor(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>{this.afterUpdated(t)}))},e.getOpacity=function(){return((4278190080&this.info.strokeColor)>>>0)/4278190080},e.setOpacity=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");let e=this.getPDFPage();return e.doc.api.setGraphicsObjectOpacity(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>{this.afterUpdated(t)}))},e.remove=function(){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");return this.getPDFPage().removeGraphicsObject(this)},e.moveToPosition=function(t,e){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");let n=this.getPDFPage();if(-1===Object.values(Xt).findIndex((e=>e==t)))throw new Error("Type error");let i=null;return t!=Xt.first&&t!=Xt.last&&(i=e.getId()),n.doc.api.moveGraphicsObjectByPosition(n.getPDFDoc().getId(),n.getId(),this.getId(),t,i).then((t=>{this.afterUpdated(t)}))},e.afterUpdated=function(t,e=!0){if(!t)return this.info;if(this.info=t,!e)return this.info;const n=this.page.getBatchProcessor(),i=()=>{this.doc.engine.eventEmitter.emit(et.graphicsUpdated,this.page,this)};return n.isStarted()?n.recordFlushOperation(this,i):i(),this.info},t}();const fv=t=>{if(1!=t&&2!=t&&5!=t)throw new Error("only text, path object are supported")},pv=_.LoggerFactory.getLogger("WebAppLifecycleInvoker");let gv=function(){function t(){this.$hooks=[]}t.resolveInstance=function(e){if("object"==typeof e){if(e.invoke)return function(t){function n(){return t.apply(this,arguments)||this}(0,E.Z)(n,t);var i=n.prototype;return i.prepare=function(){"function"==typeof e.prepare&&e.prepare.apply(this,arguments)},i.generate=function(){return e.invoke.apply(this,arguments)},n}(t)}else if("function"==typeof e)return _.Reflect.isSubClassOf(e,t)?e:function(t){function n(){return t.apply(this,arguments)||this}return(0,E.Z)(n,t),n.prototype.generate=function(){return e.apply(this,arguments)},n}(t);throw new Error("incorrect lifecycle invoker")};var e=t.prototype;return e.addReleaseHook=function(t){return"function"==typeof t?(this.$hooks.push(t),()=>{const e=this.$hooks.indexOf(t);e>-1&&this.$hooks.splice(e,1)}):_.noop},e.prepare=function(){},e.generate=function(){},e.release=function(){let t=[];this.$hooks.forEach(((e,n)=>{try{!1===e()&&t.push(e)}catch(t){pv.error("An error occurred while release a resource",t)}})),this.$hooks=t},e.expose=function(){return{}},e.wrap=function(t,e,n){const i=Object.create(t),r=t[e];if("function"!=typeof r)throw new Error("Unable to wrap a member that is not function. Actual type: "+typeof r);return i[e]=n(r.bind(i)),i},t}(),mv=function(){function t(t){this.parentManager=t,this.lifeCycles={},this.generators={}}var e=t.prototype;return e.registerLifecycle=function(t){const e=t.constructor,n=e.getName();this.lifeCycles[n]=t,t.initialize();const i=e.depends();i.length>0&&i.forEach((e=>{const i=this.getLifeCycle(e);i.addReleaseHook((()=>{t.release()})),i.addDestroyHook((()=>{n in this.lifeCycles&&delete this.lifeCycles[n],t.destroy()}))}))},e.registerResourceGenerator=function(t,e){this.generators[t]=gv.resolveInstance(e)},e.getLifeCycle=function(t){if(t in this.lifeCycles)return this.lifeCycles[t];if(this.parentManager)return this.parentManager.getLifeCycle(t);throw new Error(`Incorrect lifecycle name: ${lifecycleName}, please make sure that has been registered via WebAppLifecycleManager.registerLifecycle()!`)},e.getResourceGeneratorClass=function(t){if(t in this.generators)return this.generators[t];if(this.parentManager)return this.parentManager.getResourceGeneratorClass(t);throw new Error(`Incorrect generator name: ${t}, please make sure that has been registered via WebAppLifecycleManager.registerResourceGenerator(name, generator)!`)},e.generator=function(t,e){const n=this.getLifeCycle(t);let i=n.getResourceGenerator(e);if(!i){let t;t="string"==typeof e?this.getResourceGeneratorClass(e):gv.resolveInstance(e),n.addResourceGenerator(e,t),i=n.getResourceGenerator(e)}return i},e.releaseAll=function(){Object.values(this.lifeCycles).forEach((t=>{t.release()}))},e.destroy=function(){Object.values(this.lifeCycles).forEach((t=>{t.destroy()}))},t}(),vv=function(){function t(){this.keyArray=[],this.valueArray=[]}var e=t.prototype;return e.set=function(e,n){let i=this.keyArray,r=this.valueArray,o=i.indexOf(e);if(-1===o){const n=i.indexOf(t.NONE);-1!==n?o=n:(i.push(e),o=i.length-1)}i[o]=e,r[o]=n},e.get=function(t){const e=this.keyArray;return this.valueArray[e.indexOf(t)]},e.delete=function(e){let n=this.keyArray,i=this.valueArray,r=n.indexOf(e);r>-1&&(n[r]=t.NONE,i[r]=t.NONE)},e.has=function(t){return this.keyArray.indexOf(t)>-1},e.clear=function(){this.keyArray.length=0,this.valueArray.length=0},e.keys=function(){return this.keyArray.filter((e=>e!==t.NONE))},e.values=function(){return this.valueArray.filter((e=>e!==t.NONE))},S(t,[{key:"size",get:function(){return this.keyArray.filter((e=>e!==t.NONE)).length}}],[{key:"NONE",get:function(){return{}}}]),t}();const yv=_.LoggerFactory.getLogger("WebAppLifeCycle");let wv=function(t){function e(){var e;return(e=t.call(this)||this).map=new(Map||vv),e.releaseHooks=[],e}(0,E.Z)(e,t),e.getName=function(){(0,_.notImplemented)()},e.depends=function(){return[]};var n=e.prototype;return n.release=function(){if(this.isDestroyed)return;const t=this.map.values();if(Array.isArray(t))t.forEach((t=>t.release()));else for(const e of t)e.release();this.releaseHooks.forEach((t=>{try{t()}catch(t){yv.error("An error occurred while invoking release hook",t)}})),this.releaseHooks.length=0},n.getResourceGenerator=function(t){if(this.map.has(t))return this.map.get(t)},n.addResourceGenerator=function(t,e){if(this.map.has(t))throw new Error("duplicate generator name is not supported now!");this.map.set(t,new e)},n.initialize=function(){(0,_.notImplemented)()},n.addReleaseHook=function(t){"function"==typeof t&&this.releaseHooks.push(t)},n.destroy=function(){this.isDestroyed||(this.release(),this.map.clear(),delete this.map,t.prototype.destroy.call(this))},e}(_.Disposable),bv=function(t){function e(e){var n;return(n=t.call(this)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.getName=function(){return Gd.PDF_VIEWER_ALIVE},e.depends=function(){return[Gd.BROWSER_RELOAD]},e.prototype.initialize=function(){let t=this.pdfViewer.destroy;this.pdfViewer.destroy=(...e)=>t.apply(this.pdfViewer,e).then((()=>{this.release()}))},e}(wv),Av=function(t){function e(e){var n;return(n=t.call(this)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.getName=function(){return Gd.PDF_DOCUMENT_CLOSING},e.depends=function(){return[Gd.PDF_VIEWER_ALIVE,Gd.BROWSER_RELOAD]},e.prototype.initialize=function(){const t=()=>{this.release()};this.pdfViewer.eventEmitter.on(nt.willCloseDocument,t),this.addDestroyHook((()=>{this.pdfViewer.eventEmitter.off(nt.willCloseDocument,t),delete this.pdfViewer}))},e}(wv),Pv=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.generate=function(t){const e=window.URL||window.webkitURL,n=e.createObjectURL(t);return this.addReleaseHook((()=>(e.revokeObjectURL(n),!0))),n},n.expose=function(){return this.getWrappedURL()},n.getWrappedURL=function(){if(this.WrappedURL)return this.WrappedURL;let t=window.URL||window.webkitURL;const e=this.wrap(t,"createObjectURL",(()=>t=>this.generate(t)));return this.WrappedURL=e,e.URL=e,e},e}(gv),Sv=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t),e.getName=function(){return Gd.BROWSER_RELOAD};var n=e.prototype;return n.initialize=function(){},n.addResourceGenerator=function(e,n){const i=this.map.size;t.prototype.addResourceGenerator.call(this,e,n),this.map.size>i&&this.prepareUnloadEvent()},n.prepareUnloadEvent=function(){if(!this.prepared)if(this.prepared=!0,"function"!=typeof window.onunload)window.onunload=()=>(this.destroy(),"");else{let t=window.onunload;window.onunload=e=>(this.destroy(),t.call(window,e))}},e}(wv);var Cv=m(8628);m(4564),m(385);let Ev=function(){function t(t,e){this.id=t,this.page=e,this.api=e.api}var e=t.prototype;return e.getId=function(){return this.id},e.findNext=function(){return this.page.doc.api.textSearchFindNext(this.getId()).then((t=>t?new br(t):null))},e.findPrev=function(){return this.page.doc.api.textSearchFindPrev(this.getId()).then((t=>t?new br(t):null))},e.destroy=function(){if(!this.page.isDestroyed&&!this.page.doc.isDestroyed&&this.page.doc.api)return this.page.doc.api.textSearchDestroy(this.getId())},t}(),xv=function(){function t(t,e,n){this.doc=t,this.id=e,this.engine=n}var e=t.prototype;return e.hasKey=function(t){return this.doc.api.hasKey(this.doc.getId(),this.id,t)},e.setAt=function(t,e){return this.doc.api.setAt(this.doc.getId(),this.id,t,e).then((t=>(this.engine.eventEmitter.emit(et.docModified,this.doc),t)))},e.getAt=function(t){return this.doc.api.getAt(this.doc.getId(),this.id,t)},t}();var Dv=xv;let Iv=function(){function t(t){this.id=t}var e=t.prototype;return e.getId=function(){return this.id},e.findNext=function(){return Promise.resolve(null)},e.findPrev=function(){return Promise.resolve(null)},e.destroy=function(){},t}();const Rv=["Courier","Courier-Bold","Courier-BoldOblique, Bold italic","Courier-Oblique, Italic","Helvetica","Helvetica-Bold","Helvetica-BoldOblique, Bold italic","Helvetica-Oblique, Italic","Times-Roman","Times-Bold","Times-BoldItalic","Times-Italic","Symbol","ZapfDingbats"];function Tv(t,e,n){let i=t.json,r=i.contentFormats,o=i.contents,s=[r.TopLeft||(o?[{type:"string",value:o.TopLeft}]:[]),r.TopCenter||(o?[{type:"string",value:o.TopCenter}]:[]),r.TopRight||(o?[{type:"string",value:o.TopRight}]:[]),r.BottomLeft||(o?[{type:"string",value:o.BottomLeft}]:[]),r.BottomCenter||(o?[{type:"string",value:o.BottomCenter}]:[]),r.BottomRight||(o?[{type:"string",value:o.BottomRight}]:[])];s=s.map((t=>{let e="";return t.forEach((t=>{switch(t.type){case"string":be(t.value)?e="":e+=t.value;break;case"pageNumber":e+=function(t){switch(t){case Nt.default:return"<<1>>";case Nt.numberOfCount:return"<<1 of n>>";case Nt.numberSlashCount:return"<<1/n>>";case Nt.pageNumber:return"<<Page 1>>";case Nt.pageNumberOfCount:return"<<Page 1 of n>>"}return"<<1>>"}(t.value);break;case"date":e+=function(t){switch(t){case Lt.MSlashD:return"<<m/d>>";case Lt.MSlashDSlashYY:return"<<m/d/yy>>";case Lt.MSlashDSlashYYYY:return"<<m/d/yyyy>>";case Lt.MMSlashDDSlashYY:return"<<mm/dd/yy>>";case Lt.MMSlashDDSlashYYYY:return"<<mm/dd/yyyy>>";case Lt.DSlashMSlashYY:return"<<d/m/yy>>";case Lt.DSlashMSlashYYYY:return"<<d/m/yyyy>>";case Lt.DDSlashMMSlashYY:return"<<dd/mm/yy>>";case Lt.DDSlashMMSlashYYYY:return"<<dd/mm/yyyy>>";case Lt.MMSlashYY:return"<<mm/yy>>";case Lt.MMSlashYYYY:return"<<mm/yyyy>>";case Lt.MDotDDotYY:return"<<m.d.yy>>";case Lt.MDotDDotYYYY:return"<<m.d.yyyy>>";case Lt.MMDotDDDotYY:return"<<mm.dd.yy>>";case Lt.MMDotDDDotYYYY:return"<<mm.dd.yyyy>>";case Lt.MMDotYY:return"<<mm.yy>>";case Lt.DDotMDotYYYY:return"<<d.m.yyyy>>";case Lt.DDDotMMDotYY:return"<<dd.mm.yy>>";case Lt.DDDotMMDotYYYY:return"<<dd.mm.yyyy>>";case Lt.YYHyphenMMHyphenDD:return"<<yy-mm-dd>>";case Lt.YYYYHyphenMMHyphenDD:return"<<yyyy-mm-dd>>"}return"<<<<m/d>>"}(t.value)}})),e}));let a={submitLoading:!1,showPreview:!1,fontEmbed:!1,isShrink:!1,isKeep:!1,marginLeft:72,marginRight:72,marginTop:36,marginBottom:36,pageOdd:!0,pageEven:!0,pageCount:n,fontEmbed:!1,currentPage:e};a.leftHeaderText=s[0],a.centerHeaderText=s[1],a.rightHeaderText=s[2],a.leftFooterText=s[3],a.centerFooterText=s[4],a.rightFooterText=s[5],a.isShrink=i.hasTextShrinked||!1,a.isKeep=i.hasFixedSized||!1,i.startPageNumber=i.startPageNumber||1,a.startPage=i.startPageNumber-1,i.range?(i.range.start=i.range.start||1,i.range.end=i.range.end||n,i.range.start<1&&(i.range.start=1),i.range.start>n&&(i.range.start=n),i.range.end<1&&(i.range.end=1),i.range.end>n&&(i.range.end=n),a.pageStart=i.range.start-1,a.pageEnd=i.range.end-1,0===i.range.filter?(a.pageOdd=!0,a.pageEven=!0):1===i.range.filter?(a.pageOdd=!1,a.pageEven=!0):2===i.range.filter&&(a.pageOdd=!0,a.pageEven=!1)):(a.pageStart=0,a.pageEnd=n-1,a.pageOdd=!0,a.pageEven=!0),i.margin&&(a.marginLeft=i.margin.left,a.marginBottom=i.margin.bottom,a.marginTop=i.margin.top,a.marginRight=i.margin.right);let c=i.font?i.font:i.fontId;return a.font=c||0,a.fontSize=i.textSize||12,a.fontColor=i.textColor||0,a.underLine=i.underline||!1,"string"==typeof a.font?a.fontName=a.font:((a.font<0||a.font>=Rv.length)&&(a.font=0),a.fontName=Rv[a.font]),a}function Fv(t,e){let n=0;!t.pageOdd&&t.pageEven?n=1:t.pageOdd&&!t.pageEven&&(n=2);let i=-1===t.pageStart?1:t.pageStart+1,r=-1===t.pageEnd?e:t.pageEnd+1,o=(0,_.colorConvertor)(t.fontColor,"int",0);return{font:t.fontName,textSize:t.fontSize,textColor:o,hasTextShrinked:t.isShrink,hasFixedSized:t.isKeep,range:{start:i,end:r,filter:n},margin:{left:t.marginLeft,right:t.marginRight,top:t.marginTop,bottom:t.marginBottom},startPageNumber:t.startPage+1,contents:{TopLeft:t.leftHeaderText,TopCenter:t.centerHeaderText,TopRight:t.rightHeaderText,BottomLeft:t.leftFooterText,BottomCenter:t.centerFooterText,BottomRight:t.rightFooterText},contentFormats:{},underline:t.underLine}}function _v(t,e,n,i,r){let o={showAdvanceSetting:!0,showApperanceOptModal:!1,submitLoading:!1,pageCount:r,currentPage:e+1,text:"",pageNumber:e,absScale:t.absScale,filePath:"",docId:null,doc:null,file:null,scaleCkd:!0,appear:2,pageStart:n,pageEnd:i,pageOdd:!0,pageEven:!0,isPrint:!0,isScreen:!0,isKeep:!1,unit:6,isMultiline:t.isMultiline,rowSpace:t.rowSpace,columnSpace:t.columnSpace};if(o.scaleCkd=!1!==t.useRelativeScale,void 0===o.absScale&&(o.absScale=100),o.absScale<0&&(o.scale=0),o.absScale>100&&(o.scale=100),o.isMultiline&&(null==o.rowSpace&&(o.rowSpace=0),null==o.columnSpace&&(o.columnSpace=0)),"text"===t.type){o.sourceType=1,o.text=t.text;let e=y({font:0,fontSize:20,color:0,fontStyle:"normal"},t.watermarkTextProperties);o.font=e.font,o.fontSize=e.fontSize,o.fontColor=e.color,"normal"===e.fontStyle?o.underLine=!1:"underline"===e.fontStyle&&(o.underLine=!0),"string"==typeof o.font?o.fontName=o.font:((o.font<0||o.font>=Rv.length)&&(o.font=0),o.fontName=Rv[o.font])}else"bitmap"===t.type&&(o.sourceType=2,o.bitmap=t.bitmap);let s=y({position:"Center",offsetX:0,offsetY:0,flags:7,scale:1,rotation:45,opacity:100},t.watermarkSettings);switch(o.hDistance=s.offsetX,o.vDistance=s.offsetY,o.opacity=s.opacity,o.rotate=s.rotation,s.scale<0&&(s.scale=.01),s.scale>1&&(s.scale=1),o.scale=100*s.scale,s.flags&Dt.asAnnot?o.isKeep=!0:o.isKeep=!1,s.flags&Dt.onTop?o.appear=2:o.appear=1,s.flags&Dt.unprintable?o.isPrint=!1:o.isPrint=!0,s.flags&Dt.display?o.isScreen=!1:o.isScreen=!0,s.position){case xt.topLeft:o.vFrom=1,o.hFrom=1;break;case xt.topCenter:o.vFrom=1,o.hFrom=2;break;case xt.topRight:o.vFrom=1,o.hFrom=3;break;case xt.centerLeft:o.vFrom=2,o.hFrom=1;break;case xt.center:o.vFrom=2,o.hFrom=2;break;case xt.centerRight:o.vFrom=2,o.hFrom=3;break;case xt.bottomLeft:o.vFrom=3,o.hFrom=1;break;case xt.bottomCenter:o.vFrom=3,o.hFrom=2;break;case xt.bottomRight:o.vFrom=3,o.hFrom=3}return o}var kv;!function(t){t.EDIT_GRAPHICS_OBJECT="edit-graphics-object"}(kv||(kv={}));var Mv=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};const Ov=_.LoggerFactory.getLogger("engine-pdf-page-batch-processor");let Lv=function(){function t(t,e=kv.EDIT_GRAPHICS_OBJECT){this.page=t,this.kind=e,this.flushOperations=new Map,this.started=!1}var e=t.prototype;return e.start=function(){return Mv(this,void 0,void 0,(function*(){return this.started=!0,this.callAPI("start")}))},e.isStarted=function(){return!this.isDestroyed()&&this.started},e.flush=function(){return Mv(this,void 0,void 0,(function*(){if(this.isStarted())return this.flushLocally(),this.callAPI("flush")}))},e.end=function(){return Mv(this,void 0,void 0,(function*(){return this.started=!1,this.flushLocally(),this.callAPI("end")}))},e.flushLocally=function(){const t=this.flushOperations.values();try{for(const e of t)e()}catch(t){Ov.error(t)}finally{this.flushOperations.clear()}},e.isDestroyed=function(){return this.page.isDestroyed},e.callAPI=function(t){if(this.isDestroyed())return;const e=this.page.doc,n=this.page.getId(),i=e.getId();return e.api.emitPageBatchProcessor(i,n,{action:t,kind:this.kind})},e.recordFlushOperation=function(t,e){this.flushOperations.set(t,e)},t}();const Nv=["highlight","strikeout","underline","squiggly","caret","text","fileattachment","freetext","ink","line","link","circle","square","polygon","polyline","stamp","screen"];function Bv(t,e){if(-1==Nv.indexOf(t.type))throw new Error("Annot type error");if(e&&e.isTextAsContent){["highlight","strikeout","underline","squiggly"].includes(t.type)&&!t.contents&&t.coords[0]&&t.coords[0].text&&(t.contents=t.coords[0].texts||t.coords[0].text)}return t.iconCatagory&&(t.iconCategory=t.iconCatagory),t.iconInfo&&t.iconInfo.catagory&&(t.iconInfo.category=t.iconInfo.catagory),t}function Vv(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let Uv=function(){function t(t,e){this.info=t,this.isDestroyed=!1,this.doc=e,this.engine=e.engine,this.api=e.api,this._pxWdith=V(this.getWidth()),this._pxHeight=V(this.getHeight()),this.annots=[],this.annotIdMap={},this.graphicObjects=[],this.info.AA[0]&&(this.openAction=this.doc.engine.actionFactory.createAction(this.info.AA[0],e,this.doc.api,this.doc.engine.eventEmitter,this)),this.info.AA[1]&&(this.closeAction=this.doc.engine.actionFactory.createAction(this.info.AA[1],e,this.doc.api,this.doc.engine.eventEmitter,this)),e.pageIdMap[t.id]=this,this.batchProcessor=new Lv(this),this.queuedTaskExecutor=new _.QueuedAsyncTaskExecutor}var e=t.prototype;return e.getAction=function(t){return"open"==t?this.openAction:this.closeAction},e.getActions=function(t){return this.doc.api.getPageAction(this.getPDFDoc().getId(),this.getId(),t).then((t=>{if(t)return this.doc.engine.actionFactory.createAction(t,this.doc,this.doc.api,this.engine.eventEmitter,this)}))},e.setAction=async function(t,e){return this.doc.api.setPageAction(this.getPDFDoc().getId(),this.getId(),t,e.info).then((t=>(this.doc.engine.eventEmitter.emit(et.docModified,this.doc),t)))},e.setActionData=function(){this.doc.api.updatePageAction()},e.moveAction=function(t){return this.doc.api.movePageAction(this.getPDFDoc().getId(),this.getId(),t).then((t=>(this.doc.engine.eventEmitter.emit(et.docModified,this.doc),t)))},e.removeAction=function(t,e){return this.doc.api.removePageAction(this.getPDFDoc().getId(),this.getId(),t,e?e.info:null).then((t=>(this.doc.engine.eventEmitter.emit(et.docModified,this.doc),t)))},e.getId=function(){return this.info.id},e.getInfo=function(){return this.info},e.getPDFDoc=function(){return this.doc},e.getIndex=function(){return this.info.index},e.getWidth=function(){return this.info.width},e.getHeight=function(){return this.info.height},e.updateInfo=function(){return this.doc.api.updatePageInfo(this.getPDFDoc().getId(),this.getId()).then((t=>{this._updateInfo(t)}))},e._updateInfo=function(t){this.info=t,this.doc.updatePageSize(t.index,this.getWidth(),this.getHeight()),this._pxWdith=V(this.getWidth()),this._pxHeight=V(this.getHeight()),this.doc.engine.eventEmitter.emit(et.pageInfoChange,this)},e.getRotation=function(){return this.info.rotation},e.setRotation=function(t){if(!this.doc.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");let e=this.getRotation();return t===e?Promise.resolve():this.doc.api.setPageRotation(this.getPDFDoc().getId(),this.getId(),t).then((t=>Promise.all([t,this.updateInfo()]))).then((([t])=>{this.doc.engine.eventEmitter.emit(et.pageRotationChange,this,t,e)}))},e.getRotationAngle=function(){let t=this.getRotation();if(4===t)throw new Error("Unknown rotation angle value: "+t);return 90*t},e.getPxWidth=function(){return this._pxWdith},e.getPxHeight=function(){return this._pxHeight},e.getOriginX=function(){return this.info.cropBox.left},e.getOriginY=function(){return this.info.cropBox.bottom},e.getPDFMatrix=function(){return new M(this.info.matrix)},e.getDeviceMatrix=function(t=0){let e=this.getPDFMatrix(),n=this.getHeight(),i=this.getWidth();e.translate(0,-n);let r=V(1);switch(e.scale(r,-r),t){case 90:e.rotate(t/180*Math.PI),e.translate(r*n,0);break;case 180:e.rotate(t/180*Math.PI),e.translate(r*i,r*n);break;case 270:e.rotate(t/180*Math.PI),e.translate(0,r*i)}return e},e.getDeviceMatrix2=function(){let t=this.getPDFMatrix(),e=this.getRotation(),n=V(1);switch(e%4){case 0:t.translate(0,-this.getHeight()),t.scale(n,-n);break;case 1:t.scale(-n,n),t.rotate(Math.PI/2);break;case 2:t.translate(-this.getWidth(),0),t.scale(-n,n);break;case 3:t.translate(this.getWidth(),this.getHeight()),t.rotate(Math.PI/2),t.scale(n,-n)}return t},e.getDevicePoint=function(t,e=1,n=0){let i=this.getDeviceMatrix(n);return i.scale(e,e),i.transformPoint(t[0],t[1])},e.getDeviceRect=function(t,e=1,n=0){let i=this.getDeviceMatrix(n);i.scale(e,e);let r=i.transformRect(t.left,t.top,t.right,t.bottom);return{left:r[0],top:r[1],right:r[2],bottom:r[3]}},e.getAnnotDeviceMatrix=function(t,e=1,n=0,i){let r=t;t instanceof Se&&(r=t.info);let o=r.flag,s=8&o,a=16&o;"text"===r.type&&(s=a=!0);let c=this.getDeviceMatrix(n);if(c.scale(e,e),!s&&!a)return c;let l=new M,h=r.rect;i&&(h=i);let u,d,f=new fe(h.left,h.bottom,h.right,h.top);if(s)u=_.dpr,d=-_.dpr;else{let t,e,n,i,r,o;t=e=0;let s=c.transformPoint(t,e);t=s[0],e=s[1],n=1,i=0,s=c.transformPoint(n,i),n=s[0],i=s[1],n-=t,i-=e,r=0,o=1,s=c.transformPoint(r,o),r=s[0],o=s[1],r-=t,o-=e,u=Math.sqrt(n*n+i*i),d=-Math.sqrt(r*r+o*o)}l.a=u,l.b=0,l.c=0,l.d=d,!a&&n>0&&n<4&&l.Rotate(Math.PI*n/2);let p=f.left,g=f.top,m=c.transformPoint(p,g);return p=m[0],g=m[1],l.e=p-f.left*l.a-f.top*l.c,l.f=g-f.left*l.b-f.top*l.d,l},e.getAnnotDeviceRect=function(t,e=1,n=0,i){let r=this.getAnnotDeviceMatrix(t,e,n,i),o=t;t instanceof Se&&(o=t.info);let s=new fe(o.rect.left,o.rect.bottom,o.rect.right,o.rect.top);i&&(s=i);let a=r.transformRect(s.left,s.top,s.right,s.bottom);return{left:a[0],top:a[1],right:a[2],bottom:a[3]}},e.reverseDevicePoint=function(t,e=1,n=0){let i=this.getDeviceMatrix(n);return i.scale(e,e),i.setReverse(),i.transformPoint(t[0],t[1])},e.reverseDeviceOffset=function(t,e=1,n=0){let i=this.getDeviceMatrix(n);return i.e=i.f=0,i.scale(e,e),i.setReverse(),i.transformPoint(t[0],t[1])},e.reverseDeviceRect=function(t,e=1,n=0){let i=this.getDeviceMatrix(n);i.scale(e,e),i.setReverse();let[r,o,s,a]=i.transformRect(t.left,t.top,t.right,t.bottom),c=Math.min(r,s),l=Math.max(r,s);return{left:c,top:Math.max(o,a),right:l,bottom:Math.min(o,a)}},e.render=function(t,e,n,i=["page"],r="view"){if(!this.doc.checkPermission(pe.print||pe.printHigh))throw new Error("Permission error");if(t*=4/3,-1==i.indexOf("page")&&i.push("page"),"view"!=r&&"print"!=r)throw new Error("Param error: usage should be one of 'view', 'print'. Got '"+r+"' instead.");return this.getPageBitmap(t,e,n,i,r).then((o=>{const s=o=>o.rate<100?this.doc.api.continueProgress(o.progressiveId).then(s):o.buffer||o.image?o:this.getPageBitmap(t,e,n,i,r);return o.rate>=100?o:s(o)}))},e.getPageBitmap=function(t,e,n,i=["page"],r="view"){let o=arguments[5]||"",s=arguments[6];return this.doc.api.getPageBitmap(this.getPDFDoc().getId(),this.getId(),t,e,n,i,r,o,!1,s)},e.clearDesignerAssitCache=function(){return this.doc.api.clearDesignerAssitCache(this.getPDFDoc().getId(),this.getId())},e.getPageAndHighlightBitmap=function(t,e,n,i){return this.doc.api.getPageAndHighlightBitmap(this.getPDFDoc().getId(),this.getId(),t,e,n,i)},e.getAnnotBitmap=function(t,e,n,i,r,o,s){return!0===r?this.doc.api.getAnnotBitmap(this.getPDFDoc().getId(),this.getId(),t,e,n,i,o):this.getAnnots().then((r=>{if(t.trim().length<1)return null;let s=this.getAnnotObjectNum(t);return 0==s?null:this.doc.api.getAnnotBitmap(this.getPDFDoc().getId(),this.getId(),s,e,n,i,o)}))},e.getPageObjNum=function(){return this.info.objectNumber},e.getAnnotObjectNum=function(t){if(t.trim().length<1)return 0;const e=Object.keys(this.annotIdMap);if(!e.length)return 0;let n=e.find((e=>this.annotIdMap[e].getName()==t));return parseInt(n)},e.getAnnotBitmapByRange=function(t,e,n,i){return this.doc.api.getAnnotBitmapByRange(this.getPDFDoc().getId(),this.getId(),t,e,n,i)},e.getAnnotCount=function(){return this.annots.length||this.info.annotCount},e.resetWidgetsControl=function(){this.annots.forEach((t=>{"widget"==t.getType()&&t.mapFormControl()}))},e.getAnnots=function(t=!1){if(t&&(this.annots.length=0,this.annotIdMap={},this.annotsPromise=null),this.annotIdMap){const t=Object.keys(this.annotIdMap);if(this.annots.length&&t.length){const e=t.map((t=>this.annotIdMap[t]));return e.sort(Hv),Promise.resolve(e)}}const e=this.doc.engine;return e?this.annotsPromise=this.annotsPromise||this.doc.api.getAnnots(this.getPDFDoc().getId(),this.getId(),null,t).then((t=>this.isDestroyed?[]:t.map((t=>e.annotManager.get(t,this))))).then((t=>{if(this.isDestroyed)return[];const n=[];this.annotIdMap=t.reduce(((t,e,i)=>{if(!t)return;const r=e.getId();return r in t||n.push(e),t[r]=e,t}),this.annotIdMap);const i=t.map((t=>t.reviseSummary((t=>this.annotIdMap[t]))));return Promise.all(i).then((()=>this.annots?(this.annots.length=0,t.sort(Hv),t.forEach((t=>this.annots.push(t))),this.info.annotCount=t.length,this.annotsPromise=null,e.eventEmitter.emit(et.annotationLoaded,this,n,t),this.annots):[]))})):Promise.resolve()},e.setAnnots=function(t){t.sort(Hv),this.annots=t},e.getMarkupAnnots=function(){const t=!0===arguments[0];return this.getAnnots().then((e=>function(e){const n=t=>"popup"===t,i=t=>"widget"===t;e=e.filter((t=>t.isMarkup()&&!t.isDeleted()&&!n(t.getType())&&!i(t.getType())&&t.getReplies&&(!t.isStateAnnot||!t.isStateAnnot())));const r=[],o=[];e.forEach((t=>{const e=t.getReplies();r.push.apply(r,Vv(w.Z,e)),r.forEach((function t(e){if(e||!e.getReplies)return;const n=e.getReplies();r.push.apply(r,Vv(w.Z,n)),n.forEach(t)})),o.push.apply(o,Vv(w.Z,t.getReviewStates())),o.push.apply(o,Vv(w.Z,t.getMarkedStates()))}));let s=e.filter((t=>-1===r.indexOf(t)&&-1===o.indexOf(t)));return t?s.reduce(((t,e)=>{const n=e.getGroupHeader&&e.getGroupHeader()||e;return-1===t.indexOf(n)&&t.push(n),t}),[]):(s.forEach((t=>{"Replace"===t.getIntent()&&t.groupElements.forEach((e=>{if(e!==t){const t=s.indexOf(e);t>-1&&s.splice(t,1)}}))})),s)}(e)))},e.filterAnnot=function(t,e){let n=!t;for(let i=0;i<this.annots.length;i++){const r=this.annots[i];if(n&&r.getType()==e)return r;r.info.objectNumber==t&&(n=!0)}return null},e.filterPrevAnnot=function(t,e){let n=!t;for(let i=this.annots.length-1;i>=0;i--){const r=this.annots[i];if(n&&r.getType()==e)return r;r.info.objectNumber==t&&(n=!0)}return null},e.getAnnotTree=function(){const t=!0===arguments[0];return this.getMarkupAnnots(t).then((t=>this.getAnnots().then((e=>{const n=e.filter((t=>!t.isMarkup()&&!t.isDeleted()&&"popup"!==t.info.type));return t.concat(n).sort(((t,n)=>e.indexOf(t)-e.indexOf(n)))}))))},e.getAnnotIdAtDevicePoint=function(t,e,n){return this.doc.api.getAnnotIdAtDevicePoint(this.getPDFDoc().getId(),this.getId(),{x:t[0],y:t[1]},e,n)},e.getAnnotObjectNumAtDevicePoint=function(t,e,n){return this.doc.api.getAnnotObjectNumAtDevicePoint(this.getPDFDoc().getId(),this.getId(),{x:t[0],y:t[1]},e,n)},e.getCharInfoAtPoint=function(t,e=0){if(!this.doc.checkPermission(pe.extract||pe.extractAccess))throw new Error("Permission error");return this.doc.api.getCharInfoAtPoint(this.getPDFDoc().getId(),this.getId(),{x:t[0],y:t[1]},e)},e.removeAnnot=function(t){return this.removeAnnotByObjectNumber(t.getId())},e.removeAnnotById=function(t){return this.getAnnots().then((e=>{const n=e.find((e=>t&&t===e.getUniqueID()));return n&&n.getObjectNumber?this.removeAnnotByObjectNumber(n.getObjectNumber()):[]}))},e.removeAnnotByObjectNumber=function(t){if(!this.doc.checkPermission(pe.annotForm))throw new Error("Permission error");return this.getAnnots().then((e=>e.filter((t=>t.getType()!==ti.widget)).map((t=>t.getId())).length?this.doc.api.removeAnnot(this.getPDFDoc().getId(),this.getId(),t):[])).then((t=>(this.clearRelatives(t),this.clearAnnotIds(t)))).then((t=>{let e=t.reduce((function(t,{objNum:e}){return t[e]=1,t}),{}),n=this.annots;for(let t=n.length;t--;){e[n[t].objectNumber]&&n.splice(t,1)}return this.setAnnots(n),this.doc.engine.eventEmitter.emit(et.annotationRemoved,t,this),t}))},e.removeAllAnnot=function(){if(!this.doc.checkPermission(pe.annotForm))throw new Error("Permission error");let t;return this.getAnnots().then((e=>{const n=e.filter((t=>t.getType()!==ti.widget));return t=n.map((t=>t.getId())),t.length?this.doc.api.removePageAllAnnot(this.getPDFDoc().getId(),this.getId()):[]})).then((()=>(this.clearRelatives(t),this.clearAnnotIds(t)))).then((t=>(this.doc.engine.eventEmitter.emit(et.annotationRemoved,t,this),t)))},e.getThumb=function(t=0,e=1){(0,_.assertThat)((0,_.isValidRotationAngle)(t),`Incorrect rotation degree: ${t}, it should be 0, 90, 180, or 270`);const n=this.getPDFDoc().getId(),i=this.getId();return this.doc.api.getThumb(n,i,t,e)},e.getMediaBoxBitmap=function(t,e){const n=this.getPDFDoc().getId(),i=this.getId();return this.doc.api.getMediaBoxBitmap(n,i,t,e)},e.clearRelatives=function(t){if(!Array.isArray(t)||!t)return;let e=t.slice(0);this.getAnnots().then((t=>{t.some((t=>t instanceof Em&&(e=t.removeRepliesByIdLocaly(e),0==e.length)))}))},e.clearAnnotIds=function(t){let e=[],n=this.annotIdMap,i=this.info;for(let r=t.length;r--;){let o=t[r];e[r]=n[o],e[r]&&(e[r].info.isDeleted=!0,delete n[o],i.annotCount--),this.annots.forEach((t=>{t.getId()==o&&(t.info.isDeleted=!0)}))}for(var r=e.length;r--;)e[r]||e.splice(r,1);return this.annots=this.annots.filter((e=>-1===t.map((t=>String(t))).indexOf(String(e.getId())))),e},e.addReplyAnnot=function(t){if(!this.doc.checkPermission(pe.annotForm))throw new Error("Permission error");return this.addAddonAnnot(t)},e.addAddonAnnot=function(t){let e=t.getId();return this.info.annotCount++,this.annots.push(t),this.annotIdMap[e]=t,t.reviseSummary((t=>this.annotIdMap[t]))},e.removeAddonAnnotById=function(t){if(this.annotIdMap[t]){this.info.annotCount-=1;let e=this.annots;for(let n=e.length;n--;){t===e[n].objectNumber&&e.splice(n,1)}return delete this.annotIdMap[t]}return!1},e.addAnnot=function(t){if(!this.doc.checkPermission(pe.annotForm))throw new Error("Permission error");"number"==typeof(t=Bv(t,this.engine.getUserCommentConfig())).page&&(t=(t=>{let e,n={type:t.type,opacity:t.opacity,name:t.name,contents:t.contents,subject:t.subject,title:t.title,icon:t.icon,intent:t.intent||t.IT,DA:t.defaultappearance,alignment:t.justification,enableCaption:"yes"==t.caption,rotation:t.rotation},i=t.fontColor;i&&(n.fontColor=parseInt(i.replace("#",""),16)),(e=t.color)&&(n.color=parseInt(e.replace("#",""),16));let r=t["interior-color"]||t.interiorColor;r&&(n.styleFillColor=n.fillColor=parseInt(r.replace("#",""),16));let o=t.flags||"print",s=o.split(",");o=0;for(let t in st.AnnotFlagsName)-1!=s.indexOf(st.AnnotFlagsName[t])&&(o|=1<<parseInt(t));n.flag=o;let a=(t.rect||"").split(",");a.length&&(n.rect={left:+a[0],top:+a[3],right:+a[2],bottom:+a[1]});let c=(t.fringe||"").split(",");4===c.length&&(n.innerRect={left:n.rect.left+ +c[0],top:n.rect.top-+c[3],right:n.rect.right-+c[2],bottom:n.rect.bottom+ +c[1]});let l=t.coords;if(l){l=l.split(","),n.coords=[];for(let t=0,e=l.length;t<e;t+=8){let e=Math.min(+l[t],+l[t+2],+l[t+4],+l[t+6]),i=Math.max(+l[t],+l[t+2],+l[t+4],+l[t+6]),r=Math.max(+l[t+1],+l[t+3],+l[t+5],+l[t+7]),o=Math.min(+l[t+1],+l[t+3],+l[t+5],+l[t+7]);n.coords.push({left:e,right:i,top:r,bottom:o})}}let h=t.callout;if(h){h=h.split(","),n.calloutLinePoints=[];for(let t=0,e=h.length;t<e;t+=2)n.calloutLinePoints.push({x:+h[t],y:+h[t+1]})}let u=t.head;u&&(n.startStyle=de(u));let d=t.tail;d&&(n.endStyle=de(d));let f=t.vertices;if(f){n.vertexes=[],f=f.split(";");for(let t=0;t<f.length;t++){let e=f[t].split(",");n.vertexes.push({x:+e[0],y:+e[1]})}}let p=t.inklist;if(p){n.inkList=[],p=JSON.parse("["+p.replace(/;/g,",")+"]");for(let t=0;t<p.length;t++){const e=p[t];for(let t=0;t<e.length;t+=2){const i=e[t];let r=0==t?1:2;n.inkList.push({x:i,y:e[t+1],type:r})}}}let g=gt[t.style||"solid"];n.borderInfo={style:g,width:t.width||1};let m=t.dashes;m&&(n.borderInfo.dashes=JSON.parse("["+m+"]"));let v=t.intensity;v&&(n.borderInfo.cloudIntensity=v);let y=t.start;y&&(y=y.split(","),n.startPoint={x:+y[0],y:+y[1]});let w=t.end;return w&&(w=w.split(","),n.endPoint={x:+w[0],y:+w[1]}),n})(t));const e=arguments,n=this.getPDFDoc().getId(),i=this.getId(),r=this.doc.engine.getDefaultAnnotConfig()(t.type,t.intent);return t=(0,_.extendOptions)({},r,t),this.doc.api.addAnnot(n,i,t).then((t=>this._doAfterAddAnnots(t,(()=>{let t=e[e.length-1];return"boolean"!=typeof t||t})())),(t=>{let e=(0,_.createDeferred)();return e.reject(t),e.promise}))},e.markRedactAnnot=function(t){let e;if(arguments&&arguments[1]&&(e=arguments[1]),!this.doc.checkPermission(pe.annotForm))throw new Error("Permission error");const n=this.getPDFDoc().getId(),i=this.getId();return this.doc.api.markRedactAnnot(n,i,t,e).then((t=>this._doAfterAddAnnots(t)))},e.addAnnotGroup=function(t,e){if(!this.doc.checkPermission(pe.annotForm))throw new Error("Permission error");t.forEach((t=>{if(!t.type)throw new Error("Annot type error")}));const n=this.getPDFDoc().getId(),i=this.getId();return t=t.map((t=>{const e=this.doc.engine.getDefaultAnnotConfig()(t.type,t.intent);return(0,_.extendOptions)({},e,t)})),this.doc.api.addAnnotGroup(n,i,t,e).then((t=>this._doAfterAddAnnots(t)))},e._doAfterAddAnnots=function(t,e=!0){const n=t.map((t=>t&&this.doc.engine.annotManager.get(t,this)));n.reduce(((t,e)=>(t[e.getId()]=e,t)),this.annotIdMap);const i=n.map((t=>t.reviseSummary((t=>this.annotIdMap[t]))));return this.annots=this.annots.concat(n),this.info.annotCount=this.annots.length,Promise.all(i).then((()=>(e&&this.doc.engine.eventEmitter.emit(et.annotationAdd,n,this),n)))},e.getUnloadedAnnots=function(){return this.queuedTaskExecutor.exec((()=>this._getUnloadedAnnots()))},e._getUnloadedAnnots=function(){const t=this.getPDFDoc().getId(),e=this.getId();return this.doc.api.getPageAnnotIDList(t,e).then((n=>{const i=n.filter((t=>!this.annotIdMap[t]));return(i.length?this.doc.api.getAnnots(t,e,i):Promise.resolve([])).then((t=>t.map((t=>t?this.doc.engine.annotManager.get(t,this):null)).filter((t=>!!t)))).then((t=>{const e=t.reduce(((t,e)=>(t[e.getId()]=e,t)),{});return this.annotIdMap=n.reduce(((t,n)=>{let i=this.annotIdMap[n]||e[n];return i&&(t[n]=i),t}),{}),Promise.all(Object.keys(this.annotIdMap).map((t=>{let e=this.annotIdMap[t];return e&&e._update(!0)}))).then((e=>t))})).then((t=>{this.setAnnots(this.annots.concat(t)),this.info.annotCount=this.annots.length;let e=this.annots.map((t=>t.reviseSummary((t=>this.annotIdMap[t]))));return Promise.all(e).then((()=>{this.doc.engine.eventEmitter.emit(et.annotationLoaded,this,t,this.annots)})),t}))}))},e.getTextRectsAtRect=function(t){return this.doc.api.getTextRectsAtRect(this.getPDFDoc().getId(),this.getId(),t)},e.getTextRects=function(t){return this.doc.api.getTextRects(this.getPDFDoc().getId(),this.getId(),t)},e.getTextContinuousRectsAtRect=function(t){return this.doc.api.getTextContinuousRectsAtRect(this.getPDFDoc().getId(),this.getId(),t)},e.getTextContinuousRectsAtPoints=function(t,e,n=8,i,r){return this.doc.api.getTextContinuousRectsAtPoints(this.getPDFDoc().getId(),this.getId(),t,e,n,i,r,arguments[5])},e.getTextByIndex=function(t,e){return this.doc.api.getTextByIndex(this.getPDFDoc().getId(),this.getId(),t,e)},e.getTextIndexAtPoint=function(t,e=8){return this.doc.api.getTextIndexAtPoint(this.getPDFDoc().getId(),this.getId(),t,e)},e.getTextRectsByIndexes=function(t,e){return this.doc.api.getTextRectsByIndexes(this.getPDFDoc().getId(),this.getId(),t,e)},e.getDoubleClickTextRectAtPoint=function(t,e){return this.doc.api.getDoubleClickTextRectAtPoint(this.getPDFDoc().getId(),this.getId(),t,e)},e.getTextContinuousCharsAtRect=function(t,e){return this.doc.api.getTextContinuousCharsAtRect(this.getPDFDoc().getId(),this.getId(),t,e)},e.getTextSearch=function(t,e){return this.isVirtual()?Promise.resolve(new Iv):this.doc.api.getTextSearch(this.getPDFDoc().getId(),this.getId(),t,e).then((t=>new Ev(t,this)))},e.destroy=function(){return this.isDestroyed=!0,this.annots.forEach((t=>t.destroy())),this.graphicObjects.forEach((t=>t.destroy())),this.graphicObjects=null,this.annots=null,this.annotIdMap=null,this.info=null,this.doc=null,this.api=null,Promise.resolve()},e.normalize=function(){return this.doc.api.normalizePage(this.getPDFDoc().getId(),this.getId())},e.getAnnotsByIdArray=function(t){return this.getAnnots().then((e=>{let n=[];for(var i=0,r=t.length;i<r;i++)for(var o=0;o<e.length;o++)if(t[i]===e[o].getUniqueID()){n.push(e[o]);break}return n}))},e.getAnnotsByObjectNumArray=function(t,e=!1){return this.getAnnots().then((()=>{let e=this.annotIdMap,n=[];for(var i=0,r=t.length;i<r;i++){let r;(r=e[t[i]])&&n.push(r)}return n}))},e.getAnnotsSync=function(t){let e=this.annotIdMap,n=[];for(var i=0,r=t.length;i<r;i++){let r;(r=e[t[i]])&&n.push(r)}return n},e.flatten=function(t){if((t|3-t)<0)throw new Error("Param option error.");let e=this.doc;if(!(e.checkPermission(pe.annotForm)&&e.checkPermission(pe.modify)&&e.checkPermission(pe.assemble|pe.modify)))throw new Error("Permission error");return this.doc.api.flatten(this.getPDFDoc().getId(),this.getId(),t).then((t=>{let n;return this.annotIdMap={},this.annots.length=0,this.info.annotCount=0,(n=this.doc.getPDFForm())&&n.reduceControl(this.getIndex(),t),this.doc.engine.eventEmitter.emit(et.flattened,this.getIndex(),this),this.doc.engine.eventEmitter.emit(et.docModified,e),!0}))},e.addImage=function(t,e,n=0){if(!this.doc.checkPermission(8)){const t=4294967292,e=256,n=32,i=8;let r=(this.doc.info.oriPerm&t)>>>0;if(!!!(r&e||r&n||r&i))throw new Error("Permission error")}let i={x:e.left,y:e.bottom},r=e.right-e.left,o=e.top-e.bottom;return this.doc.api.addPageImage(this.getPDFDoc().getId(),this.getId(),t,i,r,o,n).then((t=>{if(t){let e=this.doc.engine.graphicsObjectManager.get(t,this);return e&&this.graphicObjects.push(e),this.doc.engine.eventEmitter.emit(et.imageAdded,this),this.doc.engine.eventEmitter.emit(et.graphicsUpdated,this,e),e}return t}))},e.addWatermark=function(t){let{type:e,text:n}=t;if("text"===e&&be(n))return Promise.resolve(null);if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");let i=_v(t,this.getIndex(),this.getIndex(),this.getIndex(),this.doc.getPageCount());return this.doc.getPageFormat("watermark").then((t=>this.doc.addPageFormat("watermark",i).then((t=>{if(t>0){let t={};return i.isKeep&&(t=this.annots[this.annots.length-1].info,this.doc.engine.eventEmitter.emit(et.annotationAdd,this.annots,this)),this.doc.engine.eventEmitter.emit(et.watermarkAdded,this),t}return t}))))},e.getGraphicsObjectsInRect=function(t,e,n){if(n<0||n>3)throw new Error("Type error, only 0~3 are available. current is: "+n);return this.doc.api.getGraphicsObjectAtPoint(this.getPDFDoc().getId(),this.getId(),null,e,n,t).then((t=>t.map((t=>{let e=this.doc.engine.graphicsObjectManager.get(t,this);return e&&this.graphicObjects.push(e),e}))))},e.getTextLineUnderPoint=async function(t,e=3){const n=await this.getLineTextObjectsUnderPoint(t,e);if(!n||!n.length)return{textGraphicsObjects:n};const i=n.reduce(((t,e)=>{const{top:n,bottom:i}=e.getRect();return t.top=Math.max(t.top,n),t.bottom=Math.min(t.bottom,i),t}),y({},n[0].getRect(),{left:0,right:this.getWidth()})),r=n.map((t=>t.getText()||"")).join(" ");return{text:r,rect:i,textGraphicsObjects:n}},e.getLineTextObjectsUnderPoint=async function(t,e=3){const n=await this.getGraphicsObjectAtPoint(t,e,Jt.Text);if(!n)return Promise.resolve([]);const i=n.getRect(),r={left:0,right:this.getWidth(),top:i.top,bottom:i.bottom};return await this.getGraphicsObjectsByRect({rect:r,tolerance:0,type:Jt.Text,isInRect:!1})},e.getGraphicsObjectsByRect=async function(t){const e=t.rect;if(!e)throw new Error("[PDFPage.getGraphicsObjectsByRect] Missing required parameter: options.rect");const n=isFinite(t.tolerance)?t.tolerance:0,i=void 0===t.type?Jt.ALL:t.type,r=!1!==t.isInRect;return(await this.doc.api.getGraphicsObjectsByRect(this.getPDFDoc().getId(),this.getId(),e,n,i,r)).map((t=>this.doc.engine.graphicsObjectManager.get(t,this)))},e.getGraphicsObjectAtPoint=function(t,e,n){return this.doc.api.getGraphicsObjectAtPoint(this.getPDFDoc().getId(),this.getId(),t,e,n).then((t=>{let e=this.doc.engine.graphicsObjectManager.get(t,this);return e&&this.graphicObjects.push(e),e}))},e.getGraphicsObjectByIndex=function(t){return t<0?Promise.resolve(null):this.doc.api.getGraphicsObjectByIndex(this.getPDFDoc().getId(),this.getId(),t).then((t=>{let e=this.doc.engine.graphicsObjectManager.get(t,this);return e&&this.graphicObjects.push(e),e}))},e.getGraphicsObjectsCount=function(){return this.doc.api.getGraphicsObjectsCount(this.getPDFDoc().getId(),this.getId())},e.setGraphicsObjectMatrix=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");return this.doc.api.setGraphicsObjectRect(this.getPDFDoc().getId(),t).then((t=>{this.doc.engine.eventEmitter.emit(et.graphicsUpdated,this)}))},e.addGraphicsObject=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");return this.doc.api.addGraphicsObject(this.getPDFDoc().getId(),this.getId(),t).then((t=>{let e=this.doc.engine.graphicsObjectManager.get(t,this);return e&&this.graphicObjects.push(e),this.doc.engine.eventEmitter.emit(et.graphicsUpdated,this,e),e}))},e.removeGraphicsObject=function(t){return this.removeGraphicsObjectEx(t,!0)},e.removeGraphicsObjectEx=function(t,e=!0){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");let n=null;return this.graphicObjects=this.graphicObjects.filter((t=>t.getId()!=t.getId()||(n=t,!1))),this.doc.api.removeGraphicsObject(this.getPDFDoc().getId(),this.getId(),t.getId(),e).then((t=>{e&&this.doc.engine.eventEmitter.emit(et.graphicsUpdated,this,n)}))},e.pasteAnnot=function(t,e){if(!this.doc.checkPermission(pe.annotForm))throw new Error("Permission error");const{popup:n,widget:i,strikeOut:r,highlight:o,squiggly:s,underline:a,caret:c}=ti;if([n,i,r,o,s,a,c].includes(t.getType()))throw new Error("Not support strikeout, highlight, squiggly, underline, caret, popup and widget annotations.");const l=this.getPDFDoc().getId(),h=this.getId();return this.doc.api.paste(l,h,t.getPage().getId(),"annot",t.getId(),e).then((t=>this._doAfterAddAnnots(t)),(t=>Promise.reject(t)))},e.pasteGraphicObject=function(t,e,n){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");const i=this.getPDFDoc().getId(),r=this.getId();return this.doc.api.paste(i,r,this.doc.pageCache[e].getId(),"graphicObject",t,n).then((t=>{let e=this.doc.engine.graphicsObjectManager.get(t,this);return this.doc.engine.eventEmitter.emit(et.graphicsUpdated,this,e),e}),(t=>{let e=(0,_.createDeferred)();return e.reject(t),e.promise}))},e.getMediaWidth=function(){return this.info.mediaWidth},e.getMediaHeight=function(){return this.info.mediaHeight},e.isCropped=function(){return this.info.isCropped},e.isVirtual=function(){return!!this.info.isVirtual},e.calcPageContentBBox=function(t){return this.doc.api.calcPageContentBBox(this.getPDFDoc().getId(),this.getIndex(),t)},e.getPageBox=function(t){return this.doc.api.getPageBox(this.getPDFDoc().getId(),this.getIndex(),t)},e.getAllBoxes=function(){return this.doc.api.getAllBoxes(this.getPDFDoc().getId(),this.getIndex())},e.setPageBox=function(t,e){return this.doc.api.setPageBox(this.getPDFDoc().getId(),this.getIndex(),t,e)},e.setPageSize=function(t,e){return(0,_.assertThat)("number"==typeof t,"width must be a number, but got "+typeof t),(0,_.assertThat)("number"==typeof e,"height must be a number, but got "+typeof e),(0,_.assertThat)((0,_.isValidNumber)(t)&&t>0,"width must be a valid positive number, but got "+t),(0,_.assertThat)((0,_.isValidNumber)(e)&&e>0,"height must be a valid positive number, but got "+e),this.doc.api.setPageSize(this.getPDFDoc().getId(),this.getIndex(),t,e).then((()=>{this.info.width=t,this.info.height=e,this._updateInfo(this.info),this.doc.engine.eventEmitter.emit(et.pagesBoxChange,[this])}))},e.getAnnotIdArrayByOrder=function(){return this.doc.api.getAnnotIdArrayByOrder(this.getPDFDoc().getId(),this.getId())},e.getDict=function(){return this.doc.api.getPageDictionary(this.getPDFDoc().getId(),this.getId()).then((t=>new Dv(this.doc,t.id,this.doc.engine)))},e.createWebLinks=function(t){const e=this.getPDFDoc().getId(),n=this.getId();return this.doc.api.createWebLinks(e,n,t).then((t=>{const e=this.doc;return e.engine.eventEmitter.emit(et.docModified,e),t}))},e.removeWebLinks=function(t){const e=this.getPDFDoc().getId(),n=this.getId();return this.doc.api.removeWebLinks(e,n,t).then((t=>{const e=this.doc;return e.engine.eventEmitter.emit(et.docModified,e),t}))},e.deleteDestination=function(t){const e=this.getPDFDoc().getId(),n=this.getId();return this.doc.api.deleteDestination(e,n,t)},e.renameDestination=function(t,e){const n=this.getPDFDoc().getId(),i=this.getId();return this.doc.api.renameDestination(n,i,t,e)},e.createDestination=function(t,e){const n=this.getPDFDoc().getId(),i=this.getId();return this.doc.api.createDestination(n,i,t,e)},e.resetDestination=function(t,e){const n=this.getPDFDoc().getId(),i=this.getId();return this.doc.api.resetDestination(n,i,t,e)},e.addAnnotObjects=function(t,e=!0){return this.doc.api.addAnnotObjects(this.doc.getId(),this.getId(),t).then((t=>(t=t.map((t=>t?this.doc.engine.annotManager.get(t,this):null)).filter((t=>!!t)),t.forEach((t=>{this.annotIdMap[t.getId()]=t})),t))).then((t=>{this.setAnnots(this.annots.concat(t));let n=this.annots.map((t=>t.reviseSummary((t=>this.annotIdMap[t]))));return Promise.all(n).then((()=>(e&&this.doc.engine.eventEmitter.emit(et.annotationAdded,t,this),t)))}))},e.getSuggestedFormDesignerRect=function(t){return this.doc.api.getSuggestedFormDesignerRect(this.getPDFDoc().getId(),this.getId(),t)},e.getSnappedPoint=function(t,e){const n=this.getPDFDoc().getId(),i=this.getId();return this.doc.api.getSnappedPoint(n,i,t,e)},e.getTextRectCount=function(){const t=this.getPDFDoc().getId(),e=this.getId();return this.doc.api.getPageTextRectCount(t,e)},e.getTextByRectIndex=function(t){const e=this.getPDFDoc().getId(),n=this.getId();return this.doc.api.getPageTextByRectIndex(e,n,t)},e.cloneGraphicObject=function(t,e){return this.doc.api.cloneGraphicObject(this.getPDFDoc().getId(),this.getId(),this.doc.pageCache[t].getId(),e)},e.addAnnotObjects=function(t,e=!0){return this.doc.api.addAnnotObjects(this.doc.getId(),this.getId(),t).then((t=>(t=t.map((t=>t?this.doc.engine.annotManager.get(t,this):null)).filter((t=>!!t)),t.forEach((t=>{this.annotIdMap[t.getId()]=t})),t))).then((t=>{this.annots=this.annots.concat(t);let n=this.annots.map((t=>t.reviseSummary((t=>this.annotIdMap[t]))));return Promise.all(n).then((()=>(e&&this.doc.engine.eventEmitter.emit(et.annotationAdded,t,this),t)))}))},e.addReviewStateAnnotObject=function(t,e,n=!0){return this.doc.api.addAnnotObjects(this.doc.getId(),this.getId(),e).then((e=>{let n=e[0];t.info.reviewStatesSummary.push({objectNumber:n.objectNumber,id:n.objectNumber,index:n.index});let i=this.doc.engine.annotManager.get(n,this);return this.addAddonAnnot(i)})).then((e=>(t.reviewStates.push(e),n&&this.doc.engine.eventEmitter.emit(et.annotationReviewStateAnnotAdd,e,t),n&&this.doc.engine.eventEmitter.emit(et.annotationUpdated,[t],this,ge.reviewStateUpdated),e)))},e.addMarkedStateAnnotObject=function(t,e,n=!0){const i=arguments[3],r=t.getGroupHeader()||t;return this.doc.api.addAnnotObjects(this.doc.getId(),this.getId(),e).then((t=>{let e=t[0];if(r.info.markedStatesSummary.length){let t=this.annotIdMap[e.objectNumber];return t.info=e,t}r.info.markedStatesSummary.push({objectNumber:e.objectNumber,id:e.objectNumber,index:e.index});let n=this.doc.engine.annotManager.get(e,this);return this.addAddonAnnot(n)})).then((e=>(r.markedStates.push(e),n&&this.doc.engine.eventEmitter.emit(et.annotationMarkedStateAnnotAdd,e,r,i),n&&this.doc.engine.eventEmitter.emit(et.annotationUpdated,[t],this,ge.reviewStateUpdated),e)))},e.getViewportRect=function(){return this.doc.api.getViewportRect(this.doc.getId(),this.getId())},e.getMeasureScaleRatio=function(){return this.doc.api.getMeasureScaleRatio(this.doc.getId(),this.getId()).then((({scale:t,ratio:e,unit:n})=>{const i=e&&e.trim()?e.split(" = ").map((t=>{const e=t.split(" ");return{value:e[0],unit:e[1]}})):[];return{scale:t,ratio:e,ratioMap:i,unitName:n}}))},e.setMeasureScaleRatio=function(t,e,n,i){if(!this.doc.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");if(n){let t=n.split(" = ").map((t=>{const e=t.split(" ");return{value:e[0],unit:e[1]}}));if(2!==t.length||!t.every((t=>/^[+-]?(0|([1-9]\d*))(\.\d+)?$/.test(t.value)))||!t.every((t=>Fn[t.unit])))throw new Error("Ratio format error. Please refer to: 1 inch = 1 ft")}return this.doc.api.setMeasureScaleRatio(this.doc.getId(),this.getId(),t,{unit:e,ratio:n,scale:i}).then((t=>this.getAnnotsByObjectNumArray(t).then((t=>(this.doc.engine.eventEmitter.emit(et.pageMeasureScaleRatioChanged,this,t),t)))))},e.getTransition=function(){return this.doc.api.getPageTransition(this.doc.getId(),this.getId())},e.isScannedPage=function(){return this.doc.api.isScannedPage(this.doc.getId(),this.getId())},e.getPureTexts=function(t){return this.doc.api.getPureTexts(this.doc.getId(),this.getId(),t)},e.getTexts=function({settings:t,minWidth:e,eol:n}){return this.doc.api.getPageTexts(this.doc.getId(),this.getId(),t,e,n)},e.handleGroupMarkup=function(t,e){const n=this.doc,i=this.getId();if(!n.checkPermission(pe.modify)&&!n.checkPermission(pe.annotForm))throw new Error("Permission error");return n.api.handleGroupMarkup(n.getId(),i,t,e).then((e=>{const i=t.map((t=>{const n=this.annotIdMap[t];return n.info=e[t],n.reviseSummary((t=>this.annotIdMap[t]))}));Promise.all(i).then((t=>{this.doc.engine.eventEmitter.emit(et.docModified,n),this.doc.engine.eventEmitter.emit(et.annotationUpdated,t,this)}))}))},e.getTextInRect=function(t,e=0){const n=this.doc;if(!n.checkPermission(pe.extract))throw new Error("Permission error");if(n.isStaticXFA())throw new Error("File type error, current is Static documents");return this.doc.api.getTextInRect(this.doc.getId(),this.getId(),t,e)},e.scaleClipRect=function(t=1,e=1){return this.transformClipRect(t,e,0,0)},e.translateClipRect=function(t=0,e=0){return this.transformClipRect(1,1,t,e)},e.transformClipRect=function(t=1,e=1,n=0,i=0){return this.doc.api.transformPage(this.doc.getId(),this.getId(),{scaleX:t,scaleY:e,translateX:n,translateY:i})},e.getAnnotRects=function(){return this.annots.length?Promise.resolve(this.annots.map((t=>t.info))):this.doc.api.getAnnotRects(this.doc.getId(),this.getId())},e.getBatchProcessor=function(){return this.batchProcessor},e.clearRenderCache=function(){return this.doc.api.clearPageRenderCache(this.doc.getId(),this.getId())},e.clearCacheObjects=function(){return this.doc.api.clearCacheObejcts(this.doc.getId(),this.getId())},t}();function Hv(t,e){return t.getIndex()>e.getIndex()?1:-1}var jv=Uv;function $v(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let Wv=function(){function t(t,e,n){this.doc=t,this.form=e,this.info=n,this.controls=[],this.updateControls(this.info.controls)}var e=t.prototype;return e.destroy=function(){this.destroyed=!0,this.doc=null,this.form=null,this.controls.forEach((t=>t.destroy())),this.controls=[],this.info=null},e.getWidget=function(t){return this.controls[t].getWidget()},e.getLoadedWidgets=function(){return this.controls.map((t=>t.getWidget())).filter((t=>t))},e.getIndex=function(){return this.info.index},e.updateWidgetsUI=function(t,e,n,i,r,o=!0){if(!this.doc)return Promise.resolve();-1!==["value","comb","multiline","choiceMultiSelect","comboEdit","maxLength","hidden","password","readonly","required","noScroll","clearItems","deleteItems","setItems","icon","insertItemAt"].indexOf(n)&&this.doc.engine.eventEmitter.emit(et.formValueChanged);let s=[];return this.controls.forEach((t=>{let e=t.getWidget();if(e){let t;t=r?this.form.addTask((t=>r(e).then((t=>e.updateUI({type:n,value:i})))),o):this.form.addTask((t=>e.updateUI({type:n,value:i})),o),s.push(t)}else s.push(this.form.addTask((e=>t.updateProperty(n,i).then((e=>t.info&&t.info.objectNumber>0&&t.getWidgetAnnot().then((t=>{if(t&&r)return r(t)}))))),o))})),Promise.all(s).then((t=>!0))},e.getControlById=function(t){for(let e=0;e<this.controls.length;e++){const n=this.controls[e];if(n.info.objectNumber==t)return n}},e.getPDFForm=function(){return this.form},e.getName=function(){return this.info.name},e.getAlternateName=function(){return this.info.alternateName},e.setAlternateName=function(t){this.form.checkFillPerm(),this.info.alternateName=t,this.update("alternateName",t).then((t=>{this.triggerUpdateEvent(ge.formFieldAlternateName)}))},e.getMappingName=function(){return this.info.mappingName},e.setMappingName=function(t){this.form.checkFillPerm(),this.getType()!==xe.Sign&&(this.info.mappingName=t,this.update("mappingName",t).then((t=>{this.triggerUpdateEvent(ge.formFieldMappingName)})))},e.getType=function(){return this.info.type},e.getFlags=function(){return this.info.flag},e.setFlags=function(t){this.form.checkFillPerm();let e={};Object.entries(De).forEach((n=>{"number"==typeof n[1]&&(t&De[n[0]])>0?e[n[0]]=!0:e[n[0]]=!1}));let n=Promise.resolve(),i=Object.keys(e);const r=this.getType()==xe.RadioButton;let o=this.info.flag;for(const[t,n]of Object.entries(e))"Hidden"!==t&&(n?o|=De[t]:o&=~De[t]);this.info.flag=o;let s=$v(w.Z,Object.keys(De)).filter((t=>["NoExport","CommitOnSelChange"].every((e=>e!==t))));[].concat(i).filter((t=>-1!==s.indexOf(t))).length&&this.doc.engine.eventEmitter.emit(et.formValueChanged);let a=[],c={ReadOnly:"readonly",Required:"required",Hidden:"hidden",TextMultiline:"multiline",TextPassword:"password",TextDoNotSpellCheck:"noSpellCheck",TextDoNotScroll:"noScroll",TextComb:"comb",ComboEdit:"comboEdit",ChoiceMultiSelect:"choiceMultiSelect"};for(let t=0;t<i.length;t++){let n,o,s=()=>Promise.resolve();r&&"ButtonRadiosInUnison"==i[t]?(n="value",o=this.getValue()):(n=c[i[t]],o=e[i[t]]),"hidden"==n&&(s=t=>{let e=t.info.flag;return o?(e&=-2,e&=-33,e|=6):(e&=-2,e&=-3,e&=-33,e|=4),t.setFlagValue(e)}),this.controls.forEach((t=>{let e=t.getWidget();if(e){let t;t=s(e).then((t=>e.updateUI({type:n,value:o}))),a.push(t)}else a.push(this.form.addTask((e=>t.updateProperty(n,o))))}))}n.then((t=>{const e=[];return this.controls.forEach((t=>{t.getWidget()&&e.push(this.update("flag",this.info.flag))})),Promise.all(e)})).then((t=>(this.triggerUpdateEvent(ge.flagsUpdated),Promise.all(a).then((t=>!0)))))},e.setComb=function(t){this.form.checkFillPerm(),this.info.flag=t?this.info.flag|De.TextComb:this.info.flag&~De.TextComb,this.updateWidgetsUI(this.form,this.info.name,"comb",t),this.update("flag",this.info.flag).then((()=>{this.triggerUpdateEvent(ge.flagsUpdated)}))},e.setMultiline=function(t){this.form.checkFillPerm(),this.info.flag=t?this.info.flag|De.TextMultiline:this.info.flag&~De.TextMultiline,this.updateWidgetsUI(this.form,this.info.name,"multiline",t),this.update("flag",this.info.flag).then((()=>{this.triggerUpdateEvent(ge.flagsUpdated)}))},e.setChoiceMultiSelect=function(t){this.form.checkFillPerm(),this.info.flag=t?this.info.flag|De.ChoiceMultiSelect:this.info.flag&~De.ChoiceMultiSelect,this.updateWidgetsUI(this.form,this.info.name,"choiceMultiSelect",t),this.update("flag",this.info.flag).then((()=>{this.triggerUpdateEvent(ge.flagsUpdated)}))},e.setComboEdit=function(t){this.form.checkFillPerm(),this.info.flag=t?this.info.flag|De.ComboEdit:this.info.flag&~De.ComboEdit,this.updateWidgetsUI(this.form,this.info.name,"comboEdit",t),this.update("flag",this.info.flag).then((()=>{this.triggerUpdateEvent(ge.flagsUpdated)}))},e.update=function(t,e){return this.form.addTask((n=>this.doc.api.updateField(this.doc.id,this.info.name,t,e)))},e.getValue=function(){return this.info&&String(this.info.value).length>0?this.info.value:""},e.getValueIndex=function(){if(!this.info)return-1;let t=this.info.options;for(let e=0;e<t.length;e++)if(t[e].value==this.info.value)return e;return-1},e.getDefaultValue=function(){return this.info?this.info.defaultValue:""},e.setDefaultValue=function(t){return this.form.checkFillPerm(),this.update("defaultValue",t),this.info.defaultValue=t},e.getAlignment=function(){return this.info.alignment},e.setAlignment=function(t){if(this.form.checkFillPerm(),1===this.getType())return Promise.resolve();let e;switch(+t){case 0:e="left";break;case 1:e="center";break;case 2:e="right";break;default:throw new Error("Unknown alignment: "+t)}return this.updateWidgetsUI(this.form,this.info.name,"align",e,(e=>e.updateMKProperty("alignment",+t))).then((e=>(this.update("align",t),this.info.alignment=t)))},e.setAlignmentWithString=function(t,e){return this.form.checkFillPerm(),this.updateWidgetsUI(this.form,this.info.name,"align",e||t),this.update("align",t),this.info.alignment=t},e.getBorderStyle=function(){let t=this.controls[0].getWidget(),e=0;switch(t&&(e=t.getBorderStyle()),e){case 0:return"solid";case 1:return"dashed";case 2:return"underline";case 3:return"beveled";case 4:return"inset"}},e.getRotation=function(){let t=this.controls[0].getWidget(),e=0;return t&&(e=t.getRotation()),-90*e},e.setBorderStyle=function(t){let e,n;switch(this.form.checkFillPerm(),t){case"solid":n=0;break;case"dashed":n=1,e=[3,3];break;case"underline":n=2;break;case"beveled":n=3,t="outset";break;case"inset":n=4;break;default:return}return this.setBorderStyleWithParam(n,t,e)},e.setBorderStyleWithParam=function(t,e,n){return this.updateWidgetsUI(this.form,this.info.name,"borderStyle",e,(e=>e.setBorderStyle(t,n)))},e.setBorderWidth=function(t){let e;switch(this.form.checkFillPerm(),t){case"thin":e=1;break;case"medium":e=2;break;case"thick":e=3;break;default:return}return this.updateWidgetsUI(this.form,this.info.name,"borderWidth",t,(t=>{const n=t.setBorderWidth(e);return this.form.engine.eventEmitter.emit(et.annotationUpdated,[t],t.getPDFPage(),ge.borderWidthUpdated),n}))},e.setBorderColor=function(t){return this.form.checkFillPerm(),t=0===t?0:(0,_.colorConvertor)(t,"int"),this.form.addTask((e=>this.updateWidgetsUI(this.form,this.info.name,"borderColor",t,(e=>{const n=e.setMKProperty("borderColor",t);return this.form.engine.eventEmitter.emit(et.annotationUpdated,[e],e.getPDFPage(),ge.borderColorUpdated),n}))))},e.getBorderColor=function(){let t=this.controls[0].getWidget();return t?t.getMKProperty("borderColor"):0},e.setFillColor=function(t){return this.form.checkFillPerm(),t=0===t?t:(0,_.colorConvertor)(t,"int"),this.form.addTask((e=>this.updateWidgetsUI(this.form,this.info.name,"fillColor",t,(e=>{const n=e.setMKProperty("fillColor",t);return this.form.engine.eventEmitter.emit(et.annotationUpdated,[e],e.getPDFPage(),ge.fillColorUpdated),n}))))},e.getFillColor=function(){let t=this.controls[0].getWidget();return t?t.getMKProperty("fillColor"):0},e.getOptions=function(){return this.info.options||[]},e.getMaxLength=function(){return this.info.maxLength},e.setMaxLength=function(t){return this.form.checkFillPerm(),this.getType()!==xe.Text?0:(this.info.maxLength=t,this.form.addTask((e=>(this.triggerUpdateEvent(ge.formFieldsMaxLengthUpdated),this.updateWidgetsUI(this.form,this.info.name,"maxLength",t)))),this.update("maxLength",t),t)},e.setValueWithoutAction=function(t){this.info&&(this.info.value=t instanceof Array?t:""+t)},e.syncValue=function(t){if(!this.info)return Promise.resolve();this.info.value=t;let e=this.info.name;return this.doc.api.setFieldValue(this.doc.id,e,t).then((n=>(this.triggerUpdateEvent(ge.formFieldValueUpdated,"value"),this.updateWidgetsUI(this.form,e,"value",t))))},e.setValue=function(t="",e=null){return this.setValueEx(t,e)},e.setValueEx=function(t="",e=null,n=!0,i=!1){let r;if(r=e?e.info.objectNumber:this.controls[0].info.objectNumber,!this.doc.checkPermission(pe.fillForm|pe.annotForm))throw new Error("Permission error");let o=this.getType();if(7===o||1===o)return Promise.resolve();let s=o==xe.RadioButton||o==xe.CheckBox,a=o==xe.ListBox,c=o==xe.ComboBox;if(s){let e=!1;this.info.controls.forEach((n=>{if(n.exportValue==t)n.isChecked=!0,e=!0;else{const i=this.getControlById(n.objectNumber),r=i.widget&&i.widget.info.ApStates;r&&r.indexOf(t)>-1&&(e=!0),n.isChecked=!1}})),e||(t="Off")}let l=this.getOptions();if(a&&n){if(Array.isArray(t)){let e=!0;for(let n=t.length;n--;)if(!l.find((e=>e.value===t[n]))){e=!1;break}e||(t="")}else l.find((e=>e.value===t))||(t="");l.forEach((e=>{(Array.isArray(t)?t.indexOf(e.value)>-1:e.value==t)?e.selected=!0:e.selected=!1}))}else c&&l.forEach((e=>{(Array.isArray(t)?t.indexOf(e.value)>-1:e.value==t)?e.selected=!0:e.selected=!1}));if(Array.isArray(t)||(t=""+t),this.info.value==t&&!s&&!i)return Promise.resolve(t);this.info.value=t;let h=this.info.name;return this.doc.api.setFieldValue(this.doc.id,h,t).then((e=>{let n=Promise.resolve();return s&&this.controls.forEach((e=>{let i=e.getWidget();i&&(n=i.update().then((e=>i.setAS(t,r))))})),this.NeedExecuteValidateAction=!0,n.then((e=>this.updateWidgetsUI(this.form,h,"value",t))).then((()=>{this.triggerUpdateEvent(ge.formFieldValueUpdated,"value"),this.NeedExecuteValidateAction=!1}))}))},e.triggerUpdateEvent=function(t,e){if(!this.form||!this.form.engine)return;const n=this.form.engine.eventEmitter;this.controls.forEach((i=>{const r=i.getWidget();r&&n.emit(et.annotationUpdated,[r],r.getPDFPage(),t,e)}))},e.setValueByIndex=function(t){this.form.checkFillPerm();let e=this.info.options[t].value;return this.setValue(e),t},e.setHidden=function(t){this.form.checkFillPerm(),this.updateWidgetsUI(this.form,this.info.name,"hidden",t,(e=>{let n=e.info.flag;return t?(n&=-2,n&=-33,n|=6):(n&=-2,n&=-3,n&=-33,n|=4),e.setFlagValue(n)}),!0)},e.setPassword=function(t){this.form.checkFillPerm(),this.info.flag=t?this.info.flag|De.TextPassword:this.info.flag&~De.TextPassword,this.updateWidgetsUI(this.form,this.info.name,"password",t),this.update("flag",this.info.flag).then((()=>{this.triggerUpdateEvent(ge.flagsUpdated)}))},e.setReadonly=function(t){return this.form.checkFillPerm(),this.info.flag=t?this.info.flag|De.ReadOnly:this.info.flag&~De.ReadOnly,this.updateWidgetsUI(this.form,this.info.name,"readonly",t),this.update("flag",this.info.flag).then((()=>{this.triggerUpdateEvent(ge.flagsUpdated)}))},e.setRequired=function(t){return this.form.checkFillPerm(),this.info.flag=t?this.info.flag|De.Required:this.info.flag&~De.Required,this.updateWidgetsUI(this.form,this.info.name,"required",t),this.update("flag",this.info.flag).then((()=>{this.triggerUpdateEvent(ge.flagsUpdated)}))},e.setNoScroll=function(t){this.form.checkFillPerm(),this.info.flag=t?this.info.flag|De.TextDoNotScroll:this.info.flag&~De.TextDoNotScroll,this.updateWidgetsUI(this.form,this.info.name,"noScroll",t),this.update("flag",this.info.flag).then((()=>{this.triggerUpdateEvent(ge.flagsUpdated)}))},e.setNoSpellCheck=function(t){this.form.checkFillPerm(),this.info.flag=t?this.info.flag|De.TextDoNotSpellCheck:this.info.flag&~De.TextDoNotSpellCheck,this.updateWidgetsUI(this.form,this.info.name,"noSpellCheck",t),this.update("flag",this.info.flag).then((()=>{this.triggerUpdateEvent(ge.flagsUpdated)}))},e.setInUnison=function(t){this.form.checkFillPerm();let e=Promise.resolve();if(t)this.info.flag=this.info.flag|De.ButtonRadiosInUnison;else{this.info.flag=this.info.flag&~De.ButtonRadiosInUnison;let t=this.info.controls[0].exportValue;e=e.then((e=>this.doc.api.setFieldValue(this.doc.id,this.getName(),t)))}e.then((t=>this.update("flag",this.info.flag))).then((t=>{this.triggerUpdateEvent(ge.flagsUpdated);let e=this.getValue();this.updateWidgetsUI(this.form,name,"value",e)}))},e.setMKProperty=function(t,e){this.updateWidgetsUI(this.form,this.info.name,t,e,(n=>n.setMKProperty(t,e)))},e.clearItems=function(){this.form.checkFillPerm(),this.info.options.length=0,this.info.value="",this.updateWidgetsUI(this.form,this.info.name,"clearItems"),this.update("clearItems")},e.deleteItems=function(t){this.form.checkFillPerm(),t<0||t>=this.info.options.length||(this.info.options[t].value==this.info.value&&(this.info.value=""),this.info.options.splice(t,1),this.updateWidgetsUI(this.form,this.info.name,"deleteItems",t),this.update("deleteItems",t))},e.insertItemAt=function(t,e,n=0){this.form.checkFillPerm();let i=this.info.options;-1==n&&(n=i.length),e||(e=t);let r=n==i.length?n-1:n;i[r]&&i[r].value==e?this.info.value=e:(this.info.options=[].concat(i.slice(0,n),{label:t,value:e,defaultSelected:!1,selected:!1},i.slice(n,i.length)),this.info.value=e,this.updateWidgetsUI(this.form,this.info.name,"insertItemAt",n),this.update("insertItemAt",{index:n,label:t,value:e,defaultSelected:!1,selected:!1}))},e.showDisplayValue=function(t){return this.form&&this.info?this.info.displayValue==t?Promise.resolve():void this.updateWidgetsUI(this.form,this.info.name,"displayValue",t):Promise.resolve()},e.getAction=function(t){if(!this.engineActions){this.engineActions={};for(let t in this.info.AA)this.engineActions[t]=this.doc.engine.actionFactory.createAction(this.info.AA[t],this.doc)}return this.engineActions[t]},e.getDAFontSize=function(){return this.info.DA.textSize},e.getDAFontColor=function(){return this.info.DA.textColor},e.isDAFontEmbedded=function(){return this.info.DA.isEmbedded},e.getDAFontBuffer=function(){return this.doc.api.getFontBufferByName(this.doc.id,this.info.DA.fontName)},e.setDAFontColor=function(t){this.form.checkFillPerm();let e=(0,_.colorConvertor)(t,"int");return e==this.info.DA.textColor||(this.info.DA.textColor=e,this.updateWidgetsUI(this.form,this.info.name,"textColor",(0,_.colorConvertor)(t,"HTML"),(t=>t.updateMKProperty("fontColor",e))),this.update("textColor",e)),e},e.setDAFontColorAsync=function(t){this.form.checkFillPerm();let e=(0,_.colorConvertor)(t,"int");return this.info.DA.textColor=e,this.updateWidgetsUI(this.form,this.info.name,"textColor",(0,_.colorConvertor)(t,"HTML"),(t=>t.updateMKProperty("fontColor",e))).then((()=>this.update("textColor",e))).then((()=>e))},e.getControlByIndex=function(t){return this.controls[t]},e.removeControlInfo=function(t,e=!0){let n;for(e&&this.form.checkFillPerm(),n=0;n<this.info.controls.length;n++){if(this.info.controls[n].objectNumber==t){this.info.controls.splice(n,1);break}}return this.controls[n].destroy(),this.controls.splice(n,1),this.info.controls.length},e.getControlsCount=function(){return this.info.controls.length},e.focus=function(){let t=this.controls[0]&&this.controls[0].getWidget();t&&t.updateUI({type:"focus"})},e.getControlExportValues=function(t){return this.info.controls[t].exportValue},e.getExportValues=function(){let t=[];for(let e=0;e<this.info.controls.length;e++)t.push(this.info.controls[e].exportValue);return t},e.setExportValue=function(t,e){let n=this.info.controls[t];return n.exportValue=e,this.doc.api.updateFormControl(this.doc.id,this.getName(),n.objectNumber,"exportValue",e).then((t=>{this.triggerUpdateEvent(ge.formFieldExportValueUpdated,"exportValue"),t.forEach(((t,e)=>{let n=this.controls[e];n.setExportValue(t);let i=n.getWidget();if(i)return i._update().then((t=>i.updateUI({})))}))}))},e.setWidgetDisplay=function(t,e){return this.updateWidgetsUI(this.form,this.info.name,"display",t,(n=>n.setDisplay(t,e)),!0)},e.setIconObj=function(t,e){this.form.checkFillPerm(),this.updateWidgetsUI(this.form,this.info.name,"icon",null,(n=>n.setIconObj(t,e)))},e.setOptions=function(t){if(!this.form)return;if(this.form.checkFillPerm(),4!==this.getType()&&5!==this.getType())return;t.length>0&&!t.some((t=>t.selected))&&(t[0].selected=!0),this.info.options=t;let e=this.update("setItems",this.info.options);return arguments[1]?e:e.then((e=>{this.info.defaultValue=e.defaultValue;let n=this.info.value;for(let e=0;e<t.length;e++)if(t[e].selected){n=t[e].value;break}return this.info.options=e.options,this.setValueEx(n,null,!1)})).then((()=>{const t=this.updateWidgetsUI(this.form,this.info.name,"setItems");return this.triggerUpdateEvent(ge.formFieldItemsUpdated),t}))},e.setItems=function(t){this.form.checkFillPerm();const e=Array.from(new Set(t.map((t=>JSON.stringify(t)))));t=e.map((t=>JSON.parse(t)));let n=[];return t.forEach((t=>{Array.isArray(t)?t[0]&&n.push({label:t[0].toString(),value:t[1].toString(),selected:t[2]||!1,defaultSelected:t[3]||!1}):t&&n.push({label:t.toString(),value:t.toString(),selected:!1,defaultSelected:!1})})),n.length?new Promise((t=>{this.form.addTask((e=>{t(this.setOptions(n))}))})):Promise.resolve()},e.setDisplayValue=function(t){return this.displayValue==t?Promise.resolve():(this.displayValue=t,this.update("displayValue",t))},e.getDisplayValue=function(){return this.displayValue},e.setRect=function(t){this.rect=t,this.updateWidgetsUI(this.form,this.info.name,"rect",t,(e=>e.setRect(t)))},e.updateControls=function(t=[]){for(let e=0;e<t.length;e++){let n=this.controls[e];n?n.info=t[e]:(n=new wr(this.doc,this,t[e]),this.controls.push(n))}this.info.controls=t},e.setAction=function(t,e){if(-1!=t&&(t-Ht.keyStroke|Ht.onBlur-t)<0)throw new Error("Trigger error. Please refer to Constant Action_Trigger");if(!e)throw new Error("Action should not be null.");this.form.checkDesignPerm();let n=e.info;if("string"==typeof e){let t=new ir;t.setScript(e),n=(e=t).info}let i=this.info.name,r={trigger:t,data:n,field:i};if(t>6&&t<11){let n=this.getAction(t);return this.update("AA",r).then((i=>{this.triggerEvents(et[n?"actionUpdated":"actionAdd"],this.controls[0].getWidget()),this.triggerUpdateEvent(ge[n?"formFieldActionUpdated":"addAction"]);let r=this.doc;e.init(i,r.engine.actionFactory,r,r.api,r.engine.eventEmitter,this),t==Ht.calculate&&this.form.addCO(this),this.info.AA[t]=i,this.engineActions&&(this.engineActions[t]=e)}))}return this.updateWidgetsUI(this.form,i,"action",r,(n=>n.setAction(t,e)))},e.triggerEvents=function(t){if(!this.form||!this.form.engine)return;const e=this.form.engine.eventEmitter;this.controls.forEach((n=>{const i=n.getWidget();i&&e.emit(t,[i])}))},e.removeAction=function(t){let e=this.info.name,n={trigger:t,data:null,field:e};return t==Ht.calculate&&this.form.removeFieldInCO(e),this.updateWidgetsUI(this.form,e,"action",n,(e=>e.removeAction(t)))},e.hasControl=function(t){return this.info.controls.some((e=>e.objectNumber==t))},e.getBorderWidth=function(){let t=this.controls[0].getWidget();return t?t.getBorderWidth():0},e.isDateType=function(){let t=this.getType(),{info:e}=this;return 6===t&&e.AA&&e.AA[Ht.keyStroke]&&e.AA[Ht.keyStroke].javascript&&e.AA[Ht.keyStroke].javascript.indexOf("Date")>-1},e.isImageType=function(){let t=this.getType(),e=this.getWidget(0);if(!e)return!1;let{info:n}=e;return 1===t&&n.iconFit&&n.iconFit.isProportionalScaling},t}();var Yv=Wv;let Gv=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}(0,E.Z)(e,t);var n=e.prototype;return n.isSigned=function(){return this.info.isSigned},n.getByteRange=function(){return this.info.byteRange},n.getFilter=function(){return this.info.filter},n.getSubfilter=function(){return this.info.subfilter},n.getSigner=function(){return this.info.signer},n.setLockAction=function(t,e=""){return Array.isArray(e)||(e=e.split(",")),this.form.addTask((n=>this.doc.api.setLockAction(this.doc.id,this.info.name,t,e).then((n=>this.info.lockAction={type:t,fields:e}))))},n.getLockAction=function(){return this.info.lockAction},n.Verify=function(t){return this.form.addTask((e=>this.doc.engine.ensureSideModeLoaded().then((e=>this.doc.api.VerifySignature(this.doc.id,this.info.name,t)))))},n.verifySignatureLtv=function(t){return this.form.addTask((e=>this.doc.engine.ensureSideModeLoaded().then((e=>this.doc.api.verifySignatureLtv(this.doc.id,this.info.name,t)))))},n.clearSignature=function(t){return this.form.addTask((e=>this.doc.engine.ensureSideModeLoaded().then((e=>this.doc.api.clearSignature(this.doc.id,this.info.name,t)))))},n._getDigitalSignatureInfo=function(t=[]){return this.form.addTask((e=>this.doc.engine.ensureSideModeLoaded().then((e=>this.doc.api.getDigitalSignatureInfo(this.doc.id,this.info.name,t)))))},n.getDigitalSignatureInfo=function(t=[],e=!0){return new Promise((async(n,i)=>{if(this.destroyed)return void n({});let r={},o={},{isSigned:s,signer:a,originalSigner:c=a}=this.info;if(s)try{o=await this._getDigitalSignatureInfo(t);let{certificateInfo:{subjectChain:e=[]}={}}=o;a=(e[e.length-1]||{}).subjectName||"",a=a||c}catch(t){o={},console.error(t)}if(e){let{name:t,signTimeFormat:e,location:n,reason:i,contact:l,DN:h,text:u,isCertified:d,fileSizeOfSignedVersion:f,signedVersion:p,isVisible:g,filter:m,subfilter:v,creatorName:y}=this.info,w={name:t,isSigned:s,isVisible:g};if(s){let t={signTime:e,originalSigner:c,signer:a,location:n,reason:i,contact:l,DN:h,text:u,isCertified:d,fileSizeOfSignedVersion:f,signedVersion:p,filter:m,subfilter:v,creatorName:y};w={...w,...t},this.info={...this.info,...o,signer:a,originalSigner:c}}let b=await this.getControlByIndex(0).getWidgetAnnot(),A={pageIndex:b?b.getPage().getIndex():0,top:b?b.info.rect.top:0,widgetId:b?b.getId():void 0};r={...w,...o,...A}}else r={...this.signatureInfo||{},...o};n(r)}))},n.isLast=function(){return this.doc.api.isLastSignature(this.doc.id,this.getName())},n.getImage=function(){return this.getBitmap().then((t=>{if(!t)return null;let e=document.createElement("canvas");e.width=t.width,e.height=t.height;let n=e.getContext("2d"),i=new(Uint8ClampedArray||Uint8Array)(t.buffer),r=n.createImageData(t.width,t.height);return r.data.set(i),n.putImageData(r,0,0),e.toDataURL()}))},n.getBitmap=function(){return this.doc.api.getSignatureBitmap(this.doc.id,this.info.name)},n.setBitmap=function(t){const e=this.getWidget(0);return this.doc.api.setSignatureBitmap(this.doc.id,this.info.name,t).then((()=>(this.doc.engine.eventEmitter.emit(et.annotationAppearanceUpdated,[e],e.getPDFPage()),this)))},n.getSignInfo=function(){return this.isSigned()?this.getControlByIndex(0).getWidgetAnnot().then((t=>{const e=t.getRect(),n=t.getPage().getIndex(),{filter:i,subfilter:r,apFlag:o,signer:s,location:a,reason:c,DN:l,text:h,name:u,signTime:d,contact:f}=this.info;return this.getImage().then((t=>({filter:i,subfilter:r,rect:e,pageIndex:n,flag:o,signer:s,reason:c,email:f,distinguishName:l,location:a,textValue:h,fieldName:u,signTime:d,image:t})))})):Promise.resolve({})},e}(Yv);var Kv=Gv;let qv=function(){function t(t,e){this.doc=t,this.engine=e,this.api=e.api,this.fields=[],this.fieldsNameMap={},this.actionDepth=0,this.calculationEnabled=!0,this.queueTask=new _.QueuedAsyncTaskExecutor,this.formInfo={}}var e=t.prototype;return e.destroy=function(){return this.doc.api.destroyForm(this.doc.id).then((()=>{this.doc=null,this.engine=null,this.api=null,this.fields.forEach((t=>{let e=t.getName();this.fieldsNameMap[e]=null,t.destroy()})),this.fields=[],this.fieldsNameMap=null}))},e.checkFillPerm=function(){if(!this.doc.checkPermission(pe.annotForm|pe.fillForm))throw new Error("Permission error")},e.checkDesignPerm=function(){if(!this.doc.checkPermission(pe.annotForm)||!this.doc.checkPermission(pe.modify))throw new Error("Permission error")},e.setState=function(t){this.state=t},e.reduceControl=function(t,e){Object.keys(this.fieldsNameMap).forEach((t=>{e.forEach((e=>{let n=this.fieldsNameMap[t];n&&n.hasControl(e)&&this.removeControl(t,e,!1)}))}))},e.isEmpty=function(){return!this.fields.length},e.setActionHandler=function(t){this.actionHandler=t},e.setFormJson=function(t){if(this.isLoaded=!0,t){this.formInfo=t;for(let e=0,n=t.fields.length;e<n;e++){let n=t.fields[e],i=this.fieldsNameMap[n&&n.name||e];i&&i.updateControls?i.updateControls(n.controls):(i=7==n.type?new Kv(this.doc,this,n):new Yv(this.doc,this,n),this.fields.push(i),this.fieldsNameMap[n&&n.name||e]=i)}}else this.formInfo={fields:[]}},e.reloadPDFFieldByName=function(t){return this.api.reloadFieldByName(this.doc.id,t).then((e=>(this.updatePDFField(t,e),e)))},e.updatePDFField=function(t,e){let n=this.fieldsNameMap[t];n&&(n.updateControls(e.controls),n.info=e,this.fieldsNameMap[t].info=e)},e.getAlignment=function(){return this.formInfo.alignment},e.getFieldCount=function(){return this.fields.length},e.getField=function(t,e=!1){let n=this.fieldsNameMap[t];if(!e||n)return n;let i=[];for(let e in this.fieldsNameMap)e.startsWith(t)&&i.push(this.fieldsNameMap[e]);return i},e.getFieldByIndex=function(t){return this.fields[t]},e.getFieldAtPosition=function(t,e,n){const i=this.fields.filter((e=>{const n=e.getControlsCount()>0?e.getWidget(0):void 0;return!!n&&n.getPDFPage().getIndex()===t}));if(i)for(let t=0;t<i.length;t++){const r=i[t];if(r.getLoadedWidgets().some((t=>{const i=t.getRect();return!(e<i.left||e>i.right||n<i.bottom||n>i.top)})))return r}},e.setFieldValue=function(t,e){if(this.checkFillPerm(),"string"==typeof t&&(t=this.fieldsNameMap[t]),t.setValue(e),this.actionDepth++,this.actionDepth<2){let e=this.formInfo.calculationOrder;for(let n in e){let i=this.getField(e[n]),r=i.getAction(Er.FieldRecalculateValue);r&&this.actionHandler&&this.actionHandler(r,t,i,Er.FieldRecalculateValue)}}this.actionDepth--},e.calculate=function(t){if(this.checkFillPerm(),this.calculationEnabled){if("string"==typeof t&&(t=this.fieldsNameMap[t]),this.actionDepth++,this.actionDepth<2){let e=this.formInfo.calculationOrder;for(let n in e){let i=this.getField(e[n]);if(!i)continue;let r=i.getAction(Er.FieldRecalculateValue);r&&this.actionHandler&&this.actionHandler(r,t,i,Er.FieldRecalculateValue)}}this.actionDepth--}},e.resetForm=function(t=[],e=0,n=null){this.checkFillPerm(),this.enumFields(t,e,((t,e,n)=>{let i=this.getField(e),r=i.getDefaultValue();if(6===i.getType()){let t=i.getMaxLength();r.length>t&&0!=t&&(r=r.substring(0,t))}i.setValue(r);let o=arguments[3]||{};o.setValue&&o.setValue(r,n,i),this.formInfo.calculationOrder.includes(e)&&this.calculate(i)}),!0),n&&this.calculate(n)},e.submitForm=function(t,e,n){let i,r=Ee.getType(n),o="application/json";switch(r){case"HTML":let r="";this.enumFields(e,n,((t,e,n)=>{r+=e+"="+n+"&"}),!1,!1,!0),r=encodeURI(r.substr(0,r.length-1)),t+="?"+r,i=Promise.resolve(r);break;case"FDF":o="application/vnd.fdf",i=Promise.resolve(new Blob([this.exportFDF(e,n,!0)]));break;case"XFDF":o="application/vnd.xfdf",i=Promise.resolve(new Blob([this.exportXFDF(e,n,!0)]));break;case"PDF":let s=[];i=this.doc.getStream((function({arrayBuffer:t,offset:e,size:n}){s.push(t)})).then((function(t){return new Blob(s,{type:"application/pdf"})}))}return i.then((e=>{let i=Ee.isGetMethod(n);return new Promise(((n,r)=>{let s=new XMLHttpRequest;s.open(i?"GET":"POST",t),s.setRequestHeader("Content-Type",o),s.send(e),s.onloadend=()=>{n(s);let t=s.response.match(/\/JavaScript <<\/Before\s\(([\s\S]*?)\)>>/);if(!t)return;t=t[1];let e=new ir;e.setScript(t),this.actionHandler(e,null,null,-1)}}))}))},e.enumFieldsEx=function(t=[],e=0,n=null,i=!1,r=!1,o=!0,s=!1){if(Ee.isExclude(e)){let e=Object.keys(this.fieldsNameMap);if(0==(t=e.filter((e=>-1==t.indexOf(e)))).length)return}0==t.length&&(t=Object.keys(this.fieldsNameMap));let a=i?1:Ee.isIncludeNoValueFields(e);for(let e=0;e<t.length;e++){let c=t[e],l=this.getField(c);if(!l)continue;let h=l.getType(),u=l.getValue();if(o&&(h===xe.RadioButton||h===xe.CheckBox)){let t="Off";for(let e=0;e<l.getControlsCount();e++)if(l.getControlByIndex(e).info.isChecked){t=l.getControlByIndex(e).getExportValue();break}u=t}let d=0;i||(d=De.isNoExport(l.getFlags()),d=d||(s?"":!u)&&!a),(r||h!=xe.Sign&&h!=xe.PushButton&&!d)&&n(h,l.getName(),u||"")}},e.enumFields=function(t=[],e=0,n=null,i=!1,r=!1,o=!1){this.enumFieldsEx(t,e,n,i,r,!1,o)},e.exportFDF=function(t=[],e=0,n=!1){let i=[37,70,68,70,45,49,46,50,10,49,32,48,32,111,98,106,10,60,60,47,70,68,70,60,60,47,70,40];zv(i,this.getFileName()),zv(i,")/Fields["),this.enumFieldsEx(t,e,((t,e,n)=>{switch(zv(i,"<</T("),zv(i,e,!0),zv(i,")/V"),t){case xe.CheckBox:case xe.RadioButton:zv(i,"/"),zv(i,n,!0);break;default:zv(i,"("),zv(i,n),zv(i,")")}zv(i,">>")}),!1,!1,!0,n);let r=`]/ID[<${this.doc.info.fileID[0]}><${this.doc.info.fileID[1]}>]/UF(${this.getFileName()})>>/Type/Catalog>>\nendobj\ntrailer\n<</Root 1 0 R>>\n%%EOF`;return zv(i,r),new Uint8Array(i)},e.xmlEncodeText=function(t){return t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;").replace('"',"&quot;")},e.getFileName=function(){return this.doc.info.fileName||""},e.exportXFDF=function(t=[],e=0,n=!1){let i=`<?xml version="1.0" encoding="UTF-8"?>\n<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">\n<f href="${this.xmlEncodeText(this.getFileName())}"/><fields>\n`,r=`</fields>\n<ids original="${this.doc.info.fileID[0]}" modified="${this.doc.info.fileID[1]}"/>\n</xfdf>`,o="";return this.enumFieldsEx(t,e,((t,e,n)=>{o+=`<field name="${this.xmlEncodeText(e)}"><value>${this.xmlEncodeText(n)}</value></field>`}),!1,!1,!0,n),i+o+r},e.importFDF=function(t){this.checkFillPerm();var e=t.match(/<<\/T\([\s\S]*?\)(\/V[\s\S]*?)?>>/g);for(let t in e){var n=e[t].match(/<<\/T\(([\s\S]*?)\)(?:\/V\/?([\s\S]*?))?>>/);if(void 0!==n[2]){var i=this.getField(n[1]);if(!i)return;var r=n[2];r!==i.getValue()&&(r=i.getType()===xe.CheckBox||i.getType()===xe.RadioButton?Jv(r):Jv(r.match(/\(([\s\S]*)\)/)[1]),i.setValue(r))}}},e.importXFDF=function(t){this.checkFillPerm();var e=t.match(/<field\s*name=["|'][\s\S]*?["|']\s*?>\s*?(<value\s*?(\/>|>[\s\S]*?<\/value\s*?>))?\s*?<\/field\s*?>/g);for(var n in e){var i=e[n].match(/<field name=["|']([\s\S]*?)["|']\s*?>\s*?<value\s*?(?:\/>|>([\s\S]*?)<\/value\s*?>)/);if(i&&void 0!==i[2]){var r=this.getField(i[1]);if(!r)return;var o=i[2];o!==r.getValue()&&r.setValue(o)}}},e.exportXML=function(t=[],e=0,n=!1){let i="",r={},o=0;return this.enumFieldsEx(t,e,((t,e,n)=>{let s=e,a="",c=e.match(/[^0-9][a-zA-Z0-9:\-_\.]*/);c&&c[0].length!==e.length&&(s="fxTag"+e.replace(/[^a-zA-Z0-9]/g,""),a=' xfdf:original="'+e+'"'),isNaN(parseInt(s))||(s="fxTag"+e,a||(a=' xfdf:original="'+e+'"')),n=D()("<div/>").text(n).html();let l=s;for(;l in r;)l=s+o,o+=1;r[l]=!0,i+="<"+s+a+">"+n+"</"+s+">\r"}),!1,!1,!0,n),'<?xml version="1.0" encoding="UTF-8"?><fields xmlns:xfdf="http://ns.adobe.com/xfdf-transition/">'+i+"</fields>"},e.importXML=function(t){(this.checkFillPerm(),this.isEmpty())||("string"==typeof t&&(t=D().parseXML(t)),D()(t).children().children().each((function(){var t=getNodeString(D()(this),"xfdf:original");t&&""!==t&&0!==t.length||(t=this.tagName);var e=D()(this).text(),n=this.getField(t);n&&n.setValue(e)})))},e.upadateValue=function(t){for(var e in t){var n=this.getField(e);if(!n)continue;var i=t[e];let r=n.getType();if(i instanceof Array&&5==r){n.info.value=i;const t=n.info.options;let e=[];i.forEach((n=>{for(let i=0;i<t.length;i++)i!=e[i]&&(t[i].selected=t[i].value===n)&&(e[i]=i)})),n.updateWidgetsUI(this,n.getName(),"value",i)}else{if(i!==n.getValue()){if(n.info.value=i,4==r||5==r){n.info.options.forEach((t=>{t.selected=t.value===i}))}n.updateWidgetsUI(this,n.getName(),"value",i)}2!=r&&3!=r||(n.controls.forEach((t=>{let e=t.getWidget();t.info.isChecked=t.getExportValue()==i||"Off"!==i&&e&&e.getOnAS()===i})),n.updateWidgetsUI(this,n.getName(),"value",i,(t=>t.update())))}}},e.updateFields=function(t,e,n){if("controlFlag"===e)for(let e of Object.keys(this.fieldsNameMap))e.startsWith(t)&&this.fieldsNameMap[e].setWidgetDisplay(n)},e.addSignature=function(t,e,n,i){return this.doc.api.addControl(this.doc.id,t,n||"",7,e,i).then((e=>{if(e.failed)throw new Error("Signature creation failed.");let n;return e.form?(this.setFormJson(e.form),n=this.getField(e.fieldName)):(n=new Kv(this.doc,this,e),this.fields.push(n),this.fieldsNameMap[e.name]=n),Promise.all([n,this.doc.getPageByIndex(t)]).then((([t,e])=>Promise.all([e,e.getUnloadedAnnots(),t]))).then((([t,e,n])=>{const i=e.filter((t=>t.getType()===ti.widget));return this.doc.engine.eventEmitter.emit(et.annotationAdd,i,t),n}))}))},e.addControlSync=function(t){return this.addControl(t.pageIndex,t.fieldName,t.fieldType,t.rect),this.fieldsNameMap[t.fieldName]},e.createFieldByCopyControl=function({pageIndex:t,newRect:e,srcWidget:n,newFieldName:i}){this.checkDesignPerm();const r=n.info.fieldType,o=n.info.field,s=n.info.objectNumber;if(!this.isLoaded)throw new Error("please call PDFDoc.loadForm() firstly.");if(t<0||t>this.doc.getPageCount()-1||!i||!i.trim()||!r||r<1||r>6)return Promise.resolve({success:!1,newFieldName:i});let a,c=this.fieldsNameMap[i],l=!1;return c||(a=Xv(i,r),this.formInfo.fields.push(a),c=new Yv(this.doc,this,a),c.setRect(e),this.fields.push(c),this.fieldsNameMap[a.name]=c,l=!0),this.addTask((h=>{const u=1===r&&n.info.iconFit&&n.info.iconFit.isProportionalScaling;return this.doc.api.createFieldByCopyControl(this.doc.id,t,r,u,i,e,o,s).then((e=>(l&&e.fieldName!==i&&(this.fields.pop(c),this.formInfo.fields.pop(a),i=e.fieldName,a=Xv(i,r),this.formInfo.fields.push(a),c=new Yv(this.doc,this,a),this.fields.push(c),this.fieldsNameMap[a.name]=c),e.form?this.setFormJson(e.form):c.updateControls(e.controls),this.doc.getPageByIndex(t)))).then((t=>Promise.all([t,t.getUnloadedAnnots()]))).then((([t,e])=>(this.doc.engine.eventEmitter.emit(et.annotationAdd,e,t),{newFieldName:i,annots:e})))}))},e.hasSigField=function(){return this.fields.some((t=>7==t.getType()))},e.addControl=function(t,e,n,i){if(this.checkDesignPerm(),!this.isLoaded)throw new Error("please call PDFDoc.loadForm() firstly.");if(t<0||t>this.doc.getPageCount()-1||!e||!e.trim()||!n||n<1||n>6)return Promise.resolve({success:!1,newFieldName:e});let r,o=this.fieldsNameMap[e],s=!1;o||(r=Xv(e,n),this.formInfo.fields.push(r),o=new Yv(this.doc,this,r),o.setRect(i),this.fields.push(o),this.fieldsNameMap[r.name]=o,s=!0);let a=arguments[4];return this.addTask((c=>this.doc.api.addControl(this.doc.id,t,e,n,i,a).then((a=>(s&&a.fieldName!==e&&(this.fields.pop(o),this.formInfo.fields.pop(r),e=a.fieldName,r=Xv(e,n),this.formInfo.fields.push(r),o=new Yv(this.doc,this,r),o.setRect(i),this.fields.push(o),this.fieldsNameMap[r.name]=o),a.form?this.setFormJson(a.form):o.updateControls(a.controls),a.fieldFlags&&(o.info.flag=a.fieldFlags),this.doc.getPageByIndex(t)))).then((t=>Promise.all([t,t.getUnloadedAnnots()]))).then((([t,n])=>{const i=n.filter((t=>t.getType()===ti.widget));return this.doc.engine.eventEmitter.emit(et.annotationAdd,i,t),Promise.resolve({success:!0,newFieldName:e})}))))},e.validateFieldName=function(t,e){return this.doc.api.validateFieldName(this.doc.id,t,e)},e.reloadForm=function(t){return t&&(this.fields.forEach((t=>t.destroy())),this.fields=[],this.fieldsNameMap={},this.setFormJson(t),this.doc.pageCache.forEach((t=>{t.annots.forEach((t=>{"widget"==t.getType()&&t.mapFormControl()}))}))),t},e.renameField=function(t,e,n){let i=this.getField(t).controls.map((t=>t.getWidget())).filter((t=>t));return this.doc.api.renameField(this.doc.id,t,e).then((t=>{let e=i.map((t=>t.update()));return e.push(t),Promise.all(e)})).then((t=>this.reloadForm(t[t.length-1]))).then((()=>i.map((t=>t.updateUI({type:"rename"})))))},e.removeEngineField=function(t){delete this.fieldsNameMap[t];let e=0;this.fields.forEach(((n,i)=>{if(n.getName()==t)return e=i,!1})),this.fields.splice(e,1),this.formInfo.fields.splice(e,1),this.removeFieldInCO(t)},e.removeField=function(t){if(this.checkDesignPerm(),!this.fieldsNameMap[t])return Promise.resolve(!1);let e=this.getField(t);if(e.getType()==xe.Sign&&e.isSigned())throw new Error("Signed signature can't be removed.");return e.getLoadedWidgets().map((t=>{if(t){let e=t.getPage();e.clearAnnotIds([t.getId()]),this.doc.engine.eventEmitter.emit(et.annotationRemoved,[t],e)}})),this.removeFieldInCO(t),this.removeEngineField(t),this.queueTask.waitForCurrentRunningTasks().then((e=>this.doc.api.removeField(this.doc.id,t)))},e.removeControlByIndex=function(t,e){let n=this.getField(t).getControlByIndex(e);this.removeControl(t,n.info.objectNumber)},e.removeControl=function(t,e){this.checkDesignPerm();let n=!(arguments.length>2)||arguments[2],i=this.getField(t).getControlById(e).getWidget();if(i){let t=i.getPage();t.clearAnnotIds([i.getId()]),this.doc.engine.eventEmitter.emit(et.annotationRemoved,[i],t)}return 0==this.fieldsNameMap[t].removeControlInfo(e)&&this.removeEngineField(t),n?this.doc.api.removeControl(this.doc.id,0,t,e):Promise.resolve()},e.fixPageFields=function(t){return this.doc.api.fixPageFields(this.doc.id,t)},e.getControlCount=function(t){return this.doc.api.getControlCount(this.doc.id,t)},e.setFieldsValue=function(t,e,n){return!0!==n&&this.doc.engine.eventEmitter.emit(et.formValueChanged),this.doc.api.setFieldsValue(this.doc.id,t,e)},e.addTask=function(t,e=!1){if("function"!=typeof t)return Promise.resolve();if("jsInited"==this.state&&!e)return Promise.resolve(t());const n=this.queueTask.exec(t);return n.catch((t=>console.error(t))),n},e.addCO=function(t){let e=t.getName(),n=this.formInfo.calculationOrder;-1==n.indexOf(e)&&(n.push(e),this.doc.api.setCO(this.doc.id,n),this.doc.engine.eventEmitter.emit(et.COChange,n))},e.countField=function(t,e,n){let i=0;return this.fields.forEach((r=>{e?r.isDateType()&&i++:n?r.isImageType()&&i++:r.isDateType()||r.isImageType()||r.getType()!==t||i++})),i},e.afterRemovePage=function(t){this.fields=this.fields.filter((e=>{const n=e.controls.filter((e=>{const n=e.getWidget();return(n&&n.getPage().getIndex())!==t}));return n.length>0&&(e.controls=n,!0)})),this.updateFieldsNameMap()},e.updateFieldsNameMap=function(){this.fieldsNameMap={},this.fields.forEach((t=>{this.fieldsNameMap[t.getName()]=t}))},e.afterMovePage=function(t,e){let n=!0;t>e&&(n=!1),this.fields.forEach((i=>{i.controls.forEach((i=>{let r=i.info.pageIndex;r!=t?n?r>t&&r<=e&&(i.info.pageIndex-=1):r>=e&&r<t&&(i.info.pageIndex+=1):i.info.pageIndex=e}))}))},e.afterInsertPage=function(t){return this.doc.pageCache[t].getAnnotTree().then((e=>{e.forEach((t=>{if("widget"==t.getType()){const e=t.getField();if(e){let t=this.fields.findIndex((t=>t.getName()==e.getName()));e.updateControls(e.info.controls),t>-1?this.fields.splice(t,1,e):this.fields.push(e)}}})),this.fields.forEach((e=>{e.controls.forEach((e=>{e.info.pageIndex>=t&&(e.info.pageIndex+=1)}))})),this.updateFieldsNameMap()}))},e.afterImportPages=function(t,e){this.fields.forEach((n=>{n.controls.forEach((n=>{n.info.pageIndex>=t&&(n.info.pageIndex+=e)}))}))},e.copyControls=function(t,e,n){return this.checkDesignPerm(),this.doc.api.copyControls(this.doc.id,0,e.getIndex(),n).then((t=>Promise.all(t.map((t=>{let e=this.getField(t.fieldName);return e.updateControls(t.controlJsons),delete e.engineActions,this.doc.api.getAAJson(this.doc.id,t.fieldName).then((t=>e.info.AA=t))}))))).then((t=>e.getUnloadedAnnots())).then((t=>(this.doc.engine.eventEmitter.emit(et.annotationAdd,t,e),t)))},e.duplicateWidget=function(t,e,n,i){return Promise.all(t.map((t=>this.doc.getPageByIndex(t)))).then((t=>t.filter((t=>!t.isVirtual())).map((t=>t.getIndex())))).then((t=>{if(!(t.length<1))return this.doc.api.duplicateWidget(this.doc.id,t,e,n).then((t=>{let n=this.getField(e);return n.updateControls(t),delete n.engineActions,this.doc.api.getAAJson(this.doc.id,e).then((t=>n.info.AA=t))})).then((t=>Promise.all(i.map((t=>this.doc.getPageByIndex(t).then((t=>t.getUnloadedAnnots()))))))).then((t=>{t.forEach((t=>{t.length>0&&this.doc.engine.eventEmitter.emit(et.annotationAdd,t,t[0].getPage())}))}))}))},e.duplicateField=function(t,e,n,i,r){if(this.getField(t).controls.length>1)return Promise.reject(new Error("More than one copies appeared."));let o=r.shift(),s=e.getPage();return e.setRect(o).then((a=>{if(e.updateUI({type:"rect",value:o}),r.length<1)return Promise.resolve();this.doc.api.duplicateField(this.doc.id,t,s.getIndex(),e.getObjNum(),n,i,r).then((t=>Promise.all([e.update(),t]))).then((([t,e])=>this.reloadForm(e))).then((t=>s.getUnloadedAnnots())).then((t=>{this.doc.engine.eventEmitter.emit(et.annotationAdd,t,t[0].getPage())}))}))},e.duplicateNewFields=async function(t,e,n){let i=e.shift();await t.setRect(i);for(let i=0;i<e.length;i++){let{newFieldName:r}=this.autoGenerateFieldName(t);await this.createFieldByCopyControl({pageIndex:n,newRect:e[i],srcWidget:t,newFieldName:r})}return Promise.resolve()},e.autoGenerateFieldName=function(t){let e=t.info.fieldType;const n=6===e&&t.formControl.field&&t.formControl.field.info&&t.formControl.field.info.AA&&t.formControl.field.info.AA[Ht.keyStroke]&&t.formControl.field.info.AA[Ht.keyStroke].javascript&&t.formControl.field.info.AA[Ht.keyStroke].javascript.indexOf("Date")>-1,i=1===e&&t.info.iconFit&&t.info.iconFit.isProportionalScaling;let r="";r=n?pdfui.pdfViewer.i18n.t("form-designer:prefix.9"):i?pdfui.pdfViewer.i18n.t("form-designer:prefix.8"):pdfui.pdfViewer.i18n.t("form-designer:prefix."+e);let o="",s=this.countField(e,n,i),a="";do{a=r+s,o=this.fieldsNameMap[a],s+=1}while(o);return{newFieldName:a,fieldTypeName:r}},e.moveControl=function(t,e,n){let i=this.getField(t).controls.map((t=>t.getWidget()));return i.length>1?this.doc.api.moveControl(this.doc.id,n,t,e).then((t=>{let e=i.filter((t=>t)).map((t=>t.update()));return e.push(t),Promise.all(e)})).then((t=>this.reloadForm(t[t.length-1]))).then((()=>i.map((t=>t.updateUI({type:"rename"}))))):this.renameField(t,e)},e.getCO=function(){return this.formInfo&&this.formInfo.calculationOrder||[]},e.setCO=function(t){return this.formInfo.calculationOrder=t,this.doc.engine.eventEmitter.emit(et.COChange,t),this.doc.api.setCO(this.doc.id,t)},e.removeFieldInCO=function(t){let e=this.formInfo.calculationOrder,n=e.indexOf(t);-1!=n&&(e.splice(n,1),this.doc.engine.eventEmitter.emit(et.COChange,e),this.doc.api.setCO(this.doc.id,e))},t}();function zv(t,e,n){let i;for(i=0;i<e.length&&!(e.charCodeAt(i)>255);i++);if(i!==e.length)for(t.push(254),t.push(255),i=0;i<e.length;i++){let r=e.charCodeAt(i)>>8;!n||40!=r&&41!=r||t.push(92),t.push(r),r=255&e.charCodeAt(i),!n||40!=r&&41!=r||t.push(92),t.push(255&e.charCodeAt(i))}else for(i=0;i<e.length;i++){let r=e.charCodeAt(i);!n||40!=r&&41!=r||t.push(92),t.push(r)}}function Jv(t){if(254==t.charCodeAt(0)&&255==t.charCodeAt(1)){for(var e="",n=2;n<t.length;n+=2)e+=String.fromCharCode((t.charCodeAt(n)<<8)+t.charCodeAt(n+1));return e}return t}const Zv={alignment:0,alternateName:"",controls:[{index:0,isChecked:!1,isDefaultChecked:!1,isEmpty:!1,objectNumber:-1}],DA:{flags:3,fontName:"FoxitSansOTF",textColor:4278190080,textSize:0},defaultValue:"",flag:0,mappingName:"",maxLength:0,name:"",options:[],topVisibleIndex:0,type:1,value:"",isEmpty:!1,AA:{}},Xv=function(t,e){let n=JSON.parse(JSON.stringify(Zv));return n.defaultValue=n.value=2==e||3==e?"Off":"",n.name=t,n.type=e,n};var Qv=qv;let ty=function(){function t(t,e,n=0){this.id=(0,_.getUniqueId)("doc_text_search"),this.pattern=e,this.flags=n,this.doc=t,this.api=t.api,this.startPageIndex=0,this.currentPageIndex=0,this.endPageIndex=t.getPageCount()-1,this.annotTextSearchArr=[],this.currentAnnotTextSearch=null,t.docTextSearchIdMap[this.id]=this}var e=t.prototype;return e.getId=function(){return this.id},e.findNext=function(){this.startPrev=!1;let t=null;return this.getCurrentPageTextSearch().then((e=>(t=e,e.findNext()))).then((e=>{if(e)return e;if(t instanceof Ar){const t=this.annotTextSearchArr.findIndex((t=>t.id==this.currentAnnotTextSearch.id));return t>-1?t==this.annotTextSearchArr.length-1?(this.currentAnnotTextSearch=null,this.startPageTextSearch=!0):(this.currentAnnotTextSearch=this.annotTextSearchArr[t+1],this.startPageTextSearch=!1):(this.currentAnnotTextSearch=null,this.startPageTextSearch=!0),this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.findNext()}return this.currentPageIndex<this.endPageIndex?(this.currentPageIndex++,this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.startPageTextSearch=!1,this.findNext()):(this.currentPageIndex=this.startPageIndex,this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.startPageTextSearch=!1,null)}))},e.findNexts=function(){return this.startPrev=!1,this.getCurrentPageTextSearch().then((t=>new Promise(((e,n)=>{this.iterationPageFindNext(t,[],(i=>{if(i.length){let n=this.currentPageIndex<this.endPageIndex;if(t instanceof Ar){const t=this.annotTextSearchArr.findIndex((t=>t.id==this.currentAnnotTextSearch.id));t>-1?t+1>=this.annotTextSearchArr.length?(this.currentAnnotTextSearch=null,this.startPageTextSearch=!0):(this.currentAnnotTextSearch=this.annotTextSearchArr[t+1],this.startPageTextSearch=!1):this.startPageTextSearch=!0,this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null}return t instanceof Ev&&(this.currentPageIndex<this.endPageIndex?(this.currentPageIndex++,this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null):(this.currentPageIndex=this.startPageIndex,this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null),this.currentAnnotTextSearch=null,this.startPageTextSearch=!1),e({hasMore:n,list:i})}if(t instanceof Ev)return this.currentPageIndex<this.endPageIndex?(this.currentPageIndex++,this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.currentAnnotTextSearch=null,this.startPageTextSearch=!1,this.findNexts().then((t=>{e(t)}),(()=>{n()}))):(this.currentPageIndex=this.startPageIndex,this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,e({hasMore:!1,list:i}));if(t instanceof Ar){const t=this.annotTextSearchArr.findIndex((t=>t.id==this.currentAnnotTextSearch.id));return t>-1?t+1>=this.annotTextSearchArr.length?(this.currentAnnotTextSearch=null,this.startPageTextSearch=!0):(this.currentAnnotTextSearch=this.annotTextSearchArr[t+1],this.startPageTextSearch=!1):this.startPageTextSearch=!0,this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.findNexts().then((t=>{e(t)}),(()=>{n()}))}}))})))).then((t=>t))},e.iterationPageFindNext=function(t,e,n){t.findNext().then((i=>{if(!i)return n(e);e.push(i),this.iterationPageFindNext(t,e,n)}))},e.findPrev=function(){this.startPrev=!0;let t=null;return this.getCurrentPageTextSearch().then((e=>(t=e,e.findPrev()))).then((e=>{if(e)return e;if(t instanceof Ar){const t=this.annotTextSearchArr.findIndex((t=>t.id==this.currentAnnotTextSearch.id));return t>-1?0==t?(this.currentAnnotTextSearch=null,this.startPageTextSearch=!0):(this.currentAnnotTextSearch=this.annotTextSearchArr[t-1],this.startPageTextSearch=!1):(this.currentAnnotTextSearch=null,this.startPageTextSearch=!0),this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.findPrev()}return this.currentPageIndex>this.startPageIndex?(this.currentPageIndex--,this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.startPageTextSearch=!1,this.findPrev()):(this.currentPageIndex=this.endPageIndex,this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.startPageTextSearch=!1,null)}))},e.getCurrentPageTextSearch=function(){return this.currentPageTextSearch?Promise.resolve(this.currentPageTextSearch):this.currentPageTextSearchPromise?this.currentPageTextSearchPromise:this.currentPageTextSearchPromise=this.doc.getPageByIndex(this.currentPageIndex).then((t=>this.currentAnnotTextSearch?Promise.resolve(this.currentAnnotTextSearch):this.startPageTextSearch?t.getTextSearch(this.pattern,this.flags):t.getAnnots().then((e=>{let n=[];return e.forEach((t=>{"widget"==t.getType()&&n.push(t.getTextSearch(this.pattern,this.flags))})),n.length?Promise.all(n).then((t=>(this.annotTextSearchArr=t,this.currentAnnotTextSearch=this.startPrev?t[t.length-1]:t[0],Promise.resolve(this.currentAnnotTextSearch)))):t.getTextSearch(this.pattern,this.flags)})))).then((t=>(this.currentPageTextSearch=t,this.currentPageTextSearchPromise=null,t)))},e.setStartPageIndex=function(t){this.startPageIndex=t},e.setCurrentPageIndex=function(t){t<this.startPageIndex&&(t=this.startPageIndex),t>this.endPageIndex&&(t=this.endPageIndex),this.currentPageIndex!==t&&this.destroy(),this.currentPageIndex=t},e.setEndPageIndex=function(t){this.endPageIndex=t},e.destroy=function(){this.currentPageTextSearch&&this.currentPageTextSearch.destroy(),this.currentPageTextSearch=null,this.currentPageTextSearchPromise&&this.currentPageTextSearchPromise.then((t=>{t.destroy(),this.currentPageTextSearch=null})),this.doc.docTextSearchIdMap[this.id]=null,this.currentPageTextSearchPromise=null},t}();var ey={None:"none",RC4:"rc4",AES128:"aes128",AES256:"aes256"};const ny='<?xml version="1.0" encoding="UTF-8"?>\n<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">\n<f href="a.pdf"/><fields>\n',iy='</fields>\n<ids original="abcdef" modified="0123456"/>\n</xfdf>';function ry(t){if('"'!==t[0])return oy(t);let e="";for(let n=1;n<t.length;n++)'"'!=t[n]&&(e+=t[n]);return oy(e)}function oy(t){return D()("<div/>").text(t).html().replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function sy(t){"string"==typeof t&&(t=D().parseXML(t));let e="";return D()(t).children().children().each((function(){var t,n,i,r,o=(t=D()(this),n="xfdf:original",i="",t&&void 0!==t.attr(n)&&(r=t.attr(n),i=r.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/\r/g,"").replace(/\n/g," ")),i);o&&""!==o&&0!==o.length||(o=this.tagName);var s=D()(this).html();e+=`<field name="${o}"><value>${s}</value></field>`})),new Blob([ny+e+iy],{type:"application/vnd.xfdf"})}let ay=function(){function t(e,n,i={},r=null){for(var o in this.engine=e,this.api=e.api,this.docId=n.id,this.doc=n,this.parent=r,i)if("children"==o){this.children=[];for(let r=0;r<i[o].length;r++)this.children.push(new t(e,n,i[o][r],this))}else this[o]=i[o]}var e=t.prototype;return e.destroy=function(){this.engine=null,this.api=null,this.doc=null,this.parent=null,this.children.forEach((t=>t.destroy)),this.children=null},e.insertBookmark=function(e,n,i,r,o=1){if(!this.doc.checkPermission(pe.assemble))throw new Error("Permission error");if((o|5-o)<0)throw new Error("Wrong relationship: "+o);if((n|this.doc.getPageCount()-1-n)<0)throw new Error("Wrong pageIndex: "+n);let s=arguments[5],a=this;return a.doc.api.insertBookmark(a.docId,a.id,e,n,i,r,o,s).then((e=>{if(e){let n=new t(a.doc.engine,a.doc,e,a);return a.children.push(n),a.doc.bookmarkRoot=null,a.doc.engine.eventEmitter.emit(et.bookmarkAdded,n),n}return null}))},e.addBookmarksFromStructureRoles=function(t,e){return this.doc.api.addBookmarksFromStructureRoles(this.docId,t,e).then((t=>(this.engine.eventEmitter.emit(et.structureBookmarkAdded),t)))},e.setProperty=function(t){const e=!(arguments.length>1||void 0!==arguments[1])||arguments[1];if(!this.doc.checkPermission(pe.assemble))throw new Error("Permission error");void 0!==t.color&&(t.color=(0,_.colorConvertor)(t.color,"int"));let n=this;return this.doc.api.setBookmarkProperty(this.docId,this.id,t).then((t=>{if(t){for(let e in t)"children"!==e&&(n[e]=t[e]);e&&n.doc.engine.eventEmitter.emit(et.bookmarkUpdated,n)}return this}))},e.remove=function(){if(!this.doc.checkPermission(pe.assemble))throw new Error("Permission error");let t=this;return this.doc.api.removeBookmark(this.docId,this.id).then((e=>{if(e&&(t.doc.engine.eventEmitter.emit(et.bookmarkRemoved,t.id),t.parent)){let e=t.parent;for(let n=0;n<(e.children||[]).length;n++)if(t.id==e.children[n].id){e.children.splice(n,1);break}this.destroy()}return e}))},e.moveTo=function(t,e){return this.doc.api.moveBookmark(this.docId,this.id,t.id,e).then((t=>{this.doc.bookmarkRoot=null,this.doc.engine.eventEmitter.emit(et.bookmarkUpdated,this)}))},e.getDestination=function(){return this.doc.api.getBookmarkDestination(this.docId,this.id).then((t=>{if(t)return this.doc.engine.actionFactory.createAction(t,this.doc,this.doc.api,this.engine.eventEmitter,this)}))},e.setDestination=function(t){if(!t)throw new Error("No GotoAction!");return this.doc.api.setBookmarkDestination(this.docId,this.id,t.info).then((t=>{if(t)return this.doc.engine.actionFactory.createAction(t,this.doc,this.doc.api,this.engine.eventEmitter,this)}))},e.getAction=function(){return this.doc.api.getBookmarkAction(this.docId,this.id).then((t=>{if(t)return this.doc.engine.actionFactory.createAction(t,this.doc,this.doc.api,this.engine.eventEmitter,this)}))},e.setAction=function(t){if(!t)throw new Error("No Action!");return this.doc.api.setBookmarkAction(this.doc.getId(),this.id,t.info)},e.removeAction=function(t,e){return this.doc.api.removeBookmarkAction(this.doc.getId(),this.id,e?e.info:null)},e.updateBookmark=function(e){for(var n in e)if("children"==n){this.children=[];for(let i=0;i<e[n].length;i++)this.children.push(new t(this.engine,this.doc,e[n][i],this))}else this[n]=e[n]},e.moveAction=function(t){return this.doc.api.moveBookmarkAction(this.doc.getId(),this.id,t)},t}();var cy=ay;let ly=function(){function t(t){t?(this.json=t,this.empty=!1):(this.json={contentFormats:{},margin:{left:72,right:36,top:72,bottom:36},textSize:12,textColor:4278190080,hasTextShrinked:!1,hasFixedSized:!1,startPageNumber:1,underline:!1},this.empty=!0)}var e=t.prototype;return e.destroy=function(){this.json=null},e.isEmpty=function(){return this.empty},e.getContent=function(t){return this.json.contentFormats[t]||this.json.contents[t]},e.setFont=function(t){this.json.fontId=t,this.json.font=t},e.setContentFormat=function(t,e){this.empty=!1,this.json.contentFormats[t]=e},e.setRange=function(t){if(t.start<1||t.end<1)throw new Error("page range is wrong.");if(t.filter<0||t.filter>2)throw new Error("Wrong filter.");this.json.range=t},e.setMargin=function(t){this.json.margin=t},e.setTextSize=function(t){this.json.textSize=t},e.setTextColor=function(t){this.json.textColor=t},e.enableTextShrinked=function(t){this.json.hasTextShrinked=t},e.enableFixedSizedForPrint=function(t){this.json.hasFixedSized=t},e.setStartDisplayingPage=function(t){this.json.startPageNumber=t},e.setUnderline=function(t){this.json.underline=t},e.getUnderline=function(){return this.json.underline},t}();var hy;!function(t){t[t.folder=1]="folder",t[t.file=2]="file"}(hy||(hy={}));let uy=function(){function t(t){this.nodeData=t}return t.prototype.getNodeType=function(){return this.type},t}(),dy=function(t){function e(e,n,i){var r;return(r=t.call(this,i)||this).type=hy.folder,r.engine=e,r.doc=n,r.api=e.api,r.nodeHandle=i.handle,r.name=i.fileName,r.subNodes=[],r}(0,E.Z)(e,t);var n=e.prototype;return n.getSortedSubNodes=function(){let t=this.doc;return this.api.getPortfolioSubNodes(t.getId(),this.nodeHandle).then((n=>(this.subNodes=[],n.forEach((n=>{if(n.type===hy.folder){let i=new e(this.engine,t,n);this.subNodes.push(i)}if(n.type===hy.file){let e=new fy(this.engine,t,n);this.subNodes.push(e)}})),this.subNodes)))},n.addFiles=function(t,e){return this.api.portfolioAddFiles(this.doc.getId(),t,e,this.nodeHandle)},n.createFolder=function(t){return this.api.portfolioCreateFolder(this.doc.getId(),t,this.nodeHandle).then((t=>new e(this.engine,this.doc,t)))},n.removeSubNodes=function(t){return this.api.portfolioRemoveSubNodes(this.doc.getId(),this.nodeHandle,t)},n.changeSubNodesOrder=function(t,e){return this.api.changePortfolioSubNodesOrder(this.doc.getId(),this.nodeHandle,t,e)},n.moveSubNodeToSubFolderNode=function(t,e){return this.api.portfolioMoveSubNodeToSubFolderNode(this.doc.getId(),this.nodeHandle,t,e)},n.hasSameNameSubNode=function(t,e){return this.api.portfolioHasSameNameSubNode(this.doc.getId(),t,e,this.nodeHandle)},n.getName=function(){return this.name},n.getDescription=function(){return this.description},e}(uy),fy=function(t){function e(e,n,i){var r;return(r=t.call(this,i)||this).type=hy.file,r.engine=e,r.doc=n,r.api=e.api,r.nodeHandle=i.handle,r.keyName=i.keyName,r}(0,E.Z)(e,t);var n=e.prototype;return n.getKeyName=function(){return this.keyName},n.getFileStream=function(){let t=this.doc,e=[];return this.api.getPortfolioFileStream(t.getId(),this.nodeHandle,(({arrayBuffer:t,blob:n})=>{n?e=n:e.push(t)})).then((()=>Array.isArray(e)?new Blob(e,{type:"application/octet-stream"}):e))},e}(uy),py=function(){function t(t,e){this.engine=t,this.doc=e,this.api=t.api,this.root=null,this.activedPDFNode=[]}var e=t.prototype;return e.getInfo=function(){return this.api.getPortfolioInfo(this.doc.getId())},e.setInfo=function(t){return this.api.setPortfolioInfo(this.doc.getId(),t)},e.regenerateTOC=function(t){return this.api.portfolioRegenerateTOC(this.doc.getId(),t).then((t=>{var e;const{oldIndexes:n,newPages:i}=t||{};if(n.length){this.doc.info.pageCount-=n.length;const t=[],e=[];n.forEach((n=>{const i=this.doc.pageCache[n];t.push(n),this.doc.pageCache.splice(n,1),i&&e.push(i.info.objectNumber)})),this.engine.eventEmitter.emit(et.pagesRemoved,t,e)}this.doc.info.pageCount+=i.length;const r=[];i.forEach((t=>{let e=new jv(t,this.doc);r.push(e)})),(e=this.doc.pageCache).push.apply(e,r),this.doc.updatePageIndex(i[0].index,this.doc.info.pageCount),this.doc.updatePageLabelsByAction("insertPages",[i[0].index,r.length]),this.engine.eventEmitter.emit(et.insertPages,r)}))},e.hasSameNameSubNode=function(t,e,n){return this.api.portfolioHasSameNameSubNode(this.doc.getId(),t,e,n)},e.getStream=function(t){return this.api.getPortfolioStream(this.doc.getId(),t)},e.getTreeNode=function(){return this.api.getPortfolioTreeNode(this.doc.getId()).then((t=>(this.treeNode=t,t.type===hy.folder&&(this.root=new dy(this.engine,this.doc,t)),t.type===hy.file&&(this.root=new fy(this.engine,this.doc,t)),Promise.resolve(this.root))))},e.getInitialNodePath=function(){return this.api.getPortfolioInitialNodePath(this.doc.getId()).then((t=>{if(!Array.isArray(t))return[];const e=t.map((t=>t.type===hy.folder?new dy(this.engine,this.doc,t):t.type===hy.file?new fy(this.engine,this.doc,t):void 0));return this.root=e[0],e}))},e.sendSortFolioParam=function(t,e){return this.api.sendSortFolioParam(this.doc.getId(),t,e).then((t=>{if(t)return!0}))},e.getFolioNodePDFDoc=function(){return this.api.getFolioNodePDFDoc(this.doc.getId()).then((t=>{let e=[];for(let n=0;n<=t.length-1;n++)e.push(new nw(t[n],this.engine,{}));return e}))},e.recordPDFFileByPortFolioNode=function(t){let e=this.doc,n=[];for(let e in t)n.push(t[e].handle);return this.api.recordPDFFileByPortFolioNode(e.getId(),n).then((t=>{let e=t.filter((t=>-1===t.indexOf("password")));if(0!==t.filter((t=>-1!==t.indexOf("password"))).length)return void(this.activedPDFNode=["password"]);let n=[];for(let t=0;t<=e.length-1;t++)n.push(new nw(e[t],this.engine,{}));this.activedPDFNode=n}))},e.getPDFFileByPortFolioNode=async function(t){let e=[];if(0==t.length)return[];for(let n=0;n<t.length;n++)("1"==t[n].type||"2"==t[n].type&&".pdf"===t[n].FileName.substr(-4).toLowerCase())&&e.push(t[n]);return 0==e.length?[]:(await this.recordPDFFileByPortFolioNode(e),this.activedPDFNode)},e.getActivedPDFFileByPortFolioNode=function(){return this.activedPDFNode},t}();var gy=(t,e)=>new Proxy(e,{doc:t,api:t.api,get(t,e){if("then"!==e)return(...n)=>e in t?t[e]:this.api.changeEditingProperty(this.doc.id,e,n)}});function my(){}my.prototype=nt;var vy=y(new my,{addTextMarkupSuccess:"add-text-markup-success",fullscreenchange:"fullscreenchange",appendCommentListGroup:"apppend-commentlist-group",destroyCommentListGroup:"destroy-commentlist-group",appendCommentListComment:"append-commentlist-comment",appendCommentListReply:"append-commentlist-reply",destroyCommentListComment:"destroy-commentlist-comment",destroyCommentListReply:"destroy-commentlist-reply",InkImageSelected:"ink-image-selected",applicationDestroyed:"uiextension-destroyed",addReplySuccess:"add-reply-success",deleteReplySuccess:"delete-reply-success",addActionSuccess:"add-action-success",addContentSuccess:"add-content-success",markRedactionSuccess:"mark-redaction-success",addReviewStateSuccess:"add-review-state-success",addMarkedStateSuccess:"add-marked-state-success",addonLoaded:"pdfui-init-process-addon-loaded",initializationCompleted:"pdfui-intialization-completed",commentGroupAnnotationsUpdated:"pdfui-comment-group-annotations-updated",bookmarkSelected:"bookmark-selected",stampSelectedChange:"stampSelectedChange",languageChange:"languageChange",ribbonLoadFinish:"ribbonLoadFinish",editPropertiesAction:"editPropertiesAction",loupeLocked:"loupeLocked",loupeScaleChange:"loupeScaleChange",loupeRedBoxMoved:"loupeRedBoxMoved",enterReadMode:"enterReadMode",exitReadMode:"exitReadMode",toggleStatusBar:"toggleStatusBar",statusBarChange:"statusBarChange",switchNavigationPanel:"switchNavigationPanel",toggleNavigationPanels:"toggleNavigationPanels",resetNavigationPanels:"resetNavigationPanels",toggleAutoScroll:"toggleAutoScroll",changePortfolioLayout:"changePortfolioLayout",compareFilterChange:"compare-filter-change",undoRedoStoreChange:"undo-redo-store-change"});let yy=function(){function t(t,e){this.json=e,this.api=t.api,this.doc=t}var e=t.prototype;return e.update=function(t,e,...n){return this.api.changePEProperty(this.doc.id,t,e,n).then((([t,e])=>Promise.all([this.doc.getPageByIndex(t),e]))).then((([t,e])=>(this.doc.engine.eventEmitter.emit(et.graphicsUpdated,t),this.api.handlePageEditorEvent(this.doc.id,"GetUndoManager",void 0,!1).then((t=>{this.doc.engine.eventEmitter.emit(vy.undoRedoStoreChange,t,"pageEditor",!1)})),e)))},e.getHeight=function(){return this.json.height},e.setHeight=function(t){return this.json.height=t,this.update("SetHeight",0,t)},e.setWidth=function(t){return this.json.height=t,this.update("SetWidth",0,t)},e.getWidth=function(){return this.json.width},e.getOpacity=function(){return this.json.opacity},e.setOpacity=function(t){return this.json.opacity=t,this.update("SetOpacity",0,t)},e.rotate=function(t){return this.update("Rotate",0,t)},e.flip=function(t){return this.update("Flip",0,t)},e.align=function(t){return this.update("Align",0,{type:"GraphicsObjectAlignmentType",value:t})},e.center=function(t){return this.update("Center",0,{type:"PageCenterAlignmentType",value:t})},e.changeRenderingOrder=function(t){return this.update("ChangeRenderingOrder",0,{type:"RenderingOrder",value:t})},e.canChangeRenderingOrder=function(t){return this.update("CanChangeRenderingOrder",0,{type:"RenderingOrder",value:t})},e.getXPosition=function(){return this.json.xPosition},e.setXPosition=function(t){return this.update("SetXPosition",0,t)},e.getYPosition=function(){return this.json.yPosition},e.setYPosition=function(t){return this.update("SetYPosition",0,t)},e.shear=function(t){return t=t*Math.PI/180,this.update("Shear",0,t)},e.move=function(t,e,n){return this.update("Move",0,{type:"EditorPage",value:t},{type:"PointF",value:e},n)},e.distribute=function(t){return this.update("Distribute",0,t)},e.size=function(t){return this.update("Size",0,t)},e.scale=function(t,e){return this.update("Scale",0,t,e)},e.clearClipPath=function(){return this.update("ClearClipPath",0)},e.editClipPath=function(){return this.update("EditClipPath",0)},e.addClipPath=function(t){return this.update("AddClipPath",0,{value:t})},e.cut=function(){return this.update("Cut",0)},e.copy=function(){return this.update("Copy",0)},e.delete=function(){return this.update("Delete",0)},e.getType=function(){return this.json.type},t}(),wy=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getFontName=function(){return this.json.fontName},n.setFont=function(t,e,n,i){return this.update("SetFont",1,t,e,n,i)},n.hasStroke=function(){const t=this.getTextMode();if(1==t||2==t)return!0},n.hasFill=function(){const t=this.getTextMode();return!(0!=t&&2!=t&&!this.json.count)},n.getFontSize=function(){return this.json.fontSize},n.getFillColor=function(){return this.json.fillColor},n.getStrokeColor=function(){return this.json.strokeColor},n.setFontSize=function(t){return this.json.fontSize=t,this.update("SetFontSize",1,t)},n.setColorSpace=function(t,e){this.json[t]=e},n.setFillColor=function(t,e=!1,n){return this.json.fillColor=t,void 0!==n&&(this.json.fillColor=n),this.update("SetFillColor",1,this.hasFill(),{type:"Color",value:t,space:this.json.fillColorSpace},e)},n.setStrokeColor=function(t,e=!1,n){return this.json.strokeColor=t,void 0!==n&&(this.json.strokeColor=n),this.update("SetStrokeColor",1,this.hasStroke(),{type:"Color",value:t,space:this.json.strokeColorSpace},e)},n.getHorizontalScale=function(){return this.json.horizontalScale},n.getCharSpace=function(){return this.json.charSpace},n.getWordSpace=function(){return this.json.wordSpace},n.canRemoveTextKerning=function(){return this.json.canRemoveTextKerning},n.canMergeText=function(){return this.json.canMergeText},n.canSplitText=function(){return this.json.canSplitText},n.canText2Path=function(){return this.json.canText2Path},n.isWordSpaceValid=function(){return this.json.isWordSpaceValid},n.getFontIsBold=function(){return this.json.fontIsBold},n.getFontIsItalic=function(){return this.json.fontIsItalic},n.setHorizontalScale=function(t){return this.json.horizontalScale=t,this.update("SetHorizontalScale",1,t)},n.setCharSpace=function(t){return this.json.charSpace=t,this.update("SetCharSpace",1,t)},n.setWordSpace=function(t){return this.json.wordSpace=t,this.update("SetWordSpace",1,t)},n.getTextMode=function(){return this.json.textMode},n.setTextMode=function(t){return this.json.textMode=t,this.update("SetTextMode",1,t)},n.removeTextKerning=function(){return this.update("RemoveTextKerning",1)},n.mergeText=function(){return this.update("MergeText",1)},n.splitText=function(t){return this.update("SplitText",1,{type:"Int32Array",value:t})},e}(yy),by=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getLineWidth=function(){return this.json.lineWidth},n.setLineWidth=function(t){return this.json.lineWidth=t,this.update("SetLineWidth",2,t)},n.getMiterLimit=function(){return this.json.miterLimit},n.setMiterLimit=function(t){return this.json.miterLimit=t,this.update("SetMiterLimit",2,t)},n.getLineCap=function(){return this.json.lineCap},n.setLineCap=function(t){return this.json.lineCap=t,this.update("SetLineCap",2,{type:"LineCap",value:t})},n.getLineJoin=function(){return this.json.lineJoin},n.setLineJoin=function(t){return this.json.lineJoin=t,this.update("SetLineJoin",2,{type:"LineJoin",value:t})},n.getLineStyle=function(){return this.json.lineStyle},n.setLineStyle=function(t){return this.json.lineStyle=t,this.update("SetLineStyle",2,{type:"FloatArray",value:t})},n.getFillColor=function(){return this.json.fillColor},n.setFillColor=function(t,e=!1,n,i=!0){return"string"==typeof t&&(t="transparent"==t?0:parseInt(t.replace("#",""),16)),0==t&&1!=this.json.fillColorSpace&&(i=!1),this.json.fillColor=t,void 0!==n&&(this.json.fillColor=n),this.update("SetFillColor",2,i,{type:"Color",value:t,space:this.json.fillColorSpace},e)},n.setColorSpace=function(t,e){this.json[t]=e},n.getStrokeColor=function(){return this.json.strokeColor},n.setStrokeColor=function(t,e,n,i=!0){return this.json.strokeColor=t,void 0!==n&&(this.json.strokeColor=n),this.update("SetStrokeColor",2,i,{type:"Color",value:t,space:this.json.strokeColorSpace},e)},e}(yy),Ay=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.changeShadingColor=function(t){return this.update("ChangeShadingColor",4,t)},n.changeColorUndoStart=function(){return this.update("ChangeColorUndoStart",4)},n.changeColorUndoEnd=function(){return this.update("ChangeColorUndoEnd",4)},n.changeColorUndoCancel=function(){return this.update("ChangeColorUndoCancel",4)},n.editReferenceLine=function(){return this.update("EditReferenceLine",4)},n.setGridientCursorColor=function(t){return this.update("SetGridientCursorColor",4,t)},n.getGridientCursorColor=function(){return this.update("GetGridientCursorColor",4)},n.getGridientColorAt=function(t){return this.update("GetGridientColorAt",4,t)},n.getGridientCursorLocation=function(){return this.update("GetGridientCursorLocation",4)},n.getGridientCursorIndex=function(){return this.update("GetGridientCursorIndex",4)},n.setGradientColorShowRect=function(t){return this.update("SetGradientColorShowRect",4,{type:"RectF",value:t})},n.addGradientCursorInfoBefore=function(t){return this.update("AddGradientCursorInfoBefore",4,{type:"RectF",value:t})},n.addGradientCursorInfoExcute=function(t){return this.update("AddGradientCursorInfoExcute",4,{type:"RectF",value:t})},n.addGradientCursorInfoEnd=function(){return this.update("AddGradientCursorInfoEnd",4)},n.addGradientCursorInfoDblClk=function(t){return this.update("AddGradientCursorInfoDblClk",4,{type:"RectF",value:t})},n.delGradientCursorInfo=function(){return this.update("DelGradientCursorInfo",4)},n.defaultGradientDataInit=function(){return this.update("DefaultGradientDataInit",4)},n.setGradientCurrentInfo=function(t){return this.update("SetGradientCurrentInfo",4,{type:"ShadingColorArray",value:t})},n.getGradientColor=function(){return this.update("GetGradientColor",4)},n.renderGridient=function(t,e){return this.update("RenderGridient",4,t,e)},e}(yy);let Py=function(){function t(t){this.filter=1,this.doc=t,t.api.registerWorkflow("out",this.workflow=t=>{let e=this.notifier[t.type];e&&e(t.msg)}),t.addDestroyHook((t=>{this.doc.api.unregisterWorkflow("out",this.workflow),this.destroy()}))}var e=t.prototype;return e.createText=function(){return this.postOperation("CreateText")},e.createPath=function(t){return this.postOperation("CreatePath",{type:"DrawType",value:t})},e.createImage=function(t){return this.postOperation("CreateImage",{type:"Image",value:t}).then((t=>(this.postOperation("GetUndoManager",!1,!1).then((t=>{this.doc.engine.eventEmitter.emit(vy.undoRedoStoreChange,t,"pageEditor",!1)})),t))).then((t=>"number"==typeof t?this.doc.getPageByIndex(t).then((t=>(this.doc.engine.eventEmitter.emit(et.graphicsUpdated,t),!0))):t))},e.createShading=function(t){return this.postOperation("CreateShading",{type:"DrawType",value:t})},e.setObjectFilter=function(t){return this.filter=t,this.postOperation("SetGraphicsObjectFilter",{type:"GraphicsObjectFilter",value:t})},e.text2Path=function(){return this.postOperation("Text2Path")},e.endEdit=function(){return this.postOperation("EndEdit")},e.startEdit=function(){return this.postOperation("StartEdit")},e.setNotifier=function(t){this.notifier=t},e.getActiveObject=function(){return this.postOperation("GetGraphicsObjectUtils").then((t=>((t,e)=>{switch(e.type){case 1:return new wy(t,e);case 2:return new by(t,e);case 3:case 5:return new yy(t,e);case 4:return new Ay(t,e)}})(this.doc,t)))},e.getSelection=function(){return this.postOperation("GetSelection")},e.hasSelection=function(){return this.postOperation("HasSelection")},e.getEditingObject=function(){return this.postOperation("GetGraphicsObjectEditor").then((t=>t&&void 0!==t.type?t:void 0))},e.createEditingObjectProxy=function(t){return gy(this.doc,t)},e.triggerPopMenuAction=function(t){let e=this.doc,n=e.id;return e.api.triggerPopMenuAction(n,t)},e.postOperation=function(t,...e){var n;let i=this.doc,r=i.id;return(n=i.api).handlePageEditorEvent.apply(n,[r,t,void 0].concat(e))},e.destroy=function(){["doc","workflow","notifier"].forEach((t=>this[t]=null))},e.copy=function(){return this.postOperation("Copy")},e.canPaste=function(){return this.postOperation("CanPaste")},e.paste=function(...t){return this.postOperation.apply(this,["Paste"].concat(t)).then((t=>this.doc.getPageByIndex(t))).then((t=>{this.doc.engine.eventEmitter.emit(et.graphicsUpdated,t)}))},e.undoRedo=function(t,e){return this.postOperation("Undo",t,e).then((()=>{this.postOperation("GetUndoManager",t,e).then((e=>{this.doc.engine.eventEmitter.emit(vy.undoRedoStoreChange,e,"pageEditor",t)}))}))},e.getDefaultProperty=function(t){return this.postOperation("getDefaultProperty",t)},t}(),Sy=function(){function t(t,e){this.engine=t,this.api=t.api,this.docId=e.id,this.pdfDoc=e}var e=t.prototype;return e.destroy=function(){this.engine=null,this.api=null,this.docId=null,this.pdfDoc=null},e.getArticleList=function(){return this.articleList&&this.articleList.length>0?Promise.resolve(this.articleList):this.api.getArticleList(this.docId).then((t=>this.articleList=t))},e.getThread=function(t){return this.getArticleList().then((e=>{for(let n=0;n<e.length;n++){const i=e[n];if(i.objNum===t)return i}}))},e.getBead=function(t,e){return this.getThread(t).then((t=>{const n=t.children||[];for(let t=0;t<n.length;t++){const i=n[t];if(i.objNum===e)return i}}))},e.updateBeadRect=function(t,e,n){return this.api.updateBeadRect(this.docId,t,e,n)},e.insertThread=function(t){const{title:e="",subject:n="",author:i="",keywords:r=""}=t||{};return this.api.insertThread(this.docId,{title:e,subject:n,author:i,keywords:r}).then((t=>(t&&(this.articleList.push(t),this.engine.eventEmitter.emit(et.articleThreadAdded,t)),t)))},e.updateThread=function(t){const{objNum:e,title:n,subject:i,author:r,keywords:o}=t||{};return this.getThread(e).then((t=>this.api.updateThread(this.docId,{objNum:e,title:n,subject:i,author:r,keywords:o}).then((e=>(e&&(y(t,e),this.engine.eventEmitter.emit(et.articleThreadUpdated,e)),e)))))},e.removeThread=function(t){return this.getThread(t).then((e=>this.api.removeThread(this.docId,t).then((t=>(t&&(this.articleList="",this.engine.eventEmitter.emit(et.articleThreadRemoved,e)),t)))))},e.insertBead=function(t,e,n,i){return this.getThread(n).then((r=>this.api.insertBead(this.docId,t,n,e,i).then((t=>(t&&(r.children||(r.children=[]),void 0===i?(r.children.push(t),this.engine.eventEmitter.emit(et.articleBeadAdded,r,[t])):(this.articleList="",this.getThread(n).then((t=>{this.engine.eventEmitter.emit(et.articleBeadAdded,t,t.children)})))),{thread:r,bead:t})))))},e.removeBead=function(t,e){return this.getThread(t).then((n=>this.api.removeBead(this.docId,t,e).then((i=>(i&&(this.engine.eventEmitter.emit(et.articleBeadRemoved,[e]),1===n.children.length?this.removeThread(t):(this.articleList="",this.getThread(t).then((t=>{this.engine.eventEmitter.emit(et.articleBeadUpdated,t,t.children)})))),i)))))},e.mergeThread=function(t,e){return this.getThread(e).then((n=>this.api.mergeThread(this.docId,t,e).then((e=>(e&&(n.children=e.children,this.engine.eventEmitter.emit(et.articleThreadUpdated,e),this.removeThread(t)),e)))))},t}();var Cy=Sy;const Ey="progress";let xy=function(){function t(t){this.store=new _.Store,this.cancelCallback=t}var e=t.prototype;return e.cancel=function(){this.cancelCallback()},e.onProgress=function(t){return this.store.subscribe(Ey,(e=>{t.call(this,e)}))},e.updateProgress=function(t){this.store.dispatch(Ey,t)},e.getCurrentProgress=function(){let t=this.store.getCurrentValue(Ey);return t?t.percent:0},t}();var Dy;function Iy(t,e){const n=e.getCurrentPageLabelInfo(0).then((t=>!0===t.hasLabel));t.hasPageLabel=n,t.hasPageLabel.then((()=>{t.hasPageLabelStatus=Dy.DONE})),t.hasPageLabelStatus=Dy.PENDING}function Ry(t,e){t.hasPageLabelStatus===Dy.DONE&&Iy(t,e)}!function(t){t.UNINITIALIZED="uninitialized",t.PENDING="pending",t.DONE="done"}(Dy||(Dy={}));function Ty(t){if(!t)return!1;switch(t.type){case"aplication/json":case"text/json":return!0}return!("string"!=typeof t.name||!t.name.endsWith(".json"))}function Fy(t){return!!t&&("application/vnd.fdf"===t.type||"string"==typeof t.name&&t.name.endsWith(".fdf"))}function _y(t){if(!t)return!1;switch(t.type){case"application/vnd.xfdf":case"application/vnd.adobe.xfdf":return!0}return"string"==typeof t.name&&t.name.endsWith(".xfdf")}function ky(t){let e;return e=t>=1073741824?`${Math.floor(t/1073741824)} G`:t>=1048576?`${Math.floor(t/1048576)} M`:t>=1024?`${Math.floor(t/1024)} KB`:`${t} B`,e}function My(t,e="YYYY/MM/DD HH:mm:ss"){if(!t)return"";let n="";return t.lastModified?n=ut(new Date(t.lastModified),e,""):t.lastModifiedDate&&(n=ut(t.lastModifiedDate,e,"")),n}const Oy=t=>new Promise((e=>{var n=null;const[i,r,o,s]=[255,255,255,255];var a,c,l,h;const u=document.createElement("canvas"),d=u.getContext("2d",{willReadFrequently:!0}),f=new Image;f.onload=()=>{const t=f.width,p=f.height;u.width=t,u.height=p,d.drawImage(f,0,0),n=d.getImageData(0,0,t,p);for(let t=0;t<n.data.length;t+=4){a=n.data[t],c=n.data[t+1],l=n.data[t+2],h=n.data[t+3];Math.sqrt((a-i)**2+(c-r)**2+(l-o)**2+(h-s)**2)<=60&&(n.data[t]=0,n.data[t+1]=0,n.data[t+2]=0,n.data[t+3]=0)}d.putImageData(n,0,0),e(u.toDataURL("image/png"))},f.src=t}));function Ly(t,e="image/png"){let n="";const i=new Uint8Array(t),r=i.byteLength;for(let t=0;t<r;t++)n+=String.fromCharCode(i[t]);return`data:${e};base64,${window.btoa(n)}`}function Ny(t){/^data\:.*?base64,/.test(t)&&(t=t.replace(/^data\:.*?base64,/,""));let e=window.atob(t),n=e.length,i=new Uint8Array(n);for(;n--;)i[n]=e.charCodeAt(n);return i}function By(t){return t<0||isNaN(t)}function Vy(){throw new Error("Param error: Index is out of the valid range.")}function Uy(t,e,n="get"){if(!Array.isArray(t))throw new Error("Param error. Only array is available.");if(0===t.length)throw new Error("Param error. Non-valid array.");if(t.forEach((t=>{if(!Array.isArray(t))throw new Error("Param error. Only array is available.");if(1!==t.length&&2!==t.length)throw new Error("Param error. Non-valid array.");1===t.length?By(t[0])&&Vy():2===t.length&&(By(t[0])||By(t[1]))&&Vy()})),"insert"===n){const n=so(t).sort(((t,e)=>t-e));let i=e+n.length;t.forEach((t=>{t.some((t=>t>i))&&Vy()}))}else if("remove"===n){const n=e-1;t.forEach((t=>{t.some((t=>t>n))&&Vy()}))}else t.forEach((t=>{t.some((t=>t>=e))&&Vy()}))}function Hy(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}const jy=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];let $y=function(t){function e(e,n,i={}){var r;(r=t.call(this)||this).id=e,r.engine=n,r.parameters=i,r.api=n.api,r.pageCache=[],r.pagePromiseCache=[],r.info={fileName:i.fileName,pageSizes:{},XFARemoved:!1},r.pdfaEditable=!1,r.visibleTemplates=[],r.invisibleTemplates=[],r.metadata={FileName:i.fileName},r.docModified=!1;let o=[];for(let t in et)switch(t){case"layerVisibleChange":case"layerVisibleChanged":case"drmEncryptFailed":case"docModified":case"annotationLoaded":case"annotLoaded":case"obtainsPageFromEngine":case"permissionChanged":case"formReloaded":break;default:o.push(et[t])}let s=()=>{r.engine.eventEmitter.emit(et.docModified,(0,C.Z)(r)),r.docModified=!0};r.docModifiedHandler=s;let a=we(100,s);return o.map((t=>{r.engine.eventEmitter.on(t,a)})),r.engine.eventEmitter.on(nt.willCloseDocument,r.willCloseDocument=()=>{o.map((t=>{r.engine.eventEmitter.removeListener(t,a)}))}),r.permissionFactory={},r.pageIdMap={},r.docTextSearchIdMap={},r.spawnPageExecutor=new _.QueuedAsyncTaskExecutor,r._pageLabelInfo={hasPageLabelStatus:Dy.UNINITIALIZED,hasPageLabel:Promise.resolve(!1)},r.otherOptions={renderConfigLineWeight:!1,afterHiddenDataOperateAndReopenFile:!1,isOpenNewFileAfterClose:!1},r.selectedInfo=null,r}(0,E.Z)(e,t);var n=e.prototype;return n.checkNoAdditionPerm=function(t){return void 0!==this.permissionFactory.additional&&!(this.permissionFactory.additional(this)&t)},n.checkPermission=function(t){let e=void 0!==this.permissionFactory.standard?this.permissionFactory.standard(this):-1;return this.getPermissionsSync()&e&t},n.isOwner=function(){return this.info.isOwner},n.isDocModified=function(){return this.docModified},n.setDocModified=function(){this.docModifiedHandler()},n.getId=function(){return this.id},n.getNameTreeIcons=function(){return this.info.icons},n.getFileName=function(){return this.info.fileName},n.createCertificateFile=function(t){return this.api.createCertificateFile(this.id,t)},n.getCertificateSerials=function(){return this.api.getCertificateSerials(this.id)},n.parseByCertificate=function(t,e={}){return this.api.parseByCertificate(this.id,t).then((t=>this.afterParseHandler(t)))},n.parseByPassword=function(t,e={}){let n={};if(e.encryptPassword&&(n.encryptPassword=e.encryptPassword),e.annotsJson){let t=ce.JSONToFDF(e.annotsJson);n.fdf={file:t}}return e.fdf&&(n.fdf=e.fdf),e.drm&&(n.drm=e.drm),e.fileOpen&&(n.fileOpen=e.fileOpen),e.idJWT&&(n.idJWT=e.idJWT),e.webPluginSecurity&&e.webPluginSecurity instanceof Array&&e.webPluginSecurity.length>0&&(n.webPluginSecurity=e.webPluginSecurity||[]),e.cdrm&&(n.cdrm=e.cdrm),this.api.parsePDFDocByPassword(this.id,t,n).then((t=>this.afterParseHandler(t)))},n.parse=function(t={}){return t.certificateInfo?this.parseByCertificate(t.certificateInfo,t):this.parseByPassword(t.password,t)},n.afterParseHandler=function(t){const{code:e,info:n}=t;return 0!==e?Promise.reject(t):(this.info=y(this.info,n),this.pageCache=new Array(this.info.pageCount),this.info.action&&(this.action=this.engine.actionFactory.createAction(this.info.action,this,this.api,this.engine.eventEmitter,this)),this)},n.getJsNameTree=function(){return this.info.jsNameTree},n.getMetadata=function(){return this.api.getMetadata(this.id).then((t=>this.metadata=y(this.metadata,t))).catch((()=>this.metadata))},n.getMetadataValue=function(t){return this.metadata[t]},n.flatten=function(t){if(!(this.checkPermission(pe.annotForm)&&this.checkPermission(pe.modify)&&this.checkPermission(pe.assemble)))throw new Error("Permission error");let e=[],n=this.getPageCount();for(let i=0;i<n;i++){let n=this.getPageByIndex(i).then((e=>e.flatten(t)));e.push(n)}return Promise.all(e)},n.setMetadataValue=function(t,e){if(!this.checkPermission(pe.modify))throw new Error("Permission error");let n=Promise.resolve();return this.metadata.custom&&this.metadata.custom.hasOwnProperty(t)&&(n=this.api.removeMetadata(this.id,t).then((()=>{delete this.metadata.custom[t]}))),n.then((()=>{this.api.setMetadataValue(this.id,t,e).then((t=>this.getMetadata())).then((()=>(this.engine.eventEmitter.emit(et.metaDataChanged,this),this)))}))},n.reloadPDFForm=function(){let t,e=Promise.resolve();return this.PDFForm&&(t=this.PDFForm.actionHandler,e=this.PDFForm.destroy(),this.PDFForm=null),e.then((()=>this.loadPDFForm().then((e=>{for(const t of this.pageCache)t&&t.resetWidgetsControl();return t&&e.setActionHandler(t),this.engine.eventEmitter.emit(et.formReloaded,this),e}))))},n.loadPDFForm=function(){let t=this.PDFForm;return t&&!this.emptyForm?Promise.resolve(t):(t&&t.destroy(),t=this.PDFForm=new Qv(this,this.engine),this.api.loadForm(this.id).then((e=>(this.emptyForm=!1,t.setFormJson(e),t.setState("jsInited"),t))))},n.loadEmptyPDFForm=function(){let t=this.PDFForm;return this.emptyForm=!0,t||(t=this.PDFForm=new Qv(this,this.engine)),Promise.resolve(t)},n.getPDFForm=function(){return this.PDFForm},n.getPageCount=function(){return this.info.pageCount},n.getPageCountAsync=function(){return this.info.pageCount||this.api.getPageCountAsync(this.id)},n.getFileVersion=function(){return this.api.getFileVersion(this.id).then((t=>(void 0!==t?t:14)/10))},n.isLinearized=function(){return this.api.isLinearized(this.id)},n.hasForm=function(){return this.api.hasForm(this.id)},n.setCustomPermission=function(t,e){this.permissionFactory[t]=e},n.getPermission=function(){return this.getPermissions()},n.getPermissions=function(){return this.getPermissionsSync()},n.getPermissionsSync=function(){if(this.permissionFactory.replaceStandard)return this.info.userPermissions=this.permissionFactory.replaceStandard(this),this.info.userPermissions;if(this.info.isOwner)return 4294967292;let t=-1;return(this.info.sigPerms||[]).forEach((e=>t&=e)),(t&this.info.userPermissions)>>>0},n.hasSignature=function(){return(this.info.sigPerms||[]).length},n.getStdCipherOptions=function(){return this.api.getStdCipherOptions(this.id)},n.getPDFDocInfo=function(){return this.api.getPDFDocInfoById(this.id)},n.getBookmarksJson=function(){return this.api.getBookmarks(this.id)},n.getBlankPageIndexes=function(){return this.api.getBlankPageIndexes(this.id)},n.getCurFileSymbolId=function(){return this.api.getCurFileSymbolId(this.id)},n.getFadeOutBackground=function(t){return this.api.getFadeOutBackground(this.id,t)},n.getConvertToMono=function(t){return this.api.getConvertToMono(this.id,t)},n.convertImageToBlackWhite=async function(t){let e=Ly((await this.getConvertToMono(t))[0]);return Oy(e)},n.getRootBookmark=function(t=!1){if(!t&&this.bookmarkRoot)return Promise.resolve(this.bookmarkRoot);let e=this.engine;return this.getBookmarksJson().then((t=>t?this.bookmarkRoot=new cy(e,this,t):null))},n.updateRootBookmark=function(){return this.bookmarkRoot?this.getBookmarksJson().then((t=>{t&&this.bookmarkRoot.updateBookmark(t)})):Promise.resolve()},n.createRootBookmark=function(){if(!this.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");let t=this.engine;return this.api.createRootBookmark(this.id).then((e=>this.bookmarkRoot=new cy(t,this,e)))},n.getLayerNodesJson=function(){return this.isDestroyed?Promise.resolve():this.ocgs?Promise.resolve(this.ocgs):this.api.getLayerNodes(this.id).then((t=>this.ocgs=t))},n.getRootLayerNodeChildrenCount=function(){return this.isDestroyed?Promise.resolve(0):this.api.getRootLayerNodeChildrenCount(this.id)},n.setLayerNodeVisible=function(t,e){let n=this.getLayerNodeById(t);return n.visible===e?Promise.resolve(!0):(n.visible=e,this.api.setLayerNodeVisiable(this.id,t,e).then((t=>(t&&this.engine.eventEmitter.emit(et.layerVisibleChange,this),t))))},n.setLayerNodeVisiable=function(t,e){return this.setLayerNodeVisible(t,e)},n.getPageByIndex=function(t){let e,n=this.pageCache;if(e=n[t])return Promise.resolve(e);let i=this.pagePromiseCache;return i[t]=i[t]||this.api.getPageInfoByIndex(this.id,t).then((e=>{let r=n[t]=new jv(e,this);return this.engine.eventEmitter.emit(et.obtainsPageFromEngine,r),delete i[t],r}))},n.getPageById=function(t){return this.pageIdMap[t]||null},n.getCurrentDocTextSearch=function(){const t=Object.keys(this.docTextSearchIdMap);return this.docTextSearchIdMap[t[t.length-1]]||null},n.getDocTextSearchById=function(t){return this.docTextSearchIdMap[t]||null},n.destroy=function(){let e;(e=this.PDFForm)&&e.destroy(),this.PDFForm=null,this.pageIdMap={},this.docTextSearchIdMap={};let n=this.pageCache;for(let t=0,e=n.length;t<e;t++){let e=n[t];e&&e.destroy(),n[t]=null}let i=this.HF;return i&&i.destroy(),this.HF=null,this.bookmarkRoot&&this.bookmarkRoot.destroy(),this.bookmarkRoot=null,this.permissionFactory={},this.engine.eventEmitter.off(nt.willCloseDocument,this.willCloseDocument),this.willCloseDocument=null,this.pdfPortfolio=null,t.prototype.destroy.call(this),this.api.destroyDoc(this.getId())},n.releasePage=function(t){this.api.destroyPage(this.id,t)},n.getDocBuffer=function(t,e=!0){let n=this.hasSignature()?1:0;e&&t.activeElement(null);const i=[];return Promise.resolve((t._saveBefore||function(){})()).then((()=>this.getStream((({arrayBuffer:t})=>{i.push(t)}),n,e).then((()=>i))))},n.getStream=function(t,e=0,n){if(this.checkNoAdditionPerm(1))throw new Error("Permission error, download disabled");return this.PDFForm?this.PDFForm.addTask().then((()=>this.api.getPDFDocStream(this.id,t,e,n))):this.api.getPDFDocStream(this.id,t,e,n)},n.getFile=function({flags:t=0,fileName:e=this.getFileName()}={flags:0,fileName:this.getFileName()}){if(this.checkNoAdditionPerm(ft.download))throw new Error("Permission denied! Missing additional download permission.");const n=[];let i,r=0;const o=({blob:t,arrayBuffer:e,offset:o,size:s})=>{e?(n.push({arrayBuffer:e,offset:o}),r=Math.max(o+s,r)):i=t},s=()=>this.api.getPDFDocStream(this.id,o,t).then((()=>{if(i)return[i];{const t=new Uint8Array(r);return n.forEach((({arrayBuffer:e,offset:n})=>{t.set(new Uint8Array(e),n)})),t}})).then((t=>{try{return new File([t],e,{type:"application/pdf"})}catch(n){t.name=e;const i=new Date;return t.lastModified=i.getTime(),t.lastModifiedDate=i,t.webkitRelativePath="",t}}));return this.PDFForm?this.PDFForm.addTask().then((()=>s())):s()},n.exportAnnotsToFDF=function(t=0,e=null){if(0!==t&&1!==t)throw new Error("File type error, only 0 or 1 available, current is "+t);let n=arguments[2],i={};if(e){e.forEach((t=>{let e;i[t.page.getId()]||(i[t.page.getId()]=new Set),e=i[t.page.getId()],Ky(t,e,n)}));for(let t in i)i[t]=Array.from(i[t])}return this.api.exportToFDF(this.id,t,2,i)},n.exportFormToFile=function(t=0){if((t|4-t)<0)throw new Error("File type error.");let e=Promise.resolve();return this.PDFForm||(e=this.loadPDFForm()),e.then((e=>{switch(t){case 0:return this.api.exportToFDF(this.id,0,1);case 1:let t=this.PDFForm.exportXFDF(),e=new Blob([t],{type:"application/vnd.adobe.xfdf"});return Promise.resolve(e);case 2:let n=this.PDFForm.exportXML(),i=new Blob([n],{type:"application/xml"});return Promise.resolve(i);case 3:let r="",o=this.info.fileName;this.PDFForm.enumFieldsEx([],0,((t,e,n)=>{-1!=e.indexOf(",")&&(e=`"${e}"`),r+=","+e,-1!=n.indexOf('"')&&(n=`"${n.replace(/\"/g,'""')}"`),o+=","+n}));let s="\ufeff"+r+"\r\n"+o;return Promise.resolve(new Blob([s],{type:"text/csv,charset=UTF-8"}));case 4:{let t=" ",e=" ";return this.PDFForm.enumFieldsEx([],0,((n,i,r)=>{t+="\t"+i,e+="\t"+r})),Promise.resolve(new Blob([t+"\r\n"+e],{type:"application/xml"}))}}}))},n.exportToFDF=function(t,e){return this.api.exportToFDF(this.id,t,2).then((t=>new Uint8Array(t)))},n.exportDataToFDF=function(t=0,e=3){if(0!==t&&1!==t)throw new Error("File type error, only 0 or 1 available, current is "+t);return this.api.exportToFDF(this.id,t,e)},n.exportToStardardXml=function(t,e){return this.api.exportToStardardXml(this.id,t,e)},n.exportToImage=function(t,e,n,i){return this.api.exportToImage(this.id,t,e,n,i)},n.exportToTxt=function(t,e,n){return this.api.exportToTxt(this.id,t,e,n)},n.exportImageObjectToImage=function(t,e,n,i){return this.api.exportImageObjectToImage(this.id,t,e,n,i)},n.cancelExport=function(){return this.api.cancelExport(this.id)},n.importAnnotsFromFDF=function(t,e=!0){if(!this.checkPermission(pe.annotForm))throw new Error("Permission error");return this.api.importFromFDF(this.id,t,2).then((()=>{let t=this.pageCache,e=[];for(let n=0,i=t.length;n<i;n++){let i=t[n];i&&e.push(i.getUnloadedAnnots().then((t=>({page:i,newAnnots:t}))))}return Promise.all(e)})).then((t=>{this.engine.eventEmitter.emit(et.annotationImported,this,t),!e&&this.engine.eventEmitter.emit(et.annotationImportedEx,this,t)}))},n.importFormFromFile=function(t,e,n="UTF-8"){if(!this.checkPermission(pe.annotForm+pe.fillForm))throw new Error("Permission error");let i=Promise.resolve();this.PDFForm||(i=this.loadPDFForm());let r=2===e;return 3===e||4==e?i=i.then((i=>new Promise(((i,r)=>{t instanceof ArrayBuffer&&(t=new Blob([t]));var o=new FileReader;o.onloadend=()=>{let n,r=",";switch(e){case 3:break;case 4:r="\t";break;default:throw new Error("Unsupported file type")}let[s,a]=o.result.split("\r\n");n=Gy(s,a,r,'"'),t=function(t){let e="";for(let n in t)""!=n&&(e+=`<field name="${oy(n)}"><value>${ry(t[n])}</value></field>`);return new Blob([ny+e+iy],{type:"application/vnd.xfdf"})}(n),i()},o.readAsText(t,n)})))):r?t instanceof Blob?i=new Promise(((e,n)=>{let i=new FileReader;i.readAsText(t),i.onload=function(n){let i=n.target.result;t=sy(i),e()}})):t instanceof ArrayBuffer&&(i=new Promise(((e,n)=>{var i=new Blob([t]);let r=new FileReader;r.readAsText(i),r.onload=function(n){let i=n.target.result;t=sy(i),e()}}))):i=Promise.resolve(),i.then((()=>{let e=this.PDFForm;return this.api.importFromFDF(this.id,t,1).then((t=>this.api.getFieldsValue(this.id))).then((t=>(e.upadateValue(t),t))).then((t=>{this.engine.eventEmitter.emit(et.docModified,this);for(let n in t){let i=e.getField(n);if(!i||6!==i.getType())continue;let r,o=i.getLoadedWidgets(),s=Er.FieldValueChanged;r=o.length?o[0].getAdditionalAction(s):i.getAction(s),t[n].length>0&&r&&e.actionHandler&&e.actionHandler(r,null,i,s)}e.calculate(null)}))}))},n.importFromFDFFile=function(t,e=2){if(1===e)return this.PDFForm.importFDF();let n=t,i=!1;if(t instanceof Uint8Array&&t.length>52428800){let e=new Blob([t],{type:"arraybuffer"});n=URL.createObjectURL(e),i=!0}return this.api.importFromFDFFile(this.id,n,-1,e).then((t=>{let e=this.pageCache,n=[];for(let t=0,i=e.length;t<i;t++){let i=e[t];i&&n.push(i.getUnloadedAnnots().then((t=>({page:i,newAnnots:t}))))}return Promise.all(n)})).then((t=>{i&&URL.revokeObjectURL(n);let r=et.annotationImported;1==e&&(r=et.annotationImported),this.engine.eventEmitter.emit(r,this,t)}),(t=>{console.error("some error happened. Please check fdf file exists.",t)}))},n.exportAnnotsToJSON=function(t){let e=Promise.resolve();if(t&&0!=t.length){let n={},i=t.map(((t,e)=>{let i=t.exportToJSON();return"stamp"!=i.type&&"fileattachment"!=i.type||(n[e]={page:i.page,index:t.getId()}),i}));e=Promise.all([i,this.getAnnotsRawData(n)])}else e=this.getAnnots().then((t=>{let e={},n=[];for(let i=0,r=t.length;i<r;i++){let r=t[i];for(let t=0,o=r.length;t<o;t++){let o=r[t].getType();if("widget"!=o&&"popup"!=o&&"watermark"!=o){let o=r[t].exportToJSON();n.push(o),"stamp"!=o.type&&"fileattachment"!=o.type||(e[n.length-1]={page:i,index:r[t].getId()})}}}return Promise.all([n,this.getAnnotsRawData(e)])}));return e.then((([t,e])=>(e.forEach((e=>t[e.index].raw=e.raw)),t)))},n.getAnnotsRawData=function(t){return t.length>0?[]:this.api.getAnnotsRawData(this.id,t)},n.importAnnotsFromJSON=function(t){if(!this.checkPermission(pe.annotForm))throw new Error("Permission error");let e=ce.JSONToFDF(t);return this.importAnnotsFromFDF(e)},n.getPageAnnots=function(t){return qy(t,this.getPageCount()),this.getPageByIndex(t).then((t=>t.getAnnots()))},n.getPageAnnotsIdList=function(t){return qy(t,this.getPageCount()),this.getPageByIndex(t).then((t=>Object.keys(t.annotIdMap).map((t=>+t))))},n.hasAnnots=function(t){return this.api.hasAnnots(this.id,t)},n.getAllPageAnnotCount=function(){return this.api.getAllPageAnnotCount(this.id)},n.getAllAnnotsData=async function(){return this.api.getAllAnnotsData(this.id)},n.getAnnots=async function(){const t=await this.getAllPageAnnotCount();return Promise.all(Array(this.getPageCount()).fill(null).map(((e,n)=>t[n]?this.getPageAnnots(n):[])))},n.addAnnots=function(t){t=t.map((t=>{const e=t.page;if(void 0===e)throw"page is required.";t.type&&(t=Bv(t,this.engine.getUserCommentConfig()));const n=this.engine.getDefaultAnnotConfig()(t.type,t.intent);return t.groupElements&&(t.groupElements=t.groupElements.map((t=>{t=Bv(t,this.engine.getUserCommentConfig());const e=this.engine.getDefaultAnnotConfig()(t.type,t.intent);return(0,_.extendOptions)({},e,t)}))),(0,_.extendOptions)({page:e},n,t)}));const e=this.getId();let n=0,i="addAnnots",{progressChanged:r}=nt;const o=t.filter((t=>!!t.states&&t.states.length>0)).map((t=>t.name));return this.api.addAnnots(e,t,(t=>{n=t,this.engine.eventEmitter.emit(r,i,Number(n.toFixed(2)),Zm.PROGRESSING)})).then((t=>{let e=(100-n)/(t.length+1);return Promise.all(t.map((t=>this.getPageByIndex(t.page).then((s=>s.getUnloadedAnnots().then((e=>s.getAnnotsByIdArray(o).then((t=>t.flatMap((t=>t.getMarkedStates())).reduce(((t,e)=>(t[e.objectNumber]=e,t)),{}))).then((e=>{const n=s.annotIdMap;return t.annots.map((t=>n[t]||e[t]))})))).then((t=>{n+=e;let o=[];const a=s.annotIdMap;let c=this.engine.eventEmitter;for(let e=0,n=t.length;e<n;e++){let n=t[e];n.getType()===ti.text?n.isStateAnnot()?(o.length&&(c.emit(et.annotationAdd,o,s),o=[]),c.emit(1===n.info.stateMode?et.annotationMarkedStateAnnotAdded:et.annotationReviewStateAnnotAdded,n,a[n.info.IRT]),c.emit(et.annotationUpdated,[n],s,ge.replyAdded)):n.isReplyAnnot()?(o.length&&(c.emit(et.annotationAdd,o,s),o=[]),c.emit(et.annotationReplyAdded,n,a[n.info.IRT]),c.emit(et.annotationUpdated,[n],s,ge.markedStateUpdated)):o.push(n):o.push(n)}return o.length&&c.emit(et.annotationAdd,o,s),c.emit(r,i,Number(n.toFixed(2)),Zm.PROGRESSING),t})))))))})).then((t=>{this.engine.eventEmitter.emit(r,i,100,Zm.SUCCESS);let e=[];return t.forEach((function(t){e=e.concat(t)})),e})).catch((t=>{throw this.engine.eventEmitter.emit(r,i,Number(n.toFixed(2)),Zm.FAIL),t}))},n.getAnnotIdMap=function(){let t=[],e={};for(let n=0,i=this.getPageCount();n<i;n++)t.push((t=>this.getPageByIndex(t).then((t=>{y(e,t.annotIdMap)})))(n));return Promise.all(t).then((()=>e))},n.getTextSearch=function(t,e){return new ty(this,t,e)},n.addAnnot=function(t,e){if(!this.checkPermission(pe.annotForm))throw new Error("Permission error");return qy(t,this.getPageCount()),this.getPageByIndex(t).then((t=>t.addAnnot(e)))},n.addAnnotGroup=function(t,e,n){if(!this.checkPermission(pe.annotForm))throw new Error("Permission error");return qy(t,this.getPageCount()),this.getPageByIndex(t).then((t=>t.addAnnotGroup(e,n)))},n.setOpenAction=function(t,e){if(!this.checkPermission(pe.modify))throw new Error("Permission error");return this.api.setDocOpenAction(this.getId(),t,e).then((t=>this.action=this.engine.actionFactory.createAction(t,this,this.api,this.engine.eventEmitter,this)))},n.getSecurityType=function(){return this.api.getSecurityType(this.id)},n.checkCertificatePassword=function(t,e){return this.api.checkCertificatePassword(this.id,t,e)},n.setCertificateAndPermission=function(t,e=ey.AES256,n=!0){if(!this.checkPermission(pe.modify))throw new Error("Permission error");return this.api.setCertificateAndPermission(this.id,t,e,n)},n.setPasswordAndPermission=function(t,e,n=4294967292,i=ey.AES256,r=!0){let o=arguments[5];if(!this.checkPermission(pe.modify))throw new Error("Permission error");return this.api.setPasswordAndPermission(this.id,t,e,n,i,r).then((n=>((o&&(o.userPassword||o.ownerPassword)||t&&-1!=t||e&&-1!=e)&&n&&(this.setPasswordType(e||t&&!e?3:2),this.setHasOwnerPassword(!!e),this.engine.eventEmitter.emit(et.docPasswordChanged,this)),n)))},n.removeSecurity=function(){if(!this.checkPermission(pe.modify))throw new Error("Permission error");return this.api.removeSecurity(this.id).then((t=>(t&&this.engine.eventEmitter.emit(et.removePwdAndPerm,this),t)))},n.isCorrectPassword=function(t=st.EMPTY_STR){return this.checkPassword(t).then((t=>0!==t))},n.getViewerPreference=function(){return this.preferencePromise||(this.preferencePromise=this.api.getViewerPreference(this.id).catch((()=>({pageLayout:"Default",uiLayout:"Default",language:"Default",viewerPreference:{}}))))},n.setViewPreference=function(t,e){return this.preferencePromise=null,this.api.setViewPreference(this.id,t,e)},n.checkPassword=function(t){return this.api.checkPassword(this.id,t).then((t=>(3===t&&(this.info.isOwner=!0),this.engine.eventEmitter.emit(et.permissionChanged,this),t)))},n.getTypeByPassword=function(t){return this.api.checkPassword(this.id,t).then((t=>(3===t&&(this.info.isOwner=!0),t)))},n.getUserPassword=function(t){return this.api.getUserPassword(this.id,t)},n.getPasswordType=function(){return Promise.resolve(this.info.passwordType)},n.setPasswordType=function(t){return this.info.passwordType=t},n.hasOwnerPassword=function(){return!!this.info.hasOwnerPassword},n.setHasOwnerPassword=function(t){this.info.hasOwnerPassword=!!t},n.getUserPermissions=function(){return this.info.userPermissions},n.makeRedactByPages=function(t){if(!this.checkPermission(pe.annotForm))throw new Error("Permission error");let e=[];for(let n=0;n<t.length;n++){let i=t[n],r=this.getPageByIndex(i).then((t=>{if(t.isVirtual())return;let e;return e=1==t.info.rotation||3==t.info.rotation?{left:0,top:0,right:t.getHeight(),bottom:t.getWidth()}:{left:0,top:0,right:t.getWidth(),bottom:t.getHeight()},t.markRedactAnnot([e])}));e.push(r)}return Promise.all(e).then((t=>t.filter(Boolean)))},n.movePageTo=function(t,e){if(!this.checkPermission(pe.modify))throw new Error("Permission error");this.info.pageSizes={};const n=this.getPageCount();if(t<0||e<0||t>=n||e>=n)throw new Error("Param error: PageIndex or DestIndex is out of the valid range.");return this.getPageByIndex(t).then((n=>this.api.movePageTo(this.id,n.getId(),e).then((n=>{if(n){let n=this.pageCache[t];this.pageCache.splice(t,1),this.pageCache.splice(e,0,n);let i=Math.min(t,e),r=Math.max(t,e);this.updatePageIndex(i,r),this.engine.eventEmitter.emit(et.pageMoved,t,e)}return this.updateRootBookmark().then((t=>n))}))))},n.insertBlankPages2=async function(t,e,n){if(!this.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");this.info.pageSizes={};this.getPageCount();if("number"!=typeof e||"number"!=typeof n)throw new Error("param error. Only number is available.");const i=await this.api.insertBlankPages2(this.id,t,e,n),r=await this.api.getLayerNodes(this.id);delete this.ocgs,this.ocgs=r;const o=i.reduce(((t,e)=>{if(!e)return!1;this.info.pageCount++;const n=new jv(e,this),{index:i}=e;return this.pageCache.splice(i,0,n),this.updatePageIndex(i+1,this.info.pageCount-1),this.PDFForm&&this.PDFForm.afterInsertPage(e.index),[].concat(Hy(w.Z,t),[n])}),[]);return this.updatePageLabelsByAction("insertPagesByRange",[i.map((t=>t.index))]),this.engine.eventEmitter.emit(et.insertPages,o),o},n.insertPage=function(t,e,n){if(!this.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");this.info.pageSizes={};const i=this.getPageCount();if(t<0||t>i)throw new Error("Param error: PageIndex is out of the valid range.");if("number"!=typeof e||"number"!=typeof n)throw new Error("param error. Only number is available.");return this.api.insertPage(this.id,t,e,n).then((t=>(delete this.ocgs,this.api.getLayerNodes(this.id).then((t=>this.ocgs=t)).then((e=>t))))).then((e=>{if(!e)return!1;this.info.pageCount++;let n=new jv(e,this);this.pageCache.splice(e.index,0,n),this.updatePageIndex(e.index+1,this.info.pageCount-1);const i=this.PDFForm&&this.PDFForm.afterInsertPage(t);return this.engine.eventEmitter.emit(et.pageAdded,n),this.updateRootBookmark().then((()=>i)).then((t=>n))}))},n.showNameTreePageAtTheEnd=function(){return this.api.showNameTreePageAtTheEnd(this.id).then((t=>(delete this.ocgs,this.api.getLayerNodes(this.id).then((t=>this.ocgs=t)).then((e=>this.reloadPDFForm(!0).then((e=>t))))))).then((t=>{if(!t)return!1;this.info.pageCount++;let e=new jv(t,this);return this.pageCache.splice(t.index,0,e),this.engine.eventEmitter.emit(et.pageAdded,e),this.engine.eventEmitter.emit(et.pagesLabelNeedUpdate,e),e}))},n.removePage=function(t){if(!this.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");this.info.pageSizes={};const e=this.getPageCount();if(t<0||t>=e)throw new Error("Param error: PageIndex is out of the valid range.");if(1==e)throw new Error("Not allowed to remove the only page.");const n=[];return this.pageCache[t]||n.push(this.getPageByIndex(t)),Promise.all(n).then((e=>this.api.removePage(this.id,t).then((e=>{if(e){this.PDFForm&&this.PDFForm.afterRemovePage(t),this.info.pageCount--;const e=this.pageCache[t].info.objectNumber;this.pageCache.splice(t,1),this.updatePageIndex(t,this.info.pageCount-1),this.engine.eventEmitter.emit(et.pageRemoved,t,e),this.removePageStatus=!0}return this.updateRootBookmark().then((t=>e))}))))},n.hideNameTreePage=function(t,e){return this.api.hideNameTreePage(this.id,t).then((e=>{if(e){let e=t;t<0&&(e=this.info.pageCount-1),this.PDFForm&&this.PDFForm.afterRemovePage(e),this.info.pageCount--;const n=this.pageCache[e]&&this.pageCache[e].info.objectNumber;this.pageCache.splice(t,1),this.updatePageIndex(t,this.info.pageCount-1),this.engine.eventEmitter.emit(et.pageRemoved,e,n),this.engine.eventEmitter.emit(et.pagesLabelNeedUpdate),this.removePageStatus=!0}return e}))},n.updatePageIndex=function(t,e){for(let n=t;n<=e;n++)this.pageCache[n]&&(this.pageCache[n].info.index=n);this.pageCache.forEach((t=>{t&&t.annots.forEach((t=>{"link"!=t.info.type&&"screen"!=t.info.type||t._update(1)}))}))},n.applyRedaction=function(){if(!this.checkPermission(pe.annotForm)||!this.checkPermission(pe.modify))throw new Error("Permission error");return this.api.applyRedaction(this.id).then((t=>{if(!t)return!1;let e=[];for(let n=0;n<t.length;n++){let i=t[n],r=this.getPageByIndex(i.pageIndex).then((t=>{let e=t.clearAnnotIds(i.removedAnnotIds).filter((t=>t));return this.engine.eventEmitter.emit(et.annotationRemoved,e,t),{pageIndex:i.pageIndex,removedAnnots:i.removedAnnotIds}}));e.push(r)}return Promise.all(e).then((t=>(this.engine.eventEmitter.emit(et.applyRedaction,t),t)))}))},n.drmEncrypt=function(t){if(!this.checkPermission(pe.modify))throw new Error("Permission error");return this.api.drmEncrypt(this.getId(),t).then((t=>(this.info=y(this.info,t),this.engine.eventEmitter.emit(et.drmEncryptSuccess,this),this)),(t=>(this.engine.eventEmitter.emit(et.drmEncryptFailed,t,this),Promise.reject(t))))},n.getTemplates=function(){if(this.isDestroyed)return Promise.resolve();this.api.getTemplates(this.id).then((t=>{t&&(this.visibleTemplates=t.visibleArr,this.invisibleTemplates=t.invisibleArr)}))},n.hideTemplate=function(t,e){var n=this;if(!e)return this.api.hideTemplate(this.id,t,e).then((()=>{n.visibleTemplates.push(t);let e=-1;for(let i=0;i<n.invisibleTemplates.length;i++){let r=n.invisibleTemplates[i];if(r.name===t.name&&r.objNum===t.objNum){e=i;break}}n.invisibleTemplates.splice(e,1)}));{let i=this.getPageCount();for(let r=0;r<i;r++)this.getPageByIndex(r).then((i=>{i.info.objectNumber===t.objNum&&n.removePage(r).then((()=>n.api.hideTemplate(this.id,t,e).then((()=>{n.invisibleTemplates=n.invisibleTemplates.push(t);let e=-1;for(let i=0;i<n.visibleTemplates.length;i++){let r=n.visibleTemplates[i];if(r.name===t.name&&r.objNum===t.objNum){e=i;break}}n.visibleTemplates.splice(e,1)}))))}))}},n.spawnPage=function(t,e,n,i){const r=this.spawnPageExecutor.insert((()=>this.api.spawnPage(this.id,t,e,n,i).then((t=>(delete this.ocgs,this.api.getLayerNodes(this.id).then((t=>this.ocgs=t)).then((e=>t))))).then((t=>{if(!t)return!1;this.info.pageCount++;let e=new jv(t,this);return this.pageCache.splice(t.index,0,e),this.updatePageIndex(t.index+1,this.info.pageCount-1),e})).then((t=>!!t&&this.reloadPDFForm().then((t=>(this.engine.eventEmitter.emit(nt.spawnPageSuccess,t),this.PDFForm.reloadForm(t.formInfo)))).then((()=>t))))));return this.spawnPageExecutor.execInverse((()=>r.then((([t])=>!!t&&(this.engine.eventEmitter.emit(et.pageAdded,t),this.updateRootBookmark()))))),r.then((([t])=>t))},n.removeTemplate=function(t){var e=this;return this.api.removeTemplate(this.id,t).then((n=>{let i=-1;for(let n=0;n<e.invisibleTemplates.length;n++){if(e.invisibleTemplates[n].name===t){i=n;break}}e.invisibleTemplates.splice(i,1),i=-1;for(let n=0;n<e.visibleTemplates.length;n++){if(e.visibleTemplates[n].name===t){i=n;break}}return e.visibleTemplates.splice(i,1),Promise.resolve()}))},n.getPageSizes=function(t=0,e=this.getPageCount()-t){return t<0&&(t=0),t+e>this.getPageCount()&&(e=this.getPageCount()-t),this.api.getPageSizes(this.id,t,e).then((t=>(y(this.info.pageSizes,t),t)))},n.getPageSizesByIndex=function(t){return this.api.getPageSizes(this.id,t,1).then((t=>t))},n.getPageSize=function(t){let e=this.pageCache[t];if(e)return{width:e.getWidth(),height:e.getHeight()};let n=this.info.pageSizes;return n[t]?y({},n[t]):void 0},n.getEstimatedPageSize=function(t){let e=this.info.pageSizes;const n=Object.keys(e);if(n.length>0)return y({},e[n.pop()])},n.getPageSizesSync=function(){if(0==Object.keys(this.info.pageSizes).length){this.pageCache.forEach(((t,e)=>{t&&(this.info.pageSizes[e]={width:t.getWidth(),height:t.getHeight()})}))}return this.info.pageSizes},n.isPageSameSize=function(){const t=this.getPageSizesSync();let e=new Set(Object.values(t).map((t=>t.width)));return this.pageSameSize=1==e.size},n.updatePageSize=function(t,e,n){let i=this.info.pageSizes;i[t]&&(i[t].width=e,i[t].height=n)},n.insertPages=function({destIndex:t,file:e,password:n="",flags:i=0,layerName:r="",startIndex:o,endIndex:s}){if(!this.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");const a=this.getPageCount();if(t<0||t>a)throw new Error("Param error: Index is out of the valid range.");if(1==i&&!r)throw new Error("Param error: If parameter flags is 1, parameter layerName should not be empty");return this.api.startImportPages(this.id,t,e,n,i,r,o,s).then((t=>(delete this.ocgs,this.api.getLayerNodes(this.id).then((t=>this.ocgs=t)).then((e=>t))))).then((e=>{var n;this.info.pageSizes={},this.info.pageCount+=e.length;let i=[];return e.forEach((t=>{let e=new jv(t,this);i.push(e)})),(n=this.pageCache).splice.apply(n,[t,0].concat(i)),this.updatePageIndex(t,this.info.pageCount-1),this.updatePageLabelsByAction("insertPages",[t,e.length]),this.engine.eventEmitter.emit(et.importPages,i),this.updateRootBookmark().then((t=>i))}))},n.mergePDFDoc=function(t){let{insertIndex:e,doc:n,pages:i}=t||{};if(!n)return Promise.reject(new Error("Missing required option: doc"));const r=this.getPageCount();"number"!=typeof e&&(e=r),e=Math.max(0,Math.min(r,e)),Array.isArray(i)?i.sort(((t,e)=>t>e?1:-1)):i=Array(n.getPageCount()).fill(0).map(((t,e)=>e));const o=n.getPageCount();for(const t in i){const e=i[t];if(e<0||e>=o)return Promise.reject(new Error(`Incorrect page index: ${e}, it must be greater than or equal to 0 or less then total page count ${o}`))}return this.importPagesFromPDFDocs({destIndex:e,srcDocs:[{srcDocId:n.getId(),srcPages:i}],layerName:t.layerName})},n.importPagesFromPDFDocs=async function({destIndex:t,srcDocs:e=[],layerName:n=""}){var i;if(!this.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");const r=this.getPageCount();if(t<0||t>r)throw new Error("Param error: Index is out of the valid range.");const{pagesJson:o,errs:s}=await this.api.importPagesFromPDFDocs(this.id,t,e,n);if(0===o.length)return{pages:[],errs:s};delete this.ocgs,this.ocgs=await this.api.getLayerNodes(this.id),this.info.pageSizes={},this.info.pageCount+=o.length;const a=o.map((t=>new jv(t,this)));return(i=this.pageCache).splice.apply(i,[t,0].concat(Hy(w.Z,a))),this.updatePageIndex(t,this.info.pageCount-1),this.updatePageLabelsByAction("insertPages",[t,o.length]),this.bookmarkRoot=null,this.engine.eventEmitter.emit(et.importPages,a),{pages:a,errs:s}},n.exportPagesToPDFDocs=async function({srcPages:t,destDocs:e=[],layerName:n="",bookmarkTitle:i=""}){const r=await this.api.exportPagesToPDFDocs(this.id,t,e.map((({destDoc:t,destIndex:e})=>({destDocId:t.getId(),destIndex:e}))),n,i);return await Promise.all(r.map((async({docId:t,name:e})=>({doc:t?await this.engine.getPDFDocByCacheId(t):null,name:e}))))},n.getPDFDocById=function(t){return this.engine.getPDFDocByCacheId(t)},n.extractPages=function(t){if(-4!=this.checkPermission(4294967292))throw new Error("Permission error");let e=[];const n=this.getPageCount();if(!t instanceof Array)throw new Error("Param error. Only array is available.");if(0===t.length)throw new Error("Param error. Non-valid array.");return t.forEach((t=>{if(!t instanceof Array)throw new Error("Param error. Only array is available.");if(0===t.length||t.length>2)throw new Error("Param error. Non-valid array.");if(isNaN(t[0])||t[0]<0||t[0]>=n)throw new Error("Param error: Index is out of the valid range.");if(t[1]&&(isNaN(t[1])||t[1]<0||t[1]>=n))throw new Error("Param error: Index is out of the valid range.")})),this.api.extractPages(this.id,t,(({arrayBuffer:t})=>{e.push(t)}),undefined,undefined).then((t=>e))},n.copyPages=function(t,e){const n=this.getPageCount();if(!(0,_.isInteger)(e)||e>n)throw new Error("Param error: ToPageIndex is out of the valid range.");if(!Array.isArray(t))throw new Error("Param error. Only array is available.");if(0===t.length)throw new Error("Param error. Non-valid array.");return t.forEach((t=>{if(!Array.isArray(t))throw new Error("Param error. Only array is available.");if(0===t.length||t.length>2)throw new Error("Param error. Non-valid array.");if(!(0,_.isInteger)(t[0])||t[0]<0||t[0]>=n)throw new Error("Param error: Index is out of the valid range.");if(t[1]&&(!(0,_.isInteger)(t[1])||t[1]<=t[0]||t[1]>=n))throw new Error("Param error: Index is out of the valid range.")})),this.api.copyPages(this.id,t,e).then(this._importPagesAndUpdate.bind(this,e))},n._importPagesAndUpdate=async function(t,e){var n;this.info.pageSizes={},this.info.pageCount+=e.length;const i=[];return e.forEach((t=>{let e=new jv(t,this);i.push(e)})),(n=this.pageCache).splice.apply(n,[t,0].concat(i)),this.updatePageIndex(t,this.info.pageCount-1),this.updatePageLabelsByAction("insertPages",[t,e.length]),this.engine.eventEmitter.emit(et.importPages,i),i},n.saveCopyPagesData=function(t){return this.api.saveCopyPagesData(this.id,t)},n.pastePages=function(t){return this.api.pastePages(this.id,t).then(this._importPagesAndUpdate.bind(this,t))},n.embedAllPageThumbnail=function(t){const e=n=>{t(n),(1===n||-1===n)&&this.api.workerPromise.off("embeddingProgress",e)};return this.api.workerPromise.on("embeddingProgress",e),this.api.embedAllPageThumbnail(this.id).then((t=>{t&&this.engine.eventEmitter.emit(et.docModified,this)}))},n.removeEmbeddedPageThumbnail=function(t){const e=n=>{t(n),1!==n&&-1!==n||this.api.workerPromise.off("removingProgress",e)};return this.api.workerPromise.on("removingProgress",e),this.api.removeEmbeddedPageThumbnail(this.id).then((t=>{t&&(this.engine.eventEmitter.emit(et.removeEmbeddedPageThumbnail),this.removePageStatus=!0)}))},n.cancelEmbedAllPageThumbnail=function(){return this.api.cancelEmbedAllPageThumbnail(this.id)},n.cancelRemoveEmbeddedPageThumbnail=function(){return this.api.cancelRemoveEmbeddedPageThumbnail(this.id)},n.setPagesBox=function({indexes:t,width:e,height:n,offsetX:i,offsetY:r,boxes:o,removeWhiteMargin:s}={}){if(!Array.isArray(t))return Promise.reject(new Error("Missing require parameter or incorrect type: 'indexes'"));const a=this.getPageCount();for(const e in t){const n=t[e];if(!(0,_.isNumberInRange)(n,0,a,!0,!1))return Promise.reject(new Error(`Incorrect page index: ${n}, it must be in the range of 0 to ${a-1}. indexes: [${t.join(",")}]`))}return this.setAllBoxesByIndexes(t,e,n,i,r,o||{},s)},n.getAllBoxesByPageIndex=function(t){const e=this.getPageCount();return(0,_.isNumberInRange)(t,0,e,!0,!1)?this.api.getAllBoxes(this.id,t).then((t=>t)):Promise.reject(new Error(`Incorrect page index: ${t}, it must be in the range of 0 to ${e-1}`))},n.setAllBoxesByIndexes=function(t,e,n,i,r,o,s){if(-4!==this.checkPermission(4294967292))throw new Error("Permission error");return this.api.setAllBoxesByIndexes(this.id,t,e,n,i,r,o,s).then((t=>{const e=[];return t.forEach((t=>{let n=t.index;this.updatePageSize(n,t.width,t.height);let i=this.pageCache,r=i[n];r?r._updateInfo(t):r=new jv(t,this),i[n]=r,e.push(r)})),this.engine.eventEmitter.emit(et.pagesBoxChange,e),e}))},n.getPageFormat=function(t,e,n,i="",r="",o=void 0){if("batesNumbering"!==t&&-4!==this.checkPermission(4294967292))throw new Error("Permission error");return this.api.getPageFormat(this.id,t,e,n,i,r,o).then((t=>t))},n.getPageFormatThumb=function(t,e,n,i,r,o,s){if(-4!==this.checkPermission(4294967292))throw new Error("Permission error");return this.api.getPageFormatThumb(this.id,t,e,n,i,r,o,s).then((t=>t))},n.addPageFormat=function(t,e,n){if(-4!==this.checkPermission(4294967292))throw new Error("Permission error");return this.api.addPageFormat(this.id,t,e,n).then((e=>{if(e>0&&"watermark"==t){let t=[];for(const e of this.pageCache){if(!e)continue;const n=e.getAnnots(!0);t.push(n)}return Promise.all(t).then((()=>(this.setDocModified(),e)))}return this.setDocModified(),e}))},n.removeAllPageFormat=function(t){if(-4!==this.checkPermission(4294967292))throw new Error("Permission error");return this.api.removeAllPageFormat(this.id,t).then((e=>{if(e>0&&"watermark"==t){let t=[];for(const e of this.pageCache){if(!e)continue;const n=e.getAnnots(!0);t.push(n)}return Promise.all(t).then((()=>(this.setDocModified(),e)))}return e}))},n.extractPrintPages=function(t){return this.api.extractPrintPages(this.id,t).then((t=>t))},n.getHeaderFooter=function(){return this.HF?Promise.resolve(this.HF):this.getPageFormat("headerfooter").then((t=>{if(t.res>0){let e=Fv(t.old,this.getPageCount());return this.HF=new ly(e)}return null}))},n.updateHeaderFooter=function(t){if(!this.checkPermission(pe.modify))throw new Error("Permission error");let e=Tv(t,0,this.getPageCount());return this.getPageFormat("headerfooter").then((n=>{let i=!1;return n.res>0&&(i=!0),this.addPageFormat("headerfooter",e,i).then((n=>{if(n>0){let n=Fv(e,this.getPageCount());return this.HF?this.HF.json=n:this.HF=new ly(n),t.json=n,this.engine.eventEmitter.emit(et.headerFooterUpdated,t.range),this.engine.eventEmitter.emit(et.docModified,this),n}return n}))}))},n.addHeaderFooter=function(t){if(t.isEmpty())return Promise.resolve();if(!this.checkPermission(pe.modify))throw new Error("Permission error");let e=Tv(t,0,this.getPageCount());return this.getPageFormat("headerfooter").then((n=>this.addPageFormat("headerfooter",e).then((n=>{if(n>0){let n=Fv(e,this.getPageCount());return this.HF?this.HF.json=n:this.HF=new ly(n),t.json=n,this.engine.eventEmitter.emit(et.headerFooterAdded,t.range),this.engine.eventEmitter.emit(et.docModified,this),n}return n}))))},n.removeHeaderFooter=function(){if(!this.checkPermission(pe.modify))throw new Error("Permission error");return delete this.HF,this.getPageFormat("headerfooter").then((t=>this.removeAllPageFormat("headerfooter").then((t=>(this.engine.eventEmitter.emit(et.headerFooterUpdated),this.engine.eventEmitter.emit(et.docModified),t)))))},n.addWatermark=function(t){let e=0,n="addWatermark",{progressChanged:i}=nt,{type:r,text:o}=t;if("text"!==r&&"bitmap"!==r)throw new Error("Param error:Type error");if("text"===r&&be(o))throw new Error("Param error:Strings that are all space characters are invalid");if(t.useRelativeScale&&t.isMultiline)throw new Error("Param error: UseRelativeScale and isMultiline cannot be set to true at the same time");if(t.pageStart<0||t.pageStart>=this.getPageCount()||t.pageEnd<0||t.pageEnd>=this.getPageCount()||t.pageStart>t.pageEnd)throw new Error("Param error: Invalid pageStart or pageEnd");if(!this.checkPermission(pe.modify))throw new Error("Permission error");this.engine.eventEmitter.emit(i,n,e,Zm.PROGRESSING);let s=_v(t,0,t.pageStart,t.pageEnd,this.getPageCount());return this.getPageFormat("watermark").then((r=>(this.engine.eventEmitter.emit(i,n,e+=30,Zm.PROGRESSING),this.addPageFormat("watermark",s).then((r=>{if(this.engine.eventEmitter.emit(i,n,e+=30,Zm.PROGRESSING),r>0){let e={},r=[],{pageStart:o,pageEnd:a}=t;for(let t=o;t<=a;t++)r.push(this.getPageByIndex(t).then((t=>{s.isKeep&&t.annots.length>0&&(e=t.annots[t.annots.length-1].info,this.engine.eventEmitter.emit(et.annotationAdd,t.annots,t)),this.engine.eventEmitter.emit(et.watermarkAdded,t)})));return Promise.all(r).then((t=>(this.engine.eventEmitter.emit(i,n,100,Zm.SUCCESS),e)))}return this.engine.eventEmitter.emit(i,n,e,Zm.FAIL),r}))))).catch((t=>{throw this.engine.eventEmitter.emit(i,n,e,Zm.FAIL),t}))},n.removeAllWatermarks=function(){return this.removeAllPageFormat("watermark").then((t=>(t>0&&this.engine.eventEmitter.emit(et.watermarkRemoved),t>=0)))},n.removeSignature=function(t){if(!t)throw new Error(`Invalid param fieldName: ${t}.`);return(this.PDFForm?Promise.resolve():this.loadPDFForm()).then((()=>{const e=this.PDFForm.getField(t);if(!e)throw new Error("Can not find field.");if(e.getType()!==xe.Sign)throw new Error(`Unsupported field type: ${e.getType()}.`);if(4===e.info.signatureType){return e.getControlByIndex(0).getWidgetAnnot().then((t=>this.removePagingSealSignature({pagingSigObjNum:t.getId()}))).then((()=>Promise.resolve(!0)))}for(let t=0;t<e.getControlsCount();t++){const n=e.getControlByIndex(t).getWidget();if(!n)continue;const i=n.getPage();i.clearAnnotIds([n.getId()]),this.engine.eventEmitter.emit(et.annotationRemoved,[n],i),e.removeControlInfo(n.getId(),!1)}return 0===e.getControlsCount()&&this.PDFForm.removeEngineField(t),this.api.removeControl(this.id,0,t,0)}))},n.sign=function(t,e){let n=0,i="sign",{progressChanged:r}=nt;try{if(this.engine.eventEmitter.emit(r,i,n,Zm.PROGRESSING),!this.checkPermission(pe.annotForm)&&!this.checkPermission(pe.fillForm))throw new Error("Permission error");let o=Promise.resolve();if(!t.fieldName&&void 0===t.pageIndex&&t.pagingSigConfig&&(o=o.then((()=>Qy(t.pagingSigConfig,this).then((()=>tw(t.pagingSigConfig).then((e=>{t.pagingSigConfig=e}))))))),t.defaultContentsLength||(t.defaultContentsLength=7942),t.defaultContentsLength<4098)throw new Error("The default length of signature contents should not be less than 4098, in bytes");let s=t.rect;if(s&&!t.noCheckRect){let{left:t,right:e,top:n,bottom:i}=s;if(e<=t||n<=i)throw new Error("Signature rect error.")}if(!t.filter||!t.subfilter)throw new Error("Filter and Subfilter can't be null.");t.timeFormat=y({},{format:"YYYY.MM.DD HH:mm:ss Z",timeZoneOptions:{separator:"'"}},t.timeFormat);let a=t.image;return void 0!==a&&(t.inkSign=a,delete t.image),this.PDFForm||(o=o.then((()=>this.loadPDFForm()))),o=o.then((e=>{let o;if(o=t.fieldName){let t=this.PDFForm.getField(o);if(!t||t.getType()!=xe.Sign)throw new Error("Field type error: not a signature.")}let s=t.pageIndex;if(void 0!==s){qy(s,this.getPageCount());const e={mkRotate:(t.rotation||0)/90%4};return this.PDFForm.addSignature(s,t.rect,o,e).then((e=>(this.engine.eventEmitter.emit(r,i,n+=20,Zm.PROGRESSING),delete t.pageIndex,delete t.rect,t.fieldName=e.getName(),new Promise((t=>setTimeout((()=>{t()}),50))))))}})),o.then((e=>this.api.signDoc(this.id,t,arguments[2]))).then((e=>(this.engine.eventEmitter.emit(r,i,n+=20,Zm.PROGRESSING),"pageIndex"in t?this.getPageByIndex(t.pageIndex).then((t=>Promise.all([t,t.getUnloadedAnnots()]))).then((([t,e])=>{this.engine.eventEmitter.emit(et.annotationAdd,e,t)})).then((t=>e)):e))).then((o=>{if(this.engine.eventEmitter.emit(r,i,n+=20,Zm.PROGRESSING),t.native)return[o];let s=[],a=0;for(let t=0;t<o.byteRange.length;t+=2){let e=o.byteRange[t],n=o.byteRange[t+1];a||(a=e+n+1);let i=o.buffer.slice(e,e+n);s.push(i)}let c=new Blob(s);return Promise.all([o,e(t,c),a])})).then((([e,n,o])=>{if(t.native)return this.engine.eventEmitter.emit(r,i,100,Zm.SUCCESS),e;if(n.byteLength>t.defaultContentsLength)throw new Error("Signed data is larger than the default length, in bytes");let s=new Uint8Array(n).reduce(((t,e)=>(t.push(jy[(240&e)>>>4]),t.push(jy[15&e]),t)),[]);return this.engine.eventEmitter.emit(r,i,100,Zm.SUCCESS),new Blob([e.buffer.slice(0,o),new Uint8Array(s),e.buffer.slice(o+s.length)],{type:"application/pdf"})})).catch((t=>{throw this.engine.eventEmitter.emit(r,i,n,Zm.FAIL),t}))}catch(t){throw this.engine.eventEmitter.emit(r,i,n,Zm.FAIL),t}},n.signForESignCN=function(t,e){if(!this.checkPermission(pe.annotForm)&&!this.checkPermission(pe.fillForm))throw new Error("Permission error");if(t.fields.forEach((t=>{let e;if(e=t.fieldName){let t=this.PDFForm.getField(e);if(!t||t.getType()!=xe.Sign)throw new Error("Field type error: not a signature.")}})),!t.config.filter||!t.config.subfilter)throw new Error("Filter and Subfilter can't be null.");let n=[Promise.resolve()];return t.fields.forEach(((t,e)=>{let i=t.pageIndex;if(void 0!==i){qy(i,this.getPageCount());let r=Promise.resolve();if(!t.fieldName&&t.fieldId)return void(n[e]=r);r=this.PDFForm.addSignature(i,t.rect,t.fieldName,{isESignCN:!0}).then((e=>(t.fieldName=e.getName(),new Promise((t=>setTimeout((()=>{t()}),50)))))),n[e]=r}})),Promise.all(n).then((e=>this.api.signDocForESignCN(this.id,t))).then((e=>{const n=[Promise.resolve()];return t.fields.forEach(((t,i)=>{if("pageIndex"in t){let r=this.getPageByIndex(t.pageIndex).then((t=>Promise.all([t,t.getUnloadedAnnots()]))).then((([t,e])=>{this.engine.eventEmitter.emit(et.annotationAdd,e,t)})).then((t=>e));n[i]=r}else n[i]=Promise.resolve()})),Promise.all(n).then((t=>e))})).then((n=>{let i=[],r=0;for(let t=0;t<n.byteRange.length;t+=2){let e=n.byteRange[t],o=n.byteRange[t+1];r||(r=e+o+1);let s=n.buffer.slice(e,e+o);i.push(s)}let o=new Blob(i);return Promise.all([n,e(t,o),r])})).then((([e,n,i])=>{if(n.byteLength>t.defaultContentsLength)throw new Error("Signed data is larger than the default length, in bytes");let r=new Uint8Array(n).reduce(((t,e)=>(t.push(jy[(240&e)>>>4]),t.push(jy[15&e]),t)),[]);return new Blob([e.buffer.slice(0,i),new Uint8Array(r),e.buffer.slice(i+r.length)],{type:"application/pdf"})}))},n.isESignCNSignature=function(t,e){return this.api.isESignCNSignature(this.id,t,e)},n.addPagingSealSignature=function(t){this.engine.eventEmitter.emit(nt.progressChanged,"addPagingSealSignature",0,Zm.PROGRESSING);const{pagingSigConfig:e}=t||{};return Qy(e,this).then((()=>tw(e))).then((t=>(this.engine.eventEmitter.emit(nt.progressChanged,"addPagingSealSignature",20,Zm.PROGRESSING),this.api.addPagingSealSignature(this.id,{pagingSigConfig:t})))).then((t=>{if(!t||!t.pagingSigObjNum)return void this.engine.eventEmitter.emit(nt.progressChanged,"addPagingSealSignature",40,Zm.FAIL);this.engine.eventEmitter.emit(nt.progressChanged,"addPagingSealSignature",40,Zm.PROGRESSING);const{pagingSigObjNum:n,addedObjNums:i}=t;return this.reloadPDFForm().then((()=>{this.engine.eventEmitter.emit(nt.progressChanged,"addPagingSealSignature",60,Zm.PROGRESSING);let t=[];for(const n of this.pageCache){if(!n)continue;const r=n.getIndex();if(r+1<e.pageRange[0]||r+1>e.pageRange[1])continue;const o=n.getUnloadedAnnots().then((t=>{const e=t.filter((t=>i.includes(t.getId())));this.engine.eventEmitter.emit(et.annotationAdded,e,n)}));t.push(o)}return this.engine.eventEmitter.emit(nt.progressChanged,"addPagingSealSignature",80,Zm.PROGRESSING),Promise.all(t).then((()=>(this.engine.eventEmitter.emit(nt.progressChanged,"addPagingSealSignature",100,Zm.SUCCESS),n)))}))}))},n.updatePagingSealSignature=function(t){const{pagingSigConfig:e,pagingSigObjNum:n}=t||{};return Qy(e,this).then((()=>{if(!n)throw new Error(`Invalid param pagingSigObjNum: ${n}.`);return this.getAllPagingSealSignatures(n).then((t=>{if(!t.length)throw new Error(`Can not find param pagingSigObjNum: ${n} associated paging seal signature in current document.`)}))})).then((()=>tw(e))).then((t=>this.api.updatePagingSealSignature(this.id,{pagingSigConfig:t,pagingSigObjNum:n}))).then((t=>{if(!t||!t.pagingSigObjNum)return;const{pagingSigObjNum:e,removedObjNums:n,addedObjNums:i}=t;return this.reloadPDFForm().then((()=>{let t=[];for(const e of this.pageCache){if(!e)continue;const r=e.getAnnots().then((t=>{const i=t.filter((t=>n.includes(t.getId())));i.length&&this.engine.eventEmitter.emit(et.annotationRemoved,i,e)}));t.push(r);const o=e.getAnnots(!0).then((t=>{const n=t.filter((t=>i.includes(t.getId())));n.length&&this.engine.eventEmitter.emit(et.annotationAdded,n,e)}));t.push(o)}return Promise.all(t).then((()=>e))}))}))},n.getAllPagingSealSignatures=function(t){return this.api.getAllPagingSealSignatures(this.id,t)},n.removePagingSealSignature=function(t){if(!this.checkPermission(pe.annotForm)&&!this.checkPermission(pe.fillForm))throw new Error("Permission error");const{pagingSigObjNum:e}=t||{};if(!e)throw new Error(`Invalid param pagingSigObjNum: ${e}.`);return this.getAllPagingSealSignatures(e).then((t=>{if(!t.length)throw new Error(`Can not find param pagingSigObjNum: ${e} associated paging seal signature in current document.`)})).then((()=>this.api.removePagingSealSignature(this.id,{pagingSigObjNum:e}))).then((t=>{if(!t||!t.removedObjNums)return;const{removedObjNums:e}=t;return this.reloadPDFForm().then((()=>{let t=[];for(const n of this.pageCache){if(!n)continue;const i=n.getAnnots().then((t=>{const i=t.filter((t=>e.includes(t.getId())));return i.length&&this.engine.eventEmitter.emit(et.annotationRemoved,i,n),n.getAnnots(!0)}));t.push(i)}return Promise.all(t).then((()=>{}))}))}))},n.getAllPagingSigsInfo=function(t){return this.api.getAllPagingSigsInfo(this.id,t)},n.getOriginalStream=function(){return this.api.getOriginalStream(this.id)},n.verifySignature=function(t,e){return this.api.getOriginalStream(this.id).then((t=>t instanceof Blob?new Promise(((e,n)=>{let i=new FileReader;i.onloadend=t=>{e(i.result)},i.readAsArrayBuffer(t)})):Promise.resolve(t))).then((n=>{let i=t.getByteRange();if(4!=i.length)return Promise.resolve(64);let r=new Uint8Array(n),o=new Uint8Array(i[1]+i[3]),s=0;for(let t=0;t<i.length;t+=2){let e=i[t],n=i[t+1];o.set(r.slice(e,e+n),s),s+=n}let a=i[2]-i[1]-2,c=i[0]+i[1]+1,l=[];for(let t=c;t<c+a;t+=2){let e=parseInt(String.fromCharCode(r[t]),16)<<4,n=parseInt(String.fromCharCode(r[t+1]),16);l.push(e+n)}return e(t,o,new Uint8Array(l),r.byteLength>i[2]+i[3])})).then((t=>+t))},n.attachFile=function(t){if(!this.checkPermission(pe.modify))throw new Error("Permission error");return this.api.attachFile(this.id,t).then((t=>t))},n.getFontsInfo=function(){return this.api.getFontsInfo(this.id)},n.getLayerNodeByIdBAK=function(t){let e=(t=t.toString()).split("-");try{let t=this.ocgs;for(let n=0;n<e.length;n++)t=t.children[e[n]];return t}catch(t){return null}},n.getLayerNodeById=function(t){if(!t&&0!==t)return"";let e;const n=function(i){if(i&&i.id===t+"")e=i;else if(i.children&&i.children.length>0)for(let t=0;t<i.children.length&&!e;t++){const e=i.children[t];n(e)}};return n(this.ocgs),e},n.getAdditionalAction=function(t){return this.AdditionalActions[t]},n.loadAdditionalActions=function(){return this.api.getDocAdditionalActions(this.id).then((t=>{this.AdditionalActions={};for(let e in t)this.AdditionalActions[e]=yr.createAction(t[e],this);return this.AdditionalActions}))},n.getPdfArticle=function(){return this.pdfArticle||(this.pdfArticle=new Cy(this.engine,this)),this.pdfArticle},n.getStructureRoles=function(){const t=this.getId();return this.api.getStructureRoles(t)},n.resetEngineInstance=function(t){this.engine;let e=this.parameters,n={range:{docId:this.id},headers:{}};e.idJWT&&(n.headers.jwt=e.idJWT),e.password&&(n.headers["x-auth-doc"]=btoa(e.password));let i,r,o=this.api,s=(0,_.createDeferred)();return o.resetEngine(this.id).then((([r,o])=>(i=o,n.range.url=r,t.getPDFDocByHttpRangeRequest(n,e)))).then((t=>t.parse(e))).then((e=>(r=e,t.api.syncDataCache(this.id,i)))).then((()=>{this.engine=t,this.api=t.api,s.resolve(r)}),(()=>{s.reject(this)})),s.promise},n.setColors=function(t){return this.api.setDocColors(this.getId(),t).then((()=>{this.info.readColors=t}))},n.getColors=function(){return this.info.readColors||{background:4294967295,foreground:4278190080}},n.setPageDisplayPreferences=function(t){return this.api.setPageDisplayPreferences(this.getId(),t)},n.renderTemplatesByObjNum=function(t){return this.api.renderTemplatesByObjNum(this.id,Number(t))},n.getNameTree=function(t){return this.api.getNameTree(this.id,Number(t))},n.addNameTreeObj=function(t,e,n){return this.api.addNameTreeObj(this.id,Number(t),String(e),Number(n))},n.removeNameTreeObj=function(t,e){return this.api.removeNameTreeObj(this.id,Number(t),String(e))},n.replaceNameTreeObj=function(t,e,n){return this.api.replaceNameTreeObj(this.id,Number(t),String(e),Number(n))},n.renameNameTreeObj=function(t,e,n){return this.api.renameNameTreeObj(this.id,Number(t),String(e),String(n))},n.getPageIndexByObjNum=function(t){return this.api.getPageIndexByObjNum(this.id,Number(t))},n.nameTreeTemplatesToPages=function(t){return this.api.nameTreeTemplatesToPages(this.id,String(t))},n.nameTreePagesToTemplates=function(t){return this.api.nameTreePagesToTemplates(this.id,String(t))},n.addFileSpec=function(t,e,n){return this.api.addFileSpec(this.id,String(t),e,n)},n.setFileSpecDesc=function(t,e){return this.api.setFileSpecDesc(this.id,String(t),Number(e)).then((n=>(n&&this.engine.eventEmitter.emit(et.documentAttachmentModify,{desc:t,objNum:e}),n)))},n.getFileSpecStream=function(t){let e=[];return this.api.getFileSpecStream(this.id,Number(t),(({arrayBuffer:t,blob:n,offset:i,size:r})=>{n?e=n:e.push(t)})).then((()=>e))},n.addEmbeddedFileByAttachments=function(t,e){return this.api.addEmbeddedFileByAttachments(this.id,String(t),Number(e)).then((t=>(t&&this.engine.eventEmitter.emit(et.documentAttachmentAdd),t)))},n.setEmbeddedFileByAttachments=function(t,e){return this.api.setEmbeddedFileByAttachments(this.id,String(t),Number(e)).then((t=>(t&&this.engine.eventEmitter.emit(et.documentAttachmentModify),t)))},n.removeEmbeddedFileByAttachments=function(t){return this.api.removeEmbeddedFileByAttachments(this.id,String(t)).then((t=>(t&&this.engine.eventEmitter.emit(et.documentAttachmentRemove),t)))},n.moveAnnotsToPage=function(t,e,n,i=!1){let r=Object.keys(n).map((t=>+t)),o=r.map((e=>t.annotIdMap[e])).filter((t=>!!t)),s="widget"!=o[0].getType();return this.api.moveAnnotsToPage(this.id,t.getId(),e.getId(),n).then((a=>Promise.resolve(t.clearAnnotIds(r)).then((t=>e.getUnloadedAnnots())).then((r=>{if("popup"===r[0].info.type){let t=r[0];r[0]=r[1],r[1]=t}let a=this.engine.eventEmitter;return a.emit(et.annotationRemoved,o,t),a.emit(et.annotationAdd,r,e),i||(a.emit(et.moveAnnotsToPages,t,e,n,s),a.emit(et.annotationMovedPosition,[r[r.length-1]],e,r[r.length-1])),a.emit("updatePageAnnot",t,o,e,r),r}))))},n.getInfo=function(){return this.api.getPDFDictInfo(this.id).then((t=>new Dv(this,t.id,this.engine)))},n.getInfos=function(){return this.api.getInfos(this.id)},n.hasDocIsWrapped=function(){return this.api.hasDocIsWrapped(this.id)},n.getPageLabels=function(t){return this.api.getPageLabels(this.id,t)},n.autoRecognitionForm=function(){let t=0,e="autoRecognitionForm",{progressChanged:n}=nt;return this.engine.eventEmitter.emit(n,e,t+=30,Zm.PROGRESSING),this.api.autoRecognitionForm(this.id).then((i=>{let r=[];return 0===i?(this.engine.eventEmitter.emit(n,e,100,Zm.SUCCESS),i):(this.engine.eventEmitter.emit(et.recognitionForm,this),this.reloadPDFForm().then((o=>{this.engine.eventEmitter.emit(n,e,t+=30,Zm.PROGRESSING);for(const t of this.pageCache){if(!t)continue;const e=t.getUnloadedAnnots().then((e=>(e&&e.length>0&&this.engine.eventEmitter.emit(et.annotationAdd,e,t),Promise.resolve())));r.push(e)}return Promise.all(r).then((()=>(this.engine.eventEmitter.emit(n,e,100,Zm.SUCCESS),this.engine.eventEmitter.emit(et.permissionChanged,this),i)))})))}))},n.isStaticXFA=function(){return 1==this.info.fileType},n.isDynamicXFA=function(){return 2==this.info.fileType},n.isXFA=function(){return Promise.resolve(0!=this.info.fileType)},n.isXFARemoved=function(){return this.info.XFARemoved},n.removeXFA=function(){return this.api.removeXFA(this.id).then((t=>!!t&&(this.info.XFARemoved=!0,this.reloadPDFForm().then((t=>this.PDFForm.reloadForm(t.formInfo))).then((()=>!0)))))},n.isPortfolio=function(){return this.info.isPortfolio},n.startPageEdit=function(t,e,n,i){return this.pageEditing?Promise.resolve():(this.pageEditing=!0,this.engine.eventEmitter.emit(et.objectStartEdit),this.api.handlePageEditorEvent(this.id,"StartEdit",!1,t,e,n,i))},n.endPageEdit=function(){return this.pageEditing=!1,this.engine.eventEmitter.emit(et.objectEndEdit),this.api.handlePageEditorEvent(this.id,"EndEdit")},n.startFormDesignerAssit=function(){return this.api.startFormDesignerAssit(this.id)},n.stopFormDesignerAssit=function(){return this.api.stopFormDesignerAssit(this.id)},n.reversePages=function(t){return this.api.reversePages(this.id,t).then((t=>{const e=t.length;if(e>0){for(let t=0,n=e-1;t<n;t++,n--){const e=this.pageCache[t];this.pageCache[t]=this.pageCache[n],this.pageCache[n]=e}this.updatePageIndex(0,e-1);for(let n=0,i=e-1;n<i;n++,i--)this.engine.eventEmitter.emit(et.pagesMoved,t)}})).then((t=>this.getPageSizes()))},n.reversePagesWithMovePages=async function(t){const e=t.length;if(e>1)for(let n=0,i=e-1;n<i;n++,i--){const e=Math.min(t[n],t[i]),r=Math.max(t[n],t[i]);await this.movePagesTo([[r]],0),await this.movePagesTo([[e+1]],r+1),await this.movePagesTo([[0]],e+1)}this.updatePageLabelsByAction("reversePages",[Array.from(t,((t,e)=>e))])},n.movePagesTo=function(t,e=0){const n=this.getPageCount();if(!t||0===t.length||Math.min.apply(Math,Hy(w.Z,t.flat()))<0||Math.max.apply(Math,Hy(w.Z,t.flat()))>n-1)throw new Error("Param error: pageRange is out of the valid range.");if(isNaN(e)||e<0||e>n)throw new Error("Param error: Index is out of the valid range.");const i=[];return t.forEach((t=>{for(let e=t[0];e<=t[t.length-1];e++)i.push(e)})),t=Array.from(new Set(i.sort(((t,e)=>t-e)))),this.api.movePagesTo(this.id,t,e).then((n=>{if(n){const i=so(t).sort(((t,e)=>t-e));return this.pageCache=n.reduce(((t,e,n)=>{const i=this.pageIdMap[e];return i&&(i.info.index=n),t[n]=i,t}),[]),this.updatePageIndex(Math.min(e,i[0]),Math.max(e,i[i.length-1])),this.engine.eventEmitter.emit(et.pagesMoved,t,e,n),this.updateRootBookmark().then((t=>this.getPageSizes())).then((t=>n))}}))},n.movePagesToThenUpdatePageLabel=async function(t,e=0){const n=await this.movePagesTo(t,e),i=t.reduce(((t,[e,n])=>{if(void 0===n)t.push(e);else{const i=[];for(;e<=n;)i.push(e++);t.push.apply(t,i)}return t}),[]);return t=Array.from(new Set(i.sort(((t,e)=>t-e)))),this.updatePageLabelsByAction("movePages",[t,e]),n},n.startReplacePages=function(t,e,n,i){const r=[];return i.forEach((t=>{for(let e=t[0];e<=t[t.length-1];e++)r.push(e)})),i=Array.from(new Set(r.sort(((t,e)=>t-e)))),this.api.startReplacePages(this.id,t,e,n,i).then((n=>{var i;if(n&&n.error)return n;this.info.pageSizes={},this.info.pageCount-=e,this.info.pageCount+=n.length;const r=[];n.forEach((t=>{let e=new jv(t,this);r.push(e)})),(i=this.pageCache).splice.apply(i,[t,e].concat(r)),this.updatePageIndex(t,this.info.pageCount-1);const o=new Array(e).fill(0).map(((e,n)=>t+n));return this.engine.eventEmitter.emit(et.pagesReplace,{delPageRange:o,pages:r}),n}))},n.setPageTransition=function(t,e,n,i){const r=[];return i.forEach((t=>{for(let e=t[0];e<=t[t.length-1];e++)r.push(e-1)})),i=Array.from(new Set(r.sort(((t,e)=>t-e)))),this.api.setPageTransition(this.id,t,e,n,i)},n.getPageTransitionByIndex=function(t){return this.api.getPageTransitionByIndex(this.id,t)},n.removePages=function(t){if(!this.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");this.info.pageSizes={};const e=this.getPageCount();if(1===e)throw new Error("Not allowed to remove the only page.");Uy(t,e,"remove");const n=so(t).sort(((t,e)=>e-t)),i=[];for(let t=0;t<n.length;t++){const e=n[t];this.pageCache[e]||i.push(this.getPageByIndex(e))}return Promise.all(i).then((e=>this.api.removePages(this.id,t).then((e=>{const i=[];return n.forEach((t=>{this.PDFForm&&this.PDFForm.afterRemovePage(t),this.info.pageCount--,i.push(this.pageCache[t].info.objectNumber),this.pageCache.splice(t,1),this.updatePageIndex(t,this.info.pageCount-1)})),this.updatePageLabelsByAction("deletePages",[t]),this.engine.eventEmitter.emit(et.pagesRemoved,t,i),this.removePageStatus=!0,this.updateRootBookmark().then((t=>this.getPageSizes())).then((t=>e))}))))},n.insertBlankPages=function(t,e,n){if(!this.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");this.info.pageSizes={};const i=this.getPageCount();if("number"!=typeof e||"number"!=typeof n)throw new Error("param error. Only number is available.");return Uy(t,i,"insert"),this.api.insertBlankPages(this.id,t,e,n).then((t=>{const e=[];return t.forEach((t=>{e.push(Promise.resolve((()=>(delete this.ocgs,this.api.getLayerNodes(this.id).then((t=>this.ocgs=t)).then((e=>t)).then((t=>{if(!t)return!1;this.info.pageCount++;let e=new jv(t,this);return this.pageCache.splice(t.index,0,e),this.updatePageIndex(t.index+1,this.info.pageCount-1),this.PDFForm&&this.PDFForm.afterInsertPage(t.index),e}))))()))})),Jy(e).then((e=>(this.updatePageLabelsByAction("insertPagesByRange",[t.map((t=>t.index))]),this.engine.eventEmitter.emit(et.insertPages,e),e))).then((t=>this.getPageSizes().then((e=>this.updateRootBookmark().then((e=>t))))))}))},n.rotatePages=function(t,e){if(!this.checkPermission(pe.assemble|pe.modify))throw new Error("Permission error");if(Object.values(Rt).every((t=>t!==e)))throw new Error("rotation parameter error");const n=this.getPageCount();Uy(t,n,"get");const i=so(t);return zy(this,i).then((n=>{const i=n.map((t=>t.getRotation()));return this.api.rotatePages(this.id,t,e).then((t=>{const r=[];return n.forEach((t=>{this.pageCache[t.getIndex()].info.rotation=e,r.push(this.getPageSizes())})),Promise.all(r).then((t=>{this.engine.eventEmitter.emit(et.pagesRotated,n,e,i)}))}))}))},n.checkDocHasPageLabel=function(){return t=this._pageLabelInfo,e=this,t.hasPageLabelStatus===Dy.UNINITIALIZED&&Iy(t,e),t.hasPageLabel;var t,e},n.checkDocIsUseLogicPage=function(){return this.api.checkDocIsUseLogicPage(this.id)},n.getPageIndexByLabelText=function(t){return this.api.getPageIndexByLabelText(this.id,t)},n.getCurrentPageLabelInfo=function(t){return this.api.getCurrentPageLabelInfo(this.id,t)},n.formatPageNumbers=function(t,e){return this.api.formatPageNumbers(this.id,!1,t,e).then((t=>(Ry(this._pageLabelInfo,this),this.engine.eventEmitter.emit(et.pagesLabelChange),t)))},n.formatPageNumbersExtendNumbering=function(t){return this.api.formatPageNumbers(this.id,!0,t).then((t=>(Ry(this._pageLabelInfo,this),this.engine.eventEmitter.emit(et.pagesLabelChange),t)))},n.updatePageLabelsByAction=async function(t,e){const n=await this.api.updatePageLabelsByAction(this.id,t,e);return Ry(this._pageLabelInfo,this),this.engine.eventEmitter.emit(et.pagesLabelChange),n},n.getPageEditor=function(){return this.pageEditor?this.pageEditor:this.pageEditor=new Py(this)},n.isCPDF=function(){return this.api.isCPDF(this.id)},n.getDocURI=function(){return this.api.getDocURI(this.id)},n.getVersionID=function(){return this.api.getVersionID(this.id)},n.convertToCPDF=function(t,e,n,i){return this.api.convertToCPDF(this.id,t,e,n,i).then()},n.removeCDocId=function(t,e,n,i){return this.api.removeCDocId(this.id,t,e,n,i).then()},n.removeLayerNode=function(t){if(!t&&0!==t)return Promise.resolve(!1);let e;return e=this.getLayerNodeById(t).hasLayer?this.getLayerRelatedAnnots(t).then((e=>(e&&e.length>0&&ew(this,e).then((t=>{t.forEach((t=>{t.page.removeAnnotById(t.id)}))})),this.api.removeLayerNode(this.id,t)))):this.api.removeLayerNode(this.id,t),e.then((e=>(e&&(this.engine.eventEmitter.emit(et.layerRemoved,this),this.engine.eventEmitter.emit(et.layerVisibleChange,this),Xy(this.ocgs,[t])),e)))},n.flattenLayers=function(){const t=[],e=function(n){if(n&&n.hasLayer&&!1===n.visible&&t.push(n),n.children&&n.children.length>0)for(let t=0;t<n.children.length;t++)e(n.children[t])};e(this.ocgs);const n=[];return t.forEach((t=>{n.push(this.getLayerRelatedAnnots(t.id))})),Promise.all(n).then((t=>(t&&t.length>0&&(t=t.reduce(((t,e)=>t=t.concat(e)),[]),ew(this,t).then((t=>{t.forEach((t=>{t.page.removeAnnotById(t.id)}))}))),this.api.flattenLayers(this.id)))).then((t=>(t&&(this.ocgs.children=[]),t)))},n.getVisiblePageLayers=function(t){const e=[];return t.forEach((t=>{const n=this.pageCache[t];n&&e.push(this.api.getLayersByPage(this.id,n.getId()))})),Promise.all(e).then((t=>{let e=[];return t.forEach((t=>{e=e.concat(t)})),e}))},n.updateLayerInfo=function(t){if(!t.id&&0!==t.id)return Promise.resolve(!1);const e=this.getLayerNodeById(t.id);return this.api.updateLayerInfo(this.id,t).then((n=>(n&&y(e,t),n)))},n.mergeLayers=function(t,e){return t&&0!==t.length&&e?(t=t.filter((t=>t!==e)),this.api.mergeLayers(this.id,t,e).then((n=>(n&&(Xy(this.ocgs,t),this.engine.eventEmitter.emit(et.layerMerged,t,e)),n)))):Promise.resolve(!1)},n.getLayerRelatedAnnots=function(t){return this.api.getLayerRelatedAnnots(this.id,t)},n.layerMoveTo=function(t,e,n){return this.api.layerMoveTo(this.id,t,e,n).then((t=>t?(this.ocgs="",this.getLayerNodesJson().then((()=>t))):t))},n.removeMetadata=function(t){if(!t||0===t.length)return;const e=[];return t.forEach((t=>{e.push(this.api.removeMetadata(this.id,t).then((()=>{this.metadata.hasOwnProperty(t)&&delete this.metadata[t],this.metadata.custom&&this.metadata.custom.hasOwnProperty(t)&&delete this.metadata.custom[t]})))})),Promise.all(e).then((t=>(this.engine.eventEmitter.emit(et.metaDataChanged,this),!0)))},n.getDestinationsArray=function(){const t=this.getId();return this.api.getDestinationsArray(t)},n.getTabOrder=function(t){return this.api.getTabOrder(this.id,t)},n.setTabOrder=function(t,e){return this.api.setTabOrder(this.id,t,e).then((t=>(this.engine.eventEmitter.emit(et.docModified,this),t)))},n.setStructureOrder=function(t,e){const n=e=>{if(0!==e.length)return this.api.setStructureOrder(this.id,t,e).then((t=>(this.engine.eventEmitter.emit(et.docModified,this),t)))};return e?n(e):this.getPageAnnotsIdList(t).then(n)},n.getEmbeddedFontData=function(){return this.api.getEmbeddedFontData(this.id)},n.computeAuditSpace=function(){return this.api.computeAuditSpace(this.id)},n.optimizer=function(t,e){return this.api.optimizer(this.id,t,e).then((t=>({fileName:this.info.fileName,buffer:t})))},n.optimizeScannedPDF=function(t,e){const n=this.getPageCount();let i=t.pageRange;if(i){i+="",i.endsWith(",")&&(i=i.slice(0,i.length-1));let e=i.split(",").map((t=>{let e=t.split("-");if(e.length>1){t=[];const i=Math.min.apply(Math,Hy(w.Z,e)),r=Math.min(Math.max.apply(Math,Hy(w.Z,e)),n);for(let e=i;e<=r;e++)t.push(e);t=t.join(",")}return t}));e=e.join(",").split(",").map((t=>t-1)),i=Array.from(new Set(e.sort(((t,e)=>t-e)))),t.pageRange=i}return this.api.optimizeScannedPDF(this.id,t,e).then((t=>{if(!t)return!1;return{fileName:this.info.fileName,buffer:t}}))},n.importAsLayer=function(t){return t.targetFileName||(t.targetFileName=this.metadata.FileName||this.metadata.Title),this.api.importAsLayer(this.id,t).then((t=>(t&&(this.ocgs=t,this.engine.eventEmitter.emit(et.layerVisibleChange,this)),t)))},n.previewImportLayer=function(t){return this.api.previewImportLayer(this.id,t)},n.reloadLayer=function(){return this.api.reloadLayer(this.id)},n.exportMeasureData=function(t){return this.api.exportMeasureData(this.id,t).then((t=>{let e=this.info.fileName||"Untitled.pdf";return e=e.substr(0,e.lastIndexOf("."))+".csv",{fileName:e,buffer:t}}))},n.setRenderConfigLineWeight=function(t){return this.api.setRenderConfigLineWeight(this.id,t)},n.search=function(t,e,n,i){return this.api.searchDoc(this.id,t,e,n,i)},n.generateDocHash=function(t){return this.api.generateDocHash(this.id,t)},n.getSignIdForEvidence=function(){return this.api.getSignIdForEvidence(this.id)},n.getDocAuditTrail=function(t){return this.getAssignInfoForESignCN().then((e=>{let n=[];const i=e&&e.recipients;return i&&i.length>0&&(n=i.reduce(((t,e)=>{const n=e.annots.map((t=>({...t,assignUserName:e.userName,assignUserEmail:e.email,company:e.company})));return[].concat(Hy(w.Z,t),Hy(w.Z,n))}),[]).filter((t=>"FullSignature"===t.type))),this.api.getDocAuditTrail(this.id,t,n).then((t=>t))}))},n.updatePropAuthDictForESignCN=function({fieldName:t,willingnessInfo:e}){return this.api.updatePropAuthDictForESignCN(this.id,t,e)},n.assignSignerForESignCN=function(t){const e=[],{configInfo:n,recipients:i}=t;return i.forEach((t=>{t.fields.forEach(((i,r)=>{const o={fieldId:i.id,email:t.email,phoneNumber:t.mobile,nameValue:t.name,company:t.company,color:t.color,fieldType:i.fieldType,pageId:i.pageId,signMode:t.signMode,companyId:t.companyId,companyName:t.companyName,docStore:n.docStore,processId:n.processId,taskName:n.taskName?n.taskName+"":"",isFirst:0===r,isLast:r===t.fields.length-1},s=this.api.assignSignerForESignCN(this.id,o);e.push(s)}))})),Promise.all(e)},n.getAssignInfoForESignCN=function(){return this.api.getAssignInfoForESignCN(this.id).then((t=>{const e=t.reduce(((t,e)=>[].concat(Hy(w.Z,t),Hy(w.Z,e))),[]).map((t=>(t.email=t.email?t.email:null,t.phoneNumber=t.phoneNumber?t.phoneNumber:null,t.companyId=t.EnterpriseId||"",t)));let n=!1;const i=e.reduce(((t,e)=>{e.annots.some((t=>t.isPagingSig))&&(n=!0);const i=`${e.email}-${e.phoneNumber}-${e.company}`;return t[i]?t[i]={...t[i],annots:[].concat(Hy(w.Z,t[i].annots),Hy(w.Z,e.annots))}:t[i]=e,t}),{});return(n?this.getAllPagingSigsInfo():Promise.resolve()).then((t=>{t&&(t=t.map((t=>t.map((t=>(t.id=t.objNum,delete t.objNum,t))))));let e=Object.keys(i).map((t=>i[t]));const n={};return e[0]&&(n.docStore=e[0].docStore,n.processId=e[0].processId,n.taskName=e[0].taskName),e=e.map((e=>{const n=e.annots.some((t=>"FullSignature"===t.type&&!t.isESignCNSignature));return e.illegalFillBehavior=n,delete e.docStore,delete e.processId,delete e.taskName,t&&t.length>0&&(e.annots=e.annots.map((e=>(e.isPagingSig&&t.forEach((t=>{t[0].id===e.id&&(e.pagingSigs=t)})),e)))),e})),this.getOrderOfSignFlowFile().then((t=>(e.forEach((e=>{const n=`${e.email?e.email:""}${e.phoneNumber?e.phoneNumber:""}${e.company?e.company:""}`;e.sort=t.indexOf(n)})),e.sort(((t,e)=>t.sort-e.sort)),e))).then((t=>({configInfo:n,recipients:t})))}))}))},n.checkFieldWhetherFill=function(t){return this.api.checkFieldWhetherFill(this.id,t)},n.getOrderOfSignFlowFile=function(){return this.api.getOrderOfSignFlowFile(this.id)},n.setESignCNFlowSignMode=function(t){return this.api.setESignCNFlowSignMode(this.id,t)},n.getESignCNFlowSignMode=function(){return this.api.getESignCNFlowSignMode(this.id)},n.isESignCNFile=function(){return this.api.isESignCNFile(this.id)},n.getESignCNMode=function(t){return this.api.getESignCNMode(this.id,t)},n.setSignatureAP=function({pageIndex:t,annotId:e,inkSignBuffer:n,pagingSigObjNum:i}){return this.api.setSignatureAP(this.id,t,e,n,i)},n.getFlowSignInfo=function(){return this.api.getFlowSignInfo(this.id)},n.addAuditTrail=function(){return this.api.addAuditTrail(this.id)},n.convertToTextMarkup=function(t){return this.api.convertToTextMarkup(this.id,t).then((t=>{t.forEach((t=>{const e=this.pageCache[t];e&&e.getUnloadedAnnots().then((t=>this.engine.eventEmitter.emit(et.annotationAdd,t,e)))}))}))},n.redactSearch=function(t,e,n,i,r){return this.api.redactSearch(this.id,t,e,n,i,r).then((t=>{let e=[];return t.forEach((t=>{const n=this.pageCache[t];n&&e.push(n.getUnloadedAnnots().then((t=>{this.engine.eventEmitter.emit(et.annotationAdd,t,n)})))})),Promise.all(e)}))},n.isScannedDoc=function(){return this.api.isScannedDoc(this.id)},n.getCompareFileFilterNums=function(){return this.api.getCompareFileFilterNums(this.id)},n.readonly=async function(){const t=this.info.pdfaid;let e=!1;const n=window.localStorage.getItem("PREFERENCES-DOCUMENTS");if(n){"onlyForPDFA"===JSON.parse(n).vieMode&&(e=!0)}return t&&e&&!this.pdfaEditable},n.isPdfaDoc=async function(){return this.metadata.pdfaid||await this.getMetadata(),!!this.metadata.pdfaid},n.setPdfaEditable=function(t){t&&this.api.removePDFAID(this.id),this.pdfaEditable=t},n.getText=function(t){if(!this.checkPermission(pe.extract))throw new Error("Permission error");if(this.isStaticXFA())throw new Error("File type error, current is Static documents");const e=this.getPageCount();Zy(t,e-1);const n=(0,_.getUniqueId)("task_progress"),i=new xy((()=>{this.api.cancelTaskProgress(this.id,n)}));return this.api.getText(this.id,t,n,(t=>{i.updateProgress(t)})),i},n.createSummarizeComments=function(t,e){const n=this.getId();return this.PDFForm?this.PDFForm.addTask().then((()=>this.api.createSummarizeComments(this.id,t,e))):this.api.createSummarizeComments(n,t,e)},n.hiddenDataSanitizeDocument=async function(){await this.api.hiddenDataSanitizeDocument(this.id),this.otherOptions.afterHiddenDataOperateAndReopenFile=!0},n.hiddenDataRemoveHiddenInfo=async function(t){await this.api.hiddenDataRemoveHiddenInfo(this.id,t),this.otherOptions.afterHiddenDataOperateAndReopenFile=!0},n.getLRContentForChatWithDoc=function(t){return this.api.getLRContentForChatWithDoc(this.id,t)},n.searchText=function(t,e,n={}){const i=this.getPageCount();return Zy(t,i-1),this.search(t,e,n,!1).then((t=>{var e={};for(const[r,o]of Object.entries(t)){var n=[],i={};o.forEach((t=>{var{rects:e,word:r}=t;i={rects:e,word:r},n.push(i)})),e[r]=n}return e}))},n.loadThumbnail=function(t){let{pageIndex:e,scale:n,rotation:i,type:r,width:o,height:s}=t;if("number"!=typeof e)return Promise.reject(new Error("Options missing: 'pageIndex'"));const a=this.getPageCount();return e<0||e>=a?Promise.reject(new Error(`Range of 'pageIndex' must be between 0 to ${a-1}(inclusive), but actual: ${e}.`)):this.getPageByIndex(e).then((t=>{if(!t)throw new Error(`Cannot obtains the page of index: ${e}`);if(!n){const e=t.getPxWidth(),i=t.getPxHeight();o||s||(o=200,s=300);const r=o/e,a=s/i;n=isNaN(r)?a:isNaN(a)?r:Math.min(r,a);const c=Math.min(st.INTERNAL_THUMBNAIL_BITMAP_WIDTH/e,st.INTERNAL_THUMBNAIL_BITMAP_HEIGHT/i);n/=c}return t.getThumb(i||0,n).then((t=>{switch(r||"canvas"){case"canvas":return function(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");return Wy(t).then(av).then((t=>(n.drawImage(t,0,0),URL.revokeObjectURL(t.src),e)))}(t);case"image":return(e=t,Wy(e).then(av)).then((t=>(this.addDestroyHook((()=>{URL.revokeObjectURL(t.src)})),t)));case"buffer":return function(t){return Wy(t).then((t=>{const e=new FileReader;return new Promise((n=>{e.onloadend=()=>{n(e.result)},e.readAsArrayBuffer(t)}))}))}(t);default:throw new Error(`Invalid options.type: ${r}`)}var e}))}))},n.verifyDocSignature=function(t){const e=this.getId();return this.engine.ensureSideModeLoaded().then((n=>this.api.verifyDocSignature(e,t)))},n.setSelectedInfo=function(t){this.selectedInfo=t},n.clearSelectedInfo=function(t){this.selectedInfo=null,t&&(t.getStore().dispatch(st.STORE_NAMES.SELECTION_INFO,null),t.getPDFDocRender().pagesRender.pageRenders.forEach((t=>{t.$handler.find(".fv__mark-selection-blank").remove()})))},n.updateTextSelectInfo=function(){if(!this.selectedInfo||this.selectedInfo.type!=Jt.Text)return Promise.resolve([]);let t=this.selectedInfo.selectedPages,e=[];for(const n of t){const t=n.pageRender.getPDFPage().then((t=>t.getTextByIndex(n.characterIndexStart,n.characterIndexEnd))).then((t=>{n.text=t}));e.push(t)}return Promise.all(e)},n.addTextSelectedInfo=function(t,e,n,i,r=void 0,o=void 0,s=void 0,a=void 0){const c={pageRender:t,characterIndexStart:e,characterIndexEnd:n,rectArray:i,text:r};if(this.selectedInfo&&this.selectedInfo.type==Jt.Text){this.selectedInfo.e=o,this.selectedInfo.panStartEvent=s,this.selectedInfo.panMoveArr=a;let e=this.selectedInfo.selectedPages,n=!1;for(const n in e)if(e[n].pageRender.index==t.index)return void(e[n]=c);for(const i in e)if(e[i].pageRender.index>t.index){e.splice(Number(i),0,c),n=!0;break}n||e.push(c)}else this.selectedInfo={type:Jt.Text,selectedPages:[c],e:o,panStartEvent:s,panMoveArr:a,getText:()=>{let t="";return this.selectedInfo.selectedPages.forEach((e=>{t=(""==t?"":t+"\r\n")+e.text})),t}}},n.clearAllDesignerAssistCache=function(){return this.api.clearAllDesignerAssistCache(this.getId())},n.removeEmbeddedFileByName=function(t){return this.removeEmbeddedFileByAttachments(t)},n.removeAllEmbeddedFiles=function(){return this.api.removeAllEmbeddedFiles(this.getId()).then((t=>(t&&this.engine.eventEmitter.emit(et.documentAttachmentRemove),t)))},n.getEmbeddedFileNames=function(){return this.api.getEmbeddedFileNames(this.getId())},n.addEmbeddedFile=function(t,e){if(!this.checkPermission(pe.modify))throw new Error("Permission error");return!(!e||!e.data)&&this.api.addEmbeddedFile(this.getId(),t,e).then((t=>(t&&this.engine.eventEmitter.emit(et.docAttachmentAdded),t)))},n.setEmbeddedFile=function(t,e){if(!this.checkPermission(pe.modify))throw new Error("Permission error");return!(!t||0===t.length||!e)&&this.api.setEmbeddedFile(this.id,t,e).then((t=>(t&&this.engine.eventEmitter.emit(et.documentAttachmentModify),t)))},n.getEmbeddedFile=function(t){return t&&0!==t.length?this.api.getEmbeddedFile(this.getId(),t):null},n.hasFixedPageFields=function(t){return this.api.hasFixedPageFields(this.getId(),t)},n.signForESignUS=function(t,e,n){if(!this.checkPermission(pe.annotForm)&&!this.checkPermission(pe.fillForm))throw new Error("Permission error");return this.api.signForESignUS(this.id,t,e).then((t=>{let e=[],n=0;for(let i=0;i<t.byteRange.length;i+=2){let r=t.byteRange[i],o=t.byteRange[i+1];n||(n=r+o+1);let s=t.buffer.slice(r,r+o);e.push(s)}let i=new Blob(e);const r=new FileReader;return Promise.all([new Promise(((e,n)=>{r.onload=()=>{e(new Uint8Array(r.result))},r.onerror=t=>n(t),r.readAsArrayBuffer(t.buffer)})),i.arrayBuffer(),n])})).then((([t,e,i])=>this.generateDocHash(e).then((e=>{let r=function(t){const e=t.split(""),n=new Uint8Array(t.length/2),i=function(t){const e=t.length,n=new Array(e);let i;for(var r=0;r<e;r++)i=t.charCodeAt(r),48<=i&&i<58?i-=48:i=(223&i)-65+10,n[r]=i;return n.reduce((function(t,e){return 16*t+e}),0)};let r="",o=0;for(let t=0;t<e.length;t++)r+=e[t],t>0&&t%2==1&&(n[o++]=i(r),r="");return window.btoa(String.fromCharCode.apply(String,Hy(w.Z,n)))}(e);return Promise.all([n(r),t,i])})).then((([t,e,n])=>{const i=e,r=Ny(t).reduce(((t,e)=>(t.push(jy[(240&e)>>>4]),t.push(jy[15&e]),t)),[]);i.set(r,n);const o=Ly(i,"").replace("data:;base64,","");return[new Blob([i],{type:"application/pdf"}),o]}))))},n.getFontCount=function(){return this.api.getFontCount(this.id)},n.getFont=function(t){return this.api.getFont(this.id,t)},n.addFillSignSignaturesToDoc=async function(t,e,n){const i=t.viewerUI.rootComponent.pdfUI,r=t.getOnlineSignList();if(e||(e=r),"string"==typeof e){let t=r.find((t=>t.id===e));e=t?[t]:[]}if(!e.length)return;let o={};for(const i of e){const{signType:e,styleId:r,id:s,groupId:c,dataURL:l,rect:h,pageIndex:u}=i,d=JSON.parse(window.sessionStorage.getItem("signedList")||"[]");let f=!1,p=t.getPDFPageRender(u);try{let t=await p.getPDFPage();if(t){const e=a(l.replace(/^data\:.*?base64,/,""));let n=await p.getSignaturePDFRect(s,o);n=n||h,await t.addImage(e,n,p.getRotation()),f=!0}}catch(e){return t.eventEmitter.emit("needSomeTipToShow","noPermission"),void(n&&n())}if(f){p.$handler.find(`#${s}`).remove(),d.push(r);const t=Hy(w.Z,new Set(d));window.sessionStorage.setItem("signedList",JSON.stringify(t))}}if(o=null,a=null,r.length===e.length)t.getOnlineSignManger().clear(),t.getStateHandlerManager().switchTo(xs.getStateName());else for(const n of e){const e=r.findIndex((t=>t.id===n.id));t.getOnlineSignManger().delete(e)}t.getOnlineSignList().length||(i.eventEmitter.emit("no-sign-apply"),window.sessionStorage.removeItem("curMouseClickSignRecord"));let s=!1;function a(t){let e=window.atob(t),n=e.length,i=new Uint8Array(n);for(;n--;)i[n]=e.charCodeAt(n);return i}function c(){const t=window.localStorage.getItem("CurFileSymbolId");if(!t)return;const e=JSON.parse(window.sessionStorage.getItem("signedList")||"[]");if(!e.length)return;const n=JSON.parse(window.localStorage.getItem("signedFileList")||"[]");n.find((e=>e.fileId===t))?n.forEach((n=>{n.fileId===t&&(n.signedList=Hy(w.Z,new Set([].concat(Hy(w.Z,n.signedList),Hy(w.Z,e)))))})):n.push({fileId:t,signedList:e}),window.localStorage.setItem("signedFileList",JSON.stringify(n))}JSON.parse(window.localStorage.getItem("pdfSignConfig")||"{}").isFlatteDocumentWhenApplyingAllSignatures&&"fill-sign"===i.activeMainPageTab.name&&(s=!0),s&&i.eventEmitter.emit("flatten-from-apply-all-fillSign"),c(),c=null,n&&n()},n.getLastSaveFlags=function(){return this.api.getLastSaveFlags(this.id)},n.saveWinlessData=function(){const t=[];return this.pageEditor&&t.push(this.pageEditor.endEdit()),this.touchup&&this.touchup.handleEvent("generateContent"),Promise.all(t)},n.customProtectDoc=function(t){return this.api.customProtectDoc(this.getId(),t)},n.drawTextString=function(t){if(t)return this.api.drawTextString(this.id,t)},S(e,[{key:"pdfPortfolio",get:function(){if(this.isPortfolio())return this._pdfPortfolio||(this._pdfPortfolio=new py(this.engine,this)),this._pdfPortfolio},set:function(t){this._pdfPortfolio=t}}]),e}(_.Disposable);function Wy(t){if(t.buffer){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");let i=new(Uint8ClampedArray||Uint8Array)(t.buffer),r=n.createImageData(t.width,t.height);return r.data.set(i),n.putImageData(r,0,0),new Promise((t=>{e.toBlob(t)}))}return t.image?Promise.resolve(t.image):Promise.reject(t)}const Yy=(t,e,n)=>{let i=[],r=0,o="",s=0,a=0;for(let c=0,l=t.length;c<l;c++){let l=t[c];switch(t[c]){default:o+=l;break;case n:1==r&&t[c+1]==n?(o+=n,c+=1):r++;break;case e:s=a,a=c,1==r&&(o+=e),r%2==0&&(r=0,i.push(o),o="")}}return(o.length||s==a-1)&&i.push(o),i},Gy=(t,e,n,i)=>("\t"==n?(t=t.split(n),e=e.split(n)):(e=Yy(e,n,i),t=Yy(t,n,i)),t.length,e.length,t.reduce(((t,n,i)=>(t[n]=e[i],t)),{})),Ky=(t,e,n=!0)=>{if(e.add(t.getId()),t.isMarkup()){let i=t.getReplies();i.forEach((t=>Ky(t,e))),i=t.getMarkedStates(),i.forEach((t=>e.add(t.getId()))),i=t.getReviewStates(),i.forEach((t=>e.add(t.getId()))),n&&t.isReplace&&t.isReplace()&&(i=t.getGroupElements(),i.forEach((t=>e.add(t.getId()))))}},qy=(t,e)=>{if((t|e-1-t)<0)throw new Error("Page range error.")},zy=(t,e)=>{const n=[];return e.forEach((e=>{n.push(t.getPageByIndex(e))})),Promise.all(n)},Jy=t=>{let e=[];return t.reduce(((n,i,r)=>n.then((n=>i.then((n=>(e[r]=n,r==t.length-1?e:i)))))),Promise.resolve())},Zy=(t,e)=>{if(!Array.isArray(t))throw new Error("Param error. Only array is available.");if(0===t.length)throw new Error("Param error. Non-valid array.");t.forEach((t=>{if(isNaN(t)||t<0||t>e)throw new Error("Param error: Index is out of the valid range.")}))},Xy=(t,e)=>{const n=function(t){if(t.children&&t.children.length>0)for(let e=t.children.length-1;e>-1;e--){n(t.children[e])&&t.children.splice(e,1)}return e.indexOf(t.id)>-1?t:null};n(t)},Qy=(t,e)=>{if(!e.checkPermission(pe.annotForm)&&!e.checkPermission(pe.fillForm))throw new Error("Permission error");if(!t)throw new Error(`Invalid param pagingSigConfig: ${t}.`);if(!t.pageRange||"number"!=typeof t.pageRange[0]||t.pageRange[0]<1||"number"!=typeof t.pageRange[1]||t.pageRange[1]>e.getPageCount()||t.pageRange[0]>=t.pageRange[1])throw new Error(`Invalid param pagingSigConfig.pageRange: ${t.pageRange}.`);if(!["left","top","right","bottom"].includes(t.position))throw new Error(`Invalid param pagingSigConfig.position: ${t.position}.`);if("number"!=typeof t.width||t.width<0)throw new Error(`Invalid param pagingSigConfig.width: ${t.width}.`);if("number"!=typeof t.height||t.height<0)throw new Error(`Invalid param pagingSigConfig.height: ${t.height}.`);if("number"!=typeof t.offset||t.offset<0)throw new Error(`Invalid param pagingSigConfig.offset: ${t.offset}.`);if("number"!=typeof t.firstPagePercent||t.firstPagePercent<=0||t.firstPagePercent>=1)throw new Error(`Invalid param pagingSigConfig.firstPagePercent: ${t.firstPagePercent}.`);const n=t.pageRange[0]-1;return e.getPageSizesByIndex(n).then((e=>{const i=e[n];let r;if(r="left"===t.position||"right"===t.position?t.offset+t.height>i.height:t.offset+t.width>i.width,r=r||t.width>i.width||t.height>i.height,r)throw new Error("Paging seal signature out of page.")}))},tw=t=>{var e,n;t={...t,sealPosition:null!=(e=t.position)?e:t.sealPosition,sealOffset:null!=(n=t.offset)?n:t.sealOffset};let i=Promise.resolve(t);return"string"==typeof t.image&&t.image.length>0&&(i=fetch(t.image).then((t=>t.blob().then((t=>new Promise((e=>{let n=new Image;n.src=URL.createObjectURL(t),n.onload=()=>{URL.revokeObjectURL(n.getAttribute("src"));let i=new FileReader;i.readAsArrayBuffer(t),i.onloadend=()=>{e(i.result)}},n.onerror=function(){URL.revokeObjectURL(n.getAttribute("src")),e()}})))))).then((e=>(e&&(t.inkSign=e),t)))),delete t.position,delete t.offset,delete t.image,i},ew=(t,e)=>t.getAnnots().then((t=>{const n=[];for(let i=0;i<t.length&&n.length!==e.length;i++){const r=t[i];for(let t=0;t<r.length&&n.length!==e.length;t++){const i=r[t];e.indexOf(i.objectNumber)>-1&&n.push(i)}}return n}));var nw=$y;let iw=function(t){function e(e,n){return t.call(this,e,n)||this}return(0,E.Z)(e,t),e}(xm);var rw=iw;let ow=function(t){function e(e,n){return t.call(this,e,n)||this}return(0,E.Z)(e,t),e.prototype.isReplace=function(){return"Replace"===this.info.typeAlias},e}(xm);var sw=ow;let aw=function(t){function e(e,n){return t.call(this,e,n)||this}return(0,E.Z)(e,t),e}(xm);var cw=aw;let lw=function(t){function e(e,n){return t.call(this,e,n)||this}return(0,E.Z)(e,t),e}(xm);var hw=lw;let uw=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getEndPoint=function(){return this.info.endPoint},n.setEndPoint=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setLineEndPoint(n.getId(),e.getId(),this.getId(),t.x,t.y).then((t=>this.update(ge.endPointUpdated))).then((()=>{this.info.endPoint=t,this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)}))},n.getStartPoint=function(){return this.info.startPoint},n.setStartPoint=function(t){this.checkModidyPerm();const e=!arguments[1];let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setLineStartPoint(i.getId(),n.getId(),this.getId(),t.x,t.y).then((t=>this.update(e&&ge.startPointUpdated))).then((()=>{this.info.startPoint=t,e&&this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],n)}))},n.getEndingStyle=function(){return this.info.endingStyle},n.getStartStyle=function(){return this.info.startStyle},n.setEndingStyle=function(t,e){this.checkModidyPerm();let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setAnnotEndingStyle(i.getId(),n.getId(),this.getId(),t,e).then((t=>this.update(ge.endingStyleUpdated))).then((()=>{t?this.info.startStyle=e:this.info.endingStyle=e,this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],n)}))},n.flip=function(){let t=this.getStartPoint(),e=this.getEndPoint();const n=new M;return n.rotateAt(-(t.x+e.x)/2,-(t.y+e.y)/2,Math.PI,!1),t=n.transformPoint(t.x,t.y),e=n.transformPoint(e.x,e.y),this.setStartPoint({x:t[0],y:t[1]},!0).then((t=>this.setEndPoint({x:e[0],y:e[1]})))},n.hasCaption=function(){return!!this.info.hasCaption},n.enableCaption=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.enableCaption(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.enableCaptionUpdated))).then((()=>{this.info.hasCaption=t,this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)}))},n.getCaptionPoint=function(){const t=this.getCaptionOffset();let{start:e,end:n}=this.getLeaderLinePoints(),i=new Dc(e.x,e.y),r=new Dc(n.x,n.y);const o=this.getLeaderLineOffset();if(o>0){const t=this.getLeaderLineLength()>0?1:-1;let e=i.move(o,r),n=r.move(o,i);i=e.rotate(t*-Math.PI/2,i),r=n.rotate(t*Math.PI/2,r)}const s=i.distanceTo(r),a=i.move(s/2,r);let c=a;if(0!==t.x||0!==t.y){const e=a.move(t.y,i).rotate(Math.PI/2,a);let n=Math.PI/2;n=t.y>0?-Math.PI/2:Math.PI/2,c=e.move(t.x,a).rotate(n,e)}return c},n.setContent=function(e){return t.prototype.setContent.call(this,e).then((t=>(t&&this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage()),this.updateInfo(this.info),t)))},n.getStyleFillColor=function(){return this.info.styleFillColor},n.setStyleFillColor=function(t){this.checkModidyPerm(),0!==t&&(t=(0,_.colorConvertor)(t,"int"));let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotFillColor(n.getId(),e.getId(),this.getId(),t).then((n=>(n&&(this.info.styleFillColor=t,this.info.fillColor=t,this.eventEmitter.emit(et.annotationUpdated,[this],e,ge.styleFillColorUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)),this.updateInfo(this.info),n)))},n.getLeaderLineLength=function(){return this.info.leaderLineLength||0},n.getLeaderLineExtend=function(){return this.info.leaderLineExtensionLength||0},n.setLeaderLineExtend=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotLeaderLineExtend(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.leaderLineExtendUpdated))).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)}))},n.getLeaderLineOffset=function(){return this.info.leaderLineOffset},n.setLeaderLineOffset=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotLeaderLineOffset(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.leaderLineOffsetUpdated))).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)}))},n.getCaptionPos=function(){return this.info.capPos},n.calculateLeaderLine=function(){let t=this.getStartPoint(),e=this.getEndPoint(),n=e.y-t.y,i=e.x-t.x,r=this.k=-1/(n/i),o=Math.atan(r),s=this.getLeaderLineLength(),a=1,c=1;isFinite(r)?0==i?a=c=s<0?n>0?1:-1:n<0?1:-1:i>0?n>0?(a=s>0?-1:1,c=s>0?1:-1):c=a=s>0?1:-1:n>0?c=a=s>0?-1:1:(a=s>0?1:-1,c=s>0?-1:1):a=c=s>0?i>0?1:-1:i<0?1:-1;let l=a*Math.abs(Math.cos(o)*s),h=c*Math.abs(Math.sin(o)*s);this.leaderSartPoit={x:t.x+l,y:t.y+h},this.leaderEndPoint={x:e.x+l,y:e.y+h},this.Sb=this.leaderSartPoit.y-this.k*this.leaderSartPoit.x,this.Eb=this.leaderEndPoint.y-this.k*this.leaderEndPoint.x},n.getLeaderLinePoints=function(){return this.leaderSartPoit||this.calculateLeaderLine(),{start:this.leaderSartPoit,end:this.leaderEndPoint}},n._update=function(){return t.prototype._update.call(this).then((t=>(this.calculateLeaderLine(),this)))},n.update=function(t,e=!0){return this._update().then((()=>{const n=this.getPDFPage();return e&&t&&this.eventEmitter.emit(et.annotationUpdated,[this],n,t),this}))},n.setLeaderLineLength=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotLeaderLineLength(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.leaderLineLengthUpdated))).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)}))},n.getMeasureInfo=function(){return""},n.getCaptionOffset=function(){return this.info.captionOffset},n.setCaptionOffset=function(t,e){this.checkModidyPerm();let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setAnnotCaptionOffset(i.getId(),n.getId(),this.getId(),t,e).then((()=>this.update(ge.leaderCaptionOffsetUpdated))).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],n)}))},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this),n=this.info.startPoint,i=this.info.endPoint,r=this.info.leaderLineLength,o=this.info.leaderLineExtensionLength,s=this.info.leaderLineOffset,a=this.info.captionOffset,c=this.hasCaption()?"yes":"no",l=this.getCaptionColor();if(l=(0,_.convertFromNumberToHex)(16777215&l),this.info.styleFillColor){let t=(0,_.convertFromNumberToHex)(16777215&this.info.styleFillColor);e["interior-color"]=t,e.interiorColor=t}return y({},e,{start:n.x+","+n.y,end:i.x+","+i.y,head:st.LineEndingName[this.info.startStyle],tail:st.LineEndingName[this.info.endingStyle],leaderLength:r,leaderExtend:o,leaderOffset:s,captionOffset:a,caption:c,captionColor:l})},n.getMeasureRatio=function(){return this.info.measureRatio},n.setMeasureRatio=function({userSpaceValue:t=1,userSpaceUnit:e="inch",realValue:n=1,realUnit:i="inch"}={}){this.checkModidyPerm();let r=this.getPDFPage(),o=r.getPDFDoc();const s=Object.keys(Fn);if(!s.includes(e)||!s.includes(i))throw new Error("Param error. Please refer to Annot_Unit_Type");return this.page.doc.api.setMeasureRatio(o.getId(),r.getId(),this.getId(),{userSpaceValue:t,userSpaceUnit:e,realValue:n,realUnit:i}).then((()=>this.update(ge.measureRatioUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.getMeasureUnit=function(){return this.info.measureUnit},n.setMeasureUnit=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setMeasureUnit(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.measureUnitUpdated))).then((()=>{this.info.measureUnit=t;const e=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)}))},n.setCaptionColor=function(t){if(null==t)return Promise.resolve(!1);this.checkModidyPerm(),isNaN(t)&&(t=(0,_.colorConvertor)(t,"int",1));let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setCaptionColor(n.getId(),e.getId(),this.getId(),t).then((t=>t?this.update(ge.captionColorUpdated).then((()=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e),t))):t))},n.getCaptionColor=function(){return this.info.captionColor},e}(Em);var dw=uw;let fw=function(){function t(t,e){this.startPoint=t,this.points=e}var e=t.prototype;return e.isEmpty=function(){return 0===this.points.length},e.optimize=function(){const e=Array.from(new Set(this.points.map((t=>JSON.stringify(t))))).map((t=>JSON.parse(t)));if(1===e.length){const t=e[0];"lineTo"===t.type&&t.x===this.startPoint.x&&t.y===this.startPoint.y&&(e.length=0)}return new t(this.startPoint,e)},t}(),pw=function(){function t(t,e){this.startPoint=t,this.points=e}t.fromGSDKPath=function(e,n){const i=e.GetPointCount();if(0===i)return null;const r=n.PointType,o=[];let s=0;for(;;){const t=e.GetPointType(s),n=e.GetPoint(s);switch(t){case r.e_TypeLineTo:case r.e_TypeLineToCloseFigure:o.push({type:"lineTo",x:n.x,y:n.y,closeFigure:t===r.e_TypeLineToCloseFigure}),s++;break;case r.e_TypeMoveTo:o.push({type:"moveTo",x:n.x,y:n.y}),s++;break;case r.e_TypeBezierTo:const i=[],a=s+3;for(;s<a;s++){const t=e.GetPoint(s);i.push({x:t.x,y:t.y,closeFigure:e.GetPointType(s)===r.e_TypeBezierToCloseFigure})}o.push({type:"cubicBezierTo",operands:i})}if(s>=i-1)break}return new t(o[0],o.slice(1))},t.fromPointArray=function(e){if(e.length<2)throw new Error("Invalid path point array! The point count must be greater than 2");if("moveTo"!==e[0].type)throw new Error("Invalid path point array!, The type of first point must be 'moveTo'");return new t(e[0],e.slice(1))};var e=t.prototype;return e.getSegments=function(){return this.points.reduce(((t,e)=>{const n=t[t.length-1];return"lineTo"===e.type||"cubicBezierTo"==e.type?n.points.push(e):t.push(new fw(e,[])),t}),[new fw(this.startPoint,[])])},e.toPointArray=function(){return[this.startPoint].concat(this.points)},e.toVertexesArray=function(){return this.toPointArray().flatMap((function(t){return"cubicBezierTo"===t.type?t.operands.map((t=>({type:t.closeFigure?st.POINT_TYPE.BEZIER_TO_CLOSE_FIGURE:st.POINT_TYPE.BEZIER_TO,x:t.x,y:t.y}))):[{x:t.x,y:t.y,type:"lineTo"===t.type?t.closeFigure?st.POINT_TYPE.LINE_TO_CLOSE_FIGURE:st.POINT_TYPE.LINE_TO:st.POINT_TYPE.MOVE_TO}]}))},e.updatePoint=function(t,e){!function(t){if((0,_.isValidNumber)(t.x)&&(0,_.isValidNumber)(t.y))return!0;throw new Error(`Incorrect point: ${JSON.stringify(t)}`)}(e);const n=[this.startPoint].concat(this.points.flatMap((t=>"cubicBezierTo"===t.type?t.operands:t)));n[t].x=e.x,n[t].y=e.y},e.toGSDKPath=function(t){const e=new t.Path,n=t.PointF;return this.toPointArray().forEach((t=>{switch(t.type){case"moveTo":e.MoveTo(new n(t.x,t.y));break;case"lineTo":e.LineTo(new n(t.x,t.y)),t.closeFigure&&e.CloseFigure();break;case"cubicBezierTo":const i=t.operands;e.CubicBezierTo(new n(i[0].x,i[0].y),new n(i[1].x,i[1].y),new n(i[2].x,i[2].y));break;default:throw new Error(`Incorrect point: ${JSON.stringify(t)}, its type must be one of 'moveTo', 'lineTo' or 'cubicBezier'`)}})),e},t}();function gw(t){return!t||t.length<1?"":t.map((t=>"moveTo"===t.type||"lineTo"===t.type?[t.x,t.y].join(","):t.operands.flatMap((t=>[t.x,t.y])).join(","))).join(";")}let mw=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getVertexes=function(){return this.info.vertexes},n.getStyleFillColor=function(){return this.info.fillColor},n.setStyleFillColor=function(e){return this.checkModidyPerm(),t.prototype.setFillColor.call(this,e)},n.updateVertexes=function(t,{x:e,y:n}){this.checkModidyPerm();let i=this.getPDFPage(),r=i.getPDFDoc();return this.page.doc.api.updateAnnotVertexes(r.getId(),i.getId(),this.getId(),t,e,n).then((()=>(this.info[t]={x:e,y:n},this.update(ge.vertexesUpdated)))).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage())}))},n.setVertexes=function(t){this.checkModidyPerm();const e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotVertexes(n.getId(),e.getId(),this.getId(),t).then((()=>(this.info.vertexes=t,this.update(ge.vertexesUpdated)))).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage())}))},n.getMeasureInfo=function(){return""},n.getEndingStyle=function(){return this.info.endingStyle},n.setEndingStyle=function(t,e){this.checkModidyPerm();let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setAnnotEndingStyle(i.getId(),n.getId(),this.getId(),t,e).then((()=>{t?this.info.startStyle=e:this.info.endingStyle=e,this.eventEmitter.emit(et.annotationUpdated,[this],n,ge.endingStyleUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage())})).then((t=>this._update()))},n.getStartStyle=function(){return this.info.startStyle},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this),n=this.info.vertexes,i="";for(let t=0;t<n.length;t++)i+=n[t].x+","+n[t].y+";";if(i=i.substr(0,i.length-1),this.info.fillColor){let t=(0,_.convertFromNumberToHex)(16777215&this.info.fillColor);e["interior-color"]=t,e.interiorColor=t}if("PolyLineDimension"===this.getIntent()){e.caption=this.hasCaption()?"yes":"no";let t=this.getCaptionColor();e.captionColor=(0,_.convertFromNumberToHex)(16777215&t)}return y({},e,{head:st.LineEndingName[this.info.startStyle],tail:st.LineEndingName[this.info.endingStyle],vertices:i,path:gw(this.info.path)})},n.getMeasureRatio=function(){return this.info.measureRatio},n.setMeasureRatio=function({userSpaceValue:t=1,userSpaceUnit:e="inch",realValue:n=1,realUnit:i="inch"}={}){this.checkModidyPerm();let r=this.getPDFPage(),o=r.getPDFDoc();const s=Object.keys(Fn);if(!s.includes(e)||!s.includes(i))throw new Error("Param error. Please refer to Annot_Unit_Type");return this.page.doc.api.setMeasureRatio(o.getId(),r.getId(),this.getId(),{userSpaceValue:t,userSpaceUnit:e,realValue:n,realUnit:i}).then((()=>this.update(ge.measureRatioUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.getMeasureUnit=function(){return this.info.measureUnit},n.setMeasureUnit=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setMeasureUnit(n.getId(),e.getId(),this.getId(),t,2).then((()=>this.update(ge.measureUnitUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.hasCaption=function(){return!!this.info.hasCaption},n.enableCaption=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.enableCaption(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.enableCaptionUpdated))).then((()=>{this.info.hasCaption=t,this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)}))},n.setCaptionColor=function(t){if(null==t)return Promise.resolve(!1);this.checkModidyPerm(),isNaN(t)&&(t=(0,_.colorConvertor)(t,"int",1));let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setCaptionColor(n.getId(),e.getId(),this.getId(),t).then((t=>t?this.update(ge.captionColorUpdated).then((()=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e),t))):t))},n.getCaptionColor=function(){return this.info.captionColor},n.getPath=function(){return this.info.path?pw.fromPointArray(this.info.path):null},n.getPathVertexes=function(){const t=this.getPath();return t?t.toVertexesArray():[]},n.updatePathVertex=function(t,e){const n=this.getPDFPage(),i=n.getPDFDoc();return this.api.updatePathPoint(i.getId(),n.getId(),this.getId(),t,e).then((()=>this.update(ge.pathUpdated).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],n)}))))},e}(Em);var vw=mw;let yw=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getVertexes=function(){return this.info.vertexes},n.updateVertexes=function(t,e){this.checkModidyPerm();let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.updateAnnotVertexes(i.getId(),n.getId(),this.getId(),t,e.x,e.y).then((()=>this.update(ge.vertexesUpdated))).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage())}))},n.setVertexes=function(t){this.checkModidyPerm();const e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotVertexes(n.getId(),e.getId(),this.getId(),t).then((()=>(this.info.vertexes=t,this.update(ge.vertexesUpdated)))).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage())}))},n.getMeasureInfo=function(){return""},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this),n=this.info.vertexes,i="";for(let t=0;t<n.length;t++)i+=n[t].x+","+n[t].y+";";if(i=i.substr(0,i.length-1),this.info.fillColor){let t=(0,_.convertFromNumberToHex)(16777215&this.info.fillColor);e["interior-color"]=t,e.interiorColor=t}if("PolygonDimension"===this.getIntent()){e.measureRatio=this.info.measureRatio,e.measureConversionFactor=this.info.measureConversionFactor,e.measureUnit=this.info.measureUnit,e.caption=this.hasCaption()?"yes":"no";let t=this.getCaptionColor();e.captionColor=(0,_.convertFromNumberToHex)(16777215&t)}return y({},e,{vertices:i,path:gw(this.info.path)})},n.getFillColor=function(){return this.info.fillColor},n.setFillColor=function(e){return this.checkModidyPerm(),t.prototype.setFillColor.call(this,e)},n.getMeasureRatio=function(){return this.info.measureRatio},n.setMeasureRatio=function({userSpaceValue:t=1,userSpaceUnit:e="inch",realValue:n=1,realUnit:i="inch"}={}){this.checkModidyPerm();let r=this.getPDFPage(),o=r.getPDFDoc();const s=Object.keys(Fn);if(!s.includes(e)||!s.includes(i))throw new Error("Param error. Please refer to Annot_Unit_Type");return this.page.doc.api.setMeasureRatio(o.getId(),r.getId(),this.getId(),{userSpaceValue:t,userSpaceUnit:e,realValue:n,realUnit:i}).then((()=>this.update(ge.measureRatioUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.getMeasureUnit=function(){return this.info.measureUnit},n.setMeasureUnit=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setMeasureUnit(n.getId(),e.getId(),this.getId(),t,2).then((()=>this.update(ge.measureUnitUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.hasCaption=function(){return!!this.info.hasCaption},n.enableCaption=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.enableCaption(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.enableCaptionUpdated))).then((()=>{this.info.hasCaption=t,this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)}))},n.setCaptionColor=function(t){if(null==t)return Promise.resolve(!1);this.checkModidyPerm(),isNaN(t)&&(t=(0,_.colorConvertor)(t,"int",1));let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setCaptionColor(n.getId(),e.getId(),this.getId(),t).then((t=>t?this.update(ge.captionColorUpdated).then((()=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e),t))):t))},n.getCaptionColor=function(){return this.info.captionColor},n.getPath=function(){return this.info.path?pw.fromPointArray(this.info.path):null},n.getPathVertexes=function(){const t=this.getPath();return t?t.toVertexesArray():[]},n.updatePathVertex=function(t,e){const n=this.getPDFPage(),i=n.getPDFDoc();return this.api.updatePathPoint(i.getId(),n.getId(),this.getId(),t,e).then((()=>this.update(ge.pathUpdated).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],n)}))))},e}(Em);var ww=yw;let bw=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getFlags=function(){return t.prototype.getFlags.call(this)},n.getIconName=function(){return this.info.iconName||"Note"},n.setIconName=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotIconName(n.getId(),e.getId(),this.getId(),t).then((t=>t?this.update(ge.iconNameUpdated).then((()=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage()),t))):t))},n.getState=function(){return this.info.state},n.setState=function(t){if(this.checkModidyPerm(),!this.isStateAnnot())return Promise.reject(new Error("Cannot set state name if it is not a state type annotation!"));if(this.getState()===t)return Promise.resolve(!0);const e=this.info.state,n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setStateName(i.getId(),n.getId(),this.getId(),t).then((n=>(this.info.state=t,this.eventEmitter.emit(et.stateAnnotNameUpdated,this,this.getPDFPage(),e,t),n)))},n.isStateAnnot=function(){return this.info.isStateAnnot},n.isReplyAnnot=function(){return!this.isStateAnnot()&&"R"===this.info.RT},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this),n={icon:this.info.iconName};if(this.info.isStateAnnot){n.statemodel=1==this.info.stateMode?"Marked":"Review";let t=this.page.annotIdMap[this.info.IRT];n.inreplyto=t&&t.getName();let i=this.info.state;n.state=i.charAt(0).toUpperCase()+i.slice(1),delete e.contents,delete e.color}return y({},e,n)},e}(Em);var Aw=bw;let Pw=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getInnerRect=function(){return this.info.innerRect},n.getFillColor=function(){return this.info.fillColor},n.setFillColor=function(e){return this.checkModidyPerm(),t.prototype.setFillColor.call(this,e)},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this),n=this.info.rect,i=this.info.innerRect;const r={fringe:[i.left-n.left,i.bottom-n.bottom,n.right-i.right,n.top-i.top].toString()};if(this.info.fillColor){let t=(0,_.colorConvertor)(16777215&this.info.fillColor,"#");e["interior-color"]=t,e.interiorColor=t}if("CircleDimension"===this.getIntent()){r.measureRatio=this.getMeasureRatio(),r.measureConversionFactor=this.getMeasureConversionFactor(),r.measureUnit=this.getMeasureUnit(),r.caption=this.hasCaption()?"yes":"no";let t=this.getCaptionColor();r.captionColor=(0,_.colorConvertor)(16777215&t,"#")}return y({},e,r)},n.getMeasureRatio=function(){return this.info.measureRatio},n.setMeasureRatio=function({userSpaceValue:t=1,userSpaceUnit:e=Fn.inch,realValue:n=1,realUnit:i=Fn.inch}={}){this.checkModidyPerm();let r=this.getPDFPage(),o=r.getPDFDoc();const s=Object.keys(Fn);if(!s.includes(e)||!s.includes(i))throw new Error("Param error. Please refer to Annot_Unit_Type");return this.page.doc.api.setMeasureRatio(o.getId(),r.getId(),this.getId(),{userSpaceValue:t,userSpaceUnit:e,realValue:n,realUnit:i}).then((()=>this.update(ge.measureRatioUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.getMeasureUnit=function(){return this.info.measureUnit},n.setMeasureUnit=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setMeasureUnit(n.getId(),e.getId(),this.getId(),t,2).then((()=>this.update(ge.measureUnitUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.getMeasureConversionFactor=function(){return this.info.measureConversionFactor},n.setMeasureConversionFactor=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setMeasureConversionFactor(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.measureConversionFactorUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.hasCaption=function(){return!!this.info.hasCaption},n.enableCaption=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.enableCaption(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.enableCaptionUpdated))).then((()=>{this.info.hasCaption=t,this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)}))},n.setCaptionColor=function(t){if(null==t)return Promise.resolve(!1);this.checkModidyPerm(),isNaN(t)&&(t=(0,_.colorConvertor)(t,"int",1));let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setCaptionColor(n.getId(),e.getId(),this.getId(),t).then((t=>t?this.update(ge.captionColorUpdated).then((()=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e),t))):t))},n.getCaptionColor=function(){return this.info.captionColor},e}(Em),Sw=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).updateFileSpec(),i}(0,E.Z)(e,t);var n=e.prototype;return n.getIconName=function(){return this.info.iconName||"PushPin"},n.setIconName=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotIconName(n.getId(),e.getId(),this.getId(),t).then((t=>t?this.update(ge.iconNameUpdated).then((()=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage()),t))):t))},n.exportToJSON=function(){return y({},t.prototype.exportToJSON.call(this),{icon:this.info.iconName})},n.update=function(e){return t.prototype.update.call(this,e).then((t=>(this.updateFileSpec(),t)))},n.updateFileSpec=function(){const t=this.info;this.fileSpec=t.fileSpec&&new Zi(t.fileSpec)||null},n.getFileSpec=function(){return this.fileSpec},n.getFileattachmentStream=function(){let t=this.getPDFPage(),e=t.getPDFDoc(),n=[];return this.page.doc.api.getFileattachmentStream(e.getId(),t.getId(),this.getId(),(({arrayBuffer:t,blob:e})=>{e?n=e:n.push(t)})).then((()=>n))},e}(Em);var Cw=Sw;let Ew=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getInnerRect=function(){return this.info.innerRect},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this),n=this.info.rect,i=this.info.innerRect,r=[i.left-n.left,i.bottom-n.bottom,n.right-i.right,n.top-i.top].toString();return delete e.style,delete e.width,delete e.dashPhase,delete e.intensity,y({},e,{fringe:r})},n.moveRectByCharIndex=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.moveCaretRectByCharIndex(n.getId(),e.getId(),this.getId(),t).then((t=>t?this.update(ge.rectUpdated).then((()=>(this.eventEmitter.emit(et.annotationMovedPosition,[this],this.getPDFPage(),this),t))):t))},e}(Em);var xw=Ew;let Dw=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getFillColor=function(){return this.info.fillColor},n.setFillColor=function(e){return t.prototype.setFillColor.call(this,e)},n.getInnerRect=function(){return this.info.innerRect},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this),n=this.info.rect,i=this.info.innerRect,r=[i.left-n.left,i.bottom-n.bottom,n.right-i.right,n.top-i.top].toString();if(this.info.fillColor){let t=(0,_.colorConvertor)(16777215&this.info.fillColor,"#");e["interior-color"]=t,e.interiorColor=t}const o={fringe:r};return"CustomDimension"===this.getIntent()&&(o.measureRatio=this.getMeasureRatio(),o.measureConversionFactor=this.getMeasureConversionFactor(),o.measureUnit=this.getMeasureUnit()),y({},e,o)},n.getMeasureRatio=function(){return this.info.measureRatio},n.setMeasureRatio=function({userSpaceValue:t=1,userSpaceUnit:e=Fn.inch,realValue:n=1,realUnit:i=Fn.inch}={}){this.checkModidyPerm();let r=this.getPDFPage(),o=r.getPDFDoc();const s=Object.keys(Fn);if(!s.includes(e)||!s.includes(i))throw new Error("Param error. Please refer to Annot_Unit_Type");return this.page.doc.api.setMeasureRatio(o.getId(),r.getId(),this.getId(),{userSpaceValue:t,userSpaceUnit:e,realValue:n,realUnit:i}).then((()=>this.update(ge.measureRatioUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.getMeasureUnit=function(){return this.info.measureUnit},n.setMeasureUnit=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setMeasureUnit(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.measureUnitUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.getMeasureConversionFactor=function(){return this.info.measureConversionFactor},n.setMeasureConversionFactor=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setMeasureConversionFactor(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.measureConversionFactorUpdated))).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},e}(Em),Iw=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,-1===e.borderColor&&"FreeTextTypewriter"!==e.intent&&(e.borderColor=16711680),i}(0,E.Z)(e,t);var n=e.prototype;return n.setAlignment=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAlignment(n.getId(),e.getId(),this.getId(),t).then((()=>(this.info.justification=t,this.eventEmitter.emit(et.annotationUpdated,[this],e,ge.alignmentUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage()),this.updateInfo(this.info),t)))},n.getAlignment=function(){return this.info.justification},n.getInnerRect=function(){return y({},this.info.innerRect)},n.setInnerRectNoAction=function(t){this.info.innerRect=t;let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotInnerRect(n.getId(),e.getId(),this.getId(),t).then((()=>{let t=this.getGroupElements();0==t.length&&(t=[this]);let e=[];for(let n=0,i=t.length;n<i;n++){let i=t[n];e[n]=i._update()}return Promise.all(e)}))},n.getIntent=function(){let e=t.prototype.getIntent.call(this);return e||(e="FreeTextTextbox"),e},n.setInnerRect=function(t){this.checkModidyPerm(),this.info.innerRect=t;let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotInnerRect(n.getId(),e.getId(),this.getId(),t).then((t=>t?this.update(ge.innerRectUpdated).then((()=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage()),t))):t))},n.getDefaultAppearance=function(){let t=y({},this.info.defaultAppearance);return delete t.flags,t},n.getFillColor=function(){return"FreeTextTypewriter"==this.info.intent?0:this.info.fillColor},n.setFillColor=function(t){this.checkModidyPerm(),t=0===t?0:(0,_.colorConvertor)(t,"int");let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotFillColor(n.getId(),e.getId(),this.getId(),t).then((n=>(n&&(this.info.fillColor=t,this.eventEmitter.emit(et.annotationUpdated,[this],e,ge.fillColorUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e),this.updateInfo(this.info)),n)))},n.getCalloutLinePoints=function(){return this.info.calloutLinePoints},n.setCalloutLinePoints=function(t){return this._setCalloutLinePoints(t).then((t=>this._update())).then((t=>{let e=this.getPDFPage();this.eventEmitter.emit(et.annotationUpdated,[this],e,ge.calloutLinePointsUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e)}))},n._setCalloutLinePoints=function(t){this.checkModidyPerm(),this.info.calloutLinePoints=t;let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setCalloutLinePoints(n.getId(),e.getId(),this.getId(),t).then((t=>this._update()))},n.updateCalloutFigure=function(t,e,n){this.checkModidyPerm(),this.info.calloutLinePoints=n;let i=this.getPDFPage(),r=i.getPDFDoc();return this.page.doc.api.updateCalloutFigure(r.getId(),i.getId(),this.getId(),t,e,n).then((()=>{let t=this.getGroupElements();0==t.length&&(t=[this]);let e=[];for(let n=0,i=t.length;n<i;n++){let i=t[n];e[n]=i._update()}return Promise.all(e)})).then((()=>{const t=this.getPDFPage();this.eventEmitter.emit(et.annotationUpdated,[this],this.getPDFPage(),ge.rectUpdated),this.eventEmitter.emit(et.annotationUpdated,[this],this.getPDFPage(),ge.innerRectUpdated),this.eventEmitter.emit(et.annotationUpdated,[this],this.getPDFPage(),ge.calloutLinePointsUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],t)}))},n.updateRectFigure=function(t,e){this.checkModidyPerm();const n=this.info.rect,i=this.info.innerRect;t=Ae(t),this.info.rect=t,this.info.innerRect=e;let r=this.getPDFPage(),o=r.getPDFDoc();return this.page.doc.api.updateRectFigure(o.getId(),r.getId(),this.getId(),t,e).then((t=>t?this.update(ge.rectUpdated).then((t=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage()),!0))):(this.info.rect=n,this.info.innerRect=i,t)))},n.getCalloutLineEndingStyle=function(){return this.info.calloutLineEndingStyle},n.setEndingStyle=function(t,e){return this.setCalloutLineEndingStyle(e)},n.setCalloutLineEndingStyle=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setCalloutLineEndingStyle(n.getId(),e.getId(),this.getId(),t).then((()=>{this.info.calloutLineEndingStyle=t,this.eventEmitter.emit(et.annotationUpdated,[this],e,ge.calloutLineEndingStyleUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage()),this.updateInfo(this.info)}))},n.setDefaultAppearance=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc(),i=(t=y({},this.info.defaultAppearance,t)).textColor,r=t.textSize;if("number"!=typeof i||"number"!=typeof r)throw new Error("param error. Only number is available.");if(i=(4278190080|i)>>>0,r<6||r>40)throw new Error("Text size is overflow. Available range is 6 to 40.");return t.textColor=i,t.textSize=r,this.page.doc.api.setDefaultAp(n.getId(),e.getId(),this.getId(),t).then((()=>this._update())).then((()=>{this.eventEmitter.emit(et.annotationUpdated,[this],e,ge.defaultAppearanceUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage())}))},n.getFontColor=function(){return 0==this.info.defaultAppearance.textColor?"#000000":(0,_.colorConvertor)(16777215&this.info.defaultAppearance.textColor,"#",0)},n.setFontColor=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return t=(0,_.colorConvertor)(t,"int",1),this.info.defaultAppearance.textColor=t,this.page.doc.api.setDefaultAp(n.getId(),e.getId(),this.getId(),this.info.defaultAppearance).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage())}))},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this);e.justification=this.info.justification;let n="";this.info.fontName&&(n+="/"+this.info.fontName+" "),null!=this.info.defaultAppearance.textSize&&(n+=this.info.defaultAppearance.textSize+" Tf ");let i=(0,_.convertFromNumberToRGBA)(this.getBorderColor());switch(n+=(i.r/255).toFixed(2)+" "+(i.g/255).toFixed(2)+" "+(i.b/255).toFixed(2)+" rg",e.defaultappearance=n,e.fontColor=(0,_.colorConvertor)(16777215&this.info.defaultAppearance.textColor,"#",0),this.info.fillColor&&(i=(0,_.convertFromNumberToHex)(16777215&this.info.fillColor),e["interior-color"]=i,e.interiorColor=i),this.info.intent){case"FreeTextCallout":{let t=this.info.rect,n=this.info.innerRect,i=[n.left-t.left,n.bottom-t.bottom,t.right-n.right,t.top-n.top].toString(),r=this.info.calloutLinePoints,o=r[0].x+","+r[0].y;return o+=","+r[1].x+","+r[1].y,o+=","+r[2].x+","+r[2].y,y({},e,{fringe:i,callout:o,head:st.LineEndingName[this.info.calloutLineEndingStyle]})}case"FreeTextTypewriter":break;default:{let t=this.info.rect,n=this.info.innerRect;return y({},e,{fringe:[n.left-t.left,n.bottom-t.bottom,t.right-n.right,t.top-n.top].toString()})}}return e},n.getContent=function(){let e="";if(this.info.RC.length>0){const t=(new DOMParser).parseFromString(this.info.RC,"text/xml");let n;t.children&&t.children[0]?n=t.children.item(0):t.childNodes&&t.childNodes.length>0&&(n=t.childNodes.item(0)),e=n?n.innerText||n.textContent:e}else e=t.prototype.getContent.call(this);return e},n.setContent=function(t){return this.checkModidyPerm(),this.info.RC="",this._setContent(t).then((t=>this.getPDFPage().getAnnotsByObjectNumArray([t]))).then((t=>this.update(ge.contentUpdated).then((t=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,t,this.getPDFPage()),t)))))},n.getWoff=function(){let t=this.getPDFPage();return t.doc.api.getAnnotWoff(t.getPDFDoc().getId(),t.getId(),this.getId())},n.getRotation=function(){return this.info.rotation||0},n.setRotation=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotRotation(n.getId(),e.getId(),this.getId(),t).then((t=>e.getAnnotsByObjectNumArray(t))).then((e=>{let n=0;for(e.length;n--;)e[n].info.rotation=t;return this.info.rotation=t,e})).then((t=>{let n=[];for(let e of t)n.push(e.update());return Promise.all(n).then((n=>(this.eventEmitter.emit(et.annotationUpdated,t,e,ge.rotationUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,t,e),t)))}))},n.setAppearanceWithoutFontFamily=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc(),i=(t=y({},this.info.defaultAppearance,t)).textColor,r=t.textSize;if("number"!=typeof i||"number"!=typeof r)throw new Error("param error. Only number is available.");if(i=(4278190080|i)>>>0,r<6||r>40)throw new Error("Text size is overflow. Available range is 6 to 40.");return t.textColor=i,t.textSize=r,this.page.doc.api.setDefaultAp(n.getId(),e.getId(),this.getId(),y({},t,{font:void 0})).then((()=>this._update())).then((()=>{this.info.defaultAppearance=t,this.eventEmitter.emit(et.annotationUpdated,[this],e,ge.defaultAppearanceUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage())}))},e}(Em);var Rw=Iw;let Tw=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getInnerRect=function(){return this.getRect()},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this);return e.icon=this.info.iconName,e},n.getIconName=function(){return this.info.iconName||""},n.setImage=function(t){return(t=>fetch(t).then((t=>t.blob().then((t=>({url:URL.createObjectURL(t),size:t.size}))))).catch((t=>{throw new Error("Could not load image!")})))(t).then((t=>{let e=this.getPDFPage(),n=e.getPDFDoc(),{url:i,size:r}=t;return this.page.doc.api.setAnnotAPBitmap(n.getId(),e.getId(),this.getId(),i,r).then((t=>{this.update(ge.imageUpdated)}))}))},n.getImage=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.getBitmapBuffer(n.getId(),e.getId(),this.getId()).then((e=>{if(!e.width||!e.height)return null;switch(t||"canvas"){case"canvas":return cv(e);case"image":return lv(e);case"buffer":return hv(e);default:throw new Error(`Invalid options.type: ${t}`)}}))},n.getRotation=function(){return this.info.rotation<0&&(this.info.rotation+=360),this.info.rotation},n.setRotation=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return t<0&&(t+=360),this.page.doc.api.setAnnotRotation(n.getId(),e.getId(),this.getId(),t).then((t=>e.getAnnotsByObjectNumArray(t))).then((e=>{for(let n=0;n<e.length;n++)e[n].info.rotation=t;return this.info.rotation=t,e})).then((t=>{let n=[];for(let e of t)n.push(e.update());return Promise.all(n).then((n=>(this.eventEmitter.emit(et.annotationUpdated,t,e,ge.rotationUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,t,e),t)))}))},e}(Em);var Fw=Tw;let _w=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,e.action&&(i.action=i.page.doc.engine.actionFactory.createAction(e.action,n.doc,i.page.doc.api,i.eventEmitter,(0,C.Z)(i))),i}(0,E.Z)(e,t);var n=e.prototype;return n.getFlags=function(){return-2&t.prototype.getFlags.call(this)},n.getAction=function(){return this.action},n.getActionPromise=function(){return Promise.resolve(this.action)},n.getHighlightingMode=function(){return this.info.highlightingMode},n.setHighlightingMode=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setHighlightingMode(n.getId(),e.getId(),this.getId(),t).then((t=>e.getAnnotsByObjectNumArray(t))).then((t=>{let e=[];for(let n=0,i=t.length;n<i;n++)e.push(t[n]._update());return Promise.all(e)})).then((t=>(this.eventEmitter.emit(et.annotationUpdated,t,e,ge.highlightingModeUpdated),this.eventEmitter.emit(et.annotationMovedPosition,t,e,this),t)))},n.hasPA=function(){return this.api.linkHasPA(this.page.doc.getId(),this.page.getId(),this.getId())},n.resetAByPA=function(){return this.api.linkResetAByPA(this.page.doc.getId(),this.page.getId(),this.getId()).then((t=>{if(t)return this.update(ge.actionDataUpdated).then((()=>{this.action=this.page.doc.engine.actionFactory.createAction(this.info.action,this.page.doc,this.page.doc.api,this.eventEmitter,this)}))}))},n.setAction=function(t,e=Er.AnnotMouseButtonReleased,n){this.checkModidyPerm();let i=this.getPDFPage(),r=i.getPDFDoc();return t=t.info?t.info:t,this.page.doc.api.setAction(r.getId(),i.getId(),this.getId(),t,e,n).then((t=>(this.action?t.type!==this.action.getType()?this.action=this.page.doc.engine.actionFactory.createAction(t,this.page.doc,this.page.doc.api,this.eventEmitter,this):this.action.updateAction(t):this.action=this.page.doc.engine.actionFactory.createAction(t,this.page.doc,this.page.doc.api,this.eventEmitter,this),this.update(ge.addAction)))).then((()=>(this.eventEmitter.emit(et.actionAdd,this),!0)))},n.setActionData=function(t,e){return t.setActionData(e).then((()=>(this.update(ge.actionDataUpdated),!0)))},n.removeAction=function(t=-1,e){let n=0,i=0;e&&(n=0,i=e.info.objNumber),delete this.info.action,delete this.action;let r=this.page,o=r.doc;return o.api.removeAction(o.getId(),r.getId(),this.getId(),t,n,i).then((t=>{let e=t[0];return e&&(this.info.action=e,this.action=yr.createAction(e,this.page.getPDFDoc())),this.engine.eventEmitter.emit(et.annotationUpdated,[this],this.getPDFPage(),ge.actionDataUpdated),this.eventEmitter.emit(et.actionRemove,this),!0}))},n.moveAction=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.moveAction(n.getId(),e.getId(),this.getId(),t).then((t=>this.update(ge.moveAction)))},e}(Se);var kw=_w;let Mw=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getInkList=function(){return this.info.inkList},n.setInkList=function(t){if(this.isDeleted())return Promise.resolve();this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setInkList(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.inkListUpdated).then((()=>{this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],this.getPDFPage())})))).then((()=>!0))},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this),n=this.info.inkList,i="[";if(n.length>0){for(let t=0;t<n.length;t++)0!=t&&1==n[t].type&&(i=i.substr(0,i.length-1),i+="],["),i+=n[t].x+","+n[t].y+";";i=i.substr(0,i.length-1)+"]"}else i="[]";return y({},e,{inklist:i})},e}(Em);var Ow=Mw;let Lw=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,e.action&&(i.action=i.page.doc.engine.actionFactory.createAction(e.action,n.doc,i.page.doc.api,i.eventEmitter,(0,C.Z)(i))),i}(0,E.Z)(e,t);var n=e.prototype;return n.getFlags=function(){return-2&t.prototype.getFlags.call(this)},n.getAction=function(){return this.action},n.getActionPromise=function(){let t=this.getPDFPage(),e=t.getPDFDoc();return this.page.doc.api.getAction(e.getId(),t.getId(),this.getId()).then((t=>(this.action=this.page.doc.engine.actionFactory.createAction(t,e,this.page.doc.api,this.eventEmitter,this),this.action)))},n.getOpacity=function(){return this.info.opacity},n.getRotation=function(){return this.info.rotation},n.setRotation=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotRotation(n.getId(),e.getId(),this.getId(),t).then((t=>e.getAnnotsByObjectNumArray(t))).then((e=>{let n=0;for(e.length;n--;)e[n].info.rotation=t;return this.info.rotation=t,e})).then((t=>(this.eventEmitter.emit(et.annotationUpdated,t,e,ge.rotationUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,t,e),t)))},n.getRotation=function(){return this.info.rotation},n.setOpacity=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return t=+t,this.page.doc.api.setAnnotOpacity(n.getId(),e.getId(),this.getId(),t).then((t=>e.getAnnotsByObjectNumArray(t))).then((e=>{let n=0;for(e.length;n--;)e[n].info.opacity=t;return this._update().then((()=>e))})).then((t=>(this.eventEmitter.emit(et.annotationUpdated,t,e,ge.opacityUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,t,e),t)))},n.setRotation=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setAnnotRotation(n.getId(),e.getId(),this.getId(),t).then((t=>e.getAnnotsByObjectNumArray(t))).then((e=>{let n=0;for(e.length;n--;)e[n].info.rotation=t;return this.info.rotation=t,e})).then((t=>(this.eventEmitter.emit(et.annotationUpdated,t,e,ge.rotationUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,t,e),t)))},n.setRect=function(t){const e=this.info.rect;this.info.rect=t;let n=this.getPDFPage(),i=n.getPDFDoc();return this.page.doc.api.setAnnotRect(i.getId(),n.getId(),this.getId(),t).then((i=>(this.eventEmitter.emit(et.invalidRect,new fe(e.left,e.bottom,e.right,e.top),new fe(t.left,t.bottom,t.right,t.top),this.info.type,this.info,n),i?(this.eventEmitter.emit(et.annotationUpdated,[this],n,ge.rectUpdated),this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],n),!0):i)))},n.moveTo=function({left:t,top:e}={}){const n=y({},this.info.rect),{right:i,bottom:r}=n,o=t-n.left,s=e-n.top,a=this.info.rect={left:t,top:e,right:i+o,bottom:r+s},c=this.getPDFPage(),l=c.getPDFDoc().getId(),h=c.getId(),u=this.getId();return this.page.doc.api.moveAnnotTo(l,h,u,{left:t,top:e}).then((t=>c.getAnnotsByObjectNumArray(t))).then((t=>{this.eventEmitter.emit(et.invalidRect,new fe(n.left,n.bottom,n.right,n.top),new fe(a.left,a.bottom,a.right,a.top),this.info.type,this.info,c),this.eventEmitter.emit(et.annotationUpdated,t,c,ge.rectUpdated),this.eventEmitter.emit(et.annotationMovedPosition,t,c,this)}))},n.removeAction=function(t=-1,e){let n=0,i=0;e?(n=0,i=e.info.objNumber):delete this.info.AA[t],"-1"==t?(delete this.info.action,delete this.action):(delete this.info.AA[t],this.engineActions&&delete this.engineActions[t]);let r=this.page,o=r.doc;return o.api.removeAction(o.getId(),r.getId(),this.getId(),t,n,i).then((e=>{let n=e[0];return n&&("-1"==t?(this.info.action=n,this.action=yr.createAction(n,this.page.getPDFDoc())):(this.info.AA[t]=n,this.engineActions[t]=yr.createAction(n,this.page.getPDFDoc()))),this.engine.eventEmitter.emit(et.annotationUpdated,[this],this.getPDFPage(),ge.actionDataUpdated),this.eventEmitter.emit(et.actionRemove,this),!0}))},n.setImage=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setImage(n.getId(),e.getId(),this.getId(),t).then((t=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e),this.update(ge.imageUpdated),t)))},n.setTitle=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setTitle(n.getId(),e.getId(),this.getId(),t).then((()=>this.update(ge.titleUpdated)))},n.getAdditionalAction=function(t){if(-1==t)return this.action;if(!this.engineActions){this.engineActions={};for(let t in this.info.AA)this.engineActions[t]=yr.createAction(this.info.AA[t],this.page.getPDFDoc())}return this.engineActions[t]},n.setAdditionalAction=function(t,e){return this.setAction(e,t)},n.setAction=function(t,e,n){if(!t)throw new Error("No Action!");let i=this.page,r=i.doc;return this.engineActions||this.getAdditionalAction(11),this.page.doc.api.setAction(r.getId(),i.getId(),this.getId(),t.info,e,n).then((o=>{t.init(o,this.page.doc.engine.actionFactory,r,this.page.doc.api,this.page.doc.engine.eventEmitter,this);let s=!1;return-1==e&&this.info.action&&(s=!0),-1!=e&&this.engineActions[e]&&(s=!0),n&&s?-1==e?this.action.appendSubAction(t):this.engineActions[e].appendSubAction(t):-1==e?(this.info.action=t.info,this.action=t):(this.info.AA[e]=t.info,this.engineActions[e]=t),this.eventEmitter.emit(et.annotationUpdated,[this],i,ge.addAction),o}))},n.setActionData=function(t,e){return t.setActionData(e).then((()=>(this.update(ge.actionDataUpdated),!0)))},n.getImage=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.getBitmapBuffer(n.getId(),e.getId(),this.getId()).then((e=>{if(!e.width||!e.height)return null;switch(t||"canvas"){case"canvas":return cv(e);case"image":return lv(e);case"buffer":return hv(e);default:throw new Error(`Invalid options.type: ${t}`)}}))},n.moveAction=function(t){let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.moveAction(n.getId(),e.getId(),this.getId(),t).then((t=>this.update(ge.moveAction).then((t=>{this.updateAdditionalAction()}))))},n.updateAdditionalAction=function(){this.engineActions={};for(let t in this.info.AA)this.engineActions[t]=yr.createAction(this.info.AA[t],this.page.getPDFDoc())},e}(Se),Nw=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,e.action&&(i.action=i.page.doc.engine.actionFactory.createAction(e.action,n.doc,i.page.doc.api,i.eventEmitter,(0,C.Z)(i))),i}(0,E.Z)(e,t);var n=e.prototype;return n.getIconName=function(){return this.info.iconName||"Speaker"},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this);return e.rate=this.info.soundObj&&this.info.soundObj.sampleRate,e},e}(Em);var Bw=Nw;let Vw=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getFlags=function(){return-2&t.prototype.getFlags.call(this)},n.getOpenStatus=function(){return this.info.openStatus},n.setOpenStatus=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setPopupOpenStatus(n.getId(),e.getId(),this.getId(),t).then((()=>{this.info.openStatus=t;let n=[this];return this.eventEmitter.emit(et.annotationAppearanceUpdated,n,e),n}))},n.exportToJSON=function(){let t=this.info.flag,e="";for(let n in st.AnnotFlagsName)t&1<<parseInt(n)&&(e+=st.AnnotFlagsName[n]+",");let n=this.info.name,i=this.page.getIndex(),r=this.info.openStatus?"yes":"no",o=this.info.rect;return{flags:e,name:n,page:i,open:r,rect:o.left+","+o.bottom+","+o.right+","+o.top,type:"popup"}},e}(Se);const Uw={Courier:0,"Courier-Bold":1,"Courier-BoldOblique":2,"Courier-Oblique":3,Helvetica:4,"Helvetica-Bold":5,"Helvetica-BoldOblique":6,"Helvetica-Oblique":7,"Times-Roman":8,"Times-Bold":9,"Times-BoldItalic":10,"Times-Italic":11,Symbol:12,ZapfDingbats:13};function Hw(t){return Uw[t]}function jw(t){for(let e in Uw)if(Uw[e]==t)return e;return""}const $w={FoxitFixedOTF:"Courier",FoxitSansMM:"Courier","FoxitFixedOTF-Bold":"Courier-Bold","FoxitFixedOTF-Italic":"Courier-Oblique","FoxitFixedOTF-BoldItalic":"Courier-BoldOblique",FoxitSansOTF:"Helvetica","FoxitSansOTF-Italic":"Helvetica-Oblique","FoxitSansOTF-Bold":"Helvetica-Bold","FoxitSansOTF-BoldItalic":"Helvetica-BoldOblique","FoxitSansPS-BoldItalic":"Helvetica-BoldOblique",FoxitSerifOTF:"Times-Roman","FoxitSerifOTF-Italic":"Times-Italic","FoxitSerifOTF-Bold":"Times-Bold","FoxitSerifOTF-BoldItalic":"Times-BoldItalic",FoxitSymbolOTF:"Symbol",FoxitDingbatsOTF:"ZapfDingbats"},Ww=[{name:"Times Roman",value:"Times-Roman"},{name:"Times Bold",value:"Times-Bold"},{name:"Times Italic",value:"Times-Italic"},{name:"Times BoldItalic",value:"Times-BoldItalic"},{name:"Helvetica",value:"Helvetica"},{name:"Helvetica Bold",value:"Helvetica-Bold"},{name:"Helvetica Oblique",value:"Helvetica-Oblique"},{name:"Helvetica BoldOblique",value:"Helvetica-BoldOblique"},{name:"Courier",value:"Courier"},{name:"Courier Bold",value:"Courier-Bold"},{name:"Courier Oblique",value:"Courier-Oblique"},{name:"Courier BoldOblique",value:"Courier-BoldOblique"},{name:"Symbol",value:"Symbol"},{name:"ZapfDingbats",value:"ZapfDingbats"}],Yw=[{name:"Courier",value:"Courier"},{name:"Helvetica",value:"Helvetica"},{name:"Times Roman",value:"Times-Roman"},{name:"Symbol",value:"Symbol"},{name:"ZapfDingbats",value:"ZapfDingbats"}],Gw=[{name:"黑体",value:"SimHei,STHeiti,Noto Serif Hebrew"},{name:"楷体",value:"CESI_KT_GB2312,KaiTi,STKaiti"},{name:"仿宋",value:"FangSong,STFangSong,CESI_FS_GB13000"},{name:"宋体",value:"SimSun,STSong,CESI_SS_GB13000"}],Kw=[{value:"AlgerianPro",name:"AlgerianPro-Regular",url:"AlgerianPro-Regular.otf"},{value:"arialbd",name:"Arial Bold",url:"arialbd_M.ttf"},{value:"arialbi",name:"Arial Bold Italic",url:"arialbi_M.ttf"},{value:"ariali",name:"Arial Italic",url:"ariali_M.ttf"},{value:"Arialnbi",name:"Arial Narrow Bold Italic",url:"Arialnbi_M.ttf"},{value:"Arialnb",name:"Arial Narrow Bold",url:"Arialnb_M.ttf"},{value:"Arialni",name:"Arial Narrow Italic",url:"Arialni_M.ttf"},{value:"Arialn",name:"Arial Narrow",url:"Arialn_M.ttf"},{value:"ARIALUNI",name:"Arial Unicode MS",url:"ARIALUNI.TTF"},{value:"arial",name:"Arial",url:"arial_M.ttf"},{value:"ariblk",name:"Arial Black",url:"ariblk_M.ttf"},{value:"Arlrdbd",name:"Arial Rounded MT Bold",url:"Arlrdbd_M.ttf"},{value:"Baskvill",name:"Baskerville Old Face",url:"Baskvill_M.ttf"},{value:"BAUHS93",name:"Bauhaus 93",url:"BAUHS93.TTF"},{value:"Bellb",name:"Bell MT Bold",url:"Bellb_M.ttf"},{value:"Belli",name:"Bell MT Italic",url:"Belli_M.ttf"},{value:"Bell",name:"Bell MT",url:"Bell_M.ttf"},{value:"Bernhc",name:"Bernard MT Condensed",url:"Bernhc_M.ttf"},{value:"Bod_Bi",name:"Bodoni MT Bold Italic",url:"Bod_Bi_M.ttf"},{value:"Bod_Blar",name:"Bodoni MT Black",url:"Bod_Blar_M.ttf"},{value:"Bod_B",name:"Bodoni MT Bold",url:"Bod_B_M.ttf"},{value:"Bod_Cbi",name:"Bodoni MT Condensed Bold Italic",url:"Bod_Cbi_M.ttf"},{value:"Bod_Cb",name:"Bodoni MT Condensed Bold",url:"Bod_Cb_M.ttf"},{value:"Bod_I",name:"Bodoni MT Italic",url:"Bod_I_M.ttf"},{value:"Bod_Pstc",name:"Bodoni MT Poster Compressed",url:"Bod_Pstc_M.ttf"},{value:"Bod_R",name:"Bodoni MT",url:"Bod_R_M.ttf"},{value:"Bookosbi",name:"Bookman Old Style Bold Italic",url:"Bookosbi_M.ttf"},{value:"Bookosb",name:"Bookman Old Style Bold",url:"Bookosb_M.ttf"},{value:"Bookosi",name:"Bookman Old Style Italic",url:"Bookosi_M.ttf"},{value:"Bradhitc",name:"Bradley Hand ITC",url:"Bradhitc_M.ttf"},{value:"Britanic",name:"Britannic Bold",url:"Britanic_M.ttf"},{value:"Broadw",name:"Broadway",url:"Broadw_M.ttf"},{value:"BRUSHSCI",name:"Brush Script MT Italic",url:"BRUSHSCI.TTF"},{value:"BSSYM7",name:"Bookshelf Symbol 7",url:"BSSYM7.TTF"},{value:"calibri",name:"Calibri",url:"calibri.ttf"},{value:"calibrib",name:"Calibri Bold",url:"calibrib.ttf"},{value:"calibrii",name:"Calibri Italic",url:"calibrii.ttf"},{value:"calibril",name:"Calibri Light",url:"calibril.ttf"},{value:"calibrili",name:"Calibri Light Italic",url:"calibrili.ttf"},{value:"calibriz",name:"Calibri Bold Italic",url:"calibriz.ttf"},{value:"Calistbi",name:"Calisto MT Bold Italic",url:"Calistbi_M.ttf"},{value:"Calistb",name:"Calisto MT Bold",url:"Calistb_M.ttf"},{value:"Calisti",name:"Calisto MT Italic",url:"Calisti_M.ttf"},{value:"Calist",name:"Calisto MT",url:"Calist_M.ttf"},{value:"Cambriab",name:"Cambria Bold",url:"Cambriab_M.TTF"},{value:"Cambriai",name:"Cambria Italic",url:"Cambriai_M.TTF"},{value:"Cambriaz",name:"Cambria Bold Italic",url:"Cambriaz_M.TTF"},{value:"cambria",name:"Cambria",url:"cambria_M.TTC"},{value:"cambria_M_01",name:"Cambria Math",url:"cambria_M_01.ttf"},{value:"Candara",name:"Candara",url:"Candara.ttf"},{value:"Candarab",name:"Candara Bold",url:"Candarab_M.ttf"},{value:"Candarai",name:"Candara Italic",url:"Candarai.ttf"},{value:"Candarali",name:"Candara Light Italic",url:"Candarali_M.ttf"},{value:"Candaral",name:"Candara Light",url:"Candaral_M.ttf"},{value:"Candaraz",name:"Candara Bold Italic",url:"Candaraz_M.ttf"},{value:"Castelar",name:"Castellar",url:"Castelar_M.ttf"},{value:"Censcbk",name:"Century Schoolbook",url:"Censcbk_M.ttf"},{value:"Centaur",name:"Centaur",url:"Centaur_M.ttf"},{value:"Century",name:"Century",url:"Century_M.ttf"},{value:"Chiller",name:"Chiller",url:"Chiller_M.ttf"},{value:"Colonna",name:"Colonna MT",url:"Colonna_M.ttf"},{value:"comicbd",name:"Comic Sans MS Bold",url:"comicbd_M.ttf"},{value:"comici",name:"Comic Sans MS Italic",url:"comici_M.ttf"},{value:"comicz",name:"Comic Sans MS Bold Italic",url:"comicz_M.ttf"},{value:"comic",name:"Comic Sans MS",url:"comic_M.ttf"},{value:"Consolab",name:"Consolas Bold",url:"Consolab_M.ttf"},{value:"Consolai",name:"Consolas Italic",url:"Consolai_M.ttf"},{value:"Consolaz",name:"Consolas Bold Italic",url:"Consolaz_M.ttf"},{value:"Consola",name:"Consolas",url:"Consola_M.ttf"},{value:"Constanb",name:"Constantia Bold",url:"Constanb_M.TTF"},{value:"Constani",name:"Constantia Italic",url:"Constani_M.TTF"},{value:"Constanz",name:"Constantia Bold Italic",url:"Constanz_M.TTF"},{value:"Constan",name:"Constantia",url:"Constan_M.TTF"},{value:"Coopbl",name:"Cooper Black",url:"Coopbl_M.ttf"},{value:"Coprgtb",name:"Copperplate Gothic Bold",url:"Coprgtb_M.ttf"},{value:"Coprgtl",name:"Copperplate Gothic Light",url:"Coprgtl_M.ttf"},{value:"Corbelb",name:"Corbel Bold",url:"Corbelb_M.ttf"},{value:"Corbeli",name:"Corbel Italic",url:"Corbeli_M.ttf"},{value:"Corbelli",name:"Corbel Light Italic",url:"Corbelli_M.ttf"},{value:"Corbell",name:"Corbel Light",url:"Corbell_M.ttf"},{value:"Corbelz",name:"Corbel Bold Italic",url:"Corbelz_M.ttf"},{value:"Corbel",name:"Corbel",url:"Corbel_M.ttf"},{value:"Corsiva",name:"Monotype Corsiva",url:"Corsiva-Italic.otf"},{value:"courbd",name:"Courier New Bold",url:"courbd_M.ttf"},{value:"courbi",name:"Courier New Bold Italic",url:"courbi_M.ttf"},{value:"couri",name:"Courier New Italic",url:"couri_M.ttf"},{value:"cour",name:"Courier New",url:"cour_M.ttf"},{value:"CurlzMTPro",name:"CurlzMTPro-Regular",url:"CurlzMTPro-Regular.otf"},{value:"ebrimabd",name:"Ebrima Bold",url:"ebrimabd_M.ttf"},{value:"ebrima",name:"Ebrima",url:"ebrima_M.ttf"},{value:"ELEPHNT",name:"Elephant",url:"ELEPHNT.otf"},{value:"ELEPHNTI",name:"Elephant Italic",url:"ELEPHNTI.otf"},{value:"EngraversMTPro",name:"EngraversMTPro",url:"EngraversMTPro.otf"},{value:"Erasbd",name:"Eras Bold ITC",url:"Erasbd_M.ttf"},{value:"Erasdemi",name:"Eras Demi ITC",url:"Erasdemi_M.ttf"},{value:"Eraslght",name:"Eras Light ITC",url:"Eraslght_M.ttf"},{value:"Erasmd",name:"Eras Medium ITC",url:"Erasmd_M.ttf"},{value:"Felixti",name:"Felix Titling",url:"Felixti_M.ttf"},{value:"Forte",name:"Forte",url:"Forte_M.ttf"},{value:"FRABK",name:"Franklin Gothic Book",url:"FRABK.TTF"},{value:"FRABKIT",name:"Franklin Gothic Book Italic",url:"FRABKIT.TTF"},{value:"FRADM",name:"Franklin Gothic Demi",url:"FRADM.TTF"},{value:"FRADMCN",name:"Franklin Gothic Demi Cond",url:"FRADMCN.TTF"},{value:"FRAHV",name:"Franklin Gothic Heavy",url:"FRAHV.TTF"},{value:"FRAMDCN",name:"Franklin Gothic Medium Cond",url:"FRAMDCN.TTF"},{value:"framdit",name:"Franklin Gothic Medium Italic",url:"framdit_M.TTF"},{value:"framd",name:"Franklin Gothic Medium",url:"framd_M.TTF"},{value:"Freescpt",name:"Freestyle Script",url:"Freescpt_M.ttf"},{value:"FrenchScriptPro",name:"FrenchScriptPro",url:"FrenchScriptPro.otf"},{value:"Ftltlt",name:"Footlight MT Light",url:"Ftltlt_M.ttf"},{value:"gadugib",name:"Gadugi Bold",url:"gadugib_M.ttf"},{value:"gadugi",name:"Gadugi",url:"gadugi_M.ttf"},{value:"Garabd",name:"Garamond Bold",url:"Garabd_M.ttf"},{value:"Garait",name:"Garamond Italic",url:"Garait_M.ttf"},{value:"Gara",name:"Garamond",url:"Gara_M.ttf"},{value:"georgiab",name:"Georgia Bold",url:"georgiab_M.ttf"},{value:"georgiai",name:"Georgia Italic",url:"georgiai_M.ttf"},{value:"georgiaz",name:"Georgia Bold Italic",url:"georgiaz_M.ttf"},{value:"georgia",name:"Georgia",url:"georgia_M.ttf"},{value:"GigiStd",name:"GigiStd",url:"GigiStd.otf"},{value:"Gilbi",name:"Gill Sans MT Bold Italic",url:"Gilbi____M.ttf"},{value:"Gilb",name:"Gill Sans MT Bold",url:"Gilb_____M.ttf"},{value:"Gilc",name:"Gill Sans MT Condensed",url:"Gilc_____M.ttf"},{value:"Gili",name:"Gill Sans MT Italic",url:"Gili_____M.ttf"},{value:"GillSansMTPro",name:"GillSansMTPro-BoldCondensed",url:"GillSansMTPro-BoldCondensed.otf"},{value:"Gillubcd",name:"Gill Sans Ultra Bold Condensed",url:"Gillubcd_M.ttf"},{value:"Gilsanub",name:"Gill Sans Ultra Bold",url:"Gilsanub_M.ttf"},{value:"Gil",name:"Gill Sans MT",url:"Gil______M.ttf"},{value:"Glecb",name:"Gloucester MT Extra Condensed",url:"Glecb_M.ttf"},{value:"Gothicbi",name:"Century Gothic Bold Italic",url:"Gothicbi_M.ttf"},{value:"Gothicb",name:"Century Gothic Bold",url:"Gothicb_M.ttf"},{value:"Gothici",name:"Century Gothic Italic",url:"Gothici_M.ttf"},{value:"Gothic",name:"Century Gothic",url:"Gothic_M.ttf"},{value:"Goudosb",name:"Goudy Old Style Bold",url:"Goudosb_M.ttf"},{value:"Goudosi",name:"Goudy Old Style Italic",url:"Goudosi_M.ttf"},{value:"Goudos",name:"Goudy Old Style",url:"Goudos_M.ttf"},{value:"GOUDYSTO",name:"Goudy Stout",url:"GOUDYSTO.otf"},{value:"HATTEN",name:"Haettenschweiler",url:"HATTEN.TTF"},{value:"impact",name:"Impact",url:"impact_M.ttf"},{value:"Imprisha",name:"Imprint MT Shadow",url:"Imprisha_M.ttf"},{value:"InformalRomanStd",name:"InformalRomanStd",url:"InformalRomanStd.otf"},{value:"Itcblkad",name:"Blackadder ITC",url:"Itcblkad_M.ttf"},{value:"Itcedscr",name:"Edwardian Script ITC",url:"Itcedscr_M.ttf"},{value:"Itckrist",name:"Kristen ITC",url:"Itckrist_M.ttf"},{value:"Jokerman",name:"Jokerman",url:"Jokerman_M.ttf"},{value:"Juice",name:"Juice ITC",url:"Juice____M.ttf"},{value:"LatinWidD",name:"LatinWidD",url:"LatinWidD.otf"},{value:"Lbritedi",name:"Lucida Bright Demibold Italic",url:"Lbritedi_M.ttf"},{value:"Lbrited",name:"Lucida Bright Demibold",url:"Lbrited_M.ttf"},{value:"Lbritei",name:"Lucida Bright Italic",url:"Lbritei_M.ttf"},{value:"Lbrite",name:"Lucida Bright",url:"Lbrite_M.ttf"},{value:"Lcallig",name:"Lucida Calligraphy Italic",url:"Lcallig_M.ttf"},{value:"leelawad",name:"Leelawadee",url:"leelawad_M.ttf"},{value:"leelawdb",name:"Leelawadee Bold",url:"leelawdb_M.ttf"},{value:"Lfaxdi",name:"Lucida Fax Demibold Italic",url:"Lfaxdi_M.ttf"},{value:"Lfaxd",name:"Lucida Fax Demibold",url:"Lfaxd_M.ttf"},{value:"Lfaxi",name:"Lucida Fax Italic",url:"Lfaxi_M.ttf"},{value:"Lfax",name:"Lucida Fax Regular",url:"Lfax_M.ttf"},{value:"Lhandw",name:"Lucida Handwriting Italic",url:"Lhandw_M.ttf"},{value:"Lsansdi",name:"Lucida Sans Demibold Italic",url:"Lsansdi_M.ttf"},{value:"Lsansd",name:"Lucida Sans Demibold Roman",url:"Lsansd_M.ttf"},{value:"Lsansi",name:"Lucida Sans Italic",url:"Lsansi_M.ttf"},{value:"Lsans",name:"Lucida Sans Regular",url:"Lsans_M.ttf"},{value:"Ltypebo",name:"Lucida Sans Typewriter Bold Oblique",url:"Ltypebo_M.ttf"},{value:"Ltypeb",name:"Lucida Sans Typewriter Bold",url:"Ltypeb_M.ttf"},{value:"Ltypeo",name:"Lucida Sans Typewriter Oblique",url:"Ltypeo_M.ttf"},{value:"Ltype",name:"Lucida Sans Typewriter Regular",url:"Ltype_M.ttf"},{value:"lucon",name:"Lucida Console",url:"lucon_M.ttf"},{value:"MaianGDRom",name:"MaiandraOTGD-Roman",url:"MaianGDRom.otf"},{value:"Maturasc",name:"Matura MT Script Capitals",url:"Maturasc_M.ttf"},{value:"Mistral",name:"Mistral",url:"Mistral_M.ttf"},{value:"MS",name:"MS Reference Specialty",url:"MS Reference Specialty.ttf"},{value:"mvboli",name:"MV Boli",url:"mvboli_M.ttf"},{value:"nirmalab",name:"Nirmala UI Bold",url:"nirmalab_M.ttf"},{value:"nirmalas",name:"Nirmala UI Semilight",url:"nirmalas_M.ttf"},{value:"nirmala",name:"Nirmala UI",url:"nirmala_M.ttf"},{value:"NotoSansCJKjp-Black",url:"NotoSansCJKjp-Black.otf",name:"Noto Sans CJK JP Black"},{value:"NotoSansCJKjp-Bold",url:"NotoSansCJKjp-Bold.otf",name:"Noto Sans CJK JP Bold"},{value:"NotoSansCJKjp-DemiLight",url:"NotoSansCJKjp-DemiLight.otf",name:"Noto Sans CJK JP DemiLight"},{value:"NotoSansCJKjp-Light",url:"NotoSansCJKjp-Light.otf",name:"Noto Sans CJK JP Light"},{value:"NotoSansCJKjp-Medium",url:"NotoSansCJKjp-Medium.otf",name:"Noto Sans CJK JP Medium"},{value:"NotoSansCJKjp-Regular",url:"NotoSansCJKjp-Regular.otf",name:"Noto Sans CJK JP Regular"},{value:"NotoSansCJKjp-Thin",url:"NotoSansCJKjp-Thin.otf",name:"Noto Sans CJK JP Thin"},{value:"NotoSansCJKkr-Black",url:"NotoSansCJKkr-Black.otf",name:"Noto Sans CJK KR Black"},{value:"NotoSansCJKkr-Bold",url:"NotoSansCJKkr-Bold.otf",name:"Noto Sans CJK KR Bold"},{value:"NotoSansCJKkr-DemiLight",url:"NotoSansCJKkr-DemiLight.otf",name:"Noto Sans CJK KR DemiLight"},{value:"NotoSansCJKkr-Light",url:"NotoSansCJKkr-Light.otf",name:"Noto Sans CJK KR Light"},{value:"NotoSansCJKkr-Medium",url:"NotoSansCJKkr-Medium.otf",name:"Noto Sans CJK KR Medium"},{value:"NotoSansCJKkr-Regular",url:"NotoSansCJKkr-Regular.otf",name:"Noto Sans CJK KR Regular"},{value:"NotoSansCJKkr-Thin",url:"NotoSansCJKkr-Thin.otf",name:"Noto Sans CJK KR Thin"},{value:"NotoSansCJKsc-Black",url:"NotoSansCJKsc-Black.otf",name:"Noto Sans CJK SC Black"},{value:"NotoSansCJKsc-Bold",url:"NotoSansCJKsc-Bold.otf",name:"Noto Sans CJK SC Bold"},{value:"NotoSansCJKsc-DemiLight",url:"NotoSansCJKsc-DemiLight.otf",name:"Noto Sans CJK SC DemiLight"},{value:"NotoSansCJKsc-Light",url:"NotoSansCJKsc-Light.otf",name:"Noto Sans CJK SC Light"},{value:"NotoSansCJKsc-Medium",url:"NotoSansCJKsc-Medium.otf",name:"Noto Sans CJK SC Medium"},{value:"NotoSansCJKsc-Regular",url:"NotoSansCJKsc-Regular.otf",name:"Noto Sans CJK SC Regular"},{value:"NotoSansCJKsc-Thin",url:"NotoSansCJKsc-Thin.otf",name:"Noto Sans CJK SC Thin"},{value:"NotoSansCJKtc-Black",url:"NotoSansCJKtc-Black.otf",name:"Noto Sans CJK TC Black"},{value:"NotoSansCJKtc-Bold",url:"NotoSansCJKtc-Bold.otf",name:"Noto Sans CJK TC Bold"},{value:"NotoSansCJKtc-DemiLight",url:"NotoSansCJKtc-DemiLight.otf",name:"Noto Sans CJK TC DemiLight"},{value:"NotoSansCJKtc-Light",url:"NotoSansCJKtc-Light.otf",name:"Noto Sans CJK TC Light"},{value:"NotoSansCJKtc-Medium",url:"NotoSansCJKtc-Medium.otf",name:"Noto Sans CJK TC Medium"},{value:"NotoSansCJKtc-Regular",url:"NotoSansCJKtc-Regular.otf",name:"Noto Sans CJK TC Regular"},{value:"NotoSansCJKtc-Thin",url:"NotoSansCJKtc-Thin.otf",name:"Noto Sans CJK TC Thin"},{value:"NotoSansMonoCJKjp-Bold",url:"NotoSansMonoCJKjp-Bold.otf",name:"Noto Sans Mono CJK JP Bold"},{value:"NotoSansMonoCJKjp-Regular",url:"NotoSansMonoCJKjp-Regular.otf",name:"Noto Sans Mono CJK JP Regular"},{value:"NotoSansMonoCJKkr-Bold",url:"NotoSansMonoCJKkr-Bold.otf",name:"Noto Sans Mono CJK KR Bold"},{value:"NotoSansMonoCJKkr-Regular",url:"NotoSansMonoCJKkr-Regular.otf",name:"Noto Sans Mono CJK KR Regular"},{value:"NotoSansMonoCJKsc-Bold",url:"NotoSansMonoCJKsc-Bold.otf",name:"Noto Sans Mono CJK SC Bold"},{value:"NotoSansMonoCJKsc-Regular",url:"NotoSansMonoCJKsc-Regular.otf",name:"Noto Sans Mono CJK SC Regular"},{value:"NotoSansMonoCJKtc-Bold",url:"NotoSansMonoCJKtc-Bold.otf",name:"Noto Sans Mono CJK TC Bold"},{value:"NotoSansMonoCJKtc-Regular",url:"NotoSansMonoCJKtc-Regular.otf",name:"Noto Sans Mono CJK TC Regular"},{value:"NotoSansSC-Black",url:"NotoSansSC-Black.otf",name:"Noto Sans SC Black"},{value:"NotoSansSC-Bold",url:"NotoSansSC-Bold.otf",name:"Noto Sans SC Bold"},{value:"NotoSansSC-DemiLight",url:"NotoSansSC-DemiLight.otf",name:"Noto Sans CJK SC DemiLight"},{value:"NotoSansSC-Light",url:"NotoSansSC-Light.otf",name:"Noto Sans SC Light"},{value:"NotoSansSC-Medium",url:"NotoSansSC-Medium.otf",name:"Noto Sans SC Medium"},{value:"NotoSansSC-Regular",url:"NotoSansSC-Regular.otf",name:"Noto Sans SC Regular"},{value:"NotoSansSC-Thin",url:"NotoSansSC-Thin.otf",name:"Noto Sans SC Thin"},{value:"OCRAExt",name:"OCR A Extended",url:"OCRAExt.otf"},{value:"OldEnglishTextMTStd",name:"OldEnglishTextMTStd",url:"OldEnglishTextMTStd.otf"},{value:"Onyx",name:"Onyx",url:"Onyx_M.ttf"},{value:"palabi",name:"Palatino Linotype Bold Italic",url:"palabi_M.ttf"},{value:"palab",name:"Palatino Linotype Bold",url:"palab_M.ttf"},{value:"palai",name:"Palatino Linotype Italic",url:"palai_M.ttf"},{value:"pala",name:"Palatino Linotype",url:"pala_M.ttf"},{value:"Palscri",name:"Palace Script MT",url:"Palscri_M.ttf"},{value:"Papyrus",name:"Papyrus",url:"Papyrus_M.ttf"},{value:"Perbi",name:"Perpetua Bold Italic",url:"Perbi____M.ttf"},{value:"Perb",name:"Perpetua Bold",url:"Perb_____M.ttf"},{value:"Peri",name:"Perpetua Italic",url:"Peri_____M.ttf"},{value:"Pertibd",name:"Perpetua Titling MT Bold",url:"Pertibd_M.ttf"},{value:"Pertili",name:"Perpetua Titling MT Light",url:"Pertili_M.ttf"},{value:"Per",name:"Perpetua",url:"Per______M.ttf"},{value:"PlaybillPro",name:"PlaybillPro",url:"PlaybillPro.otf"},{value:"PristinaStd",name:"PristinaStd",url:"PristinaStd.otf"},{value:"PRR",name:"PoorRichardRR",url:"PRR_____.otf"},{value:"RageItalicStd",name:"RageItalicStd",url:"RageItalicStd.otf"},{value:"REFSAN",name:"MS Reference Sans Serif",url:"REFSAN.ttf"},{value:"Roccb",name:"Rockwell Condensed Bold",url:"Roccb____M.ttf"},{value:"Rocc",name:"Rockwell Condensed",url:"Rocc_____M.ttf"},{value:"Rockbi",name:"Rockwell Bold Italic",url:"Rockbi_M.ttf"},{value:"Rockb",name:"Rockwell Bold",url:"Rockb_M.ttf"},{value:"Rockeb",name:"Rockwell Extra Bold",url:"Rockeb_M.ttf"},{value:"Rocki",name:"Rockwell Italic",url:"Rocki_M.ttf"},{value:"Rock",name:"Rockwell",url:"Rock_M.ttf"},{value:"Schlbkbi",name:"Century Schoolbook Bold Italic",url:"Schlbkbi_M.ttf"},{value:"Schlbkb",name:"Century Schoolbook Bold",url:"Schlbkb_M.ttf"},{value:"Schlbki",name:"Century Schoolbook Italic",url:"Schlbki_M.ttf"},{value:"ScriptMTPro",name:"ScriptMTPro-Bold",url:"ScriptMTPro-Bold.otf"},{value:"segoeprb",name:"Segoe Print Bold",url:"segoeprb_M.ttf"},{value:"segoepr",name:"Segoe Print",url:"segoepr_M.ttf"},{value:"segoesc",name:"Segoe Script",url:"segoesc.ttf"},{value:"segoescb",name:"Segoe Script Bold",url:"segoescb.ttf"},{value:"seguisym",name:"Segoe UI Symbol",url:"seguisym_M.ttf"},{value:"Snap",name:"Snap ITC",url:"Snap_____M.ttf"},{value:"StencilStd",name:"StencilStd",url:"StencilStd.otf"},{value:"symbol",name:"Symbol",url:"symbol_M.ttf"},{value:"tahomabd",name:"Tahoma Bold",url:"tahomabd_M.ttf"},{value:"tahoma",name:"Tahoma",url:"tahoma_M.ttf"},{value:"Tempsitc",name:"Tempus Sans ITC",url:"Tempsitc_M.ttf"},{value:"trebucbd",name:"Trebuchet MS Bold",url:"trebucbd_M.ttf"},{value:"trebucbi",name:"Trebuchet MS Bold Italic",url:"trebucbi_M.ttf"},{value:"trebucit",name:"Trebuchet MS Italic",url:"trebucit_M.ttf"},{value:"trebuc",name:"Trebuchet MS",url:"trebuc_M.ttf"},{value:"tt1168m",name:"Modern20 BT Roman",url:"tt1168m_.ttf"},{value:"verdanab",name:"Verdana Bold",url:"verdanab_M.ttf"},{value:"verdanai",name:"Verdana Italic",url:"verdanai_M.ttf"},{value:"verdanaz",name:"Verdana Bold Italic",url:"verdanaz_M.ttf"},{value:"verdana",name:"Verdana",url:"verdana_M.ttf"},{value:"Vineritc",name:"Viner Hand ITC",url:"Vineritc_M.ttf"},{value:"VivaldiStd",name:"VivaldiStd",url:"VivaldiStd.otf"},{value:"VladimirScriptLTStd",name:"VladimirScrD",url:"VladimirScriptLTStd.otf"},{value:"webdings",name:"Webdings",url:"webdings_M.ttf"}],qw=[{text:"Helvetica",value:4},{text:"Courier",value:0},{text:"Courier-Bold",value:1},{text:"Courier-BoldOblique",value:2},{text:"Courier-Oblique",value:3},{text:"Helvetica-Bold",value:5},{text:"Helvetica-BoldOblique",value:6},{text:"Helvetica-Oblique",value:7},{text:"Times-Bold",value:9},{text:"Times-BoldItalic",value:10},{text:"Times-Italic",value:11}],zw=[{text:"宋体",name:"SimSun",style:34,charset:134},{text:"楷体",name:"KaiTi",style:32,charset:134}],Jw=()=>"Helvetica";let Zw=function(t){function e(e,n){return t.call(this,e,n)||this}(0,E.Z)(e,t);var n=e.prototype;return n.isArea=function(){return this.info.isArea},n.getRects=function(){let t=[];return this.info.quadPoints&&this.info.quadPoints.length>0?this.info.quadPoints.forEach((e=>{t.push({left:e[0].x,top:e[0].y,right:e[3].x,bottom:e[3].y})})):t.push(this.info.rect),t},n.apply=function(){let t=this.getPDFPage(),e=t.getPDFDoc();if(!e.checkPermission(pe.annotForm)||!e.checkPermission(pe.modify))throw new Error("Permission error");return this.page.doc.api.redactApply(e.getId(),t.getId(),this.getId()).then((e=>{let n=t.clearAnnotIds(e);this.page.doc.engine.eventEmitter.emit(et.annotationRemoved,n,t);let i=[{pageIndex:t.getIndex(),removedAnnots:e}];return this.eventEmitter.emit(et.applyRedaction,i),i}))},n.getOverlayText=function(){return this.info.overlayText},n.setOverlayText=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setRedactOverlayText(n.getId(),e.getId(),this.getId(),t).then((e=>e?this.update(ge.overlayTextUpdated).then((()=>(this.info.overlayText=t,e))):e))},n.removeOverlayText=function(){this.checkModidyPerm();let t=this.getPDFPage(),e=t.getPDFDoc();return this.page.doc.api.removeRedactOverlayText(e.getId(),t.getId(),this.getId()).then((t=>t?this.update(ge.overlayTextUpdated).then((()=>(delete this.info.overlayText,t))):t))},n.getOverlayTextAlignment=function(){return this.info.justification},n.setOverlayTextAlignment=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setRedactOverlayTextAlignment(n.getId(),e.getId(),this.getId(),t).then((e=>e?this.update(ge.overlayTexAlignmentUpdated).then((()=>(this.info.justification=t+"",e))):e))},n.getRepeat=function(){return this.info.isRepeat},n.setRepeat=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setRedactRepeat(n.getId(),e.getId(),this.getId(),t).then((e=>e?this.update(ge.repeatUpdated).then((()=>(this.info.isRepeat=t,e))):e))},n.setAutoFontSize=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setRedactAutoFontSize(n.getId(),e.getId(),this.getId(),t).then((e=>e?this.update(ge.autoFontSizeUpdated).then((()=>(this.info.isAutoFontSize=t,e))):e))},n.getAutoFontSize=function(){return this.info.isAutoFontSize},n.getDefaultAppearance=function(){let t=y({},this.info.defaultAppearance);return delete t.flags,t},n.setDefaultAppearance=function(t){this.checkModidyPerm();let e=this.getPDFPage(),n=e.getPDFDoc(),i=y({},this.info.defaultAppearance,t);return t.textColor&&(i.textColor=(0,_.colorConvertor)(t.textColor,"int",1)),t.textSize&&"number"==typeof t.textSize&&t.textSize<0&&(i.textSize=0),void 0===Uw[i.fontName]&&(i.fontName="Helvetica"),this.page.doc.api.setRedactDefaultAppearance(n.getId(),e.getId(),this.getId(),i).then((t=>t?this.update(ge.redactDefaultAppearanceUpdated).then((()=>(this.info.fontName=i.fontName,delete i.fontName,this.info.defaultAppearance=i,t))):t))},n.setOpacity=function(t,e){this.checkModidyPerm();let n=this.getPDFPage(),i=n.getPDFDoc();return this.info.onlyForFill=e,this.page.doc.api.setRedactOpacity(i.getId(),n.getId(),this.getId(),t,e).then((e=>(e&&(this.info.opacity=t,this.eventEmitter.emit(et.annotationUpdated,[this],n,ge.opacityUpdated)),this.updateInfo(this.info),e)))},n.getFillColor=function(){return t.prototype.getFillColor.call(this)},n.setFillColor=function(t){t=0===t?0:(0,_.colorConvertor)(t,"int");let e=this.getPDFPage(),n=e.getPDFDoc();return n.api.setRedactAnnotFillColor(n.getId(),e.getId(),this.getId(),t,this.info.onlyForFill).then((t=>t?this.update(ge.fillColorUpdated).then((()=>(this.eventEmitter.emit(et.annotationAppearanceUpdated,[this],e),t))):t))},n.getApplyFillColor=function(){return this.info.applyFillColor},n.setRedactApplyFillColor=function(t){this.checkModidyPerm(),t=(0,_.colorConvertor)(t,"int",1);let e=this.getPDFPage(),n=e.getPDFDoc();return this.page.doc.api.setRedactApplyFillColor(n.getId(),e.getId(),this.getId(),t).then((e=>e?this.update(ge.applyFillColorUpdated).then((()=>(this.info.applyFillColor=t,e))):e))},n.exportToJSON=function(){let e=t.prototype.exportToJSON.call(this);e["interior-color"]=(0,_.convertFromNumberToHex)(16777215&this.getApplyFillColor()),e.interiorColor=e["interior-color"];let n=this.info.quadPoints,i="";for(let t=0;t<n.length;t++){let e=n[t];i+=e[0].x+","+e[0].y+",",i+=e[1].x+","+e[1].y+",",i+=e[2].x+","+e[2].y+",",i+=e[3].x+","+e[3].y+","}e.coords=i.substr(0,i.length-1),e["overlay-text"]=this.info.overlayText,e.overlayText=this.info.overlayText;let r="";this.info.fontName&&(r+="/"+this.info.fontName+" "),null!=this.info.defaultAppearance.textSize&&(r+=this.info.defaultAppearance.textSize+" Tf ");let o=(0,_.convertFromNumberToRGBA)(this.info.defaultAppearance.textColor);return r+=(o.r/255).toFixed(2)+" "+(o.g/255).toFixed(2)+" "+(o.b/255).toFixed(2)+" RG",e.defaultappearance=r,e.fontColor=(0,_.colorConvertor)(16777215&this.info.defaultAppearance.textColor,"#",0),e.justification=this.info.justification,e.repeat=this.info.isRepeat?"yes":"no",e},n.getRedactionCode=function(){return this.info.overlayCode},n.getRedactAppearance=function(){return this.info},n.setRedactAppearance=function({applyFillColor:t,isAutoFontSize:e,textColor:n,defaultAppearance:i,textSize:r,fontName:o,justification:s,isRepeat:a,overlayText:c,redactionCode:l}){this.checkModidyPerm(),!n&&i&&(n=i.textColor),!r&&i&&(r=i.textSize),void 0!==t&&(t=(0,_.colorConvertor)(t,"int",1)),void 0!==n&&(n=(0,_.colorConvertor)(n,"int",1));const h=this.getPDFPage(),u=h.getPDFDoc(),d={applyFillColor:t,isAutoFontSize:e,textColor:n,textSize:r,fontName:o,overlayText:c,justification:s,isRepeat:a,redactionCode:l};return this.page.doc.api.setRedactAppearance(u.getId(),h.getId(),this.getId(),d).then((i=>{if(i){let h="";return void 0!==t&&(h=ge.fillColorUpdated),void 0===o&&void 0===n&&void 0===r&&void 0===c||(h=ge.redactDefaultAppearanceUpdated),void 0!==e&&(h=ge.autoFontSizeUpdated),void 0!==s&&(h=ge.overlayTexAlignmentUpdated),void 0!==l&&(this.info.overlayCode=l),void 0!==a&&(h=ge.repeatUpdated),void 0!==c&&(h=ge.overlayTextUpdated),h&&this.update(h).then((()=>i))}return i}))},e}(Em);var Xw=Zw;let Qw=function(){function t(t){}return t.prototype.get=function(t,e){switch(t.type){case ti.highlight:return new rw(t,e);case ti.squiggly:return new hw(t,e);case ti.strikeOut:return new sw(t,e);case ti.underline:return new cw(t,e);case ti.line:return new dw(t,e);case ti.polyLine:return new vw(t,e);case ti.polygon:return new ww(t,e);case ti.fileAttachment:return new Cw(t,e);case ti.text:return new Aw(t,e);case ti.circle:return new Pw(t,e);case ti.caret:return new xw(t,e);case ti.freeText:return new Rw(t,e);case ti.ink:return new Ow(t,e);case ti.sound:return new Bw(t,e);case ti.square:return new Dw(t,e);case ti.stamp:return new Fw(t,e);case ti.link:return new kw(t,e);case ti.widget:return new Sr(t,e);case ti.screen:return new Lw(t,e);case ti.popup:return new Vw(t,e);case ti.redact:return new Xw(t,e);default:return new Se(t,e)}},t}();var tb=Qw;const eb={0:{id:"0",name:"StandardID_e_StdIDCourier",isBold:!1,isItalic:!1},1:{id:"1",name:"StandardID_e_StdIDCourierB",isBold:!0,isItalic:!1},2:{id:"2",name:"StandardID_e_StdIDCourierBI",isBold:!0,isItalic:!0},3:{id:"3",name:"StandardID_e_StdIDCourierI",isBold:!1,isItalic:!0},4:{id:"4",name:"StandardID_e_StdIDHelvetica",isBold:!1,isItalic:!1},5:{id:"5",name:"StandardID_e_StdIDHelveticaB",isBold:!0,isItalic:!1},6:{id:"6",name:"StandardID_e_StdIDHelveticaBI",isBold:!0,isItalic:!0},7:{id:"7",name:"StandardID_e_StdIDHelveticaI",isBold:!1,isItalic:!0},8:{id:"8",name:"StandardID_e_StdIDTimes",isBold:!1,isItalic:!1},9:{id:"9",name:"StandardID_e_StdIDTimesB",isBold:!0,isItalic:!1},10:{id:"10",name:"StandardID_e_StdIDTimesBI",isBold:!0,isItalic:!0},11:{id:"11",name:"StandardID_e_StdIDTimesI",isBold:!1,isItalic:!0},12:{id:"12",name:"StandardID_e_StdIDSymbol",isBold:!1,isItalic:!1},13:{id:"13",name:"StandardID_e_StdIDZapfDingbats",isBold:!1,isItalic:!1}};let nb=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}(0,E.Z)(e,t);var n=e.prototype;return n.put=function(t){},n.isBold=function(){let t=this.info.textState.font;if(t.isStandard){if(eb[t.standardId])return eb[t.standardId].isBold;console.warn("No configuration found for standard font: ",t)}return t.isBold||262144==(262144&t.styles)},n.isItalic=function(){let t=this.info.textState.font;if(t.isStandard){if(eb[t.standardId])return eb[t.standardId].isItalic;console.warn("No configuration found for standard font: ",t)}return t.isItalic||64==(64&t.styles)},n.getText=function(){return this.info.textState.text},n.getFontInfo=function(){return this.info.textState.font},n.setText=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");if(this.getText()===t)return Promise.resolve();let e=this.getPDFPage();return e.doc.api.setTextObjectChar(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>{this.afterUpdated(t)}))},n.setItalic=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");if(this.isItalic()===t)return Promise.resolve();let e=this.getPDFPage();return e.doc.api.setTextObjectItalic(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>{this.afterUpdated(t)}))},n.setBold=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");if(this.isBold()===t)return Promise.resolve();let e=this.getPDFPage();return e.doc.api.setTextObjectBold(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>{this.afterUpdated(t)}))},n.getFontSize=function(){return this.info.textState.size},n.setFontSize=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");if(this.getFontSize()===t)return Promise.resolve();let e=this.getPDFPage();return e.doc.api.setTextObjectFontSize(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>{this.afterUpdated(t)}))},n.setStandardFont=function(t){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");let e=this.info.textState.font;if(!e||e.isStandard&&t===e.stardardId)return Promise.resolve();let n=this.getPDFPage();return n.doc.api.setTextObjectStandardFont(n.getPDFDoc().getId(),n.getId(),this.getId(),t).then((t=>{this.afterUpdated(t)}))},n.setFontByName=function(t,e,n){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");if(!this.info.textState.font)return Promise.resolve();let i=this.getPDFPage();return i.doc.api.setTextObjectFontByName(i.getPDFDoc().getId(),i.getId(),this.getId(),t,e,n).then((t=>{this.afterUpdated(t)}))},n.getWoff=function(){let t=this.getPDFPage();return t.doc.api.getTextObjectWoff(t.getPDFDoc().getId(),t.getId(),this.getId())},e}(dv);var ib=nb;let rb=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getFillMode=function(){return this.info.fillMode},n.setBorderColor=function(e){if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");return this.info.needStroke=0!==e,t.prototype.setBorderColor.call(this,e)},n.getPathPoints=function(){return this.info.path},n.needStroke=function(){return this.info.needStroke},e}(dv),ob=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}(0,E.Z)(e,t);var n=e.prototype;return n.setRotation=function(t=0){if(!t)return Promise.resolve(this.info);if(!this.doc.checkPermission(pe.modify))throw new Error("Permission error");let e=this.getPDFPage();return e.doc.api.setImageObjectRotation(e.getPDFDoc().getId(),e.getId(),this.getId(),t).then((t=>this.afterUpdated(t)))},n.getStream=function(){const t=this.getPDFPage();return t.doc.api.getImageObjectStream(t.getPDFDoc().getId(),t.getId(),this.getId())},e}(dv),sb=function(){function t(t){this.engine=t}return t.prototype.get=function(t,e){if(!t)return null;let n=this.engine;switch(t.type){case 1:return new ib(t,e,n);case 2:return new rb(t,e,n);case 3:return new ob(t,e,n);case void 0:return null;default:return new dv(t,e,n)}},t}();const ab="foxit-default-annot-prop";let cb=function(){function t(t,e,n){this.api=new Cv.Z(t),this.storage=n.storage,this.annotManager=new tb,this.actionFactory=yr,this.graphicsObjectManager=new sb(this),this.eventEmitter=e,this.userName=null,this.userConfig={},this.pdfDocCacheMap=new Map,this.defaultAnnotConfig=function(){}}var e=t.prototype;return e.init=function(){return this.api.init().catch((t=>Promise.reject(t.error)))},e.setIcons=function(t){return this.api.setIcons(t)},e.addIcon=function(t){return this.api.addIcon(t)},e.removeIcon=function(t,e,n){return this.api.removeIcon(t,e,n)},e.removePDFDocById=function(t){if(this.pdfDocCacheMap.has(t)){let e=this.pdfDocCacheMap.get(t);e&&(this.pdfDocCacheMap.delete(t),e.destroy())}},e.createPDFDocById=function(t,e={}){let n;return this.pdfDocCacheMap.has(t)?n=this.pdfDocCacheMap.get(t):(n=new nw(t,this,e),this.pdfDocCacheMap.set(t,n)),n},e.getPDFDocByFile=function(t,e={}){return e.fileName=e.fileName||t.name||"",this.api.getPDFDocIdByFile(t,{jwt:e.jwt,ReadBlockOption:e.ReadBlockOption}).then((t=>this.createPDFDocById(t,e)))},e.checkCertificatePassword=function(t,e){return this.api.checkCertificatePassword(t,e)},e.getCertificateInfo=function(t,e){return this.api.getCertificateInfo(t,e)},e.createNewDoc=function(t="untitled.pdf",e="",n={height:842,width:595}){return this.api.createNewDoc(t,e,n).then((e=>this.getPDFDocByFile(e,{fileName:t}))).then((t=>t.parse({password:""})))},e.createNewPortfolioDoc=function(t,e,n="Portfolio.pdf"){return this.api.createNewPortfolioDoc(t,e,n).then((t=>this.getPDFDocByFile(t,{fileName:n}))).then((t=>t.parse({password:""})))},e.getPDFDocByChunk=function(t,e,n){return this.api.getPDFDocIdByChunk(t,e).then((t=>this.createPDFDocById(t,n)))},e.getPDFDocByHttpRangeRequest=function(t,e){return this.api.getPDFDocIdByHttpRangeRequest(t,{jwt:e.jwt}).then((t=>this.createPDFDocById(t,e)))},e.getPDFDocByArrayBuffer=function(t,e){return this.api.getPDFDocIdByArrayBuffer(t).then((t=>this.createPDFDocById(t,e)))},e.getPDFDocByCacheId=function(t,e){return this.pdfDocCacheMap.has(t)?Promise.resolve(this.pdfDocCacheMap.get(t)):this.getPDFDocById(t,e)},e.getPDFDocById=function(t,e){return Promise.resolve(this.createPDFDocById(t,e))},e.setUserConfig=function(t){this.userConfig=t||{}},e.getUserConfig=function(){return this.userConfig},e.getUserCommentConfig=function(){return this.userConfig.commentPreference||{}},e.setUserName=function(t){return this.api.setUserName(t).then((e=>{this.userName=t}))},e.getUserName=function(){return this.userName?Promise.resolve(this.userName):this.api.getUserName().then((t=>(this.userName=t,t)))},e.setDynamicInfoFormula=function(t,e){return this.api.setDynamicInfoFormula(t,e)},e.getDynamicInfoFormula=function(){return this.api.getDynamicInfoFormula()},e.setDigitalTimeFormat=function(t){return this.api.setDigitalTimeFormat(t)},e.setDigitalInfo=function(t){return this.api.setDigitalInfo(t)},e.getUtils=function(){return n},e.getDefaultAnnotConfig=function(){return(t,e)=>{const n=this.defaultAnnotConfig(t,e),i=this.getAnnotDefaultProperty(t,e);return(0,_.extendOptions)({},n,i)}},e.setDefaultAnnotConfig=function(t){this.defaultAnnotConfig=t},e.initADPs=function(){return this.ADPs||(this.ADPs=this.storage.getItem(ab)||{}),this.ADPs},e.getAnnotDefaultProperty=function(t,e=""){return this.initADPs(),this.ADPs[t+e]||{}},e.setAnnotDefaultProperty=function(t,e="",n={}){this.initADPs(),y(this.ADPs,{[t+e]:n}),this.storage.setItem(ab,this.ADPs)},e.setTabOrder=function(t,e,n){return this.api.setTabOrder(t,e,n)},e.getTabOrder=function(t,e){return this.api.getTabOrder(t,e)},e.setStructureOrder=function(t,e,n){return this.api.setStructureOrder(t,e,n)},e.getAllModuleLicenseRight=function(){return this.api.getAllModuleLicenseRight().then((t=>t))},e.getPDFDocFromImageFile=function(t,e={}){let n,i,r,o;return e.fileName=e.fileName||t.name||"",this.api.getPDFDocFromImageFile(t).then((t=>{const n=t.docId;i=t.width,r=t.height,o=t.buffer;return this.createPDFDocById(n,e).parse({password:""})})).then((t=>(n=t,t.getPageByIndex(0)))).then((t=>t.addImage(o,{left:0,top:r,right:i,bottom:0}))).then((t=>{if(t)return n;throw new Error("faied to insert image")})).catch((t=>(t&&console.error(t),Promise.reject(t))))},e.ensureSideModeLoaded=function(t="openssl"){return this.api.ensureSideModeLoaded(t)},t}();var lb=cb,hb=m(1551),ub=m.n(hb);let db=function(){function t(){this.container=document.createElement("div"),this.printArea=new(ub())(this.container),this.imageCache=[]}var e=t.prototype;return e.appendImage=function(t,e){return this.imageCache[t]=this.createImageDOM(t,e)},e.getImageCache=function(){return this.imageCache},e.clearImageCache=function(){this.imageCache=[]},e.createImageDOM=function(t,e){const n=document.createElement("div");n.setAttribute("data-index",t),n.style.cssText="width: 100%;height: 100%; page-break-after: always;";const i=document.createElement("img");i.style.cssText="max-width: 100%; max-height: 100%;";var r=new Promise((function(t,e){i.onload=function(){t(n)},i.onerror=function(){e(n)}}));return i.src=e,n.appendChild(i),r},e.print=function(t,e){_.isIE&&t&&function(){var t="HKEY_CURRENT_USER",e="\\Software\\Microsoft Internet Explorer\\PageSetup ";try{var n,i=new ActiveXObject("WScript.Shell");n="header",i.RegWrite(t+e+n,""),n="footer",i.RegWrite(t+e+n,"")}catch(t){console.error(t)}}(),(e||this.imageCache).reduce(((t,e)=>t.then((function(){return e})).then((t=>{t&&this.container.appendChild(t)}))),Promise.resolve()).then((()=>{this.imageCache=[],this.printArea.getHead=()=>`\n                <head>\n                <style>\n                    *{ margin: 0; padding: 0; }\n                </style>\n                ${t?'\n                    <style type="text/css" media="print">\n                        @page {\n                            /* hide header and footer */\n                            size: auto;\n                            margin: 0;\n                        }\n                        a[href]:after { content: none !important; }\n                        img[src]:after { content: none !important; }\n                    </style>\n                ':""}\n                </head>\n            `,this.printArea.print(),this.container.innerHTML=""}))},t}();var fb;m(1386);function pb(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}function gb(t,e){let n=pb(w.Z,t.data.annots);if(e.action===Dr.REMOVE_ANNOT){const i=e.data.slice(0);for(let t=0;t<i.length;){const{annotId:e,pageIndex:r}=i[t];let o=!1;for(let t=0;t<n.length;){const i=n[t];i.name===e&&i.page===r?(n.splice(t,1),o=!0):t++}o?i.splice(t,1):t++}const r=[];return n.length>0&&r.push({version:Math.min(t.version,e.version),fileId:t.fileId,action:Dr.UPDATE_ANNOT,data:{annots:n}}),i.length>0&&r.push({version:Math.max(t.version,e.version),fileId:t.fileId,action:e.action,data:i}),r}return n.push.apply(n,pb(w.Z,e.data.annots)),[{version:Math.max(t.version,e.version),fileId:t.fileId,action:Dr.UPDATE_ANNOT,format:t.format,data:{annots:n}}]}function mb(t){const e=t;return!(e.action!==Dr.UPDATE_ANNOT&&e.action!==Dr.CREATE_ANNOT||e.format&&e.format!==fb.json)}function vb(t){return t.action===Dr.REMOVE_ANNOT}function yb(t){return yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yb(t)}function wb(t,e,n){return wb=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&(0,Vg.Z)(r,n.prototype),r},wb.apply(null,arguments)}function bb(t){var e="function"==typeof Map?new Map:void 0;return bb=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return wb(t,arguments,yb(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,Vg.Z)(n,t)},bb(t)}!function(t){t.json="json",t.fdf="fdf"}(fb||(fb={}));let Ab=function(t){function e(e){var n;return(n=t.call(this,e)||this).name="CollaborationDataError",n}return(0,E.Z)(e,t),e}(bb(Error)),Pb=function(t){function e(e){var n;return(n=t.call(this,`No handler found for collaboration action: "${e.action}", that will be ignored!`)||this).name="NoHandlerFoundForCollaborationDataError",n}return(0,E.Z)(e,t),e}(bb(Error)),Sb=function(t){function e(){var e;return(e=t.call(this,"No files area currently open, cannot handling the received collaboration data")||this).name="PDFDocumentNotOpeningError",e}return(0,E.Z)(e,t),e}(bb(Error)),Cb=function(){function t(t){this.handler=t.reduce(((t,e)=>new Eb(e,t)))}var e=t.prototype;return e.accept=function(t){return Promise.resolve(!0)},e.receive=function(t,e){return this.handler.receive(t,e)},t}(),Eb=function(){function t(t,e){this.handler=t,this.prevHandler=e}var e=t.prototype;return e.accept=function(t){return Promise.resolve(!0)},e.receive=function(t,e){return this.handler.receive(t,this.prevHandler||e)},t}();var xb;function Db(t){const e=new FileReader;return new Promise(((n,i)=>{e.onload=()=>{n(e.result)},e.onerror=i,e.readAsDataURL(t)}))}function Ib(t){const e=t.split(","),n=e[0].match(/:(.*?);/)[1],i=atob(e[1]);let r=i.length;const o=new Uint8Array(r);for(;r--;)o[r]=i.charCodeAt(r);return new Blob([o],{type:n})}!function(t){t.FROM_FILE="from-file",t.FROM_URL="from-url"}(xb||(xb={}));const Rb=_.LoggerFactory.getLogger("Collaboration");function Tb(t,e){return t<15}let Fb=function(t){function e(e,n){var i;(i=t.call(this)||this).pdfViewer=e,i.builtInHandlerInstances=[],i.userHandlerInstances=[],i.version=0,i.queuedExecutor=new _.QueuedAsyncTaskExecutor,i.sessionDefer=(0,_.createDeferred)(),i.isOpenedFromOtherClient=!1,i.localDataOnDisconnected=[],i.communicator=n.communicator,i.annotationDataFormat=n.annotationFormat||"json",i.continueToConnect=n.continueToConnect||Tb;const r=n.handlerClasses;return Array.isArray(r)&&r.forEach((t=>{i.registerUserHandler(t)})),i}(0,E.Z)(e,t);var n=e.prototype;return n.registerBuiltInHandler=function(t){this.builtInHandlerInstances.push(new t(this.pdfViewer))},n.registerUserHandler=function(t){this.userHandlerInstances.push(new t(this.pdfViewer))},n.registerCollabDataHandler=function(t,e){if("function"==typeof t){if(!t.prototype.accept||!t.prototype.receive)throw new Error("Illegal collaboration data handler: "+t);this.registerUserHandler(t)}else"string"==typeof t&&"function"==typeof e&&this.registerUserHandler(function(){function n(){}var i=n.prototype;return i.accept=function(e){return Promise.resolve(e.action===t)},i.receive=function(t,n){return e.call(this,t,(t=>n?n.receive(t):Promise.resolve()))},n}())},n.prepare=function(){this.communicator.registerMessageReceiver((t=>{this.queuedExecutor.exec((()=>this.handleServerMessage(t)))}));const t=t=>{this.collaborateAddAnnotation(t)};let e={};const n=t=>{const n=t.annot;if("link"===n.info.type||"screen"===n.info.type)return;let i;i=n.isGrouped&&n.isGrouped()?n.getGroupElements():[n],e[n.getId()]={action:Dr.REMOVE_ANNOT,data:i.map((t=>({annotId:t.getUniqueID(),pageIndex:t.getPDFPage().getIndex()})))}},i=(t,n)=>{const i=n.getId(),r=e[i];r&&this.send(r),delete e[i]},r=t=>{const e=t.annot;this.collaborateUpadteAnnotation(e)},o=(t,e)=>{this.shareAndSyncCurrentFile(t,e)},s=()=>{this.isOpenedFromOtherClient=!1,this.version=0,this.communicator.disconnect(),this.sessionDefer=(0,_.createDeferred)()},a=t=>{t.normalize()},c=this.pdfViewer.eventEmitter;c.on(nt.addAnnotSuccess,t),c.on(nt.removeActionAnnotationBefore,n),c.on(nt.removeActiveAnnotationSuccess,i),c.on(nt.updateActiveAnnotation,r),c.on(nt.openFileSuccess,o),c.on(nt.willCloseDocument,s),c.on(nt.obtainsPageFromEngine,a),this.addDestroyHook((()=>{c.off(nt.addAnnotSuccess,t),c.off(nt.removeActionAnnotationBefore,n),c.off(nt.removeActiveAnnotationSuccess,i),c.off(nt.updateActiveAnnotation,r),c.off(nt.openFileSuccess,o),c.off(nt.willCloseDocument,s),c.off(nt.obtainsPageFromEngine,a)}))},n.shareAndSyncCurrentFile=function(t,e){return this.isOpenedFromOtherClient?this.sessionDefer.promise.then((e=>this.sync().then((()=>(this.communicator.connect(e.shareId),t))))):(delete e.options.password,this.communicator.createSession(t,e).then((t=>(this.sessionDefer.resolve({shareId:t,openFileParams:e}),this.communicator.connect(t)))).then((()=>this.sync())))},n.collaborateUpadteAnnotation=function(t){let e;if(e=t.isGrouped&&t.isGrouped()?t.getGroupElements():[t],e=e.filter((t=>"screen"!==t.info.type&&"link"!==t.info.type)),0!==e.length)if("json"===this.annotationDataFormat)t.page.doc.exportAnnotsToJSON(e).then((t=>{this.send({action:Dr.UPDATE_ANNOT,format:fb.json,data:{annots:t}})}));else{const n="xfdf"===this.annotationDataFormat;t.page.doc.exportAnnotsToFDF(n?Ct.xfdf:Ct.fdf,e).then((t=>Db(t))).then((t=>{this.send({action:Dr.UPDATE_ANNOT,format:fb.fdf,data:{fdf:t,annots:e.map((t=>({page:t.page.getIndex(),id:t.getUniqueID()})))}})}))}},n.collaborateAddAnnotation=function(t){let e;if(e="function"==typeof t.isGrouped&&t.isGrouped()?t.getGroupElements():[t],e=e.filter((t=>"screen"!==t.info.type&&"link"!==t.info.type)),0!==e.length)if("json"===this.annotationDataFormat)t.page.doc.exportAnnotsToJSON(e).then((t=>{this.send({action:Dr.CREATE_ANNOT,data:{annots:t}})}));else{const n="xfdf"===this.annotationDataFormat;t.page.doc.exportAnnotsToFDF(n?Ct.xfdf:Ct.fdf,e).then((t=>Db(t))).then((t=>{this.send({action:Dr.CREATE_ANNOT,format:fb.fdf,data:{fdf:t,annots:e.map((t=>({page:t.page.getIndex(),id:t.getUniqueID()})))}})}))}},n.getSessionInfo=function(){return this.sessionDefer.promise},n.getShareId=function(){return this.sessionDefer.promise.then((t=>t.shareId))},n.send=function(t){return this.communicator?this.queuedExecutor.exec((()=>this.reconnectIfNecessary().then((()=>this.sessionDefer.promise)).then((t=>this.localDataOnDisconnected.length>0?this.sync().then((()=>t)):t)).then((e=>{const n=this.localDataOnDisconnected.concat(t).map((t=>{const n=this.pdfViewer.getCurrentPDFDoc(),i=y(y({},t),{version:++this.version,fileId:n.info.fileID});return this.communicator.send(e,JSON.stringify(i))}));return this.localDataOnDisconnected.length=0,Promise.all(n)}),(e=>(this.localDataOnDisconnected.push(t),Promise.reject(e)))))):st.RESOLVED_PROMISE_VOID},n.openFileByShareId=function(t){return this.communicator.getSessionInfo(t).then((t=>{if(!t){const e=new Error("Unexpected session info for opening file: "+JSON.stringify(t));throw e.error=dt.collaborationSession,e}this.sessionDefer.resolve(t);const e=t.openFileParams;switch(e.type){case xb.FROM_FILE:return this.isOpenedFromOtherClient=!0,this.pdfViewer.openPDFByFile(e.file,e.options||{});case xb.FROM_URL:return this.isOpenedFromOtherClient=!0,this.pdfViewer.openPDFByHttpRangeRequest({range:e.range,size:e.size},e.options);default:const t=new Error("Unexpected session info for opening file:"+JSON.stringify(e));throw t.error=dt.collaborationSession,t}}))},n.destroy=function(){t.prototype.destroy.call(this),this.communicator.destroy()},n.reconnectIfNecessary=function(t=0){const e=e=>{if(!this.continueToConnect(t,e))throw new Error("Failed to reconnect to the collaboration server");return this.reconnectIfNecessary(t+1)};return this.communicator.isConnected().then((t=>!!t||this.sessionDefer.promise.then((({shareId:t})=>this.communicator.connect(t).then((()=>this.communicator.isConnected())).then((n=>{if(!n)return e(t)}),(n=>(_.LoggerFactory.getLogger("COLLABORATION").error("An error occurred while connect to the collaboration server",n),e(t))))))))},n.sync=function(){return this.sessionDefer.promise.then((({shareId:t})=>this.communicator.getLostData(t,this.version))).then((t=>{if(t&&0!==t.length)return this.version=t[t.length-1].version,function(t){if(t.length<1)return t;const e=[t[0]];for(let n=1,i=t.length;n<i;n++){const r=e[e.length-1],o=t[n];mb(r)&&(mb(o)||vb(o))?(e.splice.apply(e,[e.length-1,1].concat(pb(w.Z,gb(r,o)))),0===e.length&&(n<i-1&&e.push(t[n+1]),n++)):e.push(o)}return e.forEach((t=>{t.action===Dr.UPDATE_ANNOT&&(t.data.annots=t.data.annots.reduceRight(((t,e)=>{const n=t.findIndex((t=>t.name===e.name));return-1===n&&t.push(e),t}),[]))})),e}(t).reduce(((t,e)=>this.findHandler(e).then((([n,i])=>n?t.finally((()=>n.receive(e,i))):(Rb.warn(new Pb(e)),t)))),st.RESOLVED_PROMISE_VOID)}))},n.findHandlerAsync=function(t,e,n){const i=(t,e,r)=>r>=t.length?Promise.resolve(void 0):t[r].accept(e).then((o=>{if(o){if(n(t[r]))return}return i(t,e,r+1)}));return i(t,e,0)},n.findFirstHandlerAsync=function(t,e){const n=(0,_.createDeferred)();return this.findHandlerAsync(t,e,(t=>(n.resolve(t),!0))),n.promise},n.findAllMatchHandlersAsync=function(t,e){const n=[];return this.findHandlerAsync(t,e,(t=>(n.push(t),!1))).then((()=>n))},n.findHandler=function(t){return this.findAllMatchHandlersAsync(this.userHandlerInstances,t).then((e=>this.findFirstHandlerAsync(this.builtInHandlerInstances,t).then((t=>{switch(e.length){case 0:return[t,t];case 1:return[e[0],t]}return[new Cb(e),t]}))))},n.handleServerMessage=function(t){const e=this.pdfViewer.getCurrentPDFDoc();if(!e)throw new Sb;const n=e.info.fileID,i=JSON.parse(t);if(!this.isSameFileID(i.fileId,n))throw new Ab(`File id not match! remote: ${i.fileId}, local: ${n}`);return this.findHandler(i).then((([e,n])=>{if(e)return i.version-this.version!=1?this.sync():(this.version=i.version,e.receive(i,n));throw new Ab("No handler found for the collaboration data: "+t)}))},n.isSameFileID=function(t,e){return t.length===e.length&&!t.some((t=>-1===e.indexOf(t)))},e}(_.Disposable),_b=function(){function t(t){this.action=t}return t.prototype.accept=function(t){return Promise.resolve(t.action===this.action)},t}(),kb=function(t){function e(e){var n;return(n=t.call(this,Dr.CREATE_ANNOT)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const n=this.pdfViewer.getCurrentPDFDoc();if(function(t){return t.format===fb.fdf}(t)){const e=Ib(t.data.fdf);return n.importAnnotsFromFDF(e).then((()=>{t.data.annots.forEach((({page:t,id:e})=>{const n=this.pdfViewer.getAnnotRender(t,e);n&&n.redraw(!1,!0)}))}))}{const e=t.data.annots.filter((t=>"link"!==t.type&&"screen"!==t.type));return n.importAnnotsFromJSON(e)}},e}(_b);let Mb=function(t){function e(e){var n;return(n=t.call(this,Dr.REMOVE_ANNOT)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const n=this.pdfViewer.getCurrentPDFDoc();return Promise.all(t.data.map((t=>n.getPageByIndex(t.pageIndex).then((e=>"string"==typeof t.annotId?e.removeAnnotById(t.annotId):e.removeAnnotByObjectNumber(t.annotId)))))).then(ei)},e}(_b),Ob=function(t){function e(e){var n;return(n=t.call(this,Dr.UPDATE_ANNOT)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const n=this.pdfViewer.getCurrentPDFDoc();if(function(t){return t.format===fb.fdf}(t)){const e=Ib(t.data.fdf);return n.importAnnotsFromFDF(e).then((()=>{t.data.annots.forEach((({page:t,id:e})=>{const n=this.pdfViewer.getAnnotRender(t,e);if(n){n.redraw(!1,!0);const t=n.component;t&&t.isActive&&t.active()}}))}))}{const e=t.data.annots.filter((t=>"link"!==t.type&&"screen"!==t.type));return n.importAnnotsFromJSON(e).then((t=>{e.forEach((t=>{const e=this.pdfViewer.getAnnotRender(t.page,t.name);if(e){e.redraw(!1,!0);const t=e.component;t&&t.isActive&&t.active()}}))}))}},e}(_b);let Lb,Nb,Bb,Vb=function(t){function e(e){var n;return(n=t.call(this,Dr.PPO_INSERT_PAGE)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const n=this.pdfViewer.getCurrentPDFDoc(),{pageIndex:i,width:r,height:o}=t.data;return n.insertPage(i,r,o)},e}(_b),Ub=function(t){function e(e){var n;return(n=t.call(this,Dr.PPO_REMOVE_PAGE)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){return this.pdfViewer.getCurrentPDFDoc().removePage(t.data.pageIndex)},e}(_b),Hb=function(t){function e(e){var n;return(n=t.call(this,Dr.PPO_ROTATE_PAGE)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const n=this.pdfViewer.getCurrentPDFDoc(),i=Math.floor((t.data.angle%360+360)%360/90)%4;return n.getPageByIndex(t.data.pageIndex).then((t=>t.setRotation(i)))},e}(_b),jb=function(t){function e(e){var n;return(n=t.call(this,Dr.PPO_MOVE_PAGE)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const n=this.pdfViewer.getCurrentPDFDoc(),{sourceIndex:i,destIndex:r}=t.data;return n.movePageTo(i,r).then((()=>{this.pdfViewer.goToPage(r,0,0,!1)}))},e}(_b),$b=function(t){function e(e){var n;return(n=t.call(this,Dr.ADD_REPLY)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const{pageIndex:n,annotId:i,reply:r}=t.data;return this.pdfViewer.getCurrentPDFDoc().getPageByIndex(n).then((t=>"string"==typeof i?t.getAnnotsByIdArray([i]):t.getAnnotsByObjectNumArray([i]))).then((([t])=>{if(t)return t.addReply(r)}))},e}(_b),Wb=function(t){function e(e){var n;return(n=t.call(this,Dr.REMOVE_REPLY)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const n=this.pdfViewer.getCurrentPDFDoc(),{pageIndex:i,replyId:r}=t.data;return n.getPageByIndex(i).then((t=>"string"==typeof r?t.removeAnnotById(r):t.removeAnnotByObjectNumber(r)))},e}(_b),Yb=function(t){function e(e){var n;return(n=t.call(this,Dr.ADD_REVIEW_STATE)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const{pageIndex:n,annotId:i,stateAnnotJSON:r}=t.data;return this.pdfViewer.getCurrentPDFDoc().getPageByIndex(n).then((t=>"string"==typeof i?t.getAnnotsByIdArray([i]):t.getAnnotsByObjectNumArray([i]))).then((([t])=>{if(t)return t.addReviewState(r)}))},e}(_b),Gb=function(t){function e(e){var n;return(n=t.call(this,Dr.UPDATE_ANNOT_CONTENT)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const{pageIndex:n,annotId:i,content:r}=t.data;return this.pdfViewer.getCurrentPDFDoc().getPageByIndex(n).then((t=>"string"==typeof i?t.getAnnotsByIdArray([i]):t.getAnnotsByObjectNumArray([i]))).then((([t])=>{if(t)return t.setContent(r)}))},e}(_b),Kb=function(){function t(t,e=!1){this.permissions=t,this.noPermission=e}t.fully=function(){return Lb||(Lb=new t([Sh.fully])),Lb},t.ignorable=function(){return Nb||(Nb=new t([])),Nb},t.none=function(){return Bb||(Bb=new t([],!0)),Bb};var e=t.prototype;return e.has=function(t){return!this.noPermission&&(0===this.permissions.length||(this.permissions.indexOf(Sh.fully)>-1||this.permissions.indexOf(t)>-1))},e.ignorable=function(){return!this.noPermission&&0===this.permissions.length},e.isModifiable=function(){return this.has(Sh.modifiable)},e.isPlayable=function(){return this.has(Sh.playable)},e.isAdjustable=function(){return this.has(Sh.adjustable)},e.isEditable=function(){return this.has(Sh.editable)},e.isDeletable=function(){return this.has(Sh.deletable)},e.isAttachmentDownloadable=function(){return this.has(Sh.attachmentDownloadable)},e.isRedactionApplicable=function(){return!0},e.isReplyable=function(){return this.has(Sh.replyable)},e.equalsTo=function(e){if(!(e&&e instanceof t))return!1;const n=this.permissions,i=e.permissions;return n.length===i.length&&(this.noPermission===e.noPermission&&!n.some((t=>-1===i.indexOf(t))))},t}();const qb=_.LoggerFactory.getLogger("AnnotationAuthorityManager");let zb=function(t){function e(e,n){var i;(i=t.call(this)||this).pdfViewer=e,i.getAnnotPermissionCallback=n,i.store=new _.Store,i.cachedAnnots={},i.isUpdateAllAfterImport=!1;const r=t=>{Array.isArray(t)&&t.length>0&&t.forEach((t=>{const e=i.generateKey(t);delete i.cachedAnnots[e]}))},o=t=>{t.forEach((t=>i.update(t)))},s=t=>{i.update(t)},a=(t,e)=>{i.isUpdateAllAfterImport?i.updateAll():e.forEach((t=>{t.newAnnots.forEach((t=>i.update(t)))}))},c=(t,e,n)=>{e.forEach((t=>{i.update(t)}))},l=t=>{t.forEach((t=>{i.update(t)}))};return e.eventEmitter.on(nt.annotationRemoved,r),e.eventEmitter.on(nt.annotationAdd,o),e.eventEmitter.on(nt.annotationImported,a),e.eventEmitter.on(nt.annotationLoaded,c),e.eventEmitter.on(nt.annotationReplyAdd,s),e.eventEmitter.on(nt.annotationUpdated,l),i.addDestroyHook((()=>{e.eventEmitter.off(nt.annotationRemoved,r),e.eventEmitter.off(nt.annotationAdd,o),e.eventEmitter.off(nt.annotationImported,a),e.eventEmitter.off(nt.annotationLoaded,c),e.eventEmitter.off(nt.annotationReplyAdd,s),e.eventEmitter.on(nt.annotationUpdated,l),i.clear(),i.store.destroy()})),i}(0,E.Z)(e,t);var n=e.prototype;return n.getPermission=function(t){if(!t.page||t.isDestroyed)return Promise.resolve(Kb.none());const e=this.generateKey(t);return this.store.has(e)||this.update(t),this.store.takeWhile(e)},n.update=function(t){if(!t||t.isDestroyed)return Promise.resolve(Kb.none());const e=this.generateKey(t);if(t.isDeleted()){const t=Promise.resolve(Kb.ignorable());return this.store.dispatch(e,t),delete this.cachedAnnots[e],t}const n=this.store.getCurrentValue(e)||st.RESOLVED_PROMISE_VOID,i=(this.getAnnotPermissionCallback(t)||st.RESOLVED_PROMISE_VOID).then((e=>{let i;return i=e?0===e.length?Kb.none():new Kb(e):Kb.ignorable(),n.then((e=>{if(!i.equalsTo(e))try{this.pdfViewer.eventEmitter.emit(nt.annotationPermissionChanged,t,i,e)}catch(t){qb.error("An error occurred inside the listener of ViewerEvents.annotationPermissionChanged",t)}})),i}));return this.store.dispatch(e,i),this.cachedAnnots[e]=t,i},n.setAnnotPermissionCallback=function(t){this.getAnnotPermissionCallback=t},n.subscribe=function(t,e){const n=this.generateKey(t);return this.store.subscribe(n,(n=>{n.then((n=>{e(n,t)}))}))},n.updateAll=function(){return Promise.all(Object.keys(this.cachedAnnots).filter((t=>{const e=this.cachedAnnots[t].isDeleted();return e&&delete this.cachedAnnots[t],!e})).map((t=>this.update(this.cachedAnnots[t]))))},n.generateKey=function(t){return`${t.page.getId()}/${t.getId()}`},n.clear=function(){this.store.clear(),this.cachedAnnots={}},n.setUpdateAllAfterImported=function(t){this.isUpdateAllAfterImport=t},e}(_.Disposable),Jb=function(t){function e(e){var n;return(n=t.call(this,Dr.MOVE_ANNOTS_BETWEEN_PAGES)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const n=this.pdfViewer.getCurrentPDFDoc();return Promise.all([n.getPageByIndex(t.data.fromPageIndex),n.getPageByIndex(t.data.toPageIndex)]).then((([e,i])=>{const r=t.data.annots,o=Object.keys(r);return e.getAnnotsByIdArray(o).then((t=>{const o=t.reduce(((t,e)=>(t[e.getObjectNumber()]=r[e.getUniqueID()],t)),{});return n.moveAnnotsToPage(e,i,o)}))}))},e}(_b),Zb=function(t){function e(e){var n;return(n=t.call(this,Dr.ADD_MARKED_STATE)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const{pageIndex:n,annotId:i,stateAnnotJSON:r}=t.data;return this.pdfViewer.getCurrentPDFDoc().getPageByIndex(n).then((t=>t.getAnnotsByObjectNumArray([i]))).then((([t])=>{if(t)return t.addMarkedState(r)}))},e}(_b),Xb=function(t){function e(e){var n;return(n=t.call(this,Dr.IMPORT_ANNOTATIONS_FILE)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){const n=t.data.file,i=atob(n),r=new Uint8Array(new ArrayBuffer(i.length));for(let t=0;t<i.length;t++)r[t]=i.charCodeAt(t);return this.pdfViewer.getCurrentPDFDoc().importAnnotsFromFDF(r)},e}(_b),Qb=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.set=function(e){t.prototype.dispatch.call(this,"change",e)},n.get=function(){return t.prototype.getCurrentValue.call(this,"change")},n.onchange=function(e){return t.prototype.subscribe.call(this,"change",(t=>{e(t)}))},e}(_.Store);var tA;function eA(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}!function(t){t.playing="playing",t.paused="paused",t.stopped="stopped"}(tA||(tA={}));let nA=function(t){function e(){var e;return(e=t.call(this)||this).status=tA.stopped,e.statusStore=new Qb,e}(0,E.Z)(e,t),e.extend=function(t){let n=function(e){function n(){return e.apply(this,arguments)||this}(0,E.Z)(n,e);var i=n.prototype;return i.init=function(){return this.safeCall("init")},i.supported=function(){const e=t.supported;if("function"==typeof e)return e.apply(this);throw new Error("Method not implementated: supported")},i.beforePlay=function(){this.safeCall("beforePlay")},i.getVoices=function(){return this.safeCall("getVoices")},i.doPause=function(){return this.safeCall("doPause")},i.doResume=function(){return this.safeCall("doResume")},i.doStop=function(){return this.safeCall("doStop")},i.speakText=function(t,e){return this.safeCall("speakText",t,e)},i.onCurrentPlayingOptionsUpdated=function(){return this.safeCall("onCurrentPlayingOptionsUpdated")},i.safeCall=function(e,...n){const i=t[e];if("function"==typeof i)return i.apply(this,n)},n}(e);for(let e in t)e in n.prototype||(n.prototype[e]=t[e]);return n};var n=e.prototype;return n.pause=function(){this.status===tA.playing&&(this.status=tA.paused,this.statusStore.set(this.status),this.doPause())},n.resume=function(){this.status===tA.paused&&(this.status=tA.playing,this.statusStore.set(this.status),this.doResume())},n.stop=function(){this.status!==tA.stopped&&(this.status=tA.stopped,this.statusStore.set(this.status),this.currentPlayingOptions=void 0,this.doStop())},n.play=function(t,e={rate:1,pitch:1,volume:1}){this.currentPlayingOptions=e,this.status=tA.playing,this.statusStore.set(this.status);let n=[];const i=new _.QueuedAsyncTaskExecutor,r=new _.QueuedAsyncTaskExecutor;let o,s,a=!1,c=!1;const l=this.statusStore.onchange((t=>{c=t===tA.stopped,c&&(clearTimeout(s),i.cancel(),r.cancel(),l&&l())}));for(const e of t)i.exec((()=>{if(!c)return e.then((t=>{if(c)return;const e=t.text.split(" ");if(0===e.length){if(!o)return;e[0]=o,o=void 0}else o&&("-"===o[o.length-1]?e[0]=o.substr(0,o.length-1)+e[0]:e.unshift(o),o=void 0);o=e[e.length-1],e.splice(-1,1),n.push.apply(n,eA(w.Z,e))}))}));return i.waitForCurrentRunningTasks().then((()=>{a=!0,o&&(n.push(o),o=void 0)})),new Promise(((t,e)=>{const i=()=>{if(c)r.waitForCurrentRunningTasks().then(t,e);else{if(n.length>0){const e=function(t){const e=[];return t.split(/[\n\t\.。;，]+|\s{2}/).forEach((t=>{-1===t.indexOf(",")?e.push(t):e.push.apply(e,eA(w.Z,t.replace(/\d+(,\d{3})+|,/g,(t=>","===t?",,":t)).split(",,")))})),e}(n.join(" "));e.forEach((e=>{e&&r.exec((()=>this.speakText(e,this.currentPlayingOptions))).finally((()=>{c&&t()}))}))}n.length=0,a?r.waitForCurrentRunningTasks().then(t,e):s=setTimeout(i)}};s=setTimeout(i)}))},n.updateOptions=function(t){this.currentPlayingOptions&&(y(this.currentPlayingOptions,t),this.onCurrentPlayingOptionsUpdated())},e}(function(){function t(){this.init()}return t.prototype.init=function(){},t}());var iA=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};const rA=window.speechSynthesis;let oA=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).prepared=!1,e}(0,E.Z)(e,t);var n=e.prototype;return n.prepare=function(){return this.prepared?Promise.resolve():(this.prepared=!0,this.supported()?this.loadVoices().then((()=>{const t=new SpeechSynthesisUtterance(" ");rA.speak(t),rA.cancel()})):Promise.resolve())},n.getVoices=function(){return this.loadVoices().then((t=>t.map((t=>({name:t.name,lang:t.lang})))))},n.beforePlay=function(){const t=new SpeechSynthesisUtterance(" ");rA.speak(t)},n.play=function(e,n){return this.prepare().finally((()=>t.prototype.play.call(this,e,n)))},n.supported=function(){return"object"==typeof window.speechSynthesis&&"function"==typeof window.SpeechSynthesisUtterance},n.doPause=function(){rA.pause()},n.doResume=function(){rA.resume()},n.doStop=function(){rA.cancel()},n.speakText=function(t,e=this.currentPlayingOptions){const n=new SpeechSynthesisUtterance(t);return new Promise(((t,i)=>{function r(){n.removeEventListener("end",o),n.removeEventListener("error",i)}function o(){t(),r()}n.addEventListener("end",o),n.addEventListener("error",(function(t){i(t),r()}));let s=Promise.resolve();if(e){n.rate=e.rate,n.pitch=e.pitch,n.lang=e.lang||n.lang;const t=e.voice;switch(typeof t){case"string":s=s.then((()=>this.getVoiceByName(t))).then((t=>{t&&(n.voice=t)}));break;case"object":n.voice=t}n.volume=e.volume}s.then((()=>{switch(rA.speak(n),this.status){case tA.stopped:t(),rA.cancel();break;case tA.paused:rA.pause()}}))}))},n.onCurrentPlayingOptionsUpdated=function(){},n.getVoiceByName=function(t){return this.loadVoices().then((e=>e.find((e=>e.name===t||e.voiceURI===t))))},n.loadVoices=function(){return iA(this,void 0,void 0,(function*(){if(this.loadedVoicesPromise){const t=yield this.loadedVoicesPromise;if(t.length>0)return t}return this.loadedVoicesPromise=new Promise((t=>{let e=0;!function n(){if(!rA)return t([]);const i=rA.getVoices();i&&i.length>0?t(i):e<20?(e++,setTimeout(n,100)):t([])}()}))}))},e}(nA);const sA=()=>{},aA="viewer--read-page-start",cA="viewer--read-page-end";let lA=function(t){function e(e){var n;return(n=t.call(this)||this).pdfViewer=e,n.speechSynthesis=new oA,n.defaultOptions={rate:1,pitch:1,volume:1,external:{}},n.stopHook=sA,n.statusStore=new Qb,n.eventEmitter=new qs,n}(0,E.Z)(e,t);var n=e.prototype;return n.setSpeechSynthesis=function(t){this.speechSynthesis.stop(),this.speechSynthesis=t,this.statusStore.set(tA.stopped)},n.supported=function(){return this.speechSynthesis.supported()},n.getVoices=function(){return this.speechSynthesis.getVoices?this.speechSynthesis.getVoices():Promise.resolve([])},n.beforeRead=function(){if(this.speechSynthesis.beforePlay)return this.speechSynthesis.beforePlay()},n.afterRead=function(){},n.readPage=function(t,e={}){return this.readPages([t],e)},n.readPages=function(t,e={}){const n=this.pdfViewer.getCurrentPDFDoc().getPageCount()-1;t.forEach((t=>{if(t<0||t>n)throw new Error(`Invalid page index: ${t},page index should range between 0 and ${n}`)}));const i=new _.QueuedAsyncTaskExecutor;return this.stopHook=()=>{this.stopHook=sA,i.cancel()},this.speechSynthesis.status=tA.playing,this.statusStore.set(this.status),t.forEach((t=>{i.exec((()=>(this.eventEmitter.emit(aA,t),this.doReadPage(t,e).finally((()=>{this.eventEmitter.emit(cA,t)})))))})),i.waitForCurrentRunningTasks().finally((()=>{this.isStopped()||this.stop()}))},n.readText=function(t,e){const n=y({},this.defaultOptions,e,{external:y({},this.defaultOptions.external,(null==e?void 0:e.external)||{})}),i=()=>this.isStopped();return this.speechSynthesis.status=tA.playing,this.statusStore.set(this.status),this.speechSynthesis.play(function*(){i()||(yield Promise.resolve({text:t.text,pageIndex:t.pageIndex,rect:t.rect}))}(),n).finally((()=>{if(!i())return this.stop()}))},n.pause=function(){this.speechSynthesis.pause(),this.statusStore.set(this.status)},n.resume=function(){this.speechSynthesis.resume(),this.statusStore.set(this.status)},n.stop=function(){this.speechSynthesis.stop(),this.statusStore.set(this.status),this.stopHook()},n.setDefaultOptions=function(t){y(this.defaultOptions,t)},n.setVolume=function(t=this.defaultOptions.volume){this.defaultOptions.volume=t,this.isStopped()||this.speechSynthesis.updateOptions({volume:t})},n.setRate=function(t=this.defaultOptions.rate){this.defaultOptions.rate=t,this.isStopped()||this.speechSynthesis.updateOptions({rate:t})},n.setVoice=function(t){this.defaultOptions.voice=t,this.isStopped()||this.speechSynthesis.updateOptions({voice:t})},n.updatePlayingOptions=function(t){return!this.isStopped()&&(this.speechSynthesis.updateOptions(t),!0)},n.isStopped=function(){return this.status===tA.stopped},n.isPlaying=function(){return this.status===tA.playing},n.onStatusChange=function(t){return this.statusStore.onchange(t.bind(this))},n.onReadPageStart=function(t){return this.eventEmitter.addListener(aA,t),()=>{this.eventEmitter.removeListener(aA,t)}},n.onReadPageEnd=function(t){return this.eventEmitter.on(cA,t),()=>{this.eventEmitter.removeListener(cA,t)}},n.doReadPage=function(t,e){const n=()=>this.isStopped();if(n())return st.RESOLVED_PROMISE_VOID;const i=this.pdfViewer.getCurrentPDFDoc(),r=i.getPageCount();return t>=r?st.RESOLVED_PROMISE_VOID:i.getPageByIndex(t).then((i=>{if(i&&!n())return i.getTextRectCount().then((r=>{const o=y({},this.defaultOptions,e,{external:y({},this.defaultOptions.external,e.external||{})});try{return this.speechSynthesis.play(function*(){if(r<=0)yield Promise.resolve().then((()=>({text:"blank",pageIndex:t,rect:{}})));else for(let e=0;e<r;e++){if(n())return;yield i.getTextByRectIndex(e).then((e=>({text:e.text,pageIndex:t,rect:e.rect})))}}(),o)}finally{this.statusStore.set(this.status)}}))}))},S(e,[{key:"status",get:function(){return this.speechSynthesis.status}}]),e}(_.Disposable),hA=function(){function t(){this.executor=new _.QueuedAsyncTaskExecutor}t.inject=function(){return{viewer:bP}};var e=t.prototype;return e.allInjected=function(){this.service=new lA(this.viewer)},e.supported=function(){return this.service.supported()},e.setSpeechSynthesis=function(t){this.service.setSpeechSynthesis(t)},e.readPages=function(t,e){return this.stop(),this.executor.exec((()=>this.service.readPages(t,e)))},e.readText=function(t,e){return this.stop(),this.executor.exec((()=>this.service.readText(t,e)))},e.stop=function(){this.executor.cancel(),this.service.stop()},e.pause=function(){this.service.pause()},e.resume=function(){this.service.resume()},e.setVolume=function(t){this.service.setVolume(t)},e.setRate=function(t){this.service.setRate(t)},e.setVoice=function(t){this.service.setVoice(t)},e.getVoices=function(){return this.service.getVoices()},e.beforeRead=function(){return this.service.beforeRead()},e.afterRead=function(){return this.service.afterRead()},e.onStatusChange=function(t){return this.service.onStatusChange(t)},e.updatePlayingOptions=function(t){return this.service.updatePlayingOptions(t)},e.onReadPageStart=function(t){return this.service.onReadPageStart(t)},e.onReadPageEnd=function(t){return this.service.onReadPageEnd(t)},S(t,[{key:"status",get:function(){return this.service.status}}]),t}(),uA=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.execute=function(t){const e=t.keyboard;e.setup(Fr);let n=()=>{};const i=t=>{n(),n=e.activeContext(t.getStateName())};t.eventEmitter.on(nt.switchStateHandler,i),this.addDestroyHook((()=>{t.eventEmitter.off(nt.switchStateHandler,i)})),e.activeContext(Re)},e}(_.Disposable);function dA(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let fA=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).undoActivation=()=>{},e}(0,E.Z)(e,t);var n=e.prototype;return n.execute=function(t){const e=t.getKeyboard();e.withContext(Rr.SELECTION,(e=>{this.addDestroyHook(e.keyup(Ir.SELECT_ALL,(()=>{this.selectAllAnnotOrWidget(t)}),{interceptors:[(0,_.excludeEditableElementInterceptor)(),(0,_.preventDefaultInterceptor)()]}))})),e.withContext(un,(e=>{this.isDestroyed||this.addDestroyHook(e.keyup(Ir.SELECT_ALL,(e=>{this.selectAllAnnotOrWidget_selection_state_handler(t)}),{interceptors:[(0,_.excludeEditableElementInterceptor)(),(0,_.preventDefaultInterceptor)()]}))})),e.withContext(Rr.ACTIVATION_ANY,(e=>{this.addDestroyHook(e.keyup(Ir.UNSELECT_OBJECT,(()=>{t.activateElement(),this.undoActivation()})),e.keyup(Ir.SELECT_ALL,(()=>{t.getStateHandlerManager().getCurrentStates().getStateName()===un?this.selectAllAnnotOrWidget_selection_state_handler(t):this.selectAllAnnotOrWidget(t)}),{interceptors:[(0,_.excludeEditableElementInterceptor)(),(0,_.preventDefaultInterceptor)()]}),e.keydown(Ir.COPY_ACTIVATE_ELEMENT,(e=>{if(t.isShortcutKeyEnabled()){t.currentPDFDoc.checkPermission(pe.extract)&&t.copy()}e.preventDefault()}),{interceptors:[(0,_.excludeEditableElementInterceptor)()]}),e.keydown(Ir.CUT_ACTIVATE_ELEMENT,(e=>{t.isShortcutKeyEnabled()&&t.cut(),e.preventDefault()}),{interceptors:[(0,_.excludeEditableElementInterceptor)()]}))}));const n=()=>{this.handleOnActivationChanged(t,e)},i=t.eventEmitter;i.on(nt.activeElementChanged,n),this.addDestroyHook((()=>{i.off(nt.activeElementChanged,n)}))},n.selectAllAnnotOrWidget=function(t,e=[]){const n=new Y;if(e.length){const i=[];return e.forEach((e=>{if(!e.isGrouped||!e.isGrouped()){const i=t.getAnnotRender(e.getPDFPage().getIndex(),e.getId()).component;i&&n.add(i)}"widget"===e.getType()&&i.push(e)})),void t.eventEmitter.emit("active-widgets-for-multi-select",{widgets:i,activationGroup:n})}this.getAnnotsOfCurrentPage(t).then((e=>{if(!e||e.length<1)return;const i=t.getStateHandlerManager().getCurrentStates().getStateName();if(Object.keys(Pn).indexOf(i)>=0)e.forEach((e=>{if(!(e.getType()!==Pn[i]||e.isGrouped&&e.isGrouped())){const i=t.getAnnotRender(e.getPDFPage().getIndex(),e.getId()).component;i&&n.add(i)}})),t.bindMultiSelectActiveEvents(n),t.activationManager.active(n),t.getPDFDocRender().setCurrentAnnotHandler();else if(Object.keys(Sn).indexOf(i)>=0){const r=[];e.forEach((t=>{"widget"===t.getType()&&t.info.fieldType===Sn[i]&&r.push(t)})),r.length&&t.eventEmitter.emit("active-widgets-for-multi-select",{widgets:r,activationGroup:n})}t.eventEmitter.emit(nt.activeElementChanged)}))},n.selectAllAnnotOrWidget_selection_state_handler=function(t){this.getAnnotsOfCurrentPage(t).then((e=>{if(!e||e.length<1)return;const n=new Y;let i=[];const r=[];e.forEach((e=>{if(!i.find((t=>t===e)))if(e.isGrouped&&e.isGrouped()){const r=e.getGroupElements()||[];if(r.length){const e=new Y;r.forEach((n=>{const i=t.getAnnotRender(n.getPDFPage().getIndex(),n.getId()).component;i&&e.add(i)})),n.add(e),i=[].concat(dA(w.Z,i),dA(w.Z,r))}}else if("widget"===e.getType())r.push(e);else{const i=t.getAnnotRender(e.getPDFPage().getIndex(),e.getId()).component;i&&n.add(i)}})),r.length?t.eventEmitter.emit("active-widgets-for-multi-select",{widgets:r,activationGroup:n}):(t.bindMultiSelectActiveEvents(n),t.activationManager.active(n),t.getPDFDocRender().setCurrentAnnotHandler())}))},n.handleOnActivationChanged=function(t,e){const n=t.getAllActivatedElements();if(0===n.length)this.undoActivation();else{let t=0,i=0,r=0;n.forEach((e=>{e.editingMgr?t++:e.annot?i++:e.graphicsObject&&r++}));const o=[t,i,r].filter((t=>0!==t)).length;let s;1===o?t>0?s=Rr.ACTIVATION_WIDGET:i>0?s=Rr.ACTIVATION_ANNOTATION:r>0&&(s=Rr.ACTIVATION_GRAPH_OBJ):o>1&&(s=Rr.ACTIVATION_ANY),s&&(this.undoActivation(),this.undoActivation=e.activeContext(s))}},n.getAnnotsOfCurrentPage=function(t){const e=t.currentPDFDoc;if(!e)return Promise.resolve([]);const n=t.getPDFDocRender().getCurrentPageIndex();return e.getPageByIndex(n).then((t=>t.getAnnots().then((t=>t.filter((t=>"popup"!==t.getType()&&"watermark"!==t.getType()&&"R"!==t.info.RT&&!t.info.IRT))))))},e}(_.Disposable);const pA="font-map-list";let gA=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.execute=function(t){t.getKeyboard().withContext(Rr.BASIC_STATE_HANDLER,(e=>{e.keydown(Ir.SWITCH_TO_HAND_STATE,(()=>{t.getStateHandlerManager().switchTo(Re)}))}))},e}(_.Disposable);new Date;let mA=function(t){function e(e){var n;(n=t.call(this)||this).level=-1,n.componentClasses=[];return e.eventEmitter.on(nt.openFileSuccess,(t=>{n.componentClasses.forEach((e=>{n.getComponentInstance(e,t)}))})),e.eventEmitter.on(nt.willCloseDocument,(()=>{n.destroyComponents()})),n}(0,E.Z)(e,t);var n=e.prototype;return n.onInject=function(t){},n.generateInstanceName=function(){return(0,_.getUniqueId)("pdf-doc-lifecycle")},n.define=function(t){this.componentClasses.indexOf(t)>-1||this.componentClasses.push(t)},e}(_.BasicIoCStrategy),vA=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.execute=function(t){const e=t.getIoC(),n=e.getStrategy(_.IoCScope.SINGLETON),i={PDFViewer:t,Keyboard:t.keyboard,EventEmitter:t.eventEmitter,Store:t.store,AnnotManager:t.annotManager,StateHandlerManager:t.stateHandlerManager,ViewerUI:t.viewerUI,LifeCycleManager:t.lifeCycleManager,ActivationManager:t.activationManager};for(const t in i)n.registerComponentInstance(i[t]),n.registerComponentInstanceByName(i[t],t);e.setStrategy("PDF_DOC_LIFE_CYCLE_SCOPE_STRATEGY",new mA(t))},e}(_.Disposable);let yA=function(){function t(t="",e=localStorage){this.prefix=t,this.storage=e}var e=t.prototype;return e.setItem=function(t,e){this.storage.setItem(this.getKey(t),JSON.stringify(e))},e.getItem=function(t){const e=this.storage.getItem(this.getKey(t));return e&&JSON.parse(e)},e.getKey=function(t){return this.prefix+t},t}(),wA=function(){function t(){}t.inject=function(){return{viewer:bP}};var e=t.prototype;return e.loadPDFDocByHttpRangeRequest=function(t,e){const n=t.range.url;if(!e.fileName&&n.endsWith(".pdf")){let t=n.lastIndexOf("/"),i=n.substring(t+1);i=decodeURIComponent(i),e.fileName=i}if(!ia(n)){const e=Js();t.range.url=Xs(e).join(n).absolute()}return this.viewer.getWebPDFJR().then((n=>n.getPDFDocByHttpRangeRequest(t,e).then((t=>this._parseDoc(t,e)))))},e.loadPDFDocByFile=function(t,e){return this.viewer.getWebPDFJR().then((n=>n.getPDFDocByFile(t,e).then((t=>this._parseDoc(t,e)))))},e._parseDoc=function(t,e){return Promise.resolve(function(t,e){if(t&&"function"==typeof t.getJWT)return t.getJWT(e)}(e)).then((n=>{e.idJWT=n||e.jwt;const i=e.errorHandler||((t,e,n)=>{throw n}),r=e=>t.parse(e).catch((n=>i(t,e,n,r)));return r(e)}))},t}();let bA=function(t){function e(e){var n;return(n=t.call(this,Dr.PPO_REMOVE_PAGES)||this).pdfViewer=e,n}return(0,E.Z)(e,t),e.prototype.receive=function(t,e){return this.pdfViewer.getCurrentPDFDoc().removePages(t.data.pageRange)},e}(_b),AA=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-crosshair",n}(0,E.Z)(e,t),e.getStateName=function(){return Be};var n=e.prototype;return n.pageHandler=function(t){if(this.pageRender=t,_.isIOS)return void(0===t.index&&(setTimeout((()=>{this.pdfViewer.getStateHandlerManager().switchTo("hand")}),100),this.pdfViewer.viewerUI.alert("Unsupported now. Comming soon.")));let e=t.$handler;e.addClass(this.cursorStyle);let n=this.$imageInput=D()('<input id="imageInput" type="file" style="visibility: hidden;" accept=".gif,.jpeg,.jpg,.png,.svg"/>');e.append(n);let i,r=e[0],o=this.hammer=new(Ii().Manager)(r,{recognizers:[[Ii().Pan,{direction:Ii().DIRECTION_ALL}]]});o.on("panstart",(t=>{let e=cs(r,t);i=[e.x,e.y]})),o.on("panmove",(t=>{let n=r.getBoundingClientRect(),o=t.srcEvent,s=PA(i,n,o),a=["top:"+s.top+"px","left:"+s.left+"px","height:"+(s.bottom-s.top)+"px","width:"+(s.right-s.left)+"px"].join(";"),c=e.find(".fv__mark-image-blank");if(0===c.length){let t=D()(document.createDocumentFragment());t.append('<div class="fv__mark-image-blank" style="'+a+'"></div>'),e.append(t)}else c.css({top:s.top,left:s.left,width:s.right-s.left,height:s.bottom-s.top})})),o.on("panend",(n=>{let o=r.getBoundingClientRect(),s=n.srcEvent,a=PA(i,o,s);e.find(".fv__mark-image-blank").remove(),e.find("#imageInput").off("click"),e.find("#imageInput").off("change").on("change",(function(e){let n=e.target.files[0];return t.getPDFPage().then((i=>{const r=t.getRotation();let o=new FileReader,s=i.reverseDeviceRect(a,t.getScale(),r);o.readAsArrayBuffer(n),o.onload=()=>{let n=new Uint8Array(o.result);let a=((i.getRotationAngle()+r)%360+360)%360;0!=a&&(a=(360-a)%360),i.addAnnot({flags:4,type:"screen",rect:s,rotation:a,buffer:n}).then((n=>{e.target.value="";const i=n[0];n[0].info.annotScreenDetailType="screen_img";const r=t.annotsRender.getAnnotRender(i.getId()).component;t.pdfViewer.eventEmitter.emit(nt.addAnnotSuccess,r.annot),t.annotsRender.activeAnnot(i.getId())})).catch((t=>{}))}})).catch((t=>{}))})).click()}))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.$imageInput&&this.$imageInput.remove()},n.out=function(){this.destroyPageHandler()},e}(Zo);function PA(t,e,n){const i=ss(n),r=as(n);let o,s=[i-e.left,r-e.top],a=t[0],c=t[1],l=s[0],h=s[1];return l<a&&(o=a,a=l,l=o),h<c&&(o=c,c=h,h=o),{left:a,top:c,right:l,bottom:h}}let SA=function(t){function e(e){var n;return(n=t.call(this,e)||this).file=null,n}(0,E.Z)(e,t),e.getStateName=function(){return Ve};var n=e.prototype;return n.pageHandler=function(t){const e=this;this.pageRender=t;let n=this.$handler=t.$handler,i=n[0],r=this.hammer=new(Ii().Manager)(i,{recognizers:[[Ii().Tap],[Ii().Pan,{direction:Ii().DIRECTION_ALL}]]}),o=D()('<img style="position: absolute;top:-'+n.height()+"px;left:-"+n.width()+'px;border:2px solid transparent"></img>');n.append(o);let s=0,a=0;this.pdfViewer.eventEmitter.on(nt.addEditImage,this.loadFile=t=>{let e=new FileReader;this.file=t,e.readAsDataURL(t),e.onload=function(t){o.prop({src:t.target.result});let e=new Image;e.onload=function(){o.css({top:-e.height,left:-e.width}),s=e.width,a=e.height},e.src=t.target.result}}),n.on("mousemove mousewheel",(t=>{let e=i.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;o.css({top:r,left:n})})),n.on("mouseleave",(t=>{o.css({top:-a,left:-s})})),t.getPDFPage().then((n=>{t.getScale();const i=t.getRotation();r.on("tap",(r=>{let s={},a=o.width(),c=o.height();s.top=parseFloat(o.css("top")),s.left=parseFloat(o.css("left")),s.right=s.left+a*t.getScale(),s.bottom=s.top+c*t.getScale(),o.remove();let l=new FileReader;l.readAsArrayBuffer(e.file),l.onload=function(r){let o=new Uint8Array(r.target.result),a=n.reverseDeviceRect(s,t.getScale(),t.getRotation());n.addImage(o,a,i).then((()=>{e.pdfViewer.getStateHandlerManager().switchTo(xs.getStateName())}))}}))}))},n.destroyPageHandler=function(){this.$handler.off("mousemove mousewheel mouseleave"),this.$handler.empty(),this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.pdfViewer.eventEmitter.off(nt.addEditImage,this.loadFile)},n.out=function(){this.destroyPageHandler()},e}(Zo);let CA=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-crosshair",n}(0,E.Z)(e,t),e.getStateName=function(){return Ue};var n=e.prototype;return n.pageHandler=function(t){this.pageRender=t;let e=t.$handler;e.addClass(this.cursorStyle);let n,i=e[0],r=this.hammer=new(Ii().Manager)(i,{recognizers:[[Ii().Pan,{direction:Ii().DIRECTION_ALL}]]});r.on("panstart",(t=>{let e=cs(i,t);n=[e.x,e.y]})),r.on("panmove",(t=>{let r=i.getBoundingClientRect(),o=t.srcEvent,s=EA(n,r,o),a=["top:"+s.top+"px","left:"+s.left+"px","width:"+(s.bottom-s.top)+"px","height:"+(s.right-s.left)+"px"].join(";"),c=e.find(".fv__mark-link-blank");if(0===c.length){let t=D()(document.createDocumentFragment());t.append('<div class="fv__mark-link-blank" style="'+a+'"></div>'),e.append(t)}else c.css({top:s.top,left:s.left,width:s.right-s.left,height:s.bottom-s.top})})),r.on("panend",(r=>{let o=i.getBoundingClientRect(),s=r.srcEvent,a=EA(n,o,s);return t.getPDFPage().then((n=>{const i=n.reverseDeviceRect(a,t.getScale(),t.getRotation()),r=this.pdfViewer.getDefaultAnnotConfig()("link");n.addAnnot({type:"link",rect:i,color:r.color?r.color:"0000FF"}).then((n=>{e.find(".fv__mark-link-blank").remove();const i=this.pageRender.getAnnotRender(n[0].getId()).component;i.showCreateDialog();this.pdfViewer;_.isMobile&&this.pdfViewer.getStateHandlerManager().switchTo(xs.getStateName()),t.pdfViewer.eventEmitter.emit(nt.addAnnotSuccess,i.annot)}))}))}))},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle)},n.out=function(){this.destroyPageHandler()},e}(Zo);function EA(t,e,n){const i=ss(n),r=as(n);let o,s=[i-e.left,r-e.top],a=t[0],c=t[1],l=s[0],h=s[1];return l<a&&(o=a,a=l,l=o),h<c&&(o=c,c=h,h=o),{left:a,top:c,right:l,bottom:h}}let xA=function(t){function e(e){var n;return(n=t.call(this,e)||this).throttleTaskExecutor=new _.ThrottleAsyncTaskExecutor(100,!0),n}(0,E.Z)(e,t),e.getStateName=function(){return ln},e.getDefaultContextMenuConfig=function(){return{selector:".fv__selection-state-contextmenu-container"}};var n=e.prototype;return n.pageHandler=function(t){this.pageRender=t;const e=t.doc,n=this.pdfViewer=t.pdfViewer,i=n.viewerUI.rootComponent.pdfUI,r=t.$handler.addClass("fv__select-text-image-state-handler"),o=r[0];this.eventEmitter=n.eventEmitter;const s=this.tooltip=n.viewerUI.createTextSelectionTooltip(t);let a=this.hammer=new(Ii().Manager)(o,{recognizers:[[Ii().Pan,{direction:Ii().DIRECTION_ALL,threshold:0}]]});a.add(new(Ii().Tap)({event:"doubletap",taps:2})),a.add(new(Ii().Tap)({event:"singletap"})),a.get("doubletap").recognizeWith("singletap"),a.get("singletap").requireFailure("doubletap"),a.on("singletap",(t=>{this.textSelectionHandler.lookUpQuick||Ss(n),s&&s.hide()})),a.on("doubletap",(t=>this.eventEmitter.emit(nt.doubleTapPage,t)));let c=D()('<div class="fv__selection-state-contextmenu-container fv__contextmenu-container"></div>'),l=r.find(".fv__mark-selection-blank");l&&l.length>0?c.insertBefore(l[0]):r.append(c),c.data("hand-state",this),this.$contextmenuContainer=c,r.on("mousemove",this.mousemove.bind(this)),this.textSelectionHandler=new Cs(a,t,s,ln),i.openDialog("fv--selected-image-contextmenu").then((i=>{const o=`click.image.${t.index}`;D()(i.element).find("[component-type=contextmenu-item]").off(o).on(o,(i=>{const r=e.selectedInfo;if(r&&r.pageRender===t&&!D()(i.currentTarget).hasClass("disabled"))switch(D()(i.currentTarget).attr("component-name")){case"fv--contextmenu-item-copy":this.doImageCopy();break;case"fv--contextmenu-item-saveImageAs":this.doExportImageObjAs();break;case"fv--contextmenu-item-bookmark":this.textSelectionHandler.createBookmark(t);break;case"fv--contextmenu-item-editImage":Ss(n),s&&s.hide(),n.stateHandlerManager.switchTo("page-editor"),this.pdfViewer.getEventEmitter().once("pageeditor-started",(e=>{setTimeout((()=>{t.docRender.stateHandler.triggerClick(this.lastEvent,1)}),300)}))}})),r.on("contextmenu",`.fv__mark-selection-blank[type=${Jt.Image}]`,(t=>{t.preventDefault();const e=i.getComponentByName("fv--contextmenu-item-bookmark");this.hasModifyPermissions(this.pageRender)?e.unlock():e.lock(),i.showAt(t.pageX,t.pageY)})),r.on("mouseup",this.mouseup=t=>{3===t.which&&this.eventEmitter.emit(nt.rightClickPage,t)})})),i.openDialog("fv--selected-rectangle-contextmenu").then((n=>{const i=`click.rectangle.${t.index}`;D()(n.element).find("[component-type=contextmenu-item]").off(i).on(i,(n=>{const i=e.selectedInfo;if(i&&i.pageRender===t&&!D()(n.currentTarget).hasClass("disabled")&&"fv--contextmenu-item-exportSelectionAs"===D()(n.currentTarget).attr("component-name"))this.doExportSelectionRectangle()})),r.on("contextmenu",".fv__mark-selection-blank[type=rectangle]",(t=>{t.preventDefault();const e=this.checkPerm("checkExtractAccess"),i=n.getComponentByName("fv--contextmenu-item-exportSelectionAs");e?i.enable():i.disable(),n.showAt(t.pageX,t.pageY)}))})),i.eventEmitter.on("text-tooltip-click",(({type:t})=>{"highlight"===t&&this.pdfViewer.getPDFDocRender().pagesRender.pageRenders.forEach((t=>{t.$handler.find(".fv__mark-selection-blank").remove()}))}))},n.offHammer=function(){this.hammer&&this.hammer.off("panstart"),this.hammer&&this.hammer.off("panmove"),this.hammer&&this.hammer.off("panend")},n.destroy=function(){this.throttleTaskExecutor.cancel()},n.destroyPageHandler=function(){this.tooltip&&this.tooltip.hide(),this.hammer&&this.hammer.destroy(),this.pageRender&&this.pageRender.$handler.removeClass("fv__select-text-image-state-handler"),this.pageRender.$handler.off("mouseup",this.mouseup),this.$contextmenuContainer&&this.$contextmenuContainer.remove(),this.tooltip&&this.tooltip.destroy(),this.eventEmitter.off("text-tooltip-click"),this.textSelectionHandler.destroy(),this.pageRender.$handler.off("mousemove")},n.docHandler=function(e){t.prototype.docHandler.call(this,e);const n=this.pdfViewer,i=e.doc;n.getKeyboard().withContext(ln,(t=>{this.__off__copy__event__&&this.__off__copy__event__(),this.__off__copy__event__=t.keydown(Ir.COPY_TEXT_IMAGE,(()=>{if(!i.selectedInfo)return;const{type:t}=i.selectedInfo;t===Jt.Text?this.doTextCopy():t===Jt.Image&&this.doImageCopy()})),this.offSelectAllEvent&&this.offSelectAllEvent(),this.offSelectAllEvent=t.keydown(Ir.SELECT_ALL,(()=>{const t=n.getPDFDocRender().getPDFPageRender(n.getPDFDocRender().getCurrentPageIndex());this.textSelectionHandler.doTextSelectAll(t,i.selectedInfo)}),{interceptors:[(0,_.preventDefaultInterceptor)()]}),this.offAddBookmarkEvent&&this.offAddBookmarkEvent(),this.offAddBookmarkEvent=t.keydown(Ir.ADD_BOOKMARK,(()=>{const t=n.getPDFDocRender().getPDFPageRender(n.getPDFDocRender().getCurrentPageIndex());this.hasModifyPermissions(t)&&i.checkPermission(So.checkAssemble)&&this.textSelectionHandler.createBookmark(t)}),{interceptors:[(0,_.preventDefaultInterceptor)()]})}));let r=null;e.$container.on("mouseleave",".fv__mark-selection-blank, .fv--ui-text-selection-tooltip",(t=>{clearTimeout(r),r=setTimeout((()=>{const t=n.getPDFDocRender();if(!t)return;const e=t.getPDFPageRender(n.getPDFDocRender().getCurrentPageIndex());e&&e.stateHandler&&e.stateHandler.tooltip&&e.stateHandler.tooltip.hide()}),1e3)})).on("mouseenter",".fv__mark-selection-blank, .fv--ui-text-selection-tooltip",(t=>{clearTimeout(r)}))},n.destroyDocHandler=function(){t.prototype.destroyDocHandler.call(this),this.__off__copy__event__&&this.__off__copy__event__(),this.__off__copy__event__=ei,["offCopyEvent","offSelectAllEvent","offAddBookmarkEvent","undoSwitchKbBinder"].forEach((t=>{this[t]&&this[t](),this[t]=ei}))},n.out=function(){this.destroyPageHandler()},n.doImageCopy=function(){const t=this.pdfViewer.currentPDFDoc;t.selectedInfo&&t.selectedInfo.graphicsObject&&t.selectedInfo.graphicsObject.getStream().then((t=>{const e=new Blob([t],{type:"image/png"}),n=[new ClipboardItem({[e.type]:e})];navigator.clipboard.write(n)}))},n.doExportImageObjAs=function(){const t=this.pdfViewer.viewerUI.rootComponent.pdfUI;if(t.customs&&t.customs.isAccountExpired&&t.customs.isAccountExpired(!0))return;const e=this.pageRender.doc;e.selectedInfo&&t.customs&&t.customs.showSaveAsDialog&&t.customs.showSaveAsDialog("convert-pdf-to-png","",e.selectedInfo)},n.doExportSelectionRectangle=function(){const t=this.pdfViewer.viewerUI.rootComponent.pdfUI;if(t.customs&&t.customs.isAccountExpired&&t.customs.isAccountExpired(!0,{btnName:"fv--contextmenu-item-exportSelectionAs",tabName:"convert_tab"}))return;const e=this.pageRender,n=e.$handler.get(0).getBoundingClientRect(),i=e.$handler.find(".fv__mark-selection-blank.rectangle").get(0).getBoundingClientRect();e.reverseDeviceRect({left:i.left-n.left,right:i.right-n.left,top:i.top-n.top,bottom:i.bottom-n.top}).then((n=>{var i;i=[n],t.customs&&t.customs.showSaveAsDialog&&t.customs.showSaveAsDialog("convert-pdf-to-word",JSON.stringify([{pageIndex:e.index,rectArray:i}]))}))},n.hasModifyPermissions=function(t){const e=t.doc.getPermissions();return 8&e&&32&e},n.checkPerm=function(t){return this.pageRender.docRender.getUserPermission()[t]()},n.doTextCopy=function(){const t=this.pdfViewer.currentPDFDoc,e=t.selectedInfo.getText?t.selectedInfo.getText():void 0;void 0!==e&&(0,_.copyText)(e).then((t=>{this.pdfViewer.eventEmitter.emit(t?nt.copyTextSuccess:nt.copyTextFailed,e)}))},n.mousemove=function(t){this.textSelectionHandler&&this.textSelectionHandler.isTextSelectionToolEnabledInHandState()&&(this.textSelectionHandler.isTextSelecting()||(this.mousemoveEvent=t,this.throttleTaskExecutor.exec((()=>this.mousemoveHandler(t)))))},n.mousemoveHandler=function(t){const e=this.pageRender,n={x:t.originalEvent.layerX,y:t.originalEvent.layerY};return e.getTextContinueRectAtDevicePoints([n.x,n.y],[n.x+5,n.y+5],-1,-1).then((n=>{if(n[0]){const n={x:t.originalEvent.layerX,y:t.originalEvent.layerY};if(n.x!=this.mousemoveEvent.originalEvent.layerX&&n.y!=this.mousemoveEvent.originalEvent.layerY)return;e.$handler.removeClass("fv__cursor-grab").addClass("fv__cursor-text"),this.pdfViewer.eventEmitter.emit("can-scroll",!1)}else e.$handler.removeClass("fv__cursor-text")}))},e}(Zo),DA=function(t){function e(e){var n;return(n=t.call(this,e)||this).cursorStyle="fv__cursor-crosshair",n}(0,E.Z)(e,t),e.getStateName=function(){return"snapshot-tool"};var n=e.prototype;return n.pageHandler=function(t){this.pageRender=t;const e=t.$handler.get(0);e.classList.add(this.cursorStyle);const n=new Hammer.Manager(e);this.hammer=n,n.add(new Hammer.Pan),t.getPDFPage().then((i=>{this.page=i,n.on("panstart",(n=>{const r=cs(e,n),o={x:r.x+n.deltaX,y:r.y+n.deltaY},s=this._resolvePointsToRect(i,r,o);this.pdfViewer.eventEmitter.emit(nt.createSnapshotArea,t,s),this.startPoint={x:s.left,y:s.top}})),n.on("panmove",(e=>{const n={x:this.startPoint.x+e.deltaX,y:this.startPoint.y+e.deltaY},r=this._resolvePointsToRect(i,this.startPoint,n);this.pdfViewer.eventEmitter.emit(nt.updateSnapshotArea,t,r)})),n.on("panend",(e=>{const n={x:this.startPoint.x+e.deltaX,y:this.startPoint.y+e.deltaY},r=this._resolvePointsToRect(i,this.startPoint,n);this.pdfViewer.eventEmitter.emit(nt.stabilizedSnapshotArea,t,r)}))}))},n._resolvePointsToRect=function(t,e,n){const i=this.pageRender.getScale(),r=t.getPxWidth()*i,o=t.getPxHeight()*i;return{left:Math.max(0,Math.min(e.x,n.x)),right:Math.min(r,Math.max(e.x,n.x)),top:Math.max(0,Math.min(e.y,n.y)),bottom:Math.min(o,Math.max(e.y,n.y))}},n.destroyPageHandler=function(){if(this.hammer&&this.hammer.destroy(),this.pageRender){this.pageRender.$handler.get(0).classList.remove(this.cursorStyle)}},e}(Zo);let IA=function(t){function e(e){var n;return(n=t.call(this,e)||this).destroyHooks=[],n.destroyDocHooks=[],n.cursorStyle="fv__cursor-loupe",n.offsetX=0,n.offsetY=0,n.updatePosition=function(t,e=50){var n=null;return function(){var i=this,r=arguments;n||(n=setTimeout((function(){t.apply(i,r),n=null}),e))}}(n.updatePosition.bind((0,C.Z)(n))),n}(0,E.Z)(e,t),e.getStateName=function(){return an};var n=e.prototype;return n.docHandler=function(){let t=null;_.isChrome&&((t,e)=>{document.addEventListener(t,e),this.destroyHooks.push((()=>{document.removeEventListener(t,e)}))})("wheel",(e=>{const n=e.screenX,i=e.screenY,r=document.elementFromPoint(n,i);if(r&&r.className.indexOf(this.cursorStyle)&&t!==r){const e=new MouseEvent("mouseover");r.dispatchEvent(e),t=r}}))},n.pageHandler=function(t){this.pageRender=t;var e=t.$handler.get(0);t.$handler.removeClass("fv__cursor-grab").addClass(this.cursorStyle);const n=this.areaRenderer=t.getPageAreaRenderer(255,400,1,!1),i=(document.getElementsByClassName("fv__pdf-viewer-layout"),(t,n)=>{e.addEventListener(t,n),this.destroyHooks.push((()=>{e.removeEventListener(t,n)}))});i("click",(t=>{this.pdfViewer.eventEmitter.emit(nt.startUpdatePageAreaRenderer,n),this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.updatePosition()})),i("mouseover",(t=>{this.pdfViewer.eventEmitter.emit(nt.createPageAreaRenderer,n),setTimeout((()=>{this.pdfViewer.eventEmitter.emit(nt.switchPageAreaRenderer,n)}))})),i("mousemove",(t=>{this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.updatePosition()})),i("wheel",(t=>{this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.updatePosition()}))},n.updatePosition=function(){this.areaRenderer.setPosition(this.offsetX,this.offsetY),this.areaRenderer.update()},n.destroyDocHandler=function(){this.destroyDocHooks.forEach((t=>t())),this.pdfViewer.eventEmitter.emit(nt.destroyPageAreaRenderer),this.destroyPageHandler()},n.destroyPageHandler=function(){this.pageRender&&this.pageRender.$handler.removeClass(this.cursorStyle),this.destroyHooks.forEach((t=>t())),this.updatePosition=null},e}(Zo),RA=function(t){function e(e){return t.call(this,e)||this}(0,E.Z)(e,t),e.getStateName=function(){return cn},e.getDefaultContextMenuConfig=function(){return{selector:".fv__selection-state-contextmenu-container"}};var n=e.prototype;return n.pageHandler=function(t){this.pageRender=t,this.pdfViewer=t.pdfViewer,this.selectMarkIsVisible=!1;const e=this.tooltip=this.pdfViewer.viewerUI.createTextSelectionTooltip(t);let n=t;t.$ui.addClass("fv__annot-container-zindex-up");let i=n.$handler;i.addClass("fv__select-text-annotation-state-handler");let r=i[0],o=t.pdfViewer.eventEmitter;(()=>{const n=n=>{n==t&&this.pdfSelectRectArray&&this.selectMarkIsVisible&&t.getPDFPage().then((n=>{const i=t.transformRectArray(n,this.pdfSelectRectArray);this.showSelectMark(i);const r=i[0];r&&e.showAt((r.left+r.right)/2,r.top,this.selectText,i)}))};o.on(nt.renderPageSuccess,n),this.removeRenderPageSuccessEvent=()=>{o.off(nt.renderPageSuccess,n)}})();let s,a=this.hammer=new(Ii().Manager)(r,{recognizers:[[Ii().Pan,{direction:Ii().DIRECTION_ALL}]]});a.add(new(Ii().Tap)({event:"doubletap",taps:2})),a.add(new(Ii().Tap)({event:"singletap"})),a.get("doubletap").recognizeWith("singletap"),a.get("singletap").requireFailure("doubletap"),a.on("singletap",(n=>{this.hideSelectMark(),e.hide();let i=t.annotsRender;i?(i.unActiveAnnot(),o.emit(nt.tapPage,n)):o.emit(nt.tapPage,n)})),a.on("doubletap",(n=>{this.hideSelectMark(),e.hide();let i=t.annotsRender;i?(i.unActiveAnnot(),o.emit(nt.doubleTapPage,n)):o.emit(nt.doubleTapPage,n)})),e.on("hide",(()=>{this.hideSelectMark()}));let c,l,h=-1,u=-1;a.on("panstart",(e=>{if(!1===this.panStart(e,this))return;h=-1,u=-1,c=void 0;let n=t.annotsRender;n&&n.unActiveAnnot();let i=cs(r,e);s=[i.x,i.y],this.hideSelectMark(),l=new rt})),a.on("panmove",(t=>{!1!==this.panMove(t,this)&&l.push((()=>{let e=this.pageRender;const n=[s[0]+t.deltaX,s[1]+t.deltaY];return this.getTextRect(s,n,h,u).then((t=>{let n;return(n=t[0])&&"string"==typeof n.text&&(h=n.start,u=n.end),Promise.all([e.getPDFPage(),t])})).then((([t,n])=>e.transformRectArray(t,n))).then((t=>{this.showSelectMark(t)}))}))})),a.on("panend",(n=>{if(!1===this.panEnd(n,this))return;l.end(),l=null;let i=Qo(s,n.deltaX,n.deltaY);const r=[s[0]+n.deltaX,s[1]+n.deltaY];return this.getTextRect(s,r,h,u).then((e=>{let n;return(n=e[0])&&"string"==typeof n.text&&(h=n.start,u=n.end,c=n.text),Promise.all([t.getPDFPage(),e])})).then((([r,o])=>{this.pdfSelectRectArray=o;const s=t.transformRectArray(r,o);this.showSelectMark(s),("string"==typeof c?Promise.resolve(c):this.getTextChar(i)).then((t=>{this.pdfViewer.getStore().dispatch(st.STORE_NAMES.SELECTION_INFO,{page:r,text:t,rectArray:o}),this.selectText=t,this.pdfViewer.eventEmitter.emit(nt.selectText,{page:r,text:t,rectArray:o,e:n})}));const a=s[0];a&&e.showAt((a.left+a.right)/2,a.top,this.selectText,s)}))}));let d=D()('<div class="fv__selection-state-contextmenu-container fv__contextmenu-container"></div>');i.append(d),d.data("hand-state",this),this.$contextmenuContainer=d},n.getTextRect=function(t,e,n,i){return this.pageRender.getTextContinueRectAtDevicePoints(t,e,n,i)},n.getTextChar=function(t){return this.pageRender.getTextContinuousCharAtDeviceRect(t)},n.showSelectMark=function(t){this.selectMarkIsVisible=!0;let e=this.pageRender.$handler;e.find(".fv__mark-selection-blank").remove();let n=D()(document.createDocumentFragment());for(let e=0,i=t.length;e<i;e++){let i=t[e],r=["top:"+i.top+"px","left:"+i.left+"px","height:"+(i.bottom-i.top)+"px","width:"+(i.right-i.left)+"px"].join(";");n.append('<mark class="fv__mark-selection-blank" style="'+r+'"></mark>')}e.append(n)},n.hideSelectMark=function(){this.selectMarkIsVisible=!1,this.pdfViewer.getStore().dispatch(st.STORE_NAMES.SELECTION_INFO,null),this.pageRender.$handler.find(".fv__mark-selection-blank").remove()},n.copyText=function(){},n.panStart=function(){},n.panMove=function(){},n.panEnd=function(){},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$ui.removeClass("fv__annot-container-zindex-up"),this.pageRender.$handler.off("mouseup",this.mouseup).removeClass("fv__select-annotation-state-handler"),this.$contextmenuContainer&&this.$contextmenuContainer.remove(),this.pageRender.annotsRender&&this.pageRender.annotsRender.unActiveAnnot(),this.hideSelectMark(),this.tooltip.destroy(),this.removeRenderPageSuccessEvent()},n.out=function(){this.destroyPageHandler()},e}(Zo),TA=function(t){function e(e){return t.call(this,e)||this}(0,E.Z)(e,t),e.getStateName=function(){return hn};var n=e.prototype;return n.pageHandler=function(t){this.pageRender=t;let e,n=t.$handler[0],i=this.hammer=new(Ii().Manager)(n,{recognizers:[[Ii().Pan,{direction:Ii().DIRECTION_ALL}]]});i.on("panstart",(t=>{if(!1===this.panStart(t,this))return;let i=t.srcEvent;const r=ss(i),o=as(i);e=Xo(n,r,o),this.hideToolTip(),this.hideSelectMark()})),i.on("panmove",(t=>{!1!==this.panMove(t,this)&&this.getTextRect(Qo(e,t.deltaX,t.deltaY)).then((t=>{this.showSelectMark(t)}))})),i.on("panend",(t=>{!1!==this.panEnd(t,this)&&this.getTextRect(Qo(e,t.deltaX,t.deltaY)).then((t=>{this.showToolTip(t)}))}))},n.getTextRect=function(t){return this.pageRender.getTextContinueRectAtDeviceRect(t)},n.showSelectMark=function(t){let e=this.pageRender.$handler;e.find(".mark-select-text-blank").remove();let n=$(document.createDocumentFragment());for(let e=0,i=t.length;e<i;e++){let i=t[e],r=["top:"+i.top+"px","left:"+i.left+"px","width:"+(i.bottom-i.top)+"px","height:"+(i.right-i.left)+"px"].join(";");n.append('<mark class="mark-highlight-blank" style="'+r+'"></mark>')}e.append(n)},n.hideSelectMark=function(){this.pageRender.$handler.find(".mark-highlight-blank").remove()},n.showToolTip=function(){},n.hideToolTip=function(){},n.panStart=function(){},n.panMove=function(){},n.panEnd=function(){},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.off("mouseup",this.mouseup).removeClass("fv__select-text-state-handler"),this.hideToolTip();try{this.hideSelectMark()}catch(t){}},n.out=function(){this.destroyPageHandler()},e}(Zo);var FA=TA;let _A=function(t){function e(e){var n;return(n=t.call(this,e,"square")||this).pdfViewer=e,n.cursorStyle="fv__cursor-marquee",n.destroyHooks=[],n}(0,E.Z)(e,t),e.getStateName=function(){return on};var n=e.prototype;return n.start=function(t,{left:e,top:n}){this.shapeControl||(this.shapeControl=new sc({resizable:!1,enableDiagonally:!0}),this.shapeControl.active(t.$handler,{left:e,top:n,width:0,height:0},{left:e,top:n,right:e,bottom:n}))},n.pageHandler=function(t){this.pageRender=t;const e=t.$handler.get(0);t.$handler.addClass(this.cursorStyle);const n=this.hammer=new(Ii().Manager)(e);let i;t.$handler;n.add(new(Ii().Pan)({direction:Ii().DIRECTION_ALL})),n.on("panstart",(n=>{const r=this.pdfViewer.getPDFViewerRender();r&&r.disableDragToScroll(),this.startPoint=cs(e,n);let o=this.startPoint.x,s=this.startPoint.y;this.start(t,{left:o,top:s}),i=new rt})),n.on("panmove",(e=>{let{width:n,height:r}=t.$handler[0].getClientRects()[0];this.currentPoint={x:this.calibrationNumber({num:this.startPoint.x+e.deltaX,max:n}),y:this.calibrationNumber({num:this.startPoint.y+e.deltaY,max:r})},i.push((()=>this.adjust(this.shapeControl,this.startPoint,this.currentPoint)))})),n.on("panend",(e=>{const n=this.pdfViewer.getPDFViewerRender();n&&n.enableDragToScroll();let{width:r,height:o}=t.$handler[0].getClientRects()[0];if(this.isStart||!this.shapeControl)return;const[s]=e.pointers;this.currentPoint={x:this.calibrationNumber({num:this.startPoint.x+e.deltaX,max:r}),y:this.calibrationNumber({num:this.startPoint.y+e.deltaY,max:o})},this.isStart=!0,setTimeout((()=>{this.isStart=!1}),500),i.push((()=>this.adjust(this.shapeControl,this.startPoint,this.currentPoint))),s.ctrlKey||s.metaKey?this.pdfViewer.eventEmitter.emit(nt.marqueeZoomOut,this.shapeControl.shape.shape,this.pageRender.index):this.pdfViewer.eventEmitter.emit(nt.marqueeZoomIn,this.shapeControl.shape.shape,this.pageRender.index),this.shapeControl.destroy(),this.shapeControl=null})),n.on("pancancel",(t=>{const e=this.pdfViewer.getPDFViewerRender();e&&e.enableDragToScroll(),i.end(),this.shapeControl.destroy(),this.shapeControl=null}));const r=(t,n)=>{e.addEventListener(t,n),this.destroyHooks.push((()=>{e.removeEventListener(t,n)}))};r("click",(e=>{if(this.isStart)return;this.isStart=!0,setTimeout((()=>{this.isStart=!1}),500);let n=e.layerX,i=e.layerY;this.start(t,{left:n,top:i}),this.shapeControl.shape.shape.clientX=e.clientX,this.shapeControl.shape.shape.clientY=e.clientY,e.ctrlKey||e.metaKey?this.pdfViewer.eventEmitter.emit(nt.marqueeZoomOut,this.shapeControl.shape.shape,this.pageRender.index):this.pdfViewer.eventEmitter.emit(nt.marqueeZoomIn,this.shapeControl.shape.shape,this.pageRender.index),this.shapeControl.destroy(),this.shapeControl=null})),r("contextmenu",(t=>{t.stopPropagation(),t.preventDefault()}))},n.adjust=function(t,{x:e,y:n},{x:i,y:r}){if(!t)return;let o,s,a=Math.abs(e-i),c=Math.abs(n-r);o=Math.min(e,i),s=Math.min(n,r),a=Math.max(a,1),c=Math.max(c,1);let l={left:o,top:s,width:a,height:c},h={left:o,top:s,right:o+a,bottom:s+c};t._applyAnnotBoundary(l),t.shape.boundary=h,t.shape.shape=l,t._updatePreviewer()},n.calibrationNumber=function({num:t,min:e=0,max:n}){return t<0?e:t>n?n:t},n.docHandler=function(t){document.addEventListener("keydown",this.keydownEventListener=e=>{(e.ctrlKey||e.metaKey)&&t.pagesRender.pageRenders.forEach((t=>{t.$handler.get(0).style.cssText+="cursor: -webkit-zoom-out;cursor: zoom-out"}))},{capture:!0}),document.addEventListener("keyup",this.keyupEventListener=e=>{switch(e.keyCode){case _.KeyCodes.Ctrl:case _.KeyCodes.Meta:t.pagesRender.pageRenders.forEach((t=>{t.$handler.get(0).style.cursor=null}))}},{capture:!0})},n.destroyDocHandler=function(){document.removeEventListener("keydown",this.keydownEventListener,{capture:!0}),document.removeEventListener("keyup",this.keyupEventListener,{capture:!0})},n.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.pageRender.$handler.off("mousedown"),this.destroyHooks.forEach((t=>t()))},e}(Zo);var kA=m(973),MA=m.n(kA);let OA=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.execute=function(t){const e=t.getStore(),n=t.ioc.getInstanceByClass(si).onMeasurementInfoChange((t=>{const{displayUnit:i,scale:r,userSpaceUnit:o}=this.getMeasurementInfo(t),s={distance:0,deltaX:0,deltaY:0,scale:r,angle:0,displayUnit:i,perimeter:0,area:0,userSpaceUnit:o};e.dispatch("measurementData",s),n()}))},n.getMeasurementInfo=function(t){const e=t[zn],n=t[qn],i=t[Jn],r=t.realUnit;return{userSpaceScale:e,userSpaceUnit:n,scale:`${e} ${n.name} = ${i} ${r.name}`,displayUnit:r,realScale:i,realUnit:r}},e}(_.Disposable);function LA(...t){return t.map((e=>e/t.length)).reduce(((t,e)=>t+e))}let NA=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t),e.fromHSLA=function(t,n,i,r){const[o,s,a]=_.Color.convertHSL2rgb(t,n,i);return new e(o,s,a,r)},e.fromRGB=function(t){return e.fromRGBA(t,255)},e.fromARGB=function(t){if(t<=16777215)return e.fromRGBA(t,255);const n=255&t>>24,i=16777215&t;return e.fromRGBA(i,n)},e.fromRGBA=function(t,n){return new e(t>>16&255,t>>8&255,255&t,n)},e.fromColor=function(t){return t instanceof e?t:new e(t.r,t.g,t.b,t.a)};var n=e.prototype;return n.isWhite=function(){return!this.a||255===this.r&&255===this.g&&255===this.b},n.averageLightnessColor=function(){return LA(this.r,this.g,this.b)},n.lightnessAverageWith=function(t){return LA(this.averageLightnessColor(),t.averageLightnessColor())},n.mix=function(t,n,i){return new e(this.r*n+t.r*(1-n),this.g*n+t.g*(1-n),this.b*n+t.g*(1-n),i)},n.cloneRGB=function(t){return new e(this.r,this.g,this.b,t)},n.clone=function(){return new e(this.r,this.g,this.b,this.a)},n.asArray=function(){return[this.r,this.g,this.b,this.a]},n.grey=function(t=this.a){const n=this.averageRGB()/2,i=Math.ceil(127.5)+n;return new e(i,i,i,t)},n.averageRGB=function(){return LA(this.r,this.g,this.b)},e}(_.Color);NA.TRANSPARENT=NA.fromARGB(0),NA.WHITE=NA.fromARGB(4294967295);let BA=function(){function t(){}var e=t.prototype;return e.toChannelIndex=function(){return-1},e.toPixelIndex=function(){return-1},e.toCoords=function(){return{x:-1,y:-1,width:-1}},e.isValid=function(){return!1},t}(),VA=function(){function t(t,e,n){this.x=t,this.y=e,this.width=n}var e=t.prototype;return e.toChannelIndex=function(){return new UA(this.toPixelIndex(),this.width).toChannelIndex()},e.toPixelIndex=function(){return this.y*this.width+this.x},e.toCoords=function(){return{x:this.x,y:this.y,width:this.width}},e.isValid=function(){return!0},t}(),UA=function(){function t(t,e){this.pixelIndex=t,this.width=e}var e=t.prototype;return e.toChannelIndex=function(){return 4*this.pixelIndex},e.toPixelIndex=function(){return this.pixelIndex},e.toCoords=function(){const{pixelIndex:t,width:e}=this;return{x:t%e,y:Math.floor(t/e),width:e}},e.isValid=function(){return!0},t}(),HA=function(){function t(t,e){this.channelIndex=t,this.width=e}var e=t.prototype;return e.toChannelIndex=function(){return this.channelIndex},e.toPixelIndex=function(){return Math.floor(this.channelIndex/4)},e.toCoords=function(){const t=this.toPixelIndex();return new UA(t,this.width).toCoords()},e.isValid=function(){return!0},t}(),jA=function(){function t(t){t.buffer?this.data={data:new(Uint8ClampedArray||Uint8Array)(t.buffer),width:t.width,height:t.height}:this.data=t}var e=t.prototype;return e.coords=function(t,e){return t>=this.data.width||e>=this.data.height?new BA:new VA(t,e,this.data.width)},e.pixelIndex=function(t){return 4*t>=this.data.data.length?new BA:new UA(t,this.data.width)},e.forEach=function(t){this.forEachLocation((e=>{const n=this.getPixelColorAt(e);t(e,n)}))},e.forEachLocation=function(t){const e=this.data.data,n=this.data.width;for(let i=0;i<e.length;i+=4)t(new HA(i,n))},e.getCoordsByPixelIndex=function(t){const e=this.data.width;return{x:t%e,y:Math.floor(t/e)}},e.getPixelColorAt=function(t,e=NA.WHITE){if(!t.isValid())return e;const n=this.data.data,i=t.toChannelIndex();return new NA(n[i],n[i+1],n[i+2],n[i+3])},e.updatePixelColor=function(t,e){if(!t.isValid())return;const{x:n,y:i}=t.toCoords();this.data.data.set(e.asArray(),this.coords(n,i).toChannelIndex())},t}();function $A(t,e,n){const i=document.createElement("canvas"),r=i.getContext("2d");return i.width=t,i.height=e,i.style.width=t/n+"px",i.style.height=e/n+"px",i.style.backgroundColor="white",r.fillStyle="white",i}let WA=function(){function t(t,e){this.x=t,this.y=e}var e=t.prototype;return e.dot=function(t){return this.x*t.x+this.y*t.y},e.mult=function(e){return new t(this.x*e,this.y*e)},e.add=function(e){return new t(this.x+e.x,this.y+e.y)},e.negate=function(){return new t(-this.x,-this.y)},e.substract=function(e){return new t(this.x-e.x,this.y-e.y)},e.normalize=function(){const e=this.length();return 0===e?new t(0,0):new t(this.x/e,this.y/e)},e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.perp=function(){return new t(this.y,-this.x)},e.segment=function(e){return{from:this,to:e,dir:new t(e.x-this.x,e.y-this.y)}},e.rotate=function(e){const n=Math.sin(e),i=Math.cos(e);return new t(this.x*i+this.y*n,-this.x*n+this.y*i)},t}();function YA(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let GA=function(){function t(){}var e=t.prototype;return e.resolveDiffColor=function(t,e,n,i){const{sourceOpacity:r,targetOpacity:o,showDiffColor:s}=i;if(s){const t=e.lightnessAverageWith(n),i=t*((Math.abs(e.r-n.r)+Math.abs(e.g-n.g)+Math.abs(e.b-n.b))/255/3),s=t+i,a=Math.max(r,o);return new _.Color(s,t-i,s,a)}if(o>r){const t=r;return e.mix(n,t,o)}return n.cloneRGB(r)},e.combinePixels=function(t,e,n,i=0,r=0){const{width:o,height:s}=e,{showDiffColor:a,targetOpacity:c,sourceOpacity:l,canvasMultiplier:h}=n,u=NA.fromRGB(n.targetDiffColor),d=NA.fromRGB(n.sourceDiffColor),f=new jA(t),p=new jA(e),g=$A(Math.max(e.width,t.width),Math.max(e.height,t.height),h),m=g.getContext("2d"),v=m.createImageData(g.width,g.height),y=new jA(v),w=NA.fromARGB(n.backgroundColor),b=(t,e,i)=>{const{x:r,y:h}=t;if(i.isSameAs(w)&&e.isSameAs(w))return i.cloneRGB(0);if(a&&e.isSameAs(i))return i.grey(i.a);if(r<=o&&h<=s){if(e.isSameAs(w)){const t=c;return a?this.handleDiffColor(u,i,t):i.cloneRGB(t)}if(i.isSameAs(w)){const t=l;return a?this.handleDiffColor(d,e,t):e.cloneRGB(t)}return NA.fromColor(this.resolveDiffColor(t,e,i,n))}return i};let A=b;if("function"==typeof n.blendColorResolver){const t=n.blendColorResolver,e=t=>b(t.pos,NA.fromColor(t.sourceColor),NA.fromColor(t.targetColor));A=(i,r,o)=>{const s=t({pos:i,sourceColor:r,targetColor:o,combinePixelsOptions:n,callBuiltin:e});return"number"==typeof s?NA.fromARGB(s):NA.fromColor(s)}}return y.forEachLocation((t=>{const e=t.toCoords(),n=p.getPixelColorAt(p.coords(e.x,e.y),w),i=f.getPixelColorAt(f.coords(e.x,e.y),w),r=A(e,n,i);y.updatePixelColor(t,r)})),m.putImageData(v,0,0),g},e.handleDiffColor=function(t,e,n){const i=e.averageRGB(),r=Math.min(t.r,t.g,t.b);return new NA(t.r==r?i:t.r,t.g==r?i:t.g,t.b==r?i:t.b,n)},e.transformBitmap=function(t,e,n,i){if(!n)return{bitmap:t,expandX:0,expandY:0};const{rotate:r=0,translateX:o=0,translateY:s=0,contentX:a=0,contentY:c=0}=n;if(i=i||{width:0,height:0},0===r){const n=Math.max(i.width,t.width+Math.abs(o)),r=Math.max(i.height,t.height+Math.abs(s)),a=$A(n,r,1).getContext("2d",{willReadFrequently:!0});a.fillStyle=NA.fromRGB(e).toCSS_Hex(),a.fillRect(0,0,n,r);const c=this.createImageDataByPageBitmap(a,t),l=Math.max(0,o),h=Math.max(0,s);return a.putImageData(c,l,h),{bitmap:a.getImageData(0,0,n,r),expandX:o<0?-o:0,expandY:s<0?-s:0}}{const n=(()=>{const e=$A(t.width,t.height,1),n=e.getContext("2d"),i=this.createImageDataByPageBitmap(n,t);return n.putImageData(i,0,0),e})(),{width:l,height:h,expandX:u,expandY:d,renderX:f,renderY:p}=this.getTransformedBox(t.width,t.height,{rotate:r,translateX:o,translateY:s,contentX:a,contentY:c}),g=Math.max(l,i.width),m=Math.max(h,i.height),v=$A(g,m,1).getContext("2d",{desynchronized:!1,willReadFrequently:!0});v.fillStyle=NA.fromRGB(e).toCSS_Hex(),v.fillRect(0,0,g,m),v.translate(f,p),v.rotate(r),v.translate(-a,-c),v.drawImage(n,0,0);return{bitmap:v.getImageData(0,0,g,m),expandX:u,expandY:d}}},e.createImageDataByPageBitmap=function(t,e){if(e instanceof ImageData)return e;const n=t.createImageData(e.width,e.height);return e.buffer?n.data.set(new(Uint8ClampedArray||Uint8Array)(e.buffer),0):n.data.set(e.data),n},e.getTransformedBox=function(t,e,{rotate:n,translateY:i,translateX:r,contentX:o,contentY:s}){const a=new WA(o=o||0,s=s||0),c=a.mult(-1),l=new WA(t,0).substract(a),h=new WA(t,e).substract(a),u=[c,l,new WA(0,e).substract(a),h].map((t=>t.rotate(-n))),d=u.map((t=>t.x)),f=u.map((t=>t.y)),p=Math.min.apply(Math,YA(w.Z,d)),g=Math.max.apply(Math,YA(w.Z,d)),m=Math.min.apply(Math,YA(w.Z,f)),v=Math.max.apply(Math,YA(w.Z,f))-m;let y=g-p+Math.abs(r),b=v+Math.abs(i),A=Math.abs(p)+(r<0?0:r),P=Math.abs(m)+(i<0?0:i),S=(p<0?-p:0)+(r<0?-r:0),C=(m<0?-m:0)+(i<0?-i:0);return i>0&&i<C?(C-=i,b-=i,P-=i):i>0&&i>C&&(b-=C,P-=C,C=0),r>0&&r<S?(S-=r,y-=r,A-=r):r>0&&r>S&&(y-=S,A-=S,S=0),{width:y,height:b,renderX:A,renderY:P,expandX:S,expandY:C}},t}();var KA;!function(t){t[t.RED=16711680]="RED",t[t.GREEN=65280]="GREEN",t[t.BLUE=255]="BLUE",t[t.MAGENTA=16711935]="MAGENTA",t[t.YELLOW=16776960]="YELLOW",t[t.CYAN=65535]="CYAN"}(KA||(KA={}));let qA=function(){function t(){this.store=new _.Store,this.resetToDefault()}t.scope=function(){return _.IOC_SHARED_SINGLETON};var e=t.prototype;return e.setShowDiffColor=function(t){this.showDiffColor=t,this.store.dispatch("showDiffColor",t)},e.setTargetOpacity=function(t){this._set("targetOpacity",t)},e.setSourceOpacity=function(t){this._set("sourceOpacity",t)},e.setTargetDiffColor=function(t){this._set("targetDiffColor",t)},e.setSourceDiffColor=function(t){this._set("sourceDiffColor",t)},e.setBlendColorResolver=function(t){this._set("blendColorResolver",t)},e._set=function(t,e){this[t]=e,this.store.dispatch(t,e)},e.onChange=function(t,e){return this.store.subscribe(t,e)},e.extractAllOptions=function(){return{showDiffColor:this.showDiffColor,targetOpacity:this.targetOpacity,sourceOpacity:this.sourceOpacity,sourceDiffColor:this.sourceDiffColor,targetDiffColor:this.targetDiffColor,backgroundColor:this.backgroundColor,blendColorResolver:this.blendColorResolver}},e.resetToDefault=function(){this.setShowDiffColor(!1),this.setTargetOpacity(255),this.setSourceOpacity(255),this.setTargetDiffColor(KA.BLUE),this.setSourceDiffColor(KA.RED),this.setBlendColorResolver(void 0),this.backgroundColor=4294967295},t}();var zA=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};let JA=function(){function t(){}t.scope=function(){return _.IOC_SHARED_SINGLETON};var e=t.prototype;return e.createCompareResultDoc=function({pdfViewer:t,sourceDoc:e,targetDoc:n,fileName:i,onprogress:r}){return zA(this,void 0,void 0,(function*(){const o=yield t.getWebPDFJR();"function"!=typeof r&&(r=()=>{});const s=this.getPageSize(e,n,0);r(0);const a=yield o.createNewDoc(i,t.getUserName(),s),c=Math.max(e.getPageCount(),n.getPageCount());r(1/c);for(let t=1;t<c;t++){let i=a.getPageCount();const{width:o,height:s}=yield this.getPageSize(e,n,t);yield a.insertPage(i-1,o,s),r(t/c)}return a.info.isOverlayComparisonDoc=!0,a.fromDoc=e,a.otherDoc=n,r(1),a}))},e.comparePageBitmap=function(t,e){const n=t.getIoC().getInstanceByClass(GA),i=t.getIoC().getInstanceByClass(qA),r=(0,_.extendOptions)({canvasMultiplier:1},i.extractAllOptions(),e.combinePixelsOptions),{bitmap:o,expandX:s,expandY:a}=n.transformBitmap(e.targetBitmap,r.backgroundColor,e.transformation),{bitmap:c}=n.transformBitmap(e.sourceBitmap,r.backgroundColor,{translateX:s,translateY:a},{width:o.width,height:o.height});return n.combinePixels(o,c,r)},e.getPageSize=function(t,e,n){return zA(this,void 0,void 0,(function*(){const i=yield this.getPageByIndex(t,n),r=yield this.getPageByIndex(e,n),o=null==i?void 0:i.getWidth(),s=null==i?void 0:i.getHeight(),a=null==r?void 0:r.getWidth(),c=null==r?void 0:r.getHeight();return{width:Math.max(o,a),height:Math.max(s,c)}}))},e.getPageByIndex=function(t,e){const n=t.getPageCount();if(!(e<0||e>n))return t.getPageByIndex(e)},t}(),ZA=function(){function t(){}t.inject=function(){return{pdfViewer:bP}};var e=t.prototype;return e.compareImageData=function(t){return this.getSharedOverlayComparisonService().comparePageBitmap(this.pdfViewer,t)},e.getSharedOverlayComparisonService=function(){return this.pdfViewer.getIoC().getInstanceByClass(JA)},t}(),XA=function(){function t(){this.pdfViewerInstances=new Set,this.usedInstanceIds=new Set}t.scope=function(){return _.IoCScope.SHARED_SINGLETON};var e=t.prototype;return e.addPDFViewerInstance=function(t){return this.pdfViewerInstances.add(t),this.usedInstanceIds.add(t.instanceId),()=>{this.removePDFViewerInstance(t)}},e.removePDFViewerInstance=function(t){this.pdfViewerInstances.delete(t)},e.isMultipleCase=function(){return this.pdfViewerInstances.size>1},e.hasPDFViewerInstance=function(){return this.pdfViewerInstances.size>0},e.isUsedInstanceId=function(t){return Array.from(this.pdfViewerInstances).some((e=>e.instanceId===t))},e.getNextInstanceId=function(){if(this.pdfViewerInstances.size>0)return"pdfviewer-instance-"+this.usedInstanceIds.size},t}();const QA=["de-DE","en-US","es-419","fr-FR","it-IT","ja-JP","ko-KR","nl-NL","zh-CN","zh-TW"],tP=QA.map((t=>t.toLowerCase().split("-")));function eP(t){if("string"!=typeof t)return"en-US";const e=t.toLowerCase();let n;if(e.indexOf("-")>-1){const t=e.split("-");n=e=>e[0]===t[0]&&e[1]===t[1]}else n=t=>t[0]===e||t[1]===e;const i=tP.findIndex(n);return-1!==i?QA[i]:"en-US"}let nP=function(){function t(t){this.events={}}var e=t.prototype;return e.setCallback=function(t,e){this.events[t]=e},e.getCallback=function(t){return this.events[t]},e.removeCallback=function(t){delete this.events[t]},e.clear=function(){this.events={}},e.setEmbeddedGotoCallback=function(t){this.setCallback(At.gotoE,t)},e.setSubmitFormCallback=function(t){this.setCallback(At.submitForm,t)},t}(),iP=function(t){function e(){return t.apply(this,arguments)||this}return(0,E.Z)(e,t),e.prototype.execute=function(t){const{PLAIN:e,HTML:n,FILES:i}=_.CLIPBOARD_DATA_TYPES,r=r=>{if((0,_.isEditableElement)(document.activeElement))return;if(!t.isShortcutKeyEnabled()||!r.clipboardData||!r.clipboardData.items)return;if(_.keyboardStatus.isShiftDown)return r.preventDefault(),!1;const o=t.getStateHandlerManager().getCurrentStates(),s=t.getStateHandlerManager().getStateHandlerConfig(o.getStateName());if(s&&!1===s.enablePasting)return;let a=[];var c=r.clipboardData;if(c&&c.items){let{items:r,types:o}=c,s=o[0],l=0;if(o.length>1){let t=o.indexOf(n);t>-1&&(l=t,s=n)}switch(s){case e:r[l].getAsString((e=>{let n;try{if(n=JSON.parse(e),"number"==typeof n)throw new Error("Pure number")}catch(t){n=[{type:"string",value:e}]}n.some((t=>{const e=t.value;return"string"===t.type&&"widget"===e.type&&7===e.fieldType}))?t.viewerUI.alert({message:"form-designer:dialog.typeError",level:"warning"}):t.paste(n).then((()=>{{const e=t.getCurrentPDFDoc();if(!e)return;return void e.reloadPDFForm()}}))}));break;case n:let o=c.getData(n);if(o){let e=[{type:"html",value:o}];t.paste(e).then((()=>{{const e=t.getCurrentPDFDoc();if(!e)return;return void e.reloadPDFForm()}}))}break;case i:a=[{type:"file",value:r[l].getAsFile()}],t.paste(a)}}};document.addEventListener("paste",r),this.addDestroyHook((()=>{document.removeEventListener("paste",r)}))},e}(_.Disposable),rP=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).eventEmitter=new qs.EventEmitter,e}(0,E.Z)(e,t),e.inject=function(){return{viewer:bP}};var n=e.prototype;return n.allInjected=function(){this.ownsTo(this.viewer),this.eventEmitter.emit("change"),this.addDestroyHook((()=>{this.eventEmitter.removeAllListeners()}))},n.updateGetAnnotComponentConfig=function(t){if("function"!=typeof t)throw new Error("The 'getAnnotComponentConfig' option must be a function.");this.viewer.customs.getAnnotComponentConfig=t,this.eventEmitter.emit("change")},n.onGetAnnotComponentConfigUpdated=function(t){const e=()=>{t(this.viewer)};return this.eventEmitter.on("change",e),()=>{this.eventEmitter.off("change",e)}},e}(_.Disposable);var oP=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};let sP=function(){function t(t="FoxitWebPDFSDKForWeb"){this.defaultDatabaseName=t,this.STORE_NAME="data",this.removeEventListeners=new Set,this.changeEventListeners=new Set,this.isClosed=!1,this.notConnected=!0,this.waitQueue=new _.QueuedAsyncTaskExecutor}t.inject=function(){return{pdfViewer:bP}};var e=t.prototype;return e.connectDB=function(){var t,e;const n=(null===(e=null===(t=this.pdfViewer)||void 0===t?void 0:t.customs)||void 0===e?void 0:e.storageDatabaseName)||this.defaultDatabaseName,i=window.indexedDB.open(n,1);this.databaseDefer=(0,_.createDeferred)(),this.databasePromise=this.databaseDefer.promise,this.notConnected=!1,i.onerror=()=>{this.databaseDefer.reject(i.error)},i.onsuccess=()=>{this.databaseDefer.resolve(i.result),i.result.onclose=()=>{this.notConnected=!0}},i.onupgradeneeded=()=>{i.result.createObjectStore(this.STORE_NAME).createIndex("id,feature,key",["id","feature","key"],{unique:!0})}},e.useStore=function(t){return oP(this,void 0,void 0,(function*(){if(this.isClosed)throw new Error("Unable to execute storage operations after the driver has been closed!");this.notConnected&&this.connectDB();const e=(()=>oP(this,void 0,void 0,(function*(){const e=yield this.databasePromise;return t(((t=!1)=>e.transaction([this.STORE_NAME],t?"readonly":"readwrite").objectStore(this.STORE_NAME)))})))();return this.waitQueue.exec((()=>e)),e}))},e.get=function(t,e){return oP(this,void 0,void 0,(function*(){return this.useStore((n=>this.getValue(n(!0),t,e)))}))},e.onChange=function(t){const e={callback:t};return this.changeEventListeners.add(e),()=>{this.changeEventListeners.delete(e)}},e.remove=function(t,e){return oP(this,void 0,void 0,(function*(){yield this.useStore((n=>oP(this,void 0,void 0,(function*(){const i=n().delete(IDBKeyRange.only(this.generateKeyArray(t,e))),r=(0,_.createDeferred)();i.onerror=()=>r.reject(i.error),i.onsuccess=()=>r.resolve(),yield r.promise,this.dispatchRemoveEvent(t,e)}))))}))},e.removeAll=function(t){return oP(this,void 0,void 0,(function*(){yield this.useStore((e=>oP(this,void 0,void 0,(function*(){const n=yield this.getAllKeys(e(!0),t);yield Promise.all(n.map((n=>oP(this,void 0,void 0,(function*(){const i=e().delete(IDBKeyRange.only(n)),r=(0,_.createDeferred)();i.onerror=()=>r.reject(i.error),i.onsuccess=()=>r.resolve(),yield r.promise,this.dispatchRemoveEvent(t,n)})))))}))))}))},e.set=function(t,e,n){return oP(this,void 0,void 0,(function*(){yield this.useStore((i=>oP(this,void 0,void 0,(function*(){const r=yield this.has(t,e),o=r?yield this.getValue(i(!0),t,e):void 0;if(o===n||JSON.stringify(o)===JSON.stringify(n))return;let s;s=r?i().put(n,this.generateKeyArray(t,e)):i().add(n,this.generateKeyArray(t,e));const a=(0,_.createDeferred)();s.onerror=()=>a.reject(s.error),s.onsuccess=()=>a.resolve(),yield a.promise,this.dispatchChangeEvent({context:t,key:e,oldValue:o,newValue:n})}))))}))},e.getAll=function(t){return oP(this,void 0,void 0,(function*(){return this.useStore((e=>oP(this,void 0,void 0,(function*(){const n=yield this.getAllKeys(e(),t),i={};return n.length?(yield Promise.all(n.map((t=>oP(this,void 0,void 0,(function*(){const n=e().get(IDBKeyRange.only(t)),r=(0,_.createDeferred)();n.onerror=()=>r.reject(n.error),n.onsuccess=()=>r.resolve(n.result);const o=yield r.promise;i[t[2]]=o}))))),i):i}))))}))},e.onRemove=function(t){const e={type:"remove",callback:t};return this.removeEventListeners.add(e),()=>{this.removeEventListeners.delete(e)}},e.close=function(){return oP(this,void 0,void 0,(function*(){if(this.isClosed)return;let t;this.isClosed=!0;try{t=yield this.databasePromise}catch(t){}t&&(yield this.waitQueue.waitForCurrentRunningTasks(),yield this.waitQueue.waitUntilQuiet(10),t.close())}))},e.has=function(t,e){return oP(this,void 0,void 0,(function*(){return this.useStore((n=>{const i=n().getKey(IDBKeyRange.only(this.generateKeyArray(t,e))),r=(0,_.createDeferred)();return i.onerror=()=>r.reject(i.error),i.onsuccess=()=>r.resolve(!!i.result),r.promise}))}))},e.generateKeyArray=function(t,e){return[t.id||"",t.feature||""].concat(2===arguments.length?[e||""]:[])},e.getValue=function(t,e,n){const i=IDBKeyRange.only(this.generateKeyArray(e,n)),r=t.get(i),o=(0,_.createDeferred)();return r.onerror=()=>o.reject(r.error),r.onsuccess=()=>o.resolve(r.result),o.promise},e.getAllKeys=function(t,e){return oP(this,void 0,void 0,(function*(){const n=t.getAllKeys(IDBKeyRange.lowerBound(this.generateKeyArray(e))),i=(0,_.createDeferred)();n.onerror=()=>i.reject(n.error),n.onsuccess=()=>i.resolve(n.result);const r=yield i.promise,o=e.id||"",s=e.feature||"";return r.filter((t=>t[0]===o&&t[1]===s))}))},e.dispatchRemoveEvent=function(t,e){this.removeEventListeners.forEach((({callback:n})=>{n({context:t,key:e})}))},e.dispatchChangeEvent=function(t){this.changeEventListeners.forEach((({callback:e})=>{e(y({},t))}))},t}(),aP=function(){function t(){}t.inject=function(){return{pdfViewer:bP}};var e=t.prototype;return e.getAll=function(t){return this.getStorageDriverImpl().getAll(t)},e.get=function(t,e){return this.getStorageDriverImpl().get(t,e)},e.set=function(t,e,n){return this.getStorageDriverImpl().set(t,e,n)},e.removeAll=function(t){return this.getStorageDriverImpl().removeAll(t)},e.remove=function(t,e){return this.getStorageDriverImpl().remove(t,e)},e.onChange=function(t){return this.getStorageDriverImpl().onChange(t)},e.onRemove=function(t){return this.getStorageDriverImpl().onRemove(t)},e.getStorageDriverImpl=function(){const t=this.pdfViewer.customs.storageDriver;if(t)return this.getStorageDriverImpl=()=>t,t;const e=this.pdfViewer.getIoC().getInstanceByClass(sP);return this.getStorageDriverImpl=()=>e,e},e.close=function(){return this.getStorageDriverImpl().close()},S(t,[{key:"isClosed",get:function(){return this.getStorageDriverImpl().isClosed}}]),t}();var cP=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};let lP=function(){function t(){}t.inject=function(){return{pdfViewer:bP,driverWrapper:aP}};var e=t.prototype;return e.getAll=function(t){return cP(this,void 0,void 0,(function*(){const e=this.getContext(t);return this.driver.getAll(e)}))},e.get=function(t,e){return cP(this,void 0,void 0,(function*(){const n=this.getContext(t);return this.driver.get(n,e)}))},e.set=function(t,e,n){return cP(this,void 0,void 0,(function*(){const i=this.getContext(t);return this.driver.set(i,e,n)}))},e.remove=function(t,e){return cP(this,void 0,void 0,(function*(){const n=this.getContext(t);return this.driver.remove(n,e)}))},e.removeAll=function(t){return cP(this,void 0,void 0,(function*(){const e=this.getContext(t);return this.driver.removeAll(e)}))},e.getContext=function(t){return{feature:t,id:this.pdfViewer.getInstanceId(),pdfViewer:this.pdfViewer}},e.onChange=function(t){return this.driver.onChange((e=>{t(y({},e))}))},e.onRemove=function(t){return this.driver.onRemove((e=>{t(y({},e))}))},e.destroy=function(){if(!this.driverWrapper.isClosed)return this.driver.close()},S(t,[{key:"driver",get:function(){if(this.driverWrapper.isClosed)throw new Error("Unable to execute storage operations after the driver has been closed!");return this.driverWrapper}}]),t}();function hP(t,e,n){if(e&&!Array.isArray(e)&&"number"==typeof e.length){var i=e.length;return function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}(e,void 0!==n&&n<i?n:i)}return t(e,n)}let uP,dP=function(){},fP=function(){return-1};const pP="JR",gP="canvas",mP={annotRenderingMode:{square:gP,highlight:gP,caret:gP,squiggly:gP,underline:gP,strikeout:gP,choiceButton:gP,pushButton:gP,radioButton:gP,textField:gP,comboBox:gP,note:gP,fileAttachment:gP,sound:gP,freetext:gP,redact:gP},highPerformance:!1,enableSignature:!1},vP="undefined",yP={destroyCurrentDoc:!0};let wP=function(t){function e({preloadJR:e=!0,preloadSR:n=!1,libPath:i,jr:r,sr:o,i18n:s,i18nOptions:a,eventEmitter:c=new(zs()),minScale:l=.01,maxScale:h=10,defaultScale:u="fitWidth",scaleFrequency:d=0,tileSize:f=1e6,tileCache:p=2,getTileSize:g=null,StateHandlers:m=[],customs:v={},keymap:w={},Viewmodes:b=[],enableJS:A,enableSafeMode:P,stateHandlerConfig:S,watermarkConfig:E,actionOptions:x={},defaultViewMode:D="continuous-view-mode",snapshotServer:I=new bm({uploadSnapshotAPIPath:"snapshot/upload"}),collaboration:R={enable:!1,annotationFormat:"fdf",communicator:null,handlerClasses:[],continueToConnect:(t,e)=>t<15},highPerformance:T=!1,annotRenderingMode:F,defaultKeyboardEventBinder:k=jr,defaultAnnotConfig:M,enableSignature:O,enableShortcutKey:L=!0,engineMode:N=pP,sharedWorker:B=!1,noJSFrame:V=!1,showCommentList:U=!1,showAnnotTooltip:H=!1,showFormFieldTooltip:j=!1,showMeasurementInfoPanel:$=!0,viewerUI:W,applicationContext:Y,instanceId:K}={}){var q;(q=t.call(this)||this).enableOpenAction=!0,q.enablePageAction=!0,q.ioc=Y||new _.ApplicationContextImpl,q.keyboard=new _.KeyboardImpl,q.$constructorOptions=arguments[0],q.tileCache=Number(p)>0?!0===p?Number.MAX_VALUE:Number(p):0;const z=q.ioc.getInstanceByClass(XA);if(!("instanceId"in arguments[0])&&z.hasPDFViewerInstance()&&(K=z.getNextInstanceId()),z.isUsedInstanceId(K))throw new Error(`There are already instances of PDFViewer that use this instanceId: ${K}, please change it to other value.`);if(q.instanceId=K,q.localStorage=new yA(K),q.addDestroyHook(z.addPDFViewerInstance((0,C.Z)(q))),z.isMultipleCase()&&(V&&_.LoggerFactory.getLogger("PDFViewer").warn("There are currently multiple PDFViewer instances being constructed, the noJSFrame option is forced to false!"),V=!1),i)if(ia(i));else{i=Xs(Js()).join(i).absolute(!1)}else i=Xs(Js()).absoluteDir();"/"!==i[i.length-1]&&(i+="/"),q.libPath=i;let J="jr-engine/gsdk";(r=r||{}).licenseKey=r.licenseKey||"",r.licenseSN=r.licenseSN||"",r.l=r.l||"";let Z=r.workerPath||"";Z?ia(Z)||(Z=ea(i,Z)):Z=i;let X=r.enginePath;r.workerPath=Z,r.enginePath=X,r.enginePath=r.enginePath||J,X?ia(X)||(X=ea(i,X)):X=i+J,r.enginePath=X;let Q=r.fontPath;Q?ia(Q)||(Q=ea(i,Q)):Q=ea(i,"../external/brotli"),r.brotli=y({core:!0},r.brotli),r.fontPath=Q,r.fontInfoPath&&(r.fontInfoPath=ea(i,r.fontInfoPath)),q.snapshotServer=I;let tt=(o=o||{}).workerPath||"";tt=tt?ia(tt)?Z:ea(i,tt):i,o.workerPath=tt;let et=(a=(0,_.extendOptions)({initOption:{ns:"viewer_"}},a)).path;et?ia(et)||(et=ea(i,et)):et=i+"locales",a.absolutePath=a.absolutePath||et,q.i18n=s||Ys(a),function(t){if(t.$$overrided)return;t.$$overrided=!0;const e=t.t;t.t=(n,i)=>{if(!n)return n;switch(typeof n){case"number":case"symbol":case"bigint":case"boolean":case"function":return n;case"string":break;default:if(!Array.isArray(n))return n}return t.exists(n,i)?e.call(t,n,i):n}}(q.i18n),N=N.toUpperCase(),-1===[pP,"SR","MIX"].indexOf(N)&&(N=pP);let it={},rt=!0,ot="object"==typeof WebAssembly;switch(N){case"SR":F||(it=mP.annotRenderingMode),ot=typeof T!==vP&&T,rt=typeof O!==vP&&O,document.body.classList.add("fv__viewer-sr__"),q.pdfEngine=q.getWebPDFSR();break;case"MIX":document.body.classList.add("fv__viewer-sr__"),q.pdfEngine=q.getWebPDFSR(),q.mixPdfJREngine=q.getWebPDFJR();break;default:q.pdfEngine=q.getWebPDFJR()}q.customs=y({closeDocBefore:dP,closeDocAfter:dP,getDocPermissions:fP,beforeRenderPDFDoc:dP,executeNavigationAction:dP,getAnnotComponentConfig:dP,storageDriver:void 0},v);let st=(0,C.Z)(q);q.actionOptions=y({remoteGotoActionInit:function(){let t=window.opener;if(t){function e(t){if(t.source!==window){const{foxitSdkActionType:e,foxitSdkActionUrl:n,foxitSdkActionFileName:i,top:r,bottom:o,left:s,right:a,pageIndex:l,zoomFactor:h,zoomMode:u}=t.data;"TypeGoToR"===e&&st.openPDFByHttpRangeRequest({range:{url:n}},{fileName:i}).then((()=>{c.once(nt.renderPageSuccess,(function(){switch(u){case"ZoomXYZ":let t=h;0===t?st.goToPage(l,r,s,0!==r):st.zoomTo(t,!1).then((()=>{st.goToPage(l,r,s,0!==r)}));break;case"ZoomFitHorz":st.zoomTo("fitWidth",!1).then((()=>{st.goToPage(l,r,s,0!==r)}));break;case"ZoomFitPage":st.zoomTo("fitHeight",!1).then((()=>{st.goToPage(l,r,s,0!==r)}))}}))}))}}t.postMessage({isReady:!0},window.location.origin),window.addEventListener("message",e,!1),st.addDestroyHook((()=>{window.removeEventListener("message",e,!1)}))}}},x),L?q.keyboard.enable():q.keyboard.disable(),q.keyboardListeners=[];let at=q.viewModeManager=new la((0,C.Z)(q));for(let t=0,e=b.length;t<e;t++)at.register(b[t]);q.defaultAnnotConfig=M||(()=>({})),P=void 0===P||P,q.config={sr:o,jr:r,minScale:l,maxScale:h,defaultScale:u,tileSize:f,getTileSize:g,enableJS:A,enableSafeMode:P,defaultViewMode:D,stateHandlerConfig:S,watermarkConfig:E,scaleFrequency:d,highPerformance:!1,annotRenderingMode:y({highlight:"canvas",choiceButton:"native",pushButton:"native",textField:"native",comboBox:"native",note:"native",fileAttachment:"native",sound:"native",freetext:"native",square:"canvas"},it,F),enableSignature:rt,sizeCount:10,enableShortcutKey:L,engineMode:N,sharedWorker:B,noJSFrame:V,printSetting:{quality:100,showHeaderFooter:!0},autoCompleteSetting:{level:"off",rememberNumericalData:!0},showCommentList:U,showAnnotTooltip:H,showFormFieldTooltip:j,showMeasurementInfoPanel:$},q.eventEmitter=c,q.store=new _.Store,q.mementoManager=new km((0,C.Z)(q));let ct=q.annotManager=new pf((0,C.Z)(q));"SR"===N&&ct.setViewerAnnotFlag((function(t){let e=t.getType();return-1===["text","caret","freetext","fileattachment","highlight","ink","line","circle","square","polygon","polyline","squiggly","strikeout","underline","widget","redact","stamp"].indexOf(e)?me.locked|me.readOnly:0})),q.actionManager=new Qf((0,C.Z)(q)),q.JSEngine=new om((0,C.Z)(q)),q.inkSignManager=new cm((0,C.Z)(q)),q.onlineSignManager=new hm((0,C.Z)(q)),q.viewerUI=W||new ov;let lt=q.stateHandlerManager=new sm((0,C.Z)(q));q.viewerUI.prepare((0,C.Z)(q)),q.customRenderManager=new Pm((0,C.Z)(q));const ht=[AA,SA,CA,xA,DA,IA,RA,FA,_A];m.push.apply(m,ht);for(let t=0,e=m.length;t<e;t++)lt.register(m[t]);return q.annotsEventMaps=[],q._annotMouseEventCallback=q._annotMouseEventCallback.bind((0,C.Z)(q)),q._runtimeColor=["RGB",.55,.55,1],q._runtimeColorOpacity=.5,q._runtimeColorRequired=["RGB",.55,.55,1],q._runtimeColorOpacityRequired=1,q._highlightControls=!0,q._highlightControlsUI=!0,q.lifeCycleManager=new mv,q.lifeCycleManager.registerLifecycle(new Sv),q.lifeCycleManager.registerLifecycle(new bv((0,C.Z)(q))),q.lifeCycleManager.registerLifecycle(new Av((0,C.Z)(q))),q.lifeCycleManager.registerResourceGenerator(Kd.OBJECT_URL,Pv),q.activationManager=new G,q.collaborationOptions=R,q._collaborationDefer=(0,_.createDeferred)(),q.initializers=[new vA,new uA,new fA,new gA,new OA,new iP],q.initializers.forEach((t=>{t.execute((0,C.Z)(q))})),q}(0,E.Z)(e,t);var n=e.prototype;return n.resourceGenerator=function(t,e){return this.lifeCycleManager.generator(t,e)},n.getDefaultAnnotConfig=function(){return(this.webPDFJR||this.webPDFSR).getDefaultAnnotConfig()||dP},n.setDefaultAnnotConfig=function(t){(this.webPDFJR||this.webPDFSR).setDefaultAnnotConfig(t)},n._annotMouseEventCallback=function(t){this.annotsEventMaps.map((e=>{e&&e(t)}))},n.startListenAnnotMouseEvent=function(){this.cleanListenAnnotMouseEvent(),document.addEventListener("mouseup",this._annotMouseEventCallback,{capture:!0})},n.stopListenAnnotMouseEvent=function(){this.cleanListenAnnotMouseEvent(),document.removeEventListener("mouseup",this._annotMouseEventCallback,{capture:!0})},n.addListenAnnotMouseEvent=function(t){return this.annotsEventMaps.push(t),()=>{this.offListenAnnotMouseEvent(t)}},n.offListenAnnotMouseEvent=function(t){let e=this.annotsEventMaps;for(let n=e.length;n--;)if(e[n]===t){e.splice(n,1);break}},n.cleanListenAnnotMouseEvent=function(){this.annotsEventMaps=[]},n.changeLanguage=function(t){const e=eP(t);return t!==e&&(LOGGER.warn(`You have entered an illegal language code: ${t}, which will be automatically converted to a valid language code: ${e}`),t=e),new Promise(((e,n)=>{this.i18n.changeLanguage(t,(i=>{if(i)return n(i),void this.eventEmitter.emit("change-language-failed");this.eventEmitter.emit("change-language-success",t),e()}))}))},n.getCurrentLanguage=function(){return this.i18n.language?this.i18n.language:this.i18n.options.fallbackLng?this.i18n.options.fallbackLng[0]:eP(navigator.language)},n.takeSnapshot=function(t,e,n,i,r){const o=this.getPDFPageRender(t);if(!o)throw new Error(`page not found: ${t}`);return o.getSnapshot(e,n,i,r)},n.uploadImage=function(t){return this.snapshotServer.uploadImage(t).then((t=>(this.snapshotServer.render,this.snapshotServer.render(t),Promise.resolve(t)))).catch((t=>(console.warn(this.i18n.t("viewer_:error.snapshotServer")),Promise.reject(t))))},n.copySnapshot=function(t){isSecureContext||console.error("Access clipboard data requires a secure origin, either HTTPS or localhost.");try{return fetch(t).then((t=>t.blob())).then((t=>navigator.clipboard.write([new ClipboardItem({"image/png":t})]).then((()=>Promise.resolve(!0)),(()=>Promise.resolve(!1)))))}catch(t){return console.error(t),Promise.resolve(!1)}},n.copyImage=function(t){this.copySnapshot(t)},n.getKeyboardEventBinder=function(t){const e=this.keyboard.getBinder(t);if(!e)throw new Error(`event binder not found error: ${t}`);return e},n.switchKeyboardEventBinder=function(t,e=!0){return this.keyboard.activeBinder(t,e)},n.addKeyboardShortcutEventListener=function(t,e,n=this.getDefaultKeyboardEventBinder()){let i;return i=n instanceof wm?n:this.keyboard.getBinder(n),i?i.on(t,e):dP},n.addEventListener=function(t,e){return this.eventEmitter.on(t,e),()=>{this.eventEmitter.off(t,e)}},n.getDefaultKeyboardEventBinder=function(){return this.keyboard.getDefaultKeyboardEventBinder()},n.getWebPDFJR=function(){if(this.webPDFJRPromise)return this.webPDFJRPromise;let t=(0,_.createDeferred)();return Promise.resolve().then(m.bind(m,4266)).then((e=>{let n=new(e.default(lb))(this.config.jr,this.eventEmitter,{storage:this.getDeprecatedStorage()});this.webPDFJR=n;let i="viewer_:error.initEngine.c2";return n.setDefaultAnnotConfig(this.defaultAnnotConfig),n.init().then((t=>t)).then((e=>{let r=e.other,o={"viewer  component":{version:sv},"core component":{version:e.version},JR:{version:!0}};if(r){let e=location.href,n=!0;if(r.h){n=!1;let t=r.h;for(let i=t.length;i--;){let r=t[i];if(new RegExp(r).test(e)){n=!0;break}}}if(!n)return this.viewerUI.alert(i),void t.reject(new Error("failed to initialize WebPDF JR Engine"));let o=Date.now(),s=r.b;if(s&&(n=o>s,!n))return this.viewerUI.alert(i),void t.reject(new Error("failed to initialize WebPDF JR Engine"));let a=r.e;if(a&&(n=o<a,!n))return this.viewerUI.alert(i),void t.reject(new Error("failed to initialize WebPDF JR Engine"));if(!n)return this.viewerUI.alert(i),void t.reject(new Error("failed to initialize WebPDF JR Engine"))}return console.table&&console.table(o),this.eventEmitter.emit(nt.jrLicenseSuccess),this.getModuleLicenseRight(),t.resolve(n)}),(e=>{this.isDestroyed||this.viewerUI.alert(this.i18n.t("viewer_:error.initEngine.c"+e||0)),t.reject(e)})),n})),this.webPDFJRPromise=t.promise},n.getWebPDFSR=function(){return this.webPDFSRPromise?this.webPDFSRPromise:this.webPDFSRPromise=m.e(863).then(m.bind(m,703)).then((t=>{let e=new(t.default(lb))(this.config.sr,this.eventEmitter,{storage:this.storage});return this.webPDFSR=e,e.setDefaultAnnotConfig(this.defaultAnnotConfig),e.init().then((()=>{let t={"viewer  component":{version:sv},SR:{version:!0}};console.table&&console.table(t),this.isWebPDFSR=!0,this.scaleFrequency=4,this.config.scaleFrequency=4,this.eventEmitter.emit(nt.srLicenseSuccess)}),(t=>{alert(this.i18n.t(["viewer_:error.initEngine.c1","viewer_:error.initEngine.c2"][t-1]||"viewer_:error.c-1"))})),e}))},n.initAnnotationIcons=function(t){Array.isArray(t)&&(t=t.reduce(((t,e,n)=>{const i=e.annotType||"stamp",r=e.category,o=e.name;if(!r)throw new Error(`Missing category for icon at ${n}: ${JSON.stringify(e,null,2)}`);if(!o)throw new Error(`Missing name for icon at ${n}: ${JSON.stringify(e,null,2)}`);const s=t[i]=t[i]||{},a=s[r]=s[r]||{},c={url:e.url,fileType:e.fileType,width:e.width>0?e.width:150,height:e.height>0?e.height:45};return a[o]=c,t}),{}));let{stamp:e}=t;return e&&Object.keys(e).forEach((t=>{CP({key:"category",value:t,notSpecialChar:!0}),Object.keys(e[t]).forEach((t=>CP({key:"name",value:t,notSpecialChar:!0})))})),this.pdfEngine.then((e=>e.setIcons(t))).then((e=>!arguments[1]&&this.eventEmitter.emit(nt.iconInited,t)))},n.addAnnotationIcon=function(t){if(["url","annotType","fileType"].forEach((e=>{if(!t[e])throw new Error("Icon property lost: "+e)})),CP({key:"category",value:t.category,notSpecialChar:!0}),CP({key:"name",value:t.name,notSpecialChar:!0}),0==["png","bmp","jpg","jpeg","pdf"].filter((e=>t.fileType.toLowerCase()==e)).length)throw new Error("The fileType is wrong");return t.fileType=t.fileType.toLowerCase(),this.pdfEngine.then((e=>e.addIcon(t))).then((e=>{e&&this.eventEmitter.emit(nt.iconAdded,t)}))},n.removeAnnotationIcon=function(t,e,n){e||(n=null);let i=arguments[3];return this.pdfEngine.then((r=>r.removeIcon(t,e,n,i))).then((r=>this.eventEmitter.emit(nt.iconRemoved,{type:t,category:e,name:n,index:i})))},n.init=function(t){this.$ui=D()(t),this.element=this.eUi=this.$ui.get(0);const e=this.viewModeManager.get(this.config.defaultViewMode);if(this.pdfViewerRender=new ks(this.$ui,e,this),this.collaborationOptions){const{enable:t}=this.collaborationOptions;t?this.initCollaboration():this._collaborationDefer.resolve(null)}let n;n="function"!=typeof this.customs.getAnnotPermissions?()=>st.RESOLVED_PROMISE_VOID:this.customs.getAnnotPermissions,this.annotationAuthorityManager=new zb(this,n),this.actionCallbackManager=new nP(this);const i=()=>{this.annotationAuthorityManager.clear()};this.progressHandler=async(t,e,n)=>{if(this.progressHandler.status){if(this.progress&&this.progress.updateProgress(e,n),n===Zm.FAIL||n===Zm.SUCCESS){const t=setTimeout((()=>{this.progress&&this.progress.hide()}),500);this.addDestroyHook((()=>{clearTimeout(t)})),delete this.progressHandler.status}}else this.progress?(this.progress.show(document.body),this.progress.updateProgress(e,n)):this.progress=await this.viewerUI.progress(e,document.body),this.progressHandler.status="start"};const r=(t,e,n)=>{this.progressHandler(t,e,n)};let o;this.eventEmitter.on(nt.openFileSuccess,i),this.eventEmitter.on(nt.progressChanged,r),this.addDestroyHook((()=>{this.annotationAuthorityManager.destroy(),this.eventEmitter.off(nt.openFileSuccess,i),this.eventEmitter.off(nt.progressChanged,r)}));const s=()=>{clearTimeout(o),o=setTimeout((()=>{const t=this.getAllActiveElements();if(!t.length)return;const e=this.stateHandlerManager.currentStateHandler.getStateName();if(e!==un&&e!=Re&&Object.keys(Pn).indexOf(e)<0&&Object.keys(Sn).indexOf(e)<0)return;const n=!t.find((t=>{const e=t.annot;if(!e)return!1;const n=e.getType();let i=!!e.isArea&&e.isArea();return"highlight"===n&&!i||"strikeout"===n||"underline"===n||"squiggly"===n||"caret"===n}));t.forEach((t=>{const e=t.shapeControl;e&&e.moveEnable&&e.moveDisable&&(n&&e.moveable?e.moveEnable():e.moveDisable())}))}),0)};this.eventEmitter.on(nt.activeElementChanged,s),this.addDestroyHook((()=>this.eventEmitter.off(nt.activeElementChanged,s)));let a=this.getScrollWrap().getScrollHost();((0,_.isWindowObject)(a)||(0,_.isDocument)(a))&&(a=document.body),this.addDestroyHook((0,_.observeResize)(a,(0,_.debounce)((()=>{this.getCurrentPDFDoc()&&this.eventEmitter.emit(nt.fitWidthResizeViewport)}))))},n.setAnnotPermissionCallback=function(t){this.customs.getAnnotPermissions=t,this.annotationAuthorityManager.setAnnotPermissionCallback(t)},n.getCollaboration=function(){return this._collaborationDefer.promise},n.getAnnotAuthorityManager=function(){return this.annotationAuthorityManager},n.getActionCallbackManager=function(){return this.actionCallbackManager},n.collaborate=function(t,e){return this.getCollaboration().then((n=>{if(!n)return;let i;return i="function"==typeof e?Promise.resolve(e()):Promise.resolve(e),i.then((e=>n.send({action:t,data:e})))}))},n.initCollaboration=function(){const t=new Fb(this,this.collaborationOptions);t.registerBuiltInHandler(Ob),t.registerBuiltInHandler(kb),t.registerBuiltInHandler(Mb),t.registerBuiltInHandler(Jb),t.registerBuiltInHandler($b),t.registerBuiltInHandler(Wb),t.registerBuiltInHandler(Yb),t.registerBuiltInHandler(Zb),t.registerBuiltInHandler(Gb),t.registerBuiltInHandler(Xb),t.registerBuiltInHandler(jb),t.registerBuiltInHandler(Vb),t.registerBuiltInHandler(Ub),t.registerBuiltInHandler(Hb),t.registerBuiltInHandler(bA),this.addDestroyHook((()=>{t.destroy()})),t.prepare(),this._collaborationDefer.resolve(t)},n.redraw=function(t){return this.pdfViewerRender&&this.pdfViewerRender.pdfDocRender?(this.redrawTask||Promise.resolve()).then((e=>{const n=this.pdfViewerRender.pdfDocRender;try{let e=n.pagesRender;if(!e)return Promise.resolve(!1);t&&e.setRenderFlags(7);let i=[],r=arguments[1];return void 0===r&&(r=!0),r?(this.getScrollWrap().disable(1),i.push(this.zoomTo(e.scale,null,0))):i.push(e.renderVisiblePages()),this.redrawTask=Promise.all(i).then((t=>{this.getScrollWrap().disable(0)})).finally((()=>{delete this.redrawTask}))}catch(t){return Promise.reject(t)}})):Promise.resolve(!1)},n.redrawContent=function(){if(!this.pdfViewerRender||!this.pdfViewerRender.pdfDocRender)return Promise.resolve(!1);try{let t=this.pdfViewerRender.pdfDocRender.pagesRender;return t.setRenderFlags(2),t.renderVisiblePages()}catch(t){return Promise.reject(t)}},n.rotateTo=function(t,e){return(0,_.assertThat)((0,_.isValidRotationAngle)(t),`Incorrect rotation degree: ${t}, It should be 0, 90, 180 or 270`),this.pdfViewerRender.rotateTo(t,e)},n.getRotation=function(){return this.pdfViewerRender.getRotation()},n.getScrollWrap=function(){return this.pdfViewerRender.scrollWrap},n.openPDFByFile=function(t,e={},n=this.pdfEngine){e.isOpenNewFileAfterClose&&this.currentPDFDoc&&this.currentPDFDoc.otherOptions&&(this.currentPDFDoc.otherOptions.isOpenNewFileAfterClose=!0);const i={...yP,...e};return this.openFileOptions=i,t.name&&!i.fileName&&(i.fileName=t.name),void 0===i.isRenderOnDocLoaded&&(i.isRenderOnDocLoaded=!0),"function"!=typeof i.beforeRenderPDFDoc&&(i.beforeRenderPDFDoc=this.customs.beforeRenderPDFDoc),this.close().then((()=>{const e=this.resourceGenerator(Gd.PDF_DOCUMENT_CLOSING,Kd.OBJECT_URL),{URL:i}=e.expose();let r;return this.eventEmitter.emit(nt.beforeOpenFile,i.createObjectURL(new Blob([t],{type:"application/pdf"}))),r=n?Promise.resolve(n):this.getWebPDFJR(),r}),(t=>(_.LoggerFactory.getLogger("PDFViewer").warn("An error occurred while opening a pdf file: ",t),Promise.reject({error:-3})))).then((e=>{this.eventEmitter.emit(nt.beforeLoadPDFDoc,"memory",t,i,n);let r=e.getPDFDocByFile(t,i);return i.isRenderOnDocLoaded&&this.pdfViewerRender.rendering(),r})).then((e=>this._reopenPDFDoc(e,i,{type:xb.FROM_FILE,fileName:i.fileName,file:t,options:i})),(t=>(this.eventEmitter.emit(nt.openFileFailed,t),Promise.reject(t)))).finally((()=>{i.isRenderOnDocLoaded&&this.pdfViewerRender.rendered()}))},n.openPDFByHttpRangeRequest=function(t,e={fileName:""},n=this.pdfEngine){const i={...yP,...e};this.openFileOptions=i;const r=t.range.url;if(!i.fileName&&r.endsWith(".pdf")){let t=r.lastIndexOf("/"),e=r.substring(t+1);e=decodeURIComponent(e),i.fileName=e}if(void 0===i.isRenderOnDocLoaded&&(i.isRenderOnDocLoaded=!0),"function"!=typeof i.beforeRenderPDFDoc&&(i.beforeRenderPDFDoc=this.customs.beforeRenderPDFDoc),!ia(r)){const e=Js();t.range.url=Xs(e).join(r).absolute()}return this.close().then((()=>{let t;return this.eventEmitter.emit(nt.beforeOpenFile,r),t=n?Promise.resolve(n):this.getWebPDFJR(),i.isRenderOnDocLoaded&&this.pdfViewerRender.rendering(),t}),(t=>{throw t})).then((e=>(this.eventEmitter.emit(nt.beforeLoadPDFDoc,"http",t,i,n),e.getPDFDocByHttpRangeRequest(t,i)))).then((e=>this._reopenPDFDoc(e,i,{type:xb.FROM_URL,range:t.range,size:t.size,options:i})),(t=>{throw this.eventEmitter.emit(nt.openFileFailed,t),t})).finally((()=>{i.isRenderOnDocLoaded&&this.pdfViewerRender&&this.pdfViewerRender.rendered()}))},n.getPDFDocByFileNoOpen=async function(t){const e=await this.getWebPDFJR(),n=await e.getPDFDocByFile(t);return await(async(t,e="",n={})=>{try{return await t.parse({...n,password:e}),t}catch(t){return t}})(n)},n.openPDFById=function(t,e={fileName:""}){return void 0===e.isRenderOnDocLoaded&&(e.isRenderOnDocLoaded=!0),this.close().then((()=>{let t;return this.eventEmitter.emit(nt.beforeOpenFile),t=this.getWebPDFSR(),e.isRenderOnDocLoaded&&this.pdfViewerRender.rendering(),t}),(t=>{throw t})).then((function(t){return Promise.all([t,AP(e)])})).then((([n,i])=>(e.idJWT=i||e.jwt,this.eventEmitter.emit(nt.beforeLoadPDFDoc,"id",t,e),n.getPDFDocById(t,e)))).then((t=>this._reopenPDFDoc(t,e)),(t=>(this.eventEmitter.emit(nt.openFileFailed,t),Promise.reject(t)))).finally((()=>{e.isRenderOnDocLoaded&&this.pdfViewerRender.rendered()}))},n.openPDFByExistsDocId=async function(t,e={fileName:""}){const n=await this.getWebPDFJR(),i=await n.getPDFDocById(t),r=await i.getDocBuffer(this),o=new Blob(r),s=new File([o],`${e.fileName}`,{type:"application/pdf"});return this.openPDFByFile(s,e)},n.createNewDoc=function(t="untitled.pdf",e="",n={height:842,width:595},i={isRenderOnDocLoaded:!0},r=this.pdfEngine){void 0===i.isRenderOnDocLoaded&&(i.isRenderOnDocLoaded=!0);const o={...yP,...i};return this.openFileOptions=o,this.close().then((()=>{let t;return t=r?Promise.resolve(r):this.getWebPDFJR(),t}),(t=>(t||(t=new Error("An unknown error occurred while closing the current opening document!")),t.error=-3,Promise.reject(t)))).then((i=>i.createNewDoc(t,e,n))).then((e=>{i.password=st.EMPTY_STR,i.fileName=t;const n=[];return e.getStream((function(t){n.push(t)})).then((()=>this.reopenPDFDoc(e,i,{type:xb.FROM_FILE,options:i,file:new Blob(n,{type:"application/pdf"})})))}))},n.loadPDFDocByFile=function(t,e={}){return this.getPDFDocParserService().loadPDFDocByFile(t,e)},n.loadPDFDocByHttpRangeRequest=function(t,e={}){return this.getPDFDocParserService().loadPDFDocByHttpRangeRequest(t,e)},n.createNewPortfolioDoc=function(t,e,n="Portfolio.pdf"){return this.close().then((()=>{let t;return t=this.pdfEngine?Promise.resolve(this.pdfEngine):this.getWebPDFJR(),t}),(t=>(t||(t=new Error("An unknown error occurred while closing the current opening document!")),t.error=-3,Promise.reject(t)))).then((i=>i.createNewPortfolioDoc(t,e,n))).then((t=>{const e={isRenderOnDocLoaded:!0,password:"",fileName:n},i=[];return t.getStream((t=>{i.push(t)})).then((()=>this.reopenPDFDoc(t,e,{type:xb.FROM_FILE,options:e,file:new Blob(i,{type:"application/pdf"})})))}))},n.convertImageToPDFDoc=function(t,e,n="untitled.pdf",i="",r={},o=this.pdfEngine){let s=[],a=null,c=t instanceof ArrayBuffer,l=null;return new Promise((function(n,i){var r=new Image;if(r.onload=function(){const t=(0,_.getDPI)(),e=r.width/t.x*72,i=r.height/t.y*72;s=[e,i],n(s)},r.onerror=function(){i(new Error("The input file could not be loaded as an supported image."))},c){var o=new Blob([t]);r.src=l=URL.createObjectURL(o)}else r.src=t?l=URL.createObjectURL(t):e})).then((t=>this.createNewDoc(n,i,{height:t[1],width:t[0]},{isRenderOnDocLoaded:!1},this.pdfEngine))).then((t=>(a=t,a.getPageByIndex(0)))).then((n=>{let i=c?Promise.resolve(t):Gs(t?l:e);return Promise.all([Promise.resolve(n),i])})).then((([t,e])=>{l&&URL.revokeObjectURL(l);let n={left:0,top:s[1],right:s[0],bottom:0};return t.addImage(e,n)})).then((t=>{if(t)return a;throw new Error("faied to insert image")})).catch((t=>(this.eventEmitter.emit(nt.openFileFailed,null),t&&console.error(t),Promise.reject(t))))},n.getPDFDocFromImageFile=function(t,e,n="untitled.pdf",i=""){let r=[],o=null,s=t instanceof ArrayBuffer,a=null;return new Promise((function(n,i){var o=new Image;if(o.onload=function(){const t=(0,_.getDPI)(),e=o.width/t.x*72,i=o.height/t.y*72;r=[e,i],n(r)},o.onerror=function(){i(new Error("The input file could not be loaded as an supported image."))},s){var c=new Blob([t]);o.src=a=URL.createObjectURL(c)}else o.src=t?a=URL.createObjectURL(t):e})).then((t=>this.pdfEngine.then((e=>e.createNewDoc(n,i,{height:t[1],width:t[0]}))))).then((t=>(o=t,o.getPageByIndex(0)))).then((n=>{let i=s?Promise.resolve(t):Gs(t?a:e);return Promise.all([Promise.resolve(n),i])})).then((([t,e])=>{a&&URL.revokeObjectURL(a);let n={left:0,top:r[1],right:r[0],bottom:0};return t.addImage(e,n)})).then((t=>{if(t)return o;throw new Error("faied to insert image")})).catch((t=>(t&&console.error(t),Promise.reject(t))))},n.renderDoc=function(t,e=this.config.defaultScale){if(this.pdfViewerRender.pdfDocRender){let e=this.pdfViewerRender.pdfDocRender.pagesRender;if(t==this.currentPDFDoc&&e&&e.isPageDOMsLoaded)return Promise.resolve(!0)}return this.pdfViewerRender.rendering(),this.pdfViewerRender.renderDoc(t,e).then((()=>{const e=[];return t.getStream((function(t){e.push(t)})).then((()=>{const n=e.sort(((t,e)=>t.offset>e.offset?0:-1)).map((t=>t.arrayBuffer));return this.eventEmitter.emit(nt.openFileSuccess,t,{type:xb.FROM_FILE,options:{fileName:t.info.fileName},file:new Blob(n,{type:"application/pdf"})}),this.eventEmitter.emit(nt.renderFileSuccess,t),!0}))}),(e=>(this.eventEmitter.emit(nt.renderFileFailed,t),e||(e=new Error("An unknown error occurred while closing the current opening document!")),e.error=-3,Promise.reject(e)))).finally((()=>{this.pdfViewerRender.rendered()}))},n.reopenPDFDoc=function(t,e={}){const n=y({},e),i=arguments[2];return this.eventEmitter.emit(nt.beforeOpenFile),void 0===n.isRenderOnDocLoaded&&(n.isRenderOnDocLoaded=!0),this._reopenPDFDoc(t,n,i)},n._reopenPDFDoc=function(t,e={},n){this.startListenAnnotMouseEvent();let i=!1,r=!1,o=!1!==e.isRenderOnDocLoaded,s=e.beforeRenderPDFDoc;if("function"!=typeof s){const t=this.customs.beforeRenderPDFDoc;s="function"!=typeof t?dP:t}return s!==dP&&(o=!0),Promise.resolve(AP(e)).then((n=>(e.idJWT=n||e.jwt,t.parse(e)))).then((t=>{const e=t.getPageCount();let a=e<2;if(a=a||e>=500,a&&this.viewModeManager.get(vo.getName()))this.viewModeManager.switchTo(vo.getName());else{const t=this.viewModeManager.get(this.config.defaultViewMode);this.viewModeManager.switchTo(t.getName())}this.currentPDFDoc=t,i=!0;var c=[t];if(o){this.eventEmitter.once(nt.renderPageSuccess,(function(){r=!0}));const e=Promise.resolve(s.call(this,t)).then((()=>{const e=this.pdfViewerRender.renderDoc(t);return this.eventEmitter.emit(nt.openFileSuccess,t,n),e}));c.push(e)}return Promise.all(c)}),(e=>{this.currentPDFDoc=null;let n={error:e&&e.code,pdfDoc:t,encryptDict:e&&e.encryptDict};return this.eventEmitter.emit(nt.openFileFailed,n),Promise.reject(n)})).then((([t])=>{if(this.mixPdfJREngine){let n;return this.mixPdfJREngine.then((e=>(n=e,t.resetEngineInstance(e)))).then((t=>(this.pdfEngine=n,delete this.mixPdfJREngine,this.eventEmitter.emit(nt.toggleEngineSr2JrSuccess,t),o&&this.eventEmitter.emit(nt.renderFileSuccess,t),t)),(t=>(n&&(this.pdfEngine=n),e.isRenderOnDocLoaded&&this.eventEmitter.emit(nt.renderFileSuccess,t),t)))}return o&&this.eventEmitter.emit(nt.renderFileSuccess,t),t}),(e=>{if(i&&r)return this.eventEmitter.emit(nt.renderFileSuccess,t),t;o&&this.eventEmitter.emit(nt.renderFileFailed,t);let n={error:-1,pdfDoc:t};try{const i="number";let r,o;typeof e===i?r=e:typeof e.error===i?(r=e.error,o=e.encryptDict):r=e,n={error:r,pdfDoc:t,encryptDict:o}}catch(t){}return Promise.reject(n)}))},n.close=async function(t=this.customs.closeDocBefore,e=this.customs.closeDocAfter,n={}){if(this.stopListenAnnotMouseEvent(),!this.currentPDFDoc)return Promise.resolve();const i=y({},this.openFileOptions,n);return await this.JSEngine.waitForExecutionTask(),Promise.resolve(t(this.currentPDFDoc,i)).then((t=>{if(!1===t)return Promise.reject("Document cannot be closed because it was rejected by the before callback");this.stopFormDesginerAssist(),this.activationManager.clear(),this.eventEmitter.emit(nt.willCloseDocument,this.currentPDFDoc),this.currentPDFDoc=null;const e=this.pdfViewerRender.closeOldDocRender(i);let n;try{n=this.pdfViewerRender.pdfDocRender}catch(t){}return n?(n.hidden(),e.then((t=>this.pdfViewerRender.closeOldDocRender(i)))):e})).then((t=>{if(!1!==t)return e()}))},n.destroy=async function(){if(this.isDestroyed)return Promise.resolve();try{if(await this.close(),await this.JSEngine.destroy(),t.prototype.destroy.call(this),this.initializers&&this.initializers.forEach((t=>t.destroy())),this.keyboard.destroy(),this.stopListenAnnotMouseEvent(),this.viewerUI.destroy(),this.viewerUI=null,this.pdfViewerRender&&(this.pdfViewerRender.destroy(),this.pdfViewerRender=null),this.pdfEngine){let t=this.webPDFJR;try{t=await this.pdfEngine}catch(t){0}t&&t.api&&t.api.workerPromise&&t.api.workerPromise.destroy()}this.store.destroy();const e=this.getStorage();try{await e.destroy()}catch(t){console.error("destroy storage error",t)}this.eventEmitter.removeAllListeners(),this.ioc.destroy()}catch(t){throw t}},n.zoomTo=function(t,e){if("number"==typeof t){if(t<this.config.minScale)throw new Error(`scale must be greater than minimum scale: ${this.config.minScale}, which is specified in the PDFViewer constructor parameters`);if(t>this.config.maxScale)throw new Error(`scale must be less than or equal to maximum scale: ${this.config.maxScale}, which is specified in the PDFViewer constructor parameters`)}try{let n=arguments[2];return void 0===n&&(n=1),n&&this.activeElement(),"pencilStateHandler"==this.getStateHandlerManager().currentStateHandler.getStateName()&&this.stateHandlerManager.switchTo(),this.pdfViewerRender.zoomTo(t,e)}catch(t){return Promise.reject(t)}},n.zoomAtPosition=function(t,e){if("number"==typeof t){if(t<this.config.minScale)throw new Error(`scale must be greater than minimum scale: ${this.config.minScale}, which is specified in the PDFViewer constructor parameters`);if(t>this.config.maxScale)throw new Error(`scale must be greater than maximum scale: ${this.config.maxScale}, which is specified in the PDFViewer constructor parameters`)}return this.activeElement(),this.pdfViewerRender?(this.getScrollWrap().disable(1),clearTimeout(this.updateTask),this.updateTask=setTimeout((()=>{this.getScrollWrap().disable(0),this.getPDFDocRender().move()}),200),this.pdfViewerRender.zoomAt(t,e)):Promise.resolve()},n.zoom=function(t=.25){try{return this.pdfViewerRender.getScaleRatio().then((e=>{const n=this.config.minScale,i=this.config.maxScale;e===n&&Math.floor(n/t)!==n/t&&(e=Math.floor(e/t)*t);let r=Math.max(n,Math.min(i,e+t));return r=n+Math.round((r-n)/t)*t,r=Math.max(n,Math.min(i,r)),this.zoomTo(r)}))}catch(t){return Promise.reject(t)}},n.goToPage=function(t,e,n,i=!0){if(!this.pdfViewerRender)return Promise.reject("PDFViewer has not been initialized completely!");const r=this.getPDFPageRender(t);return r?i&&"number"!=typeof e?r.getPDFPage().then((r=>(e=r.getHeight(),this.pdfViewerRender.goToPage(t,e,n,i)))):this.pdfViewerRender.goToPage(t,e,n,i):Promise.reject(`The page with index "${t}" does not exists or the document has not been opened!`)},n.setLayerNodeVisible=function(t,e){return this.pdfViewerRender&&this.pdfViewerRender.setLayerNodeVisible(t,e)},n.setEnableJS=function(t){this.JSEngine.setEnableJS(t,this.currentPDFDoc),this.eventEmitter.emit(nt.changeEnableJS,t)},n.getEnableJS=function(){return this.JSEngine.getEnableJS()},n.setContinuousAddPencilState=function(t){this.continuousAddPencil=t},n.setEnableOpenAction=function(t){this.enableOpenAction=t},n.setEnablePageAction=function(t){this.enablePageAction=t},n.setEnableScroll=function(t){this.enableScroll=t;const e=this.getScrollWrap().scrollHost;let n=e;(0,_.isWindowObject)(e)&&(n=this.$ui[0].ownerDocument.body),t?n.classList.remove("disabled-scroll"):n.classList.add("disabled-scroll")},n.getEnableScroll=function(){return"boolean"!=typeof this.enableScroll||this.enableScroll},n.setEnableScale=function(t){this.enableScale=t},n.getEnableScale=function(){return"boolean"!=typeof this.enableScale||this.enableScale},n.setSafeReadingMode=function(t){this.config.enableSafeMode=t},n.getSafeReadingMode=function(){return this.config.enableSafeMode},n.getSmartScale=function(t){let e=this.config,n=e.scaleFrequency;return 0===n?t*=_.dpr:t=Math.ceil(t*_.dpr*n)/n,Math.min(Math.max(t,e.minScale*_.dpr),e.maxScale*_.dpr)},n.controlStateSwitch=function(t){this.pdfViewerRender&&this.pdfViewerRender.controlStateSwitch(t)},n.getStateHandlerManager=function(){return this.stateHandlerManager},n.getInkSignManager=function(){return this.inkSignManager},n.getOnlineSignManger=function(){return this.onlineSignManager},n.getViewModeManager=function(){return this.viewModeManager},n.getMementoManager=function(){return this.mementoManager},n.getEventEmitter=function(){return this.eventEmitter},n.addEventListener=function(t,e){const n={};if(Array.isArray(t))t.forEach((t=>{n[t]=e}));else if(t&&"object"==typeof t)Object.keys(t).forEach((e=>{o(t[e]),n[e]=t[e]}));else{if("string"!=typeof t)throw new Error("Incorrect arguments: the arguments of addEventListener must be (string, Function) or (Record<string, Function>) or (Array<string, Function)");o(e),n[t]=e}const i=this.eventEmitter;for(const t in n)i.on(t,n[t]);let r=()=>{for(const t in n)i.off(t,n[t])};return()=>{r(),r=dP};function o(t){if("function"!=typeof t)throw new Error("Illegal argument! Event listener should be a function, but actual: "+typeof t)}},n.getCurrentPDFDoc=function(){return this.currentPDFDoc},n.getPDFViewerRender=function(){try{return this.pdfViewerRender}catch(t){return null}},n.getDeviceCurrentPosition=function(){const t=this.getPDFDocRender(),e=this.getPDFViewerRender(),n=e.getViewMode(),i=t.getViewMode();let r=t.viewerRender.scrollWrap;const o=r.getScrollTop(),s=r.getScrollLeft(),a=i.getCurrentPageIndex();if("single-page-view-mode"===n.getName()){let n=e.$ui.parent()[0].getBoundingClientRect();const i=t.getPDFPageRender(a).$ui.get(0).getBoundingClientRect();return{pageIndex:a,left:n.left-i.left,top:n.top-i.top}}let c=t.$container.find(".fv__pdf-view-mode-item"),l=0,h=0;for(let t=0;t<c.length;t++){let e=c[t],n=D()(e).find(".fv__pdf-page-layout"),i=n.width(),r=n.height(),a=e.offsetTop,u=a+r,d=e.offsetLeft;if(u>o&&d+i>s){h=o-a,l=s-d;break}}return{pageIndex:a,left:l,top:h}},n.getPDFDocRender=function(){try{return this.pdfViewerRender.pdfDocRender||null}catch(t){return null}},n.getPDFPageRender=function(t){try{return this.pdfViewerRender.pdfDocRender.getPDFPageRender(t)||null}catch(t){return null}},n.getAnnotRender=function(t,e){try{return this.getPDFPageRender(t).getAnnotRender(e)||null}catch(t){return null}},n.getPDFPageRenderAsync=function(t){try{return this.pdfViewerRender.pdfDocRender.getPDFPageRender(t)}catch(t){return null}},n.getAnnotRenderAsync=function(t,e){try{return this.getPDFPageRenderAsync(t).getAnnotRender(e)}catch(t){return null}},n.killFocus=function(){return Promise.resolve(this.activeElement()||!0)},n.isMultiSelectActive=function(){const t=this.stateHandlerManager.currentStateHandler.getStateName();return(_.isMac?_.keyboardStatus.isWinDown:_.keyboardStatus.isCtrlDown)&&(t===Re||t===un||Object.keys(Pn).indexOf(t)>=0||Object.keys(Sn).indexOf(t)>=0)||_.keyboardStatus.isShiftDown&&(t===Re||t===un)},n.bindMultiSelectActiveEvents=function(t){const e=t=>{if(t&&!t.multiSelectEventBindInitialized&&(t.multiSelectEventBindInitialized=!0,t.shapeControl)){const e=t.shapeControl,{onPrestart:n,onAfterEnd:i}=e;e.onPrestart=(t,i,r)=>{this.activationManager.getAllCurrentActivatables().forEach((t=>{if(!t.shapeControl||t.shapeControl.isDisabled)return;let{isCollaborationMode:n=dP,isAnnotOwner:i=dP}=this.customs;n()&&!i(t.annot.getName())||e.companion(t.shapeControl)})),n&&n(t,i,r)},e.onAfterEnd=t=>{e.clearCompanions(),i&&i(t)}}};if(t instanceof Y){t.getAllActivations().forEach((t=>e(t)))}else e(t)},n.activePageElementByRect=function(t,e){t.right<=t.left||t.top<=t.bottom||!e||e.getAnnots().then(((e=[])=>{if(!e.length)return;const n=new Y;let i=[],r=[];const o={},s=[];e.forEach((t=>{if(t.isGrouped&&t.isGrouped()){const e=t.getGroupHeader(),n=e.id;return o[n]||s.push(e),void(o[n]=e)}"popup"==t.getType()||"watermark"==t.getType()||"R"==t.info.RT&&t.info.IRT||s.push(t)})),s.reverse().forEach((e=>{if(!i.find((t=>t===e))){const{left:o,right:s,top:a,bottom:c}=e.info.rect;if(o>=t.left&&o<=t.right&&a>=t.bottom&&a<=t.top||o>=t.left&&o<=t.right&&c>=t.bottom&&c<=t.top||s>=t.left&&s<=t.right&&a>=t.bottom&&a<=t.top||s>=t.left&&s<=t.right&&c>=t.bottom&&c<=t.top)if(e.isGrouped&&e.isGrouped()){const t=e.getGroupElements()||[];if(t.length){const e=new Y;t.forEach((t=>{const n=this.getAnnotRender(t.getPDFPage().getIndex(),t.getId()).component;n&&e.add(n)})),n.add(e),i=[].concat(hP(w.Z,i),hP(w.Z,t))}}else if("widget"===e.getType())r.push(e);else{const t=this.getAnnotRender(e.getPDFPage().getIndex(),e.getId()).component;t&&n.add(t)}}})),r.length?this.eventEmitter.emit("active-widgets-for-multi-select",{widgets:r,activationGroup:n}):(this.bindMultiSelectActiveEvents(n),this.activationManager.active(n),this.getPDFDocRender().setCurrentAnnotHandler(),this.eventEmitter.emit(nt.activeElementChanged))}))},n.activateElement=function(t){return this.activeElement(t)},n.activeElement=function(t,e=!0){if(!t){var n,i;if(null==(n=this.getPDFDocRender())||null==(i=n.formRender)||i.blurControl(),!this.activationManager.hasActivations())return;return this.activationManager.unActiveCurrent(),void(e&&this.eventEmitter.emit(nt.activeElementChanged))}if(this.bindMultiSelectActiveEvents(t),this.isMultiSelectActive()){const e=this.activationManager.getCurrentActivatable();let n;if(e){const i=(e.activations||[])[0];i&&i.annot&&i.annot.page.getIndex()!==(t instanceof Y?t.getAllActivations()[0]:t).annot.page.getIndex()&&this.activationManager.unActiveCurrent(),this.bindMultiSelectActiveEvents(e),e.add(t),n=e}else{const e=new Y;e.add(t),n=e}if(_.keyboardStatus.isShiftDown){const e=n.getAllActivations();let i=Number.MAX_VALUE,r=-Number.MAX_VALUE,o=-Number.MAX_VALUE,s=Number.MAX_VALUE;e.forEach((t=>{const{left:e,right:n,top:a,bottom:c}=t.annot.info.rect;i=Math.min(i,e),r=Math.max(r,n),o=Math.max(o,a),s=Math.min(s,c)}));const a={left:i,right:r,top:o,bottom:s};if(this.multiSelectActiveShiftHandlerFlag===`${JSON.stringify(a)}_${e.length}`)return;this.multiSelectActiveShiftHandlerFlag=`${JSON.stringify(a)}_${e.length}`;const c=t instanceof Y?t.getAllActivations()[0]:t;this.activePageElementByRect(a,c.annot.page)}else this.activationManager.active(n),this.getPDFDocRender().setCurrentAnnotHandler(),this.eventEmitter.emit(nt.activeElementChanged)}else{let e;if(t instanceof Y)e=t;else{const n=new Y;n.add(t),e=n}this.activationManager.active(e),this.getPDFDocRender().setCurrentAnnotHandler(),this.eventEmitter.emit(nt.activeElementChanged,t)}},n.clearMultiSelectActiveFlag=function(){this.multiSelectActiveShiftHandlerFlag=""},n.deactivateElement=function(t){return this.unActiveElement(t)},n.unActiveElement=function(t,e=!0){if(t&&t.annot&&t.annot.isGrouped&&t.annot.isGrouped()){const e=this.activationManager.getCurrentActivatable();if(!(e&&e instanceof Y))return;const n=e.activations||[];for(let e=n.length;e--;){const i=n[e];if(i instanceof Y&&i.contains(t)||i===t){this.activationManager.unActive(n[e]);break}}}else this.activationManager.unActive(t);e&&this.eventEmitter.emit(nt.activeElementChanged)},n.getCurrentActivatable=function(){const t=this.activationManager.getCurrentActivatable();if(!t||t.isActive)return t},n.getAllActivatedElements=function(){return this.getAllActiveElements()},n.getAllActiveElements=function(){return this.activationManager.getAllCurrentActivatables()},n.getAnnotManager=function(){return this.annotManager},n.registerMatchRule=function(t){this.annotManager.registerMatchRule(t)},n.setUserConfig=function(t,e=this.pdfEngine){let n;return n=e?Promise.resolve(e):this.getWebPDFJR(),n.then((e=>e.setUserConfig(t)))},n.setUserName=function(t,e=this.pdfEngine){let n;return n=e?Promise.resolve(e):this.getWebPDFJR(),n.then((e=>e.setUserName(t)))},n.getUserName=function(t=this.pdfEngine){let e;return e=t?Promise.resolve(t):this.getWebPDFJR(),e.then((t=>t.getUserName()))},n.setFormatOfDynamicStamp=function(t,e){return this.getWebPDFJR().then((n=>n.setDynamicInfoFormula(t,e)))},n.getFormatOfDynamicStamp=function(){return this.getWebPDFJR().then((t=>t.getDynamicInfoFormula()))},n.registerPrintHandler=function(t){if("function"!=typeof t)throw new TypeError("Callback type error");this.printHandler=t},n.printByProgress=function(t,e,n,i,r,o,s,a,c,l){const h=this;let u,d,f;return c||(d=this.pdfViewerRender.pdfDocRender,f=d.getFormRender(),u=f.getFormatedData("display")),(e.AdditionalActions?Promise.resolve():e.loadAdditionalActions()).then((t=>c?Promise.resolve():(d.performAction(5),this.eventEmitter.emit(nt.documentWillPrint),e.PDFForm.addTask()))).then((t=>c?Promise.resolve():e.getPDFForm().setFieldsValue(u,!0))).then((()=>(i({state:"start",total:t.length}),t.reduce((function(e,n){let o=n;return("object"==typeof n&&void 0!==n.rect||"object"==typeof n)&&(o=n.pageIndex),e.then((function(t){return Promise.all([p(n),t])})).then((function([e,n]){return i({state:"progress",pageIndex:o,total:t.length,imageURI:e}),e?Promise.all([n,e,r.appendImage(o,e)]):Promise.resolve([n])})).then((function([t,e]){return e&&t.push({pageIndex:o,imageURI:e}),t}))}),Promise.resolve([]))))).then((t=>{if(c)return Promise.resolve(t);if(f){const n=f.getFormatedData("value");return e.getPDFForm().setFieldsValue(n,!1).then((e=>t))}return t})).then((e=>{const n=e.reduce(((t,{pageIndex:e,imageURI:n})=>(t[e]=n,t)),{});if(i({state:"end",total:t.length,result:n}),c){let t=r.getImageCache();a.push.apply(a,hP(w.Z,t)),r.clearImageCache()}else r.print(!l),d.performAction(6);return this.eventEmitter.emit(nt.documentDidPrint),n}));function p(t){let i=void 0!==t.pageIndex?t.pageIndex:t;return e.getPageByIndex(i).then((e=>{if(e.isVirtual())return;let r=0,a=0,c=0,l=0,u=0;if(void 0!==t.pageIndex){const n=h.getPDFPageRender(i),{rect:o}=t;let s=e.reverseDeviceRect({top:o.y,bottom:o.y+o.height,left:o.x,right:o.x+o.width},n.getScale(),n.getRotation());s=e.getDeviceRect(s),r=s.left,a=s.top,c=(s.right-s.left)*(3/4),l=(s.bottom-s.top)*(3/4)}else if("number"==typeof t)if(c=e.getWidth(),l=e.getHeight(),c>l){u=90;let t=c;c=l,l=t}else u=0;const d=4*o/300;return e.getPageBitmap(d,u,{x:r*(o/100),y:a*(o/100),width:c*d,height:l*d},s,"print").then((({buffer:t,width:i,height:r,image:o})=>{if(o)return n.createObjectURL(o);const s=document.createElement("canvas"),a=e.getWidth()*d,c=r*e.getWidth()*d/i;s.width=a,s.height=c;const l=s.getContext("2d"),h=l.createImageData(i,r);h.data.set(new(Uint8ClampedArray||Uint8Array)(t)),l.putImageData(h,0,0),l.drawImage(l.canvas,0,0,i,r,0,0,a,c);const u=(0,_.createDeferred)();try{s.toBlob((t=>{u.resolve(n.createObjectURL(t))}),"image/png")}catch(t){u.reject(t)}return u.promise}))}))}},n.print=async function({isPortfolio:t,rangeType:e,pages:n=[],printType:i=["page"],progress:r,printer:o,showHeaderFooter:s=this.getPrintSetting("showHeaderFooter"),quality:a=this.getPrintSetting("quality")||100},c=dP){const l=this.currentPDFDoc;if(!l.checkPermission(pe.print||pe.printHigh))throw new Error("Permission denied!");const h="object"==typeof r,u=void 0===r||!0===r,d=this.resourceGenerator(Gd.PDF_DOCUMENT_CLOSING,Kd.OBJECT_URL),{URL:f}=d.expose(),p=c;let g=0;c=t=>{switch(t.state){case"start":h?(r.show(),r.updateProgress({current:0,total:t.total},Zm.PROGRESSING)):u&&this.eventEmitter.emit(nt.progressChanged,"print",{current:0,total:t.total},Zm.PROGRESSING);break;case"progress":h?r.updateProgress({current:g++,total:t.total},Zm.PROGRESSING):u&&this.eventEmitter.emit(nt.progressChanged,"print",{current:g++,total:t.total},Zm.PROGRESSING);break;case"end":h?(r.updateProgress({current:g++,total:t.total},Zm.SUCCESS),setTimeout((()=>{r.hide()}),0)):u&&this.eventEmitter.emit(nt.progressChanged,"print",{current:g++,total:t.total},Zm.SUCCESS),g=0}p(t)},o||(o=this.printer||(this.printer=new db));let m=this.currentPDFDoc.pdfPortfolio&&t?this.currentPDFDoc.pdfPortfolio.root.nodeHandle:"";if(m&&t){let t,n;if("allPDF"==e)t=await this.currentPDFDoc.pdfPortfolio.getFolioNodePDFDoc();else if("selectedPDF"==e){t=await this.currentPDFDoc.pdfPortfolio.getActivedPDFFileByPortFolioNode()}let r=[];for(let e in t){await t[e].parse(),n=t[e].getPageCount();let l=[];for(let t=0;t<n;t++)l.push(t);let h=t[e];await this.printByProgress(l,h,f,c,o,a,i,r,m,s)}o.print(!s,r)}else await this.printByProgress(n,l,f,c,o,a,i,[],m,s)},n.printCurrentView=function(){const t=this.getPDFDocRender().getBoundingClientRects();if(t.length>1)return;const e=t.map((t=>({rect:{x:t.x,y:t.y,width:t.width,height:t.height},pageIndex:t.index})));this.print({pages:e,printType:["page","annot"]})},n.printEx=function({type:t,pageRange:e,progress:n},i=dP){const r=this.currentPDFDoc;if(!r.checkPermission(pe.print||pe.printHigh))throw new Error("Permission denied!");const o="object"==typeof n,s=void 0===n||!0===n,a=i;i=t=>{switch(t.state){case"start":o?(n.show(),n.updateProgress(0,Zm.PROGRESSING)):s&&this.eventEmitter.emit(nt.progressChanged,"printEx",0,Zm.PROGRESSING);break;case"progress":o?n.updateProgress(t.progress,Zm.PROGRESSING):s&&this.eventEmitter.emit(nt.progressChanged,"printEx",t.progress,Zm.PROGRESSING);break;case"end":o?(n.updateProgress(t.progress,Zm.SUCCESS),setTimeout((()=>{n.hide()}),0)):s&&this.eventEmitter.emit(nt.progressChanged,"printEx",t.progress,Zm.SUCCESS)}a(t)};let c=r.getPageCount();const l=this.viewerUI;let h=function(t,e){let n=function(t,e){const n=[];let i=t,r=new RegExp(/[^\d\-,]/);if(r.test(i))return void(t=i.slice(0,i.length-1));if(r=new RegExp(/[^\d]/),r.test(i.substr(0,1)))return void(t=i.slice(0,i.length-1));let o=i.split(",");for(let r=0;r<o.length;r++){let s=o[r];if(s.indexOf("-")>-1){let[r,o,a]=s.split("-");if(a||""===o)return;let c=Math.min(+r,+o),l=Math.max(+r,+o);if(c<1)return;if(l>e)return l+="",void(t=i.slice(0,i.length-l.length)+e);n.push([c-1,l-1])}else{if(s<1)return;if(s>e)return void(t=i.slice(0,i.length-s.length)+e);n.push([s-1,s-1])}}return n}(t,e)||[];if(n.length<1)return void l.alert({message:"dialog.error.validateRange",level:"warning"});let i,r=[];return n.sort(((t,e)=>t[0]-e[0])).forEach((t=>{if(r.length<1)return r.push(t),void(i=t);const e=t[0],n=t[1],o=i[1];e>=o?e>o+1?(r.push(t),i=t):i[1]=n:n>o&&(i[1]=n)})),r}(e,c),u={type:t,range:h,reverse:!1,bleed:!1,useWorkFlow:!0};const d=t=>{i(t.msg)};r.api.registerWorkflow("printEx",d);let f=this.pdfViewerRender.pdfDocRender;return(r.AdditionalActions?Promise.resolve():r.loadAdditionalActions()).then((t=>{f.setPrintState(!0),f.performAction(5),this.eventEmitter.emit(nt.documentWillPrint)})).then((t=>{r.PDFForm.addTask((t=>r.extractPrintPages(u).then((t=>{if(t){const e={printable:t=window.btoa(t),type:"pdf",base64:!0};"function"==typeof this.printHandler?(u={data:e.printable,type:Number(u.type),range:u.range},this.printHandler(u)):MA()(e)}f.performAction(6),this.eventEmitter.emit(nt.documentDidPrint),f.setPrintState(!1),r.api.unregisterWorkflow("printEx",d)}))),!0)}))},n.printPDFDocumentEx=function({startIndex:t=0,endIndex:e=this.currentPDFDoc.getPageCount()-1}){return e>this.currentPDFDoc.getPageCount()-1&&(e=this.currentPDFDoc.getPageCount()-1),this.printEx({type:1,pageRange:t+1+"-"+(e+1)})},n.printPDFDocument=function({asImage:t=!1,endIndex:e=this.currentPDFDoc.getPageCount()-1,printType:n=["page"],reverse:i=!1,shrinkToFit:r=!1,silent:o=!1,startIndex:s=0,ui:a=!1,rangeType:c,total:l=this.currentPDFDoc.getPageCount(),progress:h=this.printProgress,fromToArray:u,hideHeaderFooter:d=!this.getPrintSetting("showHeaderFooter"),quality:f=this.getPrintSetting("quality")||100,isPortfolio:p}){let g=[];if("assign"===c)for(let t=0;t<u.length;t++)if(u[t][0]===u[t][1])g.push(u[t][0]-1);else for(let e=u[t][0];e<=u[t][1];e++)g.push(e-1);else{e>this.currentPDFDoc.getPageCount()-1&&(e=this.currentPDFDoc.getPageCount()-1);for(let t=s;t<=e;t++)g.push(t)}return this.print({isPortfolio:p,rangeType:c,pages:g,printType:n,showHeaderFooter:!d,quality:f,progress:h})},n.highlightControls=function(){return this._highlightControls},n.highlightControlsUI=function(){return this._highlightControlsUI},n.setHighlightControlsUI=function(t){this._highlightControlsUI=t},n.getDisplayHighlightColor=function(t,e=.25,n="HTML"){return e>1&&(e=1),(0,_.colorConvertor)(t,n,e)},n.highlightForm=function(t){if(!this.pdfViewerRender)return;let e=this.pdfViewerRender.pdfDocRender;if(this.setHighlightControlsUI(t),e){let n=e.formRender;n&&n.setRuntimeHighlight(t)}return this.eventEmitter.emit(nt.setFromFieldHighlight,t),this._highlightControls=t},n.getFormHighlightColor=function(){return{color:(0,_.colorConvertor)(this._runtimeColor,"int",this._runtimeColorOpacity),colorRequired:(0,_.colorConvertor)(this._runtimeColorRequired,"int",this._runtimeColorOpacityRequired)}},n.setFormHighlightColor=function(t,e){let n=.5,i=1;(_.isChrome||_.isFirefox)&&(n=1),"number"==typeof t&&(n=(4278190080&t)>>>24,n/=255,this._runtimeColorOpacity=n,t&=16777215),"number"==typeof e?(i=(4278190080&e)>>>24,i/=255,this._runtimeColorOpacityRequired=i,e&=16777215):e=t;let r=this.pdfViewerRender.pdfDocRender;if(r){let o=r.formRender;o&&o.setRuntimeHighlightColor(t,n,e,i)}this._runtimeColor=t,this._runtimeColorRequired=e},n.getStore=function(){return this.store},n.getStorage=function(){return this.getIoC().getInstanceByClass(lP)},n.getDeprecatedStorage=function(){return this.localStorage},n.setJRFontMap=function(t){return this.getWebPDFJR().then((e=>e.setFontMap(t)))},n.setJRWatermarkFontMap=function(t){return this.getWebPDFJR().then((e=>e.setWatermarkFontMap(t)))},n.pasteAnnot=function(t,e,n={x:0,y:0}){let i=this.stateHandlerManager.getCurrentStates();if(i){let t=i.getStateName();if("edit-all"===t||"add-path-object"===t||"add-text-object"===t)return}if(!t||!e||e.isVirtual())return;let{isCutAnnot:r=!1,annotId:o}=t;return this.currentPDFDoc.getPageByIndex(t.pageIndex).then((t=>{if(r){let t=[];if(this.cutAnnot&&this.cutAnnot.getId()===o){let e=this.cutAnnot;this.cutAnnotInfo&&this.cutAnnotInfo.objectNumber===o&&(e.info={...this.cutAnnotInfo},this.cutAnnotInfo=null),t.push(e)}return Promise.resolve(t)}return t.getAnnotsByObjectNumArray([o])})).then((t=>{if(t.length){if(r){let i={...t[0].getInfo()};this.cutAnnot=null;let r=t[0].getRect(),o=r.right-r.left,s=r.top-r.bottom;return r.left=n.x,r.top=n.y,r.right=n.x+o,r.bottom=n.y-s,i.rect={...r},i.isCutPasteCreate=!0,e.addAnnot(i)}return e.pasteAnnot(t[0],n)}})).then((t=>{if(t.length>0){let n=t[0];const i=()=>this.eventEmitter.emit(nt.addAnnotSuccess,n);if(r){let t=this.getAnnotRender(e.getIndex(),n.getId()).getComponent();this.copy([t])}let{isCollaborationMode:o=dP,getUserName:s=dP}=this.customs;if(o()){const t=s();t!==n.getTitle()?n.setTitle(t).finally(i):i()}else i()}return t})).catch(dP)},n.pasteImage=function(t,e){window.URL=window.URL||window.webkitURL;var n=window.URL.createObjectURL(e);let i=D()("<img style='opacity:0' />");i.on("load",(e=>{t=t.then((t=>this.getPDFDocRender().getViewBoxCenter(!1))).then((([t,e])=>{if(t.isVirtual())throw new Error("Cannot paste image to virtual page!");const r=this.pdfViewerRender.pdfDocRender.getPDFPageRender(t.getIndex()),o=r.getRotation();let s,a;90===o||270===o?(s=i.height(),a=i.width()):(s=i.width(),a=i.height());let c={left:e[0]-s/2,top:e[1]-a/2,right:e[0]+s/2,bottom:e[1]+a/2};c=t.reverseDeviceRect(c,r.scale,o);let l=new XMLHttpRequest;l.open("get",n),l.responseType="arraybuffer";let h=(0,_.createDeferred)();return l.onloadend=t=>h.resolve(l.response),l.send(),Promise.all([t,h.promise,c,o])})).then((([t,e,n,i])=>t.addImage(e,n,i))).then((t=>{window.URL.revokeObjectURL(n),i.remove()})).catch((function(){window.URL.revokeObjectURL(n),i.remove()}))})),i.attr("src",n),D()("body").append(i)},n.paste=function(t){t||(t=JSON.parse(uP));let e=Promise.resolve();const n=t=>{let{text:n="",value:i}=t,r=[];switch(t.type){case"html":r=au.formatRichText(t.value);break;case"string":n=t.value}let o=this.stateHandlerManager.getCurrentStates();if(o){if("hand"!==o.getStateName())return}e=e.then((t=>this.getPDFDocRender().getViewBoxCenter())).then((([t,e])=>{if(t.isVirtual())return;const i=this.getPDFDocRender().getPDFPageRender(t.getIndex());let o={left:e[0],top:e[1],right:e[0]+12,bottom:e[1]-12};return t.addAnnot({type:ti.freeText,intent:"FreeTextTypewriter",subject:"FreeTextTypewriter",contents:n,defaultAppearance:r.length?{}:{textColor:0,textSize:12},rect:o,rotation:((360-90*t.getRotation()-i.getRotation())%360+360)%360,richText:r.length?r:null}).then((t=>{this.eventEmitter.emit(nt.addAnnotSuccess,t[0])}))})).catch(dP)};this.pastPositionInfo&&this.pastPositionInfo.times++;const i=e=>{const n=this.getPDFDocRender();return n?n.getViewBoxCenter().then((([n,i])=>{this.pastPositionInfo&&this.pastPositionInfo.pageIndex===n.getIndex()&&this.pastPositionInfo.pos.toString()===i.toString()||(this.pastPositionInfo={pageIndex:n.getIndex(),pos:i,times:0});let r=1e4,o=-1,s=-1,a=1e4;t.forEach((t=>{if("string"===t.type){const e=t.value;if(e.type){let t=e.rect;r=Math.min(t.left,r),o=Math.max(t.right,o),s=Math.max(t.top,s),a=Math.min(t.bottom,a)}}}));const c=o-r,l=s-a,h=n.getWidth(),u=n.getHeight();let d={x:i[0]+5*this.pastPositionInfo.times-c/2,y:i[1]-5*this.pastPositionInfo.times+l/2};if(d.x+c>h){const t=h-c;d.x=t<0?0:h-c}if(d.y-l<0){const t=u-l;d.y=t<0?u:l}return[n,{x:d.x+e.left-r,y:d.y-(s-e.top)}]})):Promise.resolve({x:0,y:0})};this.pasteTimes++;let r={left:1e4,right:-1,top:-1,bottom:1e4},o=0,s=0;const a=()=>{t.forEach((t=>{if("string"===t.type){const e=t.value;if(e.doc&&e.graphicObject&&this.currentPDFDoc.id===e.doc){let t=e.rect;r.left=Math.min(t.left,r.left),r.right=Math.max(t.right,r.right),r.top=Math.max(t.top,r.top),r.bottom=Math.min(t.bottom,r.bottom)}}})),o=r.top-r.bottom,s=r.right-r.left;let e=y({},r);e.top-=o*this.pasteTimes,e.top<0?(this.pasteNeedRestart=!0,this.pasteRestartTimes?this.pasteRestartTimes++:this.pasteRestartTimes=1):(this.pasteNeedRestart=!1,this.pasteRestartTimes=-1)},c=(t,e)=>this.currentPDFDoc.getPageByIndex(e).then((e=>{let n=e.getHeight(),i=Math.abs(r.top)-Math.abs(t.top),a=Math.abs(r.left)-Math.abs(t.left),c=y({},r);return c.top-=o*this.pasteTimes,c.bottom-=o*this.pasteTimes,this.pasteNeedRestart&&(n-this.pasteRestartTimes*o<0&&(this.pasteRestartTimes=0),c.top=n-this.pasteRestartTimes*o,c.bottom=c.top-o,c.left=0,c.right=s),[e,{top:c.top-i,bottom:c.top-i-(t.top-t.bottom),left:c.left-a,right:c.left-a+(t.right-t.left)}]}));t[0]&&"string"===t[0].type&&t[0].value.graphicObject&&a();const l=[],h=[],u=[];if(t.forEach((t=>{if("string"===t.type)try{let r=t.value;if("number"==typeof r)return void n(t.value);r.type?"widget"===r.type?l.push(i(r.rect).then((([t,e])=>[t,e,r]))):e=e.then((t=>i(r.rect).then((([t,e])=>{if(!t.isVirtual())return this.pasteAnnot(r,t,e).then((t=>(t&&u.push.apply(u,hP(w.Z,t)),u)))})))):r.doc&&r.graphicObject&&this.currentPDFDoc.id===r.doc?h.push(c(r.rect,r.page).then((([t,e])=>[t,e,r]))):n(t)}catch(t){0}else if("file"===t.type){let n=t.value;if(!n)return;/^image.*/.test(n.type)?this.pasteImage(e,n):e=e.then((e=>this.currentPDFDoc.attachFile(t.blob))).catch(dP)}else"html"===t.type&&n(t)})),l.length){const t=this.currentPDFDoc.PDFForm;e=e.then((e=>Promise.all(l).then((e=>{const n=e[0][0];if(n.isVirtual())return;const i=e.map((([e,n,i])=>{let r=t.getField(i.fieldName);if(!r)return;if(!r.getControlById(i.srcObjectNumber))return;i.type=i.fieldType,delete i.fieldType;const o=i.rect;return y({},i,{rect:{left:n.x,top:n.y,right:n.x+(o.right-o.left),bottom:n.y-(o.top-o.bottom)}})})).filter((t=>!!t));return t.copyControls(null,n,i).then((e=>(i.forEach((e=>{let n=t.getField(e.fieldName);if(!n)return;const i=n.getType();if(4===i||6===i){const t=n.getDisplayValue();t&&n.showDisplayValue(t)}})),e)))}))))}return h.length&&(e=e.then((t=>Promise.all(h).then((t=>{if(t[0][0].isVirtual())return;const e=t.map((([t,e,n])=>t.pasteGraphicObject(n.graphicObject,n.page,e)));return Promise.all(e).then((t=>t))}))))),e.then((t=>{if(this.activeElement(),Array.isArray(t)&&t[0]instanceof dv){const e=t[0].getPDFPage().getIndex();let n=new Y;const i=this.getPDFPageRender(e);t.forEach((t=>{const e=new(this.addon.graphicsManager.get(t))(t,i,this.addon);n.add(e)})),this.activeElement(n)}return t}))},n.copy=function(t,e=!1){let n=document.activeElement.tagName.toLowerCase();if("textarea"===n||"input"===n)return;if(t||(t=this.getAllActiveElements()),Array.isArray(t)||(t=[t]),0===t.length)return;let i=[];const r=t.map((t=>{if(t&&t.annot&&"widget"===t.annot.getType()){let e=t.annot;return{type:"string",value:{type:e.getType(),rect:e.getRect(),fieldName:e.getField().getName(),fieldType:e.getField().getType(),srcObjectNumber:e.getObjNum()}}}if(t instanceof Br){let n=t.annot.getType();if("strikeout"===n||"highlight"===n||"squiggly"===n||"underline"===n||"redact"===n||"caret"===n||"screen"===n||"sound"===n)return;return{type:"string",value:{isCutAnnot:e,type:n,rect:t.annot.getRect(),annotId:t.getId(),pageIndex:t.annot.page.getIndex()}}}if(t.graphicsObject&&t.graphicsObject instanceof dv){let e=(t=t.graphicsObject).getPDFPage();return i.push(t),{type:"string",value:{page:e.getIndex(),graphicObject:t.getId(),rect:t.getRect(),doc:e.getPDFDoc().getId()}}}})).filter((t=>!!t));if(r.length){if(i.length){const t=i[0].getPDFPage(),e=i.map((t=>t.getId()));t.cloneGraphicObject(t.getIndex(),e)}uP=JSON.stringify(r),(0,_.copyText)(uP),this.eventEmitter.emit(nt.copyTextSuccess),this.pasteTimes=0}},n.copyAnnots=function(t){if(!Array.isArray(t))throw new Error("Incorrect param format");return t.filter((t=>{let e=t.getType();if("widget"==e){return t.getField().getType()!==xe.Sign}return!(["strikeout","highlight","squiggly","underline","redact","caret","screen","sound","popup"].includes(e)||"R"==t.info.RT&&t.info.IRT)})).map((t=>{let e=t.getType();if("widget"===e){let n=t,i=n.getField();return{type:e,rect:n.getRect(),fieldName:i.getName(),fieldType:i.getType(),objectNumber:n.getObjNum()}}return{type:e,rect:t.getRect(),id:t.getId(),pageIndex:t.getPage().getIndex()}}))},n.pasteAnnots=function(t){let e=[],n=[];t.forEach((t=>{const{type:i,rect:r,id:o,pageIndex:s,fieldName:a,fieldType:c,objectNumber:l}=t;"widget"==i?n.push({type:"string",value:{type:i,rect:r,fieldName:a,fieldType:c,srcObjectNumber:l}}):e.push({type:"string",value:{isCutAnnot:!1,type:i,rect:r,annotId:o,pageIndex:s}})}));let i=[];return e.length>0&&i.push(this.paste(e)),n.length>0&&i.push(this.paste(n)),Promise.all(i).then((t=>t.flat()))},n.getClipboardText=function(){return uP},n.cut=function(t){t||(t=[this.getAllActiveElements()[0]]),Array.isArray(t)||(t=[t]);let e=t[0];if(!e||!(e instanceof Br)||"text"!==e.annot.getType()||e.deleteDisabled())return;let n=e.annot,i=n.getReplies(),r={...n.getInfo()};r.repliesSummary.length&&r.repliesSummary.forEach((t=>{if(!t.content){let e=i.find((e=>e.getId()===t.id&&e.info.IRT===n.getId()));e&&(t.content=e.getContent())}})),this.cutAnnotInfo={...r},this.cutAnnot=n,this.copy(e,!0),e.removeAnnot()},n._setSaveBefore=function(t=dP){this._saveBefore=t},n.registerSignatureHandler=function(t,e,n){throw new Error("this api is not working now!!")},n.setEnableShortcutKey=function(t){this.config.enableShortcutKey=t,t?this.keyboard.enable():this.keyboard.disable()},n.isShortcutKeyEnabled=function(){return this.config.enableShortcutKey},n.isMouseWheelZoomEnabled=function(){const t=window.localStorage.getItem("PREFERENCES-GENNERAL");if(t){const{handUseMouseZoom:e}=JSON.parse(t);return e}return!1},n.onShortcutKey=function(t,e,n=!1){if("string"!=typeof t||!t)throw new Error("Incorrect shortcut param format");const i=_.Shortcut.from(t);if("function"!=typeof e&&"object"!=typeof e||Array.isArray(e))throw new Error("Incorrect handler param format");let r=dP;n&&(r=this.keyboard.interceptor(((t,e)=>{if(t.context===this.keyboard.getDefaultShortcutContext())return e(t);t.shortcut.equals(i)||e(t)})));const o="function"==typeof e?e:e&&e.keydown,s="function"==typeof e?void 0:e&&e.keyup;let a={shortcut:i,keydown:o,keyup:s};const c=this.keyboard.onShortcut(i,(t=>{switch(t.opportunity){case _.ShortcutEventApportunity.keydown:a.keydown&&a.keydown(t);break;case _.ShortcutEventApportunity.keyup:a.keyup&&a.keyup(t)}}),{keydown:"function"==typeof o,keyup:"function"==typeof s}),l=()=>{r(),c()};return a.remove=l,this.keyboardListeners.push(a),l},n.offShortcutKey=function(t,e){if("string"!=typeof t||!t)throw new Error("Incorrect shortcut param format");const n="function"==typeof e?e:e&&e.keydown,i="function"==typeof e?void 0:e&&e.keyup,r=_.Shortcut.from(t);this.keyboardListeners=this.keyboardListeners.filter((t=>{let e=!1;return r.equals(t.shortcut)&&(n||i?(n===t.keydown&&(t.keydown=void 0),i===t.keyup&&(t.keyup=void 0),e=!t.keydown&&!t.keyup):e=!0),!e||(t.remove(),!1)}))},n.getInkSignList=function(t){return(this.inkSignManager.getList()||[]).map((e=>({dataURL:"blob"===t?Ib(e.dataURL):e.dataURL})))},n.getOnlineSignList=function(){return(this.onlineSignManager.getList()||[]).map((t=>t))},n.setInkSignList=function(t){Array.isArray(t)&&t.forEach((t=>{if(t.dataURL&&/^data:(.*?)\/(.*?);base64/g.test(t.dataURL)){let e=this.inkSignManager.addInkSign();e.setDataURL(t.dataURL),this.inkSignManager.push(e)}}))},n.setOnlineSignList=function(t){Array.isArray(t)&&t.forEach((t=>{if(t.dataURL&&/^data:(.*?)\/(.*?);base64/g.test(t.dataURL)){let e=this.onlineSignManager.addOnlineSign();e.setDataURL(t.dataURL),this.onlineSignManager.push(e)}}))},n.setDefaultPrintSetting=function(t){let e=t.quality;if(void 0===e&&(e=t.quality=100),(e-100|1e3-e)<0)throw new Error("quality range error, 100 to 1000");let n=this.config.printSetting;this.config.printSetting=y(n,t)},n.getPrintSetting=function(t){return this.config.printSetting[t]},n.setAutoCompleteSetting=function(t){let e=this.config.autoCompleteSetting;this.config.autoCompleteSetting=y(e,t)},n.getAutoCompleteSetting=function(){return this.config.autoCompleteSetting},n.clearAllAutoCompleteEntries=function(){return new Ku(this).clearDbEntries()},n.deleteAutoCompleteEntry=function(t){return new Ku(this).deleteEntry(t)},n.getSavedAutoCompleteEntries=function(){return new Ku(this).getDbEntries()},n.getAllAutoCompleteEntries=function(){return new Ku(this).getAllEntries()},n.setPencilDrawingTimeOut=function(t){this.getStateHandlerManager().pushStateHandlerConfig("pencilStateHandler",{pencilTimeout:t})},n.setEraserSize=function(t){this.getStateHandlerManager().pushStateHandlerConfig("eraserStateHandler",{width:t})},n.setSnapMode=function(t,e){switch(t){case He:case _e:case je:case $e:case We:case Ye:case qe:case ze:break;default:throw new Error(`Incorrect state handler name: ${t}!`)}const n=this.getStateHandlerManager(),i=(n.getStateHandlerConfig(t)||{}).snapMode;n.pushStateHandlerConfig(t,{snapMode:e&&e.slice(0)}),this.eventEmitter.emit(nt.snapModeChanged,t,e,i)},n.getSnapMode=function(t){return(this.getStateHandlerManager().getStateHandlerConfig(t)||{}).snapMode||[]},n.setDocReadColors=function(t){if("object"!=typeof t||Array.isArray(t)||!t.hasOwnProperty("background")||!t.hasOwnProperty("foreground"))throw new Error("Nonsupport colors param format");const e=this.getCurrentPDFDoc();e&&e.setColors(t).then((()=>{const t=this.getPDFDocRender();if(t){let e=t.getPDFDoc().getPageCount();for(let t=0;t<e;t++){const e=this.getPDFPageRender(t);e&&e.isRendered&&e.redraw(!0)}}}))},n.setPageDisplayPreferences=function(){const t=this.getCurrentPDFDoc(),e=localStorage.getItem("PAGE_DISPLAY_DATA");if(e){const n=JSON.parse(e);t&&t.setPageDisplayPreferences(n)}},n.activateAnnotation=function(t){if(!t.annotationId)throw new Error("Annotation id can't empty");let e=this.getPDFDocRender();if(!e||!this.currentPDFDoc)return Promise.resolve();let n=t.annotationId;return this.currentPDFDoc.getPageByIndex(t.pageIndex).then((t=>"number"==typeof n?t.getAnnotsByObjectNumArray([n]):t.getAnnots().then((e=>{if(n.trim().length<1)return Promise.resolve();let i=t.getAnnotObjectNum(n);return 0==i?Promise.resolve():(n=i,t.getAnnotsByObjectNumArray([i]))})))).then((i=>{const r=i[0];if(!r)throw new Error("the annotation does not exist");const o=r.getType();if("popup"===o)throw new Error("the popup annotation can not be activated");if(t.showCommentList&&"freetext"!=o){const i=()=>{const e=this.getAnnotRender(t.pageIndex,n);if(e)return Promise.resolve(e.component.showReplyDialog()).then((()=>r));this.getPDFPageRender(t.pageIndex).getAnnotRenderSafely(n).then((t=>Promise.resolve(t.component.showReplyDialog()).then((()=>r))))},o=i();return o||e.goToPage(t.pageIndex,{x:r.getRect().left,y:r.getRect().top},!0).then(i).then((()=>r))}return r})).then((n=>e.goToPage(t.pageIndex,{x:n.getRect().left,y:n.getRect().top},!0))).then((e=>{const i=this.getPDFPageRender(t.pageIndex);i.waitRendered().then((()=>{i.annotsRender&&i.annotsRender.activeAnnot(n)}))}))},n.convertClientCoordToPDFCoord=function({clientX:t=0,clientY:e=0}){let n=0,i=0,r=0;const o=this.getPDFDocRender().pagesRender;let s=o.getViewMode().getVisibleIndexes();for(let a=0,c=s.length;a<c;a++){n=s[a];let c=o.getPDFPageRender(n).$ui[0].getBoundingClientRect();if(t>=c.left&&t<c.right&&e>=c.top&&e<c.bottom){i=t-c.left,r=e-c.top;break}}let a=o.getPDFPageRender(n);return a.reverseDevicePoint([i,r]).then((function([t,e]){return{index:n,left:t,top:e,scale:a.getScale(),rotation:a.getRotation()}}))},n.setAutoCalculateFieldsFlag=function(t){let e=this.pdfViewerRender.pdfDocRender;if(!e)return void console.error("get doc Render error");let n=e.getPDFDoc();if(!n)return void console.error("get doc error");let i=n.getPDFForm();i?i.calculationEnabled=t:console.error("get form error")},n.getModuleLicenseRight=function(){this.getWebPDFJR().then((t=>{t.getAllModuleLicenseRight().then((t=>{this.getStore().dispatch(_.MODULE_LICENSE_INFO,t)}))}))},n.addTooltipsForAllFormFields=function(){const t=this.currentPDFDoc.getPDFForm();if(t){(t.fields||[]).forEach((t=>{t.getAlternateName()||t.setAlternateName(t.getName())}))}},n.setLayoutGrid=function(t){return t&&((t=y({unit:"inch",width:1,height:1,offsetLeft:0,offsetTop:0,subdivisions:3,color:"#7f7fff"},t)).color=(0,_.colorConvertor)(t.color),t.subdivisions=Math.max(1,t.subdivisions)),this.config.layoutGrid=t||null,this.redrawContent()},n.setLayoutGridByStorageSettings=function(t){const{gridOptions:e,settings:n}=PP();return!0===t&&(n.Grid=!n.Grid,SP(n)),this.config.layoutGrid=n.Grid?e:null,this.eventEmitter.emit(nt.gridToggle,n.Grid,t),this.redrawContent()},n.setCustomMargin=function(t){this.getPDFViewerRender();D()("html").css("--facing-margin",t+"px")},n.setMultipage=function(t){const e=this.viewModeManager.currentViewMode.getName(),n=["facing-page-view-mode","multipage-view-mode","facing-continuous-page-view-mode"];n.forEach((e=>{this.store.dispatch("multipage-"+e,t)}));if(this.getPDFDocRender().doc.getPageCount()<=1)return void this.viewModeManager.switchTo("single-page-view-mode");if(!n.includes(e))return;const i=this.viewModeManager.ViewModes[e];this.viewModeManager.currentViewMode=i,this.viewModeManager.switchTo(""),setTimeout((()=>{this.viewModeManager.switchTo(e)}))},n.updateFormatPageNumbers=function(){this.eventEmitter.emit(nt.pagesLabelChange)},n.getLayoutGrid=function(){return this.config.layoutGrid||null},n.setSnapGrid=function(t){t&&((t=y({unit:"inch",width:1,height:1,offsetLeft:0,offsetTop:0,subdivisions:3},t)).subdivisions=Math.max(1,t.subdivisions)),this.config.snapGrid=t||null},n.setSnapGridByStorageSettings=function(t){const{gridOptions:e,settings:n}=PP();!0===t&&(n.SnapGrid=!n.SnapGrid,SP(n)),this.config.snapGrid=n.SnapGrid?e:null,this.eventEmitter.emit(nt.snapGridToggle,n.SnapGrid,t)},n.getSnapGrid=function(){return this.config.snapGrid||null},n.setLineWeight=async function(t,e=!0){if(this.currentPDFDoc){if(this.currentPDFDoc.otherOptions.renderConfigLineWeight===t)return;this.currentPDFDoc.otherOptions.renderConfigLineWeight=t,await this.currentPDFDoc.setRenderConfigLineWeight(t)}if(!e)return;this.pdfViewerRender.pdfDocRender.pagesRender.setRenderFlags(8),this.redrawContent()},n.setFormFieldFocusRectangleVisible=function(t){this.element.classList.toggle("hide-form-field-focus-rectangle",!t)},n.setJPXDownSample=function(t){return this.getWebPDFJR().then((e=>e.setJPXDownSample(t)))},n.setFormCreationContinuously=function(t){this.getStore().dispatch(st.SET_FORM_CREATION_CONTINUOUSLY,t)},n.startFormDesginerAssist=function(){return this.isDesignerAssistantEnabled?Promise.resolve():this.currentPDFDoc.startFormDesignerAssit().then((()=>{this.isDesignerAssistantEnabled=!0,this.eventEmitter.emit(nt.designerAssistantStatusChanged,!0)}))},n.stopFormDesginerAssist=function(){return this.isDesignerAssistantEnabled?this.currentPDFDoc?this.currentPDFDoc.stopFormDesignerAssit().then((()=>{this.isDesignerAssistantEnabled=!1,this.eventEmitter.emit(nt.designerAssistantStatusChanged,!1)})):(this.isDesignerAssistantEnabled=!1,void this.eventEmitter.emit(nt.designerAssistantStatusChanged,!1)):Promise.resolve()},n.setActionCallback=function(t){this.JSEngine&&this.JSEngine.setActionCallback(t)},n.addFontMaps=function(t){const e=this.getStore(),{all:n}=e.getCurrentValue(pA)||{all:[]};return e.dispatch(pA,{all:n.concat(t),new:t}),this.eventEmitter.emit(nt.AddFontMaps,t),this.getWebPDFJR().then((e=>e.addFontMap(t)))},n.getIoC=function(){return this.ioc},n.getReadAloudService=function(){return this.readAloudService||(this.readAloudService=this.ioc.getInstanceByClass(hA)),this.readAloudService},n.getPDFDocParserService=function(){return this.ioc.getInstanceByClass(wA)},n.getKeyboard=function(){return this.keyboard},n.toggleCollaborationMode=function(t){this.eventEmitter.emit(nt.toggleCollaborationMode,t)},n.getGroupCount=function(){const t={"-1":[]};return this.getAllActiveElements().forEach((e=>{const n=e.annot,i=n.getGroupHeader&&n.getGroupHeader();if(i){(t[i.getId()]=t[i.getId()]||[]).push(e)}else t[-1].push(e)})),[Object.keys(t).length-1,t[-1].length,t]},n.initADPs=function(){this.ADPs||(this.ADPs=JSON.parse(localStorage.getItem(DefaultAnnotPropertyKey))||{})},n.setAnnotDefaultProperty=function(t,e="",n={}){(this.webPDFJR||this.webPDFSR).setAnnotDefaultProperty(t,e,n),this.eventEmitter.emit("setAnnotDefaultProperty",{type:t,intent:e,props:n})},n.getAnnotDefaultProperty=function(t,e=""){return(this.webPDFJR||this.webPDFSR).getAnnotDefaultProperty(t,e)},n.setWorker=function(t){return this.getWebPDFJR().then((e=>(e.api.setWorker(t),e.cacheFontConfig((this.config.jr.fontServer||"")+"/",[],[]))))},n.previewIconDoc=function(t){return this.getWebPDFJR().then((e=>e.api.previewIconDoc(t)))},n.getOverlayComparisonService=function(){return this.getIoC().getInstanceByClass(ZA)},n.getOverlayComparisonOptionsService=function(){return this.getIoC().getInstanceByClass(qA)},n.registerProgressHandler=function(t){if("function"!=typeof t)throw new TypeError("Callback type error");this.progressHandler=t},n.updateCustomOptions=function(t){y(this.customs,t)},n.getCustomOptionsUpdater=function(){return this.ioc.getInstanceByClass(rP)},n.getInstanceId=function(){return this.instanceId},S(e,[{key:"ADPs",get:function(){const t=this.pdfEngine;return t?t.ADPs:{}}}]),e}(_.Disposable);var bP=wP;function AP(t,e){if(t&&"function"==typeof t.getJWT)return t.getJWT(e)}function PP(){const t=JSON.parse(localStorage.getItem("layoutPreference"))||{WidthBetweenLines:"1.000",HeightBetweenLines:"1.000",GridOffsestFromLeftEdge:"1.000",GridOffsestFromTopEdge:"1.000",Subdivisions:"3",GridLineColcor:"#1e43d6",Grid:!1,SnapGrid:!1};return{gridOptions:{unit:"inch",width:t.WidthBetweenLines,height:t.HeightBetweenLines,offsetLeft:t.GridOffsestFromLeftEdge,offsetTop:t.GridOffsestFromTopEdge,subdivisions:Math.max(1,t.Subdivisions),color:(0,_.colorConvertor)(t.GridLineColcor)},settings:t}}function SP(t){localStorage.setItem("layoutPreference",JSON.stringify(t))}function CP({key:t,value:e,notNull:n=!0,notSpace:i=!1,notSpecialChar:r=!1}){if(r&&/[~!@#'\.\$%\^&\*\(\)\-=;:\[\]\{\}]/.test(e))throw new Error(`[Illegal Argument] Invalid ${t}: Special characters is invalid.`);if(i&&/\s/.test(e))throw new Error(`[Illegal Argument] Invalid ${t}: Space is invalid.`);if(n&&0==e.length)throw new Error(`[Illegal Argument] Invalid ${t}: ${t} is required.`)}function EP(t){if(0===t.size)return Promise.resolve(new Uint8Array(0));const e=new FileReader;return new Promise(((n,i)=>{e.onload=()=>{n(new Uint8Array(e.result))},e.onerror=t=>i(t),e.readAsArrayBuffer(t)}))}function xP(t,e){if(0===t.size)return Promise.resolve("");const n=new FileReader;return new Promise(((i,r)=>{n.onload=()=>{i(n.result)},n.onerror=t=>r(t),n.readAsText(t,e)}))}function DP(t,e){for(let n=0;n<e.length;n++)if(t[n]===e.charCodeAt(n))return!0;return!1}function IP(t,e){if(0===t.size)return Promise.resolve(!1);let n;if(e){let t=e.lastIndexOf(".");n=e.substr(t+1)}return xP(t.slice(0,4)).then((t=>"%PDF"===t||"pdf"===n))}function RP(t){const e=Array.from(t).slice(0,4).map((t=>String.fromCharCode(t))).join("");return"%PDF"===e}function TP(t,e){return 0===t.size?Promise.resolve(!1):EP(t.slice(0,35)).then((t=>MP(t,e)?_P():LP(t,e)?kP():OP(t,e)))}const FP=document.createElement("video");function _P(){return!!FP.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')}function kP(){if(!FP.canPlayType)return!1;return!!FP.canPlayType('video/ogg; codecs="theora, vorbis"')}function MP(t,e){return!!e.match(/\.mp4$/)}function OP(t,e){return!!e.match(/\.webm$/)}function LP(t,e){return 79===t[0]&&103===t[1]&&103===t[2]&&83===t[3]&&NP(t)}function NP(t){return 116===t[29]&&104===t[30]&&101===t[31]&&111===t[32]&&114===t[33]&&97===t[34]}const BP=document.createElement("audio");function VP(){return!!BP.canPlayType("audio/mp3")}function UP(){if(!BP.canPlayType)return!1;return!!BP.canPlayType('audio/ogg; codecs="vorbis"')}function HP(t,e){return EP(t.slice(0,35)).then((t=>jP(t,e)?VP():!!$P(t,e)&&UP()))}function jP(t,e){return!!e.match(/\.mp3$/)}function $P(t,e){return 79===t[0]&&103===t[1]&&103===t[2]&&83===t[3]&&WP(t)}function WP(t){return 118===t[29]&&111===t[30]&&114===t[31]&&98===t[32]&&105===t[33]&&115===t[34]}function YP(t,e){return EP(t.slice(0,4)).then((t=>GP(t)||KP(t)||qP(t)||zP(t)||JP(e)))}function GP(t){return 255===t[0]&&216===t[1]&&255===t[2]}function KP(t){return 137===t[0]&&80===t[1]&&78===t[2]&&71==t[3]}function qP(t){return 71===t[0]&&73===t[1]&&70===t[2]&&56===t[3]}function zP(t){return 66===t[0]&&77===t[1]}function JP(t){return/\.svg$/.test(t)}function ZP(t){return xP(t.slice(0,4)).then((t=>"%FDF"===t))}function XP(t){return xP(t.slice(0,4)).then((t=>"%XDP"===t))}function QP(t){return t>=0&&t<=6||t>=14&&t<=31}const tS=1024;function eS(t,e){return/\.xfdf/.test(e)||0===t.size?Promise.resolve(!1):ZP(t).then((e=>!e&&XP(t).then((e=>{if(e)return!1;const n=t.size>tS?t.slice(0,tS):t;return"function"==typeof t.stream?function(t){const e=t.stream().getReader();return e.read().then((function t(n){if(n.done)return!0;const i=n.value;for(let t=0;t<i.length;t++)if(QP(i[t]))return!1;return e.read().then(t)}))}(n):function(t){const e=512,n=Math.ceil(t.size/e),i=t=>{for(let e=0;e<t.length;e++)if(QP(t[e]))return!1;return!0};return Array(n).fill((t=>EP(t).then(i))).reduce(((n,i,r)=>n.then((n=>{if(n){const n=e*r,o=Math.min(n+e,t.size),s=t.slice(n,o);return i(s)}return!1}))),Promise.resolve(!0))}(n)}))))}var nS,iS;function rS(t){return t instanceof HTMLElement?function(n,i){return i===iS.UPDATE&&n?e(n,t.getBoundingClientRect()):n}:function(n,i){return i===iS.UPDATE&&n?e(n,t):n};function e(t,e){let{clientLeft:n,clientTop:i,width:r,height:o}=t,s=n+r,a=i+o;return n<e.left&&(n=e.left),i<e.top&&(i=e.top),s>e.right&&(s=e.right),a>e.bottom&&(a=e.bottom),{clientLeft:n,clientTop:i,width:s-n,height:a-i}}}!function(t){t.NONE="none",t.DASHED="dashed",t.SOLID="solid",t.DOTTED="dotted"}(nS||(nS={})),function(t){t.START="selection-start",t.UPDATE="selection-update",t.END="selection-end",t.CANCEL="selection-cancel"}(iS||(iS={}));let oS=function(t){function e(e={}){var n;(n=t.call(this)||this).anchorElement=document.body,n.fillColor="rgba(125,186,255, 0.3)",n.borderColor="#7DBAFF",n.borderStyle=nS.SOLID,n.borderWidth=1,n.removeMaskOnEnd=!0,n.areaEl=document.createElement("div"),n.builtInInteraction=!0,n.isPrepared=!1,n.isAvailable=!0,n.store=new _.Store,n.interceptors=[];return Object.keys(e).forEach((t=>{n[t]=e[t]})),n.areaEl.className="fv__viewer-selections-area",n.areaEl.style.cssText+=`\n            outline: ${n.borderWidth}px ${n.borderStyle} ${n.borderColor};\n            background-color: ${n.fillColor};\n        `,n.store.subscribe(iS.UPDATE,(t=>{n.areaEl.style.cssText+=`\n                width: ${t.width}px;\n                height: ${t.height}px;\n                left: ${t.clientLeft}px;\n                top: ${t.clientTop}px;\n            `})),n.addDestroyHook((()=>{n.store.destroy()})),n}(0,E.Z)(e,t);var n=e.prototype;return n.eventInterceptor=function(t){this.interceptors.push(t)},n.reducer=function(t){this.store.reducer(t)},n.on=function(t,e){return this.builtInInteraction&&this.prepare(),this.store.subscribe(t,e)},n.start=function(t,e){document.body.appendChild(this.areaEl);const n=this.anchorElement.getBoundingClientRect();this.store.dispatch(iS.START,{clientLeft:t,clientTop:e,left:t-n.left,top:e-n.top,width:0,height:0})},n.adjust=function(t,e){const n=this.store.getCurrentValue(iS.START),i=n.clientLeft+t,r=n.clientTop+e,o=Math.min(n.clientLeft,i),s=Math.min(n.clientTop,r),a=Math.abs(t),c=Math.abs(e),l=this.anchorElement.getBoundingClientRect();this.store.dispatch(iS.UPDATE,{clientLeft:o,clientTop:s,left:o-l.left,top:s-l.top,width:a,height:c})},n.end=function(){this.removeMaskOnEnd&&this.removeMask();const t=this.store.getCurrentValue(iS.UPDATE);this.store.dispatch(iS.END,t)},n.cancel=function(){this.removeMask(),this.store.dispatch(iS.CANCEL,void 0)},n.removeMask=function(){this.areaEl.parentElement===document.body&&document.body.removeChild(this.areaEl)},n.enable=function(){this.isAvailable=!0},n.disable=function(){this.isAvailable=!1},n.prepare=function(){if(this.isPrepared)return;const t=new Di.Manager(this.anchorElement);t.add(new Di.Pan({direction:Di.DIRECTION_ALL}));let e,n=!1;t.on("panstart",(t=>{this.isAvailable&&(this.interceptors.some((e=>!e(t)))||(n=!0,e=t.center,this.start(t.center.x,t.center.y),this.adjust(0,0)))})),t.on("panmove",(t=>{if(!this.isAvailable||!n)return;const i=t.center.x-e.x,r=t.center.y-e.y;this.adjust(i,r)})),t.on("panend",(t=>{this.isAvailable&&n&&(n=!1,this.end())})),t.on("pancancel",(t=>{this.isAvailable&&n&&(n=!1,this.cancel())})),this.addDestroyHook((()=>{t.destroy(),this.end()}))},e}(_.Disposable);const sS=t=>{const e={isAllowed:!1,print:2,accessibility:!0,copy:!0,change:4};return"password"===t?{userPassword:"",ownerPassword:"",isEncryptMetadata:!0,cipherType:ey.AES128,...e}:"certificate"===t?e:{}},aS=t=>{if(void 0===t)return{};let e={};return e.print=2048&t?2:4&t?1:0,e.accessibility=!!(512&t),e.copy=!!(16&t),e.change=8&t&&32&t&&256&t?4:32&t&&256&t?3:256&t?2:1024&t?1:0,e},cS=(t={})=>{let{print:e,change:n,accessibility:i,copy:r}=t;if("number"!=typeof e||"number"!=typeof n||"boolean"!=typeof i||"boolean"!=typeof r)return 0;let o=65532;return e<2&&(o^=2048,e<1&&(o^=4)),i||(o^=512),r||(o^=16),n=+n,4===n?o^=1024:3===n?(o^=8,o^=1024):2===n?(o^=8,o^=32,o^=1024):1===n?(o^=8,o^=32,o^=256):0===n&&(o^=8,o^=32,o^=256,o^=1024),o+=4294901760,o};let lS=null;const hS=()=>lS,uS=t=>{lS=t};let dS="";const fS=()=>dS,pS=(t="")=>{dS=t},gS=(t,e)=>{if(!t||!e)return Promise.resolve(!1);const{recipientList:n,cipherType:i,isEncryptMetadata:r}=e,o=t.pdfViewer.currentPDFDoc,s=n.map((t=>({cerFile:t.cerFile,permission:t.permissionData.isAllowed?t.permissionData:null})));return o.setCertificateAndPermission(s,i,r).then((e=>(e&&(t.alert({message:"password-protect:warning.apply-to-document",level:"warning",again:!0,id:"set-certificate-permission-alert"}),t.eventEmitter.emit(nt.securityTypeChanged),uS(null)),e)))},mS=(t,e)=>t&&e?t.pdfViewer.currentPDFDoc.setPasswordAndPermission(e.userPassword,e.ownerPassword,e.permissionData.value,e.cipherType,e.isEncryptMetadata).then((n=>{if(n){t.alert({message:"password-protect:warning.apply-to-document",level:"warning",again:!0,id:"set-password-permission-alert"}),t.eventEmitter.emit(nt.securityTypeChanged);const n={...e,...aS(e.permissionData.value),isAllowed:e.permissionData.isAllowed};delete n.permissionData,uS(n),pS(e.ownerPassword)}return n})):Promise.resolve(!1),vS=(t,e)=>{if(!t)return;const n=t.pdfViewer.currentPDFDoc,i=e=>t.promptPassword("","password-protect:buttons.inputOwnerPassword","password-protect:buttons.title","body",e?"error":void 0,e),r=t=>{if(!t)return i("password-protect:error.admin-pwd-cannot-blank").then(r,(()=>{}));n.checkPassword(t).then((n=>{if(3!==n)return i("password-protect:warning.incorrect-owner-pwd").then(r,(()=>{}));pS(t),e&&e(t)}))};i().then(r,(()=>{}))};var yS,wS=function(t){function e(e,n=e.$ui.get(0).parentElement){var i;return(i=t.call(this,e)||this).scrollHost=n,i.clientWidth=-1,i.clientHeight=-1,window.ResizeObserver&&(i.observer=new ResizeObserver((([t])=>{t&&(i.clientWidth=n.clientWidth,i.clientHeight=n.clientHeight)})),i.observer.observe(n),i.addDestroyHook((()=>{i.observer.unobserve(n)}))),i}(0,E.Z)(e,t),e.create=function(t){return function(e){function n(n){return e.call(this,n,t)||this}return(0,E.Z)(n,e),n}(e)};var n=e.prototype;return n.getScrollHost=function(){return this.scrollHost},n.scrollBy=function(t,e,n="auto"){const i=this.scrollHost;i.scrollBy?i.scrollBy({top:e,left:t,behavior:n}):(i.scrollLeft=i.scrollLeft+t,i.scrollTop=i.scrollTop+e)},n.scrollTo=function(t,e,n="auto"){const i=this.scrollHost,r=i.scrollLeft,o=i.scrollTop;if(i.scrollTo?i.scrollTo({left:t,top:e,behavior:n}):(i.scrollLeft=t,i.scrollTop=e),0===r||!o){const t=new Event("scroll");Object.defineProperty(t,"isMock",{value:!0}),i.dispatchEvent(t)}},n.getScrollOffset=function(){const t=this.viewerRender.$ui.get(0),e=t.parentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{offsetLeft:Math.max(0,n.left-e.left),offsetTop:Math.max(0,n.top-e.top)}},n.getScrollOffsetLeft=function(){return this.getScrollOffset().offsetLeft},n.getScrollOffsetTop=function(){return this.getScrollOffset().offsetTop},n.getScrollTop=function(){return this.scrollHost.scrollTop},n.getScrollLeft=function(){return this.scrollHost.scrollLeft},n.getScrollX=function(){return this.getScrollLeft()},n.getScrollY=function(){return this.getScrollTop()},n.getWidth=function(){let t;return-1!==this.clientWidth?(t=this.clientWidth,this.clientWidth=-1):t=this.scrollHost.clientWidth,t},n.getHeight=function(){let t;return-1!==this.clientHeight?(t=this.clientHeight,this.clientHeight=-1):t=this.scrollHost.clientHeight,t},n.addScrollEventListener=function(e){return t.prototype.addScrollEventListener.call(this,e)},e}(zo);!function(t){t[t.MOVE_TO=1]="MOVE_TO",t[t.LINE_TO=2]="LINE_TO"}(yS||(yS={}));let bS=function(){function t(t,e){this.x=t,this.y=e}var e=t.prototype;return e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.div=function(t){return this.mult(1/t)},e.mult=function(e){return new t(this.x*e,this.y*e)},e.normalize=function(){const t=this.length();return this.div(t)},e.add=function(e){return new t(this.x+e.x,this.y+e.y)},e.toPoint=function(t){return new AS(this.x,this.y,t)},t}(),AS=function(){function t(t,e,n=yS.MOVE_TO){this.x=t,this.y=e,this.type=n}t.fromVec=function(e,n){return new t(e.x,e.y,n)},t.fromPoint=function(e,n){return new t(e.x,e.y,n)};var e=t.prototype;return e.distanceTo=function(t){return this.vectorTo(t).length()},e.vectorTo=function(t){return new bS(t.x-this.x,t.y-this.y)},e.toVector=function(){return new bS(this.x,this.y)},e.newType=function(e){return t.fromPoint(this,e)},t}(),PS=function(){function t(t,e){this.radius=t,this.origin=e}var e=t.prototype;return e.contains=function(t){return this.origin.distanceTo(t)<this.radius},e.intersectsLine=function(t,e){const{x:n,y:i}=t,{x:r,y:o}=e,{x:s,y:a}=this.origin,c=Math.pow(r-n,2)+Math.pow(o-i,2),l=2*((r-n)*(n-s)+(o-i)*(i-a)),h=l*l-4*c*(s*s+a*a+n*n+i*i-2*(s*n+a*i)-this.radius*this.radius),u=[];if(0===h){const s=-l/(2*c),a=new AS(n+s*(r-n),i+s*(o-i));SS(t,e,a)&&u.push(a)}else if(h>0){const s=(-l-Math.sqrt(h))/(2*c),a=(-l+Math.sqrt(h))/(2*c),d=new AS(n+s*(r-n),i+s*(o-i)),f=new AS(n+a*(r-n),i+a*(o-i));SS(t,e,d)&&u.push(d),SS(t,e,f)&&u.push(f)}return u},t}();function SS(t,e,n){const i=Math.min(t.x,e.x),r=Math.max(t.x,e.x),o=Math.min(t.y,e.y),s=Math.max(t.y,e.y);return n.x>=i&&n.x<=r&&n.y>=o&&n.y<=s}let CS=function(){function t(t){this.radius=t}return t.prototype.erase=function(t,e){const n=t.reduce(((t,e)=>(e.type===yS.MOVE_TO&&t.push([]),t[t.length-1].push(e),t)),[]),i=new PS(this.radius,e);return n.forEach((t=>{let e=0;for(;e<t.length-1;){const n=t[e],r=t[e+1];if(i.contains(n))if(i.contains(r))t.splice(e,1,r.newType(yS.MOVE_TO)),e++;else{const o=i.intersectsLine(n,r);1===o.length&&t.splice(e,1,o[0].newType(yS.MOVE_TO)),e++}else{if(i.contains(r)){const o=i.intersectsLine(n,r);1===o.length&&(t.splice(e+1,1,o[0].newType(yS.LINE_TO),r.newType(yS.MOVE_TO)),e++)}else{const o=i.intersectsLine(n,r);2===o.length&&(t.splice(e+1,0,o[0].newType(yS.LINE_TO),o[1].newType(yS.MOVE_TO)),e+=2)}e++}}})),n.reduce(((t,e)=>t.concat(e)),[])},t}();m(6386);const ES={NotYetVerified:"notYetVerified",Verified:"verified"};function xS(t){let e=[];if(t){let n=t.getPDFForm();if(n){let{fields:t}=n;t.length&&(e=t.filter((t=>t.getType()===xe.Sign)))}}return e}function DS(t){let e=!1,n=xS(t);return n.length&&(e=n.some((t=>t.signatureInfo&&t.signatureInfo.isSigned&&t.signatureInfo.isCertified))),e}function IS(t){let e=!1,n=xS(t);return n.length&&(e=n.some((t=>t.signatureInfo&&t.signatureInfo.isSigned&&!t.signatureInfo.isCertified))),e}const RS="uniqueSerialNumber",TS="TrustedCertificateList";let FS=!1,_S=[{indexKey:"type"},{indexKey:"serialNumber"}];const kS={Custom:"Custom",FATL:"FATL",EUTL:"EUTL"},MS=()=>new $u(TS,"FoxitPDFSDKForWeb_"+TS,1,RS,_S);async function OS(t){let e=MS();if(e)try{return await e.add(t),t}catch(t){return console.error(t),!1}return!1}async function LS(t){try{let e=MS();e&&await e.remove(t)}catch(t){console.error(t)}}async function NS(t){try{let e=MS();if(e)for(let n=0;n<t.length;n++){const i=t[n];await e.remove(i)}}catch(t){console.error(t)}}function BS(){return"true"==localStorage.getItem("isFATLAndEUTLListInit")||FS}async function VS(t){BS()||await US(t),await HS(t);let e=MS();if(!e)return[];try{return await e.getAll()||[]}catch(t){return console.error(t),[]}}async function US(t,e=!1){if(!BS()||e){FS=!1;try{let n=await HS(t,e);if(n.length){n.map((t=>{t.usage=3}));let t=MS();if(t){let e=await t.getByIndex("type",kS.Custom)||[];await t.clear();let i=n.concat(e);i.forEach((t=>{let{serialNumber:e,country:n,issuerName:i}=t||{};t[RS]=`${e}_${n}_${i}`}));let r=function(t,e){const n=new Map;return t.filter((t=>!n.has(t[e])&&n.set(t[e],1)))}(i,RS);await t.addItems(r),FS=!0}}}catch(t){FS=!1,console.error(t)}finally{localStorage.setItem("isFATLAndEUTLListInit",FS)}}}async function HS(t,e=!1){try{let{static_FATLUrl:i,static_EUTLUrl:r}=((n=t.libPath).endsWith("/")||(n+="/"),{static_FATLUrl:{url:`${n}certFATLAndEUTL/tsfile.foxitdata1?t=${(new Date).getTime()}`,trust_type:1,type:kS.FATL},static_EUTLUrl:{url:`${n}certFATLAndEUTL/eutlfile.foxitdata1?t=${(new Date).getTime()}`,trust_type:2,type:kS.EUTL}}),o=[i,r];const s=await t.getWebPDFJR(),a=await s.getFATLAndEUTLList(o,e);return Promise.resolve(a)}catch(t){return Promise.resolve([])}var n}async function jS(t,e,{isCertTrusted:n,isCertTrustedRoot:i}={}){let r=e.getName(),o={},s={};try{let r=await async function(t,e,n,i){let r=e.getName(),o=function(t){let e=t.customs&&t.customs.getVerifySignatureRule?t.customs&&t.customs.getVerifySignatureRule:void 0,n="function"==typeof e?e():{},{is_verify_signature:i=!0,use_expired_tst:r=!0,ignore_doc_info:o=!1,time_type:s=0,verifyDocWhenOpened:a=!0,untrustedAlterInfo:c=!1}=n;return{is_verify_signature:i,use_expired_tst:r,ignore_doc_info:o,time_type:s,verifyDocWhenOpened:a,untrustedAlterInfo:c}}(t),s={[r]:!!e.signatureInfo&&e.signatureInfo.isCertified},a=await VS(t)||[];return o={...o,trustedCertificateList:a,isCertTrusted:n,isCertTrustedRoot:i,isCertifiedMap:s},o}(t,e,n,i);o=await e.Verify(r),s=await e.getDigitalSignatureInfo(r.trustedCertificateList,!1)}catch(t){console.error(t),o={},s={}}let a=o[r]?o[r]:{};a.checkTime=ut(new Date,"YYYY.MM.DD HH:mm:ssZ",{separator:"'",suffix:"'"});let c={...e.signatureInfo,...s,...a};return e.signatureInfo.status===ES.NotYetVerified&&(e.signatureInfo.status=ES.Verified,c.status=ES.Verified),{name:r,signatureInfo:c}}Date.now(),Math.random();var $S=(t,e="en-US")=>{t.endsWith("/")||(t+="/"),e=e.replace(/(\w*?)-(\w*)/,((t,e,n)=>e+"-"+n.toUpperCase()));return((n,i,r)=>({[r]:{Approved:{url:`${t}stamps/${e}/DynamicStamps/Approved.pdf`,fileType:"pdf"},Revised:{url:`${t}stamps/${e}/DynamicStamps/Revised.pdf`,fileType:"pdf"},Reviewed:{url:`${t}stamps/${e}/DynamicStamps/Reviewed.pdf`,fileType:"pdf"},Received:{url:`${t}stamps/${e}/DynamicStamps/Received.pdf`,fileType:"pdf"},Confidential:{url:`${t}stamps/${e}/DynamicStamps/Confidential.pdf`,fileType:"pdf"}},[i]:{Accepted:{url:`${t}stamps/${e}/SignHere/Accepted.pdf`,fileType:"pdf"},Witness:{url:`${t}stamps/${e}/SignHere/Witness.pdf`,fileType:"pdf"},SignHere:{url:`${t}stamps/${e}/SignHere/SignHere.pdf`,fileType:"pdf"},Rejected:{url:`${t}stamps/${e}/SignHere/Rejected.pdf`,fileType:"pdf"},Initial:{url:`${t}stamps/${e}/SignHere/Initial.pdf`,fileType:"pdf"}},[n]:{Approved:{url:`${t}stamps/${e}/StandardStamps/Approved.pdf`,fileType:"pdf"},Void:{url:`${t}stamps/${e}/StandardStamps/Void.pdf`,fileType:"pdf"},Verified:{url:`${t}stamps/${e}/StandardStamps/Verified.pdf`,fileType:"pdf"},Revised:{url:`${t}stamps/${e}/StandardStamps/Revised.pdf`,fileType:"pdf"},Reviewed:{url:`${t}stamps/${e}/StandardStamps/Reviewed.pdf`,fileType:"pdf"},Received:{url:`${t}stamps/${e}/StandardStamps/Received.pdf`,fileType:"pdf"},Final:{url:`${t}stamps/${e}/StandardStamps/Final.pdf`,fileType:"pdf"},Expired:{url:`${t}stamps/${e}/StandardStamps/Expired.pdf`,fileType:"pdf"},Emergency:{url:`${t}stamps/${e}/StandardStamps/Emergency.pdf`,fileType:"pdf"},Draft:{url:`${t}stamps/${e}/StandardStamps/Draft.pdf`,fileType:"pdf"},Confidential:{url:`${t}stamps/${e}/StandardStamps/Confidential.pdf`,fileType:"pdf"},Completed:{url:`${t}stamps/${e}/StandardStamps/Completed.pdf`,fileType:"pdf"}}})).apply(void 0,["Static","SignHere","Dynamic"])};m(4266);const WS=window.MozWebSocket||window.WebSocket,YS=()=>{};let GS=function(){function t(t,e=location.origin){this.websocketServer=t,this.apiServer=e,this.messageReceiver=YS,this.closeEventListener=YS,this.websocketServer=t.trim(),this.apiServer=e.trim()}var e=t.prototype;return e.isConnected=function(){if(this.socket){switch(this.socket.readyState){case WS.OPEN:return Promise.resolve(!0);case WS.CLOSED:case WS.CLOSING:return Promise.resolve(!1)}return this.connectStatusDefer.promise}return Promise.resolve(!1)},e.connect=function(t){if(this.socket)switch(this.socket.readyState){case WS.CLOSED:case WS.CLOSING:break;default:this.socket.onclose=null,this.socket.close()}let e;return this.connectStatusDefer=(0,_.createDeferred)(),this.socket=new WS(ea(this.websocketServer,"collab-ws/ws")+"?shareId="+t),this.socket.onmessage=t=>{"\n"!==t.data&&this.messageReceiver(t.data)},this.socket.onclose=()=>{this.closeEventListener(),clearInterval(e)},this.socket.onopen=()=>{e=setInterval((()=>{this.socket.send("\t")}),1e4),this.connectStatusDefer.resolve(!0)},this.socket.onerror=()=>{this.connectStatusDefer.resolve(!1)},this.connectStatusDefer.promise},e.disconnect=function(){return this.socket.onclose=null,this.socket.close(),Promise.resolve(!0)},e.createSession=function(t,e){const n=ea(this.apiServer,"collab-ws","share"),i=new FormData;let r;if(e.type===xb.FROM_FILE){let t=e.file;t instanceof Blob||(t=new Blob([t],{type:"application/pdf"})),i.append("file",t,e.options.fileName),r=JSON.stringify(e,((t,e)=>{if("file"!==t)return e}))}else r=JSON.stringify(e);return i.append("open-file-params",r),fetch(n,{method:"POST",body:i}).then((t=>t.json())).then((t=>t.shareId))},e.getSessionInfo=function(t){return fetch(ea(this.apiServer,"collab-ws/session/",t)).then((t=>{const e=t.headers.get("session-info");if("null"!==e&&e){const n=JSON.parse(decodeURIComponent(e)),i=n.openFileParams;return i.type===xb.FROM_FILE?t.blob().then((t=>(i.file=t,n))):n}}))},e.send=function(t,e){return this.socket&&this.socket.send(e),Promise.resolve()},e.getLostData=function(t,e){const n=ea(this.apiServer,"collab-ws","data",t,""+e);return fetch(n).then((function(t){return t.json()}))},e.registerMessageReceiver=function(t){this.messageReceiver=t},e.registerLostConnectionListener=function(t){this.closeEventListener=t},e.destroy=function(){this.socket&&this.socket.close()},t}();var KS=m(8272),qS=m.n(KS);let zS=function(){function t(t){this.title=t,this.step=0;const e=document.createElement("div");e.innerHTML=qS()({title:t}),this.element=e.firstElementChild,e.removeChild(this.element),this.totalElement=this.element.querySelector(".fv__ui-print-process-total"),this.currentElement=this.element.querySelector(".fv__ui-print-process-current"),this.progressElement=this.element.querySelector(".fv__ui-print-process-percent")}var e=t.prototype;return e.reset=function(){this.updateProgress(0,0)},e.show=function(){this.reset(),document.body.appendChild(this.element)},e.updateProgress=function(t,e){let n=this.total;this.total=e,n!==e&&(this.totalElement.innerText=e),this.step=t,this.currentElement.innerText=t,this.progressElement.style.cssText+=`\n            width: ${t/e*100}%;\n        `},e.close=function(){document.body.removeChild(this.element)},t}(),JS=function(t){function e(){var e;return(e=t.call(this)||this).calloutShape=new vu,e.addDestroyHook((()=>{e.calloutShape.hide(),e.startPoint=void 0})),e}(0,E.Z)(e,t);var n=e.prototype;return n.prepare=function(t){this.pageRender=t;const e=t.$handler.find(".fv__create-callout-canvas")[0];e?this.shapeDom=e:(this.shapeDom=document.createElement("canvas"),this.shapeDom.style.cssText+="position: absolute",this.shapeDom.classList.add("fv__create-callout-state-canvas"),t.$handler.append(this.shapeDom))},n.start=function(t){this.startPoint=t},n.update=function(t,e){var n;if(!this.startPoint)return;if(!this.pageRender)return;if(!this.shapeDom)return;const i=this.pageRender,r=i.page,o=Du.calcCalloutPosition(y({start:[this.startPoint.x,this.startPoint.y],end:[t.x,t.y],page:r,width:r.getMediaWidth(),height:r.getMediaHeight(),borderStyle:{style:0},endingStyle:0,scale:i.scale,rotate:i.rotate},e||{}));if(!o||o.invalid)return;const s=(null===(n=o.calloutLinePoints)||void 0===n?void 0:n.map((({x:t,y:e})=>r.getDevicePoint([t,e],i.scale,i.rotate))))||[],a=r.getDeviceRect(o.rect,i.scale,i.rotate),c=r.getDeviceRect(o.innerRect,i.scale,i.rotate);(0,_.cssText)(this.shapeDom,{left:a.left+"px",top:a.top+"px"}),this.calloutShape.init(null,this.shapeDom),this.calloutShape.show(s,a,c),this.annotInfo=o},n.complete=function(){const t=this.pageRender;if(!t)return Promise.reject(new Error("[CreateFreeTextCalloutService] not prepared!"));if(!this.annotInfo)return Promise.reject(new Error("[CreateFreeTextCalloutService] Cannot create callout before mouse moved!"));this.calloutShape.hide(),this.startPoint=void 0;const e=t.pdfViewer;return t.getPDFPage().then((n=>{const i=e.getAnnotDefaultProperty("freetext","FreeTextCallout");let r=16777215;void 0!==i.fillColor&&(r=i.fillColor);let o=y({},{type:"freetext",intent:"FreeTextCallout",subject:e.i18n.t("viewer_:annotSubjects.Callout"),"interior-color":r,rotation:((360-90*n.getRotation()-t.getRotation())%360+360)%360,flags:4},this.annotInfo,i);return n.addAnnot(o)})).then((n=>{var i;const r=n[0],o=null===(i=t.annotsRender)||void 0===i?void 0:i.getAnnotRender(r.getId()).component;return e.eventEmitter.emit(nt.addAnnotSuccess,o.annot),n}))},e}(_.Disposable);let ZS=2,XS=10,QS=function(t){function e(e){var n;n=t.call(this,e)||this;const i=e.pdfViewer.store;return n.multipage=i.getCurrentValue("multipage-"+n.constructor.getName(),ZS),n.pageSpacing=i.getCurrentValue("pageSpacing-"+n.constructor.getName(),XS),n.isJump=!1,n.isCurrentViewMode=!0,n.lastCurrentPageIndex=0,n}(0,E.Z)(e,t),e.getName=function(){return"multipage-view-mode"},e.setMultipage=function(t){ZS=t},e.getMultipage=function(){return ZS},e.setPageSpacing=function(t){XS=t},e.getPageSpacing=function(){return XS};var n=e.prototype;return n.getJQItems=function(){return D()(t.prototype.getItems.call(this))},n.into=function(e,n){this.isCurrentViewMode=!0,t.prototype.into.call(this,e,n);const i=this.constructor.getName();let r="";for(let t=1;t<=this.multipage;t++)t%2==0?(r=r+"."+i+" .fv__pdf-view-mode-item:nth-of-type("+this.multipage+"n +"+t+") {justify-self: start;}",r=r+".facing-cover-continuous-view-mode."+i+" .fv__pdf-view-mode-item:nth-of-type("+this.multipage+"n +"+t+") {justify-self: end;}"):(r=r+i+" .fv__pdf-view-mode-item:nth-of-type("+this.multipage+"n +"+t+") {justify-self: end;}",r=r+".facing-cover-continuous-view-mode."+i+" .fv__pdf-view-mode-item:nth-of-type("+this.multipage+"n +"+t+") {justify-self: start;}"),t%this.multipage==0&&(r=r+".facing-cover-continuous-view-mode."+i+" .fv__pdf-view-mode-item:nth-of-type("+this.multipage+"n +"+t+") {justify-self: end;}");const o=["<style>","."+i+" {","margin: 0 auto;","width: min-content;","display: grid;","grid-template-columns: repeat("+this.multipage+", 1fr);","justify-items: end;","}","."+i+".facing-cover-continuous-view-mode::before {",'content: "";',"width: calc("+100/this.multipage+"%);","}","."+i+"::after {",'content: "";',"width: -webkit-fill-available;","}","."+i+" .fv__pdf-view-mode-item {","display: -webkit-box;","display: -ms-flexbox;","display: -webkit-flex;","display: flex;","-ms-flex-pack: center;","-ms-flex-align: center;","-ms-justify-content: flex-end;","-webkit-justify-content: flex-end;","justify-content: flex-end;","align-items: center;","margin-left: 0;","}",r,"."+i+" .fv__pdf-view-mode-item {","margin-right: "+this.pageSpacing+"px;","}","."+i+" .fv__pdf-page-layout{","width: 100%;","}","</style>"].join("");this.$style=D()(o),this.docRender.$container.after(this.$style),this.docRender.$container.addClass(this.constructor.getName())},n.bindScrollEvent=function(){if(this._unwatchScrollEvent&&this._unwatchScrollEvent(),!this.docRender)return;const t=this.docRender.viewerRender.scrollWrap;let e=!1;const n=t.addScrollEventListener((()=>{clearTimeout(this.scrollEventTimer),this.scrollEventTimer=setTimeout((()=>{if(e)return;let t=this.docRender;if(!t)return;this.isJump=!1;let n=t.pagesRender;n&&n.renderVisiblePages().then((()=>{t.isGoto?setTimeout((()=>{this.isCurrentViewMode&&(t.isGoto=!1)}),40):t.setCurrentPageIndex(this.getCurrentPageIndex())}),(function(){}))}),100)}));this._unwatchScrollEvent=()=>{e=!0,this._unwatchScrollEvent=()=>{},n()}},n.out=function(){this.isCurrentViewMode=!1,this.docRender.$container.removeClass(this.constructor.getName()),this.docRender.pagesRender.$ui.removeAttr("style"),this.$style&&this.$style.remove(),this._unwatchScrollEvent&&this._unwatchScrollEvent(),this.getJQItems().css({width:"",height:""});const e=this.docRender.pagesRender.pageRenders;for(const t in e){e[t].$ui[0].style.maxWidth=null}t.prototype.out.call(this)},n.renderViewMode=function(t,e,n,i,r){if(!this.docRender)return;let o=this.getMaxPageWidth(),s=this.multipage,a=(s-1)*this.pageSpacing;this.docRender.pagesRender.$ui.css({width:o*s*e+a})},n.fixMargin=function(t,e){let n=this.multipage,i=(n-1)*this.pageSpacing;this.docRender.pagesRender.$ui.css({width:t*n+i})},n.getPagesLayout=function(){let{pageCache:t}=this.docRender.doc,e=t.length,n=this.multipage,i=Math.ceil(e/n),r=Array(n).fill(0),o=Array(i).fill(0);for(let i=0;i<n;i++)for(let o=i;o<e;o+=n)r[i]=Math.max(r[i],t[o].getPxWidth());for(let e=0;e<i;e++)for(let i=0;i<n;i++)t[e*n+i]&&(o[e]=Math.max(o[e],t[e*n+i].getPxHeight()));let s=[];return t.forEach(((t,e)=>{s.push({width:r[e%n],height:o[Math.floor(e/3)]})})),s},n.getMaxPageWidth=function(){let t=0,e=this.docRender.doc.getPageSizesSync();const n=this.docRender.getRotation();let i;i=90===n||270===n?"height":"width";for(let n in e){let r=4*e[n][i]/3;r>t&&(t=r)}return t},n.getFitHeight=function(t){let e=this.docRender.viewerRender.scrollWrap;return e.getHeight()-e.getScrollOffsetTop()},n.getFitWidth=function(t){let e=this.getMaxPageWidth(),n=this.docRender.viewerRender.scrollWrap,i=this.multipage;const r=getComputedStyle(this.pageDOMs[t]),o=ho(r.marginLeft)+ho(r.marginRight);let s=(n.getWidth()-o-i*this.pageSpacing)/i,a=this.docRender.doc.getPageSize(t);a||(a=this.docRender.doc.getPageSize(0));const c=this.docRender.getRotation();let l;return l=a?90===c||270===c?a.height:a.width:90===c||270===c?this.getFitHeight(t):s,s*l*4/(3*e)},n.jumpToPage=function(t,{x:e=0,y:n=0}){this.isJump=!0;let i=this.getJQItems();t>=i.length?t=i.length-1:t<0&&(t=0);let r=i.eq(t);const o=this.docRender.viewerRender.scrollWrap.getOffsetOfPageElement(r[0]);let s=o.left+e,a=o.top+n;this._unwatchScrollEvent&&this._unwatchScrollEvent(),this.docRender.viewerRender.scrollWrap.scrollTo(s,a),this.currentJumpPageIndex=t,this.docRender.setCurrentPageIndex(t),setTimeout((()=>{this.isCurrentViewMode&&this.bindScrollEvent()}))},n.getCurrentPageIndex=function(){if(this.isJump)return this.currentJumpPageIndex;let t,e=this.getJQItems(),n=this.docRender.viewerRender.scrollWrap,i=n.getScrollTop(),r=i+n.getHeight(),o=n.getScrollLeft(),s=o+n.getWidth(),a=[];for(let t=0;t<e.length;t++){let n,c,l=e[t],h=D()(l).width(),u=D()(l).height(),d=l.offsetTop,f=d+u,p=l.offsetLeft,g=p+h;(d<=i&&f>i&&f<=r?n=f-i:d>=i&&f<=r?n=u:d<=i&&f>=r?n=r-i:d>=i&&d<r&&f>=r&&(n=r-d),n)&&(p<=o&&g>o&&g<s?(c=g-o,a.push({index:t,area:n*c})):p>=o&&g<s?(c=h,a.push({index:t,area:n*c})):p<=o&&g>s?(c=s-o,a.push({index:t,area:n*c})):p>=o&&p<s&&g>s&&(c=s-p,a.push({index:t,area:n*c})))}let c=0;for(let e=0;e<a.length;e++)a[e].area>c&&(c=a[e].area,t=a[e].index);return void 0!==t&&(this.lastCurrentPageIndex=t),this.lastCurrentPageIndex},n.getNextPageIndex=function(){const t=this.docRender.doc.getPageCount();let e=this.getCurrentPageIndex();if(e<t-1){let t=this.docRender.viewerRender.scrollWrap,n=this.docRender.pagesRender.$ui.width(),i=t.getWidth()-16,r=this.multipage;if(i>=n){e=Math.ceil((e+1)/r)*r}else e++}return e>t-1&&(e=t-1),e},n.getPrevPageIndex=function(){let t=this.getCurrentPageIndex();if(t>0){let e=this.docRender.viewerRender.scrollWrap,n=this.docRender.pagesRender.$ui.width(),i=e.getWidth()-16,r=this.multipage;if(i>=n){t=(Math.ceil((t+1)/r)-2)*r}else t--}return t<0&&(t=0),t},e}(lo);const tC=
/**!
 * Dragable 拖拽排序插件
 * 
 * option = {
 * 	 draggable: '', // [必填] 允许拖拽的节点类名
 * 	 dragClass: '', // 正在被拖拽中的css类名
 * 	 chosenClass: '', // 被选中项的css 类名
 *   dragOverStrict: true, // 是否严格的dragover事件源, true: 事件源始终是 draggable参数指向的dom, false: 可以是当前拖拽经过的任何子节点
 *   endStrict: true, // onEnd将判断from和to是否为同一个dom,true：同一dom将不调用onEnd false: 不判断，onEnd都会调用
 *   inventedNode: null, // 自定义虚拟节点，null则使用默认，处于第一位
 * 	 onStart: '', // 拖拽开始事件
 *   onHover: '', // 拖拽悬停事件
 *   onEnd: ''// 拖拽结束事件
 * }
 * 
 * 注意：可拖拽的节点尽量不要使用a标签，在IE下兼容不好
 */
function(t){if("undefined"==typeof window||!window.document)return function(){throw new Error(t+".js requires a window with a document")};var e={add:function(t,n,i,r){e._eventFun=function(t){i&&i.call(r,t)},t.addEventListener(n,e._eventFun,!1)},remove:function(t,n){t.removeEventListener(n,e._eventFun,!1),e._eventFun=void 0}};Node.prototype.parents=function(t){var e=this.parentNode;return this.classList.contains(t)||"BODY"===e.nodeName?this:e.parents(t)},Node.prototype.hasChildren=function(t){for(var e=t;e;){if(this===e)return!0;e=e.parentNode}return!1};var n=function(t,e){if(t){var n={};if(t.dataset)n=t.dataset;else for(var i=0;i<t.attributes.length;i++){var r=t.attributes[i];if(0===r.name.indexOf("data-")){var o=r.name.replace("data-",""),s=r.value;n[o]=s}}for(var o in e){s=e[o];t.dataset?t.dataset[o]=s:t.setAttribute("data-"+o,s)}return n}};function i(e,n){if(this.options=y({draggable:"",dragClass:t+"-drag",chosenClass:t+"-chosen",treeItemIconClass:"tree-item-icon",dragOverStrict:!0,endStrict:!0,inventedNode:null,onStart:"",onBeforeHover:"",onHover:"",onEnd:"",allowDrag:!0,excludeDraggable:"",enabled:!0,checkIsMoveToRight:()=>!this.options.dragOverStrict&&this.end.classList.contains(this.options.treeItemIconClass)},n),!e)throw new Error("el must be a dom node: "+e);if(!this.options.draggable)throw new Error("draggable class cannot be a empty string: "+this.options.draggable);this.options.enabled&&(this.el=e,this._bindEvent(),this._appendStyle(),this._cache={overData:[],doms:[]})}return"function"!=typeof Object.assign&&(Object.prototype.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}),i.prototype={_addClass:function(t,e,n){n&&this._removeClass(e,t),t.classList.add(e)},_removeClass:function(t,e){var n=this;(t=t instanceof Array?t:[t]).forEach((function(t){for(var i=n.el.querySelectorAll("."+t),r=0;r<i.length;r++){var o=i[r];e&&o===e||o.classList.remove(t)}}))},_initDragEvent:function(t){if(t){var e=this;t.draggable=this.options.allowDrag&&this._isEnabled(t),t.ondragstart=function(n){e._isEnabled(t)?e._onDragstart.call(e,n.target):n.preventDefault()},t.ondragover=function(t){var i=t.currentTarget;if(!1===(e.options.onBeforeHover&&e.options.onBeforeHover({dom:i,attrs:y(n(i),{text:i.innerText.trim()})})))return;const r={mouseX:ss(t),mouseY:as(t)};t.preventDefault(),e.options.enabled&&e._onDragover.call(e,t.target,r)},t.ondragenter=function(t){var i=t.currentTarget;if(!1===(e.options.onBeforeHover&&e.options.onBeforeHover({dom:i,attrs:y(n(i),{text:i.innerText.trim()})})))return;t.stopPropagation();const r={mouseX:ss(t),mouseY:as(t)};e.options.enabled&&e._onDragenter.call(e,t.target,r)},t.ondragleave=function(t){const n={mouseX:ss(t),mouseY:as(t)};e.options.enabled&&e._onDragleave.call(e,t.target,n)},t.ondragend=function(t){const n={mouseX:ss(t),mouseY:as(t)};e.options.enabled&&e._onDragend.call(e,t.target,n)},t.ondrop=function(t){t.stopPropagation(),t.preventDefault(),e.options.enabled&&e._onDrop.call(e,{target:t.target,files:t.dataTransfer.files,altKey:t.altKey,ctrlKey:t.ctrlKey,mouseX:ss(t),mouseY:as(t)})}}},_getDragImage:function(){var t=document.createElement("img");return t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",t.width=0,t.height=0,t.opacity=0,t},_setInventedNode:function(){var t=this.options.draggable;if(this._inventedNodeClassName="_"+t,!this.el.querySelector("."+this._inventedNodeClassName)){var e=this.options.inventedNode;if(e)e.classList.add(t),e.classList.add(this._inventedNodeClassName),this._initDragEvent(e),this.el.insertBefore(e,this.el.lastChild.nextSibling);else{e=document.createElement("div");var i=this.el.querySelectorAll("."+t)[0].getBoundingClientRect();e.style.position="fixed",e.style.width=i.width+"px",e.style.height=parseInt(i.height/2)+"px",e.style.top=i.top+"px",e.style.left=i.left+"px",e.style.transform="rotateZ(180deg)",e.style.borderWidth="1px",e.style.overflow="hidden",e.style.backgroundColor="rgba(0, 0, 0, 0)",e.style.zIndex="999",n(e,{id:"-1"}),e.classList.add(t),e.classList.add(this._inventedNodeClassName),this._initDragEvent(e),this.el.insertBefore(e,this.el.childNodes[0])}}},_removeInventedNode:function(){var t=this.el.querySelector("."+this._inventedNodeClassName);t&&(t.remove?t.remove():t.removeNode(!0))},_isTopest:function(t){var e=this.el.getBoundingClientRect();return t.clientY-e.y<12},destroy:function(){e.remove(this.el,"pointerdown")},_bindEvent:function(){e.add(this.el,"pointerdown",this.setDraggable,this);const t=t=>{let e,n;if(t instanceof TouchEvent){const i=t.changedTouches||t.touches;if(1!==i.length)return;const r=i[0];e=r.clientX,n=r.clientY}else"clientX"in t&&(e=t.clientX,n=t.clientY);return document.elementFromPoint(e,n).closest("."+this.options.draggable)};if(_.isTouchDevice&&!_.isChromebook){let e,i,r=!1;const o=n=>{if(!this.options.enabled)return;const o=t(n);if(!o)return;e=o,i=null,r=!0,document.addEventListener("pointerup",(t=>{r=!1,this.end=i,this._onDragend()}),{once:!0,capture:!0});const s={mouseX:ss(n),mouseY:as(n)};this._onDragstart.call(this,o,s),n.preventDefault()},s=o=>{if(!r)return void(i=void 0);o.preventDefault();const s={mouseX:ss(o),mouseY:as(o)},a=t(o);if(!a)return i=a,void(this.options.onHover&&this.options.onHover({dom:a,info:s}));a!==e&&(i!==a&&(a&&(this._onDragenter.call(this,a,s),setTimeout((()=>{this.end=a,this.setBlwAndBrw(a),this._addClass(a,this.options.chosenClass);var t=y(n(a),{text:a.innerText.trim()});this.options.onHover&&a!==this.from&&this.options.onHover({dom:a,attrs:t,info:s})}))),i&&this._onDragleave.call(this,i,s)),a&&a.ondragover(o)),i=a};this.el.addEventListener("pointerdown",o,{capture:!0,passive:!1}),this.el.addEventListener("touchmove",s,{capture:!0,passive:!1}),this.unbindEventOnDocument=()=>{this.el.removeEventListener("pointerdown",o,{capture:!0,passive:!1}),this.el.removeEventListener("mousemove",s,{capture:!0,passive:!1})}}},_appendStyle:function(){this._style=document.createElement("style"),document.head.appendChild(this._style)},setDraggable:function(t){var e;this.options.draggable.trim()&&(e=this.el.querySelectorAll("."+this.options.draggable)),e&&0!==e.length||(e=this.el.children);for(var n=0;n<e.length;n++){var i=e[n];this._initDragEvent(i)}if(this._cache.doms=e,this.options.excludeDraggable){var r=this.el.querySelectorAll("."+this.options.excludeDraggable)||[];for(n=0;n<r.length;n++){(i=r[n]).draggable=!1}}},_onDragstart:function(t,e){var i=this;setTimeout((function(){i._setInventedNode()}),0),this._addClass(t,this.options.dragClass,!0),this.end=null,this.from=t;var r=t.parents(this.options.draggable);this.fromAttrs=y(n(r),{text:r.innerText.trim()}),this.options.onStart&&this.options.onStart({dom:this.from,attrs:this.fromAttrs,info:e})},_onDragover:function(t,e){const i=this._getTarget(t);if(this.end=i,this.setBlwAndBrw(t,e),this._addClass(i,this.options.chosenClass),-1===this._cache.overData.indexOf(i)&&(this._cache.overData=[]),this._cache.overData.push(i),20===this._cache.overData.length){var r=y(n(i),{text:i.innerText.trim()});this.options.onHover&&i!==this.from&&this.options.onHover({dom:i,attrs:r})}},_onDragenter:function(t,e){const n=this._getTarget(t);this.end=n,this._addClass(n,this.options.chosenClass,!0),this.setBlwAndBrw(t,e)},_getTarget:function(t){var e=this.options.dragOverStrict?t.parents(this.options.draggable):t;return"#text"===e.nodeName&&(e=e.parentNode),e},setBlwAndBrw:function(t,e){let n=this.options.checkIsMoveToRight(t,e);n?(this.end.style.setProperty("--blw","0"),this.end.style.setProperty("--brw","2px")):(this.end.style.setProperty("--blw","2px"),this.end.style.setProperty("--brw","0")),this.isMoveToRight=n},_onDragleave:function(t){this._removeClass(this.options.chosenClass),this.end=null,this._cache.overData=[],this.options.onHover&&this.options.onHover({dom:null})},_onDrop:function({target:t,files:e,altKey:i,ctrlKey:r}){const o=this.end,s=o&&o.parents(this.options.draggable),a=s&&y(n(s),{text:s.innerText.trim()}),c=this.isMoveToRight;this.options.onDrop&&this.options.onDrop({endAttrs:a,dragFiles:e,isMoveToRight:c,target:t}),t.querySelector("."+this.options.chosenClass)||(this.end.altKey=i,this.end.ctrlKey=r)},_onDragend:function(){this._cache.overData=[],this._removeClass([this.options.chosenClass]),this._removeInventedNode();var t=this.end,e=t&&t.parents(this.options.draggable),i=e&&y(n(e),{text:e.innerText.trim()});e===this.from&&this.options.endStrict||this.options.onEnd&&this.options.onEnd({from:this.from,fromAttrs:this.fromAttrs,end:t,endAttrs:i,isMoveToRight:this.isMoveToRight})},destory:function(){e.remove(this.el,"pointerdown"),document.head.removeChild(this._style),this._cache.doms.forEach((function(t){t.removeAttribute("draggable"),t.ondragstart=null,t.ondragover=null,t.ondragenter=null,t.ondragleave=null,t.ondragend=null,t.ondrop=null})),this._cache=null},destroy:function(){this.options.enabled&&this.destory()},_isEnabled(t){return this.options.enabled&&(!t||!("true"===t.getAttribute("disabled-drag")))}},i.create=function(t,e){return new i(t,e)},i.version="1.0.0",i}("Draggable");var eC=tC;var nC={cipherNone:0,cipherRC4:1,cipherAES:2};var iC={ZoomXYZ:"ZoomXYZ",ZoomFitPage:"ZoomFitPage",ZoomFitHorz:"ZoomFitHorz",ZoomFitRect:"ZoomFitRect"},rC={ThreadAction:gr,ResetFormAction:ar,URIAction:Ji,JavaScriptAction:ir,HideAction:dr,GoToAction:ur,SubmitFormAction:or,LaunchAction:Qi,ImportDataAction:lr,NamedAction:er,SetOCGStateAction:mr,ActionFactory:yr,ZoomMode:iC};let oC=function(){function t(t){this.engine=t,this.api=t.api}var e=t.prototype;return e.combineFormsToCSV=function(t,e){return this.api.combineFormsToCSV(t,e)},e.destroy=function(){this.engine=null,this.api=null},t}();var sC=oC;let aC=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getTileConfig=function(t=this.scale,e=this.rotate){const n=this.pdfViewer.getSmartScale(t),i=this.pdfViewer.config.tileSize,r=this.page.getDeviceRect(this.pdfRect,1,e),o=this.page.getDeviceRect(this.pdfRect,n,e),s=o.right-o.left,a=o.bottom-o.bottom;return[Math.ceil(a/i),Math.ceil(s/i),s,a,i,n,t,e,r.left,r.top]},n.getRenderingData=function(e=this.scale,n=this.rotate){return y(t.prototype.getRenderingData.call(this,e,n),{opacity:this.annotationInfo.opacity,tileConfig:this.getTileConfig(e,n)})},e}(function(){function t(t){this.pdfRect={left:0,right:0,top:0,bottom:0},this.deviceRect={left:0,right:0,top:0,bottom:0},this.annotationInfo=this.getDefaultAnnotInfo(),this.eContainer=document.createElement("div"),this.eContainer.classList.add("fv__viewer-fake-annot-container"),this.pdfViewer=t.pdfViewer,this.pageRender=t.pageRender,this.intent=t.info.intent,(0,_.extendOptions)(this.annotationInfo,t.info,this.getDefaultAnnotConfig()),this.annotationInfo.type=this.getType(),this.page=t.pageRender.page,this.scale=t.pageRender.scale,this.rotate=t.pageRender.rotate,this.pageRender.$annotsContainer.append(this.eContainer)}var e=t.prototype;return e.setRect=function(t){this.deviceRect=t;let e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);const i=V(this.annotationInfo.borderInfo.width)*this.scale*2;if(e<i){const n=.5*(i-e)*(t.right-t.left>0?1:-1);t.right+=n,t.left-=n}if(n<i){const e=.5*(i-n)*(t.bottom-t.top>0?1:-1);t.top-=e,t.bottom+=e}e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);const r=this.pageRender.rotate;this.pdfRect=this.page.reverseDeviceRect(t,this.scale,r),(0,_.cssText)(this.eContainer,{left:t.left+"px",top:t.left+"px",width:e+"px",height:n+"px"})},e.setContent=function(t){this.annotationInfo.content=t,this.annotationInfo.contents=t},e.zoomTo=function(t){this.scale=t},e.draw=function(){this.renderer||(this.renderer=this.generateApRenderer(),this.renderer.prepare(),this.renderer.willRender()),this.renderer.component&&this.renderer.render(this.scale,this.rotate)},e.getContainerElement=function(){return this.eContainer},e.getRenderingData=function(t=this.scale,e=this.rotate){const n=this.pdfViewer.getSmartScale(t),i=this.getDeviceRect(t,e),r=this.getOuterDeviceRect(t,e),o=this.getDeviceRect(n,e);return{annotInfo:this.annotationInfo,annotFlag:new Tr(this.annotationInfo.flags),smartScale:n,rect:r,outerDeviceRect:r,innerDeviceRect:i,engineRenderingRect:o,scale:t,rotate:e,page:this.page}},e.getDeviceRect=function(t,e){return this.page.getDeviceRect(this.pdfRect,t,e)},e.getOuterDeviceRect=function(t,e){const n=this.annotationInfo.borderInfo;if(n&&5===n.style){const n=this.pageRender.getContainerVisibleRect(),i=n.right-n.left,r=n.bottom-n.top,o=this.page.getDeviceRect(this.pdfRect,t,e),s=(i-(o.right-o.left))/2,a=(r-(o.bottom-o.top))/2;return{left:o.left-s,right:o.right+s,top:o.top-a,bottom:o.bottom+a}}return this.page.getDeviceRect(this.pdfRect,t,e)},e.apply=function(){var t;null===(t=this.renderer)||void 0===t||t.afterRender();const e=this.getCreationJSON();return e.endingStyle&&(e.endStyle=e.endingStyle,delete e.endingStyle),e.rect=this.pdfRect,this.page.addAnnot(e).then((t=>{const e=this.pdfViewer.addEventListener("renderAnnotSuccess",(()=>{this.destroy(),e()})),n=t[0];return this.pageRender.annotsRender.activeAnnot(n.getId()),this.pdfViewer.eventEmitter.emit(nt.addAnnotSuccess,n),t}))},e.destroy=function(){var t;null===(t=this.renderer)||void 0===t||t.destroy(),this.getContainerElement().remove()},e.getCreationJSON=function(){return this.annotationInfo},e.getDefaultAnnotInfo=function(){return{borderInfo:{width:2,style:st.BORDER_STYLE.SOLID},color:16711680,opacity:1,flags:4,date:new Date}},e.getDefaultAnnotConfig=function(){const t=this.pdfViewer.getDefaultAnnotConfig();return"function"==typeof t?t(this.getType(),this.getIntent()):{}},e.getIntent=function(){return this.intent},t}()),cC=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getType=function(){return"square"},n.generateApRenderer=function(){return new ml(this)},e}(aC),lC=function(t){function e(){return t.apply(this,arguments)||this}(0,E.Z)(e,t);var n=e.prototype;return n.getType=function(){return"circle"},n.generateApRenderer=function(){return new El(this)},n.apply=function(){return t.prototype.apply.call(this).then((t=>"CircleDimension"===this.annotationInfo.intent?this.page.getMeasureScaleRatio().then((e=>{if(e&&e.scale){const e=this.pdfViewer.getStore().getCurrentValue("measurementData"),n=(t=>{{const e=t.getIoC().getInstanceByClass(si).getMeasurementInfo();return e.markup&&e.caption?e.caption+"\n":""}})(this.pdfViewer),i=Gn(e.displayUnit.name)?this.pdfViewer.i18n.t(`measurement.units.${e.displayUnit.name}`):e.displayUnit.name;return t[0].setContent(n+parseFloat(e.area).toFixed(2)+" sq "+i).then((e=>t))}return t})):t))},e}(aC);var hC=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};let uC=function(){function t(){this.eventEmitter=new qs.EventEmitter,this.isClosed=!1}var e=t.prototype;return e.getSpace=function(t){return[t.id,t.feature].join(".")},e.getAll=function(t){return hC(this,void 0,void 0,(function*(){const e=this.getSpace(t);return this.getSpaceKeys(t).reduce(((t,n)=>{const i=n.slice(e.length+1),r=localStorage.getItem(n);return t[i]=r?JSON.parse(r):null,t}),{})}))},e.get=function(t,e){return hC(this,void 0,void 0,(function*(){const n=this.generateUniqueKey(t,e),i=localStorage.getItem(n);return i?JSON.parse(i):null}))},e.set=function(t,e,n){return hC(this,void 0,void 0,(function*(){if(null==n)return;const i=this.generateUniqueKey(t,e),r=localStorage.getItem(i),o=r?JSON.parse(r):void 0,s=JSON.stringify(n);r!==s&&(localStorage.setItem(i,s),this.emitChangeEvent({context:t,key:e,oldValue:o,newValue:n}))}))},e.removeAll=function(t){return hC(this,void 0,void 0,(function*(){this.getSpaceKeys(t).forEach((e=>{const n=localStorage.getItem(e);localStorage.removeItem(e);localStorage.getItem(e)!==n&&this.emitRemoveEvent({context:t,key:e})}))}))},e.remove=function(t,e){return hC(this,void 0,void 0,(function*(){const n=this.generateUniqueKey(t,e),i=localStorage.getItem(n);localStorage.removeItem(n);localStorage.getItem(n)!==i&&this.emitRemoveEvent({context:t,key:e})}))},e.onChange=function(t){return this.addEventListener("change",t)},e.onRemove=function(t){return this.addEventListener("remove",t)},e.close=function(){this.isClosed=!0},e.addEventListener=function(t,e){const n=t=>{e(t)};return this.eventEmitter.addListener(t,n),()=>{this.eventEmitter.removeListener(t,n)}},e.generateUniqueKey=function(t,e){return[this.getSpace(t),e].join(".")},e.getSpaceKeys=function(t){const e=this.getSpace(t)+".";return Array(localStorage.length).fill(0).map(((t,e)=>localStorage.key(e))).filter((t=>!!t)).filter((t=>0===t.indexOf(e)))},e.emitChangeEvent=function(t){this.eventEmitter.emit("change",t)},e.emitRemoveEvent=function(t){this.eventEmitter.emit("remove",t)},t}(),dC=nt;const fC=wS,pC={Hammer:Ii(),EventEmitter:zs(),jQuery:D()},gC=pC,mC={DiffColor:KA,OverlayComparisonOptionsService:qA,OverlayComparisonService:ZA};let vC={...p,browser:_.browser,receiveImageBuffer:Gs,units:r,download:Ho,createClass:_.createClass,DebounceAsyncTaskExecutor:_.DebounceAsyncTaskExecutor,ThrottleAsyncTaskExecutor:_.ThrottleAsyncTaskExecutor,QueuedAsyncTaskExecutor:_.QueuedAsyncTaskExecutor,areaSelections:l,cipherType:ey,securityEncryptType:{Unknown:-1,None:0,Password:1,Certificate:2,FoxitDRM:3,Custom:4,RMS:5,CDRM:6},keyUsageType:{Unknown:-1,Signature:0,Encryption:1,SignatureAndEncryption:2},securityUtils:h,IndexDBCache:ju,IndexDBStore:$u,fileUtils:s,FileFormat:c,activation:t,keyboardStatus:_.keyboardStatus,getUnitByName:Gn,getClientX:ss,getClientY:as,DebouncePromiseQueue:rt,extendOptions:_.extendOptions,convertFromNumberToHex:_.convertFromNumberToHex,convertFromNumberToRGBA:_.convertFromNumberToRGBA,colorConvertor:_.colorConvertor,setThemeColor:_.setThemeColor,standardColorAsARGBNumber:_.standardColorAsARGBNumber,CalloutPointsReviser:Du,createDeferred:_.createDeferred,Store:_.Store,ValueStore:_.ValueStore,Disposable:_.Disposable,getAnnotThumbnail:function(t){t.endsWith("/")||(t+="/");let e="png",n=12,i=12;return{text:{url:`${t}annotThumbnail/Textbox_12.png`,type:e,width:n,height:i},freetext:{url:`${t}annotThumbnail/Typewriter_12.png`,type:e,width:n,height:i},line:{url:`${t}annotThumbnail/Line_12.png`,type:e,width:n,height:i},square:{url:`${t}annotThumbnail/Square Tool_12.png`,type:e,width:n,height:i},circle:{url:`${t}annotThumbnail/Ellipse Tool_12.png`,type:e,width:n,height:i},polygon:{url:`${t}annotThumbnail/Polygon Tool_12.png`,type:e,width:n,height:i},polyline:{url:`${t}annotThumbnail/Polygon Line Tool_12.png`,type:e,width:n,height:i},highlight:{url:`${t}annotThumbnail/Highlight Tool_12.png`,type:e,width:n,height:i},underline:{url:`${t}annotThumbnail/Underline Tool_12.png`,type:e,width:n,height:i},squiggly:{url:`${t}annotThumbnail/Squiggly Tool_12.png`,type:e,width:n,height:i},strikeout:{url:`${t}annotThumbnail/Strikeout Tool_12.png`,type:e,width:n,height:i},stamp:{url:`${t}annotThumbnail/Stamp_12.png`,type:e,width:n,height:i},caret:{url:`${t}annotThumbnail/Caret Tool_12.png`,type:e,width:n,height:i},ink:{url:`${t}annotThumbnail/Inksig_12.png`,type:e,width:n,height:i},fileattachment:{url:`${t}annotThumbnail/AttachAnnot_12.png`,type:e,width:n,height:i}}},getRanges:function(...t){let e=[];return t.forEach((t=>{"number"==typeof t?e.push(t):e=e.concat(function(t,e){let n=[];for(let i=t;i<=e;i++)n.push(i);return n}(t[0],t[1]))})),Array.from(new Set(e))},DebounceTaskExecutor:_.DebounceTaskExecutor,debounce:_.debounce,eraser:u,observeResize:_.observeResize,throttle:function(t,e=50,n={}){let i,r,o,s,a=0;const c=()=>{a=!1===n.leading?0:Date.now(),i=null,s=t.apply(r,o),i||(r=o=null)};function l(){const l=Date.now();a||!1!==n.leading||(a=l);const h=e-(l-a);return r=this,o=arguments,h<=0||h>e?(i&&(clearTimeout(i),i=null),a=l,s=t.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(c,h)),s}return l.cancel=function(){clearTimeout(i),a=0,i=r=o=null},l},Draggable:eC,BuiltinIntersectionObserver:_.BuiltinIntersectionObserver,getDefaultStamps:$S,Color:_.Color,isEditableElement:_.isEditableElement,attachContextMenuEvent:_.attachContextMenuEvent,eventPath:_.eventPath,createFocusEvent:_.createFocusEvent,dpr:_.dpr,getDPI:_.getDPI};const yC={CreateFreeTextCalloutService:JS};let wC={Log_Levels:_.Log_Levels,LEVELS:_.Log_Levels,setLogLevel:_.setLogLevel,LoggerFactory:_.LoggerFactory};let bC={IStateHandler:Zo,HandStateHandler:xs,StateHandlerConsts:i,StateHandlerUtils:{getDevicePagePoint:cs,deltaDeviceRect:Qo,appendSelectMark:function(t,e){ns(t);let n=D()(document.createDocumentFragment());for(let t=0,i=e.length;t<i;t++){let i=e[t],r=["top:"+i.top+"px","left:"+i.left+"px","width:"+(i.right-i.left)+"px","height:"+(i.bottom-i.top)+"px"].join(";");n.append('<mark class="'+ts+'" style="'+r+'"></mark>')}t.append(n)},removeSelectMark:ns,getBoundingPoint:Xo,getCaretRectAndRotate:is,removeTextSelectedRangeMark:rs,showTextSelectedRangeMark:os},CreateMeasurementService:si},AC={IViewMode:lo,UsualViewModeShortcutHandler:ra,ViewModeShortcutHandler:ao,MultipageViewMode:QS},PC={ProgressComponent:ev,IFloatingTooltip:Lm,IViewerUI:Om,IContextMenu:Mm,TinyViewerUI:ov,TinyFloatingTooltip:Km,TextSelectionTool:Vm};const SC={Activatable:W,CustomOptionsUpdater:rP,ScrollWrap:zo,PDFViewerRendering:T,PDFDocRendering:Ao,PDFPageRendering:H,ProgressComponent:ev,TextSelectionTool:Vm},CC=PC;let EC={constant:y({Cipher_Type:nC,User_Permissions:pe,DataEvents:et,AnnotUpdatedType:ge,ZoomMode:iC},e),actions:rC,common:{FileSpec:Zi},annots:{constant:{Annot_Flags:me,Annot_Type:ti,Annot_Unit_Type:Fn,MARKUP_ANNOTATION_STATE:st.MARKUP_ANNOTATION_STATE},AnnotFlag:Tr},form:{constant:{Field_Flag:De,Field_Type:xe}},HeaderFooter:ly,DataEvents:et,Error_Code:dt,engine:{GraphicsObject:dv},Matrix:M,PDFPageBatchProcessor:Lv},xC={ViewerEvents:dC,STATE_HANDLER_NAMES:i,ANNOTATION_PERMISSION:Sh,OPEN_FILE_TYPE:xb,SNAP_MODE:Mc,PagePointType:to,PROGRESS_STATUS:Zm};const DC={BuiltinShortcutContext:Rr,BuiltinCommand:Ir,BuiltinShortcutCommand:Ir,Keyboard:_.KeyboardImpl,KeyboardUtils:_.KeyboardUtils,Shortcut:_.Shortcut,interceptors:_.interceptors},IC={COLLABORATION_ACTION:Dr,WebSocketCommunicator:GS},RC={PrintProgress:zS},TC=Y,FC={consts:{ADD_FONT_MAP_LIST:pA},shared:{Lazy:_.Lazy,attachKeypressEvent:_.attachKeypressEvent,preventFastClickByKeydown:_.preventFastClickByKeydown,createClickEvent:_.createClickEvent,stopPropagationOnShortcutEvent:_.stopPropagationOnShortcutEvent,IoCScope:_.IoCScope},form:{CFR_Utils:td}},_C={PDFPageRender:oo,PDFDocRender:qo,annotsRender:{AnnotRender:z,ViewerAnnotManager:pf}};window.PDF=EC}(),v}()}));